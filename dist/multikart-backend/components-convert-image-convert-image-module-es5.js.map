{"version":3,"sources":["webpack:///src/app/components/convert-image/convert-image.component.ts","webpack:///src/app/components/convert-image/convert-image.component.html","webpack:///src/app/components/convert-image/convert-image-routing.module.ts","webpack:///src/app/components/convert-image/convert-image.module.ts"],"names":["ConvertImageComponent","imageName","innerImageURL","selectedFile","config1","clickable","maxFiles","autoReset","errorReset","cancelReset","args","localStorage","setItem","dataURL","console","log","file","c","reader","FileReader","onload","event","result","updateFullMarkerImage","fullMarkerURL","name","substring","lastIndexOf","patternString","getItem","domElement","window","document","createElement","href","download","body","appendChild","click","removeChild","THREEx","ArPatternFile","encodeImageURL","onComplete","patternFileString","triggerDownload","fileName","URL","createObjectURL","Blob","type","imageURL","image","Image","encodeImage","src","canvas","context","getContext","width","height","orientation","Math","PI","save","clearRect","translate","rotate","drawImage","restore","imageData","getImageData","channelOffset","y","x","offset","value","data","String","padStart","buildFullMarker","pattRatio","size","color","whiteMargin","blackMargin","innerMargin","fillStyle","fillRect","innerImage","addEventListener","imageUrl","toDataURL","patternRatio","querySelector","imageSize","borderColor","nodeValue","hexaColor","test","markerUrl","fullMarkerImage","container","firstChild","s","Option","style","onUploadError","onUploadSuccess","downloadPattern","downloadImage","selector","templateUrl","styleUrls","routes","path","component","ConvertImageRoutingModule","forChild","imports","exports","DEFAULT_DROPZONE_CONFIG","maxFilesize","url","ConvertImageModule","provide","useValue","declarations","providers"],"mappings":"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","file":"components-convert-image-convert-image-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { DropzoneConfigInterface } from 'ngx-dropzone-wrapper';\ndeclare var THREEx:any;\n@Component({\n  selector: 'app-convert-image',\n  templateUrl: './convert-image.component.html',\n  styleUrls: ['./convert-image.component.scss']\n})\nexport class ConvertImageComponent implements OnInit {\n  fullMarkerURL:any;\n  imageName=null;\n  innerImageURL=\"assets/images/Barcode1.PNG\";\n  selectedFile: File = null;\n \npublic onUploadInit(args: any): void { }\n  \npublic onUploadError(args: any): void { }\n\npublic onUploadSuccess(args: any): void {    this.selectedFile = args[0];\n  localStorage.setItem('base64',args[0].dataURL);\nconsole.log(args[0]);\nvar file = args[0];\nvar c :any;\nvar reader = new FileReader();\n\t\treader.onload = function(event){\n\t\tc = reader.result\n    };\n    this.innerImageURL=c;\n    this. updateFullMarkerImage()\n\nthis.fullMarkerURL=args[0].dataURL;\n\t\tthis.imageName = file.name\n\t\tthis.imageName = this.imageName.substring(0, this.imageName.lastIndexOf('.')) || this.imageName\n}\n\npublic config1: DropzoneConfigInterface = {\n  clickable: true,\n  maxFiles: 1,\n  autoReset: null,\n  errorReset: null,\n  cancelReset: null\n};\n  constructor() { }\n\n\n\ndownloadImage(){\n\tvar patternString= localStorage.getItem('markerUrl');\n \n    var domElement = window.document.createElement('a');\n\t\tdomElement.href = patternString;\n\t\tdomElement.download = \"pattern-\" + (this.imageName || 'marker') + '.png';\n\t\tdocument.body.appendChild(domElement)\n\t\tdomElement.click();\n\t\tdocument.body.removeChild(domElement)\n  this.updateFullMarkerImage();\n}\n \ndownloadPattern(){\n\nvar patternString= localStorage.getItem('markerUrl');\n\n\n  THREEx.ArPatternFile.encodeImageURL(patternString, function onComplete(patternFileString){\n    THREEx.ArPatternFile.triggerDownload (patternFileString,\"pattern-marker.patt\");\n  })\n  THREEx.ArPatternFile.triggerDownload =  function(patternFileString, fileName = 'pattern-marker.patt'){\n    // tech from https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server\n    var domElement = window.document.createElement('a');\n    domElement.href = window.URL.createObjectURL(new Blob([patternFileString], {type: 'text/plain'}));\n    domElement.download = fileName;\n    document.body.appendChild(domElement)\n    domElement.click();\n    document.body.removeChild(domElement)\n  }\n}\n\nupdateFullMarkerImage(){\n  \nTHREEx.ArPatternFile.encodeImageURL = function(imageURL,onComplete):any{\n\tvar image = new Image;\n\timage.onload = function(){\n\t\tvar patternFileString = THREEx.ArPatternFile.encodeImage(image)\n    onComplete(patternFileString)\n\t}\n  image.src = imageURL;\n  return image;\n\n}\nTHREEx.ArPatternFile.encodeImage = function(image){\n\t// copy image on canvas\n\tvar canvas = document.createElement('canvas');\n\tvar context = canvas.getContext('2d')\n\tcanvas.width = 16;\n\tcanvas.height = 16;\n\n\t// document.body.appendChild(canvas)\n\t// canvas.style.width = '200px'\n\n\n\tvar patternFileString = ''\n\tfor(var orientation = 0; orientation > -2*Math.PI; orientation -= Math.PI/2){\n\t\t// draw on canvas - honor orientation\n\t\tcontext.save();\n \t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\tcontext.translate(canvas.width/2,canvas.height/2);\n\t\tcontext.rotate(orientation);\n\t\tcontext.drawImage(image, -canvas.width/2,-canvas.height/2, canvas.width, canvas.height);\n\t\tcontext.restore();\n\n\t\t// get imageData\n\t\tvar imageData = context.getImageData(0, 0, canvas.width, canvas.height)\n\n\t\t// generate the patternFileString for this orientation\n\t\tif( orientation !== 0 )\tpatternFileString += '\\n'\n\t\t// NOTE bgr order and not rgb!!! so from 2 to 0\n\t\tfor(var channelOffset = 2; channelOffset >= 0; channelOffset--){\n\t\t\t// console.log('channelOffset', channelOffset)\n\t\t\tfor(var y = 0; y < imageData.height; y++){\n\t\t\t\tfor(var x = 0; x < imageData.width; x++){\n\n\t\t\t\t\tif( x !== 0 ) patternFileString += ' '\n\n\t\t\t\t\tvar offset = (y*imageData.width*4) + (x * 4) + channelOffset\n\t\t\t\t\tvar value = imageData.data[offset]\n\n\t\t\t\t\tpatternFileString += String(value).padStart(3);\n\t\t\t\t}\n\t\t\t\tpatternFileString += '\\n'\n\t\t\t}\n\t\t}\n\t}\n\n\treturn patternFileString\n}\n\nTHREEx.ArPatternFile.buildFullMarker =  function(innerImageURL, pattRatio, size, color,onComplete):any{\n\tvar whiteMargin = 0.1\n\tvar blackMargin = (1 - 2 * whiteMargin) * ((1-pattRatio)/2)\n\t// var blackMargin = 0.2\n\n\tvar innerMargin = whiteMargin + blackMargin\n\n\tvar canvas = document.createElement('canvas');\n\tvar context = canvas.getContext('2d')\n\tcanvas.width = canvas.height = size\n\n\tcontext.fillStyle = 'white';\n\tcontext.fillRect(0,0,canvas.width, canvas.height)\n\n\t// copy image on canvas\n\tcontext.fillStyle = color;\n\tcontext.fillRect(\n\t\twhiteMargin * canvas.width,\n\t\twhiteMargin * canvas.height,\n\t\tcanvas.width * (1-2*whiteMargin),\n\t\tcanvas.height * (1-2*whiteMargin)\n\t);\n\n\t// clear the area for innerImage (in case of transparent image)\n\tcontext.fillStyle = 'white';\n\tcontext.fillRect(\n\t\tinnerMargin * canvas.width,\n\t\tinnerMargin * canvas.height,\n\t\tcanvas.width * (1-2*innerMargin),\n\t\tcanvas.height * (1-2*innerMargin)\n\t);\n\n\n\t// display innerImage in the middle\n\tvar innerImage = document.createElement('img')\n\tinnerImage.addEventListener('load', function(){\n\t\t// draw innerImage\n\t\tcontext.drawImage(innerImage,\n\t\t\tinnerMargin * canvas.width,\n\t\t\tinnerMargin * canvas.height,\n\t\t\tcanvas.width * (1-2*innerMargin),\n\t\t\tcanvas.height * (1-2*innerMargin)\n\t\t);\n\n\t\tvar imageUrl = canvas.toDataURL()\n\t\tonComplete(imageUrl)\n\t})\n\tinnerImage.src = innerImageURL\n}\n  var patternRatio = document.querySelector('#patternRatioSlider')\n  var imageSize = document.querySelector('#imageSize')\n  var borderColor = document.querySelector('#borderColor').nodeValue\n  this.innerImageURL=localStorage.getItem('base64');\n  function hexaColor(color) {\n    return /^#[0-9A-F]{6}$/i.test(color);\n  };\n\n  THREEx.ArPatternFile.buildFullMarker(this.innerImageURL, 0.50, 512\t, \"black\", function onComplete(markerUrl){\n\t  if (markerUrl){\n localStorage.setItem('markerUrl',markerUrl);}\n\tconsole.log(markerUrl);\n\n\tvar fullMarkerImage = document.createElement('img')\n\tfullMarkerImage.src = markerUrl\n\n\t// put fullMarkerImage into #imageContainer\n\tvar container = document.querySelector('#imageContainer')\n\twhile (container.firstChild) container.removeChild(container.firstChild);\n\tcontainer.appendChild(fullMarkerImage)\n})\n  var s = new Option().style;\n  s.color = borderColor;\n    if (borderColor === '' || (s.color != borderColor && !hexaColor(borderColor))) {\n    // if color not valid, use black\n    borderColor = 'black';\n  }\n\n}\n\n\n  ngOnInit(): void {\n    this.updateFullMarkerImage();\n  }\n\n}\n","<!DOCTYPE html>\n<title></title>\n<!-- include mdl -->\n<link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>\n<link rel='stylesheet' href='https://code.getmdl.io/1.3.0/material.indigo-pink.min.css'>\n<script defer src='https://code.getmdl.io/1.3.0/material.min.js'></script>\n<link href='https://fonts.googleapis.com/icon?family=Material+Icons' rel='stylesheet'>\n<script src='../../vendor/three.js/build/three.js'></script>\n<script src='../../vendor/three.js/examples/js/libs/stats.min.js'></script>\n<!-- jsartookit -->\n<script src='../../../vendor/jsartoolkit5/build/artoolkit.min.js'></script>\n<script src='../../../vendor/jsartoolkit5/js/artoolkit.api.js'></script>\n<!-- include threex.artoolkit -->\n<script src='../../../src/threex/threex-artoolkitsource.js'></script>\n<script src='../../../src/threex/threex-artoolkitcontext.js'></script>\n<script src='../../../src/threex/threex-artoolkitprofile.js'></script>\n<script src='../../../src/threex/threex-arbasecontrols.js'></script>\n<script src='../../../src/threex/threex-armarkercontrols.js'></script>\n<script src='../../../src/threex/threex-arsmoothedcontrols.js'></script>\n<script>THREEx.ArToolkitContext.baseURL = '../../../'</script>\n<!-- Include pdfMake - http://pdfmake.org/ -->\n<script src='../../vendor/pdfMake/pdfmake.min.js'></script>\n<script src='../../vendor/pdfMake/vfs_fonts.js'></script>\n\n<!-- include THREEx.ArPatternFile -->\n\n<style media='screen'>\n\tbody {\n\t\tfont-family: arial;\n\t\tbackground-color: #eee;\n\t}\n\th1 {\n\t\ttext-align: center;\n\t\tfont-size: 500%;\n\t}\n\tdiv.mdl-cell {\n\t\ttext-align: center;\n\t}\n\n\th1 a {\n\t\ttext-decoration: none;\n\t}\n\th1 a:hover {\n\t\ttext-decoration: underline;\n\t}\n\n\t#imageContainer img {\n\t\twidth: 100%;\n\t\tmax-width: 512px;\n\t}\n\n\t#topRightButtons {\n\t\tposition: fixed;\n\t\ttop: 1em;\n\t\tright: 1em;\n\t}\n</style>\n<body >\n\n\n<!-- *********************************************************************** -->\n<!-- *********************************************************************** -->\n<!-- *********************************************************************** -->\n<div id='topRightButtons'>\n\t<button id=\"show-info\" class=\"mdl-button mdl-js-button mdl-button--fab mdl-button--colored\">\n\t\t<i class=\"material-icons\">info_outline</i>\n\t</button>\n</div>\n<dialog style='width:400px' id='dialog-info' class=\"mdl-dialog\">\n\t<h4 class=\"mdl-dialog__title\">Welcome!</h4>\n\t<div class=\"mdl-dialog__content\">\n\t\tDetails on how to pick the inner image can be found <a target='_blank' href='https://artoolkit.org/documentation/doku.php?id=3_Marker_Training:marker_training'>here</a>\n\t</div>\n\t<div class=\"mdl-dialog__actions\">\n\t\t<button type=\"button\" class=\"mdl-button\">OK</button>\n\t</div>\n</dialog>\n<script>\n\tvar dialogElement = document.querySelector('#dialog-info')\n\tif (! dialogElement.showModal) {\n\t\tdialogElementPolyfill.registerDialog(dialogElement)\n\t}\n\tdialogElement.querySelector('.mdl-dialog__actions button').addEventListener('click', function() {\n\t\tdialogElement.close()\n\t})\n\n\tvar showDialogButton = document.querySelector('#show-info')\n\tshowDialogButton.addEventListener('click', function() {\n\t\tdialogElement.showModal()\n\t})\n</script>\n\n<!-- *********************************************************************** -->\n<!-- *********************************************************************** -->\n<!-- *********************************************************************** -->\n<div class='mdl-grid'>\n\t<div class='mdl-cell mdl-cell--4-col'>\n\t\t<div class=\"card-body dropzone-custom p-0\">\n\t\t\t<div class=\"dropzone dropzone-primary\" [dropzone]=\"config1\" (error)=\"onUploadError($event)\"\n\t\t\t\t(success)=\"onUploadSuccess($event)\">\n\t\t\t\t<div class=\"dz-message needsclick\">\n\t\t\t\t\t<i class=\"fa fa-cloud-upload\"></i>\n\t\t\t\t\t<h4 class=\"mb-0 f-w-600\">Upload your Marker</h4>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class='mdl-tooltip' for='buttonUpload'>\n\t\t\tUpload the image to put inside the marker\n\t\t</div>\n\n\t\t<div style=\"justify-content: center\" class='mdl-grid'>\n\t\t\t\t<div class='mdl-cell mdl-cell--12-col'>\n\t\t\t\t<label class=\"mdl-js-ripple-effect\" for=\"patternRatioSlider\">\n\t\t\t\t\t<span class=\"\">Pattern Ratio 0.50</span>\n\t\t\t\t\t<input id='patternRatioSlider' class=\"mdl-slider mdl-js-slider\" type=\"range\" min=\"10\" max=\"90\" value=\"50\" >\n\t\t\t\t</label>\n\t\t\t\t<div class='mdl-tooltip' for='patternRatioSlider'>\n\t\t\t\t\tSet size of inner image vs black border\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div style=\"justify-content: center\" class='mdl-grid'>\n\t\t\t<div class='mdl-cell mdl-cell--12-col'>\n\t\t\t\t<label class=\"mdl-js-ripple-effect\" for=\"imageSize\">\n\t\t\t\t\t<span class=\"\">Image size 512px</span>\n\t\t\t\t\t<input id='imageSize' class=\"mdl-slider mdl-js-slider\" type=\"range\" min=\"150\" max=\"2500\" value=\"512\" >\n\t\t\t\t</label>\n\t\t\t\t<div class='mdl-tooltip' for='patternRatioSlider'>\n\t\t\t\t\tSet the pixel width/height of the image.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div style=\"justify-content: center\" class='mdl-grid'>\n\t\t\t\t<div class='mdl-cell mdl-cell--12-col'>\n\t\t\t\t<label class=\"mdl-js-ripple-effect\" for=\"borderColor\">\n\t\t\t\t\t<span class=\"\">Border color. Please choose a dark one.</span>\n\t\t\t\t\t<input id='borderColor' type=\"text\" value=\"black\">\n\t\t\t\t</label>\n\t\t\t\t<div class='mdl-tooltip' for='borderColor'>\n\t\t\t\t\tSet the marker border color, using hexa code or color name.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\t<div class='mdl-cell mdl-cell--4-col'>\n\t\t<button id='buttonDownloadEncoded' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent'(click)=\"downloadPattern()\">\n\t\t\tDownload Marker\n\t\t</button>\n\t\t<div class='mdl-tooltip' for='buttonDownloadEncoded'>\n\t\t\tDownload marker encoded from the uploaded image\n\t\t</div>\n\t\t<br/>\n\t\t<br/>\n\t\t<button id='buttonDownloadFullImage' class='mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent' (click)=\"downloadImage()\">\n\t\t\tDownload Image\n\t\t</button>\n\t\t<div class='mdl-tooltip' for='buttonDownloadFullImage'>\n\t\t\tDownload marker image\n\t\t</div>\n\t</div>\n\t\n</div>\n\n<div class='mdl-grid'>\n\n\t<div class='mdl-cell mdl-cell--3-col'></div>\n\t<div class='mdl-cell mdl-cfell--6-col'>\n\t\t<div id='imageContainer'></div>\n\t</div>\n\t<div class='mdl-cell mdl-cell--3-col'>\n\n\n\n\t\t\n\t</div>\n</div>\n\n\n\n\n</body>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ConvertImageComponent } from './convert-image.component';\n\nconst routes: Routes = [  {\n  path: '',\n  component: ConvertImageComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ConvertImageRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ConvertImageRoutingModule } from './convert-image-routing.module';\nimport { DropzoneConfigInterface, DropzoneModule, DROPZONE_CONFIG } from 'ngx-dropzone-wrapper';\nimport { ConvertImageComponent } from './convert-image.component';\nimport { NgbActiveModal, NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../../shared/shared.module';\nconst DEFAULT_DROPZONE_CONFIG: DropzoneConfigInterface = {\n  maxFilesize: 50,\n  url: 'https://httpbin.org/post',\n};\n\n@NgModule({\n  declarations: [ConvertImageComponent],\n  imports: [\n    CommonModule,\n    ConvertImageRoutingModule,\n    NgbModule,\n    ReactiveFormsModule,\n    SharedModule,\n    DropzoneModule\n  ],\n  providers:[{ provide: DROPZONE_CONFIG,\n    useValue: DEFAULT_DROPZONE_CONFIG},\n    NgbActiveModal]\n})\nexport class ConvertImageModule { }\n"]}