{"version":3,"file":"ej2-grids.min.js","sources":["../../src/grid/services/aria-service.js","../../src/grid/actions/print.js","../../src/grid/base/util.js","../../src/grid/actions/aggregate.js","../../src/grid/renderer/datepicker-edit-cell.js","../../src/grid/renderer/virtual-freeze-renderer.js","../../src/grid/services/value-formatter.js","../../src/grid/models/column.js","../../src/grid/base/constant.js","../../src/grid/base/enum.js","../../src/grid/actions/data.js","../../src/grid/models/row.js","../../src/grid/models/cell.js","../../src/grid/renderer/cell-merge-renderer.js","../../src/grid/renderer/row-renderer.js","../../src/grid/services/row-model-generator.js","../../src/grid/services/summary-model-generator.js","../../src/grid/services/group-model-generator.js","../../src/grid/renderer/content-renderer.js","../../src/grid/renderer/header-renderer.js","../../src/grid/renderer/cell-renderer.js","../../src/grid/renderer/header-cell-renderer.js","../../src/grid/renderer/stacked-cell-renderer.js","../../src/grid/renderer/indent-cell-renderer.js","../../src/grid/renderer/caption-cell-renderer.js","../../src/grid/renderer/expand-cell-renderer.js","../../src/grid/renderer/header-indent-renderer.js","../../src/grid/renderer/detail-header-indent-renderer.js","../../src/grid/renderer/detail-expand-cell-renderer.js","../../src/grid/renderer/row-drag-drop-renderer.js","../../src/grid/renderer/row-drag-header-indent-render.js","../../src/grid/renderer/render.js","../../src/grid/services/cell-render-factory.js","../../src/grid/renderer/responsive-dialog-renderer.js","../../src/grid/services/service-locator.js","../../src/grid/services/renderer-factory.js","../../src/grid/services/width-controller.js","../../src/grid/services/focus-strategy.js","../../src/grid/models/page-settings.js","../../src/grid/models/column-chooser-settings.js","../../src/grid/actions/selection.js","../../src/grid/actions/search.js","../../src/grid/actions/show-hide.js","../../src/grid/actions/scroll.js","../../src/grid/models/aggregate.js","../../src/grid/actions/clipboard.js","../../src/grid/actions/blazor-action.js","../../src/grid/base/grid.js","../../src/grid/common/checkbox-filter-base.js","../../src/grid/common/excel-filter-base.js","../../src/grid/actions/sort.js","../../src/pager/numeric-container.js","../../src/pager/pager-message.js","../../src/pager/pager.js","../../src/pager/pager-dropdown.js","../../src/pager/external-message.js","../../src/grid/actions/page.js","../../src/grid/renderer/filter-cell-renderer.js","../../src/grid/renderer/filter-menu-operator.js","../../src/grid/renderer/string-filter-ui.js","../../src/grid/renderer/number-filter-ui.js","../../src/grid/renderer/boolean-filter-ui.js","../../src/grid/renderer/date-filter-ui.js","../../src/grid/renderer/filter-menu-renderer.js","../../src/grid/actions/checkbox-filter.js","../../src/grid/actions/excel-filter.js","../../src/grid/actions/filter.js","../../src/grid/actions/resize.js","../../src/grid/actions/reorder.js","../../src/grid/actions/row-reorder.js","../../src/grid/actions/group.js","../../src/grid/actions/detail-row.js","../../src/grid/actions/toolbar.js","../../src/grid/renderer/footer-renderer.js","../../src/grid/renderer/summary-cell-renderer.js","../../src/grid/services/intersection-observer.js","../../src/grid/services/virtual-row-model-generator.js","../../src/grid/renderer/virtual-content-renderer.js","../../src/grid/actions/virtual-scroll.js","../../src/grid/renderer/inline-edit-renderer.js","../../src/grid/renderer/batch-edit-renderer.js","../../src/grid/renderer/dialog-edit-renderer.js","../../src/grid/renderer/edit-renderer.js","../../src/grid/renderer/boolean-edit-cell.js","../../src/grid/renderer/dropdown-edit-cell.js","../../src/grid/renderer/numeric-edit-cell.js","../../src/grid/renderer/default-edit-cell.js","../../src/grid/actions/normal-edit.js","../../src/grid/actions/inline-edit.js","../../src/grid/actions/batch-edit.js","../../src/grid/actions/dialog-edit.js","../../src/grid/renderer/template-edit-cell.js","../../src/grid/actions/edit.js","../../src/grid/actions/column-chooser.js","../../src/grid/actions/export-helper.js","../../src/grid/actions/excel-export.js","../../src/grid/actions/pdf-export.js","../../src/grid/renderer/command-column-renderer.js","../../src/grid/actions/command-column.js","../../src/grid/actions/context-menu.js","../../src/grid/services/freeze-row-model-generator.js","../../src/grid/renderer/freeze-renderer.js","../../src/grid/renderer/column-freeze-renderer.js","../../src/grid/actions/freeze.js","../../src/grid/actions/column-menu.js","../../src/grid/actions/foreign-key.js","../../src/grid/actions/logger.js","../../src/grid/actions/infinite-scroll.js","../../src/grid/renderer/group-lazy-load-renderer.js","../../src/grid/actions/lazy-load-group.js","../../src/grid/renderer/autocomplete-edit-cell.js","../../src/grid/renderer/combobox-edit-cell.js","../../src/grid/renderer/multiselect-edit-cell.js","../../src/grid/renderer/timepicker-edit-cell.js","../../src/grid/renderer/toggleswitch-edit-cell.js","../../src/grid/renderer/inputmask-edit-cell.js","../../src/global.js"],"sourcesContent":["/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        for (var i = 0; i < props.length; i++) {\n            setStateAndProperties(target, config[props[i]], options[props[i]]);\n        }\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove && target) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount',\n    rowcount: 'aria-rowcount'\n};\n","import { print as printWindow, createElement, detach, classList, selectAll, extend } from '@syncfusion/ej2-base';\nimport { getPrintGridModel } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\nimport { Deferred } from '@syncfusion/ej2-data';\n/**\n * @hidden\n */\nexport function getCloneProperties() {\n    return ['aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString', 'enableRtl',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging', 'hierarchyPrintMode', 'searchSettings',\n        'queryCellInfo', 'beforeDataBound'];\n}\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.defered = new Deferred();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.isContentReady(), this);\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.on(events.hierarchyPrint, this.hierarchyPrint, this);\n        this.scrollModule = scrollModule;\n    }\n    Print.prototype.isContentReady = function () {\n        var _this = this;\n        if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === 'None' || !this.parent.childGrid)) {\n            return this.contentReady;\n        }\n        return function () {\n            _this.defered.promise.then(function () {\n                _this.contentReady();\n            });\n            if (_this.isPrintGrid()) {\n                _this.hierarchyPrint();\n            }\n        };\n    };\n    Print.prototype.hierarchyPrint = function () {\n        this.removeColGroup(this.parent);\n        var printGridObj = window.printGridObj;\n        if (printGridObj && !printGridObj.element.querySelector('[aria-busy=true')) {\n            printGridObj.printModule.defered.resolve();\n        }\n    };\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](grid/#printmode-string/).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        element.classList.remove('e-gridhover');\n        document.body.appendChild(element);\n        var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));\n        if (gObj.isFrozenGrid() && !gObj.getFrozenColumns()) {\n            for (var i = 0; i < printGrid.columns.length; i++) {\n                printGrid.columns[i] = extend({}, printGrid.columns[i]);\n                printGrid.columns[i].freeze = undefined;\n            }\n        }\n        /* tslint:disable-next-line:no-any */\n        if (this.parent.isAngular) {\n            /* tslint:disable-next-line:no-any */\n            printGrid.viewContainerRef = this.parent.viewContainerRef;\n        }\n        /* tslint:disable:no-empty */\n        printGrid.load = function () { };\n        printGrid.query = gObj.getQuery().clone();\n        window.printGridObj = printGrid;\n        printGrid.isPrinting = true;\n        var modules = printGrid.getInjectedModules();\n        var injectedModues = gObj.getInjectedModules();\n        if (!modules || modules.length !== injectedModues.length) {\n            printGrid.setInjectedModules(injectedModues);\n        }\n        gObj.notify(events.printGridInit, { element: element, printgrid: printGrid });\n        this.parent.log('exporting_begin', this.getModuleName());\n        printGrid.registeredTemplate = this.parent.registeredTemplate;\n        printGrid.appendTo(element);\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false,\n                hierarchyPrintMode: gObj.hierarchyPrintMode\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') { // if scroller enabled\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj);\n            }\n        }\n        // hide horizontal scroll\n        for (var _i = 0, _a = [].slice.call(gObj.element.querySelectorAll('.e-content')); _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.style.overflowX = 'hidden';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {\n            var element = _c[_b];\n            classList(element, ['e-spin-hide'], ['e-spin-show']);\n        }\n        this.printGridElement(gObj);\n        gObj.isPrinting = false;\n        delete window.printGridObj;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n        this.parent.log('exporting_complete', this.getModuleName());\n    };\n    Print.prototype.printGridElement = function (gObj) {\n        classList(gObj.element, ['e-print-grid-layout'], ['e-print-grid']);\n        if (gObj.isPrinting) {\n            detach(gObj.element);\n        }\n        this.printWind = printWindow(gObj.element, this.printWind);\n    };\n    Print.prototype.removeColGroup = function (gObj) {\n        var depth = gObj.groupSettings.columns.length;\n        var element = gObj.element;\n        var id = '#' + gObj.element.id;\n        if (!depth) {\n            return;\n        }\n        var groupCaption = selectAll(id + \"captioncell.e-groupcaption\", element);\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = selectAll(\"colgroup\" + id + \"colGroup\", element);\n        var contentColGroups = selectAll('.e-content colgroup', element);\n        this.hideColGroup(colGroups, depth);\n        this.hideColGroup(contentColGroups, depth);\n    };\n    Print.prototype.hideColGroup = function (colGroups, depth) {\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].children[j].style.display = 'none';\n            }\n        }\n    };\n    /**\n     * To destroy the print\n     * @hidden\n     */\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent.isPrinting;\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n        this.parent.off(events.hierarchyPrint, this.hierarchyPrint);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = getCloneProperties().concat([events.beforePrint, events.printComplete, events.load]);\n    return Print;\n}());\nexport { Print };\n","import { ChildProperty, compile as baseTemplateComplier, setValue, Internationalization, isUndefined, closest } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { isObject, isBlazor, Browser, select, selectAll } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { Print } from '../actions/print';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, data);\n}\n/**\n * Defines the method used to apply custom header cell values from external function and display this on each header cell rendered.\n * @param  {string} field\n * @param  {IColumn} column\n * @hidden\n */\nexport function headerValueAccessor(field, column) {\n    return (isNullOrUndefined(field) || field === '') ? '' : DataUtil.getObject(field, column);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function isExportColumns(exportProperties) {\n    return !isNullOrUndefined(exportProperties) &&\n        !isNullOrUndefined(exportProperties.columns) && exportProperties.columns.length > 0;\n}\n/**\n * @hidden\n */\nexport function updateColumnTypeForExportColumns(exportProperties, gObj) {\n    var exportColumns = exportProperties.columns;\n    var gridColumns = gObj.columns;\n    for (var i = 0; i < exportColumns.length; i++) {\n        if (gridColumns.length - 1 >= i) {\n            if (gridColumns[i].columns) {\n                for (var j = 0; j < gridColumns[i].columns.length; j++) {\n                    exportColumns[i].columns[j].type = gridColumns[i].columns[j].type;\n                }\n            }\n            else {\n                exportColumns[i].type = gridColumns[i].type;\n            }\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function updatecloneRow(grid) {\n    var nRows = [];\n    var actualRows = grid.vRows;\n    for (var i = 0; i < actualRows.length; i++) {\n        if (actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n        }\n        else if (!actualRows[i].isDataRow) {\n            nRows.push(actualRows[i]);\n            if (!actualRows[i].isExpand && actualRows[i].isCaptionRow) {\n                i += getCollapsedRowsCount(actualRows[i], grid);\n            }\n        }\n    }\n    grid.vcRows = nRows;\n}\n/**\n * @hidden\n */\nvar count = 0;\nexport function getCollapsedRowsCount(val, grid) {\n    count = 0;\n    var gSummary = 'gSummary';\n    var total = 'count';\n    var gLen = grid.groupSettings.columns.length;\n    var records = 'records';\n    var items = 'items';\n    var value = val[gSummary];\n    var dataRowCnt = 0;\n    var agrCnt = 'aggregatesCount';\n    if (value === val.data[total]) {\n        if (grid.groupSettings.columns.length && !isNullOrUndefined(val[agrCnt]) && val[agrCnt]) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += (val.indent !== 0 && (value) < 2) ? (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent) * val[agrCnt])) :\n                    (val[gSummary] * ((gLen - val.indent) + (gLen - val.indent - 1) * val[agrCnt])) + val[agrCnt];\n            }\n            else if (grid.groupSettings.columns.length === 1) {\n                count += (val[gSummary] * (gLen - val.indent)) + val[agrCnt];\n            }\n        }\n        else if (grid.groupSettings.columns.length) {\n            if (grid.groupSettings.columns.length !== 1) {\n                count += val[gSummary] * (grid.groupSettings.columns.length - val.indent);\n            }\n            else {\n                count += val[gSummary];\n            }\n        }\n        return count;\n    }\n    else {\n        for (var i = 0, len = val.data[items].length; i < len; i++) {\n            var gLevel = val.data[items][i];\n            count += gLevel[items].length + ((gLen !== grid.columns.length) &&\n                !isNullOrUndefined(gLevel[items][records]) ? gLevel[items][records].length : 0);\n            dataRowCnt += (!isNullOrUndefined(gLevel[items][records]) && !isNullOrUndefined(val[agrCnt])) ? gLevel[items][records].length :\n                gLevel[items].length;\n            if (gLevel[items].GroupGuid && gLevel[items].childLevels !== 0) {\n                recursive(gLevel);\n            }\n        }\n        count += val.data[items].length;\n        if (!isNullOrUndefined(val[agrCnt])) {\n            if (val[agrCnt] && count && dataRowCnt !== 0) {\n                count += ((count - dataRowCnt) * val[agrCnt]) + val[agrCnt];\n            }\n        }\n    }\n    return count;\n}\n/**\n * @hidden\n */\nexport function recursive(row) {\n    var items = 'items';\n    var rCount = 'count';\n    for (var j = 0, length_1 = row[items].length; j < length_1; j++) {\n        var nLevel = row[items][j];\n        count += nLevel[rCount];\n        if (nLevel[items].childLevels !== 0) {\n            recursive(nLevel);\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    var values = Object.keys(moved);\n    for (var i = 0; i < values.length; i++) {\n        if (exclude && exclude.indexOf(values[i]) !== -1) {\n            delete moved[values[i]];\n        }\n    }\n    return moved;\n}\n/** @hidden */\nexport function setColumnIndex(columnModel, ind) {\n    if (ind === void 0) { ind = 0; }\n    for (var i = 0, len = columnModel.length; i < len; i++) {\n        if (columnModel[i].columns) {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n            ind = setColumnIndex(columnModel[i].columns, ind);\n        }\n        else {\n            columnModel[i].index = isNullOrUndefined(columnModel[i].index) ? ind : columnModel[i].index;\n            ind++;\n        }\n    }\n    return ind;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth, gObj) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] }, gObj);\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c], gObj);\n            }\n            else {\n                columns[c].columns = prepareColumns(columns[c].columns, null, gObj);\n                column = new Column(columns[c], gObj);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        if (column.type && column.type.toLowerCase() === 'checkbox') {\n            column.allowReordering = false;\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nvar actualRowHeight;\n/** @hidden */\nexport function getActualRowHeight(element) {\n    if (actualRowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('tr').getBoundingClientRect();\n    element.removeChild(table);\n    return rect.height;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/\\./g, '___');\n}\n/** @hidden */\nexport function setComplexFieldID(field) {\n    if (field === void 0) { field = ''; }\n    return field.replace(/___/g, '.');\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = select('#' + inst.element.id + 'EditConfirm', inst.element);\n    return inst.editSettings.mode === 'Batch' &&\n        (selectAll('.e-updatedtd', inst.element).length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column, isServerRendered) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    var format = 'format';\n    var args;\n    if (column.type === 'date' || column.type === 'datetime') {\n        args = { type: column.type, skeleton: column.format };\n        if (isBlazor() && isServerRendered) {\n            var isServer = 'isServerRendered';\n            args[isServer] = isServerRendered;\n        }\n        if ((typeof (column.format) === 'string') && column.format !== 'yMd') {\n            args[format] = column.format;\n        }\n    }\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction(args));\n            column.setParser(fmtr.getParserFunction(args));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction(args));\n            column.setParser(fmtr.getParserFunction(args));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n    dialogObj.element.style.display = elementVisible;\n    dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n    var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n    if (leftPos < 1) {\n        dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n    }\n    else {\n        dialogObj.element.style.left = leftPos + -4 + 'px';\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    var input = span.previousSibling;\n    if (span.classList.contains('e-check')) {\n        input.checked = false;\n        classList(span, ['e-uncheck'], ['e-check']);\n    }\n    else {\n        input.checked = true;\n        classList(span, ['e-check'], ['e-uncheck']);\n    }\n}\n/** @hidden */\nexport function setChecked(elem, checked) {\n    elem.checked = checked;\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    for (var i = 0; i < columns.length; i++) {\n        setValue(columns[i].field, getForeignData(columns[i], data), row.foreignKeyData);\n    }\n    var cells = row.cells;\n    for (var i = 0; i < cells.length; i++) {\n        if (cells[i].isForeignKey) {\n            setValue('foreignKeyData', getValue(cells[i].column.field, row.foreignKeyData), cells[i]);\n        }\n    }\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (!isNullOrUndefined(lValue) ? lValue : valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || ((column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData);\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    if (isNullOrUndefined(filterObject.value)) {\n        datePredicate = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        return datePredicate;\n    }\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols, gObj) {\n    frzCols = frzCols && gObj && gObj.isRowDragable() ? frzCols + 1 : frzCols;\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n/**\n * @hidden\n */\nexport function isGroupAdaptive(grid) {\n    return grid.enableVirtualization && grid.groupSettings.columns.length > 0 && grid.isVirtualAdaptive;\n}\n/**\n * @hidden\n */\nexport function getObject(field, object) {\n    if (field === void 0) { field = ''; }\n    if (field) {\n        var value = object;\n        var splits = field.split('.');\n        for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {\n            value = value[splits[i]];\n        }\n        return value;\n    }\n}\n/**\n * @hidden\n */\nexport function getCustomDateFormat(format, colType) {\n    var intl = new Internationalization();\n    var formatvalue;\n    var formatter = 'format';\n    var type = 'type';\n    if (colType === 'date') {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'date', format: format[formatter] }, false) :\n            isBlazor() ? intl.getDatePattern({ type: 'dateTime', format: format }, false) :\n                intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    else {\n        formatvalue = typeof (format) === 'object' ?\n            intl.getDatePattern({ type: format[type] ? format[type] : 'dateTime', format: format[formatter] }, false) :\n            isBlazor() ? intl.getDatePattern({ type: 'dateTime', format: format }, false) :\n                intl.getDatePattern({ type: 'dateTime', skeleton: format }, false);\n    }\n    return formatvalue;\n}\n/**\n * @hidden\n */\nexport function getExpandedState(gObj, hierarchyPrintMode) {\n    var rows = gObj.getRowsObject();\n    var obj = {};\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        if (row.isExpand && !row.isDetailRow) {\n            var index = gObj.allowPaging && gObj.printMode === 'AllPages' ? row.index +\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : row.index;\n            obj[index] = {};\n            obj[index].isExpand = true;\n            obj[index].gridModel = getPrintGridModel(row.childGrid, hierarchyPrintMode);\n            obj[index].gridModel.query = gObj.childGrid.query;\n        }\n    }\n    return obj;\n}\n/**\n * @hidden\n */\nexport function getPrintGridModel(gObj, hierarchyPrintMode) {\n    if (hierarchyPrintMode === void 0) { hierarchyPrintMode = 'Expanded'; }\n    var printGridModel = {};\n    if (!gObj) {\n        return printGridModel;\n    }\n    var isFrozen = gObj.isFrozenGrid() && !gObj.getFrozenColumns();\n    for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key === 'columns') {\n            printGridModel[key] = getActualPropFromColl(isFrozen ? gObj.getColumns() : gObj[key]);\n        }\n        else if (key === 'allowPaging') {\n            printGridModel[key] = gObj.printMode === 'CurrentPage';\n        }\n        else {\n            printGridModel[key] = getActualProperties(gObj[key]);\n        }\n    }\n    printGridModel['enableHover'] = false;\n    if (gObj.childGrid && hierarchyPrintMode !== 'None') {\n        printGridModel.expandedRows = getExpandedState(gObj, hierarchyPrintMode);\n    }\n    return printGridModel;\n}\n/**\n * @hidden\n */\nexport function extendObjWithFn(copied, first, second, deep) {\n    var res = copied || {};\n    var len = arguments.length;\n    if (deep) {\n        len = len - 1;\n    }\n    for (var i = 1; i < len; i++) {\n        if (!arguments[i]) {\n            continue;\n        }\n        var obj1 = arguments[i];\n        var keys = Object.keys(Object.getPrototypeOf(obj1)).length ?\n            Object.keys(obj1).concat(getPrototypesOfObj(obj1)) : Object.keys(obj1);\n        for (var i_1 = 0; i_1 < keys.length; i_1++) {\n            var source = res[keys[i_1]];\n            var cpy = obj1[keys[i_1]];\n            var cln = void 0;\n            if (deep && (isObject(cpy) || Array.isArray(cpy))) {\n                if (isObject(cpy)) {\n                    cln = source ? source : {};\n                    res[keys[i_1]] = baseExtend({}, cln, cpy, deep);\n                }\n                else {\n                    cln = source ? source : [];\n                    res[keys[i_1]] = baseExtend([], cln, cpy, deep);\n                }\n            }\n            else {\n                res[keys[i_1]] = cpy;\n            }\n        }\n    }\n    return res;\n}\n/**\n * @hidden\n */\nfunction getPrototypesOfObj(obj) {\n    var keys = [];\n    while (Object.getPrototypeOf(obj) && Object.keys(Object.getPrototypeOf(obj)).length) {\n        keys = keys.concat(Object.keys(Object.getPrototypeOf(obj)));\n        obj = Object.getPrototypeOf(obj);\n    }\n    return keys;\n}\n/**\n * @hidden\n */\nexport function measureColumnDepth(column) {\n    var max = 0;\n    for (var i = 0; i < column.length; i++) {\n        var depth = checkDepth(column[i], 0);\n        if (max < depth) {\n            max = depth;\n        }\n    }\n    return max + 1;\n}\n/**\n * @hidden\n */\nexport function checkDepth(col, index) {\n    var max = index;\n    var indices = [];\n    if (col.columns) {\n        index++;\n        for (var i = 0; i < col.columns.length; i++) {\n            indices[i] = checkDepth(col.columns[i], index);\n        }\n        for (var j = 0; j < indices.length; j++) {\n            if (max < indices[j]) {\n                max = indices[j];\n            }\n        }\n        index = max;\n    }\n    return index;\n}\n/**\n * @hidden\n */\nexport function refreshFilteredColsUid(gObj, filteredCols) {\n    for (var i = 0; i < filteredCols.length; i++) {\n        filteredCols[i].uid = filteredCols[i].isForeignKey ?\n            getColumnByForeignKeyValue(filteredCols[i].field, gObj.getForeignKeyColumns()).uid\n            : gObj.getColumnByField(filteredCols[i].field).uid;\n    }\n}\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n/**\n * @hidden\n */\nexport function getTransformValues(element) {\n    var style = document.defaultView.getComputedStyle(element, null);\n    var transformV = style.getPropertyValue('transform');\n    var replacedTv = transformV.replace(/,/g, '');\n    var translateX = parseFloat((replacedTv).split(' ')[4]);\n    var translateY = parseFloat((replacedTv).split(' ')[5]);\n    return { width: translateX, height: translateY };\n}\n/** @hidden */\nexport function applyBiggerTheme(rootElement, element) {\n    if (rootElement.classList.contains('e-bigger')) {\n        element.classList.add('e-bigger');\n    }\n}\n/** @hidden */\nexport function alignFrozenEditForm(mTD, fTD) {\n    if (mTD && fTD) {\n        var mHeight = closest(mTD, '.e-row').getBoundingClientRect().height;\n        var fHeight = closest(fTD, '.e-row').getBoundingClientRect().height;\n        if (mHeight > fHeight) {\n            fTD.style.height = mHeight + 'px';\n        }\n        else {\n            mTD.style.height = fHeight + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function ensureLastRow(row, gridObj) {\n    var cntOffset = gridObj.getContent().firstElementChild.offsetHeight;\n    return row && row.getBoundingClientRect().top > cntOffset;\n}\n/** @hidden */\nexport function ensureFirstRow(row, rowTop) {\n    return row && row.getBoundingClientRect().top < rowTop;\n}\n/** @hidden */\nexport function isRowEnteredInGrid(index, gObj) {\n    var rowHeight = gObj.getRowHeight();\n    var startIndex = gObj.getContent().firstElementChild.scrollTop / rowHeight;\n    var endIndex = startIndex + (gObj.getContent().firstElementChild.offsetHeight / rowHeight);\n    return index < endIndex && index > startIndex;\n}\n/** @hidden */\nexport function getEditedDataIndex(gObj, data) {\n    var keyField = gObj.getPrimaryKeyFieldNames()[0];\n    var dataIndex;\n    gObj.getCurrentViewRecords().filter(function (e, index) {\n        if (e[keyField] === data[keyField]) {\n            dataIndex = index;\n        }\n    });\n    return dataIndex;\n}\n/** @hidden */\nexport function eventPromise(args, query) {\n    var state;\n    state = getStateEventArgument(query);\n    var def = new Deferred();\n    state.dataSource = def.resolve;\n    state.action = args;\n    return { state: state, deffered: def };\n}\n/** @hidden */\nexport function getStateEventArgument(query) {\n    var adaptr = new UrlAdaptor();\n    var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n    var state = adaptr.processQuery(dm, query);\n    var data = JSON.parse(state.data);\n    return data;\n}\n/** @hidden */\nexport function ispercentageWidth(gObj) {\n    var columns = gObj.getVisibleColumns();\n    var percentageCol = 0;\n    var undefinedWidthCol = 0;\n    for (var i = 0; i < columns.length; i++) {\n        if (isUndefined(columns[i].width)) {\n            undefinedWidthCol++;\n        }\n        else if (columns[i].width.toString().indexOf('%') !== -1) {\n            percentageCol++;\n        }\n    }\n    return (gObj.width === 'auto' || typeof (gObj.width) === 'string' && gObj.width.indexOf('%') !== -1) && Browser.info.name !== 'chrome'\n        && !gObj.groupSettings.showGroupedColumn && gObj.groupSettings.columns.length\n        && percentageCol && !undefinedWidthCol;\n}\n/** @hidden */\nexport function resetRowIndex(gObj, rows, rowElms, index) {\n    var startIndex = index ? index : 0;\n    for (var i = 0; i < rows.length; i++) {\n        if (rows[i].isDataRow) {\n            rows[i].index = startIndex;\n            rows[i].isAltRow = gObj.enableAltRow ? startIndex % 2 !== 0 : false;\n            rowElms[i].setAttribute('aria-rowindex', startIndex.toString());\n            rows[i].isAltRow ? rowElms[i].classList.add('e-altrow') : rowElms[i].classList.remove('e-altrow');\n            for (var j = 0; j < rowElms[i].cells.length; j++) {\n                rowElms[i].cells[j].setAttribute('index', startIndex.toString());\n            }\n            startIndex++;\n        }\n    }\n    if (!rows.length) {\n        gObj.renderModule.emptyRow(true);\n    }\n}\n/** @hidden */\nexport function resetRowObjectIndex(gObj, rows, index) {\n    var startIndex = index ? index : 0;\n    for (var i = 0; i < rows.length; i++) {\n        rows[i].index = startIndex;\n        startIndex++;\n    }\n}\n/** @hidden */\nexport function compareChanges(gObj, changes, type, keyField) {\n    var newArray = gObj.dataToBeUpdated[type].concat(changes[type]).reduce(function (r, o) {\n        r[o[keyField]] = r[o[keyField]] === undefined ? o : Object.assign(r[o[keyField]], o);\n        return r;\n    }, {});\n    gObj.dataToBeUpdated[type] = Object.keys(newArray).map(function (k) { return newArray[k]; });\n}\n/** @hidden */\nexport function setRowElements(gObj) {\n    if (gObj.isFrozenGrid()) {\n        (gObj).contentModule.rowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-movableheader .e-row, .e-movablecontent .e-row'));\n        var cls = gObj.getFrozenMode() === 'Left-Right' ? '.e-frozen-left-header .e-row, .e-frozen-left-content .e-row'\n            : '.e-frozenheader .e-row, .e-frozencontent .e-row';\n        (gObj).contentModule.freezeRowElements =\n            [].slice.call(gObj.element.querySelectorAll(cls));\n        if (gObj.getFrozenMode() === 'Left-Right') {\n            gObj.contentModule.frozenRightRowElements =\n                [].slice.call(gObj.element.querySelectorAll('.e-frozen-right-header .e-row, .e-frozen-right-content .e-row'));\n        }\n    }\n    else {\n        (gObj).contentModule.rowElements =\n            [].slice.call(gObj.element.querySelectorAll('.e-row:not(.e-addedrow)'));\n    }\n}\n/** @hidden */\nexport function splitFrozenRowObjectCells(gObj, cells, tableName) {\n    var left = gObj.getFrozenLeftCount();\n    var movable = gObj.getMovableColumnsCount();\n    var right = gObj.getFrozenRightColumnsCount();\n    var frozenMode = gObj.getFrozenMode();\n    var drag = gObj.isRowDragable() ? 1 : 0;\n    var rightIndex = frozenMode === 'Right' ? left + movable : left + movable + drag;\n    var mvblIndex = frozenMode === 'Right' ? left : left + drag;\n    var mvblEndIdx = frozenMode === 'Right' ? cells.length - right - drag\n        : right ? cells.length - right : cells.length;\n    if (tableName === 'frozen-left') {\n        cells = cells.slice(0, left ? left + drag : cells.length);\n    }\n    else if (tableName === 'frozen-right') {\n        cells = cells.slice(rightIndex, cells.length);\n    }\n    else if (tableName === 'movable') {\n        cells = cells.slice(mvblIndex, mvblEndIdx);\n    }\n    return cells;\n}\n/** @hidden */\nexport function gridActionHandler(gObj, callBack, rows, force, rowObj) {\n    if (rows[0].length || force) {\n        rowObj ? callBack('frozen-left', rows[0], rowObj[0]) : callBack('frozen-left', rows[0]);\n    }\n    if (gObj.isFrozenGrid() && (rows[1].length || force)) {\n        rowObj ? callBack('movable', rows[1], rowObj[1]) : callBack('movable', rows[1]);\n    }\n    if ((gObj.getFrozenMode() === 'Left-Right' || gObj.getFrozenMode() === 'Right') && (rows[2].length || force)) {\n        rowObj ? callBack('frozen-right', rows[2], rowObj[2]) : callBack('frozen-right', rows[2]);\n    }\n}\n/** @hidden */\nexport function getGridRowObjects(gObj) {\n    return [gObj.getFrozenMode() !== 'Right' ? gObj.getRowsObject() : [], gObj.getMovableRowsObject(), gObj.getFrozenRightRowsObject()];\n}\n/** @hidden */\nexport function getGridRowElements(gObj) {\n    return [\n        gObj.getFrozenMode() !== 'Right' ? gObj.getAllDataRows(true) : [],\n        gObj.getAllMovableDataRows(true), gObj.getAllFrozenRightDataRows(true)\n    ];\n}\n/** @hidden */\nexport function sliceElements(row, start, end) {\n    var cells = row.children;\n    var len = cells.length;\n    var k = 0;\n    for (var i = 0; i < len; i++, k++) {\n        if (i >= start && i < end) {\n            continue;\n        }\n        row.removeChild(row.children[k]);\n        k--;\n    }\n}\n/** @hidden */\nexport function getCellsByTableName(gObj, col, rowIndex) {\n    if (col.getFreezeTableName() === 'movable') {\n        return [].slice.call(gObj.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell'));\n    }\n    else if (col.getFreezeTableName() === 'frozen-right') {\n        return [].slice.call(gObj.getFrozenRightDataRows()[rowIndex].querySelectorAll('.e-rowcell'));\n    }\n    else {\n        return [].slice.call(gObj.getDataRows()[rowIndex].querySelectorAll('.e-rowcell'));\n    }\n}\n/** @hidden */\nexport function getCellByColAndRowIndex(gObj, col, rowIndex, index) {\n    var left = gObj.getFrozenLeftCount();\n    var movable = gObj.getMovableColumnsCount();\n    index = col.getFreezeTableName() === 'movable' ? index - left : col.getFreezeTableName() === 'frozen-right'\n        ? index - (left + movable) : index;\n    return getCellsByTableName(gObj, col, rowIndex)[index];\n}\n/** @hidden */\nexport function setValidationRuels(col, index, rules, mRules, frRules, len) {\n    if (col.getFreezeTableName() === 'frozen-left' || (!index && col.getFreezeTableName() === 'frozen-right') || len === 1) {\n        rules[getComplexFieldID(col.field)] = col.validationRules;\n    }\n    else if (col.getFreezeTableName() === 'movable' || !col.getFreezeTableName()) {\n        mRules[getComplexFieldID(col.field)] = col.validationRules;\n    }\n    else if (col.getFreezeTableName() === 'frozen-right') {\n        frRules[getComplexFieldID(col.field)] = col.validationRules;\n    }\n}\n/** @hidden */\nexport function getMovableTbody(gObj) {\n    var tbody;\n    if (gObj.isFrozenGrid()) {\n        tbody = gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top' ? gObj.getMovableHeaderTbody()\n            : gObj.getMovableContentTbody();\n    }\n    return tbody;\n}\n/** @hidden */\nexport function getFrozenRightTbody(gObj) {\n    var tbody;\n    if (gObj.getFrozenMode() === 'Left-Right') {\n        tbody = gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top' ? gObj.getFrozenRightHeaderTbody()\n            : gObj.getFrozenRightContentTbody();\n    }\n    return tbody;\n}\nexport function setRowsInTbody(tbody, mTbody, frTbody, tr, mTr, frTr, callBack) {\n    if (tbody && tr) {\n        callBack(tbody, tr);\n    }\n    if (mTbody && mTr) {\n        callBack(mTbody, mTr);\n    }\n    if (frTbody && frTr) {\n        callBack(frTbody, frTr);\n    }\n}\n/** @hidden */\nexport function getNumberFormat(numberFormat, type, isExcel) {\n    var format;\n    var intl = new Internationalization();\n    if (type === 'number') {\n        try {\n            format = intl.getNumberPattern({ format: numberFormat, currency: this.currency, useGrouping: true }, true);\n        }\n        catch (error) {\n            format = numberFormat;\n        }\n    }\n    else if (type === 'date' || type === 'time' || type === 'datetime') {\n        try {\n            format = intl.getDatePattern({ skeleton: numberFormat, type: type }, isExcel);\n            if (isNullOrUndefined(format)) {\n                throw 'error';\n            }\n        }\n        catch (error) {\n            try {\n                format = intl.getDatePattern({ format: numberFormat, type: type }, isExcel);\n            }\n            catch (error) {\n                format = numberFormat;\n            }\n        }\n    }\n    else {\n        format = numberFormat;\n    }\n    if (type !== 'number') {\n        var patternRegex = /G|H|c|'| a|yy|y|EEEE|E/g;\n        var mtch_1 = { 'G': '', 'H': 'h', 'c': 'd', '\\'': '\"', ' a': ' AM/PM', 'yy': 'yy', 'y': 'yyyy', 'EEEE': 'dddd', 'E': 'ddd' };\n        format = format.replace(patternRegex, function (pattern) {\n            return mtch_1[pattern];\n        });\n    }\n    return format;\n}\n/** @hidden */\nexport function addBiggerDialog(gObj) {\n    if (gObj.enableAdaptiveUI) {\n        var dialogs = document.getElementsByClassName('e-responsive-dialog');\n        for (var i = 0; i < dialogs.length; i++) {\n            dialogs[i].classList.add('e-bigger');\n        }\n    }\n}\n/** @hidden */\nexport function performComplexDataOperation(value, mapObject) {\n    var returnObj;\n    var length = value.split('.').length;\n    var splits = value.split('.');\n    var duplicateMap = mapObject;\n    for (var i = 0; i < length; i++) {\n        returnObj = duplicateMap[splits[i]];\n        duplicateMap = returnObj;\n    }\n    return returnObj;\n}\n/** @hidden */\nexport function setDisplayValue(tr, idx, displayVal, rows, parent, isContent) {\n    var trs = Object.keys(tr);\n    for (var i = 0; i < trs.length; i++) {\n        var td = tr[trs[i]].querySelectorAll('td.e-rowcell')[idx];\n        if (tr[trs[i]].querySelectorAll('td.e-rowcell').length && td) {\n            setStyleAttribute(tr[trs[i]].querySelectorAll('td.e-rowcell')[idx], { 'display': displayVal });\n            if (tr[trs[i]].querySelectorAll('td.e-rowcell')[idx].classList.contains('e-hide')) {\n                removeClass([tr[trs[i]].querySelectorAll('td.e-rowcell')[idx]], ['e-hide']);\n            }\n            if (isContent && parent.isRowDragable()) {\n                var index = parent.getFrozenColumns() ? idx : idx + 1;\n                rows[trs[i]].cells[index].visible = displayVal === '' ? true : false;\n            }\n            else {\n                rows[trs[i]].cells[idx].visible = displayVal === '' ? true : false;\n            }\n        }\n    }\n}\n","import { remove, isBlazor, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { uiUpdate, initialEnd, dataReady, modelChanged, refreshAggregates, refreshFooterRenderer, groupAggregates } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        var type = [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary];\n        for (var i = 0; i < type.length; i++) {\n            cellFac.addCellRenderer(type[i], instance);\n        }\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        var footerContent = this.footerRenderer.getPanel();\n        if (this.parent.element.scrollHeight >= this.parent.getHeight(this.parent.height)\n            && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    /**\n     * @hidden\n     */\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            var cFormat = 'customFormat';\n            if (!isNullOrUndefined(column[cFormat])) {\n                column.setPropertiesSilent({ format: column[cFormat] });\n            }\n            if (typeof (column.format) === 'object') {\n                var valueFormatter = new ValueFormatter();\n                column.setFormatter(valueFormatter.getFormatFunction(extend({}, column.format)));\n            }\n            else if (typeof (column.format) === 'string') {\n                var fmtr = _this.locator.getService('valueFormatter');\n                column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            }\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n        if (isBlazor() && this.parent.isServerRendered) {\n            var bulkChanges = 'bulkChanges';\n            var aggregates = 'aggregates';\n            var prop = Object.keys(this.parent[bulkChanges]);\n            for (var i = 0; i < prop.length; i++) {\n                if (prop[i].startsWith(aggregates)) {\n                    delete this.parent[bulkChanges][prop[i]];\n                }\n            }\n        }\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(refreshAggregates, this.refresh, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(refreshAggregates, this.refresh);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    Aggregate.prototype.refresh = function (data) {\n        var editedData = data instanceof Array ? data : [data];\n        this.parent.notify(refreshFooterRenderer, editedData);\n        if (this.parent.groupSettings.columns.length > 0) {\n            this.parent.notify(groupAggregates, editedData);\n        }\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    for (var i = 0; i < aggregates.length; i++) {\n        for (var j = 0; j < aggregates[i].columns.length; j++) {\n            callback(aggregates[i].columns[j], aggregates[i]);\n        }\n    }\n}\n","import { extend, isBlazor } from '@syncfusion/ej2-base';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject, getCustomDateFormat } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        if (args.column.editType === 'datepickeredit') {\n            this.obj = new DatePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        else if (args.column.editType === 'datetimepickeredit') {\n            this.obj = new DateTimePicker(extend(dateanddatetimerender(args, this.parent.editSettings.mode, this.parent.enableRtl), args.column.edit.params));\n        }\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\nfunction dateanddatetimerender(args, mode, rtl) {\n    var isInline = mode !== 'Dialog';\n    var format = getCustomDateFormat(args.column.format, args.column.type);\n    var value = getObject(args.column.field, args.rowData);\n    value = value ? new Date(value) : null;\n    return {\n        floatLabelType: isInline ? 'Never' : 'Always',\n        value: value,\n        format: format,\n        placeholder: isInline ?\n            '' : args.column.headerText, enableRtl: rtl,\n        enabled: isEditable(args.column, args.requestType, args.element),\n    };\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport { ColumnFreezeContentRenderer } from './column-freeze-renderer';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from './virtual-content-renderer';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { RenderType } from '../base/enum';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport * as events from '../base/constant';\nimport { splitFrozenRowObjectCells } from '../base/util';\n/**\n * VirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n * @hidden\n */\nvar VirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeRenderer, _super);\n    function VirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        /** @hidden */\n        _this.frzRows = [];\n        /** @hidden */\n        _this.mvblRows = [];\n        /** @hidden */\n        _this.frRows = [];\n        _this.serviceLoc = locator;\n        _this.eventListener('on');\n        _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n        return _this;\n    }\n    VirtualFreezeRenderer.prototype.eventListener = function (action) {\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n        this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n    };\n    VirtualFreezeRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                setCache(this, i);\n            }\n        }\n    };\n    VirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        if (args.requestType === 'delete' && gObj.frozenRows) {\n            args.isFrozenRowsRender = true;\n            var selectedIdx_1 = gObj.getSelectedRowIndexes();\n            var query = gObj.renderModule.data.generateQuery(true).clone();\n            query.page(1, gObj.pageSettings.pageSize);\n            gObj.renderModule.data.getData({}, query).then(function (e) {\n                renderFrozenRows(args, e.result, selectedIdx_1, gObj, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n            });\n        }\n    };\n    VirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n        this.virtualRenderer.getVirtualData(data);\n    };\n    VirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n        setFreezeSelection(args, this.virtualRenderer);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.renderTable = function () {\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory')\n            .getRenderer(RenderType.Header).virtualHdrRenderer;\n        _super.prototype.renderTable.call(this);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var frzCont = this.getFrozenContent();\n        var movableCont = this.getMovableContent();\n        var minHeight = this.parent.height;\n        this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.e-content');\n        this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n        this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n        this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualRenderer.virtualEle.movableContent = this.virtualRenderer.movableContent\n                = this.getPanel().querySelector('.e-movablecontent');\n            this.virtualRenderer.virtualEle.renderMovableWrapper(minHeight);\n            this.virtualRenderer.virtualEle.renderMovablePlaceHolder();\n            var tbl = movableCont.querySelector('table');\n            this.virtualRenderer.virtualEle.movableTable = tbl;\n            this.virtualRenderer.virtualEle.movableWrapper.appendChild(tbl);\n            movableCont.appendChild(this.virtualRenderer.virtualEle.movableWrapper);\n            movableCont.appendChild(this.virtualRenderer.virtualEle.movablePlaceholder);\n        }\n        this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n        this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n        this.virtualRenderer.virtualEle.table = this.getTable();\n        setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.generateRows = function (data, notifyArgs) {\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        return generateRows(this.virtualRenderer, data, notifyArgs, this.freezeRowGenerator, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    VirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n        return collectRows(tableName, this.virtualRenderer, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.collectRows('movable');\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRows = function () {\n        return this.collectRows('frozen-left');\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent();\n        return this.isXaxis() ? mCol.querySelector('colgroup') : this.colgroup;\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n    };\n    VirtualFreezeRenderer.prototype.isXaxis = function () {\n        return isXaxis(this.virtualRenderer);\n    };\n    VirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        return getHeaderCells(this.virtualRenderer, this.parent);\n    };\n    VirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n    };\n    VirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        return ensureFrozenCols(columns, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    VirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    VirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n        return setColGroup(colGroup, this.virtualRenderer, this);\n    };\n    return VirtualFreezeRenderer;\n}(FreezeContentRender));\nexport { VirtualFreezeRenderer };\n/**\n * VirtualFreezeHdrRenderer is used to render the virtual table within the frozen and movable header table\n * @hidden\n */\nvar VirtualFreezeHdrRenderer = /** @class */ (function (_super) {\n    __extends(VirtualFreezeHdrRenderer, _super);\n    function VirtualFreezeHdrRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.serviceLoc = locator;\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    VirtualFreezeHdrRenderer.prototype.renderTable = function () {\n        this.virtualHdrRenderer = new VirtualHeaderRenderer(this.parent, this.serviceLoc);\n        this.virtualHdrRenderer.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.virtualHdrRenderer.gen.getColumnIndexes(this.getPanel()\n            .querySelector('.e-headercontent')));\n        this.virtualHdrRenderer.virtualEle.content = this.getPanel().querySelector('.e-headercontent');\n        this.virtualHdrRenderer.virtualEle.renderFrozenWrapper();\n        this.virtualHdrRenderer.virtualEle.renderFrozenPlaceHolder();\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualHdrRenderer.virtualEle.movableContent = this.getPanel().querySelector('.e-movableheader');\n            this.virtualHdrRenderer.virtualEle.renderMovableWrapper();\n            this.virtualHdrRenderer.virtualEle.renderMovablePlaceHolder();\n        }\n        _super.prototype.renderTable.call(this);\n        this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent());\n    };\n    VirtualFreezeHdrRenderer.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getFrozenHeader());\n        if (this.parent.enableColumnVirtualization) {\n            this.virtualHdrRenderer.virtualEle.movableWrapper.appendChild(this.createHeader(undefined, 'movable'));\n        }\n        else {\n            this.getMovableHeader().appendChild(this.createTable());\n        }\n        this.virtualHdrRenderer.virtualEle.wrapper.appendChild(this.getMovableHeader());\n    };\n    return VirtualFreezeHdrRenderer;\n}(FreezeRender));\nexport { VirtualFreezeHdrRenderer };\n/** @hidden */\nexport function renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance) {\n    parent.clearSelection();\n    args.startIndex = 0;\n    var rowRenderer = new RowRenderer(locator, null, parent);\n    var rows = rowModelGenerator.generateRows(data, args);\n    if (args.renderMovableContent) {\n        virtualRenderer.vgenerator.movableCache[1] = rows;\n        rows = parent.getMovableRowsObject();\n    }\n    else if (!args.renderFrozenRightContent && !args.renderMovableContent) {\n        virtualRenderer.vgenerator.cache[1] = rows;\n        rows = parent.getRowsObject();\n    }\n    else if (args.renderFrozenRightContent) {\n        virtualRenderer.vgenerator.frozenRightCache[1] = rows;\n        rows = parent.getFrozenRightRowsObject();\n    }\n    var hdr = !args.renderMovableContent && !args.renderFrozenRightContent\n        ? parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody') : args.renderMovableContent\n        ? parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n        : parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('tbody');\n    hdr.innerHTML = '';\n    for (var i = 0; i < parent.frozenRows; i++) {\n        hdr.appendChild(rowRenderer.render(rows[i], parent.getColumns()));\n        if (selectedIdx.indexOf(i) > -1) {\n            rows[i].isSelected = true;\n            for (var k = 0; k < rows[i].cells.length; k++) {\n                rows[i].cells[k].isSelected = true;\n            }\n        }\n    }\n    if (args.renderMovableContent) {\n        instance.mvblRows = virtualRenderer.vgenerator.movableCache[1];\n    }\n    else if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n        instance.frzRows = virtualRenderer.vgenerator.cache[1];\n    }\n    else if (args.renderFrozenRightContent) {\n        instance.frRows = virtualRenderer.vgenerator.frozenRightCache[1];\n    }\n    args.renderMovableContent = !args.renderMovableContent && !args.renderFrozenRightContent;\n    args.renderFrozenRightContent = parent.getFrozenMode() === 'Left-Right'\n        && !args.renderMovableContent && !args.renderFrozenRightContent;\n    if (args.renderMovableContent || args.renderFrozenRightContent) {\n        renderFrozenRows(args, data, selectedIdx, parent, rowModelGenerator, locator, virtualRenderer, instance);\n        if (!args.renderMovableContent && !args.renderFrozenRightContent) {\n            args.isFrozenRowsRender = false;\n        }\n    }\n}\n/** @hidden */\nexport function splitCells(data, tableName, parent) {\n    var rows = [];\n    for (var i = 0; i < data.length; i++) {\n        rows.push(extend({}, data[i]));\n        rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n    }\n    return rows;\n}\n/** @hidden */\nexport function collectRows(tableName, virtualRenderer, parent) {\n    var rows = [];\n    var cache;\n    if (tableName === 'frozen-left') {\n        cache = virtualRenderer.vgenerator.cache;\n    }\n    else if (tableName === 'movable') {\n        cache = virtualRenderer.vgenerator.movableCache;\n    }\n    else if (tableName === 'frozen-right') {\n        cache = parent.getFrozenMode() === 'Right' ? virtualRenderer.vgenerator.cache : virtualRenderer.vgenerator.frozenRightCache;\n    }\n    var keys = Object.keys(cache);\n    for (var i = 0; i < keys.length; i++) {\n        rows = rows.concat(splitCells(cache[keys[i]], tableName, parent));\n    }\n    return rows;\n}\n/** @hidden */\nexport function setFreezeSelection(args, virtualRenderer) {\n    var leftKeys = Object.keys(virtualRenderer.vgenerator.cache);\n    var movableKeys = Object.keys(virtualRenderer.vgenerator.movableCache);\n    var rightKeys = Object.keys(virtualRenderer.vgenerator.frozenRightCache);\n    for (var i = 0; i < leftKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.cache[leftKeys[i]]);\n    }\n    for (var i = 0; i < movableKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.movableCache[movableKeys[i]]);\n    }\n    for (var i = 0; i < rightKeys.length; i++) {\n        selectFreezeRows(args, virtualRenderer.vgenerator.frozenRightCache[rightKeys[i]]);\n    }\n}\n/** @hidden */\nexport function selectFreezeRows(args, cache) {\n    var rows = cache.filter(function (row) { return args.clearAll || args.uid === row.uid; });\n    for (var j = 0; j < rows.length; j++) {\n        rows[j].isSelected = args.set;\n        var cells = rows[j].cells;\n        for (var k = 0; k < cells.length; k++) {\n            cells[k].isSelected = args.set;\n        }\n    }\n}\n/** @hidden */\nexport function appendContent(virtualRenderer, widthService, target, newChild, e) {\n    virtualRenderer.appendContent(target, newChild, e);\n    widthService.refreshFrozenScrollbar();\n}\n/** @hidden */\nexport function generateRows(virtualRenderer, data, notifyArgs, freezeRowGenerator, parent) {\n    var virtualRows = virtualRenderer.vgenerator.generateRows(data, notifyArgs);\n    var arr = [];\n    arr = virtualRows.map(function (row) { return extend({}, row); });\n    var rows = freezeRowGenerator.generateRows(data, notifyArgs, arr);\n    if (parent.frozenRows && notifyArgs.requestType === 'delete' && parent.pageSettings.currentPage === 1) {\n        rows = rows.slice(parent.frozenRows);\n    }\n    return rows;\n}\n/** @hidden */\nexport function getReorderedFrozenRows(args, virtualRenderer, parent, freezeRowGenerator, firstPageRecords) {\n    var rows;\n    var bIndex = args.virtualInfo.blockIndexes;\n    var colIndex = args.virtualInfo.columnIndexes;\n    var page = args.virtualInfo.page;\n    args.virtualInfo.blockIndexes = [1, 2];\n    args.virtualInfo.page = 1;\n    if (!args.renderMovableContent) {\n        args.virtualInfo.columnIndexes = [];\n    }\n    var firstRecordslength = parent.getCurrentViewRecords().length;\n    firstPageRecords = parent.renderModule.data.dataManager.dataSource.json.slice(0, firstRecordslength);\n    var virtualRows = virtualRenderer.vgenerator.generateRows(firstPageRecords, args);\n    rows = splitReorderedRows(virtualRows, parent, args, freezeRowGenerator);\n    args.virtualInfo.blockIndexes = bIndex;\n    args.virtualInfo.columnIndexes = colIndex;\n    args.virtualInfo.page = page;\n    return rows.splice(0, parent.frozenRows);\n}\n/** @hidden */\nexport function splitReorderedRows(rows, parent, args, freezeRowGenerator) {\n    var tableName;\n    if (args.renderMovableContent) {\n        tableName = 'movable';\n    }\n    else if (args.renderFrozenRightContent) {\n        tableName = 'frozen-right';\n    }\n    else {\n        tableName = 'frozen-left';\n    }\n    for (var i = 0, len = rows.length; i < len; i++) {\n        rows[i].cells = splitFrozenRowObjectCells(parent, rows[i].cells, tableName);\n    }\n    return rows;\n}\n/** @hidden */\nexport function isXaxis(virtualRenderer) {\n    var value = false;\n    if (virtualRenderer) {\n        value = virtualRenderer.requestType === 'virtualscroll'\n            && virtualRenderer.currentInfo.sentinelInfo.axis === 'X';\n    }\n    return value;\n}\n/** @hidden */\nexport function getHeaderCells(virtualRenderer, parent) {\n    var content = isXaxis(virtualRenderer) ? parent.getMovableVirtualHeader() : parent.getHeaderContent();\n    return content ? [].slice.call(content.querySelectorAll('.e-headercell:not(.e-stackedheadercell)')) : [];\n}\n/** @hidden */\nexport function getVirtualFreezeHeader(virtualRenderer, parent) {\n    var headerTable;\n    if (isXaxis(virtualRenderer)) {\n        headerTable = parent.getMovableVirtualHeader().querySelector('.e-table');\n    }\n    else {\n        headerTable = parent.getFrozenVirtualHeader().querySelector('.e-table');\n    }\n    return headerTable;\n}\n/** @hidden */\nexport function ensureFrozenCols(columns, parent) {\n    var frozenCols = parent.columns.slice(0, parent.getFrozenColumns());\n    columns = frozenCols.concat(columns);\n    return columns;\n}\n/** @hidden */\nexport function setColGroup(colGroup, virtualRenderer, instance) {\n    if (!isXaxis(virtualRenderer)) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        instance.colgroup = colGroup;\n    }\n    return instance.colgroup;\n}\n/** @hidden */\nexport function setCache(instance, index) {\n    if (instance.virtualRenderer.vgenerator.cache[1]) {\n        instance.virtualRenderer.vgenerator.cache[1][index] = instance.frzRows[index];\n    }\n    else {\n        instance.virtualRenderer.vgenerator.cache[1] = instance.frzRows;\n    }\n    if (instance.virtualRenderer.vgenerator.movableCache[1]) {\n        instance.virtualRenderer.vgenerator.movableCache[1][index] = instance.mvblRows[index];\n    }\n    else {\n        instance.virtualRenderer.vgenerator.movableCache[1] = instance.mvblRows;\n    }\n}\n/** @hidden */\nexport function setDebounce(parent, virtualRenderer, scrollbar, mCont) {\n    var debounceEvent = (parent.dataSource instanceof DataManager && !parent.dataSource.dataSource.offline);\n    var opt = {\n        container: virtualRenderer.content, pageHeight: virtualRenderer.getBlockHeight() * 2, debounceEvent: debounceEvent,\n        axes: parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y'], scrollbar: scrollbar,\n        movableContainer: mCont\n    };\n    virtualRenderer.observer = new InterSectionObserver(virtualRenderer.virtualEle.wrapper, opt, virtualRenderer.virtualEle.movableWrapper);\n}\n/**\n * ColumnVirtualFreezeRenderer is used to render the virtual table within the frozen and movable content table\n * @hidden\n */\nvar ColumnVirtualFreezeRenderer = /** @class */ (function (_super) {\n    __extends(ColumnVirtualFreezeRenderer, _super);\n    function ColumnVirtualFreezeRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        /** @hidden */\n        _this.frRows = [];\n        /** @hidden */\n        _this.frzRows = [];\n        /** @hidden */\n        _this.mvblRows = [];\n        _this.serviceLoc = locator;\n        _this.eventListener('on');\n        _this.rowModelGenerator = new RowModelGenerator(_this.parent);\n        return _this;\n    }\n    ColumnVirtualFreezeRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                if (this.virtualRenderer.vgenerator.frozenRightCache[1]) {\n                    this.virtualRenderer.vgenerator.frozenRightCache[1][i] = this.frRows.length ? this.frRows[i] : this.frzRows[i];\n                }\n                else {\n                    this.virtualRenderer.vgenerator.frozenRightCache[1] = this.frRows.length ? this.frRows : this.frzRows;\n                    break;\n                }\n                setCache(this, i);\n            }\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.eventListener = function (action) {\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent[action](events.refreshVirtualFrozenRows, this.refreshVirtualFrozenRows, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.setFreezeSelection, this.setFreezeSelection, this);\n    };\n    ColumnVirtualFreezeRenderer.prototype.refreshVirtualFrozenRows = function (args) {\n        var _this = this;\n        if (args.requestType === 'delete' && this.parent.frozenRows) {\n            args.isFrozenRowsRender = true;\n            var query = this.parent.renderModule.data.generateQuery(true).clone();\n            query.page(1, this.parent.pageSettings.pageSize);\n            var selectedIdx_2 = this.parent.getSelectedRowIndexes();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                renderFrozenRows(args, e.result, selectedIdx_2, _this.parent, _this.rowModelGenerator, _this.serviceLoc, _this.virtualRenderer, _this);\n            });\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.setFreezeSelection = function (args) {\n        setFreezeSelection(args, this.virtualRenderer);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getVirtualData = function (data) {\n        this.virtualRenderer.getVirtualData(data);\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderNextFrozentPart = function (e, tableName) {\n        e.renderMovableContent = this.parent.getFrozenLeftCount() ? tableName === 'frozen-left' : tableName === 'frozen-right';\n        e.renderFrozenRightContent = this.parent.getFrozenMode() === 'Left-Right' && tableName === 'movable';\n        if (e.renderMovableContent || e.renderFrozenRightContent) {\n            this.refreshContentRows(extend({}, e));\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.renderTable = function () {\n        this.virtualRenderer = new VirtualContentRenderer(this.parent, this.serviceLoc);\n        this.virtualRenderer.header = this.serviceLoc.getService('rendererFactory')\n            .getRenderer(RenderType.Header).virtualHdrRenderer;\n        this.freezeRowGenerator = new FreezeRowModelGenerator(this.parent);\n        _super.prototype.renderTable.call(this);\n        this.virtualRenderer.setPanel(this.parent.getContent());\n        this.scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var frozenRightCont = this.getFrozenRightContent();\n        var frzCont = this.getFrozenContent();\n        var movableCont = this.getMovableContent();\n        if (this.parent.getFrozenMode() === 'Right') {\n            frzCont = frozenRightCont;\n        }\n        this.virtualRenderer.virtualEle.content = this.virtualRenderer.content = this.getPanel().querySelector('.e-content');\n        this.virtualRenderer.virtualEle.content.style.overflowX = 'hidden';\n        var minHeight = this.parent.height;\n        this.virtualRenderer.virtualEle.renderFrozenWrapper(minHeight);\n        this.virtualRenderer.virtualEle.renderFrozenPlaceHolder();\n        this.renderVirtualFrozenLeft(frzCont, movableCont);\n        this.renderVirtualFrozenRight(frzCont, movableCont);\n        this.renderVirtualFrozenLeftRight(frzCont, movableCont, frozenRightCont);\n        this.virtualRenderer.virtualEle.table = this.getTable();\n        setDebounce(this.parent, this.virtualRenderer, this.scrollbar, this.getMovableContent());\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeft = function (frzCont, movableCont) {\n        if (this.parent.getFrozenMode() === 'Left') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenRight = function (frzCont, movableCont) {\n        if (this.parent.getFrozenMode() === 'Right') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n        }\n    };\n    ColumnVirtualFreezeRenderer.prototype.renderVirtualFrozenLeftRight = function (frzCont, movableCont, frozenRightCont) {\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frzCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(movableCont);\n            this.virtualRenderer.virtualEle.wrapper.appendChild(frozenRightCont);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.appendContent = function (target, newChild, e) {\n        appendContent(this.virtualRenderer, this.widthService, target, newChild, e);\n        this.refreshScrollOffset();\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.generateRows = function (data, e) {\n        if (!this.firstPageRecords) {\n            this.firstPageRecords = data;\n        }\n        return generateRows(this.virtualRenderer, data, e, this.freezeRowGenerator, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRowByIndex = function (index) {\n        return this.virtualRenderer.getRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.virtualRenderer.getFrozenRightVirtualRowByIndex(index);\n    };\n    ColumnVirtualFreezeRenderer.prototype.collectRows = function (tableName) {\n        return collectRows(tableName, this.virtualRenderer, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getMovableRowByIndex = function (index) {\n        return this.virtualRenderer.getMovableVirtualRowByIndex(index);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getFrozenRightRows = function () {\n        return this.collectRows('frozen-right');\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getMovableRows = function () {\n        return this.collectRows('movable');\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getColGroup = function () {\n        var mCol = this.parent.getMovableVirtualContent();\n        return isXaxis(this.virtualRenderer) ? mCol.querySelector('colgroup') : this.colgroup;\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRows = function () {\n        return this.collectRows(this.parent.getFrozenMode() === 'Right' ? 'frozen-right' : 'frozen-left');\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getReorderedFrozenRows = function (args) {\n        return getReorderedFrozenRows(args, this.virtualRenderer, this.parent, this.freezeRowGenerator, this.firstPageRecords);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getHeaderCells = function () {\n        return getHeaderCells(this.virtualRenderer, this.parent);\n    };\n    ColumnVirtualFreezeRenderer.prototype.isXaxis = function () {\n        return isXaxis(this.virtualRenderer);\n    };\n    ColumnVirtualFreezeRenderer.prototype.getVirtualFreezeHeader = function () {\n        return getVirtualFreezeHeader(this.virtualRenderer, this.parent);\n    };\n    /**\n     * @hidden\n     */\n    ColumnVirtualFreezeRenderer.prototype.getRowObjectByIndex = function (index) {\n        return this.virtualRenderer.getRowObjectByIndex(index);\n    };\n    ColumnVirtualFreezeRenderer.prototype.ensureFrozenCols = function (columns) {\n        return ensureFrozenCols(columns, this.parent);\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ColumnVirtualFreezeRenderer.prototype.setColGroup = function (colGroup) {\n        return setColGroup(colGroup, this.virtualRenderer, this);\n    };\n    return ColumnVirtualFreezeRenderer;\n}(ColumnFreezeContentRenderer));\nexport { ColumnVirtualFreezeRenderer };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            if (isBlazor()) {\n                var isServerRendered = 'isServerRendered';\n                format[isServerRendered] = true;\n            }\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            if (isBlazor()) {\n                var isServerRendered = 'isServerRendered';\n                format[isServerRendered] = true;\n            }\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if ((type === 'date' || type === 'datetime' || type === 'number') && (!isNullOrUndefined(format))) {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { merge, isNullOrUndefined, extend, Property } from '@syncfusion/ej2-base';\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData, getObject } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options, parent) {\n        var _this = this;\n        /**\n         * If `disableHtmlEncode` is set to true, it encodes the HTML of the header and content cells.\n         * @default true\n         */\n        this.disableHtmlEncode = true;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create  It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](../../grid/filtering/#custom-component-in-filter-menu) for its customization.\n         *  @default {}\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        /**\n         * If `allowSearching` set to false, then it disables Searching of a particular column.\n         * By default all columns allow Searching.\n         * @default true\n         */\n        this.allowSearching = true;\n        /**\n         * If `autoFit` set to true, then the particular column content width will be\n         * adjusted based on its content in the initial rendering itself.\n         * Setting this property as true is equivalent to calling `autoFitColumns` method in the `dataBound` event.\n         * @default false\n         */\n        this.autoFit = false;\n        this.sortDirection = 'Descending';\n        /** @hidden */\n        this.getEditTemplate = function () { return _this.editTemplateFn; };\n        /** @hidden */\n        this.getFilterTemplate = function () { return _this.filterTemplateFn; };\n        merge(this, options);\n        this.parent = parent;\n        if (this.type === 'none') {\n            this.type = (isBlazor() && !isNullOrUndefined(this.template) && isNullOrUndefined(this.field)) ? 'none' : null;\n        }\n        else if (this.type) {\n            this.type = typeof (this.type) === 'string' ? this.type.toLowerCase() : undefined;\n        }\n        if (this.editType) {\n            this.editType = this.editType.toLowerCase();\n        }\n        if (isNullOrUndefined(this.uid)) {\n            this.uid = getUid('grid-column');\n        }\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(extend({}, options.format)));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        this.toJSON = function () {\n            var col = {};\n            var skip = ['filter', 'dataSource', isBlazor() ? ' ' : 'headerText', 'template', 'headerTemplate', 'edit',\n                'editTemplate', 'filterTemplate', 'commandsTemplate', 'parent'];\n            var keys = Object.keys(_this);\n            for (var i = 0; i < keys.length; i++) {\n                if (keys[i] === 'columns') {\n                    col[keys[i]] = [];\n                    for (var j = 0; j < _this[keys[i]].length; j++) {\n                        col[keys[i]].push(_this[keys[i]][j].toJSON());\n                    }\n                }\n                else if (skip.indexOf(keys[i]) < 0) {\n                    col[keys[i]] = _this[keys[i]];\n                }\n            }\n            return col;\n        };\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n            if (this.columns) {\n                this.allowResizing = this.columns.some(function (col) {\n                    return col.allowResizing;\n                });\n            }\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (!isNullOrUndefined(this.filter) && this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.editTemplate) {\n            this.editTemplateFn = templateCompiler(this.editTemplate);\n        }\n        if (this.filterTemplate) {\n            this.filterTemplateFn = templateCompiler(this.filterTemplate);\n        }\n        if (this.isForeignColumn() &&\n            (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit' || this.editType === 'defaultedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y, xObj, yObj) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getObject(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                    var obj = xObj;\n                    xObj = yObj;\n                    yObj = obj;\n                }\n                return a_1(x, y, xObj, yObj);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.getFreezeTableName = function () {\n        return this.freezeTable;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n            //Refresh the react columnTemplates on state change\n            if (this.parent && this.parent.isReact && keys[i] === 'template') {\n                this.parent.refreshReactColumnTemplateByUid(this.uid);\n            }\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n/**\n * Define options for custom command buttons.\n */\nvar CommandColumnModel = /** @class */ (function () {\n    function CommandColumnModel() {\n    }\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], CommandColumnModel.prototype, \"buttonOption\", void 0);\n    return CommandColumnModel;\n}());\nexport { CommandColumnModel };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnSelecting = 'columnSelecting';\n/** @hidden */\nexport var columnSelected = 'columnSelected';\n/** @hidden */\nexport var columnDeselecting = 'columnDeselecting';\n/** @hidden */\nexport var columnDeselected = 'columnDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStartHelper = 'rowDragStartHelper';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var beforePaste = 'beforePaste';\n/** @hidden */\nexport var beforeAutoFill = 'beforeAutoFill';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/** @hidden */\nexport var commandClick = 'commandClick';\n/** @hidden */\nexport var exportGroupCaption = 'exportGroupCaption';\n/** @hidden */\nexport var lazyLoadGroupExpand = 'lazyLoadGroupExpand';\n/** @hidden */\nexport var lazyLoadGroupCollapse = 'lazyLoadGroupCollapse';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var groupAggregates = 'group-aggregates';\n/** @hidden */\nexport var refreshFooterRenderer = 'refresh-footer-rendered';\n/** @hidden */\nexport var refreshAggregateCell = 'refresh-aggregate-cell';\n/** @hidden */\nexport var refreshAggregates = 'refresh-aggregates';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var exportDetailDataBound = 'exportdetaildatabound';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var columnDataStateChange = 'columnDataStateChange';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var textWrapRefresh = 'textWrapRefresh';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n/** @hidden */\nexport var hierarchyPrint = 'hierarchyprint';\n/** @hidden */\nexport var expandChildGrid = 'expandchildgrid';\n/** @hidden */\nexport var printGridInit = 'printGrid-Init';\n/** @hidden */\nexport var exportRowDataBound = 'export-RowDataBound';\n/** @hidden */\nexport var exportDataBound = 'export-DataBound';\n/** @hidden */\nexport var rowPositionChanged = 'row-position-changed';\n/** @hidden */\nexport var columnChooserOpened = 'columnChooserOpened';\n/** @hidden */\nexport var batchForm = 'batchedit-form';\n/** @hidden */\nexport var beforeStartEdit = 'edit-form';\n/** @hidden */\nexport var beforeBatchCancel = 'before-batch-cancel';\n/** @hidden */\nexport var batchEditFormRendered = 'batcheditform-rendered';\n/** @hidden */\nexport var partialRefresh = 'partial-refresh';\n/** @hidden */\nexport var beforeCustomFilterOpen = 'beforeCustomFilterOpen';\n/** @hidden */\nexport var selectVirtualRow = 'select-virtual-Row';\n/** @hidden */\nexport var columnsPrepared = 'columns-prepared';\n/** @hidden */\nexport var cBoxFltrBegin = 'cbox-filter-begin';\n/** @hidden */\nexport var cBoxFltrComplete = 'cbox-filter-complete';\n/** @hidden */\nexport var fltrPrevent = 'filter-Prevent';\n/** @hidden */\nexport var beforeFltrcMenuOpen = 'before-filter-cmenu-open';\n/** @hidden */\nexport var valCustomPlacement = 'validation-custom-placement';\n/** @hidden */\nexport var filterCboxValue = 'filter-cbox-value';\n/** @hidden */\nexport var componentRendered = 'component-rendered';\n/** @hidden */\nexport var restoreFocus = 'restore-Focus';\n/** @hidden */\nexport var detailStateChange = 'detail-state-change';\n/** @hidden */\nexport var detailIndentCellInfo = 'detail-indentcell-info';\n/** @hidden */\nexport var virtaulKeyHandler = 'virtaul-key-handler';\n/** @hidden */\nexport var virtaulCellFocus = 'virtaul-cell-focus';\n/** @hidden */\nexport var virtualScrollEditActionBegin = 'virtual-scroll-edit-action-begin';\n/** @hidden */\nexport var virtualScrollEditSuccess = 'virtual-scroll-edit-success';\n/** @hidden */\nexport var virtualScrollEditCancel = 'virtual-scroll-edit-cancel';\n/** @hidden */\nexport var virtualScrollEdit = 'virtual-scroll-edit';\n/** @hidden */\nexport var refreshVirtualCache = 'refresh-virtual-cache';\n/** @hidden */\nexport var editReset = 'edit-reset';\n/** @hidden */\nexport var virtualScrollAddActionBegin = 'virtual-scroll-add-action-begin';\n/** @hidden */\nexport var getVirtualData = 'get-virtual-data';\n/** @hidden */\nexport var refreshInfiniteModeBlocks = 'refresh-infinite-mode-blocks';\n/** @hidden */\nexport var resetInfiniteBlocks = 'reset-infinite-blocks';\n/** @hidden */\nexport var infiniteScrollHandler = 'infinite-scroll-handler';\n/** @hidden */\nexport var infinitePageQuery = 'infinite-page-query';\n/** @hidden */\nexport var infiniteShowHide = 'infinite-show-hide';\n/** @hidden */\nexport var appendInfiniteContent = 'append-infinite-content';\n/** @hidden */\nexport var removeInfiniteRows = 'remove-infinite-rows';\n/** @hidden */\nexport var setInfiniteCache = 'set-infinite-cache';\n/** @hidden */\nexport var infiniteEditHandler = 'infinite-edit-handler';\n/** @hidden */\nexport var initialCollapse = 'initial-collapse';\n/** @hidden */\nexport var getAggregateQuery = 'get-aggregate-query';\n/** @hidden */\nexport var closeFilterDialog = 'close-filter-dialog';\n/** @hidden */\nexport var columnChooserCancelBtnClick = 'columnChooserCancelBtnClick';\n/** @hidden */\nexport var getFilterBarOperator = 'get-filterbar-operator';\n/** @hidden */\nexport var resetColumns = 'reset-columns';\n/** @hidden */\nexport var pdfAggregateQueryCellInfo = 'pdfAggregateQueryCellInfo';\n/** @hidden */\nexport var excelAggregateQueryCellInfo = 'excelAggregateQueryCellInfo';\n/** @hidden */\nexport var setGroupCache = 'group-cache';\n/** @hidden */\nexport var lazyLoadScrollHandler = 'lazy-load-scroll-handler';\n/** @hidden */\nexport var groupCollapse = 'group-collapse';\n/** @hidden */\nexport var beforeCheckboxRenderer = 'beforeCheckboxRenderer';\n/** @hidden */\nexport var refreshHandlers = 'refreshResizeHandlers';\n/** @hidden */\nexport var refreshFrozenColumns = 'refresh-frozen-columns';\n/** @hidden */\nexport var setReorderDestinationElement = 'set-reorder-destination-element';\n/** @hidden */\nexport var refreshVirtualFrozenHeight = 'refresh-virtual-frozen-height';\n/** @hidden */\nexport var setFreezeSelection = 'set-freeze-selection';\n/** @hidden */\nexport var setInfiniteFrozenHeight = 'set-infinite-frozen-height';\n/** @hidden */\nexport var setInfiniteColFrozenHeight = 'set-infinite-col-frozen-height';\n/** @hidden */\nexport var beforeRefreshOnDataChange = 'before-refresh-on-data-change';\n/** @hidden */\nexport var immutableBatchCancel = 'immutable-batch-cancel';\n/** @hidden */\nexport var refreshVirtualFrozenRows = 'refresh-virtual-frozenrows';\n/** @hidden */\nexport var checkScrollReset = 'check-scroll-reset';\n/** @hidden */\nexport var refreshFrozenHeight = 'refresh-frozen-height';\n/** @hidden */\nexport var setHeightToFrozenElement = 'set-height-to-frozen-element';\n/** @hidden */\nexport var preventFrozenScrollRefresh = 'prevent-frozen-scroll-refresh';\n/** @hidden */\nexport var nextCellIndex = 'next-cell-index';\n/** @hidden */\nexport var refreshInfiniteCurrentViewData = 'refresh-infinite-current-view-data';\n/** @hidden */\nexport var infiniteCrudCancel = 'infinite-crud-cancel';\n/** @hidden */\nexport var filterDialogClose = 'filter-dialog-close';\n/** @hidden */\nexport var setCustomFilterHeader = 'set-custom-filter-header';\n/** @hidden */\nexport var refreshCustomFilterOkBtn = 'refresh-cutsom-filter-ok-button';\n/** @hidden */\nexport var refreshCustomFilterClearBtn = 'refresh-cutsom-filter-clear-button';\n/** @hidden */\nexport var renderResponsiveCmenu = 'render-responsive-cmenu';\n/** @hidden */\nexport var filterCmenuSelect = 'filter-cmenu-select';\n/** @hidden */\nexport var customFilterClose = 'custom-filter-close';\n/** @hidden */\nexport var setFullScreenDialog = 'set-fullscreen-dialog';\n/** @hidden */\nexport var refreshVirtualCacheOnRowDD = 'refresh-Virtual-Cache-On-RowDD';\n/** @hidden */\nexport var refreshExpandandCollapse = 'refresh-Expand-and-Collapse';\n/** @hidden */\nexport var rowModeChange = 'row-mode-change';\n/** @hidden */\nexport var enterKeyHandler = 'enter-key-handler';\n/** @hidden */\nexport var refreshVirtualMaxPage = 'refresh-virtual-max-page';\n/** @hidden */\nexport var selectRowOnContextOpen = 'select-row-on-context-open';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n    /**  Defines CellType as DetailFooterIntent */\n    CellType[CellType[\"DetailFooterIntent\"] = 15] = \"DetailFooterIntent\";\n    /**  Defines CellType as RowDrag */\n    CellType[CellType[\"RowDragIcon\"] = 16] = \"RowDragIcon\";\n    /**  Defines CellType as RowDragHeader */\n    CellType[CellType[\"RowDragHIcon\"] = 17] = \"RowDragHIcon\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n/**\n * Defines types of responsive dialogs\n * @hidden\n */\nexport var ResponsiveDialogAction;\n(function (ResponsiveDialogAction) {\n    /**  Defines dialog type as Edit */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isEdit\"] = 0] = \"isEdit\";\n    /**  Defines dialog type as Add */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isAdd\"] = 1] = \"isAdd\";\n    /**  Defines dialog type as Sort */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isSort\"] = 2] = \"isSort\";\n    /**  Defines dialog type as Filter */\n    ResponsiveDialogAction[ResponsiveDialogAction[\"isFilter\"] = 3] = \"isFilter\";\n})(ResponsiveDialogAction || (ResponsiveDialogAction = {}));\n/**\n * Defines responsive toolbar actions\n * @hidden\n */\nexport var ResponsiveToolbarAction;\n(function (ResponsiveToolbarAction) {\n    /**  Defines initial responsive toolbar buttons */\n    ResponsiveToolbarAction[ResponsiveToolbarAction[\"isInitial\"] = 0] = \"isInitial\";\n    /**  Defines responsive toolbar search */\n    ResponsiveToolbarAction[ResponsiveToolbarAction[\"isSearch\"] = 1] = \"isSearch\";\n})(ResponsiveToolbarAction || (ResponsiveToolbarAction = {}));\n","import { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, isGroupAdaptive, getColumnByForeignKeyValue, refreshFilteredColsUid } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.foreignKeyDataState = { isPending: false, resolver: null };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed || this.getModuleName() === 'foreignKey') {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowPositionChanged, this.reorderRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n        this.parent.on(events.autoCol, this.refreshFilteredCols, this);\n        this.parent.on(events.columnsPrepared, this.refreshFilteredCols, this);\n    }\n    Data.prototype.reorderRows = function (e) {\n        this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0]);\n    };\n    Data.prototype.getModuleName = function () {\n        return 'data';\n    };\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        if (gObj.isAngular && !(gObj.query instanceof Query)) {\n            gObj.setProperties({ query: new Query() }, true);\n        }\n        else {\n            this.isQueryInvokedFromData = true;\n            gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n        }\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.getQuery().clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        if (isGroupAdaptive(this.parent)) {\n            this.virtualGroupPageQuery(query);\n        }\n        else {\n            this.pageQuery(query, skipPage);\n        }\n        this.groupQuery(query);\n        return query;\n    };\n    /** @hidden */\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        var rows = this.parent.aggregates;\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            for (var j = 0; j < row.columns.length; j++) {\n                var cols = row.columns[j];\n                var types = cols.type instanceof Array ? cols.type : [cols.type];\n                for (var k = 0; k < types.length; k++) {\n                    query.aggregate(types[k].toLowerCase(), cols.field);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.virtualGroupPageQuery = function (query) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if (query.queries.length) {\n            for (var i = 0; i < query.queries.length; i++) {\n                if (query.queries[i][fName] === 'onPage') {\n                    query.queries.splice(i, 1);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        var fName = 'fn';\n        if ((gObj.allowPaging || gObj.enableVirtualization || gObj.enableInfiniteScrolling) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            if (query.queries.length) {\n                for (var i = 0; i < query.queries.length; i++) {\n                    if (query.queries[i][fName] === 'onPage') {\n                        query.queries.splice(i, 1);\n                    }\n                }\n            }\n            if (!isNullOrUndefined(gObj.infiniteScrollModule) && gObj.enableInfiniteScrolling) {\n                this.parent.notify(events.infinitePageQuery, query);\n            }\n            else {\n                query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n            }\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            if (this.parent.groupSettings.enableLazyLoading) {\n                query.lazyLoad.push({ key: 'isLazyLoad', value: this.parent.groupSettings.enableLazyLoading });\n            }\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                if (!column) {\n                    this.parent.log('initial_action', { moduleName: 'group', columnName: columns[i] });\n                }\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                else {\n                    this.parent.log('initial_action', { moduleName: 'sort', columnName: columns[i].field });\n                    return query;\n                }\n                var fn = columns[i].direction;\n                if (col.sortComparer) {\n                    this.parent.log('grid_sort_comparer');\n                    fn = !this.isRemote() ? col.sortComparer.bind(col) : columns[i].direction;\n                }\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    if (col.isForeignColumn() || col.sortComparer) {\n                        query.sortByForeignKey(col.field, fn, undefined, columns[i].direction.toLowerCase());\n                    }\n                    else {\n                        query.sortBy(col.field, fn);\n                    }\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                if (typeof sortGrp[i].direction === 'string') {\n                    query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n                }\n                else {\n                    var col = this.getColumnByField(sortGrp[i].field);\n                    query.sortByForeignKey(sortGrp[i].field, sortGrp[i].direction, undefined, col.getSortDirection().toLowerCase());\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query, fcolumn, isForeignKey) {\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.getSearchColumnFieldNames();\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            var adaptor = !isForeignKey ? this.dataManager.adaptor : fcolumn.dataSource.adaptor;\n            if (needForeignKeySearch || (adaptor.getModuleName &&\n                adaptor.getModuleName() === 'ODataV4Adaptor')) {\n                fields = isForeignKey ? [fcolumn.foreignKeyValue] : fields;\n                for (var i = 0; i < fields.length; i++) {\n                    var column = isForeignKey ? fcolumn : this.getColumnByField(fields[i]);\n                    if (column.isForeignColumn() && !isForeignKey) {\n                        predicateList = this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(fields[i], sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                }\n                var predList = Predicate.or(predicateList);\n                predList.key = sSettings.key;\n                query.where(predList);\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        var foreignColEmpty;\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var foreignCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                var gridColumn = gObj.getColumnByField(col.field);\n                if (isNullOrUndefined(col.type) && gridColumn && (gridColumn.type === 'date' || gridColumn.type === 'datetime')) {\n                    col.type = gObj.getColumnByField(col.field).type;\n                }\n                if (col.isForeignKey) {\n                    foreignCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (defaultFltrCols.length) {\n                if (gObj.filterSettings.type === 'FilterBar' || gObj.filterSettings.type === 'Menu') {\n                    for (var i = 0, len = defaultFltrCols.length; i < len; i++) {\n                        defaultFltrCols[i].uid = defaultFltrCols[i].uid ||\n                            this.parent.grabColumnByFieldFromAllCols(defaultFltrCols[i].field).uid;\n                    }\n                }\n                var excelPredicate = CheckBoxFilterBase.getPredicate(defaultFltrCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    predicateList.push(excelPredicate[prop]);\n                }\n            }\n            if (foreignCols.length) {\n                for (var _e = 0, foreignCols_1 = foreignCols; _e < foreignCols_1.length; _e++) {\n                    var col = foreignCols_1[_e];\n                    col.uid = col.uid || this.parent.grabColumnByFieldFromAllCols(col.field).uid;\n                    var column_1 = this.parent.grabColumnByUidFromAllCols(col.uid);\n                    if (!column_1) {\n                        this.parent.log('initial_action', { moduleName: 'filter', columnName: col.field });\n                    }\n                    if (column_1.isForeignColumn() && getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        if (!column_1.columnData.length) {\n                            foreignColEmpty = true;\n                        }\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        var excelPredicate = CheckBoxFilterBase.getPredicate(columns);\n                        for (var _f = 0, _g = Object.keys(excelPredicate); _f < _g.length; _f++) {\n                            var prop = _g[_f];\n                            predicateList.push(excelPredicate[prop]);\n                        }\n                    }\n                }\n            }\n            if (predicateList.length && !foreignColEmpty) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        this.parent.log('datasource_syntax_mismatch', { dataState: this.parent });\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    if (isBlazor() && this.parent.isServerRendered) {\n                        this.parent.notify('offset', args);\n                    }\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            var promise = 'promise';\n            args[promise] = crud;\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                if (isBlazor()) {\n                    return crud.then(function (result) {\n                        return _this.insert(query, args);\n                    }).catch(function (e) {\n                        return null;\n                    });\n                }\n                else {\n                    return crud.then(function (result) {\n                        return _this.insert(query, args);\n                    });\n                }\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                if (isBlazor() && this.parent.isServerRendered) {\n                    this.parent.notify('offset', args);\n                }\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise ? promise : args[pr];\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key, original, query) {\n        if (query === void 0) { query = this.generateQuery(); }\n        query.requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var changedRecords = 'changedRecords';\n            var addedRecords = 'addedRecords';\n            var data = 'data';\n            if (isBlazor() && this.parent.isServerRendered) {\n                for (var i = 0; i < changes[changedRecords].length; i++) {\n                    var args = { data: changes[changedRecords][i] };\n                    this.parent.notify('offset', args);\n                    changes[changedRecords][i] = args[data];\n                }\n                for (var i = 0; i < changes[addedRecords].length; i++) {\n                    var args = { data: changes[addedRecords][i] };\n                    this.parent.notify('offset', args);\n                    changes[addedRecords][i] = args[data];\n                }\n            }\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n        this.parent.off(events.autoCol, this.refreshFilteredCols);\n        this.parent.off(events.columnsPrepared, this.refreshFilteredCols);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getForeignKeyDataState = function () {\n        return this.foreignKeyDataState;\n    };\n    Data.prototype.setForeignKeyDataState = function (state) {\n        this.foreignKeyDataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs_1 = args;\n                editArgs_1.key = key;\n                var promise = 'promise';\n                editArgs_1[promise] = deff.promise;\n                editArgs_1.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs_1);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    if (editArgs_1.requestType === 'save') {\n                        _this.parent.notify(events.recordAdded, editArgs_1);\n                    }\n                    _this.parent.trigger(events.dataStateChange, state);\n                })\n                    .catch(function () { return void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * Gets the columns where searching needs to be performed from the Grid.\n     * @return {string[]}\n     */\n    Data.prototype.getSearchColumnFieldNames = function () {\n        var colFieldNames = [];\n        var columns = this.parent.getColumns();\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var col = columns_2[_i];\n            if (col.allowSearching && !isNullOrUndefined(col.field)) {\n                colFieldNames.push(col.field);\n            }\n        }\n        return colFieldNames;\n    };\n    Data.prototype.refreshFilteredCols = function () {\n        if (this.parent.allowFiltering && this.parent.filterSettings.columns.length) {\n            refreshFilteredColsUid(this.parent, this.parent.filterSettings.columns);\n        }\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options, parent) {\n        merge(this, options);\n        this.parent = parent;\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    /**\n     * Replaces the row data and grid refresh the particular row element only.\n     * @param  {Object} data - To update new data for the particular row.\n     * @return {void}\n     */\n    Row.prototype.setRowValue = function (data) {\n        if (!this.parent) {\n            return;\n        }\n        var key = this.data[this.parent.getPrimaryKeyFieldNames()[0]];\n        this.parent.setRowData(key, data);\n    };\n    /**\n     * Replaces the given field value and refresh the particular cell element only.\n     * @param {string} field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     * @return {void}\n     */\n    Row.prototype.setCellValue = function (field, value) {\n        if (!this.parent) {\n            return;\n        }\n        var isValDiff = !(this.data[field].toString() === value.toString());\n        if (isValDiff) {\n            var pKeyField = this.parent.getPrimaryKeyFieldNames()[0];\n            var key = this.data[pKeyField];\n            this.parent.setCellValue(key, field, value);\n            this.makechanges(pKeyField, this.data);\n        }\n        else {\n            return;\n        }\n    };\n    Row.prototype.makechanges = function (key, data) {\n        if (!this.parent) {\n            return;\n        }\n        var gObj = this.parent;\n        var dataManager = gObj.getDataModule().dataManager;\n        dataManager.update(key, data);\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        this.isRowSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var colSpan = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var rowSpan = cellArgs.rowSpan;\n        var visible = 0;\n        var spannedCell;\n        if (row.index > 0) {\n            var cells = this.parent.groupSettings.columns.length > 0 &&\n                !this.parent.getRowsObject()[row.index - 1].isDataRow ? this.parent.getRowsObject()[row.index].cells :\n                this.parent.getRowsObject()[row.index - 1].cells;\n            var targetCell_1 = row.cells[i];\n            var uid_1 = 'uid';\n            spannedCell = cells.filter(function (cell) { return cell.column.uid === targetCell_1.column[uid_1]; })[0];\n        }\n        var colSpanLen = spannedCell && spannedCell.colSpanRange > 1 && spannedCell.rowSpanRange > 1 ?\n            spannedCell.colSpanRange : colSpan;\n        for (var j = i + 1; j < i + colSpanLen && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + colSpan; j < i + colSpan + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + colSpan + visible >= row.cells.length) {\n                colSpan -= (i + colSpan + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (colSpan > 1) {\n            attributes(td, { 'colSpan': colSpan.toString(), 'aria-colSpan': colSpan.toString() });\n        }\n        if (rowSpan > 1) {\n            attributes(td, { 'rowspan': rowSpan.toString(), 'aria-rowspan': rowSpan.toString() });\n            row.cells[i].isRowSpanned = true;\n            row.cells[i].rowSpanRange = Number(rowSpan);\n            if (colSpan > 1) {\n                row.cells[i].colSpanRange = Number(colSpan);\n            }\n        }\n        if (row.index > 0 && (spannedCell.rowSpanRange > 1)) {\n            row.cells[i].isSpanned = true;\n            row.cells[i].rowSpanRange = Number(spannedCell.rowSpanRange - 1);\n            row.cells[i].colSpanRange = spannedCell.rowSpanRange > 0 ? spannedCell.colSpanRange : 1;\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.isSpan = false;\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extendObjWithFn({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var _loop_1 = function (i, len) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            cell.isColumnSelected = cell.column.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        rowSpan: 1, foreignKeyData: row.cells[i].foreignKeyData,\n                        requestType: this_1.parent.requestTypeAction\n                    }));\n                    var isRowSpanned = false;\n                    if (row.index > 0 && this_1.isSpan) {\n                        var prevRowCells = this_1.parent.groupSettings.columns.length > 0 &&\n                            !this_1.parent.getRowsObject()[row.index - 1].isDataRow ?\n                            this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n                        var uid_1 = 'uid';\n                        var prevRowCell = prevRowCells.filter(function (cell) {\n                            return cell.column.uid === row.cells[i].column[uid_1];\n                        })[0];\n                        isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n                    }\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n                        this_1.isSpan = true;\n                        var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n            if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (row.lazyLoadCssClass) {\n            tr.classList.add(row.lazyLoadCssClass);\n        }\n        var vFTable = this.parent.enableColumnVirtualization && this.parent.frozenColumns !== 0;\n        if (!vFTable && this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                        var firstSummaryCell = (summarycell[0]);\n                        addClass([firstSummaryCell], ['e-firstsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\nimport * as events from '../base/constant';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization && args ? args.startIndex : 0;\n        startIndex = this.parent.enableInfiniteScrolling && args ? this.getInfiniteIndex(args) : startIndex;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            var args = {};\n            this.parent.notify(events.detailIndentCellInfo, args);\n            cols.push(this.generateCell(args, null, CellType.DetailExpand));\n        }\n        if (this.parent.isRowDragable()) {\n            cols.push(this.generateCell({}, null, CellType.RowDragIcon));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent, pid, tIndex, parentUid) {\n        var options = {};\n        options.foreignKeyData = {};\n        var isServerRendered = 'isServerRendered';\n        options.uid = isBlazor() && this.parent[isServerRendered] ? this.parent.getRowUid('grid-row') : getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.tIndex = tIndex;\n        options.isDataRow = true;\n        options.parentGid = pid;\n        options.parentUid = parentUid;\n        if (this.parent.isPrinting) {\n            if (this.parent.hierarchyPrintMode === 'All') {\n                options.isExpand = true;\n            }\n            else if (this.parent.hierarchyPrintMode === 'Expanded' && this.parent.expandedRows && this.parent.expandedRows[index]) {\n                options.isExpand = this.parent.expandedRows[index].isExpand;\n            }\n        }\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization && this.parent.selectionModule.checkBoxState) {\n            options.isSelected = this.parent.selectionModule.checkBoxState;\n            if (options.isSelected && this.parent.selectionModule.selectedRowIndexes.indexOf(index) === -1) {\n                this.parent.selectionModule.selectedRowIndexes.push(index);\n            }\n        }\n        else {\n            options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        }\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = isBlazor() ? new Row(options) :\n            new Row(options, this.parent);\n        row.cells = this.parent.getFrozenMode() === 'Right' ? this.generateCells(options).concat(cells)\n            : cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        var foreignKeyColumns = this.parent.getForeignKeyColumns();\n        for (var i = 0; i < foreignKeyColumns.length; i++) {\n            setValue(foreignKeyColumns[i].field, getForeignData(foreignKeyColumns[i], options.data), options.foreignKeyData);\n        }\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        for (var i = 0; i < dummies.length; i++) {\n            tmp.push(this.generateCell(dummies[i], options.uid, isNullOrUndefined(dummies[i].commands) ? undefined : CellType.CommandColumn, null, i, options.foreignKeyData));\n        }\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox' || opt.commands) {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        for (var i = 0; i < input.length; i++) {\n            this.refreshForeignKeyRow(input[i]);\n            input[i].cells = this.generateCells(input[i]);\n        }\n        return input;\n    };\n    RowModelGenerator.prototype.getInfiniteIndex = function (args) {\n        return args.requestType === 'infiniteScroll' || args.requestType === 'delete' || args.action === 'add'\n            ? args.startIndex : 0;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        var row = this.parent.aggregates.slice();\n        for (var i = 0; i < row.length; i++) {\n            var columns = row[i].columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                columns.push(new Column({}));\n            }\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) || (this.parent.isRowDragable() && !start)) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        end = end ? end + this.parent.getIndentCount() : end;\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end, columns) {\n        if (input.length === 0) {\n            if (args === undefined || !args.count) {\n                return [];\n            }\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        var row = this.getData();\n        for (var i = 0; i < row.length; i++) {\n            rows.push(this.getGeneratedRow(row[i], data[i], args ? args.level : undefined, start, end, args ? args.parentUid : undefined, columns));\n        }\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end, parentUid, columns) {\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.getIndentCount();\n        if (this.parent.isRowDragable()) {\n            indents = ['e-indentcelltop'];\n        }\n        var values = columns ? columns : this.getColumns(start, end);\n        for (var i = 0; i < values.length; i++) {\n            tmp.push(this.getGeneratedCell(values[i], summaryRow, i >= indentLength ? this.getCellType() :\n                i < this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[i], isDetailGridAlone));\n        }\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        if (isBlazor() && this.parent.isServerRendered && !isNullOrUndefined(parentUid)) {\n            row.uid = this.parent.getRowUid('grid-row');\n        }\n        else {\n            row.uid = getUid('grid-row');\n        }\n        row.parentUid = parentUid;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = {\n            'style': { 'textAlign': column.textAlign },\n            'e-mappinguid': column.uid, index: column.index\n        };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        opt.column.headerText = column.headerText;\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        for (var i = 0; i < summaryRows.length; i++) {\n            single = {};\n            var column = summaryRows[i].columns;\n            for (var j = 0; j < column.length; j++) {\n                single = this.setTemplate(column[j], (args && args.aggregates) ? args : data, single);\n            }\n            dummy.push(single);\n        }\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        for (var i = 0; i < types.length; i++) {\n            var key = column.field + ' - ' + types[i].toLowerCase();\n            var disp = column.columnName;\n            var val = types[i] !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(types[i], group.aggregates ? group : data, column, this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][types[i]] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        }\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData, getUid } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        /** @hidden */\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.isInfiniteScroll = (args.requestType === 'infiniteScroll');\n        this.rows = [];\n        this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level, i, undefined, this.rows.length);\n        }\n        this.index = 0;\n        if (this.parent.isCollapseStateEnabled()) {\n            this.ensureRowVisibility();\n        }\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw, parentid, childId, tIndex, parentUid) {\n        var _a;\n        var isRenderCaption = this.isInfiniteScroll && this.prevKey === data.key;\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length, parentUid));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level, parentid, index, this.rows.length, parentUid);\n                }\n            }\n        }\n        else {\n            var captionRow = this.generateCaptionRow(data, index, parentid, childId, tIndex, parentUid);\n            if (!isRenderCaption) {\n                this.rows = this.rows.concat(captionRow);\n            }\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length, captionRow.uid);\n            }\n            if (this.parent.aggregates.length) {\n                var rowCnt = this.rows.length;\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level, parentUid: captionRow.uid }));\n                for (var i = rowCnt - 1; i >= 0; i--) {\n                    if (this.rows[i].isCaptionRow) {\n                        this.rows[i].aggregatesCount = this.rows.length - rowCnt;\n                    }\n                    else if (!this.rows[i].isCaptionRow && !this.rows[i].isDataRow) {\n                        break;\n                    }\n                }\n            }\n        }\n        this.prevKey = data.key;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        for (var j = 0; j < cols.length; j++) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            if (gObj.isRowDragable()) {\n                indent++;\n            }\n            cells.push(this.generateCell(column, null, cellType, indent));\n        }\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    /** @hidden */\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent, parentID, childID, tIndex, parentUid) {\n        var options = {};\n        var tmp = [];\n        var records = 'records';\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        options.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled();\n        options.parentGid = parentID;\n        options.childGid = childID;\n        options.tIndex = tIndex;\n        options.isCaptionRow = true;\n        options.parentUid = parentUid;\n        options.gSummary = !isNullOrUndefined(data.items[records]) ? data.items[records].length : data.items.length;\n        options.uid = isBlazor() && this.parent.isServerRendered ? this.parent.getRowUid('grid-row') : getUid('grid-row');\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            var fkValue = (isNullOrUndefined(data.key) ? '' : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col));\n            setValue('foreignKey', fkValue, row.data);\n        }\n    };\n    /** @hidden */\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent, childID, tIndex, parentUid) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++, tIndex++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent, childID, tIndex, parentUid);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0; i < input.length; i++) {\n            if (input[i].isDataRow) {\n                input[i].cells = this.generateCells(input[i]);\n                for (var j = 0; j < input[i].indent; j++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(input[i].indent) === -1) {\n                        continue;\n                    }\n                    input[i].cells.unshift(this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = this.generateCaptionRow(input[i].data, input[i].indent);\n                input[i].cells = cRow.cells;\n            }\n        }\n        return input;\n    };\n    GroupModelGenerator.prototype.ensureRowVisibility = function () {\n        for (var i = 0; i < this.rows.length; i++) {\n            var row = this.rows[i];\n            if (!row.isCaptionRow) {\n                continue;\n            }\n            for (var j = i + 1; j < this.rows.length; j++) {\n                var childRow = this.rows[j];\n                if (row.uid === childRow.parentUid) {\n                    this.rows[j].visible = row.isExpand;\n                }\n            }\n        }\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable, isBlazor, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove, updateBlazorTemplate, removeClass } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren, setDisplayValue } from '../base/util';\nimport * as events from '../base/constant';\nimport { Row } from '../models/row';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth, isGroupAdaptive } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.freezeRowElements = [];\n        /** @hidden */\n        this.currentInfo = {};\n        /** @hidden */\n        this.prevCurrentView = [];\n        this.isLoaded = true;\n        this.viewColIndexes = [];\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.infiniteCache = {};\n        this.isRemove = false;\n        this.visibleRows = [];\n        this.visibleFrozenRows = [];\n        this.rightFreezeRows = [];\n        this.isAddRows = false;\n        this.isInfiniteFreeze = false;\n        this.useGroupCache = false;\n        this.mutableData = false;\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                if (_this.parent.isFrozenGrid() && _this.parent.enableVirtualization) {\n                    var mContentRows = [].slice.call(_this.parent.getMovableVirtualContent().querySelectorAll('.e-row'));\n                    var fContentRows = [].slice.call(_this.parent.getFrozenVirtualContent().querySelectorAll('.e-row'));\n                    _this.isLoaded = !mContentRows ? false : mContentRows.length === fContentRows.length;\n                    if (_this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll' && _this.isLoaded) {\n                        var mHdr = [].slice.call(_this.parent.getMovableVirtualHeader().querySelectorAll('.e-row'));\n                        var fHdr = [].slice.call(_this.parent.getFrozenVirtualHeader().querySelectorAll('.e-row'));\n                        _this.isLoaded = mHdr.length === fHdr.length;\n                    }\n                }\n                _this.ariaService.setBusy(_this.getPanel().querySelector('.e-content'), false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.isFrozenGrid()) {\n                    rows = args.isFrozen ? _this.freezeRows : args.renderFrozenRightContent ? _this.parent.getFrozenRightRowsObject()\n                        : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {}, function () {\n                        if (_this.parent.allowTextWrap) {\n                            _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                        }\n                    });\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.mutableData = this.parent.getDataModule().isRemote();\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization\n            && !this.parent.groupSettings.enableLazyLoading) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.refreshInfiniteModeBlocks, this.refreshContentRows, this);\n        this.parent.on(events.beforeCellFocused, this.beforeCellFocused, this);\n        this.parent.on(events.destroy, this.droppableDestroy, this);\n    }\n    ContentRender.prototype.beforeCellFocused = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n        }\n        else {\n            this.pressedKey = undefined;\n        }\n    };\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.element.querySelector('.e-gridcontent');\n        if (div) {\n            this.ariaService.setOptions(this.parent.element.querySelector('.e-content'), { busy: false });\n            this.setPanel(div);\n            return;\n        }\n        div = this.parent.createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = this.parent.createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var virtualTable = contentDiv.querySelector('.e-virtualtable');\n        var virtualTrack = contentDiv.querySelector('.e-virtualtrack');\n        if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)\n            && (!isBlazor() || (isBlazor() && !this.parent.isServerRendered))) {\n            remove(virtualTable);\n            remove(virtualTrack);\n        }\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstElementChild;\n        if (!isBlazor()) {\n            if (this.getTable()) {\n                remove(this.getTable());\n            }\n        }\n        var table = innerDiv.querySelector('.e-table') ? innerDiv.querySelector('.e-table') :\n            this.parent.createElement('table', { className: 'e-table', attrs: {\n                    cellspacing: '0.25px', role: 'grid',\n                    id: this.parent.element.id + id\n                }\n            });\n        this.setColGroup(this.parent.getHeaderTable().querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = this.currentMovableRows || gObj.currentViewData;\n        var contentModule = this.parent.contentModule;\n        var isReact = gObj.isReact && !isNullOrUndefined(gObj.rowTemplate);\n        var frag = isReact ? gObj.createElement('tbody') : document.createDocumentFragment();\n        if (!this.initialPageRecords) {\n            this.initialPageRecords = extend([], dataSource);\n        }\n        var hdrfrag = isReact ? gObj.createElement('tbody') : document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var trElement;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling\n            && args.requestType === 'infiniteScroll';\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        var tbdy;\n        var tableName;\n        if (isGroupAdaptive(gObj)) {\n            if (['sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n                .some(function (value) { return args.requestType === value; })) {\n                this.emptyVcRows();\n            }\n        }\n        var modelData;\n        var isServerRendered = 'isServerRendered';\n        if (isBlazor() && this.parent[isServerRendered]) {\n            modelData = this.generator.generateRows(dataSource, args);\n            if (this.parent.enableVirtualization) {\n                this.prevInfo = this.prevInfo ? this.prevInfo : args.virtualInfo;\n                this.prevInfo = args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n                    this.currentInfo.page !== args.virtualInfo.page ? this.currentInfo : args.virtualInfo;\n            }\n            this.rows = modelData;\n            this.freezeRows = modelData;\n            this.rowElements = [].slice.call(this.getTable().querySelectorAll('tr.e-row[data-uid]'));\n            if (frzCols) {\n                this.movableRows = modelData.map(function (mRow) {\n                    var sRow = new Row(mRow);\n                    sRow.cells = mRow.cells.slice(frzCols, mRow.cells.length);\n                    mRow.cells = mRow.cells.slice(0, frzCols);\n                    return sRow;\n                });\n                this.freezeRowElements = this.rowElements;\n            }\n            this.isLoaded = true;\n            this.parent.hideSpinner();\n            args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n            var arg = extend({ rows: this.rows }, args);\n            if (this.getTable().querySelector('.e-emptyrow')) {\n                remove(this.getTable().querySelector('.e-emptyrow'));\n                if (!isNullOrUndefined(this.getTable().querySelectorAll('.e-table > tbody')[1])) {\n                    remove(this.getTable().querySelectorAll('.e-table > tbody')[1]);\n                }\n            }\n            this.parent.notify('contentcolgroup', {});\n            this.rafCallback(arg)();\n            if (frzCols) {\n                cont.style.overflowY = 'hidden';\n                fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                mCont.style.overflowY = this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                fCont.style.borderRightWidth = '1px';\n                this.parent.notify(events.contentReady, { rows: this.movableRows, args: extend({}, arg, { isFrozen: false }) });\n            }\n            if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                || (!this.parent.isPersistSelection && !this.parent.enableVirtualization)) {\n                var rowIndex = 'editRowIndex';\n                if (this.parent.editSettings.mode === 'Normal' && !isNullOrUndefined(args[rowIndex])) {\n                    this.parent.selectRow(args[rowIndex]);\n                }\n            }\n            if (this.parent.enableVirtualization && !this.parent.getHeaderContent().querySelectorAll('.e-check').length) {\n                var removeClassByUid = this.parent.getRows().filter(function (x) { return x.getAttribute('aria-selected'); })\n                    .map(function (y) { return y.getAttribute('data-uid'); });\n                var addClassByUid = this.parent.getRows().filter(function (x) { return x.getAttribute('aria-selected') === null; })\n                    .map(function (y) { return y.getAttribute('data-uid'); });\n                for (var i = 0; i < removeClassByUid.length; i++) {\n                    if (!isNullOrUndefined(this.parent.getRowObjectFromUID(removeClassByUid[i])) &&\n                        !this.parent.getRowObjectFromUID(removeClassByUid[i]).isSelected) {\n                        this.parent.getRowElementByUID(removeClassByUid[i]).removeAttribute('aria-selected');\n                        if (!isNullOrUndefined(this.parent.getRowElementByUID(removeClassByUid[i]).querySelector('.e-check'))) {\n                            removeClass([this.parent.getRowElementByUID(removeClassByUid[i]).querySelector('.e-check')], ['e-check']);\n                        }\n                        for (var j = 0; j < this.parent.getRowElementByUID(removeClassByUid[i]).children.length; j++) {\n                            this.parent.getRowElementByUID(removeClassByUid[i])\n                                .children[j].classList.remove('e-selectionbackground', 'e-active');\n                        }\n                    }\n                }\n                for (var i = 0; i < addClassByUid.length; i++) {\n                    if (!isNullOrUndefined(this.parent.getRowObjectFromUID(addClassByUid[i]))\n                        && this.parent.getRowObjectFromUID(addClassByUid[i]).isSelected) {\n                        this.parent.getRowElementByUID(addClassByUid[i]).setAttribute('aria-selected', 'true');\n                        if (!isNullOrUndefined(this.parent.getRowElementByUID(addClassByUid[i]).querySelector('.e-frame'))) {\n                            addClass([this.parent.getRowElementByUID(addClassByUid[i]).querySelector('.e-frame')], ['e-check']);\n                        }\n                        for (var j = 0; j < this.parent.getRowElementByUID(addClassByUid[i]).children.length; j++) {\n                            this.parent.getRowElementByUID(addClassByUid[i])\n                                .children[j].classList.add('e-selectionbackground', 'e-active');\n                        }\n                    }\n                }\n            }\n            return;\n        }\n        if (this.parent.enableVirtualization && this.parent.isFrozenGrid()) {\n            if (this.parent.enableColumnVirtualization && args.requestType === 'virtualscroll'\n                && args.virtualInfo.sentinelInfo.axis === 'X') {\n                modelData = this.parent.contentModule.generateRows(dataSource, args);\n                args.renderMovableContent = true;\n            }\n            modelData = this.parent.contentModule.generateRows(dataSource, args);\n        }\n        else {\n            modelData = this.checkCache(modelData, args);\n            if (!this.isAddRows && !this.useGroupCache) {\n                modelData = this.generator.generateRows(dataSource, args);\n            }\n        }\n        this.setGroupCache(modelData, args);\n        this.parent.notify(events.setInfiniteCache, { isInfiniteScroll: isInfiniteScroll, modelData: modelData, args: args });\n        var idx = modelData[0].cells[0].index;\n        if (isFrozenGrid) {\n            tableName = contentModule.setTbody(modelData, args);\n            tbdy = contentModule.getTbody(tableName);\n        }\n        var isFrozenLeft = this.parent.getFrozenMode() === 'Left-Right' && tableName === 'frozen-right';\n        /* tslint:disable:no-any */\n        if (args.requestType !== 'infiniteScroll' && this.parent.registeredTemplate\n            && this.parent.registeredTemplate.template && !args.isFrozen && !isFrozenLeft) {\n            var templatetoclear = [];\n            for (var i = 0; i < this.parent.registeredTemplate.template.length; i++) {\n                for (var j = 0; j < this.parent.registeredTemplate.template[i].rootNodes.length; j++) {\n                    if (isNullOrUndefined(this.parent.registeredTemplate.template[i].rootNodes[j].parentNode)) {\n                        templatetoclear.push(this.parent.registeredTemplate.template[i]);\n                        /* tslint:enable:no-any */\n                    }\n                }\n            }\n            this.parent.destroyTemplate(['template'], templatetoclear);\n        }\n        if (this.parent.isReact && args.requestType !== 'infiniteScroll' && !args.isFrozen) {\n            this.parent.destroyTemplate(['columnTemplate', 'rowTemplate', 'detailTemplate', 'captionTemplate', 'commandsTemplate']);\n            this.parent.renderTemplates();\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (!isFrozenGrid) {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        var startIndex = 0;\n        var blockLoad = true;\n        if (isGroupAdaptive(gObj) && gObj.vcRows.length) {\n            var top_1 = 'top';\n            var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top :\n                (!isNullOrUndefined(args.scrollTop) ? args.scrollTop[top_1] : 0);\n            if (scrollTop !== 0) {\n                var offsets_1 = gObj.vGroupOffsets;\n                var bSize = gObj.pageSettings.pageSize / 2;\n                var values = Object.keys(offsets_1).map(function (key) { return offsets_1[key]; });\n                for (var m = 0; m < values.length; m++) {\n                    if (scrollTop < values[m]) {\n                        if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === 'up') {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m * bSize);\n                            break;\n                        }\n                        else {\n                            args.virtualInfo.blockIndexes = m === 0 || m === 1 ? [1, 2] : [m, m + 1];\n                            startIndex = m === 0 || m === 1 ? 0 : (m) * bSize;\n                            break;\n                        }\n                    }\n                }\n                if (Math.round(scrollTop + this.contentPanel.firstElementChild.offsetHeight) >=\n                    this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {\n                    blockLoad = false;\n                }\n            }\n        }\n        var isVFFrozenOnly = gObj.frozenRows && !gObj.isFrozenGrid() && this.parent.enableVirtualization\n            && args.requestType === 'reorder';\n        if ((gObj.frozenRows && args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo.axis === 'X') || isVFFrozenOnly) {\n            var bIndex = args.virtualInfo.blockIndexes;\n            var page = args.virtualInfo.page;\n            args.virtualInfo.blockIndexes = [1, 2];\n            if (isVFFrozenOnly) {\n                args.virtualInfo.page = 1;\n            }\n            var data = isVFFrozenOnly ? this.initialPageRecords : dataSource;\n            var mhdrData = this.vgenerator\n                .generateRows(data, args);\n            mhdrData.splice(this.parent.frozenRows);\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                mhdrData[i].cells.splice(0, this.parent.getFrozenColumns());\n                tr = row.render(mhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            args.virtualInfo.blockIndexes = bIndex;\n            args.virtualInfo.page = page;\n            if (isVFFrozenOnly && args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n        }\n        this.virtualFrozenHdrRefresh(hdrfrag, modelData, row, args, dataSource, columns);\n        for (var i = startIndex, len = modelData.length; i < len; i++) {\n            this.rows.push(modelData[i]);\n            if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n                this.setRowsInLazyGroup(modelData[i], i);\n                if (isNullOrUndefined(modelData[i].indent)) {\n                    continue;\n                }\n            }\n            this.setInfiniteVisibleRows(args, modelData[i], tableName);\n            if (isGroupAdaptive(gObj) && this.rows.length >= (gObj.pageSettings.pageSize) && blockLoad) {\n                break;\n            }\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                var isVFreorder = this.ensureFrozenHeaderRender(args);\n                if (gObj.frozenRows && i < gObj.frozenRows && !isInfiniteScroll && args.requestType !== 'virtualscroll' && isVFreorder\n                    && this.ensureVirtualFrozenHeaderRender(args)) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n                if (modelData[i].isExpand) {\n                    gObj.notify(events.expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);\n                }\n            }\n            else {\n                var rowTemplateID = gObj.element.id + 'rowTemplate';\n                var elements = void 0;\n                if (gObj.isReact) {\n                    var isHeader = gObj.frozenRows && i < gObj.frozenRows;\n                    var copied = extend({ index: i }, dataSource[i]);\n                    gObj.getRowTemplate()(copied, gObj, 'rowTemplate', rowTemplateID, null, null, isHeader ? hdrfrag : frag);\n                    gObj.renderTemplates();\n                }\n                else {\n                    elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate', rowTemplateID);\n                }\n                if (!gObj.isReact && elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = !gObj.isReact ? appendChildren(hdrfrag, elements) : hdrfrag.lastElementChild;\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        if (!gObj.isReact) {\n                            tr = appendChildren(frag, elements);\n                        }\n                        trElement = gObj.isReact ? frag.lastElementChild : tr.lastElementChild;\n                    }\n                }\n                var arg = { data: modelData[i].data, row: trElement ? trElement : tr };\n                this.parent.trigger(events.rowDataBound, arg);\n            }\n            if (modelData[i].isDataRow) {\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        if (isFrozenGrid) {\n            contentModule.splitRows(tableName);\n        }\n        if ((gObj.frozenRows && args.requestType !== 'virtualscroll' && !isInfiniteScroll && this.ensureVirtualFrozenHeaderRender(args))\n            || (args.requestType === 'virtualscroll' && args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === 'X')) {\n            hdrTbody = isFrozenGrid ? contentModule.getFrozenHeader(tableName) : gObj.getHeaderTable().querySelector('tbody');\n            if (isReact) {\n                var parentTable = hdrTbody.parentElement;\n                remove(hdrTbody);\n                parentTable.appendChild(hdrfrag);\n            }\n            else {\n                hdrTbody.innerHTML = '';\n                hdrTbody.appendChild(hdrfrag);\n            }\n        }\n        if (!gObj.enableVirtualization && gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.rows = this.rows.slice(0);\n        }\n        if (isFrozenGrid) {\n            contentModule.setIsFrozen(args, tableName);\n        }\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            var isVFTable = _this.parent.enableVirtualization && _this.parent.isFrozenGrid();\n            if (!_this.parent.enableVirtualization && !isInfiniteScroll) {\n                if (_this.parent.isFrozenGrid()) {\n                    remove(tbdy);\n                    tbdy = _this.parent.createElement('tbody');\n                }\n                else {\n                    remove(_this.tbody);\n                    _this.tbody = _this.parent.createElement('tbody');\n                }\n            }\n            if (isFrozenGrid && !isVFTable && !_this.parent.enableInfiniteScrolling) {\n                _this.appendContent(tbdy, frag, args, tableName);\n            }\n            else {\n                if (gObj.rowTemplate) {\n                    updateBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate', gObj);\n                }\n                if (isVFTable) {\n                    if (args.renderFrozenRightContent) {\n                        var frCont = gObj.getContent().querySelector('.e-frozen-right-content').querySelector('tbody');\n                        _this.appendContent(frCont, frag, args);\n                    }\n                    else if (!args.renderMovableContent) {\n                        _this.appendContent(fCont.querySelector('tbody'), frag, args);\n                    }\n                    else {\n                        _this.appendContent(mCont.querySelector('tbody'), frag, args);\n                        args.renderMovableContent = false;\n                    }\n                    if (!_this.parent.getFrozenColumns()) {\n                        contentModule.renderNextFrozentPart(args, tableName);\n                    }\n                }\n                else {\n                    if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                        _this.isAddRows = false;\n                        _this.parent.notify(events.removeInfiniteRows, { args: args });\n                        _this.parent.notify(events.appendInfiniteContent, {\n                            tbody: tbdy ? tbdy : _this.tbody, frag: frag, args: args, rows: _this.rows,\n                            rowElements: _this.rowElements, visibleRows: _this.visibleRows,\n                            tableName: tableName\n                        });\n                        if (!frzCols && isFrozenGrid) {\n                            if ((gObj.getFrozenMode() !== 'Left-Right'\n                                && (tableName === 'frozen-left' || tableName === 'frozen-right'))\n                                || (gObj.getFrozenMode() === 'Left-Right'\n                                    && (tableName === 'frozen-left' || tableName === 'movable'))) {\n                                _this.refreshContentRows(extend({}, args));\n                            }\n                        }\n                    }\n                    else {\n                        _this.useGroupCache = false;\n                        _this.appendContent(_this.tbody, frag, args);\n                    }\n                }\n            }\n            if (frzCols) {\n                contentModule.renderNextFrozentPart(args, tableName);\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.emptyVcRows = function () {\n        this.parent.vcRows = [];\n        this.parent.vRows = [];\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (isReact) {\n            this.getTable().appendChild(frag);\n        }\n        else {\n            tbody.appendChild(frag);\n            this.getTable().appendChild(tbody);\n        }\n    };\n    ContentRender.prototype.setRowsInLazyGroup = function (row, index) {\n        if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {\n            this.parent.contentModule.maintainRows(row, index);\n        }\n    };\n    ContentRender.prototype.setGroupCache = function (data, args) {\n        if (!this.useGroupCache && this.parent.groupSettings.enableLazyLoading) {\n            this.parent.notify(events.setGroupCache, { args: args, data: data });\n        }\n    };\n    ContentRender.prototype.ensureFrozenHeaderRender = function (args) {\n        return !((this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) || (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.frozenRows && this.parent.infiniteScrollModule.requestType === 'delete'\n            && this.parent.pageSettings.currentPage !== 1));\n    };\n    ContentRender.prototype.ensureVirtualFrozenHeaderRender = function (args) {\n        return !(this.parent.enableVirtualization && args.requestType === 'delete');\n    };\n    ContentRender.prototype.checkCache = function (modelData, args) {\n        if (this.parent.infiniteScrollSettings.enableCache && args.requestType === 'infiniteScroll') {\n            var index = args.isFrozen ? 1 : 0;\n            var frozenCols = this.parent.isFrozenGrid();\n            this.isAddRows = !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]);\n            if (frozenCols && !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.isAddRows = this.infiniteCache[this.parent.pageSettings.currentPage][index].length !== 0;\n            }\n            if (this.isAddRows) {\n                var data = !frozenCols ? this.infiniteCache[this.parent.pageSettings.currentPage]\n                    : this.infiniteCache[this.parent.pageSettings.currentPage][index];\n                modelData = this.parent.pageSettings.currentPage === 1 ? data.slice(this.parent.frozenRows) : data;\n            }\n            return modelData;\n        }\n        if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length &&\n            (args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n            && this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]) {\n            this.useGroupCache = true;\n            return this.parent.contentModule.initialGroupRows(args.requestType === 'reorder');\n        }\n        return null;\n    };\n    ContentRender.prototype.setInfiniteVisibleRows = function (args, data, tableName) {\n        var frozenCols = this.parent.isFrozenGrid();\n        if (this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache) {\n            if (frozenCols) {\n                if (tableName === 'frozen-left' || (this.parent.getFrozenMode() === 'Right' && tableName === 'frozen-right')) {\n                    this.visibleFrozenRows.push(data);\n                }\n                else if (tableName === 'movable') {\n                    this.visibleRows.push(data);\n                }\n                else {\n                    this.rightFreezeRows.push(data);\n                }\n            }\n            else if (!this.parent.infiniteScrollSettings.enableCache) {\n                this.visibleRows.push(data);\n            }\n        }\n    };\n    ContentRender.prototype.getCurrentBlockInfiniteRecords = function (isFreeze) {\n        var data = [];\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            if (!Object.keys(this.infiniteCache).length) {\n                return [];\n            }\n            var frozenCols = this.parent.isFrozenGrid();\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[this.parent.frozenRows].getAttribute('aria-rowindex'), 10);\n            var first = Math.ceil((index + 1) / this.parent.pageSettings.pageSize);\n            index = parseInt(rows[rows.length - 1].getAttribute('aria-rowindex'), 10);\n            var last = Math.ceil(index / this.parent.pageSettings.pageSize);\n            if (frozenCols) {\n                var idx = isFreeze ? 0 : 1;\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i][idx]\n                        : data.concat(this.infiniteCache[i][idx]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1][idx].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n            else {\n                for (var i = first; i <= last; i++) {\n                    data = !data.length ? this.infiniteCache[i] : data.concat(this.infiniteCache[i]);\n                }\n                if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n                    data = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(data);\n                }\n            }\n        }\n        return data;\n    };\n    ContentRender.prototype.getReorderedVFRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.getReorderedRows = function (args) {\n        return this.parent.contentModule.getReorderedFrozenRows(args);\n    };\n    ContentRender.prototype.virtualFrozenHdrRefresh = function (hdrfrag, modelData, row, args, dataSource, columns) {\n        if (this.parent.frozenRows && this.parent.enableVirtualization\n            && (args.requestType === 'reorder' || args.requestType === 'refresh')) {\n            var tr = void 0;\n            var fhdrData = [];\n            if (this.parent.isFrozenGrid()) {\n                this.currentMovableRows = dataSource;\n                fhdrData = this.getReorderedVFRows(args);\n            }\n            else {\n                fhdrData = this.getReorderedRows(args);\n            }\n            for (var i = 0; i < fhdrData.length; i++) {\n                tr = row.render(fhdrData[i], columns);\n                hdrfrag.appendChild(tr);\n            }\n            if (args.virtualInfo.page === 1) {\n                modelData.splice(0, this.parent.frozenRows);\n            }\n            if (args.renderMovableContent) {\n                this.parent.currentViewData = this.currentMovableRows;\n                this.currentMovableRows = null;\n            }\n        }\n    };\n    ContentRender.prototype.getInfiniteRows = function () {\n        var rows = [];\n        var frozenCols = this.parent.isFrozenGrid();\n        if (this.parent.enableInfiniteScrolling) {\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                var keys = Object.keys(this.infiniteCache);\n                for (var i = 0; i < keys.length; i++) {\n                    rows = !frozenCols ? rows.concat(this.infiniteCache[keys[i]]) : rows.concat(this.infiniteCache[keys[i]][0]);\n                }\n            }\n            else {\n                rows = frozenCols ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return rows;\n    };\n    ContentRender.prototype.getInfiniteMovableRows = function () {\n        var infiniteCacheRows = this.getCurrentBlockInfiniteRecords();\n        var infiniteRows = this.parent.enableInfiniteScrolling ? infiniteCacheRows.length ? infiniteCacheRows\n            : this.visibleRows : [];\n        return infiniteRows;\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        var infiniteRows = this.getInfiniteRows();\n        return infiniteRows.length ? infiniteRows : this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        var infiniteRows = this.getInfiniteMovableRows();\n        return infiniteRows.length ? infiniteRows : this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        if (!isNullOrUndefined(colGroup)) {\n            colGroup.id = 'content-' + colGroup.id;\n        }\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        if (isBlazor() && gObj.isServerRendered) {\n            this.parent.notify('setvisibility', columns);\n        }\n        var isFrozenGrid = this.parent.isFrozenGrid();\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (isFrozenGrid) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            var rightRows = [];\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                rightRows = gObj.getFrozenRightRowsObject();\n            }\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                var rightLen = rightRows.length ? rightRows[i].cells.length : 0;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                for (var k = 0; k < rightLen; k++) {\n                    row.cells.push(rightRows[i].cells[k]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        var args = {};\n        var infiniteData = this.infiniteRowVisibility();\n        var contentrows = infiniteData ? infiniteData\n            : this.rows.filter(function (row) { return !row.isDetailRow; });\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                if (isFrozenGrid) {\n                    if (column.getFreezeTableName() !== 'movable') {\n                        if (column.getFreezeTableName() === 'frozen-right') {\n                            var left = this.parent.getFrozenLeftColumnsCount();\n                            var movable = this.parent.getMovableColumnsCount();\n                            colIdx = idx = idx - (left + movable);\n                            var colG = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('colgroup');\n                            setStyleAttribute(colG.childNodes[idx], { 'display': displayVal });\n                            contentrows = gObj.getFrozenRightRowsObject();\n                            tr = gObj.getFrozenRightDataRows();\n                        }\n                        else {\n                            setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                            var infiniteFreezeData = this.infiniteRowVisibility(true);\n                            contentrows = infiniteFreezeData ? infiniteFreezeData : this.freezeRows;\n                            tr = gObj.getDataRows();\n                        }\n                    }\n                    else {\n                        var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                        colIdx = idx = idx - frzCols - this.parent.getFrozenLeftColumnsCount();\n                        setStyleAttribute(mTable.childNodes[idx], { 'display': displayVal });\n                        tr = gObj.getMovableDataRows();\n                        var infiniteMovableData = this.infiniteRowVisibility();\n                        contentrows = infiniteMovableData ? infiniteMovableData : this.movableRows;\n                    }\n                }\n                else {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n            }\n            if (!needFullRefresh) {\n                this.setDisplayNone(tr, colIdx, displayVal, contentrows);\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (needFullRefresh) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            if (!this.parent.getFrozenColumns()) {\n                this.parent.notify(events.partialRefresh, { rows: contentrows, args: args });\n            }\n            else {\n                this.parent.notify(events.partialRefresh, { rows: this.freezeRows, args: { isFrozen: true, rows: this.freezeRows } });\n                this.parent.notify(events.partialRefresh, { rows: this.movableRows, args: { isFrozen: false, rows: this.movableRows } });\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    ContentRender.prototype.setDisplayNone = function (tr, idx, displayVal, rows) {\n        setDisplayValue(tr, idx, displayVal, rows, this.parent, this.parent.isRowDragable());\n        this.parent.notify(events.infiniteShowHide, { visible: displayVal, index: idx, isFreeze: this.isInfiniteFreeze });\n    };\n    ContentRender.prototype.infiniteRowVisibility = function (isFreeze) {\n        var infiniteData;\n        if (this.parent.enableInfiniteScrolling) {\n            this.isInfiniteFreeze = isFreeze;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                infiniteData = isFreeze ? this.getCurrentBlockInfiniteRecords(true) : this.getCurrentBlockInfiniteRecords();\n            }\n            else {\n                infiniteData = isFreeze ? this.visibleFrozenRows : this.visibleRows;\n            }\n        }\n        return infiniteData;\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = void 0;\n            if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n                && this.parent.contentModule.isXaxis()) {\n                colGroup = this.parent.getMovableVirtualHeader().querySelector('colgroup').cloneNode(true);\n            }\n            else {\n                colGroup = this.getHeaderColGroup();\n            }\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.getHeaderColGroup = function () {\n        return isBlazor() ? this.parent.getHeaderTable().querySelector('colgroup').cloneNode(true) :\n            this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        this.droppable = new Droppable(gObj.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.droppableDestroy = function () {\n        if (this.droppable && !this.droppable.isDestroyed) {\n            this.droppable.destroy();\n        }\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        if (isBlazor() && !this.parent.isJsComponent && this.parent.frozenRows) {\n            return;\n        }\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        this.parent.notify(events.setFreezeSelection, { uid: uid, set: set, clearAll: clearAll });\n        var isFrozen = this.parent.isFrozenGrid();\n        if (isFrozen && this.parent.enableVirtualization) {\n            return;\n        }\n        if (isFrozen) {\n            var rows = this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; });\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].isSelected = set;\n            }\n        }\n        var row = this.getRows().filter(function (row) { return clearAll || uid === row.uid; });\n        for (var j = 0; j < row.length; j++) {\n            row[j].isSelected = set;\n            var cells = row[j].cells;\n            for (var k = 0; k < cells.length; k++) {\n                cells[k].isSelected = set;\n            }\n        }\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getInfiniteRowIndex = function (index) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var fRows = this.parent.frozenRows;\n            var idx = fRows > index ? 0 : fRows;\n            var firstRowIndex = parseInt(this.parent.getRows()[idx].getAttribute('aria-rowindex'), 10);\n            index = fRows > index ? index : (index - firstRowIndex) + fRows;\n        }\n        return index;\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        index = this.getInfiniteRowIndex(index);\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    ContentRender.prototype.setRowObjects = function (rows) {\n        this.rows = rows;\n    };\n    /** @hidden */\n    ContentRender.prototype.immutableModeRendering = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        gObj.hideSpinner();\n        var key = gObj.getPrimaryKeyFieldNames()[0];\n        var oldKeys = {};\n        var newKeys = {};\n        var newRowObjs = [];\n        var oldIndexes = {};\n        var oldRowObjs = gObj.getRowsObject().slice();\n        var batchChangeKeys = this.getBatchEditedRecords(key, oldRowObjs);\n        var newIndexes = {};\n        var hasBatch = Object.keys(batchChangeKeys).length !== 0;\n        if (gObj.getContent().querySelector('.e-emptyrow') || args.requestType === 'reorder'\n            || this.parent.groupSettings.columns.length) {\n            this.refreshContentRows(args);\n        }\n        else {\n            if (gObj.currentViewData.length === 0) {\n                return;\n            }\n            var oldRowElements = {};\n            var tbody = gObj.createElement('tbody');\n            var dataSource = gObj.currentViewData;\n            var trs = [].slice.call(this.getTable().querySelector('tbody').children);\n            if (this.prevCurrentView.length) {\n                var prevLen = this.prevCurrentView.length;\n                var currentLen = dataSource.length;\n                if (prevLen === currentLen) {\n                    for (var i = 0; i < currentLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        newKeys[dataSource[i][key]] = oldKeys[this.prevCurrentView[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n                else {\n                    for (var i = 0; i < currentLen; i++) {\n                        newKeys[dataSource[i][key]] = i;\n                        newIndexes[i] = dataSource[i][key];\n                    }\n                    for (var i = 0; i < prevLen; i++) {\n                        if (this.parent.editSettings.mode === 'Batch'\n                            && trs[i].classList.contains('e-insertedrow')) {\n                            trs.splice(i, 1);\n                            --i;\n                            continue;\n                        }\n                        oldRowElements[oldRowObjs[i].uid] = trs[i];\n                        oldKeys[this.prevCurrentView[i][key]] = i;\n                        oldIndexes[i] = this.prevCurrentView[i][key];\n                    }\n                }\n            }\n            for (var i = 0; i < dataSource.length; i++) {\n                var oldIndex = oldKeys[dataSource[i][key]];\n                if (!isNullOrUndefined(oldIndex)) {\n                    var isEqual = false;\n                    if (this.mutableData) {\n                        isEqual = this.objectEqualityChecker(this.prevCurrentView[i], dataSource[i]);\n                    }\n                    var tr = oldRowElements[oldRowObjs[oldIndex].uid];\n                    newRowObjs.push(oldRowObjs[oldIndex]);\n                    if (this.rowElements[i] && this.rowElements[i].getAttribute('data-uid') === newRowObjs[i].uid\n                        && ((hasBatch && isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                            || (!hasBatch && (isEqual || this.prevCurrentView[i] === dataSource[i])))) {\n                        if (oldIndex !== i) {\n                            this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                        }\n                        tbody.appendChild(tr);\n                        continue;\n                    }\n                    if ((hasBatch && !isNullOrUndefined(batchChangeKeys[newIndexes[i]]))\n                        || (!this.mutableData && dataSource[i] !== this.prevCurrentView[oldIndex])\n                        || (this.mutableData && !isEqual)) {\n                        oldRowObjs[oldIndex].setRowValue(dataSource[i]);\n                    }\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n                else {\n                    var row = new RowRenderer(this.serviceLocator, null, gObj);\n                    var modelData = this.generator.generateRows([dataSource[i]]);\n                    newRowObjs.push(modelData[0]);\n                    var tr = row.render(modelData[0], gObj.getColumns());\n                    tbody.appendChild(tr);\n                    this.refreshImmutableContent(i, tr, newRowObjs[i]);\n                }\n            }\n            this.rows = newRowObjs;\n            this.rowElements = [].slice.call(tbody.children);\n            remove(this.getTable().querySelector('tbody'));\n            this.getTable().appendChild(tbody);\n            this.parent.trigger(events.dataBound, {}, function () {\n                if (_this.parent.allowTextWrap) {\n                    _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            });\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n        }\n    };\n    /** @hidden */\n    ContentRender.prototype.objectEqualityChecker = function (old, next) {\n        var keys = Object.keys(old);\n        var isEqual = true;\n        for (var i = 0; i < keys.length; i++) {\n            if (old[keys[i]] !== next[keys[i]]) {\n                isEqual = false;\n                break;\n            }\n        }\n        return isEqual;\n    };\n    ContentRender.prototype.getBatchEditedRecords = function (primaryKey, rows) {\n        var keys = {};\n        var changes = this.parent.getBatchChanges();\n        var changedRecords = [];\n        var addedRecords = [];\n        if (Object.keys(changes).length) {\n            changedRecords = changes.changedRecords;\n            addedRecords = changes.addedRecords;\n        }\n        var args = { cancel: false };\n        this.parent.notify(events.immutableBatchCancel, { rows: rows, args: args });\n        if (addedRecords.length) {\n            if (this.parent.editSettings.newRowPosition === 'Bottom') {\n                rows.splice(rows.length - 1, addedRecords.length);\n            }\n            else {\n                if (!args.cancel) {\n                    rows.splice(0, addedRecords.length);\n                }\n            }\n        }\n        for (var i = 0; i < changedRecords.length; i++) {\n            keys[changedRecords[i][primaryKey]] = i;\n        }\n        return keys;\n    };\n    ContentRender.prototype.refreshImmutableContent = function (index, tr, row) {\n        row.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        row.isAltRow ? tr.classList.add('e-altrow') : tr.classList.remove('e-altrow');\n        row.index = index;\n        row.edit = undefined;\n        row.isDirty = false;\n        tr.setAttribute('aria-rowindex', index.toString());\n        this.updateCellIndex(tr, index);\n    };\n    ContentRender.prototype.updateCellIndex = function (rowEle, index) {\n        for (var i = 0; i < rowEle.cells.length; i++) {\n            rowEle.cells[i].setAttribute('index', index.toString());\n        }\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { parentsUntil, wrap, measureColumnDepth, appendChildren } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        this.isFirstCol = false;\n        this.isReplaceDragEle = true;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                if (_this.column.lockColumn) {\n                    return false;\n                }\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (!isNullOrUndefined(col.headerTemplate)) {\n                    var result = void 0;\n                    var colIndex = gObj.getColumnIndexByField(col.field);\n                    result = col.getHeaderTemplate()(extend({ 'index': colIndex }, col), gObj, 'headerTemplate');\n                    appendChildren(visualElement, result);\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });\n            if (isBlazor()) {\n                e.bindEvents(e.dragElement);\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    if (!gObj.groupSettings.allowReordering) {\n                        return;\n                    }\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid, droppedElement: e.droppedElement });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (!this.parent.enableColumnVirtualization\n            && !this.parent.getFrozenLeftColumnsCount() && !this.parent.getFrozenRightColumnsCount()) {\n            this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        }\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n        this.parent.on(events.initialEnd, this.renderCustomToolbar, this);\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            this.parent.on(events.uiUpdate, this.updateCustomResponsiveToolbar, this);\n        }\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.element.querySelector('.e-gridheader');\n        var isRendered = (div != null);\n        div = isRendered ? div : this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = isRendered ? div.querySelector('.e-headercontent') :\n            this.parent.createElement('div', { className: 'e-headercontent' });\n        this.toggleStackClass(div);\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (!isRendered) {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns() && !this.parent.getFrozenRightColumnsCount() && !this.parent.getFrozenLeftColumnsCount()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.isFrozenGrid() } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var skipDom = isBlazor() && this.parent.frozenRows !== 0;\n        var table = this.createTable();\n        var innerDiv = this.getPanel().querySelector('.e-headercontent');\n        if (!skipDom) {\n            innerDiv.appendChild(table);\n        }\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createHeader = function (tableEle, tableName) {\n        if (tableEle === void 0) { tableEle = null; }\n        var skipDom = isBlazor() && this.parent.frozenRows !== 0;\n        var gObj = this.parent;\n        var isFrozen = gObj.isFrozenGrid();\n        if (!(isBlazor() && !gObj.isJsComponent) && this.getTable() && !isFrozen) {\n            remove(this.getTable());\n        }\n        var columns = gObj.getColumns();\n        var innerDiv = this.getPanel().querySelector('.e-headercontent');\n        var table = skipDom ? tableEle || innerDiv.querySelector('.e-table') :\n            this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var tblName = tableName ? tableName : gObj.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        var findHeaderRow = this.createHeaderContent(tblName);\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement('colgroup');\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, this.parent);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        if (!skipDom) {\n            tbody.appendChild(rowBody);\n        }\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        if (!skipDom) {\n            table.appendChild(tbody);\n        }\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function (tableEle) {\n        if (tableEle === void 0) { tableEle = null; }\n        return this.createHeader(tableEle);\n    };\n    HeaderRender.prototype.createHeaderContent = function (tableName) {\n        var gObj = this.parent;\n        var index = 1;\n        var frozenMode = gObj.getFrozenMode();\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = measureColumnDepth(gObj.columns);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        if (frozenMode !== 'Right') {\n            rows = this.ensureColumns(rows);\n        }\n        rows = this.getHeaderCells(rows, tableName);\n        if (frozenMode === 'Right') {\n            index = 0;\n            rows = this.ensureColumns(rows);\n        }\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.isRowDragable() && this.parent.isFrozenGrid() && rows[0].cells[index]) {\n            var colFreezeMode = rows[0].cells[index].column.getFreezeTableName();\n            if (colFreezeMode === 'movable' || (frozenMode === 'Left-Right' && colFreezeMode === 'frozen-right')) {\n                if (frozenMode === 'Right') {\n                    rows[0].cells.pop();\n                }\n                else {\n                    rows[0].cells.shift();\n                }\n            }\n            else if (!frzCols && colFreezeMode === 'frozen-left') {\n                rows[0].cells[0].column.freeze = colFreezeMode === 'frozen-left' ? 'Left' : 'Right';\n            }\n            else if (frozenMode === 'Right' && colFreezeMode === 'frozen-right') {\n                rows[0].cells[rows[0].cells.length - 1].column.freeze = 'Right';\n            }\n        }\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && this.parent.getFrozenColumns()\n            && this.parent.contentModule.isXaxis()) {\n            cols = extend([], this.parent.getColumns());\n            cols.splice(0, this.parent.getFrozenColumns());\n        }\n        colGroup.id = this.parent.element.id + 'colGroup';\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col', { className: 'e-group-intent' });\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col', { className: 'e-detail-intent' });\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            col = this.parent.createElement('col', { className: 'e-drag-intent' });\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                var args = {};\n                this.parent.notify(events.detailIndentCellInfo, args);\n                rows[i].cells.push(this.generateCell(args, CellType.DetailHeader));\n            }\n            if (gObj.isRowDragable()) {\n                rows[i].cells.push(this.generateCell({}, CellType.RowDragHIcon));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows, tableName) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ?\n            this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;\n        this.frzIdx = 0;\n        this.notfrzIdx = 0;\n        if (this.parent.lockcolPositionCount) {\n            for (var i = 0; i < cols.length; i++) {\n                this.lockColsRendered = false;\n                rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (cols.length - 1), thead, tableName);\n            }\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.notfrzIdx = 0;\n            this.lockColsRendered = true;\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead, tableName);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLockColumn = !this.parent.lockcolPositionCount\n            || (cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered);\n        var isFrozenLockColumn = !this.parent.lockcolPositionCount || (cols.lockColumn && !this.lockColsRendered)\n            || (!cols.lockColumn && this.lockColsRendered);\n        var scrollbar = this.parent.getContent().querySelector('.e-movablescrollbar');\n        var left;\n        if (isFrozen && scrollbar && this.parent.enableColumnVirtualization) {\n            left = scrollbar.scrollLeft;\n        }\n        if (!cols.columns) {\n            if (left && left > 0 && this.parent.contentModule.isXaxis()\n                && this.parent.inViewIndexes[0] !== 0 && cols.getFreezeTableName() === 'movable') {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            else {\n                if ((!isFrozen && isLockColumn) || (isFrozen && cols.getFreezeTableName() === tableName && isFrozenLockColumn)) {\n                    rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n                }\n            }\n            if (this.parent.lockcolPositionCount) {\n                if ((this.frzIdx + this.notfrzIdx < this.parent.frozenColumns) &&\n                    ((cols.lockColumn && !this.lockColsRendered) || (!cols.lockColumn && this.lockColsRendered))) {\n                    this.frzIdx++;\n                }\n                else {\n                    this.notfrzIdx++;\n                }\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.isFirstCol = false;\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);\n                var isStackedLockColumn = this.parent.lockcolPositionCount === 0\n                    || (!this.lockColsRendered && stackedLockColsCount !== 0)\n                    || (this.lockColsRendered && (colSpan - stackedLockColsCount) !== 0);\n                var isFrozenStack = isFrozen && this.ensureStackedFrozen(cols.columns, tableName, false);\n                if ((!isFrozen && isStackedLockColumn) || isFrozenStack) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, stackedLockColsCount, cols.columns, tableName, isFrozen)\n                    }));\n                }\n            }\n            if (this.parent.lockcolPositionCount && !this.lockColsRendered) {\n                for (var i = 0; i < cols.columns.length; i++) {\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (cols.columns.length - 1) && isLastCol, isMovable, tableName);\n                }\n            }\n            if (this.lockColsRendered) {\n                for (var i = 0, len = cols.columns.length; i < len; i++) {\n                    var isFirstCol_1 = this.isFirstCol = cols.columns[i].visible && !this.isFirstCol && len !== 1;\n                    var isLaststackedCol = i === (len - 1);\n                    rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, isFirstCol_1, isLaststackedCol && isLastCol, isMovable, tableName);\n                }\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.ensureStackedFrozen = function (columns, tableName, isTrue) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                isTrue = this.ensureStackedFrozen(columns[i].columns, tableName, isTrue);\n            }\n            else if (columns[i].getFreezeTableName() === tableName) {\n                isTrue = true;\n                break;\n            }\n        }\n        return isTrue;\n    };\n    HeaderRender.prototype.getStackedLockColsCount = function (col, lockColsCount) {\n        if (col.columns) {\n            for (var i = 0; i < col.columns.length; i++) {\n                lockColsCount = this.getStackedLockColsCount(col.columns[i], lockColsCount);\n            }\n        }\n        else if (col.lockColumn) {\n            lockColsCount++;\n        }\n        return lockColsCount;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, stackedLockColsCount, columns, tableName, isFrozen) {\n        if (isFrozen) {\n            colSpan = this.getFrozenColSpan(columns, tableName, 0);\n        }\n        else if (this.parent.lockcolPositionCount) {\n            colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.getFrozenColSpan = function (columns, tableName, count) {\n        var length = columns.length;\n        for (var i = 0; i < length; i++) {\n            if (columns[i].columns) {\n                count = this.getFrozenColSpan(columns[i].columns, tableName, count);\n            }\n            else if (columns[i].getFreezeTableName() === tableName) {\n                count++;\n            }\n        }\n        return count;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal;\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (frzCols) {\n                var normalizedfrzCols = this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n                if (idx < normalizedfrzCols) {\n                    if (isBlazor() && gObj.isServerRendered) {\n                        setStyleAttribute(this.getTable().querySelector('colgroup').children[idx], { 'display': displayVal });\n                        setStyleAttribute(this.getTable().querySelectorAll('th')[idx], { 'display': displayVal });\n                    }\n                    else {\n                        setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                    }\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    var mTbl = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('table');\n                    setStyleAttribute(mTblColGrp.children[idx - normalizedfrzCols], { 'display': displayVal });\n                    if (isBlazor() && gObj.isServerRendered) {\n                        setStyleAttribute(mTbl.querySelectorAll('th')[idx - frzCols], { 'display': displayVal });\n                    }\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        if (isBlazor() && this.parent.isServerRendered && this.parent.frozenRows && this.parent.getFrozenColumns()) {\n            this.freezeReorder = true;\n        }\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var frzCols = this.parent.isFrozenGrid();\n        var isVFTable = this.parent.enableColumnVirtualization && frzCols;\n        var setFrozenTable = isBlazor() && this.parent.isServerRendered && this.parent.frozenRows !== 0 && frzCols;\n        var headerDiv = this.getPanel();\n        this.toggleStackClass(headerDiv);\n        var table = this.freezeReorder ? this.headerPanel.querySelector('.e-movableheader').querySelector('.e-table')\n            : this.getTable();\n        var tableName = this.parent.isFrozenGrid() ? this.parent.getFrozenLeftCount() ? 'frozen-left'\n            : 'frozen-right' : undefined;\n        if (isVFTable) {\n            table = this.parent.contentModule.getVirtualFreezeHeader();\n            tableName = this.parent.contentModule.isXaxis() ? 'movable' : tableName;\n        }\n        if (setFrozenTable && !isVFTable) {\n            table = this.freezeReorder ? this.headerPanel.querySelector('.e-movableheader').querySelector('.e-table') :\n                this.headerPanel.querySelector('.e-frozenheader').querySelector('.e-table');\n        }\n        if (table) {\n            if (isBlazor() && this.parent.isServerRendered) {\n                table.removeChild(table.querySelector('colgroup'));\n                table.removeChild(table.querySelector('thead'));\n            }\n            else {\n                remove(table);\n                table.removeChild(table.firstChild);\n                table.removeChild(table.childNodes[0]);\n            }\n            var colGroup = this.parent.createElement('colgroup');\n            var findHeaderRow = this.createHeaderContent(tableName);\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            if (!isVFTable && !setFrozenTable) {\n                this.setTable(table);\n            }\n            if (!(isBlazor() && this.parent.isServerRendered)) {\n                this.appendContent(table);\n            }\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols || (this.parent.enableColumnVirtualization && frzCols)) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: frzCols } });\n            }\n            if (this.parent.enableColumnVirtualization && parentsUntil(table, 'e-movableheader')) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.toggleStackClass = function (div) {\n        var column = this.parent.columns;\n        var stackedHdr = column.some(function (column) { return !isNullOrUndefined(column.columns); });\n        if (stackedHdr) {\n            div.classList.add('e-stackedheader');\n        }\n        else {\n            div.classList.remove('e-stackedheader');\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().querySelector('.e-headercontent').appendChild(table);\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        this.draggable = new Draggable(gObj.getHeaderContent(), {\n            dragTarget: '.e-headercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            abort: '.e-rhandler',\n            isReplaceDragEle: this.isReplaceDragEle\n        });\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    HeaderRender.prototype.renderCustomToolbar = function () {\n        var _this = this;\n        var gObj = this.parent;\n        if (gObj.rowRenderingMode === 'Vertical' && !gObj.toolbar\n            && (gObj.allowSorting || (gObj.allowFiltering && gObj.filterSettings.type !== 'FilterBar'))) {\n            var div = gObj.createElement('div', { className: 'e-res-toolbar e-toolbar' });\n            var toolbarItems = gObj.createElement('div', { className: 'e-toolbar-items' });\n            var toolbarLeft = gObj.createElement('div', { className: 'e-toolbar-left' });\n            var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;\n            for (var i = 0; i < count; i++) {\n                var toolbarItem = gObj.createElement('div', { className: 'e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align' });\n                var cls = count === 1 ? this.parent.allowSorting ? 'sort'\n                    : 'filter' : i === 1 ? 'sort' : 'filter';\n                var button = gObj.createElement('button', { className: 'e-tbar-btn e-control e-btn e-lib e-icon-btn' });\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-res' + cls + '-icon e-icons' });\n                button.appendChild(span);\n                var btnObj = new Button({});\n                btnObj.appendTo(button);\n                button.onclick = function (e) {\n                    if (e.target.classList.contains('e-ressort-btn')\n                        || e.target.classList.contains('e-ressort-icon')) {\n                        _this.parent.showResponsiveCustomSort();\n                    }\n                    else {\n                        _this.parent.showResponsiveCustomFilter();\n                    }\n                };\n                toolbarItem.appendChild(button);\n                toolbarLeft.appendChild(toolbarItem);\n            }\n            toolbarItems.appendChild(toolbarLeft);\n            div.appendChild(toolbarItems);\n            gObj.element.insertBefore(div, this.parent.element.querySelector('.e-gridheader'));\n        }\n        else {\n            if (!gObj.toolbar) {\n                gObj.getContent().classList.add('e-responsive-header');\n            }\n        }\n    };\n    HeaderRender.prototype.updateCustomResponsiveToolbar = function (args) {\n        var resToolbar = this.parent.element.querySelector('.e-responsive-toolbar');\n        if (args.module === 'toolbar') {\n            if (resToolbar) {\n                remove(resToolbar);\n            }\n            else {\n                this.renderCustomToolbar();\n            }\n        }\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren, extendObjWithFn } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\nimport { CellType } from '../base/enum';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            if (column.type === 'number' && isNaN(parseInt(value, 10))) {\n                value = null;\n            }\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData, isEdit) {\n        var _a;\n        var result;\n        if (cell.column.template) {\n            var isReactCompiler = this.parent.isReact && typeof (cell.column.template) !== 'string';\n            var literals = ['index'];\n            var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a.column = cell.column, _a));\n            var templateID = this.parent.element.id + cell.column.uid;\n            var str = 'isStringTemplate';\n            var index = 'index';\n            if (isBlazor() && isEdit) {\n                var rNumber = this.parent.editSettings.mode !== 'Batch' ? parseInt(attributes[index], 10) : null;\n                result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str], rNumber);\n                window[templateID] = null;\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    updateBlazorTemplate(templateID, 'Template', cell.column, false);\n                }\n            }\n            else {\n                if (isReactCompiler) {\n                    var copied = { 'index': attributes[literals[0]] };\n                    cell.column.getColumnTemplate()(extend(copied, dummyData), this.parent, 'columnTemplate', templateID, this.parent[str], null, node);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template', templateID, this.parent[str]);\n                }\n            }\n            if (!isReactCompiler) {\n                appendChildren(node, result);\n            }\n            this.parent.notify('template-result', { template: result });\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes, isExpand, isEdit) {\n        return this.refreshCell(cell, data, attributes, isEdit);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var isEdit = this.parent.editSettings.mode === 'Batch' && td.classList.contains('e-editedbatchcell');\n        if (this.parent.isReact) {\n            td.innerHTML = '';\n            var cellIndex = td.cellIndex;\n            var parentRow = td.parentElement;\n            remove(td);\n            var newTD = this.refreshCell(cell, data, attributes, isEdit);\n            this.cloneAttributes(newTD, td);\n            parentRow.cells.length !== cellIndex - 1 ? parentRow.insertBefore(newTD, parentRow.cells[cellIndex])\n                : parentRow.appendChild(newTD);\n        }\n        else {\n            var node = this.refreshCell(cell, data, attributes, isEdit);\n            td.innerHTML = '';\n            td.setAttribute('aria-label', node.getAttribute('aria-label'));\n            var elements = [].slice.call(node.childNodes);\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                td.appendChild(elem);\n            }\n        }\n    };\n    // tslint:disable-next-line:no-any\n    CellRenderer.prototype.cloneAttributes = function (target, source) {\n        // tslint:disable-next-line:no-any\n        var attrs = source.attributes;\n        // tslint:disable-next-line:no-any\n        var i = attrs.length;\n        // tslint:disable-next-line:no-any\n        var attr;\n        while (i--) {\n            attr = attrs[i];\n            target.setAttribute(attr.name, attr.value);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes, isEdit) {\n        var _a;\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if ((column.type === 'date' || column.type === 'datetime') && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        if (this.evaluate(node, cell, data, attributes, fData, isEdit) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            setStyleAndAttributes(node, { 'data-cell': column.headerText });\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            if (column.type !== 'checkbox') {\n                node.classList.add('e-ellipsistooltip');\n            }\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (cell.isColumnSelected) {\n            classes.push.apply(classes, ['e-columnselection']);\n        }\n        if (cell.cellType === CellType.Header) {\n            attr[prop.colindex] = cell.colIndex;\n        }\n        else if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        var hValueAccer;\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (!isNullOrUndefined(column.headerValueAccessor)) {\n            hValueAccer = this.getValue(column.headerText, column);\n        }\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            if (!isNullOrUndefined(hValueAccer)) {\n                value = hValueAccer;\n            }\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                var foreignColumn = this.parent.getForeignKeyColumns();\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field || (foreignColumn.length\n                            && column.foreignKeyValue === this.parent.filterSettings.columns[count].field)) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            //need to pass the template id for blazor headertemplate\n            var headerTempID = gridObj.element.id + column.uid + 'headerTemplate';\n            var str = 'isStringTemplate';\n            var col = isBlazor() ? column.toJSON() : column;\n            var isReactCompiler = this.parent.isReact && typeof (column.headerTemplate) !== 'string';\n            if (isReactCompiler) {\n                var copied = { 'index': colIndex };\n                node.firstElementChild.innerHTML = '';\n                column.getHeaderTemplate()(extend(copied, col), gridObj, 'headerTemplate', headerTempID, this.parent[str], null, node.firstElementChild);\n                this.parent.renderTemplates();\n            }\n            else {\n                result = column.getHeaderTemplate()(extend({ 'index': colIndex }, col), gridObj, 'headerTemplate', headerTempID, this.parent[str]);\n                node.firstElementChild.innerHTML = '';\n                appendChildren(node.firstElementChild, result);\n            }\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            if (column.type !== 'checkbox') {\n                node.classList.add('e-ellipsistooltip');\n            }\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.getValue = function (field, column) {\n        return column.headerValueAccessor(field, column);\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', {\n            className: 'e-stackedheadercelldiv',\n            attrs: { 'e-mappinguid': cell.column.uid }\n        });\n        var column = cell.column;\n        node.appendChild(div);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            appendChildren(div, column.getHeaderTemplate()(column, this.parent, 'headerTemplate'));\n        }\n        else {\n            this.appendHtml(div, column.headerText, column.getDomSetter());\n        }\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (column.clipMode === 'Clip' || (!column.clipMode && this.parent.clipMode === 'Clip')) {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip' || (!column.clipMode && this.parent.clipMode === 'EllipsisWithTooltip')) {\n            node.classList.add('e-ellipsistooltip');\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        if (cell.column.customAttributes) {\n            setStyleAndAttributes(node, cell.column.customAttributes);\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = cell.column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption',\n            attrs: { id: _this.parent.element.id + 'captioncell', role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            var isReactCompiler = this.parent.isReact && typeof (gObj.groupSettings.captionTemplate) !== 'string';\n            if (isBlazor()) {\n                var tempID = gObj.element.id + 'captionTemplate';\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data, null, null, tempID);\n            }\n            else {\n                if (isReactCompiler) {\n                    var tempID = gObj.element.id + 'captionTemplate';\n                    templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent, 'captionTemplate', tempID, null, null, node);\n                    this.parent.renderTemplates();\n                }\n                else if (this.parent.isVue) {\n                    result = templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent);\n                }\n                else {\n                    result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n                }\n            }\n            if (!isReactCompiler) {\n                appendChildren(node, result);\n            }\n        }\n        else {\n            if (gObj.groupSettings.enableLazyLoading) {\n                node.innerHTML = cell.column.headerText + ': ' + value;\n            }\n            else {\n                node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                    (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n            }\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     * @param  {{ [x: string]: string }} attr\n     * @param {boolean} isExpand\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data, attr, isExpand) {\n        var node = this.element.cloneNode();\n        node.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', isExpand ? 'true' : 'false');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', {\n            className: isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' : 'e-icons e-gnextforward e-icon-grightarrow'\n        }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar RowDragDropRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropRenderer, _super);\n    function RowDragDropRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowdragdrop',\n            attrs: { role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    RowDragDropRenderer.prototype.render = function (cell, data) {\n        var nodeElement = this.element.cloneNode();\n        nodeElement.appendChild(this.parent.createElement('div', {\n            className: 'e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon'\n        }));\n        if (cell.isSelected) {\n            nodeElement.classList.add('e-selectionbackground');\n            nodeElement.classList.add('e-active');\n        }\n        return nodeElement;\n    };\n    return RowDragDropRenderer;\n}(CellRenderer));\nexport { RowDragDropRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar RowDragDropHeaderRenderer = /** @class */ (function (_super) {\n    __extends(RowDragDropHeaderRenderer, _super);\n    function RowDragDropHeaderRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-rowdragheader' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    RowDragDropHeaderRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return RowDragDropHeaderRenderer;\n}(CellRenderer));\nexport { RowDragDropHeaderRenderer };\n","import { remove, resetBlazorTemplate, updateBlazorTemplate, blazorTemplates, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, isGroupAdaptive, getDatePredicate, getObject } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\nimport { RowDragDropRenderer } from './row-drag-drop-renderer';\nimport { RowDragDropHeaderRenderer } from '../renderer/row-drag-header-indent-render';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.counter = 0;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        var isServerRendered = 'isServerRendered';\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.parent.scrollModule.setWidth();\n        this.parent.scrollModule.setHeight();\n        if (this.parent.height !== 'auto') {\n            this.parent.scrollModule.setPadding();\n        }\n        if (!(isBlazor() && this.parent[isServerRendered])) {\n            this.refreshDataManager();\n        }\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        var _this = this;\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        var gObj = this.parent;\n        var preventUpdate = 'preventUpdate';\n        gObj.notify(e.requestType + \"-begin\", e);\n        if (isBlazor()) {\n            this.resetTemplates();\n        }\n        if (isBlazor() && gObj.isServerRendered) {\n            var bulkChanges = 'bulkChanges';\n            if (gObj[bulkChanges].dataSource) {\n                delete gObj[bulkChanges].dataSource;\n            }\n            gObj.notify('blazor-action-begin', e);\n            if (e.requestType === 'filtering') {\n                var columns = 'columns';\n                e[columns] = null;\n            }\n            if (e.requestType === 'sorting') {\n                var target = 'target';\n                e[target] = null;\n            }\n            if (gObj.editSettings.mode === 'Batch' && !gObj.isEdit) {\n                gObj.notify('closebatch', {});\n            }\n        }\n        var tempPreventUpdate = this.parent[preventUpdate];\n        gObj.trigger(events.actionBegin, e, function (args) {\n            if (args === void 0) { args = { requestType: 'refresh' }; }\n            if (args.requestType === 'delete' && isBlazor() && !gObj.isJsComponent) {\n                var data = 'data';\n                if (isNullOrUndefined(gObj.commandDelIndex)) {\n                    args[data] = gObj.getSelectedRecords();\n                }\n                else {\n                    var tempSelectedRecord = args[data];\n                    args[data] = {};\n                    args[data][0] = tempSelectedRecord;\n                }\n            }\n            if (args.cancel) {\n                gObj.notify(events.cancelBegin, args);\n                return;\n            }\n            if (isBlazor() && gObj.editSettings.mode === 'Normal' && gObj.isEdit && e.requestType !== 'infiniteScroll') {\n                gObj.notify('closeinline', {});\n            }\n            if (args.requestType === 'delete' && gObj.allowPaging) {\n                var dataLength = args.data.length;\n                var count = gObj.pageSettings.totalRecordsCount - dataLength;\n                var currentViewData = gObj.getCurrentViewRecords().length;\n                if (!(currentViewData - dataLength) && count && ((gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize) == count) {\n                    gObj.prevPageMoving = true;\n                    gObj.setProperties({\n                        pageSettings: {\n                            totalRecordsCount: count, currentPage: Math.ceil(count / gObj.pageSettings.pageSize)\n                        }\n                    }, true);\n                    gObj.pagerModule.pagerObj.totalRecordsCount = count;\n                }\n            }\n            if (isBlazor() && _this.parent.isServerRendered) {\n                if (tempPreventUpdate) {\n                    var bulkChanges = 'bulkChanges';\n                    gObj[bulkChanges] = {};\n                    return;\n                }\n                if (e.requestType === 'refresh') {\n                    _this.parent.notify('updateaction', args);\n                }\n                if (args.requestType !== 'virtualscroll') {\n                    _this.parent.showSpinner();\n                }\n                if (args.requestType === 'delete' || args.requestType === 'save') {\n                    _this.parent.notify(events.addDeleteAction, args);\n                    _this.parent.notify('add-delete-success', args);\n                }\n                else {\n                    _this.parent.allowServerDataBinding = true;\n                    _this.parent.serverDataBind();\n                    _this.parent.allowServerDataBinding = false;\n                }\n            }\n            else if (args.requestType === 'reorder' && _this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else if ((args.requestType === 'paging' || args.requestType === 'columnstate' || args.requestType === 'reorder')\n                && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length\n                && _this.parent.contentModule.getGroupCache()[_this.parent.pageSettings.currentPage]) {\n                _this.contentRenderer.refreshContentRows(args);\n            }\n            else {\n                _this.refreshDataManager(args);\n            }\n        });\n    };\n    /**\n     * @hidden\n     */\n    Render.prototype.resetTemplates = function () {\n        var gObj = this.parent;\n        var gridColumns = gObj.getColumns();\n        if (gObj.detailTemplate) {\n            var detailTemplateID = gObj.element.id + 'detailTemplate';\n            blazorTemplates[detailTemplateID] = [];\n            resetBlazorTemplate(detailTemplateID, 'DetailTemplate');\n        }\n        if (gObj.groupSettings.captionTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'captionTemplate', 'CaptionTemplate');\n        }\n        if (gObj.rowTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'rowTemplate', 'RowTemplate');\n        }\n        if (gObj.toolbarTemplate) {\n            resetBlazorTemplate(gObj.element.id + 'toolbarTemplate', 'ToolbarTemplate');\n        }\n        if (gObj.pageSettings.template) {\n            resetBlazorTemplate(gObj.element.id + '_template', 'pageSettings');\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (gridColumns[i].template) {\n                blazorTemplates[gObj.element.id + gridColumns[i].uid] = [];\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid, 'Template');\n            }\n            if (gridColumns[i].headerTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'headerTemplate', 'HeaderTemplate');\n            }\n            if (gridColumns[i].filterTemplate) {\n                resetBlazorTemplate(gObj.element.id + gridColumns[i].uid + 'filterTemplate', 'FilterTemplate');\n            }\n        }\n        var guid = 'guid';\n        for (var k = 0; k < gObj.aggregates.length; k++) {\n            for (var j = 0; j < gObj.aggregates[k].columns.length; j++) {\n                if (gObj.aggregates[k].columns[j].footerTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'footerTemplate';\n                    resetBlazorTemplate(tempID, 'FooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupFooterTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupFooterTemplate';\n                    resetBlazorTemplate(tempID, 'GroupFooterTemplate');\n                }\n                if (gObj.aggregates[k].columns[j].groupCaptionTemplate) {\n                    var tempID = gObj.element.id + gObj.aggregates[k].columns[j][guid] + 'groupCaptionTemplate';\n                    resetBlazorTemplate(tempID, 'GroupCaptionTemplate');\n                }\n            }\n        }\n    };\n    Render.prototype.refreshComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.parent.notify(events.resetInfiniteBlocks, args);\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().querySelector('.e-content'), true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered, args);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1, action: args });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred, args) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred, action: args });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.uid === value.uid;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        args.requestType = 'batchsave';\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        if (isBlazor() && !this.parent.isJsComponent) {\n            promise.then(function (e) {\n                _this.parent.notify('editsuccess', args);\n            }).catch(function (e) {\n                var error = 'error';\n                var message = 'message';\n                if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                    e[error] = e[error][message];\n                }\n                _this.parent.trigger(events.actionFailure, e);\n            });\n        }\n        else {\n            var query_1 = this.data.generateQuery().requiresCount();\n            if (this.data.dataManager.dataSource.offline) {\n                this.refreshDataManager({ requestType: 'batchsave' });\n                return;\n            }\n            else {\n                promise.then(function (e) {\n                    _this.data.getData(args, query_1)\n                        .then(function (e) { return _this.dmSuccess(e, args); })\n                        .catch(function (e) { return _this.dmFailure(e, args); });\n                })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            }\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        if (!isNullOrUndefined(tbody)) {\n            remove(tbody);\n        }\n        tbody = this.parent.createElement('tbody');\n        var spanCount = 0;\n        if (gObj.detailTemplate || gObj.childGrid) {\n            ++spanCount;\n        }\n        tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: (gObj.getVisibleColumns().length + spanCount).toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var cFormat = 'customFormat';\n        var equalTo = 'equalTo';\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = getObject(columns[i].field || '', data);\n            if (!isNullOrUndefined(columns[i][cFormat])) {\n                columns[i].format = columns[i][cFormat];\n            }\n            if (!isNullOrUndefined(columns[i].validationRules) && !isNullOrUndefined(columns[i].validationRules[equalTo])) {\n                columns[i].validationRules[equalTo][0] = this.parent.element.id + columns[i].validationRules[equalTo][0];\n            }\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type || (isBlazor() && this.parent.isServerRendered && columns[i].type === 'none')) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || (isBlazor() && this.parent.isServerRendered ? 'none' : null);\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(extend({}, columns[i].format)));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                var isServerRendered = 'isServerRendered';\n                var isServerDateMap = this.parent[isServerRendered] || this.parent.printModule.isPrintGrid();\n                setFormatter(this.locator, columns[i], isServerDateMap);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    /** @hidden */\n    // tslint:disable-next-line:max-func-body-length\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var _this = this;\n        var gObj = this.parent;\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        e.actionArgs = args;\n        var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache\n            && (args.requestType === 'delete' || (args.requestType === 'save' && this.parent.infiniteScrollModule.requestType === 'add'));\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeDataBound, e, function (dataArgs) {\n            if (dataArgs.cancel) {\n                return;\n            }\n            dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;\n            var len = Object.keys(dataArgs.result).length;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n                gObj.hideSpinner();\n                return;\n            }\n            if (_this.isInfiniteEnd(args) && !len) {\n                _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                return;\n            }\n            _this.parent.isEdit = false;\n            _this.parent.notify(events.editReset, {});\n            _this.parent.notify(events.tooltipDestroy, {});\n            _this.contentRenderer.prevCurrentView = _this.parent.currentViewData.slice();\n            gObj.currentViewData = dataArgs.result;\n            gObj.notify(events.refreshInfiniteCurrentViewData, { args: args, data: dataArgs.result });\n            if (isBlazor() && gObj.filterSettings.type === 'FilterBar'\n                && (isNullOrUndefined(gObj.currentViewData) ||\n                    (!isNullOrUndefined(gObj.currentViewData) && !gObj.currentViewData.length))) {\n                var gridColumns = gObj.getColumns();\n                for (var i = 0; i < gridColumns.length; i++) {\n                    if (gridColumns[i].filterTemplate) {\n                        var tempID = gObj.element.id + gridColumns[i].uid + 'filterTemplate';\n                        resetBlazorTemplate(tempID, 'FilterTemplate');\n                        var fieldName = gridColumns[i].field;\n                        var filteredColumns = gObj.filterSettings.columns;\n                        for (var k = 0; k < filteredColumns.length; k++) {\n                            if (fieldName === filteredColumns[k].field) {\n                                blazorTemplates[tempID][0][fieldName] = filteredColumns[k].value;\n                            }\n                        }\n                        updateBlazorTemplate(tempID, 'FilterTemplate', gridColumns[i], false);\n                    }\n                }\n            }\n            if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== 'delete') {\n                if (_this.parent.groupSettings.enableLazyLoading\n                    && (args.requestType === 'grouping' || args.requestType === 'ungrouping')) {\n                    _this.parent.notify(events.groupComplete, args);\n                }\n                gObj.prevPageMoving = true;\n                gObj.pageSettings.totalRecordsCount = dataArgs.count;\n                if (args.requestType !== 'paging') {\n                    gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);\n                }\n                gObj.dataBind();\n                return;\n            }\n            if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {\n                _this.updatesOnInitialRender(dataArgs);\n            }\n            if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {\n                if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {\n                    _this.updateColumnType(gObj.dataSource[0]);\n                }\n                else {\n                    _this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n                }\n            }\n            if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates &&\n                !_this.parent.groupSettings.columns.length) {\n                dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;\n            }\n            _this.parent.notify(events.dataReady, extend({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates }, args));\n            if ((gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping'))\n                && (args && args.requestType !== 'filtering')) {\n                _this.headerRenderer.refreshUI();\n            }\n            if (len) {\n                if (isGroupAdaptive(gObj)) {\n                    var content = 'content';\n                    args.scrollTop = { top: _this.contentRenderer[content].scrollTop };\n                }\n                if (!isInfiniteDelete) {\n                    if (_this.parent.enableImmutableMode) {\n                        _this.contentRenderer.immutableModeRendering(args);\n                    }\n                    else {\n                        _this.contentRenderer.refreshContentRows(args);\n                    }\n                }\n                else {\n                    _this.parent.notify(events.infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });\n                }\n            }\n            else {\n                if (!gObj.getColumns().length) {\n                    gObj.element.innerHTML = '';\n                    alert(_this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                    return;\n                }\n                _this.contentRenderer.setRowElements([]);\n                _this.contentRenderer.setRowObjects([]);\n                _this.ariaService.setBusy(_this.parent.getContent().querySelector('.e-content'), false);\n                _this.renderEmptyRow();\n                if (args) {\n                    var action = (args.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, args);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        args.rows = [];\n                        args.isFrozen = _this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                _this.parent.hideSpinner();\n            }\n            _this.parent.notify(events.toolbarRefresh, {});\n            _this.setRowCount(_this.parent.getCurrentViewRecords().length);\n            _this.parent.getDataModule().isQueryInvokedFromData = false;\n        });\n    };\n    /** @hidden */\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().querySelector('.e-content'), { busy: false, invalid: true });\n        this.setRowCount(1);\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n        this.parent.log('actionfailure', { error: e });\n    };\n    Render.prototype.setRowCount = function (dataRowCount) {\n        var gObj = this.parent;\n        this.ariaService.setOptions(this.parent.getHeaderTable(), {\n            rowcount: dataRowCount ? dataRowCount.toString() : '1'\n        });\n    };\n    Render.prototype.isInfiniteEnd = function (args) {\n        return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === 'delete';\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns, null, this.parent);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.isAutoGen = true;\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.iterateComplexColumns = function (obj, field, split) {\n        var keys = Object.keys(obj);\n        for (var i = 0; i < keys.length; i++) {\n            var childKeys = typeof obj[keys[i]] === 'object' && obj[keys[i]] && !(obj[keys[i]] instanceof Date) ?\n                Object.keys(obj[keys[i]]) : [];\n            if (childKeys.length) {\n                this.iterateComplexColumns(obj[keys[i]], field + (keys[i] + '.'), split);\n            }\n            else {\n                split[this.counter] = field + keys[i];\n                this.counter++;\n            }\n        }\n    };\n    Render.prototype.buildColumns = function (record) {\n        var cols = [];\n        var complexCols = {};\n        this.iterateComplexColumns(record, '', complexCols);\n        var columns = Object.keys(complexCols).filter(function (e) { return complexCols[e] !== 'BlazId'; }).\n            map(function (field) { return complexCols[field]; });\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.setProperties({ 'columns': cols }, true);\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on('refreshdataSource', this.dataManagerSuccess, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                predicate.push(new Predicate('field', '==', groups[i].field).and(_this.getPredicate('key', 'equal', groups[i].key)));\n            }\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote() || isBlazor()) {\n            var groups = [group0, groupN];\n            for (var i = 0; i < groups.length; i++) {\n                rPredicate.push(this.getPredicate(groups[i].field, 'equal', groups[i].key));\n            }\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var dm = new DataManager(untouched);\n        var elements = current;\n        for (var i = 0; i < elements.length; i++) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', elements[i].field).and(this.getPredicate('key', 'equal', elements[i].key))))[0];\n            elements[i].count = uGroup.count;\n            var itemGroup = elements[i].items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                elements[i].items = this.updateGroupInfo(elements[i].items, uGroup.items);\n            }\n            var rows = this.parent.aggregates;\n            for (var j = 0; j < rows.length; j++) {\n                var row = rows[j];\n                for (var k = 0; k < row.columns.length; k++) {\n                    var types = row.columns[k].type instanceof Array ? (row.columns[k].type) :\n                        [(row.columns[k].type)];\n                    for (var l = 0; l < types.length; l++) {\n                        var key = row.columns[k].field + ' - ' + types[l].toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = this.parent;\n                        if (types[l] === 'Custom') {\n                            var data_1 = itemGroup.level ? uGroupItem : uGroup;\n                            elements[i].aggregates[key] = row.columns[k].customAggregate ?\n                                row.columns[k].customAggregate\n                                    .call(context, data_1, row.columns[k]) : '';\n                        }\n                        else {\n                            elements[i].aggregates[key] = DataUtil.aggregates[types[l].toLowerCase()](data, row.columns[k].field);\n                        }\n                    }\n                }\n            }\n        }\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { EventHandler, remove } from '@syncfusion/ej2-base';\nimport { parentsUntil, addBiggerDialog } from '../base/util';\nimport * as events from '../base/constant';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { ResponsiveDialogAction } from '../base/enum';\n/**\n *\n * The `ResponsiveDialogRenderer` module is used to render the responsive dialogs.\n */\nvar ResponsiveDialogRenderer = /** @class */ (function () {\n    /**\n     * Constructor for Grid Responsive dialog renderer\n     * @hidden\n     */\n    function ResponsiveDialogRenderer(parent, serviceLocator) {\n        this.sortedCols = [];\n        this.sortPredicate = [];\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ResponsiveDialogRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.filterDialogClose, this.closeCustomDialog, this);\n        this.parent.on(events.setCustomFilterHeader, this.setCustomFilterHeader, this);\n        this.parent.on(events.refreshCustomFilterOkBtn, this.refreshCustomFilterOkBtn, this);\n        this.parent.on(events.renderResponsiveCmenu, this.renderResponsiveContextMenu, this);\n        this.parent.on(events.filterCmenuSelect, this.renderCustomFilterDiv, this);\n        this.parent.on(events.customFilterClose, this.customExFilterClose, this);\n        this.parent.on(events.refreshCustomFilterClearBtn, this.refreshCustomFilterClearBtn, this);\n        this.onActionCompleteFn = this.editComplate.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.onActionCompleteFn);\n    };\n    ResponsiveDialogRenderer.prototype.customExFilterClose = function () {\n        this.isCustomDlgRender = false;\n    };\n    ResponsiveDialogRenderer.prototype.renderCustomFilterDiv = function () {\n        var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n        var title = header.querySelector('.e-dlg-custom-header');\n        var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n        this.isCustomDlgRender = true;\n        this.parent.filterModule.filterModule.closeDialog();\n        this.saveBtn.element.style.display = '';\n        this.refreshCustomFilterOkBtn({ disabled: false });\n        this.backBtn.element.style.display = 'none';\n        closeBtn.style.display = '';\n        title.innerHTML = this.parent.localeObj.getConstant('CustomFilter');\n        var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n        this.customExcelFilterParent = this.parent.createElement('div', { className: 'e-xl-customfilterdiv e-default-filter' });\n        content.appendChild(this.customExcelFilterParent);\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveContextMenu = function (args) {\n        if (this.action === ResponsiveDialogAction.isFilter) {\n            var content = this.customResponsiveDlg.element.querySelector('.e-dlg-content');\n            var header = this.customResponsiveDlg.element.querySelector('.e-dlg-header-content');\n            var closeBtn = header.querySelector('.e-dlg-closeicon-btn');\n            var text = header.querySelector('.e-dlg-custom-header');\n            if (args.isOpen) {\n                content.firstChild.style.display = 'none';\n                content.appendChild(args.target);\n                closeBtn.style.display = 'none';\n                this.saveBtn.element.style.display = 'none';\n                this.filterClearBtn.element.style.display = 'none';\n                text.innerHTML = args.header;\n                var backBtn = this.parent.createElement('button');\n                var span = this.parent.createElement('span', { className: 'e-btn-icon e-resfilterback e-icons' });\n                backBtn.appendChild(span);\n                this.backBtn = new Button({\n                    cssClass: 'e-res-back-btn'\n                });\n                this.backBtn.appendTo(backBtn);\n                text.parentElement.insertBefore(backBtn, text);\n            }\n            else if (this.backBtn && !this.isCustomDlgRender) {\n                content.firstChild.style.display = '';\n                remove(this.backBtn.element);\n                closeBtn.style.display = '';\n                this.saveBtn.element.style.display = '';\n                if (this.isFiltered) {\n                    this.filterClearBtn.element.style.display = '';\n                }\n                text.innerHTML = this.getHeaderTitle({ action: ResponsiveDialogAction.isFilter });\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.refreshCustomFilterClearBtn = function (args) {\n        if (this.filterClearBtn) {\n            this.isFiltered = args.isFiltered;\n            this.filterClearBtn.element.style.display = args.isFiltered ? '' : 'none';\n        }\n    };\n    ResponsiveDialogRenderer.prototype.refreshCustomFilterOkBtn = function (args) {\n        if (this.saveBtn) {\n            this.saveBtn.disabled = args.disabled;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveContent = function (col) {\n        var _this = this;\n        var gObj = this.parent;\n        if (col) {\n            this.filterParent = this.parent.createElement('div', { className: 'e-mainfilterdiv e-default-filter', id: col.uid + '-main-filter' });\n            return this.filterParent;\n        }\n        else {\n            var cols = gObj.getColumns();\n            this.customColumnDiv = gObj.createElement('div', { className: 'columndiv', styles: 'width: 100%' });\n            var sortBtnParent = gObj.createElement('div', { className: 'e-ressortbutton-parent' });\n            var filteredCols = [];\n            if (this.action === ResponsiveDialogAction.isFilter) {\n                for (var i = 0; i < gObj.filterSettings.columns.length; i++) {\n                    filteredCols.push(gObj.filterSettings.columns[i].field);\n                }\n            }\n            for (var i = 0; i < cols.length; i++) {\n                var cDiv = gObj.createElement('div', { className: 'e-responsivecoldiv' });\n                cDiv.setAttribute('data-e-mappingname', cols[i].field);\n                cDiv.setAttribute('data-e-mappinguid', cols[i].uid);\n                var span = gObj.createElement('span', { innerHTML: cols[i].headerText, className: 'e-res-header-text' });\n                cDiv.appendChild(span);\n                this.customColumnDiv.appendChild(cDiv);\n                if (this.action === ResponsiveDialogAction.isSort) {\n                    var fields = this.getSortedFieldsAndDirections('field');\n                    var index = fields.indexOf(cols[i].field);\n                    var button = gObj.createElement('button', { id: gObj.element.id + cols[i].field + 'sortbutton' });\n                    var clone = sortBtnParent.cloneNode();\n                    clone.appendChild(button);\n                    cDiv.appendChild(clone);\n                    var btnObj = new Button({\n                        cssClass: 'e-ressortbutton'\n                    });\n                    btnObj.appendTo(button);\n                    button.innerHTML = index > -1 ? this.parent.sortSettings.columns[index].direction : 'None';\n                    button.onclick = function (e) {\n                        _this.sortButtonClickHandler(e.target);\n                    };\n                }\n                if (this.action === ResponsiveDialogAction.isFilter && filteredCols.indexOf(cols[i].field) > -1) {\n                    var divIcon = gObj.createElement('div', { className: 'e-icons e-res-icon e-filtersetdiv' });\n                    var iconSpan = gObj.createElement('span', { className: 'e-icons e-res-icon e-filterset' });\n                    iconSpan.setAttribute('colType', cols[i].type);\n                    divIcon.appendChild(iconSpan);\n                    cDiv.appendChild(divIcon);\n                }\n            }\n            EventHandler.add(this.customColumnDiv, 'click', this.customFilterColumnClickHandler, this);\n            return this.customColumnDiv;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.getSortedFieldsAndDirections = function (name) {\n        var fields = [];\n        for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n            fields.push(this.parent.sortSettings.columns[i][name]);\n        }\n        return fields;\n    };\n    ResponsiveDialogRenderer.prototype.sortButtonClickHandler = function (target) {\n        if (target) {\n            var columndiv = parentsUntil(target, 'e-responsivecoldiv');\n            var field = columndiv.getAttribute('data-e-mappingname');\n            if (!this.parent.allowMultiSorting) {\n                this.sortPredicate = [];\n                this.sortedCols = [];\n                this.isSortApplied = false;\n                this.resetSortButtons(target);\n            }\n            var txt = target.textContent;\n            var direction = txt === 'None' ? 'Ascending' : txt === 'Ascending' ? 'Descending' : 'None';\n            target.innerHTML = direction;\n            this.setSortedCols(field, direction);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.resetSortButtons = function (target) {\n        var buttons = [].slice.call(this.customColumnDiv.querySelectorAll('.e-ressortbutton'));\n        for (var i = 0; i < buttons.length; i++) {\n            if (buttons[i] !== target) {\n                buttons[i].innerHTML = 'None';\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setSortedCols = function (field, direction) {\n        var fields = this.getCurrentSortedFields();\n        var index = fields.indexOf(field);\n        if (this.parent.allowMultiSorting && index > -1) {\n            this.sortedCols.splice(index, 1);\n            this.sortPredicate.splice(index, 1);\n        }\n        this.isSortApplied = true;\n        if (direction !== 'None') {\n            this.sortedCols.push(field);\n            this.sortPredicate.push({ field: field, direction: direction });\n        }\n    };\n    ResponsiveDialogRenderer.prototype.getCurrentSortedFields = function () {\n        var fields = [];\n        for (var i = 0; i < this.sortedCols.length; i++) {\n            fields.push(this.sortedCols[i]);\n        }\n        return fields;\n    };\n    ResponsiveDialogRenderer.prototype.customFilterColumnClickHandler = function (e) {\n        if (this.action !== ResponsiveDialogAction.isFilter) {\n            return;\n        }\n        var gObj = this.parent;\n        var target = e.target;\n        if (gObj.filterSettings.type !== 'FilterBar') {\n            if (target.classList.contains('e-responsivecoldiv') || target.parentElement.classList.contains('e-responsivecoldiv')) {\n                var field = target.getAttribute('data-e-mappingname');\n                if (!field) {\n                    field = target.parentElement.getAttribute('data-e-mappingname');\n                }\n                if (field) {\n                    var col = gObj.getColumnByField(field);\n                    this.isRowResponsive = true;\n                    this.showResponsiveDialog(col);\n                }\n            }\n            else if (target.classList.contains('e-filterset') || target.parentElement.classList.contains('e-filtersetdiv')) {\n                var colDiv = parentsUntil(target, 'e-responsivecoldiv');\n                if (colDiv) {\n                    var field = colDiv.getAttribute('data-e-mappingname');\n                    var col = gObj.getColumnByField(field);\n                    if (col.filter.type === 'Menu' || (!col.filter.type && gObj.filterSettings.type === 'Menu')) {\n                        this.isDialogClose = true;\n                    }\n                    this.parent.filterModule.filterModule.clearCustomFilter(col);\n                    this.removeCustomDlgFilterEle(target);\n                }\n            }\n        }\n    };\n    /**\n     * To show the responsive custom filter dialog\n     * @return {void}\n     * @hidden\n     */\n    ResponsiveDialogRenderer.prototype.showResponsiveDialog = function (col) {\n        if (this.parent.rowRenderingMode === 'Vertical' && this.action === ResponsiveDialogAction.isFilter && !this.isRowResponsive) {\n            this.renderCustomFilterDialog();\n            this.customFilterDlg.show(true);\n            this.customFilterDlg.element.style.maxHeight = '100%';\n        }\n        else {\n            this.filteredCol = col;\n            this.renderResponsiveDialog(col);\n            if (this.parent.enableAdaptiveUI && col) {\n                this.parent.filterModule.setFilterModel(col);\n                this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(col, undefined));\n            }\n            this.customResponsiveDlg.show(true);\n            this.customResponsiveDlg.element.style.maxHeight = '100%';\n            this.setTopToChildDialog(this.customResponsiveDlg.element);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setTopToChildDialog = function (dialogEle) {\n        var child = dialogEle.querySelector('.e-dialog');\n        if (child) {\n            var top_1 = dialogEle.querySelector('.e-dlg-header-content').getBoundingClientRect().height;\n            child.style.top = top_1 + 'px';\n        }\n    };\n    ResponsiveDialogRenderer.prototype.renderCustomFilterDialog = function (col) {\n        var gObj = this.parent;\n        if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n            return;\n        }\n        var outerDiv = this.parent.createElement('div', {\n            id: gObj.element.id + 'customfilter', className: 'e-customfilterdiv e-responsive-dialog'\n        });\n        this.parent.element.appendChild(outerDiv);\n        this.customFilterDlg = this.getDialogOptions(col, true);\n        this.customFilterDlg.appendTo(outerDiv);\n    };\n    ResponsiveDialogRenderer.prototype.getDialogOptions = function (col, isCustomFilter, id) {\n        var options = new Dialog({\n            isModal: true,\n            showCloseIcon: true,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            target: this.parent.adaptiveDlgTarget ? this.parent.adaptiveDlgTarget : document.body,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            content: this.renderResponsiveContent(col),\n            open: this.dialogOpen.bind(this),\n            created: this.dialogCreated.bind(this),\n            close: this.beforeDialogClose.bind(this),\n            width: '100%',\n            height: '100%',\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        options[isStringTemplate] = true;\n        if (isCustomFilter) {\n            options.header = this.renderResponsiveHeader(undefined, true);\n            options.cssClass = 'e-customfilter';\n        }\n        else {\n            options.header = this.renderResponsiveHeader();\n            options.cssClass = this.parent.rowRenderingMode === 'Vertical' && this.action === ResponsiveDialogAction.isFilter\n                ? 'e-res' + id + ' e-row-responsive-filter' : 'e-res' + id;\n        }\n        return options;\n    };\n    ResponsiveDialogRenderer.prototype.renderResponsiveDialog = function (col) {\n        var gObj = this.parent;\n        if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === 'FilterBar') {\n            return;\n        }\n        var id = this.action === ResponsiveDialogAction.isFilter ? 'filter' : 'sort';\n        var outerDiv = this.parent.createElement('div', {\n            id: gObj.element.id + 'responsive' + id, className: 'e-res' + id + 'div e-responsive-dialog'\n        });\n        this.parent.element.appendChild(outerDiv);\n        this.customResponsiveDlg = this.getDialogOptions(col, false, id);\n        this.customResponsiveDlg.appendTo(outerDiv);\n    };\n    ResponsiveDialogRenderer.prototype.dialogCreated = function () {\n        addBiggerDialog(this.parent);\n    };\n    ResponsiveDialogRenderer.prototype.dialogOpen = function () {\n        if (this.action === ResponsiveDialogAction.isSort && this.parent.allowMultiSorting) {\n            for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {\n                this.sortedCols.push(this.parent.sortSettings.columns[i].field);\n                var sortField = this.parent.sortSettings.columns[i].field;\n                var sortDirection = this.parent.sortSettings.columns[i].direction;\n                this.sortPredicate.push({ field: sortField, direction: sortDirection });\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.beforeDialogClose = function (args) {\n        this.isDialogClose = args.element && !args.element.querySelector('.e-xl-customfilterdiv')\n            && args.element.classList.contains('e-resfilterdiv');\n        if (this.action === ResponsiveDialogAction.isFilter) {\n            if (args.element.classList.contains('e-resfilterdiv')) {\n                this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender);\n            }\n            else if (args.element.classList.contains('e-customfilterdiv')) {\n                this.closeCustomFilter();\n            }\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            this.closeCustomDialog();\n        }\n        this.parent.off(events.enterKeyHandler, this.keyHandler);\n    };\n    ResponsiveDialogRenderer.prototype.sortColumn = function () {\n        if (!this.isSortApplied) {\n            this.closeCustomDialog();\n            return;\n        }\n        if (this.sortPredicate.length) {\n            this.parent.setProperties({ sortSettings: { columns: [] } }, true);\n        }\n        for (var i = 0; i < this.sortPredicate.length; i++) {\n            this.parent.sortColumn(this.sortPredicate[i].field, this.sortPredicate[i].direction, this.parent.allowMultiSorting);\n        }\n        if (!this.sortPredicate.length) {\n            this.parent.clearSorting();\n        }\n        this.closeCustomDialog();\n    };\n    ResponsiveDialogRenderer.prototype.getHeaderTitle = function (args) {\n        var gObj = this.parent;\n        var title;\n        if (this.action === ResponsiveDialogAction.isEdit) {\n            title = gObj.localeObj.getConstant('EditFormTitle') + args.primaryKeyValue[0];\n        }\n        else if (this.action === ResponsiveDialogAction.isAdd) {\n            title = gObj.localeObj.getConstant('AddFormTitle');\n        }\n        else if (this.action === ResponsiveDialogAction.isFilter) {\n            title = gObj.localeObj.getConstant('FilterButton');\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            title = gObj.localeObj.getConstant('Sort');\n        }\n        return title;\n    };\n    ResponsiveDialogRenderer.prototype.getDialogName = function (action) {\n        var name;\n        if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n            name = 'dialogEdit_wrapper_title';\n        }\n        else if (action === ResponsiveDialogAction.isFilter) {\n            name = 'responsive_filter_dialog_wrapper';\n        }\n        return name;\n    };\n    ResponsiveDialogRenderer.prototype.getButtonText = function (action) {\n        var text;\n        if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {\n            text = 'Save';\n        }\n        else if (action === ResponsiveDialogAction.isFilter || this.action === ResponsiveDialogAction.isSort) {\n            text = 'OKButton';\n        }\n        return text;\n    };\n    /** @hidden */\n    ResponsiveDialogRenderer.prototype.renderResponsiveHeader = function (args, isCustomFilter) {\n        var _this = this;\n        var gObj = this.parent;\n        gObj.on(events.enterKeyHandler, this.keyHandler, this);\n        var id = gObj.element.id + this.getDialogName(this.action);\n        var header = gObj.createElement('div', { className: 'e-res-custom-element' });\n        var titleDiv = gObj.createElement('div', { className: 'e-dlg-custom-header', id: id });\n        titleDiv.innerHTML = this.getHeaderTitle(args);\n        header.appendChild(titleDiv);\n        var saveBtn = gObj.createElement('button');\n        if (!isCustomFilter) {\n            this.saveBtn = new Button({\n                cssClass: 'e-primary e-flat e-res-apply-btn',\n            });\n            saveBtn.innerHTML = gObj.localeObj.getConstant(this.getButtonText(this.action));\n            this.saveBtn.appendTo(saveBtn);\n            saveBtn.onclick = function (e) {\n                _this.dialogHdrBtnClickHandler();\n            };\n        }\n        var isSort = this.action === ResponsiveDialogAction.isSort;\n        var isFilter = this.action === ResponsiveDialogAction.isFilter;\n        if (isFilter || isSort) {\n            var id_1 = isSort ? 'sort' : 'filter';\n            var clearBtn = gObj.createElement('button');\n            this.filterClearBtn = new Button({\n                cssClass: 'e-primary e-flat e-res-' + id_1 + '-clear-btn',\n            });\n            if (isFilter) {\n                var span = gObj.createElement('span', { className: 'e-btn-icon e-icon-filter-clear e-icons' });\n                clearBtn.appendChild(span);\n            }\n            else {\n                clearBtn.innerHTML = gObj.localeObj.getConstant('Clear');\n            }\n            header.appendChild(clearBtn);\n            this.filterClearBtn.appendTo(clearBtn);\n            clearBtn.onclick = function (e) {\n                if ((parentsUntil(e.target, 'e-customfilter'))) {\n                    _this.parent.filterModule.clearFiltering();\n                    _this.removeCustomDlgFilterEle();\n                }\n                else {\n                    if (isFilter) {\n                        _this.filterClear();\n                    }\n                    else {\n                        _this.resetSortButtons();\n                        _this.sortedCols = [];\n                        _this.sortPredicate = [];\n                        _this.isSortApplied = true;\n                    }\n                }\n            };\n            header.appendChild(clearBtn);\n        }\n        if (!isCustomFilter) {\n            header.appendChild(saveBtn);\n        }\n        return header;\n    };\n    ResponsiveDialogRenderer.prototype.filterClear = function () {\n        this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol);\n        this.parent.filterModule.filterModule.closeResponsiveDialog();\n    };\n    ResponsiveDialogRenderer.prototype.dialogHdrBtnClickHandler = function () {\n        if (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd) {\n            this.parent.endEdit();\n        }\n        else if (this.action === ResponsiveDialogAction.isFilter) {\n            this.parent.filterModule.filterModule.applyCustomFilter({ col: this.filteredCol, isCustomFilter: this.isCustomDlgRender });\n        }\n        else if (this.action === ResponsiveDialogAction.isSort) {\n            this.sortColumn();\n        }\n    };\n    ResponsiveDialogRenderer.prototype.closeCustomDialog = function () {\n        if (this.isCustomDlgRender) {\n            var mainfilterdiv = this.customResponsiveDlg.element.querySelector('.e-mainfilterdiv');\n            remove(mainfilterdiv);\n            return;\n        }\n        this.isRowResponsive = false;\n        this.isCustomDlgRender = false;\n        this.destroyCustomFilterDialog();\n    };\n    ResponsiveDialogRenderer.prototype.destroyCustomFilterDialog = function () {\n        if (!this.customResponsiveDlg) {\n            return;\n        }\n        var elem = document.getElementById(this.customResponsiveDlg.element.id);\n        if (this.customResponsiveDlg && !this.customResponsiveDlg.isDestroyed && elem) {\n            this.customResponsiveDlg.destroy();\n            remove(elem);\n        }\n        this.closeCustomFilter();\n        if (this.action === ResponsiveDialogAction.isSort) {\n            this.sortPredicate = [];\n            this.sortedCols = [];\n            this.isSortApplied = false;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.closeCustomFilter = function () {\n        if (!this.isDialogClose && this.customFilterDlg) {\n            var customEle = document.getElementById(this.customFilterDlg.element.id);\n            if (this.customFilterDlg && !this.customFilterDlg.isDestroyed && customEle) {\n                this.customFilterDlg.destroy();\n                remove(customEle);\n            }\n        }\n        this.isDialogClose = false;\n    };\n    ResponsiveDialogRenderer.prototype.removeCustomDlgFilterEle = function (target) {\n        if (target) {\n            if (target.parentElement.classList.contains('e-filtersetdiv')) {\n                remove(target.parentElement);\n            }\n            else {\n                remove(target);\n            }\n        }\n        else {\n            var child = this.customColumnDiv.children;\n            for (var i = 0; i < child.length; i++) {\n                target = child[i].querySelector('.e-filtersetdiv');\n                if (target) {\n                    remove(target);\n                    i--;\n                }\n            }\n        }\n    };\n    ResponsiveDialogRenderer.prototype.setCustomFilterHeader = function (args) {\n        if (this.parent.rowRenderingMode !== 'Vertical') {\n            return;\n        }\n        var header = this.customResponsiveDlg.element.querySelector('.e-reslabel');\n        if (header && header.firstElementChild) {\n            header.firstElementChild.innerHTML = args.title;\n        }\n    };\n    ResponsiveDialogRenderer.prototype.keyHandler = function (e) {\n        if (e.keyCode === 13 && ((this.action === ResponsiveDialogAction.isFilter\n            && e.target.classList.contains('e-searchinput'))\n            || (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd))) {\n            this.dialogHdrBtnClickHandler();\n        }\n    };\n    ResponsiveDialogRenderer.prototype.editComplate = function (args) {\n        if (args.requestType === 'save' || args.requestType === 'cancel') {\n            this.parent.off(events.enterKeyHandler, this.keyHandler);\n        }\n    };\n    ResponsiveDialogRenderer.prototype.removeEventListener = function () {\n        if (this.customColumnDiv) {\n            EventHandler.remove(this.customColumnDiv, 'click', this.customFilterColumnClickHandler);\n        }\n        this.parent.off(events.filterDialogClose, this.closeCustomDialog);\n        this.parent.off(events.setCustomFilterHeader, this.setCustomFilterHeader);\n        this.parent.off(events.refreshCustomFilterOkBtn, this.refreshCustomFilterOkBtn);\n        this.parent.off(events.renderResponsiveCmenu, this.renderResponsiveContextMenu);\n        this.parent.off(events.filterCmenuSelect, this.renderCustomFilterDiv);\n        this.parent.off(events.customFilterClose, this.customExFilterClose);\n        this.parent.off(events.refreshCustomFilterClearBtn, this.refreshCustomFilterClearBtn);\n        this.parent.removeEventListener(events.actionComplete, this.onActionCompleteFn);\n    };\n    return ResponsiveDialogRenderer;\n}());\nexport { ResponsiveDialogRenderer };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogRenderer } from '../renderer/responsive-dialog-renderer';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    ServiceLocator.prototype.registerAdaptiveService = function (type, isAdaptiveUI, action) {\n        if (isAdaptiveUI) {\n            type.responsiveDialogRenderer = new ResponsiveDialogRenderer(type.parent, type.serviceLocator);\n            type.responsiveDialogRenderer.action = action;\n        }\n        else {\n            if (type.responsiveDialogRenderer) {\n                type.responsiveDialogRenderer.removeEventListener();\n                type.responsiveDialogRenderer = undefined;\n            }\n        }\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged, preventFrozenScrollRefresh } from '../base/constant';\nimport { Column } from '../models/column';\nimport { parentsUntil, ispercentageWidth, getScrollBarWidth } from '../base/util';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        var totalColumnsWidth = 0;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n            i++;\n        }\n        var columns = this.parent.getColumns();\n        for (var j = 0; j < columns.length; j++) {\n            this.setColumnWidth(columns[j], wFlag && this.parent.enableColumnVirtualization ? undefined : j + i);\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() === 'Right') {\n            this.setColumnWidth(new Column({ width: '30px' }), columns.length);\n        }\n        totalColumnsWidth = this.getTableWidth(this.parent.getColumns());\n        if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n            this.setMinwidthBycalculation(totalColumnsWidth);\n        }\n    };\n    ColumnWidthService.prototype.setMinwidthBycalculation = function (tWidth) {\n        var difference = 0;\n        var collection = this.parent.getColumns().filter(function (a) {\n            return isNullOrUndefined(a.width) || a.width === 'auto';\n        });\n        if (collection.length) {\n            if (!isNullOrUndefined(this.parent.width) && this.parent.width !== 'auto' &&\n                typeof (this.parent.width) === 'string' && this.parent.width.indexOf('%') === -1) {\n                difference = (typeof this.parent.width === 'string' ? parseInt(this.parent.width, 10) : this.parent.width) - tWidth;\n            }\n            else {\n                difference = this.parent.element.getBoundingClientRect().width - tWidth;\n            }\n            var tmWidth = 0;\n            for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {\n                var cols = collection_1[_i];\n                tmWidth += !isNullOrUndefined(cols.minWidth) ?\n                    ((typeof cols.minWidth === 'string' ? parseInt(cols.minWidth, 10) : cols.minWidth)) : 0;\n            }\n            for (var i = 0; i < collection.length; i++) {\n                if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && (i !== collection.length - 1)) {\n                    this.setUndefinedColumnWidth(collection);\n                }\n                if (tWidth !== 0 && difference < tmWidth) {\n                    this.setWidth(collection[i].minWidth, this.parent.getColumnIndexByField(collection[i].field));\n                }\n                else if (tWidth !== 0 && difference > tmWidth) {\n                    this.setWidth('', this.parent.getColumnIndexByField(collection[i].field) + this.parent.getIndentCount(), true);\n                }\n            }\n        }\n    };\n    ColumnWidthService.prototype.setUndefinedColumnWidth = function (collection) {\n        for (var k = 0; k < collection.length; k++) {\n            if (k !== collection.length - 1) {\n                collection[k].width = 200;\n                this.setWidth(200, this.parent.getColumnIndexByField(collection[k].field));\n            }\n        }\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        if (this.parent.getColumns().length < 1) {\n            return;\n        }\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        var tgridWidth = this.getTableWidth(this.parent.getColumns());\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if (this.parent.width !== 'auto' && this.parent.width.toString().indexOf('%') === -1) {\n                this.setMinwidthBycalculation(tgridWidth);\n            }\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index, clear) {\n        if (this.parent.groupSettings.columns.length > index && ispercentageWidth(this.parent)) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = (30 / elementWidth * 100).toFixed(1) + '%';\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var isDraggable = this.parent.isRowDragable();\n        frzCols = frzCols && isDraggable ? frzCols + 1 : frzCols;\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var freezeLeft = this.parent.getFrozenLeftColumnsCount();\n        var freezeRight = this.parent.getFrozenRightColumnsCount();\n        var movableCount = this.parent.getMovableColumnsCount();\n        var isColFrozen = freezeLeft !== 0 || freezeRight !== 0;\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mHdr.scrollLeft > 0) {\n            var colGroup = mHdr.querySelector('colgroup');\n            headerCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else if (isColFrozen) {\n            var target = void 0;\n            if (freezeLeft && !freezeRight) {\n                index = isDraggable ? index - 1 : index;\n                target = index < freezeLeft ? header : mHdr;\n            }\n            else if (!freezeLeft && freezeRight) {\n                target = index >= movableCount ? header : mHdr;\n            }\n            else if (freezeLeft && freezeRight) {\n                index = isDraggable ? index - 1 : index;\n                var frHdr = this.parent.getFrozenRightHeader();\n                target = index < freezeLeft ? header : index < (freezeLeft + movableCount) ? mHdr : frHdr;\n            }\n            headerCol = this.getColumnLevelFrozenColgroup(index, freezeLeft, movableCount, target);\n            if (!headerCol) {\n                return;\n            }\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol && !clear) {\n            headerCol.style.width = fWidth;\n        }\n        else if (headerCol && clear) {\n            headerCol.style.width = '';\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else if (this.parent.enableColumnVirtualization && frzCols && this.parent.contentModule.isXaxis()\n            && mCont.scrollLeft > 0) {\n            var colGroup = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup');\n            contentCol = colGroup.children[(colGroup.children.length - 1) - index];\n        }\n        else if (isColFrozen) {\n            var target = void 0;\n            if (freezeLeft && !freezeRight) {\n                target = index < freezeLeft ? content : mCont;\n            }\n            if (!freezeLeft && freezeRight) {\n                target = index >= movableCount ? content : mCont;\n            }\n            if (freezeLeft && freezeRight) {\n                var frCont = this.parent.getContent().querySelector('.e-frozen-right-content');\n                target = index < freezeLeft ? content : index < (freezeLeft + movableCount) ? mCont : frCont;\n            }\n            contentCol = this.getColumnLevelFrozenColgroup(index, freezeLeft, movableCount, target);\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol && !clear) {\n            contentCol.style.width = fWidth;\n        }\n        else if (contentCol && clear) {\n            contentCol.style.width = '';\n        }\n        var edit = this.parent.element.querySelectorAll('.e-table.e-inline-edit');\n        var editTableCol = [];\n        for (var i = 0; i < edit.length; i++) {\n            if (parentsUntil(edit[i], 'e-grid').id === this.parent.element.id) {\n                for (var j = 0; j < edit[i].querySelector('colgroup').children.length; j++) {\n                    editTableCol.push(edit[i].querySelector('colgroup').children[j]);\n                }\n            }\n        }\n        if (edit.length && editTableCol.length) {\n            editTableCol[index].style.width = fWidth;\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.refreshFrozenScrollbar();\n        }\n    };\n    ColumnWidthService.prototype.getColumnLevelFrozenColgroup = function (index, left, movable, ele) {\n        if (!ele || !ele.querySelector('colgroup')) {\n            return null;\n        }\n        var columns = this.parent.getColumns();\n        var isDrag = this.parent.isRowDragable();\n        var frzMode = this.parent.getFrozenMode();\n        var headerCol;\n        var colGroup = [].slice.call(ele.querySelector('colgroup').children);\n        if (frzMode === 'Right' && isDrag && index === (movable + this.parent.getFrozenRightColumnsCount())) {\n            headerCol = colGroup[colGroup.length - 1];\n        }\n        else if (isDrag && index === -1) {\n            headerCol = colGroup[0];\n        }\n        else if (columns[index].freeze === 'Left') {\n            headerCol = colGroup[isDrag ? (index + 1) : index];\n        }\n        else if (columns[index].freeze === 'Right') {\n            headerCol = colGroup[index - (left + movable)];\n        }\n        else {\n            headerCol = colGroup[index - left];\n        }\n        return headerCol;\n    };\n    /** @hidden */\n    ColumnWidthService.prototype.refreshFrozenScrollbar = function () {\n        var args = { cancel: false };\n        this.parent.notify(preventFrozenScrollRefresh, args);\n        if (args.cancel) {\n            return;\n        }\n        var scrollWidth = getScrollBarWidth();\n        var frozenScrollbar = this.parent.element.querySelector('.e-frozenscrollbar');\n        var movableScrollbar = this.parent.element.querySelector('.e-movablescrollbar');\n        var frozencontent = this.parent.getContent().querySelector('.e-frozencontent');\n        var movableContent = this.parent.getContent().querySelector('.e-movablecontent');\n        var frozenWidth = frozencontent.firstElementChild.getBoundingClientRect().width;\n        var movableWidth = movableContent.firstElementChild.getBoundingClientRect().width;\n        if (this.parent.getFrozenMode() === 'Right') {\n            frozenWidth = frozenWidth + scrollWidth;\n        }\n        frozenScrollbar.style.width = frozenWidth + 'px';\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            var frozenRightScrollbar = this.parent.element.querySelector('.e-frozen-right-scrollbar');\n            var frozenRightWidth = this.parent.getContent().querySelector('.e-frozen-right-content')\n                .firstElementChild.getBoundingClientRect().width;\n            if (this.parent.height !== 'auto') {\n                frozenRightWidth = frozenRightWidth + scrollWidth;\n            }\n            frozenRightScrollbar.style.width = frozenRightWidth + 'px';\n        }\n        else {\n            if (this.parent.enableColumnVirtualization) {\n                var placeHolder = this.parent.getMovableVirtualContent().querySelector('.e-virtualtrack');\n                if (placeHolder) {\n                    movableWidth = placeHolder.scrollWidth;\n                }\n            }\n            if (this.parent.getFrozenMode() !== 'Right' && this.parent.height !== 'auto') {\n                movableWidth = movableWidth + scrollWidth;\n            }\n        }\n        movableScrollbar.firstElementChild.style.width = movableWidth + 'px';\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.isWidthUndefined = function () {\n        var isWidUndefCount = this.parent.getColumns().filter(function (col) {\n            return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);\n        }).length;\n        return (this.parent.getColumns().length === isWidUndefCount);\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing\n            && isNullOrUndefined(column.minWidth) && !this.isWidthUndefined()) {\n            column.width = 200;\n        }\n        if (this.parent.isFrozenGrid() && isNullOrUndefined(column.width) &&\n            (column.getFreezeTableName() === 'frozen-left' || column.getFreezeTableName() === 'frozen-right')) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.width === 'auto') {\n                cWidth = 0;\n            }\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.calcMovableOrFreezeColWidth = function (tableType) {\n        var columns = this.parent.getColumns().slice();\n        var left = this.parent.getFrozenLeftColumnsCount() || this.parent.getFrozenColumns();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (tableType === 'movable') {\n            if (right) {\n                columns.splice(left + movable, columns.length);\n            }\n            if (left) {\n                columns.splice(0, left);\n            }\n        }\n        else if (tableType === 'freeze-left') {\n            columns.splice(left, columns.length);\n        }\n        else if (tableType === 'freeze-right') {\n            columns.splice(0, left + movable);\n        }\n        return formatUnit(this.getTableWidth(columns));\n    };\n    ColumnWidthService.prototype.setWidthToFrozenRightTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze-right');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        var headerTbl = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('.e-table');\n        var cntTbl = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.e-table');\n        headerTbl.style.width = freezeWidth;\n        cntTbl.style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenLeftTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze-left');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var movableWidth = '';\n        var isColUndefined = this.parent.getColumns().filter(function (a) { return isNullOrUndefined(a.width); }).length >= 1;\n        var isWidthAuto = this.parent.getColumns().filter(function (a) { return (a.width === 'auto'); }).length >= 1;\n        if (typeof this.parent.width === 'number' && !isColUndefined && !isWidthAuto) {\n            movableWidth = formatUnit(this.parent.width - parseInt(this.calcMovableOrFreezeColWidth('freeze').split('px')[0], 10) - 5);\n        }\n        else if (!isColUndefined && !isWidthAuto) {\n            movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        }\n        movableWidth = this.isAutoResize() ? '100%' : movableWidth;\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenEditTable = function () {\n        var freezeWidth = this.calcMovableOrFreezeColWidth('freeze');\n        freezeWidth = this.isAutoResize() ? '100%' : freezeWidth;\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[0].style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableEditTable = function () {\n        var movableWidth = this.calcMovableOrFreezeColWidth('movable');\n        movableWidth = this.isAutoResize() ? '100%' : movableWidth;\n        this.parent.element.querySelectorAll('.e-table.e-inline-edit')[1].style.width = movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.isFrozenGrid()) {\n            if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n                this.setWidthToFrozenLeftTable();\n            }\n            this.setWidthToMovableTable();\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.setWidthToFrozenRightTable();\n            }\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            tWidth = this.isAutoResize() ? '100%' : tWidth;\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit && this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenEditTable();\n            this.setWidthToMovableEditTable();\n        }\n        else if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    ColumnWidthService.prototype.isAutoResize = function () {\n        return this.parent.allowResizing && this.parent.resizeSettings.mode === 'Auto';\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\nimport { Row } from '../models/row';\nimport { RowModelGenerator } from './row-model-generator';\nimport { parentsUntil } from '../base/util';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = false;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.refMatrix = this.refreshMatrix(true);\n        this.actions = ['downArrow', 'upArrow'];\n        this.isVirtualScroll = false;\n        this.parent = parent;\n        this.rowModelGen = new RowModelGenerator(this.parent);\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(!this.parent.enableHeaderFocus && this.parent.frozenRows === 0, this.parent.isFrozenGrid());\n        var added = 'addedRecords';\n        if (!this.parent.enableHeaderFocus && !this.parent.getCurrentViewRecords().length && ((this.parent.editSettings.mode !== 'Batch')\n            || (this.parent.editSettings.mode === 'Batch' && !this.parent.editModule.getBatchChanges()[added].length))) {\n            this.getContent().matrix.\n                generate(this.rowModelGen.generateRows({ rows: [new Row({ isDataRow: true })] }), this.getContent().selector, false);\n        }\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        if (parentsUntil(e.target, 'e-filterbarcell') &&\n            e.target.classList.contains('e-input-group-icon')) {\n            return;\n        }\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        var isFrozenRight = false;\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            isFrozenRight = !isNullOrUndefined(closest(e.target, '.e-frozen-right-content')) ||\n                !isNullOrUndefined(closest(e.target, '.e-frozen-right-header'));\n            isFrozen = isFrozen && !isFrozenRight;\n        }\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content') ||\n            !isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            return;\n        }\n        this.setActive(isContent, isFrozen, isFrozenRight);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader'))) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen, isFrozenRight);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        this.activeKey = e.action;\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen, swapInfo.toFrozenRight);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.content.lastIdxCell ? false : this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown', 'altDownArrow'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        var th = closest(target, 'th') && !closest(target, 'th').tabIndex;\n        if (e.target.classList.contains('e-filterbaroperator') && (e.keyCode === 13 || e.keyCode === 27)) {\n            var inputTarget = closest(e.target, '.e-filterbarcell');\n            inputTarget.querySelector('input').focus();\n        }\n        if (th && closest(document.activeElement, '.e-filterbarcell') !== null) {\n            this.removeFocus();\n        }\n        var filterCell = closest(document.activeElement, '.e-filterbarcell') !== null;\n        if (this.parent.enableHeaderFocus && filterCell) {\n            var matrix = this.active.matrix;\n            var current = matrix.current;\n            filterCell = matrix.matrix[current[0]].lastIndexOf(1) !== current[1];\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (filterCell ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null))) || closest(target, '.e-filter-popup') !== null;\n    };\n    FocusStrategy.prototype.focusVirtualElement = function (e) {\n        var _this = this;\n        if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n            var data = { virtualData: {}, isAdd: false, isCancel: false };\n            this.parent.notify(event.getVirtualData, data);\n            var isKeyFocus = this.actions.some(function (value) { return value === _this.activeKey; });\n            var isSelected = this.parent.contentModule ?\n                this.parent.contentModule.selectedRowIndex > -1 : false;\n            if (data.isAdd || Object.keys(data.virtualData).length || isKeyFocus || data.isCancel || isSelected) {\n                data.isCancel = false;\n                this.parent.contentModule.selectedRowIndex = -1;\n                if (isKeyFocus) {\n                    this.activeKey = this.empty;\n                    this.parent.notify('virtaul-key-handler', e);\n                }\n                // tslint:disable-next-line:no-any\n                this.currentInfo.elementToFocus.focus({ preventScroll: true });\n            }\n            else {\n                if (this.isVirtualScroll) {\n                    // tslint:disable-next-line:no-any\n                    this.currentInfo.elementToFocus.focus({ preventScroll: true });\n                }\n                else {\n                    this.currentInfo.elementToFocus.focus();\n                }\n            }\n        }\n        this.isVirtualScroll = false;\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen, isFrozenRight) {\n        this.active = content ? isFrozen ? this.fContent : isFrozenRight ? this.frContent : this.content :\n            isFrozen ? this.fHeader : isFrozenRight ? this.frHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element, e) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () {\n            if (!isNullOrUndefined(_this.currentInfo.elementToFocus)) {\n                if (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) {\n                    _this.focusVirtualElement(e);\n                }\n                else {\n                    _this.currentInfo.elementToFocus.focus();\n                }\n            }\n        }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.parent.notify(event.virtaulCellFocus, e);\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    /** @hidden */\n    FocusStrategy.prototype.addOutline = function () {\n        var info = this.getContent().getFocusInfo();\n        if (info.element) {\n            addClass([info.element], ['e-focused']);\n            addClass([info.elementToFocus], ['e-focus']);\n        }\n    };\n    /** @hidden */\n    FocusStrategy.prototype.focusHeader = function () {\n        this.setActive(false, this.parent.isFrozenGrid());\n        this.resetFocus();\n    };\n    /** @hidden */\n    FocusStrategy.prototype.focusContent = function () {\n        this.setActive(true, this.parent.isFrozenGrid());\n        this.resetFocus();\n    };\n    FocusStrategy.prototype.resetFocus = function () {\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        this.focus();\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus, e);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.frContent && (e.args && e.args.renderFrozenRightContent)) {\n                _this.frContent = new FixedRightContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && (e.args && e.args.renderFrozenRightContent) && !_this.frHeader) {\n                _this.frHeader = new FixedRightHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : (e.args && e.args.renderFrozenRightContent)\n                ? _this.frContent : _this.content : (e.args && e.args.isFrozen) ? _this.fHeader : (e.args && e.args.renderFrozenRightContent)\n                ? _this.frHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            if (_this.parent.isCollapseStateEnabled() && content) {\n                rows = rows.filter(function (x) { return x.visible !== false; });\n            }\n            var isRowTemplate = !isNullOrUndefined(_this.parent.rowTemplate);\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector, isRowTemplate);\n            if (e.name === 'batchAdd' && _this.parent.isFrozenGrid()) {\n                var mRows = _this.parent.getMovableRowsObject();\n                var newMovableRows = mRows.map(function (row) { return row.clone(); });\n                var newFrozenRows = rows.map(function (row) { return row.clone(); });\n                _this.fContent.matrix.generate(newFrozenRows, _this.fContent.selector, isRowTemplate);\n                _this.content.matrix.generate(newMovableRows, _this.content.selector, isRowTemplate);\n                if (_this.parent.getFrozenMode() === 'Left-Right') {\n                    var frRows = _this.parent.getFrozenRightRowsObject();\n                    var newfrRows = frRows.map(function (row) { return row.clone(); });\n                    _this.frContent.matrix.generate(newfrRows, _this.frContent.selector, isRowTemplate);\n                }\n            }\n            else {\n                cFocus.matrix.generate(rows, cFocus.selector, isRowTemplate);\n            }\n            cFocus.generateRows(updateRow, {\n                matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader\n                    : (e.args && e.args.renderFrozenRightContent) ? _this.frHeader : _this.header\n            });\n            if (!Browser.isDevice && e && e.args) {\n                if (!_this.focusByClick && e.args.requestType === 'paging') {\n                    _this.skipFocus = false;\n                    _this.parent.element.focus();\n                }\n                if (e.args.requestType === 'grouping') {\n                    _this.skipFocus = true;\n                }\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        var focusElement = _this.getContent().getFocusInfo().elementToFocus;\n                        if (focusElement) {\n                            var cellPosition = focusElement.getBoundingClientRect();\n                            var gridPosition = _this.parent.element.getBoundingClientRect();\n                            if (cellPosition.top >= 0 && cellPosition.left >= 0 &&\n                                cellPosition.right <= Math.min(gridPosition.right, window.innerWidth ||\n                                    document.documentElement.clientWidth) &&\n                                cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight ||\n                                    document.documentElement.clientHeight)) {\n                                _this.isVirtualScroll = true;\n                                _this.focus();\n                            }\n                        }\n                    }\n                }\n                else if (e.args.focusElement && e.args.focusElement.classList.contains('e-filtertext')) {\n                    var focusElement = _this.parent.element.querySelector('#' + e.args.focusElement.id);\n                    if (focusElement) {\n                        focusElement.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refMatrix, this);\n        this.parent.on(event.partialRefresh, this.refMatrix, this);\n        this.parent.on(event.refreshExpandandCollapse, this.refMatrix, this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        this.parent.on('restore-Focus', this.restoreFocus, this);\n        var evts = ['start-edit', 'start-add'];\n        for (var i = 0; i < evts.length; i++) {\n            this.parent.on(evts[i], this.clearIndicator, this);\n        }\n        this.parent.on('sorting-complete', this.restoreFocus, this);\n        this.parent.on('filtering-complete', this.filterfocus, this);\n        var actionsG = ['grouping', 'ungrouping'];\n        for (var k = 0; k < actionsG.length; k++) {\n            this.parent.on(actionsG[k] + \"-complete\", this.restoreFocusWithAction, this);\n        }\n        this.parent.on(event.batchAdd, this.refMatrix, this);\n        this.parent.on(event.batchCancel, this.refMatrix, this);\n        this.parent.on(event.batchDelete, this.refMatrix, this);\n        this.parent.on(event.detailDataBound, this.refMatrix, this);\n        this.parent.on(event.onEmpty, this.refMatrix, this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.filterfocus = function () {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            this.restoreFocus();\n        }\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refMatrix);\n        this.parent.off(event.partialRefresh, this.refMatrix);\n        this.parent.off(event.refreshExpandandCollapse, this.refMatrix);\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        this.parent.off('restore-focus', this.restoreFocus);\n        var evts = ['start-edit', 'start-add'];\n        for (var i = 0; i < evts.length; i++) {\n            this.parent.off(evts[i], this.clearOutline);\n        }\n        this.parent.off('sorting-complete', this.restoreFocus);\n        this.parent.off('filtering-complete', this.filterfocus);\n        var actionsG = ['grouping', 'ungrouping'];\n        for (var k = 0; k < actionsG.length; k++) {\n            this.parent.on(actionsG[k] + \"-complete\", this.restoreFocusWithAction);\n        }\n        this.parent.off(event.batchAdd, this.refMatrix);\n        this.parent.off(event.batchDelete, this.refMatrix);\n        this.parent.off(event.batchCancel, this.refMatrix);\n        this.parent.off(event.detailDataBound, this.refMatrix);\n        this.parent.off(event.onEmpty, this.refMatrix);\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.restoreFocusWithAction = function (e) {\n        if (!this.parent.enableInfiniteScrolling) {\n            var matrix = this.getContent().matrix;\n            var current = matrix.current;\n            switch (e.requestType) {\n                case 'grouping':\n                case 'ungrouping':\n                    current[1] = current.length &&\n                        !this.parent.groupSettings.showGroupedColumn && !isNullOrUndefined(matrix.matrix[current[0]]) ?\n                        matrix.matrix[current[0]].indexOf(1) : e.requestType === 'grouping' ? current[1] + 1 : current[1] - 1;\n                    break;\n            }\n            this.getContent().matrix.current = current;\n            this.addFocus(this.getContent().getFocusInfo());\n        }\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget || !Object.keys(this.prevIndexes).length ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (!this.parent.isFrozenGrid() && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.isFrozenGrid() }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        var emptyTable = true;\n        if (isNullOrUndefined(this.matrix[rowIndex])) {\n            return null;\n        }\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        if (rowIndex === this.rows && (action === 'downArrow' || action === 'enter')) {\n            navigator[0] = -1;\n        }\n        if (first === null) {\n            for (var i = 0; i < this.rows; i++) {\n                if (this.matrix[i].some(function (v) { return v === 1; })) {\n                    emptyTable = false;\n                    break;\n                }\n            }\n            if (emptyTable) {\n                rowIndex = this.current[0];\n                return [rowIndex, columnIndex];\n            }\n        }\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector, isRowTemplate) {\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        for (var i = 0; i < rows.length; i++) {\n            var cells = rows[i].cells.filter(function (c) { return c.isSpanned !== true; });\n            this.columns = Math.max(cells.length - 1, this.columns | 0);\n            for (var j = 0; j < cells.length; j++) {\n                this.set(i, j, rows[i].visible === false ? false : selector(rows[i], cells[j], isRowTemplate));\n            }\n        }\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.lastIdxCell = false;\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.isFrozenGrid() ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString() || (this.matrix.current[0] === this.matrix.rows &&\n                this.matrix.current.toString() === current.toString())) {\n                return false;\n            }\n            else {\n                current = this.editNextRow(current[0], current[1], e.action);\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.editNextRow = function (rowIndex, cellIndex, action) {\n        var gObj = this.parent;\n        var editNextRow = gObj.editSettings.allowNextRowEdit && (gObj.isEdit || gObj.isLastCellPrimaryKey);\n        var visibleIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[0].field);\n        var cell = this.getTable().rows[rowIndex].cells[cellIndex];\n        if (action === 'tab' && editNextRow) {\n            rowIndex++;\n            var index = (this.getTable().rows[rowIndex].querySelectorAll('.e-indentcell').length +\n                this.getTable().rows[rowIndex].querySelectorAll('.e-detailrowcollapse').length);\n            cellIndex = visibleIndex + index;\n        }\n        if (action === 'shiftTab' && editNextRow) {\n            rowIndex--;\n            cellIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[gObj.getVisibleColumns().length - 1].field);\n        }\n        return !cell.classList.contains('e-rowcell') && !cell.classList.contains('e-headercell') &&\n            !cell.classList.contains('e-groupcaption') ?\n            this.editNextRow(rowIndex, cellIndex, action) : [rowIndex, cellIndex];\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action) || (this.matrix.current.length === 0)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        this.target = target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex) ||\n            (!parentsUntil(e.target, 'e-rowcell') && !parentsUntil(e.target, 'e-groupcaption'))) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        var isTemplate = !isNullOrUndefined(closest(element, '.e-templatecell'));\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? isTemplate ? this.target : child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell, isRowTemplate) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand && isNullOrUndefined(cell.visible))\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn)\n            || (row.isDataRow && isRowTemplate))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.nextRowFocusValidate = function (index) {\n        var lastIndex = index;\n        for (var i = index, len = this.matrix.rows; i < len; i++) {\n            if (this.matrix.matrix[index].indexOf(1) === -1) {\n                index = index + 1;\n            }\n            else {\n                return index;\n            }\n        }\n        this.lastIdxCell = true;\n        return lastIndex;\n    };\n    ContentFocus.prototype.previousRowFocusValidate = function (index) {\n        var firstIndex = index;\n        for (var i = index, len = 0; i >= len; i--) {\n            if (this.matrix.matrix[index].indexOf(1) === -1) {\n                index = index - 1;\n                if (index < 0) {\n                    this.lastIdxCell = true;\n                    return firstIndex;\n                }\n            }\n            else {\n                return index;\n            }\n        }\n        return firstIndex;\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.getFrozenLeftCount() &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var right = ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns);\n        var frSwap = this.parent.getFrozenMode() === 'Left-Right' && right;\n        if (this.parent.getFrozenMode() === 'Right') {\n            frozenSwap = right;\n        }\n        this.lastIdxCell = false;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        if (action === 'tab' && !this.parent.isEdit &&\n            current[1] === this.matrix.matrix[current[0]].lastIndexOf(1) && this.matrix.matrix.length - 1 !== current[0]) {\n            this.matrix.current[0] = this.nextRowFocusValidate(this.matrix.current[0] + 1);\n            this.matrix.current[1] = -1;\n            frozenSwap = this.parent.isFrozenGrid();\n        }\n        if (action === 'shiftTab' && !this.parent.isEdit &&\n            current[0] !== 0 && this.matrix.matrix[current[0]].indexOf(1) === current[1]) {\n            this.matrix.current[0] = this.previousRowFocusValidate(this.matrix.current[0] - 1);\n            this.matrix.current[1] = this.matrix.matrix[current[0]].length;\n        }\n        var isHeaderFocus = false;\n        var row = document.activeElement.parentElement;\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && row.classList.contains('e-row')) {\n            var rowIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n            isHeaderFocus = rowIndex > 0;\n        }\n        var info = {\n            swap: !isHeaderFocus ? ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap || frSwap : false,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap,\n            toFrozenRight: frSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenMode() === 'Left-Right') {\n            if (action === 'leftArrow' || action === 'shiftTab') {\n                current[0] = previous[0];\n                current[1] = active.matrix.columns + 1;\n            }\n            if (this.parent.getFrozenMode() === 'Left-Right' && (action === 'rightArrow' || action === 'tab')) {\n                current[0] = previous[0];\n                current[1] = -1;\n            }\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var _a;\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            if (!isNullOrUndefined(table.rows[rowIndex])) {\n                var cell = void 0;\n                cellIndex = table.querySelector('.e-emptyrow') ? 0 : cellIndex;\n                if (table.rows[rowIndex].cells[0].classList.contains('e-editcell')) {\n                    cell = table.rows[rowIndex].cells[0].querySelectorAll('td')[cellIndex];\n                }\n                else {\n                    cell = table.rows[rowIndex].cells[cellIndex];\n                }\n                var isCellWidth = cell.getBoundingClientRect().width !== 0;\n                if (action === 'enter' || action === 'shiftEnter') {\n                    return isCellWidth && cell.classList.contains('e-rowcell');\n                }\n                if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                    return isCellWidth;\n                }\n                else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                    return isCellWidth;\n                }\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && (!cell.classList.contains('e-templatecell') || cell.classList.contains('e-editedbatchcell'))\n                && !cell.classList.contains('e-detailcell') : true;\n    };\n    ContentFocus.prototype.getGridSeletion = function () {\n        return !isBlazor() && this.parent.allowSelection && this.parent.selectionSettings.allowColumnSelection;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.isFrozenGrid() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (e.target.classList.contains('e-columnheader') ||\n            e.target.querySelector('.e-stackedheadercell')) {\n            return false;\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        if (!isNullOrUndefined(info.element)) {\n            info.elementToFocus = this.getFocusable(info.element);\n            info.outline = !info.element.classList.contains('e-filterbarcell');\n        }\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate || !isNullOrUndefined(cell.column.template))) ||\n            cell.column.type === 'checkbox' || cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.getFrozenLeftCount() &&\n            (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion()) || action === 'shiftTab') && current[1] === 0;\n        var right = (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion())\n            || action === 'tab') && current[1] === this.matrix.columns;\n        var frSwap = this.parent.getFrozenMode() === 'Left-Right' && right;\n        if (this.parent.getFrozenMode() === 'Right') {\n            frozenSwap = right;\n        }\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var isLastCell;\n        var lastRow;\n        var headerSwap = frozenSwap || frSwap;\n        var fMatrix = this.parent.focusModule.fHeader && this.parent.focusModule.fHeader.matrix.matrix;\n        var isPresent = fMatrix && !isNullOrUndefined(fMatrix[current[0]]);\n        if (this.parent.enableHeaderFocus && action === 'tab') {\n            lastRow = this.matrix.matrix.length - 1 === current[0];\n            isLastCell = current[1] === this.matrix.matrix[current[0]].lastIndexOf(1);\n            if (isLastCell) {\n                if (!lastRow) {\n                    this.matrix.current[0] = this.matrix.current[0] + 1;\n                }\n                else {\n                    this.matrix.current[0] = 0;\n                }\n                this.matrix.current[1] = -1;\n            }\n            if (this.parent.isFrozenGrid() && lastRow && isLastCell) {\n                frozenSwap = true;\n                headerSwap = false;\n            }\n        }\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                (isPresent && (frozenSwap || frSwap)) || (action === 'tab' && lastRow && isLastCell),\n            toHeader: headerSwap,\n            toFrozen: frozenSwap,\n            toFrozenRight: frSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenMode() === 'Left-Right') {\n            if (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion()) || action === 'shiftTab') {\n                current1[0] = previous[0];\n                current1[1] = active.matrix.columns + 1;\n            }\n            if (this.parent.getFrozenMode() === 'Left-Right'\n                && (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab')) {\n                current1[0] = previous[0];\n                current1[1] = -1;\n            }\n        }\n        else if (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            var cells = rows[0].cells;\n            for (var i = 0; i < cells.length; i++) {\n                this.matrix.set(length, i, cells[i].visible && cells[i].column.allowFiltering !== false);\n            }\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];\n        if (rowIndex < 0 || columnIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rowIndex + \".cells.\" + columnIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var toHeader = (action === 'upArrow' || enterFrozen) && current[0] === 0;\n        if (this.parent.getFrozenMode() === 'Right') {\n            var swap = toHeader || ((action === 'shiftTab' || action === 'leftArrow') && current[1] === 0);\n            return { swap: swap, toHeader: toHeader, toFrozen: toHeader };\n        }\n        return {\n            swap: toHeader || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: toHeader,\n            toFrozen: toHeader\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (this.parent.getFrozenMode() === 'Right') {\n            if (action === 'rightArrow' || action === 'tab') {\n                current2[0] = previous[0];\n                current2[1] = -1;\n            }\n        }\n        else {\n            if (action === 'tab' && this.parent.enableHeaderFocus) {\n                current2[0] = previous[0];\n                current2[1] = -1;\n            }\n            if (action === 'leftArrow' || action === 'shiftTab') {\n                current2[0] = previous[0];\n                current2[1] = active.matrix.columns + 1;\n            }\n        }\n        if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var hMatrix = this.parent.focusModule.header && this.parent.focusModule.header.matrix.matrix;\n        var isPresent = hMatrix && !isNullOrUndefined(hMatrix[current[0]]);\n        if (this.parent.getFrozenMode() === 'Right') {\n            var frSwap = (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion())\n                || action === 'shiftTab') && current[1] === 0;\n            var swap = ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                (isPresent && frSwap);\n            var toFrozen = (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1;\n            return { swap: swap, toHeader: frSwap, toFrozen: toFrozen };\n        }\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1 || ((action === 'rightArrow' ||\n                (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') &&\n                current[1] === this.matrix.columns && isPresent),\n            toHeader: (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') &&\n                current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (this.parent.getFrozenMode() === 'Right') {\n            if (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') {\n                current3[0] = previous[0];\n                current3[1] = -1;\n            }\n        }\n        else {\n            if (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion()) || action === 'shiftTab') {\n                current3[0] = previous[0];\n                current3[1] = active.matrix.columns + 1;\n            }\n        }\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    /** @hidden */\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\nvar FixedRightContentFocus = /** @class */ (function (_super) {\n    __extends(FixedRightContentFocus, _super);\n    function FixedRightContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedRightContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozen-right-content .e-table');\n    };\n    FixedRightContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var toHeader = (action === 'upArrow' || enterFrozen) && current[0] === 0;\n        return {\n            swap: toHeader || ((action === 'shiftTab' || action === 'leftArrow') && current[1] === 0),\n            toHeader: toHeader,\n            toFrozenRight: toHeader\n        };\n    };\n    FixedRightContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current2[0] = previous[0];\n            current2[1] = -1;\n        }\n        if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedRightContentFocus;\n}(ContentFocus));\nexport { FixedRightContentFocus };\nvar FixedRightHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedRightHeaderFocus, _super);\n    function FixedRightHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedRightHeaderFocus.prototype.jump = function (action, current) {\n        var headerMat = this.parent.focusModule.header && this.parent.focusModule.header.matrix.matrix;\n        var isPresent = headerMat && !isNullOrUndefined(headerMat[current[0]]);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        var frozenSwap = (action === 'leftArrow' || (action === 'shiftLeft' && this.getGridSeletion())\n            || action === 'shiftTab') && current[1] === 0;\n        var swap = ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n            (isPresent && frozenSwap);\n        var toFrozen = (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1;\n        return { swap: swap, toHeader: frozenSwap, toFrozenRight: toFrozen };\n    };\n    FixedRightHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozen-right-header .e-table'));\n    };\n    FixedRightHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'rightArrow' || (action === 'shiftRight' && this.getGridSeletion()) || action === 'tab') {\n            current3[0] = previous[0];\n            current3[1] = 0;\n        }\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedRightHeaderFocus;\n}(HeaderFocus));\nexport { FixedRightHeaderFocus };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the column chooser behavior of the Grid.\n */\nvar ColumnChooserSettings = /** @class */ (function (_super) {\n    __extends(ColumnChooserSettings, _super);\n    function ColumnChooserSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('startsWith')\n    ], ColumnChooserSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(false)\n    ], ColumnChooserSettings.prototype, \"ignoreAccent\", void 0);\n    return ColumnChooserSettings;\n}(ChildProperty));\nexport { ColumnChooserSettings };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { Browser, EventHandler, createElement, isBlazor } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest, select } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, isGroupAdaptive, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport { getCellsByTableName, getCellByColAndRowIndex, parentsUntil, gridActionHandler } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { iterateExtend, setChecked } from '../base/util';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal letiables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        /**\n         * @hidden\n         */\n        this.preventFocus = false;\n        /**\n         *  @hidden\n         */\n        this.selectedColumnsIndexes = [];\n        this.checkBoxState = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.clearRowCheck = false;\n        this.selectRowCheck = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.needColumnSelection = false;\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.isPersisted = false;\n        this.cmdKeyPressed = false;\n        this.cellselected = false;\n        this.isMultiSelection = false;\n        this.isAddRowsToSelection = false;\n        this.initialRowSelection = false;\n        this.isPrevRowSelection = false;\n        /**\n         * @hidden\n         */\n        this.autoFillRLselection = true;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.wireEvents();\n    }\n    Selection.prototype.initializeSelection = function () {\n        this.parent.log('selection_key_missing');\n        this.render();\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (!this.isMultiSelection && (!isNullOrUndefined(args.cellIndex) || !isNullOrUndefined(args.rowIndex))) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n        this.isMultiSelection = false;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        this.unWireEvents();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n        EventHandler.remove(this.parent.getHeaderContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' && this.parent.editModule &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid() && this.parent.getContent().querySelector('.e-movablecontent')) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getSelectedFrozenRightRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid() && gObj.getFrozenMode() === 'Left-Right' && gObj.getFrozenRightContent()) {\n            return gObj.getFrozenRightRowByIndex(index);\n        }\n        return null;\n    };\n    Selection.prototype.getCurrentBatchRecordChanges = function () {\n        var gObj = this.parent;\n        var added = 'addedRecords';\n        var deleted = 'deletedRecords';\n        if (gObj.editSettings.mode === 'Batch' && gObj.editModule) {\n            var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());\n            currentRecords = gObj.editSettings.newRowPosition === 'Bottom' ?\n                currentRecords.concat(this.parent.editModule.getBatchChanges()[added]) :\n                this.parent.editModule.getBatchChanges()[added].concat(currentRecords);\n            var deletedRecords = this.parent.editModule.getBatchChanges()[deleted];\n            var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < (deletedRecords.length); i++) {\n                for (var j = 0; j < currentRecords.length; j++) {\n                    if (deletedRecords[i][primaryKey] === currentRecords[j][primaryKey]) {\n                        currentRecords.splice(j, 1);\n                        break;\n                    }\n                }\n            }\n            return currentRecords;\n        }\n        else {\n            return gObj.getCurrentViewRecords();\n        }\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) {\n            this.addRowsToSelection([index]);\n            return;\n        }\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectedFrozenRightRow = this.getSelectedFrozenRightRow(index);\n        var selectData;\n        var isRemoved = false;\n        if (gObj.enableVirtualization && index > -1) {\n            this.parent.notify(events.selectVirtualRow, { selectedIndex: index });\n            var frozenData = gObj.isFrozenGrid() ? gObj.contentModule.getRowObjectByIndex(index)\n                : null;\n            if (selectedRow && (gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')) || frozenData)) {\n                selectData = frozenData ? frozenData : gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n            }\n            else {\n                var prevSelectedData = this.parent.getSelectedRecords();\n                if (prevSelectedData.length > 0) {\n                    this.clearRowSelection();\n                }\n                return;\n            }\n        }\n        else {\n            selectData = this.getCurrentBatchRecordChanges()[index];\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        this.activeTarget();\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                    isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                    previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                    previousRowIndex: this.prevRowIndex, target: this.actualTarget, cancel: false, isInteracted: this.isInteracted,\n                    isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n                };\n                args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n            }\n            else {\n                args = {\n                    data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                    isShiftPressed: this.isMultiShiftRequest, previousRowIndex: this.prevRowIndex,\n                    cancel: false, isInteracted: this.isInteracted, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n                };\n            }\n            this.parent.trigger(events.rowSelecting, this.fDataUpdate(args), this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can));\n        }\n        else {\n            this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can)(args);\n        }\n    };\n    Selection.prototype.rowSelectingCallBack = function (args, isToggle, index, selectData, isRemoved, isRowSelected, can) {\n        var _this = this;\n        return function (args) {\n            if (!isNullOrUndefined(args) && args[can] === true) {\n                _this.disableInteracted();\n                return;\n            }\n            _this.index = index;\n            _this.toggle = isToggle;\n            _this.data = selectData;\n            _this.removed = isRemoved;\n            if (isRowSelected && _this.selectionSettings.persistSelection && !(_this.selectionSettings.checkboxMode === 'ResetOnRowClick')) {\n                _this.clearSelectedRow(index);\n                _this.selectRowCallBack();\n            }\n            else if (!isRowSelected && _this.selectionSettings.persistSelection &&\n                _this.selectionSettings.checkboxMode !== 'ResetOnRowClick') {\n                _this.selectRowCallBack();\n            }\n            if (_this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n                _this.clearSelection();\n            }\n            if (!_this.selectionSettings.persistSelection || _this.selectionSettings.checkboxMode === 'ResetOnRowClick' ||\n                (!_this.parent.isCheckBoxSelection && _this.selectionSettings.persistSelection)) {\n                _this.selectRowCheck = true;\n                _this.clearRow();\n            }\n        };\n    };\n    Selection.prototype.selectRowCallBack = function () {\n        var gObj = this.parent;\n        var args;\n        var index = this.index;\n        var isToggle = this.toggle;\n        var selectData = this.data;\n        var isRemoved = this.removed;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectedFrozenRightRow = this.getSelectedFrozenRightRow(index);\n        if (!isToggle && !isRemoved) {\n            if (this.selectedRowIndexes.indexOf(index) <= -1) {\n                this.updateRowSelection(selectedRow, index);\n                this.selectMovableRow(selectedMovableRow, selectedFrozenRightRow, index);\n            }\n            this.selectRowIndex(index);\n        }\n        if (!isToggle) {\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    data: selectData, rowIndex: index,\n                    row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                    previousRowIndex: this.prevRowIndex, target: this.actualTarget, isInteracted: this.isInteracted,\n                    isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked\n                };\n                args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n            }\n            else {\n                args = {\n                    data: selectData, rowIndex: index,\n                    row: selectedRow, previousRow: gObj.getRowByIndex(this.prevRowIndex),\n                    previousRowIndex: this.prevRowIndex, isInteracted: this.isInteracted,\n                    isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked\n                };\n            }\n            this.onActionComplete(args, events.rowSelected);\n        }\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization) {\n            var interopAdaptor = 'interopAdaptor';\n            var invokeMethodAsync = 'invokeMethodAsync';\n            this.parent[interopAdaptor][invokeMethodAsync]('MaintainSelection', true, 'normal', [index]);\n        }\n        this.isInteracted = false;\n        this.updateRowProps(index);\n    };\n    Selection.prototype.selectMovableRow = function (selectedMovableRow, selectedFrozenRightRow, index) {\n        if (this.parent.isFrozenGrid()) {\n            this.updateRowSelection(selectedMovableRow, index);\n            if (this.parent.getFrozenMode() === 'Left-Right' && selectedFrozenRightRow) {\n                this.updateRowSelection(selectedFrozenRightRow, index);\n            }\n        }\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow, frRow) {\n        if (this.parent.isFrozenGrid()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            var frozenRightRow = 'frozenRightRow';\n            var previousFrozenRightRow = 'previousFrozenRightRow';\n            if (this.parent.getFrozenMode() === 'Left-Right' && frRow) {\n                mObj[frozenRightRow] = frRow;\n                mObj[previousFrozenRightRow] = this.parent.getFrozenRightDataRows()[this.prevRowIndex];\n            }\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.selectRowIndex(endIndex);\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var _this = this;\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        this.isMultiSelection = true;\n        var selectedRows = [];\n        var foreignKeyData = [];\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var selectedFrozenRightRow = this.getSelectedFrozenRightRow(rowIndex);\n        var can = 'cancel';\n        var selectedData = [];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        for (var i = 0, len = rowIndexes.length; i < len; i++) {\n            var currentRow = this.parent.getDataRows()[rowIndexes[i]];\n            var rowObj = this.getRowObj(currentRow);\n            if (rowObj) {\n                selectedData.push(rowObj.data);\n                selectedRows.push(currentRow);\n                foreignKeyData.push(rowObj.foreignKeyData);\n            }\n        }\n        var isHybrid = 'isHybrid';\n        this.activeTarget();\n        var args;\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            args = {\n                cancel: false,\n                rowIndexes: rowIndexes, row: selectedRows, rowIndex: rowIndex, target: this.actualTarget,\n                prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                isInteracted: this.isInteracted, isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                data: selectedData, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n            };\n            args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n        }\n        else {\n            args = {\n                cancel: false,\n                rowIndexes: rowIndexes, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                data: selectedData, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n            };\n        }\n        this.parent.trigger(events.rowSelecting, this.fDataUpdate(args), function (args) {\n            if (!isNullOrUndefined(args) && args[can] === true) {\n                _this.disableInteracted();\n                return;\n            }\n            _this.clearRow();\n            _this.selectRowIndex(rowIndexes.slice(-1)[0]);\n            var selectRowFn = function (index) {\n                _this.updateRowSelection(gObj.getRowByIndex(index), index);\n                if (gObj.isFrozenGrid()) {\n                    var rightEle = _this.parent.getFrozenMode() === 'Left-Right' ? gObj.getFrozenRightRowByIndex(index)\n                        : undefined;\n                    _this.selectMovableRow(gObj.getMovableRowByIndex(index), rightEle, index);\n                }\n                _this.updateRowProps(rowIndex);\n            };\n            if (!_this.isSingleSel()) {\n                for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                    var rowIdx = rowIndexes_1[_i];\n                    selectRowFn(rowIdx);\n                }\n            }\n            else {\n                selectRowFn(rowIndex);\n            }\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                args = {\n                    rowIndexes: rowIndexes, row: selectedRows, rowIndex: rowIndex, target: _this.actualTarget,\n                    prevRow: gObj.getRows()[_this.prevRowIndex], previousRowIndex: _this.prevRowIndex,\n                    data: isBlazor() ? selectedData : _this.getSelectedRecords(), isInteracted: _this.isInteracted,\n                    isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n                };\n                args = _this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n            }\n            else {\n                args = {\n                    rowIndexes: rowIndexes, rowIndex: rowIndex, previousRowIndex: _this.prevRowIndex,\n                    row: selectedRows, prevRow: gObj.getRows()[_this.prevRowIndex],\n                    data: isBlazor() ? selectedData : _this.getSelectedRecords(), isInteracted: _this.isInteracted,\n                    isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked, foreignKeyData: foreignKeyData\n                };\n            }\n            if (_this.isRowSelected) {\n                _this.onActionComplete(args, events.rowSelected);\n            }\n            _this.isInteracted = false;\n        });\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var target = this.target;\n        this.isMultiSelection = true;\n        var indexes = gObj.getSelectedRowIndexes().concat(rowIndexes);\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var selectedFrozenRightRow = !this.isSingleSel() ? this.getSelectedFrozenRightRow(rowIndexes[0]) :\n            this.getSelectedFrozenRightRow(rowIndexes[rowIndexes.length - 1]);\n        if ((!this.isRowType() || this.isEditing()) && !this.selectionSettings.checkboxOnly) {\n            return;\n        }\n        var args;\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            this.selectRowIndex(rowIndex);\n            if (isUnSelected && ((checkboxColumn.length ? true : this.selectionSettings.enableToggle) || this.isMultiCtrlRequest)) {\n                this.isAddRowsToSelection = true;\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);\n                if (this.isCancelDeSelect) {\n                    return;\n                }\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                this.selectRowIndex(this.selectedRowIndexes.length ? this.selectedRowIndexes[this.selectedRowIndexes.length - 1] : -1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                if (selectedFrozenRightRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedFrozenRightRow), 1);\n                    selectedFrozenRightRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedFrozenRightRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, [selectedMovableRow], undefined, [selectedFrozenRightRow]);\n                this.isInteracted = false;\n                this.isMultiSelection = false;\n                this.isAddRowsToSelection = false;\n            }\n            else {\n                var isHybrid = 'isHybrid';\n                this.activeTarget();\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    args = {\n                        cancel: false,\n                        data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                    args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n                }\n                else {\n                    args = {\n                        cancel: false,\n                        data: rowObj.data, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                        isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                }\n                this.parent.trigger(events.rowSelecting, this.fDataUpdate(args));\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    this.disableInteracted();\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                this.selectMovableRow(selectedMovableRow, selectedFrozenRightRow, rowIndex);\n            }\n            if (!isUnSelected) {\n                var isHybrid = 'isHybrid';\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    args = {\n                        data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.actualTarget,\n                        prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                    args = this.addMovableArgs(args, selectedMovableRow, selectedFrozenRightRow);\n                }\n                else {\n                    args = {\n                        data: rowObj.data, rowIndex: rowIndex, previousRowIndex: this.prevRowIndex,\n                        row: selectedRow, prevRow: gObj.getRows()[this.prevRowIndex],\n                        foreignKeyData: rowObj.foreignKeyData, isInteracted: this.isInteracted,\n                        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked, rowIndexes: indexes\n                    };\n                }\n                this.onActionComplete(args, events.rowSelected);\n            }\n            this.isInteracted = false;\n            this.updateRowProps(rowIndex);\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex <= endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowCheck = true;\n        this.clearRowSelection();\n    };\n    Selection.prototype.clearRowCallBack = function () {\n        if (this.isCancelDeSelect && this.parent.checkAllRows !== 'Check') {\n            return;\n        }\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.selectRowIndex(-1);\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.clearSelectedRow = function (index) {\n        if (this.toggle) {\n            var selectedEle = this.parent.getRowByIndex(index);\n            if (!this.disableUI) {\n                selectedEle.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedEle, false, true, 'e-selectionbackground', 'e-active');\n            }\n            this.removed = true;\n            this.updatePersistCollection(selectedEle, false);\n            this.updateCheckBoxes(selectedEle);\n            this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(index), 1);\n            this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(index)), 1);\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if ((this.parent.isPersistSelection || this.parent.selectionSettings.persistSelection &&\n            this.parent.getPrimaryKeyFieldNames().length > 0) && !isNullOrUndefined(selectedRow)) {\n            if (!this.parent.isPersistSelection) {\n                this.ensureCheckboxFieldSelection();\n            }\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState, rowIndex) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                setChecked(chkBox, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(rowIndex);\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.isFrozenGrid() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)');\n            if (this.parent.contextMenuModule && this.mouseButton === 2) {\n                target = this.parent.contextMenuModule.cell;\n            }\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            if (this.parent.isPersistSelection) {\n                this.persistSelectedData = [];\n                this.selectedRowState = {};\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.clearColumnSelection();\n            this.prevRowIndex = undefined;\n            this.enableSelectMultiTouch = false;\n            this.isInteracted = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows_1 = this.parent.getDataRows();\n            var data_1 = [];\n            var row_1 = [];\n            var mRow_1 = [];\n            var fRightRow_1 = [];\n            var rowIndex_1 = [];\n            var foreignKeyData_1 = [];\n            var target_1 = this.target;\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.editSettings.mode === 'Batch' ?\n                    this.parent.getRows()[this.selectedRowIndexes[i]]\n                    : this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data_1.push(rowObj.data);\n                    row_1.push(currentRow);\n                    rowIndex_1.push(this.selectedRowIndexes[i]);\n                    foreignKeyData_1.push(rowObj.foreignKeyData);\n                }\n                if (gObj.isFrozenGrid()) {\n                    mRow_1.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                    if (gObj.getFrozenMode() === 'Left-Right') {\n                        fRightRow_1.push(gObj.getFrozenRightRows()[this.selectedRowIndexes[i]]);\n                    }\n                }\n            }\n            if (this.selectionSettings.persistSelection && this.selectionSettings.checkboxMode !== 'ResetOnRowClick') {\n                this.isRowClicked = this.checkSelectAllClicked ? true : false;\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, mRow_1, function () {\n                if (_this.isCancelDeSelect && (_this.isRowClicked || _this.checkSelectAllClicked || (_this.isInteracted &&\n                    !_this.parent.isPersistSelection))) {\n                    if (_this.parent.isPersistSelection) {\n                        if (_this.getCheckAllStatus(_this.parent.element.querySelector('.e-checkselectall')) === 'Intermediate') {\n                            for (var i = 0; i < _this.selectedRecords.length; i++) {\n                                _this.updatePersistCollection(_this.selectedRecords[i], true);\n                            }\n                        }\n                        else {\n                            _this.parent.checkAllRows = 'Check';\n                            _this.updatePersistSelectedData(true);\n                        }\n                    }\n                    if (_this.clearRowCheck) {\n                        _this.clearRowCallBack();\n                        _this.clearRowCheck = false;\n                        if (_this.selectRowCheck) {\n                            _this.selectRowCallBack();\n                            _this.selectRowCheck = false;\n                        }\n                    }\n                    return;\n                }\n                var element = [].slice.call(rows_1.filter(function (record) { return record.hasAttribute('aria-selected'); }));\n                for (var j = 0; j < element.length; j++) {\n                    if (!_this.disableUI || isBlazor()) {\n                        element[j].removeAttribute('aria-selected');\n                        _this.addRemoveClassesForRow(element[j], false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    // tslint:disable-next-line:align\n                    if (!_this.isPrevRowSelection) {\n                        _this.updatePersistCollection(element[j], false);\n                    }\n                    _this.updateCheckBoxes(element[j]);\n                }\n                if (isBlazor() && _this.parent.isServerRendered && _this.parent.enableVirtualization) {\n                    _this.getRenderer().setSelection(null, false, true);\n                }\n                for (var i = 0, len = _this.selectedRowIndexes.length; i < len; i++) {\n                    var movableRow = _this.getSelectedMovableRow(_this.selectedRowIndexes[i]);\n                    if (movableRow) {\n                        if (!_this.disableUI || isBlazor()) {\n                            movableRow.removeAttribute('aria-selected');\n                            _this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                        }\n                        _this.updateCheckBoxes(movableRow);\n                        if (!_this.isPrevRowSelection) {\n                            _this.updatePersistCollection(movableRow, false);\n                        }\n                    }\n                    var frRow = _this.getSelectedFrozenRightRow(_this.selectedRowIndexes[i]);\n                    if (frRow) {\n                        if (!_this.disableUI) {\n                            frRow.removeAttribute('aria-selected');\n                            _this.addRemoveClassesForRow(frRow, false, true, 'e-selectionbackground', 'e-active');\n                        }\n                        _this.updateCheckBoxes(frRow);\n                        if (!_this.isPrevRowSelection) {\n                            _this.updatePersistCollection(frRow, false);\n                        }\n                    }\n                }\n                _this.selectedRowIndexes = [];\n                _this.selectedRecords = [];\n                _this.isRowSelected = false;\n                _this.selectRowIndex(-1);\n                _this.isPrevRowSelection = false;\n                _this.rowDeselect(events.rowDeselected, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, mRow_1, undefined, fRightRow_1);\n                if (_this.clearRowCheck) {\n                    _this.clearRowCallBack();\n                    _this.clearRowCheck = false;\n                    if (_this.selectRowCheck) {\n                        _this.selectRowCallBack();\n                        _this.selectRowCheck = false;\n                    }\n                }\n            }, fRightRow_1);\n        }\n        else {\n            if (this.clearRowCheck) {\n                this.clearRowCallBack();\n                this.clearRowCheck = false;\n                if (this.selectRowCheck) {\n                    this.selectRowCallBack();\n                    this.selectRowCheck = false;\n                }\n            }\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, target, mRow, rowDeselectCallBack, frozenRightRow) {\n        var _this = this;\n        if ((this.selectionSettings.persistSelection && (this.isRowClicked || this.checkSelectAllClicked)) ||\n            !this.selectionSettings.persistSelection) {\n            var cancl_1 = 'cancel';\n            var isSingleDeSel = rowIndex.length === 1;\n            var rowDeselectObj = {\n                rowIndex: rowIndex[0], data: this.selectionSettings.persistSelection && (this.parent.checkAllRows === 'Uncheck' &&\n                    !isSingleDeSel) && this.selectionSettings.checkboxMode !== 'ResetOnRowClick' ?\n                    this.persistSelectedData : data, foreignKeyData: foreignKeyData,\n                cancel: false, isInteracted: this.isInteracted, isHeaderCheckboxClicked: this.isHeaderCheckboxClicked\n            };\n            if (type === 'rowDeselected') {\n                delete rowDeselectObj.cancel;\n            }\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                var rowInString = 'row';\n                var target_2 = 'target';\n                var rowidx = 'rowIndex';\n                var rowidxex = 'rowIndexes';\n                var data_2 = 'data';\n                var foreignKey = 'foreignKeyData';\n                rowDeselectObj[rowInString] = row;\n                rowDeselectObj[target_2] = this.actualTarget;\n                var isHeaderCheckBxClick = this.actualTarget && !isNullOrUndefined(closest(this.actualTarget, 'thead'));\n                if (isHeaderCheckBxClick || rowIndex.length > 1) {\n                    rowDeselectObj[rowidx] = rowIndex[0];\n                    rowDeselectObj[rowidxex] = rowIndex;\n                }\n                else if (rowIndex.length === 1) {\n                    rowDeselectObj[data_2] = rowDeselectObj[data_2][0];\n                    rowDeselectObj[rowInString] = rowDeselectObj[rowInString][0];\n                    rowDeselectObj[foreignKey] = rowDeselectObj[foreignKey][0];\n                    if (this.isAddRowsToSelection) {\n                        rowDeselectObj[rowidxex] = rowIndex;\n                    }\n                }\n            }\n            else {\n                var rowIndex_2 = 'rowIndex';\n                var data_3 = 'data';\n                rowDeselectObj[rowIndex_2] = rowDeselectObj[rowIndex_2][rowDeselectObj[rowIndex_2].length - 1];\n                rowDeselectObj[data_3] = rowDeselectObj[data_3][rowDeselectObj[data_3].length - 1];\n            }\n            this.parent.trigger(type, (!isBlazor() || this.parent.isJsComponent) && this.parent.isFrozenGrid() ? __assign({}, rowDeselectObj, { mRow: mRow, frozenRightRow: frozenRightRow }) : rowDeselectObj, function (args) {\n                _this.isCancelDeSelect = args[cancl_1];\n                if (!_this.isCancelDeSelect || (!_this.isRowClicked && !_this.isInteracted && !_this.checkSelectAllClicked)) {\n                    _this.updatePersistCollection(row[0], false);\n                    _this.updateCheckBoxes(row[0], undefined, rowIndex[0]);\n                    if (mRow) {\n                        _this.updateCheckBoxes(mRow[0], undefined, rowIndex[0]);\n                    }\n                    if (frozenRightRow) {\n                        _this.updateCheckBoxes(frozenRightRow[0], undefined, rowIndex[0]);\n                    }\n                }\n                if (rowDeselectCallBack !== undefined) {\n                    rowDeselectCallBack();\n                }\n            });\n        }\n        else if (this.selectionSettings.persistSelection && !this.isInteracted) {\n            if (rowDeselectCallBack !== undefined) {\n                rowDeselectCallBack();\n            }\n        }\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByIndex(cellIndex.cellIndex);\n        var frzCols = gObj.isFrozenGrid();\n        if (frzCols) {\n            if (col.getFreezeTableName() === 'movable') {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            if (!isBlazor() || this.parent.isJsComponent) {\n                var currentCell = 'currentCell';\n                args[currentCell] = selectedCell;\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData));\n            this.cellselected = true;\n        }\n        else {\n            this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData)(args);\n        }\n    };\n    Selection.prototype.successCallBack = function (cellSelectingArgs, isToggle, cellIndex, selectedCell, selectedData) {\n        var _this = this;\n        return function (cellSelectingArgs) {\n            var cncl = 'cancel';\n            var currentCell = 'currentCell';\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            if (!isToggle) {\n                cellSelectingArgs[currentCell] = cellSelectingArgs[currentCell] ? cellSelectingArgs[currentCell] : selectedCell;\n            }\n            _this.clearCell();\n            if (!isToggle) {\n                _this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            if (!isToggle) {\n                var args = void 0;\n                var isHybrid = 'isHybrid';\n                if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                    args = {\n                        data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                        selectedRowCellIndex: _this.selectedRowCellIndexes,\n                        previousRowCell: _this.prevECIdxs ?\n                            _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                    };\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    args[previousRowCellIndex] = _this.prevECIdxs;\n                }\n                else {\n                    args = { data: selectedData, cellIndex: cellIndex, selectedRowCellIndex: _this.selectedRowCellIndexes };\n                }\n                _this.updateCellProps(cellIndex, cellIndex);\n                _this.onActionComplete(args, events.cellSelected);\n            }\n        };\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        var _this = this;\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        if (!isBlazor()) {\n            var previousRowCellIndex = 'previousRowCellIndex';\n            args[previousRowCellIndex] = this.prevECIdxs;\n        }\n        this.parent.trigger(events.cellSelecting, this.fDataUpdate(args), function (cellSelectingArgs) {\n            if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs[cncl] === true) {\n                return;\n            }\n            _this.clearCell();\n            if (startIndex.rowIndex > endIndex.rowIndex) {\n                var temp = startIndex;\n                startIndex = endIndex;\n                endIndex = temp;\n            }\n            for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n                if (_this.selectionSettings.cellSelectionMode.indexOf('Box') < 0) {\n                    min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                    max = i === endIndex.rowIndex ? (endIndex.cellIndex) : _this.getLastColIndex(i);\n                }\n                else {\n                    min = startIndex.cellIndex;\n                    max = endIndex.cellIndex;\n                }\n                cellIndexes = [];\n                for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                    if (frzCols) {\n                        if (j < frzCols) {\n                            selectedCell = gObj.getCellFromIndex(i, j);\n                        }\n                        else {\n                            selectedCell = gObj.getMovableCellFromIndex(i, j);\n                        }\n                    }\n                    else {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    if (!selectedCell) {\n                        continue;\n                    }\n                    cellIndexes.push(j);\n                    _this.updateCellSelection(selectedCell);\n                    _this.addAttribute(selectedCell);\n                }\n                _this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n            }\n            var cellSelectedArgs;\n            var isHybrid = 'isHybrid';\n            if (!isBlazor() || _this.parent.isJsComponent || _this.parent[isHybrid]) {\n                cellSelectedArgs = {\n                    data: selectedData, cellIndex: edIndex, currentCell: gObj.getCellFromIndex(edIndex.rowIndex, edIndex.cellIndex),\n                    selectedRowCellIndex: _this.selectedRowCellIndexes,\n                    previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : undefined\n                };\n                var previousRowCellIndex = 'previousRowCellIndex';\n                cellSelectedArgs[previousRowCellIndex] = _this.prevECIdxs;\n            }\n            else {\n                cellSelectedArgs = { data: selectedData, cellIndex: edIndex, selectedRowCellIndex: _this.selectedRowCellIndexes };\n            }\n            if (!_this.isDragged) {\n                _this.onActionComplete(cellSelectedArgs, events.cellSelected);\n                _this.cellselected = true;\n            }\n            _this.updateCellProps(stIndex, edIndex);\n        });\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var cellSelectArgs;\n        var isHybrid = 'isHybrid';\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            cellSelectArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest,\n                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        else {\n            cellSelectArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n        }\n        this.onActionBegin(cellSelectArgs, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        var cellSelectedArgs;\n        if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n            cellSelectedArgs = {\n                data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                currentCell: selectedCell, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            };\n            var previousRowCellIndex = 'previousRowCellIndex';\n            cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n        }\n        else {\n            cellSelectedArgs = { data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n                selectedRowCellIndex: this.selectedRowCellIndexes };\n        }\n        this.onActionComplete(cellSelectedArgs, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell;\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var cncl = 'cancel';\n        var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];\n        var isHybrid = 'isHybrid';\n        var left = gObj.getFrozenLeftCount();\n        var movable = gObj.getMovableColumnsCount();\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.hideAutoFill();\n        var col = gObj.getColumnByIndex(cellIndexes[0].cellIndex);\n        var rowObj;\n        gridActionHandler(this.parent, function (tableName, rows) {\n            rowObj = rows[cellIndexes[0].rowIndex];\n        }, [\n            !col.getFreezeTableName() || col.getFreezeTableName() === 'frozen-left' ? gObj.getRowsObject() : [],\n            col.getFreezeTableName() === 'movable' ? gObj.getMovableRowsObject() : [],\n            col.getFreezeTableName() === 'frozen-right' ? gObj.getFrozenRightRowsObject() : []\n        ]);\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            var idx = col.getFreezeTableName() === 'movable' ? cellIndex.cellIndex - left\n                : col.getFreezeTableName() === 'frozen-right' ? cellIndex.cellIndex - (left + movable) : cellIndex.cellIndex;\n            foreignKeyData.push(rowObj.cells[idx].foreignKeyData);\n            var args = void 0;\n            if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                args = {\n                    cancel: false, data: selectedData, cellIndex: cellIndexes[0],\n                    isShiftPressed: this.isMultiShiftRequest,\n                    currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                    previousRowCell: this.prevECIdxs ?\n                        gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                };\n                var previousRowCellIndex = 'previousRowCellIndex';\n                args[previousRowCellIndex] = this.prevECIdxs;\n            }\n            else {\n                args = {\n                    cancel: false, data: selectedData, cellIndex: cellIndexes[0],\n                    isShiftPressed: this.isMultiShiftRequest, isCtrlPressed: this.isMultiCtrlRequest\n                };\n            }\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    if (selectedCellIdx.length === 0) {\n                        this.selectedRowCellIndexes.splice(index, 1);\n                    }\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                if (!isNullOrUndefined(args) && args[cncl] === true) {\n                    return;\n                }\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            if (!isUnSelected) {\n                var cellSelectedArgs = void 0;\n                if (!isBlazor() || this.parent.isJsComponent || this.parent[isHybrid]) {\n                    cellSelectedArgs = {\n                        data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                            undefined, selectedRowCellIndex: this.selectedRowCellIndexes\n                    };\n                    var previousRowCellIndex = 'previousRowCellIndex';\n                    cellSelectedArgs[previousRowCellIndex] = this.prevECIdxs;\n                }\n                else {\n                    cellSelectedArgs = { data: selectedData, cellIndex: cellIndexes[0], selectedRowCellIndex: this.selectedRowCellIndexes };\n                }\n                this.onActionComplete(cellSelectedArgs, events.cellSelected);\n                this.cellselected = true;\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var frzCols = this.parent.isFrozenGrid();\n        var col = this.parent.getColumnByIndex(index);\n        var cells = getCellsByTableName(this.parent, col, rowIndex);\n        if (cells) {\n            for (var m = 0; m < cells.length; m++) {\n                var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n                if (colIndex === index) {\n                    if (frzCols) {\n                        if (col.getFreezeTableName() === 'movable') {\n                            m += this.parent.getFrozenLeftCount();\n                        }\n                        else if (col.getFreezeTableName() === 'frozen-right') {\n                            m += (this.parent.getFrozenLeftColumnsCount() + this.parent.getMovableColumnsCount());\n                        }\n                    }\n                    return m;\n                }\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = this.getCurrentBatchRecordChanges();\n            var selectedTable = void 0;\n            var frzCols = gObj.isFrozenGrid();\n            this.hideAutoFill();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        var col = gObj.getColumnByIndex(rowCell[i].cellIndexes[j]);\n                        cells.push(getCellByColAndRowIndex(this.parent, col, rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                    else {\n                        if (rowObj.cells) {\n                            foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        }\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            if (this.bdrElement) {\n                this.showHideBorders('none');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            if (!this.isDragged && this.cellselected) {\n                this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n            }\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.isFrozenGrid()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                rows = gObj.addMovableRows(rows, gObj.getFrozenRightDataRows());\n            }\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.hideAutoFill();\n                this.selectRowsByRange(this.startDIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.startAFCell = this.startCell;\n                    this.endAFCell = parentsUntil(e.target, 'e-rowcell');\n                    this.selectLikeExcel(e, rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (e, rowIndex, cellIndex) {\n        if (!this.isAutoFillSel) {\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.drawBorders();\n        }\n        else { //Autofill\n            this.showAFBorders();\n            this.selectLikeAutoFill(e);\n        }\n    };\n    Selection.prototype.drawBorders = function () {\n        if (this.selectionSettings.cellSelectionMode === 'BoxWithBorder' && this.selectedRowCellIndexes.length && !this.parent.isEdit) {\n            this.parent.element.classList.add('e-enabledboxbdr');\n            if (!this.bdrElement) {\n                this.createBorders();\n            }\n            this.positionBorders();\n        }\n        else {\n            this.showHideBorders('none');\n        }\n    };\n    Selection.prototype.isLastCell = function (cell) {\n        var cells = [].slice.call(cell.parentElement.querySelectorAll('.e-rowcell:not(.e-hide)'));\n        return cells[cells.length - 1] === cell;\n    };\n    Selection.prototype.isLastRow = function (cell) {\n        var rows = [].slice.call(closest(cell, 'tbody').querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        return cell.parentElement === rows[rows.length - 1];\n    };\n    Selection.prototype.isFirstRow = function (cell) {\n        var rows = [].slice.call(closest(cell, 'tbody').querySelectorAll('.e-row:not(.e-hiddenrow)'));\n        return cell.parentElement === rows[0];\n    };\n    Selection.prototype.isFirstCell = function (cell) {\n        var cells = [].slice.call(cell.parentElement.querySelectorAll('.e-rowcell:not(.e-hide)'));\n        return cells[0] === cell;\n    };\n    Selection.prototype.setBorders = function (parentEle, border, bdrStr) {\n        var cells = [].slice.call(parentEle.querySelectorAll('.e-cellselectionbackground')).\n            filter(function (ele) { return ele.style.display === ''; });\n        if (cells.length) {\n            var isFrozen = this.parent.isFrozenGrid();\n            var start = cells[0];\n            var end = cells[cells.length - 1];\n            var stOff = start.getBoundingClientRect();\n            var endOff = end.getBoundingClientRect();\n            var parentOff = start.offsetParent.getBoundingClientRect();\n            var rowHeight = this.isLastRow(end) && (bdrStr === '1' || bdrStr === '2' || bdrStr === '5') ? 2 : 0;\n            var topOffSet = this.parent.frozenRows && (bdrStr === '1' || bdrStr === '2') &&\n                this.isFirstRow(start) ? 1.5 : 0;\n            var leftOffset = isFrozen && (bdrStr === '2' || bdrStr === '4') && this.isFirstCell(start) ? 1 : 0;\n            var rightOffset = ((this.parent.getFrozenMode() === 'Right' && (bdrStr === '1' || bdrStr === '3'))\n                || (this.parent.getFrozenMode() === 'Left-Right' && (bdrStr === '5' || bdrStr === '6')))\n                && this.isFirstCell(start) ? 1 : 0;\n            if (this.parent.enableRtl) {\n                border.style.right = parentOff.right - stOff.right - leftOffset + 'px';\n                border.style.width = stOff.right - endOff.left + leftOffset + 1 + 'px';\n            }\n            else {\n                border.style.left = stOff.left - parentOff.left - leftOffset - rightOffset + 'px';\n                border.style.width = endOff.right - stOff.left + leftOffset - rightOffset + 1 + 'px';\n            }\n            border.style.top = stOff.top - parentOff.top - topOffSet + 'px';\n            border.style.height = endOff.top - stOff.top > 0 ?\n                (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) - rowHeight + topOffSet + 'px' :\n                endOff.height + topOffSet - rowHeight + 1 + 'px';\n            this.selectDirection += bdrStr;\n        }\n        else {\n            border.style.display = 'none';\n        }\n    };\n    Selection.prototype.positionBorders = function () {\n        this.updateStartEndCells();\n        if (!this.startCell || !this.bdrElement || !this.selectedRowCellIndexes.length) {\n            return;\n        }\n        this.selectDirection = '';\n        this.showHideBorders('');\n        this.setBorders(this.parent.getContentTable(), this.bdrElement, '1');\n        if (this.parent.isFrozenGrid()) {\n            this.setBorders(this.parent.contentModule.getMovableContent(), this.mcBdrElement, '2');\n            if (this.parent.getFrozenMode() === 'Left-Right') {\n                this.setBorders(this.parent.contentModule.getFrozenRightContent(), this.frcBdrElement, '5');\n            }\n        }\n        if (this.parent.frozenRows) {\n            this.setBorders(this.parent.getHeaderTable(), this.fhBdrElement, '3');\n            if (this.parent.isFrozenGrid()) {\n                this.setBorders(this.parent.headerModule.getMovableHeader(), this.mhBdrElement, '4');\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    this.setBorders(this.parent.headerModule.getFrozenRightHeader(), this.frhBdrElement, '6');\n                }\n            }\n        }\n        this.applyBorders(this.selectDirection);\n    };\n    Selection.prototype.applyBothFrozenBorders = function (str) {\n        var rtl = this.parent.enableRtl;\n        switch (str.length) {\n            case 6:\n                {\n                    this.bdrElement.style.borderWidth = rtl ? '0 2px 2px 0' : '0 0 2px 2px';\n                    this.mcBdrElement.style.borderWidth = '0 0 2px 0';\n                    this.fhBdrElement.style.borderWidth = rtl ? '2px 2px 0 0' : '2px 0 0 2px';\n                    this.mhBdrElement.style.borderWidth = '2px 0 0 0';\n                    this.frcBdrElement.style.borderWidth = rtl ? '0 0 2px 2px' : '0 2px 2px 0';\n                    this.frhBdrElement.style.borderWidth = rtl ? '2px 0 0 2px' : '2px 2px 0 0';\n                }\n                break;\n            case 4:\n                {\n                    if (str.includes('1') && str.includes('2') && str.includes('3') && str.includes('4')) {\n                        this.bdrElement.style.borderWidth = rtl ? '0 2px 2px 0' : '0 0 2px 2px';\n                        this.mcBdrElement.style.borderWidth = rtl ? '0 0 2px 2px' : '0 2px 2px 0';\n                        this.fhBdrElement.style.borderWidth = rtl ? '2px 2px 0 0' : '2px 0 0 2px';\n                        this.mhBdrElement.style.borderWidth = rtl ? '2px 0 0 2px' : '2px 2px 0 0';\n                    }\n                    if (str.includes('2') && str.includes('4') && str.includes('5') && str.includes('6')) {\n                        this.mcBdrElement.style.borderWidth = rtl ? '0 2px 2px 0' : '0 0 2px 2px';\n                        this.mhBdrElement.style.borderWidth = rtl ? '2px 2px 0 0' : '2px 0 0 2px';\n                        this.frcBdrElement.style.borderWidth = rtl ? '0 0 2px 2px' : '0 2px 2px 0';\n                        this.frhBdrElement.style.borderWidth = rtl ? '2px 0 0 2px' : '2px 2px 0 0';\n                    }\n                }\n                break;\n            case 3:\n                {\n                    this.bdrElement.style.borderWidth = rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                    this.mcBdrElement.style.borderWidth = '2p 0 2px 0';\n                    this.frcBdrElement.style.borderWidth = rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                    if (this.parent.frozenRows) {\n                        this.fhBdrElement.style.borderWidth = rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                        this.mhBdrElement.style.borderWidth = '2px 0 2px 0';\n                        this.frcBdrElement.style.borderWidth = rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                    }\n                }\n                break;\n            case 2:\n                {\n                    if (str.includes('1')) {\n                        this.mcBdrElement.style.borderWidth = rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                        if (this.parent.frozenRows) {\n                            this.fhBdrElement.style.borderWidth = '2px 2px 0 2px';\n                        }\n                    }\n                    if (str.includes('2')) {\n                        this.bdrElement.style.borderWidth = rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                        this.frcBdrElement.style.borderWidth = rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                        if (this.parent.frozenRows) {\n                            this.mhBdrElement.style.borderWidth = '2px 2px 0 2px';\n                        }\n                    }\n                    if (str.includes('3')) {\n                        this.mhBdrElement.style.borderWidth = rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                        this.bdrElement.style.borderWidth = '0 2px 2px 2px';\n                    }\n                    if (str.includes('4')) {\n                        this.fhBdrElement.style.borderWidth = rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                        this.frhBdrElement.style.borderWidth = rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                        this.mcBdrElement.style.borderWidth = '0 2px 2px 2px';\n                    }\n                    if (str.includes('5')) {\n                        this.mcBdrElement.style.borderWidth = rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                        if (this.parent.frozenRows) {\n                            this.frhBdrElement.style.borderWidth = '2px 2px 0 2px';\n                        }\n                    }\n                    if (str.includes('6')) {\n                        this.mhBdrElement.style.borderWidth = rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                        this.frcBdrElement.style.borderWidth = '0 2px 2px 2px';\n                    }\n                }\n                break;\n            default:\n                this.bdrElement.style.borderWidth = '2px';\n                this.mcBdrElement.style.borderWidth = '2px';\n                this.frcBdrElement.style.borderWidth = '2px';\n                if (this.parent.frozenRows) {\n                    this.fhBdrElement.style.borderWidth = '2px';\n                    this.mhBdrElement.style.borderWidth = '2px';\n                    this.frhBdrElement.style.borderWidth = '2px';\n                }\n                break;\n        }\n    };\n    Selection.prototype.applyBorders = function (str) {\n        var rtl = this.parent.enableRtl;\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            this.applyBothFrozenBorders(str);\n        }\n        else {\n            switch (str.length) {\n                case 4:\n                    {\n                        if (this.parent.getFrozenMode() === 'Right') {\n                            this.bdrElement.style.borderWidth = rtl ? '0 0 2px 2px' : '0 2px 2px 0';\n                            this.mcBdrElement.style.borderWidth = rtl ? '0 2px 2px 0' : '0 0 2px 2px';\n                            this.fhBdrElement.style.borderWidth = rtl ? '2px 0 0 2px' : '2px 2px 0 0';\n                            this.mhBdrElement.style.borderWidth = rtl ? '2px 2px 0 0' : '2px 0 0 2px';\n                        }\n                        else {\n                            this.bdrElement.style.borderWidth = rtl ? '0 2px 2px 0' : '0 0 2px 2px';\n                            this.mcBdrElement.style.borderWidth = rtl ? '0 0 2px 2px' : '0 2px 2px 0';\n                            this.fhBdrElement.style.borderWidth = rtl ? '2px 2px 0 0' : '2px 0 0 2px';\n                            this.mhBdrElement.style.borderWidth = rtl ? '2px 0 0 2px' : '2px 2px 0 0';\n                        }\n                    }\n                    break;\n                case 2:\n                    {\n                        if (this.parent.getFrozenMode() === 'Right') {\n                            this.bdrElement.style.borderWidth = str.includes('2') ? rtl ? '2px 0 2px 2px'\n                                : '2px 2px 2px 0' : '0 2px 2px 2px';\n                            this.mcBdrElement.style.borderWidth = str.includes('1') ? rtl ? '2px 2px 2px 0'\n                                : '2px 0 2px 2px' : '0 2px 2px 2px';\n                            if (this.parent.frozenRows) {\n                                this.fhBdrElement.style.borderWidth = str.includes('1') ? '2px 2px 0 2px'\n                                    : rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                                this.mhBdrElement.style.borderWidth = str.includes('2') ? '2px 2px 0 2px'\n                                    : rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                            }\n                        }\n                        else {\n                            this.bdrElement.style.borderWidth = str.includes('2') ? rtl ? '2px 2px 2px 0'\n                                : '2px 0 2px 2px' : '0 2px 2px 2px';\n                            if (this.parent.isFrozenGrid()) {\n                                this.mcBdrElement.style.borderWidth = str.includes('1') ? rtl ? '2px 0 2px 2px'\n                                    : '2px 2px 2px 0' : '0 2px 2px 2px';\n                            }\n                            if (this.parent.frozenRows) {\n                                this.fhBdrElement.style.borderWidth = str.includes('1') ? '2px 2px 0 2px'\n                                    : rtl ? '2px 2px 2px 0' : '2px 0 2px 2px';\n                                if (this.parent.isFrozenGrid()) {\n                                    this.mhBdrElement.style.borderWidth = str.includes('2') ? '2px 2px 0 2px'\n                                        : rtl ? '2px 0 2px 2px' : '2px 2px 2px 0';\n                                }\n                            }\n                        }\n                    }\n                    break;\n                default:\n                    this.bdrElement.style.borderWidth = '2px';\n                    if (this.parent.isFrozenGrid()) {\n                        this.mcBdrElement.style.borderWidth = '2px';\n                    }\n                    if (this.parent.frozenRows) {\n                        this.fhBdrElement.style.borderWidth = '2px';\n                        if (this.parent.isFrozenGrid()) {\n                            this.mhBdrElement.style.borderWidth = '2px';\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    Selection.prototype.createBorders = function () {\n        if (!this.bdrElement) {\n            this.bdrElement = this.parent.getContentTable().parentElement.appendChild(createElement('div', {\n                className: 'e-xlsel', id: this.parent.element.id + '_bdr',\n                styles: 'width: 2px; border-width: 0;'\n            }));\n            if (this.parent.isFrozenGrid()) {\n                this.mcBdrElement = this.parent.contentModule.getMovableContent().appendChild(createElement('div', {\n                    className: 'e-xlsel', id: this.parent.element.id + '_mcbdr',\n                    styles: 'height: 2px; border-width: 0;'\n                }));\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    this.frcBdrElement = this.parent.contentModule.getFrozenRightContent().appendChild(createElement('div', {\n                        className: 'e-xlsel', id: this.parent.element.id + '_frcbdr',\n                        styles: 'height: 2px; border-width: 0;'\n                    }));\n                }\n            }\n            if (this.parent.frozenRows) {\n                this.fhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_fhbdr', styles: 'height: 2px;' }));\n            }\n            if (this.parent.frozenRows && this.parent.isFrozenGrid()) {\n                this.mhBdrElement = this.parent.headerModule.getMovableHeader().appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_mhbdr', styles: 'height: 2px;' }));\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    this.frhBdrElement = this.parent.headerModule.getFrozenRightHeader().appendChild(createElement('div', { className: 'e-xlsel', id: this.parent.element.id + '_frhbdr', styles: 'height: 2px;' }));\n                }\n            }\n        }\n    };\n    Selection.prototype.showHideBorders = function (display) {\n        if (this.bdrElement) {\n            this.bdrElement.style.display = display;\n            if (this.parent.isFrozenGrid()) {\n                this.mcBdrElement.style.display = display;\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    this.frcBdrElement.style.display = display;\n                }\n            }\n            if (this.parent.frozenRows) {\n                this.fhBdrElement.style.display = display;\n            }\n            if (this.parent.frozenRows && this.parent.isFrozenGrid()) {\n                this.mhBdrElement.style.display = display;\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    this.frhBdrElement.style.display = display;\n                }\n            }\n        }\n    };\n    Selection.prototype.drawAFBorders = function () {\n        if (!this.bdrAFBottom) {\n            this.createAFBorders();\n        }\n        this.positionAFBorders();\n    };\n    Selection.prototype.positionAFBorders = function () {\n        if (!this.startCell || !this.bdrAFLeft) {\n            return;\n        }\n        var stOff = this.startAFCell.getBoundingClientRect();\n        var endOff = this.endAFCell.getBoundingClientRect();\n        var top = endOff.top - stOff.top > 0 ? 1 : 0;\n        var firstCellTop = endOff.top - stOff.top >= 0 && (parentsUntil(this.startAFCell, 'e-movablecontent') ||\n            parentsUntil(this.startAFCell, 'e-frozencontent')) && this.isFirstRow(this.startAFCell) ? 1.5 : 0;\n        var firstCellLeft = (parentsUntil(this.startAFCell, 'e-movablecontent') ||\n            parentsUntil(this.startAFCell, 'e-movableheader')) && this.isFirstCell(this.startAFCell) ? 1 : 0;\n        var rowHeight = this.isLastRow(this.endAFCell) && (parentsUntil(this.endAFCell, 'e-movablecontent') ||\n            parentsUntil(this.endAFCell, 'e-frozencontent')) ? 2 : 0;\n        var parentOff = this.startAFCell.offsetParent.getBoundingClientRect();\n        var parentRect = this.parent.element.getBoundingClientRect();\n        var sTop = this.startAFCell.offsetParent.parentElement.scrollTop;\n        var sLeft = this.startAFCell.offsetParent.parentElement.scrollLeft;\n        var scrollTop = sTop - this.startAFCell.offsetTop;\n        var scrollLeft = sLeft - this.startAFCell.offsetLeft;\n        var totalHeight = this.parent.element.clientHeight;\n        var totalWidth = this.parent.element.clientWidth;\n        scrollTop = scrollTop > 0 ? Math.floor(scrollTop) - 1 : 0;\n        scrollLeft = scrollLeft > 0 ? scrollLeft : 0;\n        var left = stOff.left - parentRect.left;\n        if (!this.parent.enableRtl) {\n            this.bdrAFLeft.style.left = left - firstCellLeft + scrollLeft - 1 + 'px';\n            this.bdrAFRight.style.left = endOff.left - parentRect.left - 2 + endOff.width + 'px';\n            this.bdrAFRight.style.width = totalWidth <= parseInt(this.bdrAFRight.style.left, 10) ? '0px' : '2px';\n            this.bdrAFTop.style.left = left + scrollLeft - 0.5 + 'px';\n            this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10)\n                - firstCellLeft + 1 + 'px';\n            if (totalWidth <= (parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10))) {\n                var leftRemove = (parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10)) - totalWidth;\n                this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) - leftRemove + 'px';\n            }\n        }\n        else {\n            var scrolloffSet = (parentsUntil(this.startAFCell, 'e-movablecontent') ||\n                parentsUntil(this.startAFCell, 'e-movableheader')) ? stOff.right -\n                this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width -\n                parentRect.left : 0;\n            this.bdrAFLeft.style.right = parentRect.right - endOff.right - 2 + endOff.width + 'px';\n            this.bdrAFLeft.style.width = totalWidth <= parseInt(this.bdrAFLeft.style.right, 10) ? '0px' : '2px';\n            this.bdrAFRight.style.right = parentRect.right - stOff.right - firstCellLeft + scrolloffSet - 1 + 'px';\n            this.bdrAFTop.style.left = endOff.left - parentRect.left - 0.5 + 'px';\n            this.bdrAFTop.style.width = parseInt(this.bdrAFLeft.style.right, 10) - parseInt(this.bdrAFRight.style.right, 10)\n                - firstCellLeft + 1 + 'px';\n            if (parseInt(this.bdrAFTop.style.left, 10) < 0) {\n                this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) + 'px';\n                this.bdrAFTop.style.left = '0px';\n            }\n        }\n        this.bdrAFLeft.style.top = stOff.top - parentRect.top - firstCellTop + scrollTop + 'px';\n        this.bdrAFLeft.style.height = endOff.top - stOff.top > 0 ?\n            (endOff.top - parentOff.top + endOff.height + 1) - (stOff.top - parentOff.top) + firstCellTop - rowHeight - scrollTop + 'px' :\n            endOff.height + firstCellTop - rowHeight - scrollTop + 'px';\n        this.bdrAFRight.style.top = this.bdrAFLeft.style.top;\n        this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        this.bdrAFTop.style.top = this.bdrAFRight.style.top;\n        this.bdrAFBottom.style.left = this.bdrAFTop.style.left;\n        this.bdrAFBottom.style.top = parseFloat(this.bdrAFLeft.style.top) + parseFloat(this.bdrAFLeft.style.height) - top - 1 + 'px';\n        this.bdrAFBottom.style.width = totalHeight <= parseFloat(this.bdrAFBottom.style.top) ? '0px' : this.bdrAFTop.style.width;\n        if (totalHeight <= (parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10))) {\n            var topRemove = parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10) - totalHeight;\n            this.bdrAFLeft.style.height = parseInt(this.bdrAFLeft.style.height, 10) - topRemove + 'px';\n            this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + 'px';\n        }\n    };\n    Selection.prototype.createAFBorders = function () {\n        if (!this.bdrAFLeft) {\n            this.bdrAFLeft = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafleft', styles: 'width: 2px;' }));\n            this.bdrAFRight = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafright', styles: 'width: 2px;' }));\n            this.bdrAFBottom = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdrafbottom', styles: 'height: 2px;' }));\n            this.bdrAFTop = this.parent.element.appendChild(createElement('div', { className: 'e-xlselaf', id: this.parent.element.id + '_bdraftop', styles: 'height: 2px;' }));\n        }\n    };\n    Selection.prototype.showAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = '';\n            this.bdrAFRight.style.display = '';\n            this.bdrAFBottom.style.display = '';\n            this.bdrAFTop.style.display = '';\n        }\n    };\n    Selection.prototype.hideAFBorders = function () {\n        if (this.bdrAFLeft) {\n            this.bdrAFLeft.style.display = 'none';\n            this.bdrAFRight.style.display = 'none';\n            this.bdrAFBottom.style.display = 'none';\n            this.bdrAFTop.style.display = 'none';\n        }\n    };\n    Selection.prototype.updateValue = function (rIdx, cIdx, cell) {\n        var args = this.createBeforeAutoFill(rIdx, cIdx, cell);\n        if (!args.cancel) {\n            var col = this.parent.getColumnByIndex(cIdx);\n            if (this.parent.editModule && cell) {\n                if (col.type === 'number') {\n                    this.parent.editModule.updateCell(rIdx, col.field, parseInt(args.value, 10));\n                }\n                else {\n                    this.parent.editModule.updateCell(rIdx, col.field, args.value);\n                }\n            }\n        }\n    };\n    Selection.prototype.createBeforeAutoFill = function (rowIndex, colIndex, cell) {\n        var col = this.parent.getColumnByIndex(colIndex);\n        var args = {\n            column: col,\n            value: cell.innerText\n        };\n        this.parent.trigger(events.beforeAutoFill, args);\n        return args;\n    };\n    Selection.prototype.getAutoFillCells = function (rowIndex, startCellIdx) {\n        var cls = '.e-cellselectionbackground';\n        var cells = [].slice.call(this.parent.getDataRows()[rowIndex].querySelectorAll(cls));\n        if (this.parent.isFrozenGrid()) {\n            cells = cells.concat([].slice.call(this.parent.getMovableDataRows()[rowIndex].querySelectorAll(cls)));\n            if (this.parent.getFrozenMode() === 'Left-Right') {\n                cells = cells.concat([].slice.call(this.parent.getFrozenRightDataRows()[rowIndex].querySelectorAll(cls)));\n            }\n        }\n        return cells;\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Selection.prototype.selectLikeAutoFill = function (e, isApply) {\n        var startrowIdx = parseInt(parentsUntil(this.startAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var startCellIdx = parseInt(this.startAFCell.getAttribute('aria-colindex'), 10);\n        var endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n        var endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n        var rowLen = this.selectedRowCellIndexes.length - 1;\n        var colLen = this.selectedRowCellIndexes[0].cellIndexes.length - 1;\n        var col;\n        switch (true) { //direction         \n            case !isApply && this.endAFCell.classList.contains('e-cellselectionbackground') &&\n                !!parentsUntil(e.target, 'e-rowcell'):\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, startCellIdx);\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, startCellIdx + colLen);\n                this.drawAFBorders();\n                break;\n            case this.autoFillRLselection && startCellIdx + colLen < endCellIdx && //right\n                endCellIdx - startCellIdx - colLen + 1 > endrowIdx - startrowIdx - rowLen // right bottom\n                && endCellIdx - startCellIdx - colLen + 1 > startrowIdx - endrowIdx: //right top\n                this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, endCellIdx);\n                endrowIdx = parseInt(parentsUntil(this.endAFCell, 'e-row').getAttribute('aria-rowindex'), 10);\n                endCellIdx = parseInt(this.endAFCell.getAttribute('aria-colindex'), 10);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var cellIdx = parseInt(this.endCell.getAttribute('aria-colindex'), 10);\n                    for (var i = startrowIdx; i <= endrowIdx; i++) {\n                        var cells = this.getAutoFillCells(i, startCellIdx);\n                        var c = 0;\n                        for (var j = cellIdx + 1; j <= endCellIdx; j++) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: this.startCellIndex }, { rowIndex: endrowIdx, cellIndex: endCellIdx });\n                }\n                break;\n            case this.autoFillRLselection && startCellIdx > endCellIdx && // left\n                startCellIdx - endCellIdx + 1 > endrowIdx - startrowIdx - rowLen && //left top\n                startCellIdx - endCellIdx + 1 > startrowIdx - endrowIdx: // left bottom\n                this.startAFCell = this.parent.getCellFromIndex(startrowIdx, endCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    for (var i = startrowIdx; i <= startrowIdx + rowLen; i++) {\n                        var cells = this.getAutoFillCells(i, startCellIdx);\n                        cells.reverse();\n                        var c = 0;\n                        for (var j = this.startCellIndex - 1; j >= endCellIdx; j--) {\n                            if (c > colLen) {\n                                c = 0;\n                            }\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: endCellIdx }, { rowIndex: startrowIdx + rowLen, cellIndex: this.startCellIndex + colLen });\n                }\n                break;\n            case startrowIdx > endrowIdx: //up\n                this.startAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx);\n                this.endAFCell = this.endCell;\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = trIdx;\n                    for (var i = startrowIdx - 1; i >= endrowIdx; i--) {\n                        if (r === this.startIndex - 1) {\n                            r = trIdx;\n                        }\n                        var cells = this.getAutoFillCells(r, startCellIdx);\n                        var c = 0;\n                        r--;\n                        for (var j = this.startCellIndex; j <= this.startCellIndex + colLen; j++) {\n                            this.updateValue(i, j, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: endrowIdx, cellIndex: startCellIdx + colLen }, { rowIndex: startrowIdx + rowLen, cellIndex: startCellIdx });\n                }\n                break;\n            default: //down\n                this.endAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx + colLen);\n                if (!isApply) {\n                    this.drawAFBorders();\n                }\n                else {\n                    var trIdx = parseInt(this.endCell.parentElement.getAttribute('aria-rowindex'), 10);\n                    var r = this.startIndex;\n                    for (var i = trIdx + 1; i <= endrowIdx; i++) {\n                        if (r === trIdx + 1) {\n                            r = this.startIndex;\n                        }\n                        var cells = this.getAutoFillCells(r, startCellIdx);\n                        r++;\n                        var c = 0;\n                        for (var m = this.startCellIndex; m <= this.startCellIndex + colLen; m++) {\n                            this.updateValue(i, m, cells[c]);\n                            c++;\n                        }\n                    }\n                    this.selectCellsByRange({ rowIndex: trIdx - rowLen, cellIndex: startCellIdx }, { rowIndex: endrowIdx, cellIndex: startCellIdx + colLen });\n                }\n                break;\n        }\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        if (this.isDragged && this.selectedRowCellIndexes.length === 1 && this.selectedRowCellIndexes[0].cellIndexes.length === 1) {\n            this.mUPTarget = parentsUntil(e.target, 'e-rowcell');\n        }\n        else {\n            this.mUPTarget = null;\n        }\n        if (this.isDragged && !this.isAutoFillSel && this.selectionSettings.mode === 'Cell') {\n            var target = e.target;\n            var rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n            var cellIndex = parseInt(target.getAttribute('aria-colindex'), 10);\n            this.isDragged = false;\n            this.clearCellSelection();\n            this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isDragged = false;\n        this.updateAutoFillPosition();\n        if (this.isAutoFillSel) {\n            var lastCell = parentsUntil(e.target, 'e-rowcell');\n            this.endAFCell = lastCell ? lastCell : this.endCell === this.endAFCell ? this.startAFCell : this.endAFCell;\n            this.startAFCell = this.startCell;\n            this.updateStartCellsIndex();\n            this.selectLikeAutoFill(e, true);\n            this.updateAutoFillPosition();\n            this.hideAFBorders();\n            this.positionBorders();\n            this.isAutoFillSel = false;\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        if (this.parent.frozenRows) {\n            EventHandler.remove(this.parent.getHeaderContent(), 'mousemove', this.mouseMoveHandler);\n        }\n        EventHandler.remove(document, 'mouseup', this.mouseUpHandler);\n    };\n    Selection.prototype.hideAutoFill = function () {\n        if (this.autofill) {\n            this.autofill.style.display = 'none';\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.updateAutoFillPosition = function () {\n        if (this.parent.enableAutoFill && !this.parent.isEdit &&\n            this.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()\n            && this.selectedRowCellIndexes.length) {\n            var index = parseInt(this.target.getAttribute('aria-colindex'), 10);\n            var rindex = parseInt(this.target.getAttribute('index'), 10);\n            var rowIndex = this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex;\n            var cells = this.getAutoFillCells(rowIndex, index).filter(function (ele) { return ele.style.display === ''; });\n            var col = this.parent.getColumnByIndex(index);\n            var isFrozenCol = col.getFreezeTableName() === 'movable';\n            var isFrozenRow = rindex < this.parent.frozenRows;\n            var isFrozenRight = this.parent.getFrozenMode() === 'Left-Right' && col.getFreezeTableName() === 'frozen-right';\n            if (!select('#' + this.parent.element.id + '_autofill', parentsUntil(this.target, 'e-table'))) {\n                if (select('#' + this.parent.element.id + '_autofill', this.parent.element)) {\n                    select('#' + this.parent.element.id + '_autofill', this.parent.element).remove();\n                }\n                this.autofill = createElement('div', { className: 'e-autofill', id: this.parent.element.id + '_autofill' });\n                this.autofill.style.display = 'none';\n                !isFrozenRow ? !isFrozenCol ? this.parent.getContentTable().parentElement.appendChild(this.autofill) :\n                    this.parent.contentModule.getMovableContent().appendChild(this.autofill) :\n                    !isFrozenCol ? this.parent.getHeaderTable().parentElement.appendChild(this.autofill) :\n                        this.parent.headerModule.getMovableHeader().appendChild(this.autofill);\n                if (isFrozenRight) {\n                    isFrozenRow ? this.parent.getFrozenRightHeader().appendChild(this.autofill)\n                        : this.parent.getFrozenRightContent().appendChild(this.autofill);\n                }\n            }\n            var cell = cells[cells.length - 1];\n            if (cell && cell.offsetParent) {\n                var clientRect = cell.getBoundingClientRect();\n                var parentOff = cell.offsetParent.getBoundingClientRect();\n                var colWidth = this.isLastCell(cell) ? 4 : 0;\n                var rowHeight = this.isLastRow(cell) ? 3 : 0;\n                if (!this.parent.enableRtl) {\n                    this.autofill.style.left = clientRect.left - parentOff.left + clientRect.width - 4 - colWidth + 'px';\n                }\n                else {\n                    this.autofill.style.right = parentOff.right - clientRect.right + clientRect.width - 4 - colWidth + 'px';\n                }\n                this.autofill.style.top = clientRect.top - parentOff.top + clientRect.height - 5 - rowHeight + 'px';\n            }\n            this.autofill.style.display = '';\n        }\n        else {\n            this.hideAutoFill();\n        }\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        this.mouseButton = e.button;\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id || parentsUntil(target, 'e-headercontent') && !this.parent.frozenRows ||\n            parentsUntil(target, 'e-editedbatchcell') || parentsUntil(target, 'e-editedrow')) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (parentsUntil(target, 'e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode.indexOf('Box') > -1 && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop && !gObj.isEdit && !this.parent.selectionSettings.checkboxOnly) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                this.enableDrag(e, true);\n            }\n        }\n        this.updateStartEndCells();\n        if (target.classList.contains('e-autofill') || target.classList.contains('e-xlsel')) {\n            this.isCellDrag = true;\n            this.isAutoFillSel = true;\n            this.enableDrag(e);\n        }\n    };\n    Selection.prototype.updateStartEndCells = function () {\n        var cells = [].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground'));\n        this.startCell = cells[0];\n        this.endCell = cells[cells.length - 1];\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.updateStartCellsIndex = function () {\n        if (this.startCell) {\n            this.startIndex = parseInt(this.startCell.parentElement.getAttribute('aria-rowindex'), 10);\n            this.startCellIndex = parseInt(parentsUntil(this.startCell, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n    };\n    Selection.prototype.enableDrag = function (e, isUpdate) {\n        var gObj = this.parent;\n        if (isUpdate) {\n            var tr = closest(e.target, 'tr');\n            this.startDIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n            this.startDCellIndex = parseInt(parentsUntil(e.target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n        }\n        document.body.classList.add('e-disableuserselect');\n        var gBRect = gObj.element.getBoundingClientRect();\n        var postion = getPosition(e);\n        this.x = postion.x - gBRect.left;\n        this.y = postion.y - gBRect.top;\n        EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n        if (this.parent.frozenRows) {\n            EventHandler.add(gObj.getHeaderContent(), 'mousemove', this.mouseMoveHandler, this);\n        }\n        EventHandler.add(document, 'mouseup', this.mouseUpHandler, this);\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.requestType === 'infiniteScroll';\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection && !isInfiniteScroll) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.wireEvents = function () {\n        this.isMacOS = navigator.userAgent.indexOf('Mac OS') !== -1;\n        if (this.isMacOS) {\n            EventHandler.add(this.parent.element, 'keydown', this.keyDownHandler, this);\n            EventHandler.add(this.parent.element, 'keyup', this.keyUpHandler, this);\n        }\n    };\n    Selection.prototype.unWireEvents = function () {\n        if (this.isMacOS) {\n            EventHandler.remove(this.parent.element, 'keydown', this.keyDownHandler);\n            EventHandler.remove(this.parent.element, 'keyup', this.keyUpHandler);\n        }\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n        EventHandler.add(this.parent.getHeaderContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n                this.prevCIdxs = undefined;\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n                this.prevRowIndex = undefined;\n            }\n            if (this.selectedColumnsIndexes.length > 1) {\n                this.clearColumnSelection();\n                this.prevColIndex = undefined;\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevColIndex = undefined;\n        }\n        this.isPersisted = true;\n        this.checkBoxSelectionChanged();\n        this.isPersisted = false;\n        this.initPerisistSelection();\n        var checkboxColumn = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length) {\n            gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === 'ResetOnRowClick');\n        }\n        this.drawBorders();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function (e) {\n        var isFrozen = this.parent.isFrozenGrid();\n        var isLeftRightFrozen = this.parent.getFrozenMode() === 'Left-Right';\n        if (!isFrozen || (isFrozen && (!isLeftRightFrozen && !e.args.isFrozen)\n            || (isLeftRightFrozen && e.args.renderFrozenRightContent))) {\n            this.parent.off(events.contentReady, this.initialEnd);\n            this.selectRow(this.parent.selectedRowIndex);\n        }\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection && !this.isPersisted) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            if (!query.params) {\n                query.params = this.parent.query.params;\n            }\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        if (!this.parent.getDataModule().isRemote() && !isBlazor()) {\n            if (state) {\n                if (this.parent.groupSettings.columns.length) {\n                    for (var _i = 0, _a = this.getData().records; _i < _a.length; _i++) {\n                        var data = _a[_i];\n                        this.selectedRowState[data[this.primaryKey]] = true;\n                    }\n                }\n                else {\n                    for (var _b = 0, _c = this.getData(); _b < _c.length; _b++) {\n                        var data = _c[_b];\n                        this.selectedRowState[data[this.primaryKey]] = true;\n                    }\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (this.parent.isCheckBoxSelection && this.parent.isFrozenGrid()) {\n            var mtbody = this.parent.getMovableContentTbody();\n            if (mtbody.querySelector('.e-checkselect')) {\n                rows = this.parent.getMovableRows();\n            }\n            if (this.parent.getFrozenMode() === 'Left-Right') {\n                var frtbody = this.parent.getFrozenRightContentTbody();\n                if (frtbody.querySelector('.e-checkselect')) {\n                    rows = this.parent.getFrozenRightRows();\n                }\n            }\n        }\n        this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n        if (this.parent.allowPaging) {\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (rows !== null && rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data ? rowObj.data[this.primaryKey] : null : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' &&\n                    this.totalRecordsCount === Object.keys(this.selectedRowState).length && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            var records = [];\n            if (!isBlazor()) {\n                records = e.data;\n            }\n            else {\n                records = this.getSelectedRecords();\n            }\n            var data = records.slice();\n            for (var i = 0; i < data.length; i++) {\n                if (!isNullOrUndefined(data[i][this.primaryKey])) {\n                    this.updatePersistDelete(data[i][this.primaryKey]);\n                }\n            }\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        if (e.requestType === 'paging') {\n            this.prevRowIndex = undefined;\n            this.prevCIdxs = undefined;\n            this.prevECIdxs = undefined;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            if (this.selectedRecords.length) {\n                this.isPrevRowSelection = true;\n            }\n            this.refreshPersistSelection();\n        }\n        if (this.parent.enableVirtualization) {\n            this.setCheckAllState();\n        }\n        if (this.parent.isCheckBoxSelection && !this.initialRowSelection) {\n            var totalRecords = this.parent.getRowsObject();\n            var indexes = [];\n            for (var i = 0; i < totalRecords.length; i++) {\n                if (totalRecords[i].isSelected) {\n                    indexes.push(i);\n                }\n            }\n            if (indexes.length) {\n                this.selectRows(indexes);\n            }\n            this.initialRowSelection = true;\n        }\n    };\n    Selection.prototype.updatePersistSelectedData = function (checkState) {\n        if (this.parent.isPersistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = (!this.parent.getDataModule().isRemote() && !isBlazor()) ?\n                    this.parent.groupSettings.columns.length ? this.getData().records.slice() :\n                        this.getData().slice() : this.persistSelectedData;\n            }\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.getCurrentBatchRecordChanges().length) {\n            this.parent.checkAllRows = 'Check';\n            this.updatePersistSelectedData(checkState);\n            if (isBlazor() && this.parent.enableVirtualization &&\n                !isNullOrUndefined(this.parent.contentModule.currentInfo.endIndex)) {\n                this.selectRowsByRange(this.parent.contentModule.currentInfo.startIndex, this.parent.contentModule.currentInfo.endIndex);\n            }\n            else {\n                this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1));\n            }\n        }\n        else {\n            this.parent.checkAllRows = 'Uncheck';\n            this.updatePersistSelectedData(checkState);\n            this.clearSelection();\n        }\n        this.chkAllCollec = [];\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n            }\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        this.isHeaderCheckboxClicked = true;\n        if (stateStr === 'Intermediate') {\n            state = this.getCurrentBatchRecordChanges().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        if (this.parent.isPersistSelection && this.parent.allowPaging) {\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n        this.checkSelectAllAction(!state);\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization) {\n            var interopAdaptor = 'interopAdaptor';\n            var invokeMethodAsync = 'invokeMethodAsync';\n            this.parent[interopAdaptor][invokeMethodAsync]('MaintainSelection', !state, 'checkbox', null);\n            this.checkBoxState = !state;\n            if (!state) {\n                var values = 'values';\n                var vgenerator = 'vgenerator';\n                var rowCache = this.parent.contentModule[vgenerator].rowCache;\n                Object[values](rowCache).forEach(function (x) { return x.isSelected = true; });\n                for (var i = 0; i < Object.keys(rowCache).length; i++) {\n                    if (this.parent.selectionModule.selectedRowIndexes.indexOf(Number(Object.keys(rowCache)[i])) === -1) {\n                        this.parent.selectionModule.selectedRowIndexes.push(Number(Object.keys(rowCache)[i]));\n                    }\n                }\n            }\n        }\n        this.target = null;\n        if (this.getCurrentBatchRecordChanges().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        var gObj = this.parent;\n        this.isMultiCtrlRequest = true;\n        var rIndex = 0;\n        this.isHeaderCheckboxClicked = false;\n        if (isGroupAdaptive(gObj)) {\n            var uid = target.parentElement.getAttribute('data-uid');\n            rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n        }\n        else {\n            rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        }\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0 &&\n            this.parent.editSettings.newRowPosition === 'Top') {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && !this.parent.getDataModule().isRemote()\n            && !(isBlazor() && this.parent.isServerRendered)) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                var dataLength = this.getData().length;\n                for (var data = 0; data < dataLength; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            var checkToSelectAll = void 0;\n            var isServerRenderedVirtualization = isBlazor() && this.parent.isServerRendered && this.parent.enableVirtualization;\n            if (isServerRenderedVirtualization) {\n                var values = 'values';\n                var vgenerator = 'vgenerator';\n                checkToSelectAll = !Object[values](this.parent.contentModule[vgenerator].rowCache).\n                    filter(function (x) { return x.isSelected === undefined || x.isSelected === false; }).length &&\n                    Object[values](this.parent.contentModule[vgenerator].rowCache).\n                        filter(function (x) { return x.isSelected; }).length === this.selectedRowIndexes.length;\n            }\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection && !(isServerRenderedVirtualization)) {\n                checkedLen = this.selectedRowIndexes.length;\n                this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;\n            }\n            var input = this.getCheckAllBox();\n            if (input) {\n                var spanEle = input.nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                setChecked(input, false);\n                input.indeterminate = false;\n                if (checkToSelectAll || checkedLen === this.totalRecordsCount && this.totalRecordsCount\n                    || ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n                        && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()\n                        && !(isBlazor() && this.parent.isServerRendered)\n                        && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    setChecked(input, true);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (isServerRenderedVirtualization && !this.selectedRowIndexes.length ||\n                    checkedLen === 0 && !isServerRenderedVirtualization || this.getCurrentBatchRecordChanges().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                    input.indeterminate = true;\n                }\n                if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.keyDownHandler = function (e) {\n        // Below are keyCode for command key in MAC OS. Safari/Chrome(91-Left command, 93-Right Command), Opera(17), FireFox(224)\n        if ((((Browser.info.name === 'chrome') || (Browser.info.name === 'safari')) && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = true;\n        }\n    };\n    Selection.prototype.keyUpHandler = function (e) {\n        if ((((Browser.info.name === 'chrome') || (Browser.info.name === 'safari')) && (e.keyCode === 91 || e.keyCode === 93)) ||\n            (Browser.info.name === 'opera' && e.keyCode === 17) || (Browser.info.name === 'mozilla' && e.keyCode === 224)) {\n            this.cmdKeyPressed = false;\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.actualTarget = target;\n        if (parentsUntil(target, 'e-row') || parentsUntil(target, 'e-headerchkcelldiv') ||\n            (this.selectionSettings.allowColumnSelection && target.classList.contains('e-headercell'))) {\n            this.isInteracted = true;\n        }\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch ||\n            (this.isMacOS && this.cmdKeyPressed);\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        this.checkSelectAllClicked = checkWrap && checkWrap.querySelectorAll('.e-checkselectall') ||\n            (this.selectionSettings.persistSelection && parentsUntil(target, 'e-row')) ? true : false;\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        this.drawBorders();\n        this.updateAutoFillPosition();\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                }\n            }\n            else {\n                var gObj = this.parent;\n                var rIndex = 0;\n                if (isGroupAdaptive(gObj)) {\n                    var uid = target.parentElement.getAttribute('data-uid');\n                    rIndex = gObj.getRows().map(function (m) { return m.getAttribute('data-uid'); }).indexOf(uid);\n                }\n                else {\n                    rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                }\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                if (!this.mUPTarget || !this.mUPTarget.isEqualNode(target)) {\n                    this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                }\n                this.parent.hoverFrozenRows(e);\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        else if (e.target.classList.contains('e-headercell') &&\n            !e.target.classList.contains('e-stackedheadercell')) {\n            var uid = e.target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            this.headerSelectionHandler(this.parent.getColumnIndexByUid(uid));\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        if (isNullOrUndefined(closest(e.target, '.e-unboundcell'))) {\n            this.preventFocus = false;\n        }\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        if (!this.selectionSettings.enableSimpleMultiRowSelection) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n                (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                    || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n        }\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, this.selectionSettings.enableToggle);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, this.selectionSettings.enableToggle);\n            if (this.selectedRowCellIndexes.length) {\n                this.updateAutoFillPosition();\n            }\n            this.drawBorders();\n        }\n        else if (this.isMultiShiftRequest) {\n            if (this.parent.isCheckBoxSelection || (!this.parent.isCheckBoxSelection &&\n                !closest(this.target, '.e-rowcell').classList.contains('e-gridchkbox'))) {\n                this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            }\n            else {\n                this.addRowsToSelection([rowIndex]);\n            }\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n            this.updateAutoFillPosition();\n            this.drawBorders();\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            if (isBlazor() && this.parent.enableVirtualization && this.parent.isServerRendered) {\n                var rowIndexes = this.parent.getSelectedRowIndexes();\n                var interopAdaptor = 'interopAdaptor';\n                var invokeMethodAsync = 'invokeMethodAsync';\n                this.parent[interopAdaptor][invokeMethodAsync]('MaintainSelection', true, 'normal', rowIndexes);\n            }\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n            this.showHideBorders('none');\n        }\n        this.isDragged = false;\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.isFrozenGrid() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump &&\n            !this.selectionSettings.allowColumnSelection) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space')\n            && !(e.element.classList.contains('e-detailrowexpand') || e.element.classList.contains('e-detailrowcollapse'));\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n        }\n        if (this.parent.isFrozenGrid()) {\n            var cIdx = Number(e.element.getAttribute('aria-colindex'));\n            var selectedIndexes = this.parent.getSelectedRowCellIndexes();\n            if (selectedIndexes.length && prev.cellIndex === 0) {\n                prev.cellIndex = selectedIndexes[selectedIndexes.length - 1].cellIndexes[0];\n            }\n            prev.cellIndex = !isNullOrUndefined(prev.cellIndex) ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n            cellIndex = cIdx;\n        }\n        if ((headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 &&\n            e.keyArgs.action !== 'space' && rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) &&\n            !this.selectionSettings.allowColumnSelection) {\n            return;\n        }\n        this.preventFocus = true;\n        var columnIndex = this.getKeyColIndex(e);\n        if (this.needColumnSelection) {\n            cellIndex = columnIndex;\n        }\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.target = e.element;\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n            case 'tab':\n                if (this.parent.editSettings.allowNextRowEdit) {\n                    this.selectRow(rowIndex);\n                }\n                break;\n        }\n        this.needColumnSelection = false;\n        this.preventFocus = false;\n        this.positionBorders();\n        this.updateAutoFillPosition();\n    };\n    Selection.prototype.getKeyColIndex = function (e) {\n        var uid;\n        var index = null;\n        var stackedHeader = e.element.querySelector('.e-stackedheadercelldiv');\n        if (this.selectionSettings.allowColumnSelection && parentsUntil(e.element, 'e-columnheader')) {\n            this.needColumnSelection = e.container.isHeader ? true : false;\n            if (stackedHeader) {\n                if (e.keyArgs.action === 'rightArrow' || e.keyArgs.action === 'leftArrow') {\n                    return index;\n                }\n                uid = stackedHeader.getAttribute('e-mappinguid');\n                var innerColumn = this.getstackedColumns(this.parent.getColumnByUid(uid).columns);\n                var lastIndex = this.parent.getColumnIndexByUid(innerColumn[innerColumn.length - 1].uid);\n                var firstIndex = this.parent.getColumnIndexByUid(innerColumn[0].uid);\n                index = this.prevColIndex >= lastIndex ? firstIndex : lastIndex;\n            }\n            else {\n                index = this.parent.getColumnIndexByUid(e.element\n                    .querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            }\n        }\n        return index;\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.getCurrentBatchRecordChanges().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && !this.selectionSettings.persistSelection) {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {\n            this.selectColumn(cellIndex);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {\n            this.selectColumn(cellIndex);\n        }\n        else if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {\n            this.selectColumnsByRange(this.prevColIndex, cellIndex);\n        }\n        else {\n            this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.getstackedColumns = function (column) {\n        var innerColumnIndexes = [];\n        for (var i = 0, len = column.length; i < len; i++) {\n            if (column[i].columns) {\n                this.getstackedColumns(column[i].columns);\n            }\n            else {\n                innerColumnIndexes.push(column[i]);\n            }\n        }\n        return innerColumnIndexes;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var detailIndentCell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            var dragdropIndentCell = row.querySelector('.e-rowdragdrop');\n            if (detailIndentCell) {\n                cells.push(detailIndentCell);\n            }\n            if (dragdropIndentCell) {\n                cells.push(dragdropIndentCell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    /**\n     * Select the column by passing start column index\n     * @param  {number} startIndex\n     */\n    Selection.prototype.selectColumn = function (index) {\n        var gObj = this.parent;\n        if (isNullOrUndefined(gObj.getColumns()[index])) {\n            return;\n        }\n        var column = gObj.getColumnByIndex(index);\n        var selectedCol = gObj.getColumnHeaderByUid(column.uid);\n        var isColSelected = selectedCol.classList.contains('e-columnselection');\n        if ((!gObj.selectionSettings.allowColumnSelection)) {\n            return;\n        }\n        var isMultiColumns = this.selectedColumnsIndexes.length > 1 &&\n            this.selectedColumnsIndexes.indexOf(index) > -1;\n        this.clearColDependency();\n        if (!isColSelected || !this.selectionSettings.enableToggle || isMultiColumns) {\n            var args = {\n                columnIndex: index, headerCell: selectedCol,\n                column: column,\n                cancel: false, target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n            this.onActionBegin(args, events.columnSelecting);\n            if (args.cancel) {\n                this.disableInteracted();\n                return;\n            }\n            if (!(gObj.selectionSettings.enableToggle && index === this.prevColIndex && isColSelected) || isMultiColumns) {\n                this.updateColSelection(selectedCol, index);\n            }\n            var selectedArgs = {\n                columnIndex: index, headerCell: selectedCol,\n                column: column,\n                target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex\n            };\n            this.onActionComplete(selectedArgs, events.columnSelected);\n        }\n        this.updateColProps(index);\n    };\n    /**\n     * Select the columns by passing start and end column index\n     * @param  {number} startIndex\n     * @param  {number} endIndex\n     */\n    Selection.prototype.selectColumnsByRange = function (startIndex, endIndex) {\n        var gObj = this.parent;\n        if (isNullOrUndefined(gObj.getColumns()[startIndex])) {\n            return;\n        }\n        var indexes = [];\n        if (gObj.selectionSettings.type === 'Single' || isNullOrUndefined(endIndex)) {\n            indexes[0] = startIndex;\n        }\n        else {\n            var min = startIndex < endIndex;\n            for (var i = startIndex; min ? i <= endIndex : i >= endIndex; min ? i++ : i--) {\n                indexes.push(i);\n            }\n        }\n        this.selectColumns(indexes);\n    };\n    /**\n     * Select the columns by passing column indexes\n     * @param  {number[]} columnIndexes\n     */\n    Selection.prototype.selectColumns = function (columnIndexes) {\n        var gObj = this.parent;\n        var selectedCol = this.getselectedCols();\n        if (gObj.selectionSettings.type === 'Single') {\n            columnIndexes = [columnIndexes[0]];\n        }\n        if (!gObj.selectionSettings.allowColumnSelection) {\n            return;\n        }\n        this.clearColDependency();\n        var selectingArgs = {\n            columnIndex: columnIndexes[0], headerCell: selectedCol,\n            columnIndexes: columnIndexes,\n            column: gObj.getColumnByIndex(columnIndexes[0]),\n            cancel: false, target: this.actualTarget,\n            isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n        };\n        this.onActionBegin(selectingArgs, events.columnSelecting);\n        if (selectingArgs.cancel) {\n            this.disableInteracted();\n            return;\n        }\n        for (var i = 0, len = columnIndexes.length; i < len; i++) {\n            this.updateColSelection(gObj.getColumnHeaderByUid(gObj.getColumnByIndex(columnIndexes[i]).uid), columnIndexes[i]);\n        }\n        selectedCol = this.getselectedCols();\n        var selectedArgs = {\n            columnIndex: columnIndexes[0], headerCell: selectedCol,\n            columnIndexes: columnIndexes,\n            column: gObj.getColumnByIndex(columnIndexes[0]),\n            target: this.actualTarget,\n            isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex\n        };\n        this.onActionComplete(selectedArgs, events.columnSelected);\n        this.updateColProps(columnIndexes[0]);\n    };\n    /**\n     * Select the column with existing column by passing column index\n     * @param  {number} startIndex\n     */\n    Selection.prototype.selectColumnWithExisting = function (startIndex) {\n        var gObj = this.parent;\n        if (isNullOrUndefined(gObj.getColumns()[startIndex])) {\n            return;\n        }\n        var frzCols = gObj.getFrozenColumns();\n        var isFreeze = frzCols && startIndex >= frzCols;\n        var newCol = gObj.getColumnHeaderByUid(gObj.getColumnByIndex(startIndex).uid);\n        var selectedCol = this.getselectedCols();\n        if (gObj.selectionSettings.type === 'Single') {\n            this.clearColDependency();\n        }\n        if (!gObj.selectionSettings.allowColumnSelection) {\n            return;\n        }\n        var rows = !isFreeze ? gObj.getDataRows() : gObj.getMovableRows();\n        if (this.selectedColumnsIndexes.indexOf(startIndex) > -1) {\n            this.clearColumnSelection(startIndex);\n        }\n        else {\n            var selectingArgs = {\n                columnIndex: startIndex, headerCell: selectedCol,\n                columnIndexes: this.selectedColumnsIndexes,\n                column: gObj.getColumnByIndex(startIndex),\n                cancel: false, target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest\n            };\n            this.onActionBegin(selectingArgs, events.columnSelecting);\n            if (selectingArgs.cancel) {\n                this.disableInteracted();\n                return;\n            }\n            this.updateColSelection(newCol, startIndex);\n            selectedCol = this.getselectedCols();\n            var selectedArgs = {\n                columnIndex: startIndex, headerCell: selectedCol,\n                column: gObj.getColumnByIndex(startIndex),\n                columnIndexes: this.selectedColumnsIndexes,\n                target: this.actualTarget,\n                isInteracted: this.isInteracted, previousColumnIndex: this.prevColIndex\n            };\n            this.onActionComplete(selectedArgs, events.columnSelected);\n        }\n        this.updateColProps(startIndex);\n    };\n    /**\n     * Clear the column selection\n     */\n    Selection.prototype.clearColumnSelection = function (clearIndex) {\n        if (this.isColumnSelected) {\n            var gObj = this.parent;\n            if (!isNullOrUndefined(clearIndex) && this.selectedColumnsIndexes.indexOf(clearIndex) === -1) {\n                return;\n            }\n            var index = !isNullOrUndefined(clearIndex) ? clearIndex :\n                this.selectedColumnsIndexes[this.selectedColumnsIndexes.length - 1];\n            var col = gObj.getColumnByIndex(index);\n            var selectedCol = void 0;\n            var column = gObj.getColumnByIndex(index);\n            if (col.getFreezeTableName() === 'frozen-right') {\n                selectedCol = gObj.getFrozenRightColumnHeaderByIndex(index);\n            }\n            else if (col.getFreezeTableName() === 'movable') {\n                selectedCol = gObj.getMovableColumnHeaderByIndex(index);\n            }\n            else {\n                selectedCol = gObj.getColumnHeaderByUid(column.uid);\n            }\n            var deselectedArgs = {\n                columnIndex: index, headerCell: selectedCol,\n                columnIndexes: this.selectedColumnsIndexes,\n                column: column,\n                cancel: false, target: this.actualTarget,\n                isInteracted: this.isInteracted\n            };\n            var isCanceled = this.columnDeselect(deselectedArgs, events.columnDeselecting);\n            if (isCanceled) {\n                this.disableInteracted();\n                return;\n            }\n            var selectedHeader = !isNullOrUndefined(clearIndex) ? [selectedCol] :\n                [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnselection'));\n            var selectedCells = this.getSelectedColumnCells(clearIndex);\n            for (var i = 0, len = selectedHeader.length; i < len; i++) {\n                addRemoveActiveClasses([selectedHeader[i]], false, 'e-columnselection');\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                addRemoveActiveClasses([selectedCells[i]], false, 'e-columnselection');\n            }\n            if (!isNullOrUndefined(clearIndex)) {\n                this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(clearIndex), 1);\n                this.parent.getColumns()[clearIndex].isSelected = false;\n            }\n            else {\n                this.columnDeselect(deselectedArgs, events.columnDeselected);\n                this.selectedColumnsIndexes = [];\n                this.isColumnSelected = false;\n                this.parent.getColumns().filter(function (col) { return col.isSelected = false; });\n            }\n        }\n    };\n    Selection.prototype.getselectedCols = function () {\n        var gObj = this.parent;\n        var selectedCol;\n        if (this.selectedColumnsIndexes.length > 1) {\n            selectedCol = [];\n            for (var i = 0; i < this.selectedColumnsIndexes.length; i++) {\n                (selectedCol).push(gObj.getColumnHeaderByUid(gObj.getColumnByIndex(this.selectedColumnsIndexes[i]).uid));\n            }\n        }\n        else {\n            selectedCol = gObj.getColumnHeaderByUid(gObj.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);\n        }\n        return selectedCol;\n    };\n    Selection.prototype.getSelectedColumnCells = function (clearIndex) {\n        var gObj = this.parent;\n        var isRowTemplate = !isNullOrUndefined(this.parent.rowTemplate);\n        var rows = isRowTemplate ? gObj.getRows() : gObj.getDataRows();\n        var movableRows;\n        var frRows;\n        if (gObj.isFrozenGrid() && gObj.getContent().querySelector('.e-movablecontent')) {\n            movableRows = isRowTemplate ? gObj.getMovableRows() : gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, movableRows);\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                frRows = isRowTemplate ? gObj.getFrozenRightRows() : gObj.getFrozenRightDataRows();\n                rows = gObj.addMovableRows(rows, frRows);\n            }\n        }\n        var seletedcells = [];\n        var selectionString = !isNullOrUndefined(clearIndex) ? '[aria-colindex=\"' + clearIndex + '\"]' : '.e-columnselection';\n        for (var i = 0, len = rows.length; i < len; i++) {\n            seletedcells = seletedcells.concat([].slice.call(rows[i].querySelectorAll(selectionString)));\n        }\n        return seletedcells;\n    };\n    Selection.prototype.columnDeselect = function (args, event) {\n        if (event === 'columnDeselected') {\n            delete args.cancel;\n        }\n        this.onActionComplete(args, event);\n        return args.cancel;\n    };\n    Selection.prototype.updateColProps = function (startIndex) {\n        this.prevColIndex = startIndex;\n        this.isColumnSelected = this.selectedColumnsIndexes.length && true;\n    };\n    Selection.prototype.clearColDependency = function () {\n        this.clearColumnSelection();\n        this.selectedColumnsIndexes = [];\n    };\n    Selection.prototype.updateColSelection = function (selectedCol, startIndex) {\n        if (isNullOrUndefined(this.parent.getColumns()[startIndex])) {\n            return;\n        }\n        var left = this.parent.getFrozenLeftCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var col = this.parent.getColumnByIndex(startIndex);\n        var isRowTemplate = !isNullOrUndefined(this.parent.rowTemplate);\n        var rows;\n        this.selectedColumnsIndexes.push(startIndex);\n        this.parent.getColumns()[startIndex].isSelected = true;\n        if (col.getFreezeTableName() === 'frozen-right') {\n            startIndex = startIndex - (left + movable);\n            rows = isRowTemplate ? this.parent.getFrozenRightRows() : this.parent.getFrozenRightDataRows();\n        }\n        else if (col.getFreezeTableName() === 'movable') {\n            startIndex = startIndex - left;\n            rows = isRowTemplate ? this.parent.getMovableRows() : this.parent.getMovableDataRows();\n        }\n        else {\n            startIndex = startIndex + this.parent.getIndentCount();\n            rows = isRowTemplate ? this.parent.getRows() : this.parent.getDataRows();\n        }\n        addRemoveActiveClasses([selectedCol], true, 'e-columnselection');\n        for (var j = 0, len = rows.length; j < len; j++) {\n            if (rows[j].classList.contains('e-row')) {\n                if ((rows[j].classList.contains('e-editedrow') || rows[j].classList.contains('e-addedrow')) &&\n                    this.parent.editSettings.mode === 'Normal' && !isNullOrUndefined(rows[j].querySelector('tr').childNodes[startIndex])) {\n                    addRemoveActiveClasses([rows[j].querySelector('tr').childNodes[startIndex]], true, 'e-columnselection');\n                }\n                else if (!isNullOrUndefined(rows[j].childNodes[startIndex])) {\n                    addRemoveActiveClasses([rows[j].childNodes[startIndex]], true, 'e-columnselection');\n                }\n            }\n        }\n    };\n    Selection.prototype.headerSelectionHandler = function (colIndex) {\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            this.selectColumn(colIndex);\n        }\n        else if (this.isMultiShiftRequest) {\n            this.selectColumnsByRange(isUndefined(this.prevColIndex) ? colIndex : this.prevColIndex, colIndex);\n        }\n        else {\n            this.selectColumnWithExisting(colIndex);\n        }\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        var _this = this;\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.parent.on(events.beforeRefreshOnDataChange, this.initPerisistSelection, this);\n        this.parent.on(events.onEmpty, this.setCheckAllForEmptyGrid, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.resizeEndFn = function () {\n            _this.updateAutoFillPosition();\n            _this.drawBorders();\n        };\n        this.resizeEndFn.bind(this);\n        this.parent.addEventListener(events.resizeStop, this.resizeEndFn);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.onEmpty, this.setCheckAllForEmptyGrid);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.beforeRefreshOnDataChange, this.initPerisistSelection);\n    };\n    Selection.prototype.setCheckAllForEmptyGrid = function () {\n        var checkAllBox = this.getCheckAllBox();\n        if (checkAllBox) {\n            this.parent.isCheckBoxSelection = true;\n            var spanEle = checkAllBox.nextElementSibling;\n            removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n        }\n    };\n    Selection.prototype.dataReady = function (e) {\n        this.isHeaderCheckboxClicked = false;\n        var isInfinitecroll = this.parent.enableInfiniteScrolling && e.requestType === 'infiniteScroll';\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection && !isInfinitecroll) {\n            this.disableUI = !this.parent.enableImmutableMode;\n            this.clearSelection();\n            this.setCheckAllState();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.selectRowIndex = function (index) {\n        this.parent.isSelectedRowIndexUpdating = true;\n        this.parent.selectedRowIndex = index;\n    };\n    Selection.prototype.disableInteracted = function () {\n        this.isInteracted = false;\n    };\n    Selection.prototype.activeTarget = function () {\n        this.actualTarget = this.isInteracted ? this.actualTarget : null;\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](grid/#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    Search.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'searching') {\n            this.parent.setProperties({ searchSettings: { key: '' } }, true);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isGroupAdaptive } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].visible = true;\n        }\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].visible = false;\n        }\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.columnModel, function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns, changedStateColumns) {\n        var _this = this;\n        if (changedStateColumns === void 0) { changedStateColumns = []; }\n        changedStateColumns = (changedStateColumns.length > 0) ? changedStateColumns :\n            isBlazor() ? (JSON.parse(JSON.stringify(columns))) : columns;\n        var args = {\n            requestType: 'columnstate',\n            cancel: false,\n            columns: changedStateColumns\n        };\n        var cancel = 'cancel';\n        this.parent.trigger(events.actionBegin, args, function (showHideArgs) {\n            var currentViewCols = _this.parent.getColumns();\n            columns = isNullOrUndefined(columns) ? currentViewCols : columns;\n            if (showHideArgs[cancel]) {\n                _this.parent.notify(events.resetColumns, { showHideArgs: showHideArgs });\n                if (columns.length > 0) {\n                    columns[0].visible = true;\n                }\n                return;\n            }\n            if (isGroupAdaptive(_this.parent)) {\n                _this.parent.contentModule.emptyVcRows();\n            }\n            if (_this.parent.allowSelection && _this.parent.getSelectedRecords().length &&\n                !_this.parent.selectionSettings.persistSelection) {\n                _this.parent.clearSelection();\n            }\n            if (_this.parent.enableColumnVirtualization) {\n                var colsInCurrentView = columns.filter(function (col1) { return (currentViewCols.some(function (col2) { return col1.field === col2.field; })); });\n                if (colsInCurrentView.length) {\n                    _this.parent.notify(events.columnVisibilityChanged, columns);\n                }\n            }\n            else {\n                _this.parent.notify(events.columnVisibilityChanged, columns);\n            }\n            var params = {\n                requestType: 'columnstate',\n                columns: changedStateColumns\n            };\n            _this.parent.trigger(events.actionComplete, params);\n            if (_this.parent.columnQueryMode !== 'All') {\n                _this.parent.refresh();\n            }\n        });\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed, textWrapRefresh, virtualScrollEdit, infiniteScrollHandler, closeFilterDialog } from '../base/constant';\nimport { lazyLoadScrollHandler, checkScrollReset } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function (uiupdate) {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (uiupdate) {\n            this.widthService.setWidthToColumns();\n        }\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().querySelector('.e-content');\n        var height = this.parent.height;\n        if (this.parent.isFrozenGrid() && this.parent.height !== 'auto' && this.parent.height.toString().indexOf('%') < 0) {\n            height = parseInt(height, 10) - Scroll.getScrollBarWidth();\n        }\n        if (!this.parent.enableVirtualization && this.parent.frozenRows && this.parent.height !== 'auto') {\n            var tbody = this.parent.getHeaderContent().querySelector('tbody');\n            mHdrHeight = tbody ? tbody.offsetHeight : 0;\n            if (tbody && mHdrHeight) {\n                var add = tbody.querySelectorAll('.e-addedrow').length;\n                var height_1 = add * this.parent.getRowHeight();\n                mHdrHeight -= height_1;\n            }\n            content.style.height = formatUnit(height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(height);\n        }\n        this.ensureOverflow(content);\n        if (this.parent.isFrozenGrid()) {\n            this.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        var padding = this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenMode() === 'Left-Right' ? '0.5px' : '1px';\n        content.querySelector('.e-headercontent').style[cssProps.border] = scrollWidth > 0 ? padding : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        var hDiv = this.parent.getHeaderContent().querySelector('.e-headercontent');\n        hDiv.style[cssProps.border] = '';\n        hDiv.parentElement.style[cssProps.padding] = '';\n        var footerDiv = this.parent.getFooterContent();\n        if (footerDiv && footerDiv.classList.contains('e-footerpadding')) {\n            footerDiv.classList.remove('e-footerpadding');\n        }\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](grid/#height/) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n        if (this.parent.isFrozenGrid()) {\n            content.firstElementChild.style.height = 'calc(100% - ' + getScrollBarWidth() + 'px)';\n        }\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(textWrapRefresh, this.wireEvents, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(textWrapRefresh, this.wireEvents);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.isFrozenGrid()) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n        else {\n            this.parent.getHeaderContent().querySelector('.e-headercontent').scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onFrozenContentScroll = function () {\n        var _this = this;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                _this.parent.notify(infiniteScrollHandler, e);\n            }\n            _this.previousValues.top = e.target.scrollTop;\n        };\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling) {\n                _this.parent.notify(infiniteScrollHandler, { target: e.target, isLeft: _this.previousValues.left !== left });\n            }\n            if (_this.parent.groupSettings.columns.length && _this.parent.groupSettings.enableLazyLoading) {\n                var isDown = _this.previousValues.top < _this.parent.getContent().firstElementChild.scrollTop;\n                _this.parent.notify(lazyLoadScrollHandler, { scrollDown: isDown });\n            }\n            _this.parent.notify(virtualScrollEdit, {});\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            _this.parent.notify(closeFilterDialog, e);\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onCustomScrollbarScroll = function (mCont, mHdr) {\n        var _this = this;\n        var content = mCont;\n        var header = mHdr;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            if (_this.previousValues.left === left) {\n                return;\n            }\n            content.scrollLeft = left;\n            header.scrollLeft = left;\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var isFrozen = _this.parent.isFrozenGrid();\n            var pageXY = _this.getPointXY(e);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            var mHdr = isFrozen ?\n                _this.parent.getHeaderContent().querySelector('.e-movableheader') :\n                _this.parent.getHeaderContent().querySelector('.e-headercontent');\n            var mCont = isFrozen ?\n                _this.parent.getContent().querySelector('.e-movablecontent') :\n                _this.parent.getContent().querySelector('.e-content');\n            if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                return;\n            }\n            e.preventDefault();\n            mHdr.scrollLeft = left;\n            mCont.scrollLeft = left;\n            if (isFrozen) {\n                var scrollBar = _this.parent.getContent().querySelector('.e-movablescrollbar');\n                scrollBar.scrollLeft = left;\n            }\n            _this.pageXY.x = pageXY.x;\n            _this.previousValues.left = left;\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.isFrozenGrid();\n            this.content = this.parent.getContent().querySelector('.e-content');\n            this.header = this.parent.getHeaderContent().querySelector('.e-headercontent');\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            var mScrollBar = this.parent.getContent().querySelector('.e-movablescrollbar');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (this.parent.isFrozenGrid()) {\n                EventHandler.add(mScrollBar, 'scroll', this.onCustomScrollbarScroll(mCont, mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mHdr), this);\n                EventHandler.add(mHdr, 'scroll', this.onCustomScrollbarScroll(mScrollBar, mCont), this);\n                EventHandler.add(this.content, 'scroll', this.onFrozenContentScroll(), this);\n                EventHandler.add(mHdr, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(mHdr, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n                EventHandler.add(mCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(mCont, 'touchmove pointermove', this.onTouchScroll(mHdr), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            var args = { cancel: false };\n            _this.parent.notify(checkScrollReset, args);\n            if (!_this.parent.enableVirtualization && !_this.parent.enableInfiniteScrolling) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.isFrozenGrid()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if (!args.cancel) {\n                    if ((_this.parent.frozenRows > 0 || _this.parent.isFrozenGrid()) && _this.header.querySelector('.e-movableheader')) {\n                        _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                    }\n                    else {\n                        _this.header.scrollLeft = _this.previousValues.left;\n                    }\n                    _this.content.scrollLeft = _this.previousValues.left;\n                    _this.content.scrollTop = _this.previousValues.top;\n                }\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.isFrozenGrid() && _this.header.querySelector('.e-movableheader')) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        var width = 'width';\n        this.setWidth(!isNullOrUndefined(e.properties[width]));\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        var cont = this.parent.getContent().querySelector('.e-content');\n        removeClass([this.parent.getHeaderContent().querySelector('.e-headercontent')], 'e-headercontent');\n        removeClass([cont], 'e-content');\n        //Remove height\n        cont.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(cont, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove, EventHandler, isUndefined, closest, classList, isBlazor } from '@syncfusion/ej2-base';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        EventHandler.add(this.parent.element, 'keydown', this.pasteHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.click, this.clickHandler);\n        EventHandler.remove(this.parent.element, 'keydown', this.pasteHandler);\n    };\n    Clipboard.prototype.clickHandler = function (e) {\n        var target = e.target;\n        target = parentsUntil(target, 'e-rowcell');\n    };\n    Clipboard.prototype.pasteHandler = function (e) {\n        var _this = this;\n        var grid = this.parent;\n        var isMacLike = /(Mac)/i.test(navigator.platform);\n        if (e.keyCode === 86 && (e.ctrlKey || (isMacLike && e.metaKey)) && !grid.isEdit) {\n            var target = closest(document.activeElement, '.e-rowcell');\n            if (!target || !grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n                grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n                return;\n            }\n            this.activeElement = document.activeElement;\n            this.clipBoardTextArea.value = '';\n            var x_1 = window.scrollX;\n            var y_1 = window.scrollY;\n            this.clipBoardTextArea.focus();\n            setTimeout(function () {\n                _this.activeElement.focus();\n                window.scrollTo(x_1, y_1);\n                _this.paste(_this.clipBoardTextArea.value, _this.parent.getSelectedRowCellIndexes()[0].rowIndex, _this.parent.getSelectedRowCellIndexes()[0].cellIndexes[0]);\n            }, 10);\n        }\n    };\n    /**\n     * Paste data from clipboard to selected cells.\n     * @param {boolean} data - Specifies the date for paste.\n     * @param {boolean} rowIndex - Specifies the row index.\n     * @param {boolean} colIndex - Specifies the column index.\n     */\n    Clipboard.prototype.paste = function (data, rowIndex, colIndex) {\n        var grid = this.parent;\n        var cIdx = colIndex;\n        var rIdx = rowIndex;\n        var col;\n        var value;\n        var isAvail;\n        if (!grid.editSettings.allowEditing || grid.editSettings.mode !== 'Batch' ||\n            grid.selectionSettings.mode !== 'Cell' || grid.selectionSettings.cellSelectionMode === 'Flow') {\n            return;\n        }\n        var rows = data.split('\\n');\n        var cols;\n        var dataRows = grid.getDataRows();\n        var mRows;\n        var frRows;\n        var isFrozen = this.parent.isFrozenGrid();\n        if (isFrozen) {\n            mRows = grid.getMovableDataRows();\n            if (grid.getFrozenRightColumnsCount()) {\n                frRows = grid.getFrozenRightDataRows();\n            }\n        }\n        for (var r = 0; r < rows.length; r++) {\n            cols = rows[r].split('\\t');\n            cIdx = colIndex;\n            if ((r === rows.length - 1 && rows[r] === '') || isUndefined(grid.getRowByIndex(rIdx))) {\n                cIdx++;\n                break;\n            }\n            for (var c = 0; c < cols.length; c++) {\n                isAvail = grid.getCellFromIndex(rIdx, cIdx);\n                if (isFrozen) {\n                    var fTr = dataRows[rIdx];\n                    var mTr = mRows[rIdx];\n                    isAvail = !fTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') ?\n                        mTr.querySelector('[aria-colindex=\"' + cIdx + '\"]') : true;\n                    if (frRows && !isAvail) {\n                        var frTr = frRows[rIdx];\n                        isAvail = frTr.querySelector('[aria-colindex=\"' + cIdx + '\"]');\n                    }\n                }\n                if (!isAvail) {\n                    cIdx++;\n                    break;\n                }\n                col = grid.getColumnByIndex(cIdx);\n                value = col.getParser() ? col.getParser()(cols[c]) : cols[c];\n                if (col.allowEditing && !col.isPrimaryKey && !col.template) {\n                    var args = {\n                        column: col,\n                        data: value,\n                        rowIndex: rIdx\n                    };\n                    this.parent.trigger(events.beforePaste, args);\n                    rIdx = args.rowIndex;\n                    if (!args.cancel) {\n                        if (grid.editModule) {\n                            if (col.type === 'number') {\n                                this.parent.editModule.updateCell(rIdx, col.field, parseFloat(args.data));\n                            }\n                            else {\n                                grid.editModule.updateCell(rIdx, col.field, args.data);\n                            }\n                        }\n                    }\n                }\n                cIdx++;\n            }\n            rIdx++;\n        }\n        grid.selectionModule.selectCellsByRange({ rowIndex: rowIndex, cellIndex: colIndex }, { rowIndex: rIdx - 1, cellIndex: cIdx - 1 });\n        var cell = this.parent.getCellFromIndex(rIdx - 1, cIdx - 1);\n        if (cell) {\n            classList(cell, ['e-focus', 'e-focused'], []);\n        }\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.isFrozenGrid();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var frRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    frRows = this.parent.getFrozenRightRows();\n                }\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].\n                        querySelectorAll('.e-rowcell:not(.e-hide)'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell:not(.e-hide)')));\n                        if (frRows) {\n                            cells.push.apply(cells, [].slice.call(frRows[selectedIndexes[i]].querySelectorAll('.e-rowcell:not(.e-hide)')));\n                        }\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]]\n                                .querySelectorAll('.e-cellselectionbackground')));\n                            if (frRows) {\n                                cells.push.apply(cells, [].slice.call(frRows[obj.rowIndexes[i]]\n                                    .querySelectorAll('.e-cellselectionbackground')));\n                            }\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    if (isBlazor()) {\n                        if ((!cells[j].classList.contains('e-gridchkbox')) &&\n                            Object.keys(cells[j].querySelectorAll('.e-check')).length) {\n                            this.copyContent += true;\n                        }\n                        else if ((!cells[j].classList.contains('e-gridchkbox')) &&\n                            Object.keys(cells[j].querySelectorAll('.e-uncheck')).length) {\n                            this.copyContent += false;\n                        }\n                        else {\n                            this.copyContent += cells[j].innerText;\n                        }\n                    }\n                    else {\n                        this.copyContent += cells[j].innerText;\n                    }\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort(function (a, b) { return a - b; });\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","import { Observer, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Row } from '../models/row';\nimport { AriaService } from '../services/aria-service';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\nimport { DataUtil } from '@syncfusion/ej2-data';\nexport var gridObserver = new Observer();\n/**\n * BlazorAction is used for performing Blazor related Grid Actions.\n * @hidden\n */\nvar BlazorAction = /** @class */ (function () {\n    function BlazorAction(parent) {\n        this.aria = new AriaService();\n        this.actionArgs = {};\n        this.virtualHeight = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    BlazorAction.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('detailclick', this.onDetailRowClick, this);\n        this.parent.on('add-delete-success', this.addDeleteSuccess, this);\n        this.parent.on('editsuccess', this.editSuccess, this);\n        this.parent.on('setvisibility', this.setColumnVisibility, this);\n        this.parent.on('offset', this.setServerOffSet, this);\n        this.parent.on('updateaction', this.modelChanged, this);\n        this.parent.on(events.modelChanged, this.modelChanged, this);\n        this.parent.on('group-expand-collapse', this.onGroupClick, this);\n        this.parent.on('setcolumnstyles', this.setColVTableWidthAndTranslate, this);\n        this.parent.on('refresh-virtual-indices', this.invokeServerDataBind, this);\n        this.parent.on('contentcolgroup', this.contentColGroup, this);\n        this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n    };\n    BlazorAction.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('detailclick', this.onDetailRowClick);\n        this.parent.off('add-delete-success', this.addDeleteSuccess);\n        this.parent.off('editsuccess', this.editSuccess);\n        this.parent.off('setvisibility', this.setColumnVisibility);\n        this.parent.off('offset', this.setServerOffSet);\n        this.parent.off('updateaction', this.modelChanged);\n        this.parent.off(events.modelChanged, this.modelChanged);\n        this.parent.off('group-expand-collapse', this.onGroupClick);\n        this.parent.off('setcolumnstyles', this.setColVTableWidthAndTranslate);\n        this.parent.off('refresh-virtual-indices', this.invokeServerDataBind);\n        this.parent.off('contentcolgroup', this.contentColGroup);\n        this.parent.off(events.dataSourceModified, this.dataSourceModified);\n    };\n    BlazorAction.prototype.getModuleName = function () { return 'blazor'; };\n    ;\n    BlazorAction.prototype.modelChanged = function (args) {\n        this.actionArgs = args;\n        this.parent.currentAction = args;\n    };\n    BlazorAction.prototype.addDeleteSuccess = function (args) {\n        var _this = this;\n        var editArgs;\n        var action = 'action';\n        var data = 'data';\n        var index = 'index';\n        editArgs = {\n            requestType: args.requestType,\n            data: args[data],\n            action: args[action]\n        };\n        if (!isNullOrUndefined(args[index])) {\n            editArgs[index] = args[index];\n        }\n        args.promise.then(function (e) { return _this.editSuccess(editArgs); }).catch(function (e) {\n            if (isBlazor() && _this.parent.isServerRendered) {\n                var error = 'error';\n                var message = 'message';\n                if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                    e[error] = e[error][message];\n                }\n            }\n            _this.parent.trigger(events.actionFailure, ((isBlazor() && e instanceof Array) ? e[0] : e));\n            _this.parent.hideSpinner();\n            _this.parent.log('actionfailure', { error: e });\n        });\n    };\n    BlazorAction.prototype.editSuccess = function (args) {\n        this.parent.renderModule.resetTemplates();\n        this.invokeServerDataBind(args);\n    };\n    BlazorAction.prototype.invokeServerDataBind = function (args) {\n        this.actionArgs = args;\n        this.parent.currentAction = args;\n        this.parent.allowServerDataBinding = true;\n        this.parent.serverDataBind();\n        this.parent.allowServerDataBinding = false;\n    };\n    BlazorAction.prototype.onDetailRowClick = function (target) {\n        var gObj = this.parent;\n        var adaptor = 'interopAdaptor';\n        var rIndex = 'rowIndex';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var args = {\n            uid: uid, classList: target.classList[0], index: tr.getAttribute('aria-rowindex'),\n            rowIndex: gObj.getRowsObject().indexOf(rowObj), colSpan: this.parent.getVisibleColumns().length\n        };\n        gObj[adaptor][invokeMethodAsync]('OnDetailClick', args);\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var rows = gObj.getRowsObject();\n            var rowData = rowObj.data;\n            var gridRowId = this.parent.getRowUid('grid-row');\n            var len = gObj.groupSettings.columns.length;\n            var gridRow = new Row({\n                isDataRow: true,\n                isExpand: true,\n                uid: gridRowId,\n                isDetailRow: true,\n                cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n            });\n            for (var i = 0; i < len; i++) {\n                gridRow.cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            rows.splice(args[rIndex] + 1, 0, gridRow);\n            gObj.trigger(events.detailDataBound, { data: rowData });\n            gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            rowObj.isExpand = true;\n            this.aria.setExpand(target, true);\n        }\n        else {\n            gObj.getRowsObject().splice(args[rIndex] + 1, 1);\n            gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    BlazorAction.prototype.setColumnVisibility = function (columns) {\n        var visible = {};\n        var adaptor = 'interopAdaptor';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        for (var i = 0; i < columns.length; i++) {\n            visible[columns[i].uid] = columns[i].visible;\n        }\n        this.parent[adaptor][invokeMethodAsync]('setColumnVisibility', { visible: visible });\n    };\n    BlazorAction.prototype.dataSuccess = function (args) {\n        if (this.parent.enableVirtualization && Object.keys(this.actionArgs).length === 0) {\n            this.actionArgs.requestType = 'virtualscroll';\n        }\n        var startIndex = 'startIndex';\n        var endIndex = 'endIndex';\n        this.actionArgs[startIndex] = args[startIndex];\n        this.actionArgs[endIndex] = args[endIndex];\n        if (this.parent.enableVirtualization) {\n            this.virtualContentModule = this.parent.contentModule;\n            if (this.virtualContentModule.activeKey === 'downArrow' || this.virtualContentModule.activeKey === 'upArrow') {\n                var row = this.parent.getRowByIndex(this.virtualContentModule.blzRowIndex);\n                if (row) {\n                    this.parent.selectRow(parseInt(row.getAttribute('aria-rowindex'), 10));\n                    // tslint:disable-next-line:no-any\n                    row.cells[0].focus({ preventScroll: true });\n                }\n            }\n            this.virtualContentModule.blazorDataLoad = false;\n        }\n        if (args.foreignColumnsData) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (args.foreignColumnsData[columns[i].field]) {\n                    columns[i].columnData = args.foreignColumnsData[columns[i].field];\n                }\n            }\n        }\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            var agg = [];\n            var aggRows = this.parent.aggregates;\n            for (var i = 0; i < aggRows.length; i++) {\n                var aggRow = aggRows[i];\n                for (var j = 0; j < aggRow.columns.length; j++) {\n                    var aggr = {};\n                    var type = aggRow.columns[j].type.toString();\n                    aggr = { type: type.toLowerCase(), field: aggRow.columns[j].field };\n                    agg.push(aggr);\n                }\n            }\n            var data = void 0;\n            var aggrds = void 0;\n            var groupedCols = this.parent.groupSettings.columns;\n            for (var k = 0; k < groupedCols.length; k++) {\n                aggrds = data ? data : args.result;\n                data = DataUtil.group(aggrds, groupedCols[k], agg, null, null);\n            }\n            args.result = data ? data : args.result;\n        }\n        var rowUid = 'rowUid';\n        var offsetTime = 'offsetTime';\n        var off = 'offset';\n        this.parent[rowUid] = args[rowUid];\n        args[off] = Math.sign(args[off]) === 1 ? -Math.abs(args[off]) : Math.abs(args[off]);\n        this.parent[offsetTime] = args[off];\n        if (this.parent[offsetTime] !== new Date().getTimezoneOffset() / 60) {\n            if (this.parent.editSettings.mode !== 'Batch') {\n                var action = 'action';\n                var rowIndex = 'rowIndex';\n                var index = 'index';\n                if (this.actionArgs[action] === 'edit') {\n                    this.setClientOffSet(args, this.actionArgs[rowIndex]);\n                }\n                else if (this.actionArgs[action] === 'add') {\n                    this.setClientOffSet(args, this.actionArgs[index]);\n                }\n            }\n            else if (this.parent.editSettings.mode === 'Batch') {\n                var changes = 'changes';\n                var changedRecords = 'changedRecords';\n                var addedRecords = 'addedRecords';\n                var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n                var batchChanges = this.actionArgs[changes] || { changedRecords: [], addedRecords: [] };\n                for (var i = 0; i < batchChanges[changedRecords].length; i++) {\n                    for (var j = 0; j < args.result.length; j++) {\n                        if (batchChanges[changedRecords][i][keyField] === args.result[j][keyField]) {\n                            this.setClientOffSet(args, j);\n                        }\n                    }\n                }\n                for (var i = 0; i < batchChanges[addedRecords].length; i++) {\n                    for (var j = 0; j < args.result.length; j++) {\n                        if (batchChanges[addedRecords][i][keyField] === args.result[j][keyField]) {\n                            this.setClientOffSet(args, j);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderModule.dataManagerSuccess(args, this.actionArgs);\n        this.parent.getMediaColumns();\n        if (this.parent.enableVirtualization) {\n            this.virtualContentModule = this.parent.contentModule;\n            this.setColVTableWidthAndTranslate();\n            if (this.parent.groupSettings.columns.length) {\n                this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n            }\n        }\n        this.actionArgs = this.parent.currentAction = {};\n    };\n    BlazorAction.prototype.removeDisplayNone = function () {\n        var renderedContentRows = this.parent.getContentTable().querySelectorAll('tr');\n        for (var i = 0; i < renderedContentRows.length; i++) {\n            var renderedContentCells = renderedContentRows[i].querySelectorAll('td');\n            for (var j = 0; j < renderedContentCells.length; j++) {\n                renderedContentCells[j].style.display = '';\n            }\n        }\n    };\n    BlazorAction.prototype.setVirtualTrackHeight = function (args) {\n        this.virtualHeight = args.VisibleGroupedRowsCount * this.parent.getRowHeight();\n        this.virtualContentModule.setVirtualHeight(this.virtualHeight);\n    };\n    BlazorAction.prototype.setColVTableWidthAndTranslate = function (args) {\n        if (this.parent.enableColumnVirtualization && this.virtualContentModule.prevInfo &&\n            (JSON.stringify(this.virtualContentModule.currentInfo.columnIndexes) !==\n                JSON.stringify(this.virtualContentModule.prevInfo.columnIndexes)) || ((args && args.refresh))) {\n            var translateX = this.virtualContentModule.getColumnOffset(this.virtualContentModule.startColIndex - 1);\n            var width = this.virtualContentModule.getColumnOffset(this.virtualContentModule.endColIndex - 1) - translateX + '';\n            this.virtualContentModule.header.virtualEle.setWrapperWidth(width);\n            this.virtualContentModule.virtualEle.setWrapperWidth(width);\n            this.virtualContentModule.header.virtualEle.adjustTable(translateX, 0);\n            this.parent.getContentTable().parentElement.style.width = width + 'px';\n        }\n        if (this.dataSourceChanged) {\n            this.virtualContentModule.getPanel().firstElementChild.scrollTop = 0;\n            this.virtualContentModule.getPanel().firstElementChild.scrollLeft = 0;\n            if (this.virtualContentModule.header.virtualEle) {\n                this.virtualContentModule.header.virtualEle.adjustTable(0, 0);\n            }\n            this.parent.getContentTable().parentElement.style.transform = 'translate(0px,0px)';\n            this.virtualContentModule.refreshOffsets();\n            this.virtualContentModule.refreshVirtualElement();\n            this.dataSourceChanged = false;\n        }\n    };\n    BlazorAction.prototype.dataSourceModified = function () {\n        this.dataSourceChanged = true;\n    };\n    BlazorAction.prototype.setClientOffSet = function (args, index) {\n        var timeZone = DataUtil.serverTimezoneOffset;\n        DataUtil.serverTimezoneOffset = 0;\n        args.result[index] = DataUtil.parse.parseJson(JSON.stringify(args.result[index]));\n        DataUtil.serverTimezoneOffset = timeZone;\n    };\n    BlazorAction.prototype.setServerOffSet = function (args) {\n        var serverTimeZone = DataUtil.serverTimezoneOffset;\n        var offsetTime = 'offsetTime';\n        var data = 'data';\n        var timeZone = new Date().getTimezoneOffset() / 60 * 2 + this.parent[offsetTime];\n        DataUtil.serverTimezoneOffset = timeZone;\n        args[data] = DataUtil.parse.parseJson(JSON.stringify(args[data]));\n        DataUtil.serverTimezoneOffset = serverTimeZone;\n    };\n    BlazorAction.prototype.onGroupClick = function (args) {\n        var _this = this;\n        var adaptor = 'interopAdaptor';\n        var content = 'contentModule';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        var exactTopIndex = 'exactTopIndex';\n        args[exactTopIndex] = Math.round((this.parent.element.querySelector('.e-content').scrollTop) / this.parent.getRowHeight());\n        var rowHeight = 'rowHeight';\n        args[rowHeight] = this.parent.getRowHeight();\n        this.parent[adaptor][invokeMethodAsync]('OnGroupExpandClick', args).then(function () {\n            _this.parent[content].rowElements = [].slice.call(_this.parent.getContentTable().querySelectorAll('tr.e-row[data-uid]'));\n        });\n    };\n    BlazorAction.prototype.setPersistData = function (args) {\n        var gObj = this.parent;\n        gObj.mergePersistGridData(args);\n        var bulkChanges = 'bulkChanges';\n        if (gObj[bulkChanges].columns) {\n            delete gObj[bulkChanges].columns;\n        }\n        gObj.headerModule.refreshUI();\n        gObj.notify('persist-data-changed', {});\n        gObj.notify(events.columnVisibilityChanged, gObj.getColumns());\n    };\n    ;\n    BlazorAction.prototype.resetPersistData = function (args) {\n        var gObj = this.parent;\n        var bulkChanges = 'bulkChanges';\n        var parseArgs = JSON.parse(args);\n        var persistArgs = { filterSettings: parseArgs.filterSettings,\n            groupSettings: parseArgs.groupSettings, pageSettings: parseArgs.pageSettings, sortSettings: parseArgs.sortSettings,\n            searchSettings: parseArgs.searchSettings, columns: parseArgs.columns };\n        if (!persistArgs.sortSettings.columns) {\n            persistArgs.sortSettings.columns = [];\n        }\n        if (!persistArgs.groupSettings.columns) {\n            persistArgs.groupSettings.columns = [];\n        }\n        if (!persistArgs.pageSettings.currentPage) {\n            gObj.pageSettings.currentPage = 1;\n        }\n        for (var i = 0; i < gObj.columns.length; i++) {\n            if (gObj.groupSettings.columns.indexOf(gObj.columns[i].field) > -1) {\n                gObj.columns[i].visible = true;\n            }\n        }\n        gObj.mergePersistGridData(persistArgs);\n        gObj.notify('persist-data-changed', {});\n        if (gObj[bulkChanges].columns) {\n            delete gObj[bulkChanges].columns;\n        }\n        gObj.headerModule.refreshUI();\n        for (var i = 0; i < gObj.columns.length; i++) {\n            gObj.columns[i].editType = gObj.columns[i].editType.toLowerCase();\n        }\n        gObj.setProperties({ filterSettings: { columns: [] } }, true);\n    };\n    BlazorAction.prototype.contentColGroup = function () {\n        var gObj = this.parent;\n        var contentTable = gObj.getContent().querySelector('.e-table');\n        contentTable.insertBefore(contentTable.querySelector(\"#content-\" + gObj.element.id + \"colGroup\"), contentTable.querySelector('tbody'));\n        if (gObj.frozenRows) {\n            var headerTable = gObj.getHeaderContent().querySelector('.e-table');\n            headerTable.insertBefore(headerTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), headerTable.querySelector('tbody'));\n        }\n        if (gObj.getFrozenColumns() !== 0) {\n            var movableContentTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('.e-table');\n            movableContentTable.insertBefore(movableContentTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableContentTable.querySelector('tbody'));\n            if (gObj.frozenRows) {\n                var movableHeaderTable = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('.e-table');\n                movableHeaderTable.insertBefore(movableHeaderTable.querySelector(\"#\" + gObj.element.id + \"colGroup\"), movableHeaderTable.querySelector('tbody'));\n            }\n        }\n    };\n    BlazorAction.prototype.dataFailure = function (args) {\n        this.parent.renderModule.dataManagerFailure(args, this.actionArgs);\n        this.actionArgs = this.parent.currentAction = {};\n    };\n    BlazorAction.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return BlazorAction;\n}());\nexport { BlazorAction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue, isBlazor, blazorTemplates } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, remove, updateBlazorTemplate, classList, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, isGroupAdaptive, refreshForeignData } from './util';\nimport { getRowHeight, setColumnIndex, Global, ispercentageWidth, renderMovable, getNumberFormat } from './util';\nimport { setRowElements, resetRowIndex, compareChanges, getCellByColAndRowIndex, performComplexDataOperation } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { ColumnChooserSettings } from '../models/column-chooser-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\nimport { gridObserver } from '../actions/blazor-action';\nimport { RowModelGenerator } from '../services/row-model-generator';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    __decorate([\n        Property(false)\n    ], SortDescriptor.prototype, \"isFromGroup\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property(false)\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"uid\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"isForeignKey\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the infinite scroll behavior of Grid.\n */\nvar InfiniteScrollSettings = /** @class */ (function (_super) {\n    __extends(InfiniteScrollSettings, _super);\n    function InfiniteScrollSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], InfiniteScrollSettings.prototype, \"enableCache\", void 0);\n    __decorate([\n        Property(3)\n    ], InfiniteScrollSettings.prototype, \"maxBlocks\", void 0);\n    __decorate([\n        Property(3)\n    ], InfiniteScrollSettings.prototype, \"initialBlocks\", void 0);\n    return InfiniteScrollSettings;\n}(ChildProperty));\nexport { InfiniteScrollSettings };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"enableCaseSensitivity\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"showFilterBarOperator\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    __decorate([\n        Property('Default')\n    ], SelectionSettings.prototype, \"checkboxMode\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"enableSimpleMultiRowSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], SelectionSettings.prototype, \"enableToggle\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"allowColumnSelection\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the resize behavior of the Grid.\n */\nvar ResizeSettings = /** @class */ (function (_super) {\n    __extends(ResizeSettings, _super);\n    function ResizeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Normal')\n    ], ResizeSettings.prototype, \"mode\", void 0);\n    return ResizeSettings;\n}(ChildProperty));\nexport { ResizeSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"enableLazyLoading\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"headerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], EditSettings.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('Top')\n    ], EditSettings.prototype, \"newRowPosition\", void 0);\n    __decorate([\n        Property({})\n    ], EditSettings.prototype, \"dialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowNextRowEdit\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.keyA = false;\n        _this.frozenRightCount = 0;\n        _this.frozenLeftCount = 0;\n        _this.tablesCount = 1;\n        _this.movableCount = 0;\n        _this.visibleFrozenLeft = 0;\n        _this.visibleFrozenRight = 0;\n        _this.visibleMovable = 0;\n        _this.frozenLeftColumns = [];\n        _this.frozenRightColumns = [];\n        _this.movableColumns = [];\n        _this.media = {};\n        _this.isFreezeRefresh = false;\n        /** @hidden */\n        _this.tableIndex = 0;\n        _this.componentRefresh = Component.prototype.refresh;\n        /** @hidden */\n        _this.isVirtualAdaptive = false;\n        /** @hidden */\n        _this.vRows = [];\n        /** @hidden */\n        _this.vcRows = [];\n        /** @hidden */\n        _this.vGroupOffsets = {};\n        /** @hidden */\n        _this.rowUid = 0;\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.lockcolPositionCount = 0;\n        /** @hidden */\n        _this.prevPageMoving = false;\n        /** @hidden */\n        _this.pageTemplateChange = false;\n        /** @hidden */\n        _this.isAutoGen = false;\n        _this.mediaBindInstance = {};\n        /** @hidden */\n        _this.commandDelIndex = undefined;\n        /** @hidden */\n        _this.asyncTimeOut = 50;\n        // enable/disable logger for MVC & Core\n        _this.enableLogger = true;\n        _this.needsID = true;\n        Grid_1.Inject(Selection);\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    Grid_1 = Grid;\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     */\n    Grid.prototype.getPersistData = function () {\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex', 'scrollPosition'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: [], scrollPosition: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource', 'headerText'];\n        for (var i = 0; i < keyEntity.length; i++) {\n            var currentObject = this[keyEntity[i]];\n            for (var _i = 0, _a = ignoreOnPersist[keyEntity[i]]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        }\n        this.pageSettings.template = undefined;\n        /* tslint:disable-next-line:no-any */\n        if (this.isAngular) {\n            /* tslint:disable:no-string-literal */\n            delete this.groupSettings['properties']['captionTemplate'];\n        }\n        this.pageTemplateChange = !isNullOrUndefined(this.pagerTemplate);\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    // tslint:disable-next-line:max-func-body-length\n    Grid.prototype.requiredModules = function () {\n        this.setFrozenCount();\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows || this.frozenRightCount || this.frozenLeftCount) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.enableInfiniteScrolling) {\n            modules.push({\n                member: 'infiniteScroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.groupSettings.enableLazyLoading) {\n            modules.push({\n                member: 'lazyLoadGroup',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n        if (this.enableLogger) {\n            modules.push({ member: 'logger', args: [this] });\n        }\n        if (isBlazor()) {\n            modules.push({ member: 'blazor', args: [this] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.allowServerDataBinding = false;\n        this.ignoreCollectionWatch = true;\n        if (isBlazor() && this.enableVirtualization && this.allowGrouping) {\n            var isExpanded = 'isExpanded';\n            this[isExpanded] = false;\n        }\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.componentRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            UnGroupButton: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No matches found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Autofit all columns',\n            autoFit: 'Autofit this column',\n            AutoFitAll: 'Autofit all columns',\n            AutoFit: 'Autofit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No matches found',\n            ClearFilter: 'Clear Filter',\n            Clear: 'Clear',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            DateTimeFilter: 'DateTime Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:',\n            FilterMenuDialogARIA: 'Filter menu dialog',\n            ExcelFilterDialogARIA: 'Excel filter dialog',\n            DialogEditARIA: 'Edit dialog',\n            ColumnChooserDialogARIA: 'Column chooser dialog',\n            ColumnMenuDialogARIA: 'Column menu dialog',\n            CustomFilterDialogARIA: 'Customer filter dialog',\n            SortAtoZ: 'Sort A to Z',\n            SortZtoA: 'Sort Z to A',\n            SortByOldest: 'Sort by Oldest',\n            SortByNewest: 'Sort by Newest',\n            SortSmallestToLargest: 'Sort Smallest to Largest',\n            SortLargestToSmallest: 'Sort Largest to Smallest',\n            Sort: 'Sort'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H',\n            ctrlSpace: 'ctrl+space',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.log(['module_missing', 'promise_enabled', 'locale_missing', 'check_datasource_columns']);\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        if (isBlazor()) {\n            this.renderComplete();\n        }\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        if (this.getDataModule().dataManager.dataSource.offline === true || this.getDataModule().dataManager.dataSource.url === undefined) {\n            this.isVirtualAdaptive = true;\n        }\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization, this);\n        if (this.enablePersistence) {\n            this.notify(events.columnsPrepared, {});\n        }\n        if (!(isBlazor() && this.isServerRendered)) {\n            this.getMediaColumns();\n            setColumnIndex(this.columns);\n        }\n        this.checkLockColumns(this.columns);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n        if (isBlazor() && this.isServerRendered) {\n            gridObserver.notify(events.componentRendered, { id: this.element.id, grid: this });\n        }\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia) && (isNullOrUndefined(gcol[index].visible) || gcol[index].visible)) {\n                        this.pushMediaColumn(gcol[index], index);\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.pushMediaColumn = function (col, index) {\n        this.mediaCol.push(col);\n        this.media[col.uid] = window.matchMedia(col.hideAtMedia);\n        this.mediaQueryUpdate(index, this.media[col.uid]);\n        this.mediaBindInstance[index] = this.mediaQueryUpdate.bind(this, index);\n        this.media[col.uid].addListener(this.mediaBindInstance[index]);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateMediaColumns = function (col) {\n        if (!this.enableColumnVirtualization) {\n            var index = this.getColumnIndexByUid(col.uid);\n            for (var i = 0; i < this.mediaCol.length; i++) {\n                if (col.uid === this.mediaCol[i].uid) {\n                    this.mediaCol.splice(i, 1);\n                    return;\n                }\n            }\n            this.pushMediaColumn(col, index);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        if (this.mediaCol.some(function (mediaColumn) { return mediaColumn.uid === col.uid; })) {\n            col.visible = e.matches;\n            if (this.isInitialLoad) {\n                this.invokedFromMedia = true;\n                if (col.visible) {\n                    this.showHider.show(col.headerText, 'headerText');\n                }\n                else {\n                    this.showHider.hide(col.headerText, 'headerText');\n                }\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        var footerContent = this.element.querySelector('.e-gridfooter');\n        if (this.aggregates.length && this.element.scrollHeight > this.height && footerContent) {\n            addClass([footerContent], ['e-footerpadding']);\n        }\n        var checkboxColumn = this.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length && this.selectionSettings.checkboxMode === 'ResetOnRowClick') {\n            this.isCheckBoxSelection = false;\n        }\n        if (this.rowRenderingMode === 'Vertical') {\n            if (this.enableHover) {\n                this.setProperties({ enableAdaptiveUI: true, enableHover: false }, true);\n                removeClass([this.element], 'e-gridhover');\n            }\n        }\n    };\n    Grid.prototype.removeMediaListener = function () {\n        for (var i = 0; i < this.mediaCol.length; i++) {\n            this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index]);\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.removeMediaListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        if (!(isBlazor() && this.isServerRendered)) {\n            this.element.innerHTML = '';\n        }\n        else {\n            this.element.style.display = 'none';\n        }\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n        if (this.isAngular && !this.isFreezeRefresh) {\n            this.element = null;\n        }\n        this.isFreezeRefresh = false;\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    Grid.prototype.enableBoxSelection = function () {\n        if (this.enableAutoFill) {\n            this.selectionSettings.cellSelectionMode = 'BoxWithBorder';\n            this.element.classList.add('e-afenabled');\n        }\n        else {\n            this.element.classList.remove('e-afenabled');\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    // tslint:disable-next-line:max-func-body-length\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var freezeRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        this.log('module_missing');\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    if (this.pageTemplateChange) {\n                        this.pageTemplateChange = false;\n                        this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                        break;\n                    }\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.pageSize)\n                        && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    this.renderModule.refresh();\n                    this.headerModule.refreshUI();\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'enableAutoFill':\n                    if (this.selectionModule) {\n                        this.enableBoxSelection();\n                        this.selectionModule.updateAutoFillPosition();\n                    }\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'enableInfiniteScrolling':\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                case 'enableVirtualization':\n                case 'currencyCode':\n                case 'locale':\n                    this.log('frozen_rows_columns');\n                    freezeRefresh = true;\n                    requireGridRefresh = true;\n                    break;\n                case 'query':\n                    if (!this.getDataModule().isQueryInvokedFromData) {\n                        requireRefresh = true;\n                    }\n                    this.getDataModule().isQueryInvokedFromData = false;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, requireGridRefresh);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            if (freezeRefresh || this.getFrozenColumns() || this.frozenRows) {\n                if (!(isBlazor() && this.isServerRendered)) {\n                    this.freezeRefresh();\n                }\n            }\n            else {\n                this.refresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n            this.maintainSelection(newProp.selectedRowIndex);\n        }\n    };\n    /* tslint:disable */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp, requireGridRefresh) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar && this.toolbarModule) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems && this.contextMenuModule) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu && this.columnMenuModule) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n                    this.refreshHeader();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (Object.getPrototypeOf(newProp).deepWatch) {\n                    var pKeyField = this.getPrimaryKeyFieldNames()[0];\n                    for (var i = 0, props = Object.keys(newProp.dataSource); i < props.length; i++) {\n                        this.setRowData(getValue(pKeyField, this.dataSource[props[i]]), this.dataSource[props[i]]);\n                    }\n                }\n                else if (pending_1.isPending) {\n                    var gResult = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    var names = (pending_1.group || []);\n                    for (var i = 0; i < names.length; i++) {\n                        gResult = DataUtil.group(gResult, names[i], pending_1.aggregates || []);\n                    }\n                    this.dataSource = {\n                        result: gResult, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    this.getDataModule().setState({});\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    if (!requireGridRefresh) {\n                        this.renderModule.refresh();\n                        if (this.isCheckBoxSelection) {\n                            this.notify(events.beforeRefreshOnDataChange, {});\n                        }\n                    }\n                }\n                this.scrollRefresh();\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n            case 'selectedRowIndex':\n                if (!this.isSelectedRowIndexUpdating) {\n                    this.selectRow(newProp.selectedRowIndex);\n                }\n                this.isSelectedRowIndexUpdating = false;\n                break;\n            case 'resizeSettings':\n                this.widthService.setWidthToTable();\n                break;\n            case 'enableAdaptiveUI':\n                this.notify(events.setFullScreenDialog, {});\n                break;\n            case 'rowRenderingMode':\n                this.enableVerticalRendering();\n                this.notify(events.rowModeChange, {});\n                this.refresh();\n                break;\n        }\n    };\n    Grid.prototype.maintainSelection = function (index) {\n        var _this = this;\n        if (index !== -1) {\n            var fn_1 = function () {\n                _this.selectRow(index);\n                _this.off(events.contentReady, fn_1);\n            };\n            this.on(events.contentReady, fn_1, this);\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        var filterSettings = 'filterSettings';\n        if (prop[filterSettings] && this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setTablesCount = function () {\n        var frozenCols = this.getFrozenColumns();\n        var frozenLeft = this.getFrozenLeftColumnsCount();\n        var frozenRight = this.getFrozenRightColumnsCount();\n        if (frozenCols && !frozenLeft && !frozenRight) {\n            this.tablesCount = 2;\n        }\n        else if (!frozenCols && (frozenLeft || frozenRight)) {\n            if ((frozenLeft && !frozenRight) || (frozenRight && !frozenLeft)) {\n                this.tablesCount = 2;\n            }\n            else if (frozenLeft && frozenRight) {\n                this.tablesCount = 3;\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getTablesCount = function () {\n        return this.tablesCount;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerCells = [].slice.call(this.getHeaderContent().querySelectorAll('.e-headercell:not(.e-stackedheadercell)'));\n        var stdHdrCell = [].slice.call(this.getHeaderContent().querySelectorAll('.e-stackedheadercell'));\n        var cols = this.getColumns();\n        if (this.enableColumnVirtualization && this.getFrozenColumns()) {\n            var cells = this.contentModule.getHeaderCells();\n            headerCells = cells.length ? cells : headerCells;\n        }\n        for (var i = 0; i < headerCells.length; i++) {\n            var cell = headerCells[i];\n            if (this.allowGrouping || this.allowReordering || this.allowSorting) {\n                if (!cols[i].allowReordering || !cols[i].allowSorting || !cols[i].allowGrouping) {\n                    cell.classList.add('e-defaultcursor');\n                }\n                else {\n                    cell.classList.add('e-mousepointer');\n                }\n            }\n        }\n        for (var count = 0; count < stdHdrCell.length; count++) {\n            if (this.allowReordering) {\n                stdHdrCell[count].classList.add('e-mousepointer');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateColumnLevelFrozen();\n        this.updateFrozenColumns();\n        this.updateLockableColumns();\n    };\n    Grid.prototype.updateColumnLevelFrozen = function () {\n        var cols = this.columnModel;\n        var leftCols = [];\n        var rightCols = [];\n        var movableCols = [];\n        if (this.frozenLeftCount || this.frozenRightCount) {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                /* tslint:disable-next-line:no-any */\n                var col = cols[i];\n                if (col.freeze === 'Left') {\n                    col.freezeTable = 'frozen-left';\n                    leftCols.push(col);\n                }\n                else if (col.freeze === 'Right') {\n                    col.freezeTable = 'frozen-right';\n                    rightCols.push(col);\n                }\n                else {\n                    col.freezeTable = 'movable';\n                    movableCols.push(col);\n                }\n            }\n            this.columnModel = leftCols.concat(movableCols).concat(rightCols);\n        }\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        if (this.frozenLeftCount || this.frozenRightCount) {\n            return;\n        }\n        var cols = this.columnModel;\n        var directFrozenCount = this.frozenColumns;\n        var totalFrozenCount = this.getFrozenColumns();\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            /* tslint:disable-next-line:no-any */\n            var col = cols[i];\n            if (directFrozenCount) {\n                if (i < directFrozenCount) {\n                    col.freezeTable = 'frozen-left';\n                }\n                else {\n                    col.freezeTable = 'movable';\n                }\n            }\n            if (col.isFrozen && i >= directFrozenCount) {\n                col.freezeTable = 'frozen-left';\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n            else if (totalFrozenCount && !directFrozenCount) {\n                col.freezeTable = 'movable';\n            }\n        }\n    };\n    Grid.prototype.getFrozenLeftCount = function () {\n        return this.getFrozenColumns() || this.getFrozenLeftColumnsCount();\n    };\n    Grid.prototype.isFrozenGrid = function () {\n        return this.getFrozenColumns() !== 0 || this.getFrozenLeftColumnsCount() !== 0 || this.getFrozenRightColumnsCount() !== 0;\n    };\n    Grid.prototype.getFrozenMode = function () {\n        return this.frozenName;\n    };\n    Grid.prototype.updateLockableColumns = function () {\n        var cols = this.columnModel;\n        var frozenCount = 0;\n        var movableCount = 0;\n        var frozenColumns = this.getFrozenColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].lockColumn) {\n                if (i < frozenColumns) {\n                    cols.splice(frozenCount, 0, cols.splice(i, 1)[0]);\n                    frozenCount++;\n                }\n                else {\n                    cols.splice(frozenColumns + movableCount, 0, cols.splice(i, 1)[0]);\n                    movableCount++;\n                }\n            }\n        }\n    };\n    Grid.prototype.checkLockColumns = function (cols) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                this.checkLockColumns(cols[i].columns);\n            }\n            else if (cols[i].lockColumn) {\n                this.lockcolPositionCount++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        if (this.contentModule && this.enableColumnVirtualization && this.isFrozenGrid() && inview.length\n            && inview[0] > 0) {\n            var frozenCols = this.contentModule.ensureFrozenCols(columns);\n            columns = frozenCols;\n        }\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getQuery = function () {\n        return this.query;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets a frozen tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getFrozenRowByIndex = function (index) {\n        return this.getFrozenDataRows()[index];\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n    * Gets a frozen right tables row element by index.\n    * @param  {number} index - Specifies the row index.\n    * @return {Element}\n    */\n    Grid.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.contentModule.getFrozenRightRowByIndex(index);\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand')))) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                var row = closest(ele, '.e-row');\n                if (!isNullOrUndefined(row)) {\n                    var rowObj = this.getRowObjectFromUID(row.getAttribute('data-uid'));\n                    var rowIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n                    args = { row: row, rowData: rowObj.data, rowIndex: rowIndex };\n                }\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var tableName = this.columnModel[cellIndex].getFreezeTableName();\n                var rows = this.contentModule.getRows();\n                var index = cellIndex + this.getIndentCount();\n                if (this.isFrozenGrid()) {\n                    if (tableName === 'frozen-left') {\n                        rows = this.contentModule.getRows();\n                    }\n                    else if (tableName === 'movable') {\n                        index = cellIndex - frzCols - this.frozenLeftCount;\n                        rows = this.contentModule.getMovableRows();\n                    }\n                    else if (tableName === 'frozen-right') {\n                        index = cellIndex - (this.frozenLeftCount + this.movableCount);\n                        rows = this.contentModule.getFrozenRightRows();\n                    }\n                }\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = {};\n                var column = void 0;\n                if (Object.keys(rowsObject).length) {\n                    rowData = rowsObject[0].data;\n                    column = rowsObject[0].cells[index].column;\n                }\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets the Grid's frozen right content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getFrozenRightRows = function () {\n        return this.contentModule.getFrozenRightRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        return this.getAllDataRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getAllDataRows = function (includeAdd) {\n        if (isNullOrUndefined(this.getContentTable().querySelector('tbody'))) {\n            return [];\n        }\n        var tbody = this.isFrozenGrid() ? this.getFrozenLeftContentTbody() : this.getContentTable().querySelector('tbody');\n        var rows = [].slice.call(tbody.children);\n        if (this.frozenRows) {\n            var hdrTbody = this.isFrozenGrid() ? this.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                : this.getHeaderTable().querySelector('tbody');\n            var freezeRows = [].slice.call(hdrTbody.children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows, includAdd) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && (!rows[i].classList.contains('e-hiddenrow') || includAdd)) {\n                if (this.isCollapseStateEnabled()) {\n                    dRows[parseInt(rows[i].getAttribute(\"aria-rowindex\"))] = rows[i];\n                }\n                else {\n                    dRows.push(rows[i]);\n                }\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        return this.getAllMovableDataRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getAllMovableDataRows = function (includeAdd) {\n        if (!this.isFrozenGrid()) {\n            return [];\n        }\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * Gets all the Grid's frozen table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getFrozenDataRows = function () {\n        return this.getAllFrozenDataRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getAllFrozenDataRows = function (includeAdd) {\n        var rows = [].slice.call(this.getContent().querySelector('.e-frozencontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * Gets all the Grid's frozen right table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getFrozenRightDataRows = function () {\n        return this.getAllFrozenRightDataRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getAllFrozenRightDataRows = function (includeAdd) {\n        if (this.getFrozenMode() !== 'Right' && this.getFrozenMode() !== 'Left-Right') {\n            return [];\n        }\n        var rows = [].slice.call(this.getContent().querySelector('.e-frozen-right-content').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows, includeAdd);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        if (this.groupSettings.columns.length) {\n            fieldIdx = fieldIdx + this.groupSettings.columns.length;\n        }\n        if (this.childGrid || this.detailTemplate) {\n            fieldIdx++;\n        }\n        if (this.isRowDragable()) {\n            fieldIdx++;\n        }\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr[cells][fieldIdx]) ?\n                tr[cells][fieldIdx] : mTr[cells][fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = void 0;\n                if (this.frozenColumns) {\n                    mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                }\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData], { index: selectedRow[rowIdx] });\n                if (this.aggregates.length > 0) {\n                    this.notify(events.refreshFooterRenderer, {});\n                    if (this.groupSettings.columns.length > 0) {\n                        this.notify(events.groupAggregates, {});\n                    }\n                }\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(movableSelectedRow) && !isNullOrUndefined(movableSelectedRow['changes'])) {\n                    movableSelectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.refreshReactColumnTemplateByUid = function (columnUid) {\n        var _this = this;\n        if (this.isReact) {\n            //tslint:disable-next-line:no-any\n            this.clearTemplate(['columnTemplate'], undefined, function () {\n                var cells = 'cells';\n                var rowIdx = 'index';\n                var rowsObj = _this.getRowsObject();\n                var indent = _this.getIndentCount();\n                var cellIndex = _this.getNormalizedColumnIndex(columnUid);\n                for (var j = 0; j < rowsObj.length; j++) {\n                    if (rowsObj[j].isDataRow && !isNullOrUndefined(rowsObj[j].index)) {\n                        var cell = rowsObj[j][cells][cellIndex];\n                        var cellRenderer = new CellRenderer(_this, _this.serviceLocator);\n                        var td = _this.getCellFromIndex(rowsObj[j].index, cellIndex - indent);\n                        cellRenderer.refreshTD(td, cell, rowsObj[j].data, { index: rowsObj[j][rowIdx] });\n                    }\n                }\n            });\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {\n            rowObjects = rowObjects.filter(function (row) { return row.isDataRow; });\n        }\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n            if (this.aggregates.length > 0) {\n                this.notify(events.refreshFooterRenderer, {});\n                if (this.groupSettings.columns.length > 0) {\n                    this.notify(events.groupAggregates, {});\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        var col = this.getColumnByIndex(columnIndex);\n        return getCellByColAndRowIndex(this, col, rowIndex, columnIndex);\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        if (this.frozenName === 'Left-Right' && columnIndex >= this.movableCount) {\n            return undefined;\n        }\n        var index = this.getFrozenColumns() || this.getFrozenLeftColumnsCount();\n        return this.getMovableDataRows()[rowIndex] &&\n            this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - index];\n    };\n    /**\n     * Gets a frozen right table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getFrozenRightCellFromIndex = function (rowIndex, columnIndex) {\n        var index = this.getFrozenLeftColumnsCount() + this.getMovableColumnsCount();\n        var rows = this.getFrozenRightDataRows();\n        return rows[rowIndex] && rows[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - index];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * Gets a movable column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableColumnHeaderByIndex = function (index) {\n        var left = this.getFrozenColumns() || this.getFrozenLeftColumnsCount();\n        return this.getMovableVirtualHeader().querySelectorAll('.e-headercell')[index - left];\n    };\n    /**\n     * Gets a frozen right column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getFrozenRightColumnHeaderByIndex = function (index) {\n        var left = this.getFrozenLeftColumnsCount() + this.getMovableColumnsCount();\n        return this.getFrozenRightHeader().querySelectorAll('.e-headercell')[index - left];\n    };\n    /**\n     * Gets a frozen left column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getFrozenLeftColumnHeaderByIndex = function (index) {\n        return this.getFrozenVirtualHeader().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid, isMovable, isFrozenRight) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.isFrozenGrid()) {\n            if (!row || isMovable || isFrozenRight) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                if ((!row && this.getFrozenMode() === 'Left-Right') || isFrozenRight) {\n                    row = this.rowObject(this.contentModule.getFrozenRightRows(), uid);\n                }\n                return row;\n            }\n        }\n        if (isNullOrUndefined(row) && this.enableVirtualization && this.groupSettings.columns.length > 0) {\n            row = this.rowObject(this.vRows, uid);\n            return row;\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        var rows = [];\n        if (this.isFrozenGrid()) {\n            rows = this.contentModule.getMovableRows();\n        }\n        return rows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenRightRowsObject = function () {\n        var rows = [];\n        if (this.getFrozenMode() === 'Right' || this.getFrozenMode() === 'Left-Right') {\n            rows = this.contentModule.getFrozenRightRows();\n        }\n        return rows;\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        var column = this.getColumnByField(field);\n        return column ? this.getColumnHeaderByUid(column.uid) : undefined;\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        var element = this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']');\n        return element ? element.parentElement : undefined;\n    };\n    /**\n     * @hidden\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     * @blazorType GridColumn\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns().concat(this.getStackedColumns(this.columns)), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getStackedColumns = function (columns, stackedColumn) {\n        if (stackedColumn === void 0) { stackedColumn = []; }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (column.columns) {\n                stackedColumn.push(column);\n                this.getStackedColumns(column.columns, stackedColumn);\n            }\n        }\n        return stackedColumn;\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        return index + this.getIndentCount();\n    };\n    /**\n    * Gets indent cell count.\n    * @private\n    * @return {number}\n    */\n    Grid.prototype.getIndentCount = function () {\n        var index = 0;\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        if (this.isRowDragable() && isNullOrUndefined(this.rowDropSettings.targetID)) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditTemplate = function () {\n        return this.editTemplateFn;\n    };\n    /**\n     * Gets a compiled dialog edit header template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditHeaderTemplate = function () {\n        return this.editHeaderTemplateFn;\n    };\n    /**\n     * Gets a compiled dialog edit footer template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getEditFooterTemplate = function () {\n        return this.editFooterTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        for (var k = 0; k < this.columnModel.length; k++) {\n            if (this.columnModel[k].isPrimaryKey) {\n                keys.push(this.columnModel[k].field);\n            }\n        }\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        if (!this.isDestroyed) {\n            this.headerModule.refreshUI();\n            this.updateStackedFilter();\n            this.renderModule.refresh();\n        }\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : [];\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];\n    };\n    /**\n     * Gets the collection of selected columns uid.\n     * @return {string[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getSelectedColumnsUid = function () {\n        var _this = this;\n        var uid = [];\n        if (this.selectionModule) {\n            this.selectionModule.selectedColumnsIndexes.filter(function (i) { return uid.push(_this.getColumns()[i].uid); });\n        }\n        return uid;\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenRightColumnsCount = function () {\n        return this.frozenRightCount;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenLeftColumnsCount = function () {\n        return this.frozenLeftCount;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableColumnsCount = function () {\n        return this.movableCount;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setFrozenCount = function () {\n        this.frozenLeftCount = this.frozenRightCount = this.movableCount = 0;\n        this.visibleFrozenLeft = this.visibleFrozenRight = this.visibleMovable = 0;\n        this.frozenLeftColumns = [];\n        this.frozenRightColumns = [];\n        this.movableColumns = [];\n        this.splitFrozenCount(this.columns);\n        if (this.frozenColumns && (this.frozenLeftCount || this.frozenRightCount)) {\n            this.setProperties({ frozenColumns: 0 }, true);\n        }\n        this.setTablesCount();\n        if (this.frozenLeftCount && !this.frozenRightCount) {\n            this.frozenName = 'Left';\n        }\n        else if (this.frozenRightCount && !this.frozenLeftCount) {\n            this.frozenName = 'Right';\n        }\n        else if (this.frozenLeftCount && this.frozenRightCount) {\n            this.frozenName = 'Left-Right';\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenLeftCount = function () {\n        return this.visibleFrozenLeft;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenRightCount = function () {\n        return this.visibleFrozenRight;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleMovableCount = function () {\n        return this.visibleMovable;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenRightColumns = function () {\n        return this.frozenRightColumns;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenLeftColumns = function () {\n        return this.frozenLeftColumns;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableColumns = function () {\n        return this.movableColumns;\n    };\n    Grid.prototype.splitFrozenCount = function (columns) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].columns) {\n                this.splitFrozenCount(columns[i].columns);\n            }\n            else {\n                if (columns[i].freeze === 'Right') {\n                    if (columns[i].visible !== false) {\n                        this.visibleFrozenRight++;\n                    }\n                    ;\n                    this.frozenRightColumns.push(columns[i]);\n                    this.frozenRightCount++;\n                }\n                else if (columns[i].freeze === 'Left') {\n                    if (columns[i].visible !== false) {\n                        this.visibleFrozenLeft++;\n                    }\n                    ;\n                    this.frozenLeftColumns.push(columns[i]);\n                    this.frozenLeftCount++;\n                }\n                else {\n                    if (columns[i].visible !== false) {\n                        this.visibleMovable++;\n                    }\n                    ;\n                    this.movableColumns.push(columns[i]);\n                    this.movableCount++;\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    /**\n     * Get the current Filter operator and field.\n     * @return {Object}\n     */\n    Grid.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var columns = this.columnModel;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (columns[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        if (this.frozenLeftCount || this.frozenRightCount) {\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].visible && (columns[i].freeze === 'Left' || columns[i].freeze === 'Right')) {\n                    visibleFrozenColumns++;\n                }\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        if (!this.frozenLeftCount && !this.frozenRightCount) {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                if (cols[i].columns) {\n                    cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n                }\n                else {\n                    if (cols[i].isFrozen && cols[i].visible) {\n                        cnt++;\n                    }\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt, index) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt, index);\n            }\n            else {\n                if (cols[i].isFrozen && index > this.frozenColumns - 1) {\n                    cnt++;\n                }\n                index++;\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        if (this.pagerModule) {\n            this.pagerModule.goToPage(pageNo);\n        }\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        if (this.pagerModule) {\n            this.pagerModule.updateExternalMessage(message);\n        }\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        if (this.sortModule) {\n            this.sortModule.sortColumn(columnName, direction, isMultiSort);\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        if (this.sortModule) {\n            this.sortModule.clearSorting();\n        }\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        if (this.sortModule) {\n            this.sortModule.removeSortColumn(field);\n        }\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        if (this.filterModule) {\n            this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n        }\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function (fields) {\n        if (this.filterModule) {\n            this.filterModule.clearFiltering(fields);\n        }\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        if (this.filterModule) {\n            this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n        }\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRow(index, isToggle);\n        }\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRows(rowIndexes);\n        }\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearSelection();\n        }\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCell(cellIndex, isToggle);\n        }\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Grid.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        this.selectionModule.selectCellsByRange(startIndex, endIndex);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./#searchsettings/).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        if (this.searchModule) {\n            this.searchModule.search(searchString);\n        }\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./#printmode).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        if (this.printModule) {\n            this.printModule.print();\n        }\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        if (this.editModule) {\n            this.editModule.deleteRecord(fieldname, data);\n        }\n    };\n    /**\n     * Starts edit the selected row. At least one row must be selected before invoking this method.\n     * `editSettings.allowEditing` should be true.\n     * {% codeBlock src='grid/startEdit/index.md' %}{% endcodeBlock %}\n     * @return {void}\n     */\n    Grid.prototype.startEdit = function () {\n        if (this.editModule) {\n            this.editModule.startEdit();\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        if (this.editModule) {\n            this.editModule.endEdit();\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        if (this.editModule) {\n            this.editModule.closeEdit();\n        }\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        if (this.editModule) {\n            this.editModule.addRecord(data, index);\n        }\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        if (this.editModule) {\n            this.editModule.deleteRow(tr);\n        }\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Grid.prototype.editCell = function (index, field) {\n        if (this.editModule) {\n            this.editModule.editCell(index, field);\n        }\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     * {% codeBlock src='grid/saveCell/index.md' %}{% endcodeBlock %}\n     */\n    Grid.prototype.saveCell = function () {\n        if (this.editModule) {\n            this.editModule.saveCell();\n        }\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Grid.prototype.updateCell = function (rowIndex, field, value) {\n        if (this.editModule) {\n            this.editModule.updateCell(rowIndex, field, value);\n        }\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     *\n     * {% codeBlock src='grid/updateRow/index.md' %}{% endcodeBlock %}\n     *\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Grid.prototype.updateRow = function (index, data) {\n        if (this.editModule) {\n            this.editModule.updateRow(index, data);\n        }\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Grid.prototype.getBatchChanges = function () {\n        if (this.editModule) {\n            return this.editModule.getBatchChanges();\n        }\n        return {};\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     */\n    Grid.prototype.enableToolbarItems = function (items, isEnable) {\n        if (this.toolbarModule) {\n            this.toolbarModule.enableItems(items, isEnable);\n        }\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        if (this.clipboardModule) {\n            this.clipboardModule.copy(withHeader);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        var _this = this;\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail() && !this.isRowDragable()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = this.getFrozenMode() === 'Right' ? this.frozenRightCount : 0;\n        var parentOffset = this.element.offsetWidth;\n        var applyWidth = function (index, width) {\n            if (ispercentageWidth(_this)) {\n                var newWidth = (width / parentOffset * 100).toFixed(1) + '%';\n                headerCol[index].style.width = newWidth;\n                contentCol[index].style.width = newWidth;\n            }\n            else {\n                headerCol[index].style.width = width + 'px';\n                contentCol[index].style.width = width + 'px';\n            }\n            _this.notify(events.columnWidthChanged, { index: index, width: width });\n        };\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (indentWidth < 1) {\n            indentWidth = 1;\n        }\n        if (this.enableColumnVirtualization || this.isAutoGen) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            applyWidth(i, indentWidth);\n            i++;\n        }\n        if (this.isDetail()) {\n            applyWidth(i, indentWidth);\n            i++;\n        }\n        if (this.isRowDragable()) {\n            applyWidth(i, indentWidth);\n        }\n        this.isAutoGen = false;\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.resetIndentWidth = function () {\n        if (ispercentageWidth(this)) {\n            this.getHeaderTable().querySelector('.e-emptycell').removeAttribute('indentRefreshed');\n            this.widthService.setWidthToColumns();\n            this.recalcIndentWidth();\n        }\n        if ((this.width === 'auto' || typeof (this.width) === 'string' && this.width.indexOf('%') !== -1)\n            && this.getColumns().filter(function (col) { return (!col.width || col.width === 'auto') && col.minWidth; }).length > 0) {\n            var tgridWidth = this.widthService.getTableWidth(this.getColumns());\n            this.widthService.setMinwidthBycalculation(tgridWidth);\n        }\n        if (this.isFrozenGrid() && this.widthService) {\n            this.widthService.refreshFrozenScrollbar();\n        }\n        if (this.allowTextWrap && this.textWrapSettings.wrapMode != 'Content') {\n            this.notify(events.refreshHandlers, {});\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isRowDragable = function () {\n        return this.allowRowDragAndDrop && !this.rowDropSettings.targetID;\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumns(fromFName, toFName);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByIndex multiple times,\n     * then you won't get the same results every time.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByIndex(fromIndex, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid column positions by field index. If you invoke reorderColumnByTargetIndex multiple times,\n     * then you will get the same results every time.\n     * @param  {string} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        if (this.reorderModule) {\n            this.reorderModule.reorderColumnByTargetIndex(fieldName, toIndex);\n        }\n    };\n    /**\n     * Changes the Grid Row position with given indexes.\n     * @param  {number} fromIndexes - Defines the origin Indexes.\n     * @param  {number} toIndex - Defines the destination Index.\n     * @return {void}\n     */\n    Grid.prototype.reorderRows = function (fromIndexes, toIndex) {\n        if (this.rowDragAndDropModule) {\n            this.rowDragAndDropModule.reorderRows(fromIndexes, toIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.refreshDataSource = function (e, args) {\n        this.notify('refreshdataSource', e);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.disableRowDD = function (enable) {\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerRows = headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell');\n        var rows = this.getRows();\n        var disValue = enable ? 'none' : '';\n        setStyleAttribute(headerTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        setStyleAttribute(contentTable.querySelector('colgroup').childNodes[0], { 'display': disValue });\n        for (var i = 0; i < this.getRows().length; i++) {\n            var ele = rows[i].firstElementChild;\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n        for (var j = 0; j < headerTable.querySelectorAll('th.e-rowdragheader, th.e-mastercell').length; j++) {\n            var ele = headerRows[j];\n            enable ? addClass([ele], 'e-hide') : removeClass([ele], ['e-hide']);\n        }\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        if (this.resizeModule) {\n            this.resizeModule.autoFitColumns(fieldNames);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.renderColumnChooser(x, y, target);\n        }\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending', isFromGroup: true });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    if (column) {\n                        column.visible = false;\n                    }\n                    else {\n                        this_1.log('initial_action', { moduleName: 'group', columnName: gCols[i] });\n                    }\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            for (var i = 0; i < sCols.length; i++) {\n                this.sortedColumns.push(sCols[i].field);\n            }\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        this.editTemplateFn = templateCompiler(this.editSettings.template);\n        this.editHeaderTemplateFn = templateCompiler(this.editSettings.headerTemplate);\n        this.editFooterTemplateFn = templateCompiler(this.editSettings.footerTemplate);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.enableVerticalRendering = function () {\n        if (this.rowRenderingMode === 'Vertical') {\n            this.element.classList.add('e-row-responsive');\n        }\n        else {\n            this.element.classList.remove('e-row-responsive');\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.rowRenderingMode === 'Vertical') {\n            this.element.classList.add('e-row-responsive');\n        }\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n        this.enableBoxSelection();\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n            if (this.textWrapSettings.wrapMode !== 'Content') {\n                this.notify(events.refreshHandlers, {});\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n        if (this.textWrapSettings.wrapMode !== 'Content') {\n            this.notify(events.refreshHandlers, {});\n        }\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    /** @hidden */\n    Grid.prototype.freezeRefresh = function () {\n        this.isFreezeRefresh = true;\n        if (this.enableVirtualization) {\n            this.pageSettings.currentPage = 1;\n        }\n        this.componentRefresh();\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = element.classList.contains('e-headercell') ? htable : ctable;\n        var ele = element.classList.contains('e-headercell') ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (this.prevElement !== element || e.type === 'mouseout') {\n                this.toolTipObj.close();\n            }\n            var tagName = e.target.tagName;\n            var elemNames = ['A', 'BUTTON', 'INPUT'];\n            if (element && e.type !== 'mouseout' && !(Browser.isDevice && elemNames.indexOf(tagName) !== -1)) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.prevElement = element;\n                    this.toolTipObj.open(element);\n                }\n            }\n        }\n        this.hoverFrozenRows(e);\n    };\n    /** @hidden */\n    Grid.prototype.hoverFrozenRows = function (e) {\n        if (this.isFrozenGrid()) {\n            var row = parentsUntil(e.target, 'e-row');\n            if ([].slice.call(this.element.querySelectorAll('.e-frozenhover')).length && e.type === 'mouseout') {\n                var rows = [].slice.call(this.element.querySelectorAll('.e-frozenhover'));\n                for (var i = 0; i < rows.length; i++) {\n                    rows[i].classList.remove('e-frozenhover');\n                }\n            }\n            else if (row) {\n                var rows = [].slice.call(this.element.querySelectorAll('tr[aria-rowindex=\"' + row.getAttribute('aria-rowindex') + '\"]'));\n                rows.splice(rows.indexOf(row), 1);\n                for (var i = 0; i < rows.length; i++) {\n                    if (row.getAttribute('aria-selected') != 'true' && rows[i]) {\n                        rows[i].classList.add('e-frozenhover');\n                    }\n                    else if (rows[i]) {\n                        rows[i].classList.remove('e-frozenhover');\n                    }\n                }\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        if (this.clipMode === 'EllipsisWithTooltip') {\n            return true;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    Grid.prototype.onKeyPressed = function (e) {\n        if (e.action === 'tab' || e.action === 'shiftTab') {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.element, 'dblclick', this.dblClickHandler, this);\n        EventHandler.add(this.element, 'keydown', this.keyPressHandler, this);\n        /* tslint:disable-next-line:no-any */\n        EventHandler.add(window, 'resize', this.resetIndentWidth, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n        EventHandler.add(this.element, 'mouseout', this.mouseMoveHandler, this);\n        EventHandler.add(this.getContent(), 'touchstart', this.tapEvent, this);\n        EventHandler.add(document.body, 'keydown', this.keyDownHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.element, 'dblclick', this.dblClickHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'mouseout', this.mouseMoveHandler);\n        EventHandler.remove(this.element, 'keydown', this.keyPressHandler);\n        EventHandler.remove(this.getContent(), 'touchstart', this.tapEvent);\n        EventHandler.remove(document.body, 'keydown', this.keyDownHandler);\n        /* tslint:disable-next-line:no-any */\n        EventHandler.remove(window, 'resize', this.resetIndentWidth);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.on(events.keyPressed, this.onKeyPressed, this);\n        this.on(events.contentReady, this.blazorTemplate, this);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.off(events.keyPressed, this.onKeyPressed);\n    };\n    Grid.prototype.blazorTemplate = function () {\n        if (isBlazor()) {\n            if (this.pageSettings.template) {\n                updateBlazorTemplate(this.element.id + \"_template\", 'Template', this.pageSettings);\n            }\n            for (var i = 0; i < this.columnModel.length; i++) {\n                if (this.columnModel[i].template) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid, 'Template', this.columnModel[i], false);\n                }\n                if (this.columnModel[i].headerTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'headerTemplate', 'HeaderTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type == 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    var fieldName = this.columnModel[i].field;\n                    var tempID = this.element.id + this.columnModel[i].uid + 'filterTemplate';\n                    var filteredColumns = this.filterSettings.columns;\n                    for (var k = 0; k < filteredColumns.length; k++) {\n                        if (fieldName == filteredColumns[k].field) {\n                            blazorTemplates[tempID][0][fieldName] = filteredColumns[k].value;\n                        }\n                    }\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i], false);\n                }\n                if (this.filterSettings.type != 'FilterBar' && this.columnModel[i].filterTemplate) {\n                    updateBlazorTemplate(this.element.id + this.columnModel[i].uid + 'filterTemplate', 'FilterTemplate', this.columnModel[i]);\n                }\n            }\n            if (this.groupSettings.captionTemplate) {\n                updateBlazorTemplate(this.element.id + 'captionTemplate', 'CaptionTemplate', this.groupSettings);\n            }\n            var guid = 'guid';\n            for (var k = 0; k < this.aggregates.length; k++) {\n                for (var j = 0; j < this.aggregates[k].columns.length; j++) {\n                    if (this.aggregates[k].columns[j].footerTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'footerTemplate', 'FooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupFooterTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupFooterTemplate', 'GroupFooterTemplate', this.aggregates[k].columns[j]);\n                    }\n                    if (this.aggregates[k].columns[j].groupCaptionTemplate) {\n                        updateBlazorTemplate(this.element.id + this.aggregates[k].columns[j][guid] + 'groupCaptionTemplate', 'GroupCaptionTemplate', this.aggregates[k].columns[j]);\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @isGenericType true\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        if (isGroupAdaptive(this)) {\n            return isNullOrUndefined(this.currentViewData.records) ?\n                this.currentViewData : this.currentViewData.records;\n        }\n        if (this.groupSettings.enableLazyLoading) {\n            return this.currentViewData;\n        }\n        ;\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length && this.currentViewData.records) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop &&\n            !(parentsUntil(e.target, 'e-filterbarcell'))) {\n            e.preventDefault();\n        }\n        var args = this.getRowInfo(e.target);\n        var cancel = 'cancel';\n        args[cancel] = false;\n        var isDataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            isDataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        if (isBlazor()) {\n            var clonedColumn = extend({}, args.column);\n            args = { rowData: args.rowData, rowIndex: args.rowIndex,\n                cellIndex: args.cellIndex, column: clonedColumn };\n        }\n        if (isDataRow) {\n            this.trigger(events.recordClick, args);\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var dataRow = false;\n        var tr = closest(e.target, 'tr');\n        if (tr && tr.getAttribute('data-uid')) {\n            var rowObj = this.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            dataRow = rowObj ? rowObj.isDataRow : false;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        if (dataRow) {\n            this.trigger(events.recordDoubleClick, args);\n        }\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        var relatedTarget = e.relatedTarget;\n        var ariaOwns = relatedTarget ? relatedTarget.getAttribute('aria-owns') : null;\n        if ((!relatedTarget || (!parentsUntil(relatedTarget, 'e-grid') &&\n            (!isNullOrUndefined(ariaOwns) &&\n                (ariaOwns)) !== e.target.getAttribute('aria-owns')))\n            && !this.keyPress && this.isEdit && !Browser.isDevice) {\n            if (this.editSettings.mode === 'Batch') {\n                this.editModule.saveCell();\n                this.notify(events.editNextValCell, {});\n            }\n            if (this.editSettings.mode === 'Normal') {\n                this.editModule.editFormValidate();\n            }\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mergePersistGridData = function (persistedData) {\n        var data = this.getLocalData();\n        if (!(isNullOrUndefined(data) || (data === '')) || !isNullOrUndefined(persistedData)) {\n            var dataObj = !isNullOrUndefined(persistedData) ? persistedData : JSON.parse(data);\n            if (this.enableVirtualization) {\n                dataObj.pageSettings.currentPage = 1;\n            }\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        if (!(isBlazor() && this.isServerRendered)) {\n                            setColumnIndex(this[key]);\n                        }\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var storedColumns = storedColumn;\n        var _loop_2 = function (i) {\n            var localCol = columns.filter(function (tCol) { return tCol.index === storedColumns[i].index; })[0];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    this_2.mergeColumns(storedColumns[i].columns, localCol.columns);\n                    storedColumns[i] = extend(localCol, storedColumns[i], {}, true);\n                }\n                else {\n                    if (isBlazor()) {\n                        var guid = 'guid';\n                        storedColumns[i][guid] = localCol[guid];\n                        storedColumns[i].uid = localCol.uid;\n                    }\n                    storedColumns[i] = extend(localCol, storedColumns[i], {}, true);\n                }\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < storedColumns.length; i++) {\n            _loop_2(i);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyPressHandler = function (e) {\n        var presskey = extend(e, { cancel: false, });\n        this.trigger(\"keyPressed\", presskey);\n        if (presskey.cancel === true) {\n            e.stopImmediatePropagation();\n        }\n    };\n    Grid.prototype.keyDownHandler = function (e) {\n        if (e.altKey) {\n            if (e.keyCode === 74) { //alt j\n                if (this.keyA) { //alt A J\n                    this.notify(events.groupCollapse, { target: e.target, collapse: false });\n                    this.keyA = false;\n                }\n                else {\n                    this.focusModule.focusHeader();\n                    this.focusModule.addOutline();\n                }\n            }\n            if (e.keyCode === 87) { //alt w\n                this.focusModule.focusContent();\n                this.focusModule.addOutline();\n            }\n            if (e.keyCode === 65) { //alt A\n                this.keyA = true;\n            }\n            if (e.keyCode === 72 && this.keyA) { //alt A H\n                this.notify(events.groupCollapse, { target: e.target, collapse: true });\n                this.keyA = false;\n            }\n        }\n        if (e.keyCode === 13) {\n            this.notify(events.enterKeyHandler, e);\n        }\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        else {\n            this.keyPress = true;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization, this);\n        if (!(isBlazor() && this.isServerRendered)) {\n            setColumnIndex(this.columns);\n        }\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     * @blazorType List<GridColumn>\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.setFrozenCount();\n        var fCnt = this.getContent().querySelector('.e-frozen-left-content');\n        var frCnt = this.getContent().querySelector('.e-frozen-right-content');\n        var isColFrozen = !this.frozenRightCount && !this.frozenLeftCount;\n        var isFrozen = this.getFrozenColumns() !== 0;\n        if (!isFrozen && ((!fCnt && this.frozenLeftCount) || (!frCnt && this.frozenRightCount) || (fCnt && !this.frozenLeftCount)\n            || (frCnt && !this.frozenRightCount))) {\n            this.tableIndex = 0;\n            this.tablesCount = 1;\n            if (this.enableColumnVirtualization) {\n                this.columnModel = [];\n                this.updateColumnModel(this.columns);\n            }\n            this.freezeRefresh();\n        }\n        else if (isColFrozen && ((this.getFrozenColumns() === 1 && !fCnt) || (this.getFrozenColumns() === 0 && fCnt))) {\n            this.tableIndex = 0;\n            this.tablesCount = 1;\n            if (this.enableColumnVirtualization) {\n                this.columnModel = [];\n                this.updateColumnModel(this.columns);\n            }\n            this.freezeRefresh();\n        }\n        else {\n            this.isPreventScrollEvent = true;\n            this.updateColumnObject();\n            this.checkLockColumns(this.getColumns());\n            this.refresh();\n            if (this.isFrozenGrid()) {\n                var mTbl = this.contentModule.getMovableContent().querySelector('.e-table');\n                remove(mTbl.querySelector('colgroup'));\n                var colGroup = ((this.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n                mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n                if (this.getFrozenMode() === 'Left-Right') {\n                    var frTbl = this.contentModule.getFrozenRightContent().querySelector('.e-table');\n                    remove(frTbl.querySelector('colgroup'));\n                    var colGrp = ((this.getHeaderContent()\n                        .querySelector('.e-frozen-right-header').querySelector('colgroup')).cloneNode(true));\n                    frTbl.insertBefore(colGrp, frTbl.querySelector('tbody'));\n                }\n            }\n        }\n        if (this.isFrozenGrid()) {\n            var left = this.getContent().querySelector('.e-movablescrollbar').scrollLeft;\n            this.headerModule.getMovableHeader().scrollLeft = left;\n            this.contentModule.getMovableContent().scrollLeft = left;\n        }\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     * @blazorType void\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n    /* tslint:disable-next-line:no-any */\n    workbook, isBlob) {\n        if (isBlazor()) {\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob);\n            return null;\n        }\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     * @blazorType void\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, isBlob) {\n        if (isBlazor()) {\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob);\n            return null;\n        }\n        return this.excelExportModule ?\n            this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob) : null;\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     * @blazorType void\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, pdfDoc, isBlob) {\n        if (isBlazor()) {\n            this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n            return null;\n        }\n        return this.pdfExportModule ? this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : null;\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.groupColumn(columnName);\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.groupExpandAll = function () {\n        if (this.groupModule) {\n            this.groupModule.expandAll();\n        }\n    };\n    /**\n    * Collapses all the grouped rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.groupCollapseAll = function () {\n        if (this.groupModule) {\n            this.groupModule.collapseAll();\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    // public expandCollapseRows(target: Element): void {\n    //     if (this.groupModule) {\n    //         this.groupModule.expandCollapseRows(target);\n    //     }\n    // }\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearGrouping = function () {\n        if (this.groupModule) {\n            this.groupModule.clearGrouping();\n        }\n    };\n    /**\n     * Ungroups a column by column name.\n     *\n     * {% codeBlock src='grid/ungroupColumn/index.md' %}{% endcodeBlock %}\n     *\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        if (this.groupModule) {\n            this.groupModule.ungroupColumn(columnName);\n        }\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    Grid.prototype.openColumnChooser = function (x, y) {\n        if (this.columnChooserModule) {\n            this.columnChooserModule.openColumnChooser(x, y);\n        }\n    };\n    Grid.prototype.scrollRefresh = function () {\n        var _this = this;\n        var refresh = function () {\n            _this.scrollModule.refresh();\n            _this.off(events.contentReady, refresh);\n        };\n        this.on(events.contentReady, refresh, this);\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    // public detailCollapse(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.collapse(target);\n    //     }\n    // }\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.detailCollapseAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.collapseAll();\n        }\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    // public detailExpand(target: number | Element): void {\n    //     if (this.detailRowModule) {\n    //         this.detailRowModule.expand(target);\n    //     }\n    // }\n    /**\n    * Expands all the detail rows of the Grid.\n    * @return {void}\n    */\n    Grid.prototype.detailExpandAll = function () {\n        if (this.detailRowModule) {\n            this.detailRowModule.expandAll();\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Grid.prototype.clearCellSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearCellSelection();\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Grid.prototype.clearRowSelection = function () {\n        if (this.selectionModule) {\n            this.selectionModule.clearRowSelection();\n        }\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectCells = function (rowCellIndexes) {\n        if (this.selectionModule) {\n            this.selectionModule.selectCells(rowCellIndexes);\n        }\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Grid.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        if (this.selectionModule) {\n            this.selectionModule.selectRowsByRange(startIndex, endIndex);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    //tslint:disable-next-line:no-any\n    Grid.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * @hidden\n     * @private\n     */\n    Grid.prototype.log = function (type, args) {\n        this.loggerModule ? this.loggerModule.log(type, args) : (function () { return 0; })();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.applyBiggerTheme = function (element) {\n        if (this.element.classList.contains('e-bigger')) {\n            element.classList.add('e-bigger');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getPreviousRowData = function () {\n        var previousRowData = this.getRowsObject()[this.getRows().length - 1].data;\n        return previousRowData;\n    };\n    /**\n     * Hides the scrollbar placeholder of Grid content when grid content is not overflown.\n     * @return {void}\n     */\n    Grid.prototype.hideScroll = function () {\n        var content = this.getContent().querySelector('.e-content');\n        var scrollBar = this.getContent().querySelector('.e-scrollbar');\n        if (content.scrollHeight <= content.clientHeight) {\n            this.scrollModule.removePadding();\n            content.style.overflowY = 'auto';\n        }\n        if (this.isFrozenGrid() && scrollBar) {\n            var mvblScrollBar = this.getContent().querySelector('.e-movablescrollbar');\n            var mvblChild = this.getContent().querySelector('.e-movablechild');\n            scrollBar.style.display = 'flex';\n            if (mvblScrollBar.offsetWidth >= mvblChild.offsetWidth) {\n                scrollBar.style.display = 'none';\n                this.notify(events.frozenHeight, 0);\n            }\n        }\n    };\n    /**\n     * Get row index by primary key or row data.\n     * @param  {string} value - Defines the primary key value.\n     * @param  {Object} value - Defines the row data.\n     */\n    Grid.prototype.getRowIndexByPrimaryKey = function (value) {\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        value = typeof value === 'object' ? value[pkName] : value;\n        var rows = this.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDetailRow || rows[i].isCaptionRow) {\n                continue;\n            }\n            var pKvalue = rows[i].data[pkName];\n            if (pkName.split('.').length > 1) {\n                pKvalue = performComplexDataOperation(pkName, rows[i].data);\n            }\n            if (pKvalue === value) {\n                return rows[i].index;\n            }\n        }\n        return -1;\n    };\n    ;\n    /**\n    * @hidden\n    */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByFieldFromAllCols = function (field) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        var gCols = this.columnModel;\n        for (var i = 0; i < gCols.length; i++) {\n            if (field === gCols[i].field) {\n                column = gCols[i];\n            }\n        }\n        return column;\n    };\n    /**\n    * @hidden\n    */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.grabColumnByUidFromAllCols = function (uid) {\n        var column;\n        this.columnModel = [];\n        this.updateColumnModel(this.columns);\n        var gCols = this.columnModel;\n        for (var i = 0; i < gCols.length; i++) {\n            if (uid === gCols[i].uid) {\n                column = gCols[i];\n            }\n        }\n        return column;\n    };\n    /**\n     * Get all filtered records from the Grid and it returns array of objects for the local dataSource, returns a promise object if the Grid has remote data.\n     * @return {Object[] | Promise<Object>}\n     * @deprecated\n     */\n    Grid.prototype.getFilteredRecords = function () {\n        if (this.allowFiltering && this.filterSettings.columns.length) {\n            var query = this.renderModule.data.generateQuery(true);\n            if (this.dataSource && this.renderModule.data.isRemote() && this.dataSource instanceof DataManager) {\n                return this.renderModule.data.getData(this.dataSource, query);\n            }\n            else {\n                if (this.dataSource instanceof DataManager) {\n                    return this.dataSource.executeLocal(query);\n                }\n                else {\n                    return new DataManager(this.dataSource, query).executeLocal(query);\n                }\n            }\n        }\n        return [];\n    };\n    Grid.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * @hidden\n     */\n    // Need to have all columns while filtering with ColumnVirtualization.\n    Grid.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.dblClickHandler(e);\n                this.notify(events.doubleTap, e);\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowUid = function (prefix) {\n        return \"\" + prefix + this.rowUid++;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableVirtualContent = function () {\n        return this.getContent().querySelector('.e-movablecontent');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenVirtualContent = function () {\n        return this.getContent().querySelector('.e-frozencontent');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableVirtualHeader = function () {\n        return this.getHeaderContent().querySelector('.e-movableheader');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenVirtualHeader = function () {\n        return this.getHeaderContent().querySelector('.e-frozenheader');\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowElementByUID = function (uid) {\n        var rowEle;\n        var rows = [];\n        if (this.isFrozenGrid()) {\n            var fRows = [].slice.call(this.getFrozenVirtualContent().querySelector('tbody').children);\n            var mRows = [].slice.call(this.getMovableVirtualContent().querySelector('tbody').children);\n            var frozenRigtRows = [];\n            if (this.tablesCount === 3) {\n                frozenRigtRows = [].slice.call(this.getContent().querySelector('.e-frozen-right-content').querySelector('tbody').children);\n            }\n            if (this.frozenRows) {\n                rows = [].slice.call(this.getFrozenVirtualHeader().querySelector('tbody').children);\n                rows = rows.concat([].slice.call(this.getMovableVirtualHeader().querySelector('tbody').children));\n                if (this.tablesCount === 3) {\n                    var frHdr = this.getHeaderContent().querySelector('.e-frozen-right-header');\n                    rows = rows.concat([].slice.call(frHdr.querySelector('tbody').children)).concat(frozenRigtRows);\n                }\n                ;\n                rows = rows.concat(fRows).concat(mRows);\n            }\n            else {\n                rows = fRows.concat(mRows).concat(frozenRigtRows);\n            }\n        }\n        else {\n            var cntRows = [].slice.call(this.getContent().querySelector('tbody').children);\n            if (this.frozenRows) {\n                rows = [].slice.call(this.getHeaderContent().querySelector('tbody').children);\n                rows = rows.concat(cntRows);\n            }\n            else {\n                rows = cntRows;\n            }\n        }\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            if (row.getAttribute('data-uid') === uid) {\n                rowEle = row;\n                break;\n            }\n        }\n        return rowEle;\n    };\n    /**\n    * Gets the hidden columns from the Grid.\n    * @return {Column[]}\n    * @blazorType List<GridColumn>\n    */\n    Grid.prototype.getHiddenColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible === false) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     *  calculatePageSizeByParentHeight\n     * @deprecated\n     */\n    Grid.prototype.calculatePageSizeByParentHeight = function (containerHeight) {\n        if (this.allowPaging) {\n            if ((this.allowTextWrap && this.textWrapSettings.wrapMode == 'Header') || (!this.allowTextWrap)) {\n                var pagesize = 0;\n                if (containerHeight.indexOf('%') != -1) {\n                    containerHeight = parseInt(containerHeight) / 100 * this.element.clientHeight;\n                }\n                var nonContentHeight = this.getNoncontentHeight() + this.getRowHeight();\n                if (containerHeight > nonContentHeight) {\n                    var contentHeight = 0;\n                    contentHeight = containerHeight - this.getNoncontentHeight();\n                    pagesize = (contentHeight / this.getRowHeight());\n                }\n                if (pagesize > 0) {\n                    return Math.floor(pagesize);\n                }\n            }\n        }\n        return 0;\n    };\n    Grid.prototype.getNoncontentHeight = function () {\n        var height = 0;\n        if (!isNullOrUndefined(this.getHeaderContent().clientHeight)) {\n            height += this.getHeaderContent().clientHeight;\n        }\n        if (this.toolbar && !isNullOrUndefined(this.element.querySelector('.e-toolbar').clientHeight)) {\n            height += this.element.querySelector('.e-toolbar').clientHeight;\n        }\n        if (this.allowPaging && !isNullOrUndefined(this.element.querySelector('.e-gridpager').clientHeight)) {\n            height += this.element.querySelector('.e-gridpager').clientHeight;\n        }\n        if (this.showColumnChooser && !isNullOrUndefined(this.element.querySelector(\".e-columnheader\").clientHeight)) {\n            height += this.element.querySelector(\".e-columnheader\").clientHeight;\n        }\n        if (this.allowGrouping && this.groupSettings.showDropArea && !isNullOrUndefined(this.element.querySelector('.e-groupdroparea').clientHeight)) {\n            height += this.element.querySelector('.e-groupdroparea').clientHeight;\n        }\n        if (this.aggregates.length > 0 && !isNullOrUndefined(this.element.querySelector('.e-summaryrow').clientHeight)) {\n            for (var i = 0; i < this.element.querySelectorAll('.e-summaryrow').length; i++) {\n                height += this.element.querySelectorAll('.e-summaryrow')[i].clientHeight;\n            }\n        }\n        return height;\n    };\n    /**\n     *To perform aggregate operation on a column.\n     *@param  {AggregateColumnModel} summaryCol - Pass Aggregate Column details.\n     *@param  {Object} summaryData - Pass JSON Array for which its field values to be calculated.\n     * @deprecated\n     */\n    Grid.prototype.getSummaryValues = function (summaryCol, summaryData) {\n        return DataUtil.aggregates[summaryCol.type.toLowerCase()](summaryData, summaryCol.field);\n    };\n    /**\n     * Sends a Post request to export Grid to Excel data in server side.\n     * @param  {string} url - Pass Url for server side excel export action.\n     * @return {void}\n     */\n    Grid.prototype.serverExcelExport = function (url) {\n        this.isExcel = true;\n        this.exportGrid(url);\n    };\n    /**\n     * Sends a Post request to export Grid to Pdf data in server side.\n     * @param  {string} url - Pass Url for server side pdf export action.\n     * @return {void}\n     */\n    Grid.prototype.serverPdfExport = function (url) {\n        this.isExcel = false;\n        this.exportGrid(url);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.exportGrid = function (url) {\n        var _this = this;\n        var grid = this;\n        var query = grid.getDataModule().generateQuery(true);\n        var state = new UrlAdaptor().processQuery(new DataManager({ url: '' }), query);\n        var queries = state.data;\n        var gridModel = JSON.parse(this.addOnPersist(['allowGrouping', 'allowPaging', 'pageSettings', 'sortSettings', 'allowPdfExport', 'allowExcelExport', 'aggregates',\n            'filterSettings', 'groupSettings', 'columns', 'locale', 'searchSettings']));\n        gridModel.filterSettings.columns = JSON.parse(queries).where;\n        gridModel.columns.forEach(function (e) {\n            var column = grid.getColumnByUid(e.uid);\n            if (column) {\n                e.headerText = column.headerText;\n                if (!isNullOrUndefined(column.template)) {\n                    e.template = \"true\";\n                }\n                ;\n                if (e.format) {\n                    e.format = getNumberFormat(_this.getFormat(e.format), e.type, _this.isExcel);\n                }\n            }\n            if (e.columns) {\n                _this.setHeaderText(e.columns);\n            }\n        });\n        var form = this.createElement('form', { id: 'ExportForm', styles: 'display:none;' });\n        var gridInput = this.createElement('input', { id: 'gridInput', attrs: { name: \"gridModel\" } });\n        gridInput.value = JSON.stringify(gridModel);\n        form.method = \"POST\";\n        form.action = url;\n        form.appendChild(gridInput);\n        document.body.appendChild(form);\n        form.submit();\n        form.remove();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setHeaderText = function (columns) {\n        for (var i = 0; i < columns.length; i++) {\n            var column = this.getColumnByUid(columns[i].uid);\n            columns[i].headerText = column.headerText;\n            if (!isNullOrUndefined(column.template)) {\n                columns[i].template = \"true\";\n            }\n            ;\n            if (columns[i].format) {\n                columns[i].format = getNumberFormat(this.getFormat(columns[i].format), columns[i].type, this.isExcel);\n            }\n            if (columns[i].columns) {\n                this.setHeaderText(columns[i].columns);\n            }\n        }\n    };\n    Grid.prototype.getFormat = function (format) {\n        return typeof (format) === 'object' ? !isNullOrUndefined(format.format) ?\n            format.format : format.skeleton : format;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isCollapseStateEnabled = function () {\n        var isExpanded = 'isExpanded';\n        return this[isExpanded] === false;\n    };\n    /**\n     * @param {number} key - Defines the primary key value.\n     * @param {Object} value - Defines the row data.\n     * @deprecated\n     */\n    Grid.prototype.updateRowValue = function (key, rowData) {\n        var args = {\n            requestType: 'save', data: rowData,\n        };\n        this.showSpinner();\n        this.notify(events.updateData, args);\n        this.refresh();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setForeignKeyData = function () {\n        this.dataBind();\n        var colpending = this.getDataModule().getForeignKeyDataState();\n        if (colpending.isPending) {\n            this.getDataModule().setForeignKeyDataState({});\n            colpending.resolver();\n        }\n        else {\n            this.getDataModule().setForeignKeyDataState({ isDataChanged: false });\n            if (this.contentModule || this.headerModule) {\n                this.renderModule.render();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.resetFilterDlgPosition = function (field) {\n        var header = this.getColumnHeaderByField(field);\n        if (header) {\n            var target = header.querySelector('.e-filtermenudiv');\n            var filterDlg = this.element.querySelector('.e-filter-popup');\n            if (target && filterDlg) {\n                var gClient = this.element.getBoundingClientRect();\n                var fClient = target.getBoundingClientRect();\n                if (filterDlg) {\n                    filterDlg.style.left = (fClient.right - gClient.left).toString() + 'px';\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.renderTemplates = function () {\n        var portals = 'portals';\n        this.notify('reactTemplateRender', this[portals]);\n        this.renderReactTemplates();\n    };\n    /**\n     * Apply the changes to the Grid without refreshing the rows.\n     * @param  {BatchChanges} changes - Defines changes to be updated.\n     * @return {void}\n     */\n    Grid.prototype.batchUpdate = function (changes) {\n        this.processRowChanges(changes);\n    };\n    /**\n     * Apply the changes to the Grid in one batch after 50ms without refreshing the rows.\n     * @param  {BatchChanges} changes - Defines changes to be updated.\n     * @return {void}\n     */\n    Grid.prototype.batchAsyncUpdate = function (changes) {\n        this.processBulkRowChanges(changes);\n    };\n    Grid.prototype.processBulkRowChanges = function (changes) {\n        var _this = this;\n        if (!this.dataToBeUpdated) {\n            this.dataToBeUpdated = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);\n            setTimeout(function () {\n                _this.processRowChanges(_this.dataToBeUpdated);\n                _this.dataToBeUpdated = null;\n            }, this.asyncTimeOut);\n        }\n        else {\n            var loopstring = ['addedRecords', 'changedRecords', 'deletedRecords'];\n            var keyField = this.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < loopstring.length; i++) {\n                if (changes[loopstring[i]]) {\n                    compareChanges(this, changes, loopstring[i], keyField);\n                }\n            }\n        }\n    };\n    Grid.prototype.processRowChanges = function (changes) {\n        var _this = this;\n        var keyField = this.getPrimaryKeyFieldNames()[0];\n        changes = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);\n        var promise = this.getDataModule().saveChanges(changes, keyField, {}, this.getDataModule().generateQuery().requiresCount());\n        if (this.getDataModule().isRemote()) {\n            promise.then(function (e) {\n                _this.setNewData();\n            });\n        }\n        else {\n            this.setNewData();\n        }\n    };\n    Grid.prototype.setNewData = function () {\n        var _this = this;\n        var oldValues = JSON.parse(JSON.stringify(this.getCurrentViewRecords()));\n        var getData = this.getDataModule().getData({}, this.getDataModule().generateQuery().requiresCount());\n        getData.then(function (e) {\n            _this.bulkRefresh(e.result, oldValues, e.count);\n        });\n    };\n    Grid.prototype.deleteRowElement = function (row) {\n        var tr = this.getRowElementByUID(row.uid);\n        var index = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        remove(tr);\n        if (this.getFrozenColumns()) {\n            var mtr = this.getMovableRows()[index];\n            remove(mtr);\n        }\n    };\n    Grid.prototype.bulkRefresh = function (result, oldValues, count) {\n        var _this = this;\n        var rowObj = this.getRowsObject();\n        var keyField = this.getPrimaryKeyFieldNames()[0];\n        var _loop_3 = function (i) {\n            if (!result.filter(function (e) { return e[keyField] === rowObj[i].data[keyField]; }).length) {\n                this_3.deleteRowElement(rowObj[i]);\n                rowObj.splice(i, 1);\n                i--;\n            }\n            out_i_1 = i;\n        };\n        var this_3 = this, out_i_1;\n        for (var i = 0; i < rowObj.length; i++) {\n            _loop_3(i);\n            i = out_i_1;\n        }\n        var _loop_4 = function (i) {\n            var isRowExist;\n            oldValues.filter(function (e) {\n                if (e[keyField] === result[i][keyField]) {\n                    if (e !== result[i]) {\n                        _this.setRowData(result[i][keyField], result[i]);\n                    }\n                    isRowExist = true;\n                }\n            });\n            if (!isRowExist) {\n                this_4.renderRowElement(result[i], i);\n            }\n        };\n        var this_4 = this;\n        for (var i = 0; i < result.length; i++) {\n            _loop_4(i);\n        }\n        this.currentViewData = result;\n        var rows = [].slice.call(this.getContentTable().querySelectorAll('.e-row'));\n        resetRowIndex(this, this.getRowsObject(), rows);\n        setRowElements(this);\n        if (this.allowPaging) {\n            this.notify(events.inBoundModelChanged, { module: 'pager', properties: { totalRecordsCount: count } });\n        }\n    };\n    Grid.prototype.renderRowElement = function (data, index) {\n        var row = new RowRenderer(this.serviceLocator, null, this);\n        var model = new RowModelGenerator(this);\n        var modelData = model.generateRows([data]);\n        var tr = row.render(modelData[0], this.getColumns());\n        var mTr;\n        var mTbody;\n        this.addRowObject(modelData[0], index);\n        var tbody = this.getContentTable().querySelector('tbody');\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (this.getFrozenColumns()) {\n                var moveTbody = this.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n            }\n        }\n        if (this.getFrozenColumns()) {\n            mTr = renderMovable(tr, this.getFrozenColumns(), this);\n            if (this.frozenRows && index < this.frozenRows) {\n                mTbody = this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.appendChild(mTr);\n            if (this.height === 'auto') {\n                this.notify(events.frozenHeight, {});\n            }\n        }\n        if (this.frozenRows && index < this.frozenRows) {\n            tbody = this.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.getContent().querySelector('tbody');\n        }\n        tbody = this.getContent().querySelector('tbody');\n        tbody.appendChild(tr);\n    };\n    Grid.prototype.addRowObject = function (row, index) {\n        var frzCols = this.getFrozenColumns();\n        if (frzCols) {\n            var mRows = this.getMovableRowsObject();\n            var mRow = row.clone();\n            mRow.cells = mRow.cells.slice(frzCols);\n            row.cells = row.cells.slice(0, frzCols);\n            mRows.splice(index, 1, mRow);\n        }\n        this.getRowsObject().splice(index, 1, row);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getHeight = function (height) {\n        if (!Number.isInteger(height) && height.indexOf('%') != -1) {\n            height = parseInt(height) / 100 * this.element.clientHeight;\n        }\n        else if (!Number.isInteger(height) && this.height !== 'auto') {\n            height = parseInt(height);\n        }\n        else {\n            height = this.height;\n        }\n        return height;\n    };\n    /** @hidden */\n    Grid.prototype.getFrozenRightContent = function () {\n        return this.getContent().querySelector('.e-frozen-right-content');\n    };\n    /** @hidden */\n    Grid.prototype.getFrozenRightHeader = function () {\n        return this.getHeaderContent().querySelector('.e-frozen-right-header');\n    };\n    /** @hidden */\n    Grid.prototype.getMovableHeaderTbody = function () {\n        return this.getMovableVirtualHeader().querySelector('tbody');\n    };\n    /** @hidden */\n    Grid.prototype.getMovableContentTbody = function () {\n        return this.getMovableVirtualContent().querySelector('tbody');\n    };\n    /** @hidden */\n    Grid.prototype.getFrozenHeaderTbody = function () {\n        return this.getFrozenVirtualHeader().querySelector('tbody');\n    };\n    /** @hidden */\n    Grid.prototype.getFrozenLeftContentTbody = function () {\n        return this.getFrozenVirtualContent().querySelector('tbody');\n    };\n    /** @hidden */\n    Grid.prototype.getFrozenRightHeaderTbody = function () {\n        return this.getFrozenRightHeader().querySelector('tbody');\n    };\n    /** @hidden */\n    Grid.prototype.getFrozenRightContentTbody = function () {\n        var cnt = this.getFrozenRightContent();\n        var tbody;\n        if (cnt) {\n            tbody = this.getFrozenRightContent().querySelector('tbody');\n        }\n        return tbody;\n    };\n    /** @hidden */\n    Grid.prototype.showResponsiveCustomFilter = function () {\n        if (this.filterModule) {\n            this.filterModule.showCustomFilter();\n        }\n    };\n    /** @hidden */\n    Grid.prototype.showResponsiveCustomSort = function () {\n        if (this.sortModule) {\n            this.sortModule.showCustomFilter();\n        }\n    };\n    var Grid_1;\n    __decorate([\n        Property()\n    ], Grid.prototype, \"parentDetails\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAutoFill\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Complex({}, ResizeSettings)\n    ], Grid.prototype, \"resizeSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableInfiniteScrolling\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property('Ellipsis')\n    ], Grid.prototype, \"clipMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Complex({}, InfiniteScrollSettings)\n    ], Grid.prototype, \"infiniteScrollSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property('Horizontal')\n    ], Grid.prototype, \"rowRenderingMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableAdaptiveUI\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableImmutableMode\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Complex({}, ColumnChooserSettings)\n    ], Grid.prototype, \"columnChooserSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableHeaderFocus\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Grid.prototype, \"hierarchyPrintMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Property({})\n    ], Grid.prototype, \"currentAction\", void 0);\n    __decorate([\n        Property('default version')\n    ], Grid.prototype, \"ej2StatePersistenceVersion\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfAggregateQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelAggregateQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportDetailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStartHelper\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"commandClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"keyPressed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePaste\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeAutoFill\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"exportGroupCaption\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"lazyLoadGroupExpand\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"lazyLoadGroupCollapse\", void 0);\n    Grid = Grid_1 = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue, isBlazor } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, appendChildren, getDatePredicate, getObject, extendObjWithFn, eventPromise, setChecked } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilterBase` module is used to handle filtering action.\n */\nvar CheckBoxFilterBase = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilterBase(parent) {\n        this.existingPredicate = {};\n        this.foreignKeyQuery = new Query();\n        /** @hidden */\n        this.filterState = true;\n        this.values = {};\n        this.renderEmpty = false;\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilterBase.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilterBase.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        EventHandler.add(this.dlg, 'keyup', this.keyupHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.add(elem, 'keyup', this.searchHandler, this);\n        }\n    };\n    CheckBoxFilterBase.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        EventHandler.remove(this.dlg, 'keyup', this.keyupHandler);\n        var elem = this.dialogObj.element.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilterBase.prototype.foreignKeyFilter = function (args, fColl, mPredicate) {\n        var _this = this;\n        var fPredicate = {};\n        var filterCollection = [];\n        var query = this.foreignKeyQuery.clone();\n        this.options.column.dataSource.\n            executeQuery(query.where(mPredicate)).then(function (e) {\n            _this.options.column.columnData = e.result;\n            _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: _this.options.column });\n            args.ejpredicate = fPredicate.predicate.predicates;\n            var fpred = fPredicate.predicate.predicates;\n            for (var i = 0; i < fpred.length; i++) {\n                filterCollection.push({\n                    field: fpred[i].field,\n                    predicate: 'or',\n                    matchCase: fpred[i].ignoreCase,\n                    ignoreAccent: fpred[i].ignoreAccent,\n                    operator: fpred[i].operator,\n                    value: fpred[i].value,\n                    type: _this.options.type\n                });\n            }\n            args.filterCollection = filterCollection.length ? filterCollection :\n                fColl.filter(function (col) { return col.field = _this.options.field; });\n            _this.options.handler(args);\n        });\n    };\n    CheckBoxFilterBase.prototype.foreignFilter = function (args, value) {\n        var operator = this.options.isRemote ?\n            (this.options.column.type === 'string' ? 'contains' : 'equal') : (this.options.column.type ? 'contains' : 'equal');\n        var initalPredicate = new Predicate(this.options.column.foreignKeyValue, operator, value, true, this.options.ignoreAccent);\n        this.foreignKeyFilter(args, [args.filterCollection], initalPredicate);\n    };\n    CheckBoxFilterBase.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilterBase.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilterBase.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilterBase.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilterBase.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        var str = 'object';\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== str) {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type;\n        this.options.format = options.format || '';\n        this.options.ignoreAccent = options.ignoreAccent || false;\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.options.uid = options.column.uid;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilterBase.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            attrs: { uid: this.options.column.uid },\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilterBase.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.notify(events.cBoxFltrBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.renderResponsiveFilter(options);\n        this.dlg.setAttribute('aria-label', this.getLocalizedLabel('ExcelFilterDialogARIA'));\n        if (options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlg);\n        }\n        else {\n            this.parent.element.appendChild(this.dlg);\n        }\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? 'none' : this.options.height + 'px';\n        this.dialogObj.show();\n        var content = this.dialogObj.element.querySelector('.e-dlg-content');\n        content.appendChild(this.sBox);\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilterBase.prototype.renderResponsiveFilter = function (options) {\n        if (options.isResponsiveFilter) {\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.position = { X: '', Y: '' };\n            this.dialogObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dialogObj.width = '100%';\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogCreated = function (e) {\n        if (this.options.isResponsiveFilter) {\n            this.dialogObj.element.style.left = '0px';\n        }\n        else {\n            if (!Browser.isDevice) {\n                getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n            }\n            else {\n                this.dialogObj.position = { X: 'center', Y: 'center' };\n            }\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilterBase.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilterBase.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            var filterTemplateCol = this.options.columns.filter(function (col) { return col.getFilterItemTemplate(); });\n            // tslint:disable-next-line:no-any\n            var registeredTemplate = this.parent.registeredTemplate;\n            if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n            }\n            if (this.parent.isReact) {\n                this.parent.destroyTemplate(['filterItemTemplate']);\n                this.parent.renderTemplates();\n            }\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n            this.parent.notify(events.filterDialogClose, {});\n        }\n    };\n    /** @hidden */\n    CheckBoxFilterBase.prototype.clearFilter = function (col) {\n        /* tslint:disable-next-line:max-line-length */\n        var args = { instance: this, handler: this.clearFilter, cancel: false };\n        this.parent.notify(events.fltrPrevent, args);\n        if (args.cancel) {\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: col ? col.field : this.options.field });\n    };\n    CheckBoxFilterBase.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input' && e.target.classList.contains('e-searchinput')) {\n                var value = e.target.value;\n                if (this.options.column.type === 'boolean') {\n                    if (value !== '' &&\n                        this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = true;\n                    }\n                    else if (value !== '' &&\n                        this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(value.toLowerCase()) !== -1) {\n                        value = false;\n                    }\n                }\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.options.isRemote ?\n                            (this.options.column.type === 'string' ? 'contains' : 'equal') :\n                            (this.options.column.type === 'date' || this.options.column.type === 'datetime' ||\n                                this.options.column.type === 'boolean' ? 'equal' : 'contains'),\n                        value: value, matchCase: false, type: this.options.column.type, ignoreAccent: this.options.ignoreAccent\n                    },\n                    field: this.options.field\n                };\n                value !== undefined && value !== null && value !== '' ? this.isForeignColumn(this.options.column) ?\n                    this.foreignFilter(args, value) : this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                if (e.keyCode === 13) {\n                    this.fltrBtnHandler();\n                }\n                else {\n                    var text = e.target.firstChild.textContent.toLowerCase();\n                    if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                        this.fltrBtnHandler();\n                    }\n                    else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                        this.clearFilter();\n                    }\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    /** @hidden */\n    CheckBoxFilterBase.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var check = checked;\n        var optr = 'equal';\n        var ddlValue = this.dialogObj.element.querySelector('.e-dropdownlist');\n        if (ddlValue) {\n            this.options.operator = optr = ddlValue.ej2_instances[0].value;\n        }\n        this.isMenuNotEqual = this.options.operator === 'notequal';\n        var searchInput;\n        if (!this.options.hideSearchbox) {\n            searchInput = this.searchBox.querySelector('.e-searchinput');\n        }\n        var caseSen = this.options.allowCaseSensitive;\n        var defaults = {\n            field: this.options.field, predicate: this.isMenuNotEqual ? 'and' : 'or', uid: this.options.uid,\n            operator: optr, type: this.options.type, matchCase: caseSen, ignoreAccent: this.options.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual && searchInput && searchInput.value === '') {\n            optr = this.isMenuNotEqual ? 'equal' : 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = this.isMenuNotEqual ? 'or' : 'and';\n            defaults.operator = optr;\n        }\n        var value;\n        var val;\n        var length;\n        var fObj;\n        var coll = [];\n        if (checked.length !== this.itemsCnt || (searchInput && searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                if (value === '' || isNullOrUndefined(value)) {\n                    coll = coll.concat(CheckBoxFilterBase.generateNullValuePredicates(defaults));\n                }\n                else {\n                    coll.push(fObj);\n                }\n                var args = {\n                    instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                    arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value, cancel: false\n                };\n                this.parent.notify(events.fltrPrevent, args);\n                if (args.cancel) {\n                    return;\n                }\n            }\n            if (this.options.type === 'date' || this.options.type === 'datetime') {\n                length = check.length - 1;\n                val = this.values[parentsUntil(check[length], 'e-ftrchk').getAttribute('uid')];\n                if (isNullOrUndefined(val) && isNotEqual) {\n                    coll.push({\n                        field: defaults.field, matchCase: defaults.matchCase, operator: 'equal',\n                        predicate: 'and', value: null\n                    });\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    /** @hidden */\n    CheckBoxFilterBase.generateNullValuePredicates = function (defaults) {\n        var coll = [];\n        if (defaults.type === 'string') {\n            coll.push({\n                field: defaults.field, ignoreAccent: defaults.ignoreAccent, matchCase: defaults.matchCase,\n                operator: defaults.operator, predicate: defaults.predicate, value: ''\n            });\n        }\n        coll.push({\n            field: defaults.field,\n            matchCase: defaults.matchCase, operator: defaults.operator, predicate: defaults.predicate, value: null\n        });\n        coll.push({\n            field: defaults.field, matchCase: defaults.matchCase, operator: defaults.operator,\n            predicate: defaults.predicate, value: undefined\n        });\n        return coll;\n    };\n    CheckBoxFilterBase.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilterBase.prototype.isForeignColumn = function (col) {\n        return col.isForeignColumn ? col.isForeignColumn() : false;\n    };\n    CheckBoxFilterBase.prototype.refreshCheckboxes = function () {\n        var _this = this;\n        var val = this.sInput.value;\n        var column = this.options.column;\n        var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();\n        var foreignQuery = this.options.query.clone();\n        var pred = query.queries.filter(function (e) { return e && e.fn === 'onWhere'; })[0];\n        query.queries = [];\n        foreignQuery.queries = [];\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.options.isRemote ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'contains' : 'equal');\n        var matchCase = true;\n        var ignoreAccent = this.options.ignoreAccent;\n        var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        var moduleName = this.options.dataManager.adaptor.getModuleName;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? true : 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {\n                parsed = (moduleName() === 'ODataAdaptor' || 'ODataV4Adaptor') ? false : 'false';\n            }\n            operator = 'equal';\n        }\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n        }\n        this.addDistinct(query);\n        /* tslint:disable-next-line:max-line-length */\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: field, column: column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query, value: parsed\n        };\n        if (isBlazor() && !this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = {};\n        }\n        this.parent.trigger(events.actionBegin, args, function (filterargs) {\n            filterargs.operator = (isBlazor() && filterargs.excelSearchOperator !== 'none') ?\n                filterargs.excelSearchOperator : filterargs.operator;\n            predicte = new Predicate(field, filterargs.operator, parsed, filterargs.matchCase, filterargs.ignoreAccent);\n            if (_this.options.type === 'date' || _this.options.type === 'datetime') {\n                operator = 'equal';\n                if (isNullOrUndefined(parsed) && val.length) {\n                    return;\n                }\n                var filterObj = {\n                    field: field, operator: operator, value: parsed, matchCase: matchCase,\n                    ignoreAccent: ignoreAccent\n                };\n                predicte = getDatePredicate(filterObj, _this.options.type);\n            }\n            if (val.length) {\n                predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;\n                query.where(predicte);\n            }\n            else if (!isNullOrUndefined(pred)) {\n                query.where(pred.e);\n            }\n            filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1000;\n            var fPredicate = {};\n            showSpinner(_this.spinner);\n            _this.renderEmpty = false;\n            if (_this.isForeignColumn(column) && val.length) {\n                var colData = ('result' in column.dataSource) ? new DataManager(column.dataSource.result) :\n                    column.dataSource;\n                // tslint:disable-next-line:no-any\n                colData.executeQuery(query).then(function (e) {\n                    var columnData = _this.options.column.columnData;\n                    _this.options.column.columnData = e.result;\n                    _this.parent.notify(events.generateQuery, { predicate: fPredicate, column: column });\n                    if (fPredicate.predicate.predicates.length) {\n                        foreignQuery.where(fPredicate.predicate);\n                    }\n                    else {\n                        _this.renderEmpty = true;\n                    }\n                    _this.options.column.columnData = columnData;\n                    foreignQuery.take(filterargs.filterChoiceCount);\n                    _this.search(filterargs, foreignQuery);\n                });\n            }\n            else {\n                query.take(filterargs.filterChoiceCount);\n                _this.search(filterargs, query);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.search = function (args, query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilterBase.prototype.getPredicateFromCols = function (columns) {\n        var predicates = CheckBoxFilterBase.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var isGrid = this.parent.getForeignKeyColumns !== undefined;\n        var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = void 0;\n            if (isGrid && this.parent.getColumnByField(prop).isForeignColumn()) {\n                col = getColumnByForeignKeyValue(prop, foreignColumn);\n            }\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilterBase.prototype.getQuery = function () {\n        return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n    };\n    CheckBoxFilterBase.prototype.getAllData = function () {\n        var _this = this;\n        var query = this.getQuery();\n        query.requiresCount(); //consider take query\n        this.addDistinct(query);\n        var args = {\n            requestType: events.filterChoiceRequest, query: query, filterChoiceCount: null\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args, function (args) {\n            args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n            query.take(args.filterChoiceCount);\n            if (_this.parent.dataSource && 'result' in _this.parent.dataSource) {\n                _this.filterEvent(args, query);\n            }\n            else {\n                _this.processDataOperation(query, true);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.addDistinct = function (query) {\n        var filteredColumn = DataUtil.distinct(this.options.filteredColumns, 'field');\n        if (filteredColumn.indexOf(this.options.column.field) <= -1) {\n            filteredColumn = filteredColumn.concat(this.options.column.field);\n        }\n        query.distinct(filteredColumn);\n        return query;\n    };\n    CheckBoxFilterBase.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var defObj = eventPromise(args, query);\n        this.parent.trigger(events.dataStateChange, defObj.state);\n        var def = defObj.deffered;\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilterBase.prototype.processDataOperation = function (query, isInitial) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.isForeignColumn(this.options.column) && isInitial) {\n            var colData = ('result' in this.options.column.dataSource) ?\n                new DataManager(this.options.column.dataSource.result) :\n                this.options.column.dataSource;\n            this.foreignKeyQuery.params = query.params;\n            allPromise.push(colData.executeQuery(this.foreignKeyQuery));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            for (var j = 0; j < e.length; j++) {\n                runArray[i++](e[j].result);\n            }\n        });\n    };\n    CheckBoxFilterBase.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };\n        this.parent.notify(events.beforeCheckboxRenderer, args1);\n        if (args1.executeQuery) {\n            var query = new Query();\n            if (this.parent.searchSettings && this.parent.searchSettings.key.length) {\n                var sSettings = this.parent.searchSettings;\n                var fields = sSettings.fields.length ? sSettings.fields : this.options.columns.map(function (f) { return f.field; });\n                /* tslint:disable-next-line:max-line-length */\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n            if ((this.options.filteredColumns.length)) {\n                var cols = [];\n                for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                    var filterColumn = this.options.filteredColumns[i];\n                    if (this.options.uid) {\n                        filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;\n                        if (filterColumn.uid !== this.options.uid) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                    else {\n                        if (filterColumn.field !== this.options.field) {\n                            cols.push(this.options.filteredColumns[i]);\n                        }\n                    }\n                }\n                var predicate = this.getPredicateFromCols(cols);\n                if (predicate) {\n                    query.where(predicate);\n                }\n            }\n            // query.select(this.options.field);\n            var result = new DataManager(args1.dataSource).executeLocal(query);\n            var col = this.options.column;\n            this.filteredData = CheckBoxFilterBase.getDistinct(result, this.options.field, col, this.foreignKeyData).records || [];\n        }\n        var data = args1.executeQuery ? this.filteredData : args1.dataSource;\n        this.processDataSource(null, true, data, args1);\n        if (this.sInput) {\n            this.sInput.focus();\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: this.options.field, columnType: this.options.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.notify(events.cBoxFltrComplete, args);\n    };\n    CheckBoxFilterBase.prototype.processDataSource = function (query, isInitial, dataSource, args) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial, args);\n    };\n    CheckBoxFilterBase.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilterBase.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getObject(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilterBase.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n        this.setFocus(parentsUntil(elem, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.keyupHandler = function (e) {\n        this.setFocus(parentsUntil(e.target, 'e-ftrchk'));\n    };\n    CheckBoxFilterBase.prototype.setFocus = function (elem) {\n        var prevElem = this.dlg.querySelector('.e-chkfocus');\n        if (prevElem) {\n            prevElem.classList.remove('e-chkfocus');\n        }\n        if (elem) {\n            elem.classList.add('e-chkfocus');\n        }\n    };\n    CheckBoxFilterBase.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n            setChecked(cBox.previousSibling, checked);\n        }\n    };\n    CheckBoxFilterBase.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            if (!this.options.isResponsiveFilter) {\n                this.dialogObj.element.querySelector('.e-btn').focus();\n            }\n        }\n    };\n    CheckBoxFilterBase.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        setChecked(elem.querySelector('input'), checked);\n        var label = elem.querySelector('.e-label');\n        var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        if (typeof value === 'boolean') {\n            label.innerHTML = value === true ? this.getLocalizedLabel('FilterTrue') : this.getLocalizedLabel('FilterFalse');\n        }\n        addClass([label], ['e-checkboxfiltertext']);\n        if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel('SelectAll')) {\n            label.innerHTML = '';\n            var isReactCompiler = this.parent.isReact && this.options.column.filter\n                && typeof (this.options.column.filter.itemTemplate) !== 'string';\n            if (isReactCompiler) {\n                this.options.template(dummyData, this.parent, 'filterItemTemplate', null, null, null, label);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(label, this.options.template(dummyData, this.parent, 'filterItemTemplate'));\n            }\n        }\n        return elem;\n    };\n    CheckBoxFilterBase.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var disabled = false;\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n            btn.disabled = false;\n        }\n        var input = elem.previousSibling;\n        setChecked(input, false);\n        input.indeterminate = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n            setChecked(input, true);\n        }\n        else if (selected) {\n            className = ['e-stop'];\n            input.indeterminate = true;\n        }\n        else {\n            className = ['e-uncheck'];\n            disabled = true;\n            if (btn) {\n                btn.disabled = true;\n            }\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n    };\n    CheckBoxFilterBase.prototype.createFilterItems = function (data, isInitial, args1) {\n        var _a;\n        var cBoxes = this.parent.createElement('div');\n        var btn;\n        var disabled = false;\n        if (!this.options.isResponsiveFilter) {\n            btn = this.dialogObj.btnObj[0];\n        }\n        var nullCounter = -1;\n        var key = 'ejValue';\n        if (!args1.executeQuery) {\n            key = args1.field;\n        }\n        for (var i = 0; i < data.length; i++) {\n            var val = getValue(key, data[i]);\n            if (val === '' || isNullOrUndefined(val)) {\n                nullCounter = nullCounter + 1;\n            }\n        }\n        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;\n        if (data.length && !this.renderEmpty) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            var isRndere = void 0;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue(key, data[i]);\n                var value = getValue(this.options.field, data[i]);\n                if (this.options.formatFn) {\n                    value = this.valueFormatter.toView(value, this.options.formatFn);\n                }\n                var args_1 = { value: value, column: this.options.column, data: data[i] };\n                this.parent.notify(events.filterCboxValue, args_1);\n                value = args_1.value;\n                if ((value === '' || isNullOrUndefined(value))) {\n                    if (isRndere) {\n                        continue;\n                    }\n                    isRndere = true;\n                }\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            this.updateIndeterminatenBtn();\n            if (btn) {\n                btn.disabled = false;\n            }\n            disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = '';\n            appendChildren(this.cBox, [].slice.call(cBoxes.children));\n            if (btn) {\n                btn.disabled = true;\n            }\n            disabled = true;\n        }\n        if (btn) {\n            this.filterState = !btn.disabled;\n            btn.dataBind();\n        }\n        var args = { requestType: events.filterChoiceRequest, dataSource: this.renderEmpty ||\n                (isBlazor() && this.parent.isServerRendered) ? [] : data };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.notify(events.cBoxFltrComplete, args);\n        this.parent.notify(events.refreshCustomFilterOkBtn, { disabled: disabled });\n        hideSpinner(this.spinner);\n    };\n    CheckBoxFilterBase.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            var checkState = this.result[value];\n            return this.options.operator === 'notequal' ? !checkState : checkState;\n        }\n    };\n    CheckBoxFilterBase.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;\n        while (len--) {\n            value = json[len];\n            value = getObject(field, value); //local remote diff, check with mdu   \n            if (!(value in lookup)) {\n                var obj = {};\n                obj[ejValue] = value;\n                lookup[value] = true;\n                if (isForeignKey) {\n                    var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                    setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                    value = getValue(column.foreignKeyValue, foreignDataObj);\n                }\n                setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                setValue('dataObj', json[len], obj);\n                result.push(obj);\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilterBase.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilterBase.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilterBase.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        var operate = 'or';\n        first = CheckBoxFilterBase.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilterBase.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilterBase.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    if (cols[p].predicate === 'and' && cols[p].operator === 'equal') {\n                        predicate = predicate[operate](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                    else {\n                        predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p], cols[p].type), cols[p].type, cols[p].ignoreAccent);\n                    }\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilterBase.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilterBase.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            if (filter.type === 'string' || isNullOrUndefined(filter.type) && typeof (filter.value) === 'string') {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilterBase.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    return CheckBoxFilterBase;\n}());\nexport { CheckBoxFilterBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat, applyBiggerTheme, performComplexDataOperation } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { parentsUntil, appendChildren, extend, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilterBase = /** @class */ (function (_super) {\n    __extends(ExcelFilterBase, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilterBase(parent, customFltrOperators) {\n        var _this = _super.call(this, parent) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilterBase.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilterBase.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilterBase.prototype.createMenu = function (type, isFiltered, isCheckIcon, eleOptions) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        // tslint:disable-next-line:no-any\n        if (this.parent.allowSorting && this.parent.getModuleName() === 'grid'\n            && !this.options.isResponsiveFilter) {\n            var hdrele = this.parent.getColumnHeaderByUid(eleOptions.uid).getAttribute('aria-sort');\n            var colIsSort = this.parent.getColumnByField(eleOptions.field).allowSorting;\n            var isAsc = (!colIsSort || hdrele === 'Ascending') ? 'e-disabled e-excel-ascending' : 'e-excel-ascending';\n            var isDesc = (!colIsSort || hdrele === 'Descending') ? 'e-disabled e-excel-descending' : 'e-excel-descending';\n            var ascName = (type === 'string') ? this.getLocalizedLabel('SortAtoZ') : (type === 'datetime' || type === 'date') ?\n                this.getLocalizedLabel('SortByOldest') : this.getLocalizedLabel('SortSmallestToLargest');\n            var descName = (type === 'string') ? this.getLocalizedLabel('SortZtoA') : (type === 'datetime' || type === 'date') ?\n                this.getLocalizedLabel('SortByNewest') : this.getLocalizedLabel('SortLargestToSmallest');\n            ul.appendChild(this.createMenuElem(ascName, isAsc, 'e-sortascending'));\n            ul.appendChild(this.createMenuElem(descName, isDesc, 'e-sortdescending'));\n            var separator = this.parent.createElement('li', { className: 'e-separator e-menu-item e-excel-separator' });\n            ul.appendChild(separator);\n        }\n        if (!this.options.isResponsiveFilter) {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        }\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n        this.parent.notify(events.beforeFltrcMenuOpen, { element: this.menu });\n        this.parent.notify(events.refreshCustomFilterClearBtn, { isFiltered: isFiltered });\n    };\n    ExcelFilterBase.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilterBase.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilterBase.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilterBase.prototype.clickExHandler = function (e) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem) {\n            if (this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n                this.clearFilter();\n                this.closeDialog();\n            }\n            else if (this.options.isResponsiveFilter\n                && this.getLocalizedLabel(options[this.options.type]) === menuItem.innerText.trim()) {\n                this.hoverHandler(e);\n            }\n        }\n    };\n    ExcelFilterBase.prototype.destroyCMenu = function () {\n        this.isCMenuOpen = false;\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n            this.parent.notify(events.renderResponsiveCmenu, { target: null, header: '', isOpen: false });\n        }\n    };\n    ExcelFilterBase.prototype.hoverHandler = function (e) {\n        if (this.options.isResponsiveFilter && e.type === 'mouseover') {\n            return;\n        }\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose.bind(this),\n                cssClass: this.options.isResponsiveFilter ? 'e-res-contextmenu-wrapper' : ''\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (this.options.isResponsiveFilter) {\n                var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n                var content = document.querySelector('.e-responsive-dialog > .e-dlg-header-content');\n                var height = content.offsetHeight + 4;\n                this.menuObj.element.style.height = 'calc(100% - ' + height + 'px)';\n                this.menuObj.open(height, 0, document.body);\n                var header = this.getLocalizedLabel(options[this.options.type]);\n                this.parent.notify(events.renderResponsiveCmenu, {\n                    target: this.menuObj.element.parentElement, header: header, isOpen: true\n                });\n            }\n            else {\n                if (Browser.isDevice) {\n                    var contextRect = this.getContextBounds(this.menuObj);\n                    pos.top = (window.innerHeight - contextRect.height) / 2;\n                    pos.left = (window.innerWidth - contextRect.width) / 2;\n                    this.closeDialog();\n                }\n                else {\n                    pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n                    pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n                }\n                this.menuObj.open(pos.top, pos.left, e.target);\n            }\n            applyBiggerTheme(this.parent.element, this.menuObj.element.parentElement);\n        }\n    };\n    ExcelFilterBase.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n                selectedMenu = 'between';\n            }\n            else {\n                selectedMenu = 'customfilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilterBase.prototype.preventClose = function (args) {\n        if (this.options && this.options.isResponsiveFilter && args.event) {\n            var target = args.event.target;\n            var isFilterBack = target.classList.contains('e-resfilterback')\n                || target.classList.contains('e-res-back-btn') || target.classList.contains('e-menu-item');\n            args.cancel = !isFilterBack;\n        }\n        else {\n            if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n                args.cancel = true;\n            }\n        }\n    };\n    ExcelFilterBase.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilterBase.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        var targetBorder = target.offsetWidth - target.clientWidth;\n        targetBorder = targetBorder ? targetBorder + 1 : 0;\n        return (leftPos < 1) ? (targetPosition.right + 1 - targetBorder) : (targetPosition.left - contextWidth - 1 + targetBorder);\n    };\n    ExcelFilterBase.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2), options);\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        if (this.parent.enableRtl) {\n            this.dlg.classList.add('e-rtl');\n        }\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.parent.notify(events.filterDialogCreated, {});\n        this.wireExEvents();\n    };\n    ExcelFilterBase.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilterBase.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.parent.notify(events.filterCmenuSelect, {});\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    /** @hidden */\n    ExcelFilterBase.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e ? e.element : undefined;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        if (this.options.isResponsiveFilter) {\n            var responsiveCnt = document.querySelector('.e-resfilter > .e-dlg-content > .e-xl-customfilterdiv');\n            responsiveCnt.appendChild(this.dlgDiv);\n        }\n        else {\n            this.parent.element.appendChild(this.dlgDiv);\n        }\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    if (isBlazor()) {\n                        row.querySelector('.e-xlfl-valuediv').children[0].focus();\n                    }\n                    else {\n                        row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                    }\n                }\n                else {\n                    //(row.cells[1].querySelector('input:not([type=hidden])') as HTMLElement).focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.renderResponsiveDialog();\n        this.dlgDiv.setAttribute('aria-label', this.getLocalizedLabel('CustomFilterDialogARIA'));\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilterBase.prototype.renderResponsiveDialog = function () {\n        if (this.options.isResponsiveFilter) {\n            var rowResponsiveDlg = document.querySelector('.e-row-responsive-filter');\n            if (rowResponsiveDlg) {\n                rowResponsiveDlg.classList.remove('e-row-responsive-filter');\n            }\n            this.dlgObj.buttons = [{}];\n            this.dlgObj.header = undefined;\n            this.dlgObj.position = { X: '', Y: '' };\n            this.dlgObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-xl-customfilterdiv');\n            this.dlgObj.width = '100%';\n            this.dlgObj.isModal = false;\n            this.dlgObj.showCloseIcon = false;\n        }\n    };\n    /** @hidden */\n    ExcelFilterBase.prototype.removeDialog = function () {\n        if (isBlazor()) {\n            var columns = this.options.columns || [];\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        this.parent.notify(events.customFilterClose, {});\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['filterTemplate']);\n            this.parent.renderTemplates();\n        }\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n        this.parent.notify(events.filterDialogClose, {});\n    };\n    ExcelFilterBase.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        if (!this.options.isResponsiveFilter) {\n            this.dlgObj.element.style.top = '0px';\n        }\n        else {\n            var content = document.querySelector('.e-responsive-dialog > .e-dlg-header-content');\n            var height = content.offsetHeight + 4;\n            this.dlgObj.element.style.top = height + 'px';\n        }\n        if (!this.options.isResponsiveFilter && Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.parent.notify(events.beforeCustomFilterOpen, { column: column, dialog: this.dialogObj });\n        this.dlgObj.show();\n        applyBiggerTheme(this.parent.element, this.dlgObj.element.parentElement);\n        this.parent.notify(events.setCustomFilterHeader, { title: this.getLocalizedLabel('CustomFilter') });\n    };\n    ExcelFilterBase.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    /** @hidden */\n    ExcelFilterBase.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.options.column.filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.options.column.filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.options.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * @hidden\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilterBase.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField ? this.parent.getColumnByField(fieldName) : this.options.column;\n        var field = this.isForeignColumn(col) ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        var arg = {\n            instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n            arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, arg);\n        if (arg.cancel) {\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (!isNullOrUndefined(secondValue) && !isNullOrUndefined(secondOperator)) {\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /*tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (this.isForeignColumn(col)) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(this.options.column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        var col = this.options.column;\n        this.dropOptr = new DropDownList(extend({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl,\n            change: this.dropDownValueChange.bind(this)\n        }, col.filter.params));\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilterBase.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilterBase.prototype.dropDownValueChange = function (args) {\n        if (args.element.id.includes('-xlfl-frstoptr')) {\n            this.firstOperator = args.value.toString();\n        }\n        else {\n            this.secondOperator = args.value.toString();\n        }\n    };\n    /**\n     * @hidden\n     */\n    ExcelFilterBase.prototype.getFilterUIInfo = function () {\n        return { firstOperator: this.firstOperator, secondOperator: this.secondOperator, field: this.options.field };\n    };\n    ExcelFilterBase.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilterBase.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else if (isFirst && col.type === 'string' && !col.filter.operator) {\n            operator = 'startswith';\n        }\n        else {\n            operator = isFirst ? col.filter.operator || 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilterBase.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilterBase.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /*tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        this.firstOperator = optr.operator;\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        this.secondOperator = optr.operator;\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilterBase.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilterBase.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.options.filteredColumns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.options.column;\n            if (isFilteredCol && elementId) {\n                data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n            }\n            var isReactCompiler = this.parent.isReact && typeof (this.options.column.filterTemplate) !== 'string';\n            var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n            if (isReactCompiler) {\n                this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID, null, null, valueDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n                appendChildren(valueDiv, element);\n            }\n            if (isBlazor()) {\n                valueDiv.children[0].classList.add(elementId);\n                if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n                }\n            }\n            else {\n                valueDiv.querySelector('input').id = isComplex ? complexFieldName + elementId : column + elementId;\n            }\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n                if (isNullOrUndefined(flValue)) {\n                    flValue = undefined;\n                }\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n        var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n        if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n            data = { column: predicates instanceof Array ? predicates[predIndex] : predicates };\n            var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                (this.options.column.columnData.length === 1 ? 0 : 1) : predIndex;\n            data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                fltrPredicates[indx].value;\n            if (this.options.foreignKeyValue) {\n                data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n            }\n        }\n        return data;\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /*tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n            locale: this.parent.locale,\n        }, options.column.filter.params));\n        this.datePicker.appendTo(inputValue);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n            locale: this.parent.locale,\n        }, options.column.filter.params));\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilterBase.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue,\n            locale: this.parent.locale,\n        }, options.column.filter.params));\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /*tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.options.column;\n        var isForeignColumn = this.isForeignColumn(colObj);\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.getQuery(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            text: fValue\n        }, colObj.filter.params));\n        if (dataSource && 'result' in dataSource) {\n            var defObj = eventPromise({ requestType: 'stringfilterrequest' }, this.getQuery());\n            this.parent.trigger(events.dataStateChange, defObj.state);\n            var def = defObj.deffered;\n            def.promise.then(function (e) {\n                actObj.dataSource = new DataManager(e);\n            });\n        }\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    return ExcelFilterBase;\n}(CheckBoxFilterBase));\nexport { ExcelFilterBase };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { ResponsiveDialogAction } from '../base/enum';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend, parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.currentTarget = null;\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.serviceLocator = locator;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction, isFromGroup: sCol.isFromGroup });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: columnName });\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isSort);\n        }\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;        \n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting',\n                type: events.actionBegin, target: this.currentTarget, cancel: false\n            } : {\n                requestType: 'sorting', type: events.actionBegin, cancel: false,\n                target: this.currentTarget\n            };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        this.sortedColumns.length = 0;\n        var sortColumns = this.sortSettings.columns;\n        for (var i = 0; i < sortColumns.length; i++) {\n            if (!sortColumns[i].isFromGroup) {\n                this.sortedColumns.push(sortColumns[i].field);\n            }\n        }\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (cols.length === 0 && this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin, target: this.currentTarget\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        var isServerRendered = 'isServerRendered';\n        if (isBlazor() && this.parent[isServerRendered]) {\n            return;\n        }\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns.slice(); _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.clearSorting();\n        }\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        this.currentTarget = null;\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv') &&\n            !parentsUntil(e.target, 'e-stackedheadercell') &&\n            !(gObj.allowSelection && gObj.selectionSettings.allowColumnSelection &&\n                e.target.classList.contains('e-headercell'))) {\n            var gObj_1 = this.parent;\n            var colObj = gObj_1.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n        if (parentsUntil(e.target, 'e-excel-ascending') ||\n            parentsUntil(e.target, 'e-excel-descending')) {\n            var colUid = closest(e.target, '.e-filter-popup').getAttribute('uid');\n            var direction = isNullOrUndefined(parentsUntil(e.target, 'e-excel-descending')) ?\n                'Ascending' : 'Descending';\n            this.sortColumn(gObj.getColumnByUid(colUid).field, direction, false);\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        this.currentTarget = e.target;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n            if (isBlazor() && !this.parent.isJsComponent) {\n                this.sortSettings.columns = this.sortSettings.columns;\n            }\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch ||\n                (navigator.userAgent.indexOf('Mac OS') !== -1 && e.metaKey));\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (this.parent.allowMultiSorting && (!isNullOrUndefined(target) || this.parent.isContextMenuOpen())) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (fieldNames.indexOf(cols[i].field) === -1 || isNullOrUndefined(header)) {\n                continue;\n            }\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (isNullOrUndefined(header) || (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    /**\n     * To show the responsive custom sort dialog\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.showCustomFilter = function () {\n        this.responsiveDialogRenderer.showResponsiveDialog();\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { createElement, classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerModule.element, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('FirstPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('FirstPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = createElement('div');\n        this.PP = createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: isBlazor() ? this.pagerModule.getLocalizedLabel('PreviousPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = createElement('div');\n        this.NP = createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPagerTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('NextPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('NextPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: isBlazor() ? this.pagerModule.getLocalizedLabel('LastPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': isBlazor() ? this.pagerModule.getLocalizedLabel('LastPageTooltip') :\n                    this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { createElement, append, isBlazor } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        if (isBlazor()) {\n            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('CurrentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                    pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('TotalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        }\n        else {\n            this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                    pagerObj.currentPage, pagerObj.totalPages || 0, pagerObj.totalRecordsCount || 0]) + ' ';\n            this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel(pagerObj.totalRecordsCount <= 1 ? 'totalItemInfo' : 'totalItemsInfo'), [pagerObj.totalRecordsCount || 0, pagerObj.totalRecordsCount ? (pagerObj.pageSize * (pagerObj.currentPage - 1)) + 1 : 0,\n                pagerObj.pageSize * pagerObj.currentPage > pagerObj.totalRecordsCount ? pagerObj.totalRecordsCount :\n                    pagerObj.pageSize * pagerObj.currentPage]);\n        }\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        /** @hidden */\n        _this.hasParent = false;\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n        this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            totalItemInfo: '({0} item)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            CurrentPageInfo: '{0} of {1} pages',\n            TotalItemsInfo: '({0} items)',\n            FirstPageTooltip: 'Go to first page',\n            LastPageTooltip: 'Go to last page',\n            NextPageTooltip: 'Go to next page',\n            PreviousPageTooltip: 'Go to previous page',\n            NextPagerTooltip: 'Go to next pager',\n            PreviousPagerTooltip: 'Go to previous pager',\n            PagerDropDown: 'Items per page',\n            PagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        this.containerModule = new NumericContainer(this);\n        this.pagerMessageModule = new PagerMessage(this);\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            if (this.isReactTemplate()) {\n                this.on('pager-refresh', this.pagerTemplate, this);\n                this.notify('pager-refresh', {});\n            }\n            else {\n                this.pagerTemplate();\n            }\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes() && this.pagerdropdownModule) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        if (this.isReactTemplate()) {\n            this.off('pager-refresh', this.pagerTemplate);\n            if (!this.hasParent) {\n                this.destroyTemplate(['template']);\n            }\n        }\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        if (!this.isReactTemplate()) {\n            this.element.innerHTML = '';\n        }\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    //tslint:disable-next-line:no-any\n    Pager.prototype.destroyTemplate = function (propertyNames, index) {\n        this.clearTemplate(propertyNames, index);\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        if (oldProp.pageSize !== newProp.pageSize) {\n                            this.currentPage = 1;\n                        }\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    if (newProp.pageSize !== oldProp.pageSize) {\n                        this.pageSize = newProp.pageSize;\n                        this.currentPageChanged(newProp, oldProp);\n                    }\n                    else {\n                        this.refresh();\n                    }\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes() && this.pagerdropdownModule) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage && this.externalMessageModule) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Pager.prototype.setPageSize = function (pageSize) {\n        this.pageSize = pageSize;\n        this.dataBind();\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function (newProp, oldProp) {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        if (newProp.currentPage !== oldProp.currentPage || newProp.pageSize !== oldProp.pageSize) {\n            var args = {\n                currentPage: this.currentPage,\n                newProp: newProp, oldProp: oldProp, cancel: false\n            };\n            this.trigger('click', args);\n            if (!args.cancel) {\n                this.refresh();\n            }\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        if (this.isReactTemplate() && this.hasParent) {\n            return;\n        }\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        var tempId = this.element.parentElement.id + '_template';\n        if (this.isReactTemplate()) {\n            this.getPagerTemplate()(data, this, 'template', tempId, null, null, this.element);\n            this.renderReactTemplates();\n        }\n        else {\n            result = isBlazor() ? this.getPagerTemplate()(data, this, 'template', tempId, this.isStringTemplate) :\n                this.isVue ? this.getPagerTemplate()(data, this) : this.getPagerTemplate()(data);\n            appendChildren(this.element, result);\n        }\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            if (this.isReactTemplate()) {\n                this.updateTotalPages();\n                this.notify('pager-refresh', {});\n            }\n            else {\n                this.element.innerHTML = '';\n                this.updateTotalPages();\n                this.pagerTemplate();\n            }\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.pagerdropdownModule) {\n                this.pagerdropdownModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('FirstPageTooltip') : this.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('PreviousPageTooltip') :\n                    this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('NextPageTooltip') :\n                    this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: isBlazor() ? this.getLocalizedLabel('LastPageTooltip') :\n                    this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            for (var i = 0; i < classList.length; i++) {\n                var element = this.element.querySelector(classList[i]);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            }\n        }\n    };\n    Pager.prototype.isReactTemplate = function () {\n        return this.isReact && this.template && typeof (this.template) !== 'string';\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { createElement, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = createElement('div', { className: 'e-pagerconstant' });\n        var input = createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = createElement('span', { className: 'e-constant', innerHTML: isBlazor() ?\n                this.pagerModule.getLocalizedLabel('PagerDropDown') :\n                this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.refresh();\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-popup-open e-alldrop')[0].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.refresh();\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: parseInt(this.dropDownListObject.value, 10) });\n    };\n    PagerDropDown.prototype.refresh = function () {\n        if (this.pagerCons) {\n            if (this.pagerModule.pageSize === this.pagerModule.totalRecordsCount) {\n                this.pagerCons.innerHTML = isBlazor() ? this.pagerModule.getLocalizedLabel('PagerAllDropDown') :\n                    this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n            }\n            else {\n                this.pagerCons.innerHTML = isBlazor() ? this.pagerModule.getLocalizedLabel('PagerDropDown') :\n                    this.pagerModule.getLocalizedLabel('pagerDropDown');\n            }\n        }\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = parseInt(item[i], 10) ? item[i].toString() : (this.pagerModule.getLocalizedLabel(item[i]) !== '')\n                ? this.pagerModule.getLocalizedLabel(item[i]) : item[i];\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        if (!isNullOrUndefined(this.element)) {\n            this.element.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.isInitialRender = true;\n        Pager.Inject(ExternalMessage, PagerDropDown);\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n            this.parent.pageTemplateChange = true;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n        this.pagerObj.hasParent = true;\n        this.pagerObj.on('pager-refresh', this.renderReactPagerTemplate, this);\n        this.pagerObj.allowServerDataBinding = false;\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        if (!this.isInitialLoad) {\n            this.pageSettings.currentPage = 1;\n        }\n    };\n    Page.prototype.addAriaAttr = function () {\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            for (var j = 0; j < classList.length; j++) {\n                var element = this.element.querySelector(classList[j]);\n                if (this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n            }\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.setPageSize = function (pageSize) {\n        this.pagerObj.setPageSize(pageSize);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                if (!isNullOrUndefined(e.newProp) && !isNullOrUndefined(e.newProp.pageSize)) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.setPageSize, arg1: e.newProp.pageSize });\n                    this.pagerObj.pageSize = e.oldProp.pageSize;\n                    gObj.pageSettings.pageSize = e.newProp.pageSize;\n                }\n                else if (e.currentPage) {\n                    gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                    this.pagerObj.currentPage = gObj.pageSettings.currentPage === this.pagerObj.currentPage ?\n                        this.pagerObj.previousPageNo : gObj.pageSettings.currentPage;\n                }\n                this.isForceCancel = true;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.pageSettings.pageSize = this.pagerObj.pageSize;\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        var args = {\n            cancel: false, requestType: 'paging', previousPage: prevPage,\n            currentPage: e.currentPage, type: events.actionBegin\n        };\n        this.parent.notify(events.modelChanged, args);\n        if (args.cancel) {\n            e.cancel = true;\n        }\n        this.parent.requestTypeAction = 'paging';\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.isInitialLoad = true;\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.isReact = this.parent.isReact;\n        this.pagerObj.isVue = this.parent.isVue;\n        this.pagerObj.appendTo(this.element);\n        this.isInitialLoad = false;\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n            if (this.isReactTemplate()) {\n                this.pagerObj.updateTotalPages();\n                this.created();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler,\n            created: this.created\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.addEventListener('created', this.handlers.created.bind(this));\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    Page.prototype.created = function () {\n        if (this.isInitialRender && this.isReactTemplate()) {\n            this.isInitialRender = false;\n            this.renderReactPagerTemplate();\n        }\n    };\n    Page.prototype.isReactTemplate = function () {\n        return this.parent.isReact && this.pagerObj.template && typeof (this.pagerObj.template) !== 'string';\n    };\n    Page.prototype.renderReactPagerTemplate = function () {\n        if (!this.isInitialRender && this.isReactTemplate()) {\n            this.parent.destroyTemplate(['pagerTemplate']);\n            this.element.classList.add('e-pagertemplate');\n            this.pagerObj.compile(this.pagerObj.template);\n            var page = this.parent.pageSettings;\n            var data = {\n                currentPage: page.currentPage, pageSize: page.pageSize, pageCount: page.pageCount,\n                totalRecordsCount: page.totalRecordsCount, totalPages: this.pagerObj.totalPages\n            };\n            var tempId = this.parent.id + '_pagertemplate';\n            this.pagerObj.templateFn(data, this.parent, 'pagerTemplate', tempId, null, null, this.pagerObj.element);\n            this.parent.renderTemplates();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.parent.isReact) {\n            this.parent.removeEventListener('created', this.handlers.created);\n        }\n        this.parent.off('pager-refresh', this.renderReactPagerTemplate);\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.isReactTemplate()) {\n            this.parent.destroyTemplate(['pagerTemplate']);\n        }\n        this.pagerObj.destroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue, closest } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { appendChildren } from '../base/util';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport * as events from '../base/constant';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    /* tslint:disable-next-line:max-func-body-length */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            if (data) {\n                fltrData[column.field] = data[column.field];\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            if (column.visible) {\n                var isReactCompiler = this.parent.isReact && typeof (column.filterTemplate) !== 'string';\n                var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n                if (isReactCompiler) {\n                    column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID, null, null, node);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var element = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                    appendChildren(node, element);\n                }\n            }\n            else {\n                node.classList.add('e-hide');\n            }\n        }\n        else {\n            if (column.type !== 'checkbox') {\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    node.classList.add('e-fltrtemp');\n                    attributes(innerDIV, {\n                        'class': 'e-fltrtempdiv'\n                    });\n                    if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                        input = this.parent.createElement('input', {\n                            id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            attrs: { type: 'search', title: column.headerText }\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                    else {\n                        var args = { column: column, node: Element };\n                        var temp = column.filterBarTemplate.create;\n                        if (typeof temp === 'string') {\n                            temp = getValue(temp, window);\n                        }\n                        input = temp(args);\n                        if (typeof input === 'string') {\n                            var div = this.parent.createElement('div');\n                            div.innerHTML = input;\n                            input = div.firstChild;\n                        }\n                        attributes(innerDIV, {\n                            class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                            title: column.headerText,\n                            id: column.field + '_filterBarcell',\n                        });\n                        innerDIV.appendChild(input);\n                    }\n                }\n                else {\n                    attributes(innerDIV, {\n                        'class': 'e-filterdiv e-fltrinputdiv'\n                    });\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filtertext',\n                        attrs: {\n                            type: 'search', title: column.headerText + cell.attributes.title,\n                            value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                        }\n                    });\n                    innerDIV.appendChild(input);\n                    var args = {\n                        element: input, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.createInput(args, this.parent.createElement);\n                }\n                //TODO: apply intial filtering\n                if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                    input.setAttribute('disabled', 'true');\n                    input.classList.add('e-disable');\n                }\n                if (!column.visible) {\n                    node.classList.add('e-hide');\n                }\n                this.appendHtml(node, innerDIV);\n                // render's the dropdownlist component if showFilterBarOperator sets to true\n                if (this.parent.filterSettings.showFilterBarOperator && this.parent.filterSettings.type === 'FilterBar'\n                    && !this.parent.isPrinting && isNullOrUndefined(column.filterTemplate)) {\n                    this.operatorIconRender(innerDIV, column, cell);\n                }\n                if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                    var templateWrite = column.filterBarTemplate.write;\n                    var args = { element: input, column: column };\n                    if (typeof templateWrite === 'string') {\n                        templateWrite = getValue(templateWrite, window);\n                    }\n                    templateWrite.call(this, args);\n                }\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    FilterCellRenderer.prototype.operatorIconRender = function (innerDIV, column, cell) {\n        var gObj = this.parent;\n        var fbicon = this.parent.createElement('input', {\n            className: ' e-filterbaroperator e-icons e-icon-filter',\n            id: cell.column.uid\n        });\n        innerDIV.querySelector('span').appendChild(fbicon);\n        var operators = (column.filter && column.filter.operator) ? column.filter.operator : 'equal';\n        if (!isNullOrUndefined(gObj.filterModule.operators[column.field])) {\n            operators = gObj.filterModule.operators[column.field];\n        }\n        this.dropOptr = new DropDownList({\n            fields: { text: 'text', value: 'value' },\n            popupHeight: 'auto',\n            value: operators,\n            width: '0px',\n            enabled: column.allowFiltering,\n            popupWidth: 'auto',\n            enableRtl: this.parent.enableRtl,\n            change: this.internalEvent.bind(this),\n            beforeOpen: function () {\n                var operator = gObj.filterModule.customOperators;\n                this.dataSource = operator[gObj.getColumnByUid(this.element.id).type + 'Operator'];\n                for (var i = 0; i < this.dataSource.length; i++) {\n                    if (column.filter && column.filter.operator && isNullOrUndefined(gObj.filterModule.operators[column.field]) &&\n                        this.dataSource[i].value === column.filter.operator) {\n                        this.value = column.filter.operator;\n                    }\n                }\n            },\n        });\n        this.dropOptr.appendTo(fbicon);\n        var spanElmt = closest(this.dropOptr.element, 'span');\n        spanElmt.classList.add('e-filterbardropdown');\n        spanElmt.removeAttribute('tabindex');\n    };\n    FilterCellRenderer.prototype.internalEvent = function (e) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByUid(e.element.getAttribute('id'));\n        e.column = col;\n        gObj.filterModule.operators[col.field] = e.value;\n        gObj.notify(events.getFilterBarOperator, e);\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj, operator) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = !isNullOrUndefined(operator) ? operator :\n            (!isNullOrUndefined(this.parent.filterSettings.operators) && !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n                this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            cssClass: 'e-popup-flmenu',\n            enableRtl: this.parent.enableRtl,\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.renderResponsiveDropDownList = function (args) {\n        args.popup.element.style.width = '100%';\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n        if (this.parent.enableAdaptiveUI) {\n            this.renderResponsiveDropDownList(args);\n        }\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') { // rewuired or not\n            if (col.filter.operator) {\n                var optrLen = Object.keys(this.optrData).length;\n                for (var i = 0; i < optrLen; i++) {\n                    if (this.optrData[i].value === col.filter.operator) {\n                        selValue = this.optrData[i].text;\n                    }\n                }\n            }\n            else {\n                selValue = this.optrData[0].text;\n            }\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined, extend, getValue } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion, eventPromise } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = this.getAutoCompleteOptions(args);\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var foreignColumnQuery;\n        if (isForeignColumn) {\n            foreignColumnQuery = new Query();\n            foreignColumnQuery.params = this.parent.query.params;\n        }\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        var autoComplete = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: isForeignColumn ? foreignColumnQuery : this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return (getValue(_this.actObj.fields.value, mapObj));\n                    }).indexOf(getValue((_this.actObj.fields.value), obj)) === index;\n                });\n            }\n        }, args.column.filter.params));\n        if (dataSource && 'result' in dataSource) {\n            var query = this.parent.getQuery ? this.parent.getQuery().clone() : new Query();\n            var defObj = eventPromise({ requestType: 'stringfilterrequest' }, query);\n            this.parent.trigger(events.dataStateChange, defObj.state);\n            var def = defObj.deffered;\n            def.promise.then(function (e) {\n                autoComplete.dataSource = new DataManager(e);\n            });\n        }\n        return autoComplete;\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', this.parent.filterSettings.enableCaseSensitivity);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { extend, isUndefined } from '@syncfusion/ej2-base';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.keyEventHandler = function (args) {\n        if (args.keyCode === 13 || args.keyCode === 9) {\n            var evt = document.createEvent('HTMLEvents');\n            evt.initEvent('change', false, true);\n            /* tslint:disable-next-line:no-any */\n            this.dispatchEvent(evt);\n        }\n    };\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: typeof (args.column.format) === 'string' || isUndefined(args.column.format) ? args.column.format :\n                args.column.format.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        }, args.column.filter.params));\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.element.addEventListener('keydown', this.keyEventHandler);\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList(extend({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        }, args.column.filter.params));\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getCustomDateFormat } from '../base/util';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var format = getCustomDateFormat(args.column.format, args.column.type);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        if (args.column.type === 'date') {\n            this.datePickerObj = new DatePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        else if (args.column.type === 'datetime') {\n            this.datePickerObj = new DateTimePicker(extend({\n                format: format,\n                cssClass: 'e-popup-flmenu',\n                placeholder: args.localizeText.getConstant('ChooseDate'),\n                width: '100%',\n                locale: this.parent.locale,\n                enableRtl: this.parent.enableRtl,\n                open: this.openPopup.bind(this),\n            }, args.column.filter.params));\n        }\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove, isBlazor } from '@syncfusion/ej2-base';\nimport { Browser, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.maxHeight = '350px';\n        this.isMenuCheck = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n        this.menuFilterBase = new CheckBoxFilterBase(parent);\n    }\n    FilterMenuRenderer.prototype.clearCustomFilter = function (col) {\n        this.clearBtnClick(col);\n    };\n    FilterMenuRenderer.prototype.applyCustomFilter = function (args) {\n        this.filterBtnClick(args.col);\n    };\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.options = args;\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) { ///\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function (target) {\n        if (!this.dlgObj) {\n            return;\n        }\n        if (isBlazor()) {\n            var columns = this.parent.getColumns();\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['filterTemplate']);\n            this.parent.renderTemplates();\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            var argument = { cancel: false, column: this.col, target: target, element: elem };\n            this.parent.notify(events.filterMenuClose, argument);\n            if (argument.cancel) {\n                return;\n            }\n            this.isDialogOpen = false;\n            if (this.isMenuCheck) {\n                this.menuFilterBase.unWireEvents();\n                this.parent.off(events.cBoxFltrComplete, this.actionComplete);\n                this.isMenuCheck = false;\n            }\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n        this.parent.notify(events.filterDialogClose, {});\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('FilterMenuDialogARIA'));\n        if (this.parent.enableAdaptiveUI) {\n            var responsiveCnt = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            responsiveCnt.appendChild(this.dlgDiv);\n        }\n        else {\n            this.parent.element.appendChild(this.dlgDiv);\n        }\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.renderResponsiveDialog();\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.renderResponsiveDialog = function () {\n        var gObj = this.parent;\n        if (gObj.enableAdaptiveUI) {\n            this.dlgObj.position = { X: '', Y: '' };\n            this.dlgObj.target = document.querySelector('.e-resfilter > .e-dlg-content > .e-mainfilterdiv');\n            this.dlgObj.width = '100%';\n            this.dlgObj.isModal = false;\n            this.dlgObj.buttons = [{}];\n        }\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice && target) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        if (this.parent.enableAdaptiveUI) {\n            this.dlgObj.element.style.left = '0px';\n            this.dlgObj.element.style.maxHeight = 'none';\n        }\n        else {\n            this.dlgObj.element.style.maxHeight = this.maxHeight;\n        }\n        this.dlgObj.show();\n        if (!column.filterTemplate) {\n            this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        }\n        var args = {\n            requestType: events.filterAfterOpen,\n            columnName: column.field, columnType: column.type\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            var filterModel = 'filterModel';\n            args[filterModel] = this;\n        }\n        this.isDialogOpen = true;\n        if (!this.isMenuCheck) {\n            this.parent.trigger(events.actionComplete, args);\n        }\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.parent.log('column_type_missing', { column: col });\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj, this.filterObj.menuOperator);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        var fObj = this.filterObj;\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (column.filterTemplate) {\n            var fltrData = {};\n            var valueInString = 'value';\n            fltrData[column.field] = fltrData[valueInString] = fObj.values[column.field];\n            if (column.foreignKeyValue) {\n                fltrData[column.foreignKeyValue] = fObj.values[column.field];\n                fltrData[column.field] = undefined;\n            }\n            var col = 'column';\n            fltrData[col] = column;\n            var isReactCompiler = this.parent.isReact && typeof (column.filterTemplate) !== 'string';\n            var tempID = this.parent.element.id + column.uid + 'filterTemplate';\n            if (isReactCompiler) {\n                column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID, null, null, valueDiv);\n                this.parent.renderTemplates();\n            }\n            else {\n                var compElement = column.getFilterTemplate()(fltrData, this.parent, 'filterTemplate', tempID);\n                updateBlazorTemplate(tempID, 'FilterTemplate', column);\n                appendChildren(valueDiv, compElement);\n            }\n            if (this.isMenuCheck) {\n                this.menuFilterBase.cBox = this.dlgObj.element.querySelector('.e-checkboxlist.e-fields');\n                this.menuFilterBase.wireEvents();\n                this.parent.on(events.cBoxFltrComplete, this.actionComplete, this);\n                this.menuFilterBase.getAllData();\n            }\n        }\n        else {\n            if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n                && !isNullOrUndefined(column.filter.ui.create)) {\n                var temp = column.filter.ui.create;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                temp({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n                });\n            }\n            else {\n                instanceofFilterUI.create({\n                    column: column, target: valueDiv,\n                    getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n                });\n            }\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.uid === column.uid) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (col.filterTemplate) {\n            var element = this.dlgDiv.querySelector('.e-flmenu-valuediv');\n            var fltrValue = void 0;\n            if (element.children[0].value) {\n                fltrValue = element.children[0].value;\n            }\n            else {\n                if (!isBlazor() && !isNullOrUndefined(element.children[0].ej2_instances)) {\n                    fltrValue = element.querySelector('input').ej2_instances[0].value;\n                }\n                else {\n                    var eControl = element.querySelector('.e-control');\n                    fltrValue = col.type === 'boolean' ? eControl.checked :\n                        !isNullOrUndefined(eControl.ej2_instances) ?\n                            eControl.ej2_instances[0].value :\n                            eControl.value;\n                }\n            }\n            this.filterObj.filterByColumn(col.field, flOptrValue, fltrValue);\n        }\n        else {\n            if (!isNullOrUndefined(col.filter) &&\n                !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n                var temp = col.filter.ui.read;\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                }\n                flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n            }\n            else {\n                instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n            }\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.closeResponsiveDialog = function () {\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        if (isBlazor() && !this.parent.isJsComponent) {\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n        }\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    /**\n     * @hidden\n     */\n    FilterMenuRenderer.prototype.getFilterUIInfo = function () {\n        return { field: this.col.field, operator: this.flMuiObj.getFlOperator() };\n    };\n    FilterMenuRenderer.prototype.renderCheckBoxMenu = function () {\n        this.isMenuCheck = true;\n        this.menuFilterBase.updateModel(this.options);\n        this.menuFilterBase.getAndSetChkElem(this.options);\n        this.dlgObj.buttons = [{\n                click: this.menuFilterBase.btnClick.bind(this.menuFilterBase),\n                buttonModel: {\n                    content: this.menuFilterBase.getLocalizedLabel('FilterButton'),\n                    cssClass: 'e-primary', isPrimary: true\n                }\n            },\n            {\n                click: this.menuFilterBase.btnClick.bind(this.menuFilterBase),\n                buttonModel: { cssClass: 'e-flat', content: this.menuFilterBase.getLocalizedLabel('ClearButton') }\n            }];\n        this.menuFilterBase.dialogObj = this.dlgObj;\n        this.menuFilterBase.dlg = this.dlgObj.element;\n        this.menuFilterBase.dlg.classList.add('e-menucheckbox');\n        this.menuFilterBase.dlg.classList.remove('e-checkboxfilter');\n        this.maxHeight = '800px';\n        return this.menuFilterBase.sBox.innerHTML;\n    };\n    FilterMenuRenderer.prototype.actionComplete = function (args) {\n        if (this.isMenuCheck) {\n            this.parent.trigger(events.actionComplete, args);\n        }\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","import * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.parent = parent;\n        this.isresetFocus = true;\n        this.checkBoxBase = new CheckBoxFilterBase(parent);\n        this.addEventListener();\n    }\n    /**\n     * To destroy the check box filter.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.removeEventListener();\n        this.checkBoxBase.closeDialog();\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.checkBoxBase.openDialog(options);\n        this.parent.log('column_type_missing', { column: options.column });\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        this.removeEventListener();\n        this.checkBoxBase.closeDialog();\n        if (this.isresetFocus) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    CheckBoxFilter.prototype.closeResponsiveDialog = function (isCustomFilter) {\n        this.checkBoxBase.closeDialog();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    CheckBoxFilter.prototype.actionBegin = function (args) {\n        this.parent.trigger(events.actionBegin, args);\n    };\n    CheckBoxFilter.prototype.actionComplete = function (args) {\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.actionPrevent = function (args) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, args);\n            args.cancel = true;\n        }\n    };\n    CheckBoxFilter.prototype.clearCustomFilter = function (col) {\n        this.checkBoxBase.clearFilter(col);\n    };\n    CheckBoxFilter.prototype.applyCustomFilter = function (args) {\n        this.checkBoxBase.fltrBtnHandler();\n        this.checkBoxBase.closeDialog();\n    };\n    CheckBoxFilter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.cBoxFltrBegin, this.actionBegin, this);\n        this.parent.on(events.cBoxFltrComplete, this.actionComplete, this);\n        this.parent.on(events.fltrPrevent, this.actionPrevent, this);\n    };\n    CheckBoxFilter.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.cBoxFltrBegin, this.actionBegin);\n        this.parent.off(events.cBoxFltrComplete, this.actionComplete);\n        this.parent.off(events.fltrPrevent, this.actionPrevent);\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { ExcelFilterBase } from '../common/excel-filter-base';\nimport { CheckBoxFilter } from './checkbox-filter';\nimport * as events from '../base/constant';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excelbox filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.parent = parent;\n        _this.isresetFocus = true;\n        _this.excelFilterBase = new ExcelFilterBase(parent, customFltrOperators);\n        return _this;\n    }\n    /**\n     * To destroy the excel filter.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        this.excelFilterBase.closeDialog();\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        this.excelFilterBase.openDialog(options);\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        this.excelFilterBase.closeDialog();\n        if (this.isresetFocus) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ExcelFilter.prototype.clearCustomFilter = function (col) {\n        this.excelFilterBase.clearFilter(col);\n    };\n    ExcelFilter.prototype.closeResponsiveDialog = function (isCustomFilter) {\n        if (isCustomFilter) {\n            this.excelFilterBase.removeDialog();\n        }\n        else {\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.applyCustomFilter = function (args) {\n        if (!args.isCustomFilter) {\n            this.excelFilterBase.fltrBtnHandler();\n            this.excelFilterBase.closeDialog();\n        }\n        else {\n            this.excelFilterBase.filterBtnClick(args.col.field);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        /* tslint:disable-next-line:max-line-length */\n        this.excelFilterBase.filterByColumn(fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue);\n    };\n    /**\n     * @hidden\n     */\n    ExcelFilter.prototype.getFilterUIInfo = function () {\n        return this.excelFilterBase.getFilterUIInfo();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches, isBlazor } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType, ResponsiveDialogAction } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.filterByMethod = true;\n        this.refresh = true;\n        this.values = {};\n        this.operators = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        /** @hidden */\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        /** @hidden */\n        this.skipNumberInput = ['=', ' ', '!'];\n        this.skipStringInput = ['>', '<', '='];\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.setFullScreenDialog();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e) || (this.parent.getFrozenMode() === 'Left-Right' &&\n            DataUtil.getObject('args.renderFrozenRightContent', e))) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                if (gObj.getFrozenMode() === 'Right') {\n                    var thead = gObj.getFrozenRightHeader().querySelector('thead');\n                    thead.appendChild(rowRenderer.element);\n                }\n                else {\n                    this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                }\n                var rowdrag = this.parent.element.querySelector('.e-rowdragheader');\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                if (rowdrag) {\n                    rowdrag.className = 'e-dragheadercell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To show the responsive custom filter dialog\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.showCustomFilter = function () {\n        this.responsiveDialogRenderer.showResponsiveDialog(this.column);\n    };\n    /** @hidden */\n    Filter.prototype.setFilterModel = function (col) {\n        var type = col.filter.type || this.parent.filterSettings.type;\n        this.filterModule = new this.type[type](this.parent, this.parent.filterSettings, this.serviceLocator, this.customOperators, this);\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.refreshing) {\n            this.filterSettings.columns = [];\n        }\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            var dropdownlist = this.element.querySelectorAll('.e-filterbaroperator');\n            for (var i = 0; i < dropdownlist.length; i++) {\n                dropdownlist[i].ej2_instances[0].destroy();\n            }\n        }\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.isFrozenGrid() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.setFullScreenDialog = function () {\n        if (this.serviceLocator) {\n            this.serviceLocator.registerAdaptiveService(this, this.parent.enableAdaptiveUI, ResponsiveDialogAction.isFilter);\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== 'Right') {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        if (this.parent.getFrozenMode() === 'Right') {\n            cells.push(this.generateCell({}, CellType.RowDragHIcon));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        this.filterObjIndex = this.getFilteredColsIndexByField(col);\n        this.prevFilterObject = this.filterSettings.columns[this.filterObjIndex];\n        var arrayVal = Array.isArray(this.value) ? this.value : [this.value];\n        for (var i = 0, len = arrayVal.length; i < len; i++) {\n            var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n            this.currentFilterObject = {\n                field: field, uid: col.uid, isForeignKey: col.isForeignColumn(), operator: this.operator,\n                value: arrayVal[i], predicate: this.predicate,\n                matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n            };\n            var index = this.getFilteredColsIndexByField(col);\n            if (index > -1 && !Array.isArray(this.value)) {\n                this.filterSettings.columns[index] = this.currentFilterObject;\n            }\n            else {\n                this.filterSettings.columns.push(this.currentFilterObject);\n            }\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].uid === col.uid || (col.isForeignColumn() && this.parent.getColumnByUid(col.uid).field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandlerImmediate);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.parent.getHeaderTable().classList.add('e-sortfilter');\n            this.render();\n        }\n    };\n    Filter.prototype.refreshFilterValue = function () {\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.columns.length &&\n            !this.parent.getCurrentViewRecords().length && this.parent.enablePersistence) {\n            this.initialEnd();\n            this.parent.removeEventListener(events.beforeDataBound, this.refreshFilterValue);\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.initialLoad = true;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.initialLoad = false;\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.setFullScreenDialog, this.setFullScreenDialog, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        this.docClickHandler = this.clickHandler.bind(this);\n        EventHandler.add(document, 'click', this.docClickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n        this.parent.on(events.closeFilterDialog, this.clickHandler, this);\n        this.parent.addEventListener(events.beforeDataBound, this.refreshFilterValue.bind(this));\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.docClickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.setFullScreenDialog, this.setFullScreenDialog);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n        this.parent.off(events.closeFilterDialog, this.clickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var _this = this;\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.grabColumnByFieldFromAllCols(fieldName);\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            filterOperator = this.getOperatorName(fieldName);\n        }\n        if (!this.column) {\n            return;\n        }\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: this.column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.predicate = predicate ? predicate : Array.isArray(filterValue) ? 'or' : 'and';\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterCell && this.filterSettings.type === 'FilterBar') {\n            if (filterValue.length < 1 || (!this.filterByMethod &&\n                this.checkForSkipInput(this.column, filterValue))) {\n                this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n                this.updateFilterMsg();\n                return;\n            }\n            if (filterCell.value !== filterValue) {\n                filterCell.value = filterValue;\n            }\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n            if (this.initialLoad && this.filterSettings.type === 'FilterBar') {\n                filterCell.value = this.values[this.column.field];\n            }\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        var predObj = {\n            field: this.fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: this.operator,\n            value: this.value,\n            type: this.column.type\n        };\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === _this.fieldName);\n        });\n        if (filterColumn.length > 1 && !isNullOrUndefined(this.actualPredicate[this.fieldName])) {\n            this.actualPredicate[this.fieldName].push(predObj);\n        }\n        else {\n            this.actualPredicate[this.fieldName] = [predObj];\n        }\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    // To skip the second time request to server while applying initial filtering - EJ2-44361\n    Filter.prototype.skipUid = function (col) {\n        var flag = true;\n        var colLen = Object.keys((col));\n        for (var i = 0; i < colLen.length; i++) {\n            var key = Object.keys(col[colLen[i]]);\n            if (key.length === 1 && key[0] === 'uid') {\n                flag = false;\n            }\n        }\n        return flag;\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    var col = 'columns';\n                    var args = {\n                        currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                            this.column.field : undefined, action: 'filter', columns: this.filterSettings.columns,\n                        requestType: 'filtering', type: events.actionBegin, cancel: false\n                    };\n                    if (this.contentRefresh && this.skipUid(e.properties[col])) {\n                        this.parent.notify(events.modelChanged, args);\n                        if (args.cancel) {\n                            if (isNullOrUndefined(this.prevFilterObject)) {\n                                this.filterSettings.columns.splice(this.filterSettings.columns.length - 1, 1);\n                            }\n                            else {\n                                this.filterSettings.columns[this.filterObjIndex] = this.prevFilterObject;\n                            }\n                            return;\n                        }\n                        this.addFilteredClass(args.currentFilteringColumn);\n                        this.updateFilterIcon();\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'showFilterBarOperator':\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[i].uid);\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.column.field);\n                if (filterElement) {\n                    if (this.cellText[this.filterSettings.columns[i].field] !== ''\n                        && !isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.column.field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.updateFilterIcon = function () {\n        if (this.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrIconElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrIconElement.length; i < len; i++) {\n                fltrIconElement[i].removeAttribute('aria-filtered');\n                fltrIconElement[i].classList.remove('e-filtered');\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function (fields) {\n        var _this = this;\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (!isNullOrUndefined(fields)) {\n            this.refresh = false;\n            fields.forEach(function (field) { _this.removeFilteredColsByField(field, false); });\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n            this.parent.renderModule.refresh();\n            this.refresh = true;\n            return;\n        }\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0; i < cols.length; i++) {\n            cols[i].uid = cols[i].uid || this.parent.getColumnByField(cols[i].field).uid;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredcols = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        this.refresh = false;\n        for (var i = 0, len = filteredcols.length; i < len; i++) {\n            this.removeFilteredColsByField(this.parent.getColumnByUid(filteredcols[i]).field, false);\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n        }\n        this.refresh = true;\n        if (filteredcols.length) {\n            this.parent.renderModule.refresh();\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.setFilterModel(col);\n        this.filterModule.openDialog(this.createOptions(col, target, left, top));\n    };\n    /** @hidden */\n    Filter.prototype.createOptions = function (col, target, left, top) {\n        var gObj = this.parent;\n        var dataSource = col.filter.dataSource || gObj.dataSource && 'result' in gObj.dataSource ? gObj.dataSource :\n            gObj.getDataModule().dataManager;\n        var type = col.filter.type || this.parent.filterSettings.type;\n        var options = {\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format, height: 800, columns: gObj.getColumns(),\n            filteredColumns: gObj.filterSettings.columns, target: target, dataManager: gObj.getDataModule().dataManager,\n            formatFn: col.getFormatter(), ignoreAccent: gObj.filterSettings.ignoreAccent,\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: gObj.localeObj,\n            isRemote: gObj.getDataModule().isRemote(), allowCaseSensitive: this.filterSettings.enableCaseSensitivity,\n            isResponsiveFilter: this.parent.enableAdaptiveUI,\n            operator: this.actualPredicate[col.field] && type === 'Menu' ? this.actualPredicate[col.field][0].operator : 'equal'\n        };\n        return options;\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        var colUid = cols.map(function (f) { return f.uid; });\n        var filteredColsUid = colUid.filter(function (item, pos) { return colUid.indexOf(item) === pos; });\n        var _loop_1 = function (i, len) {\n            cols[i].uid = cols[i].uid || this_1.parent.getColumnByField(cols[i].field).uid;\n            var len_1 = cols.length;\n            var column = this_1.parent.grabColumnByUidFromAllCols(filteredColsUid[i]);\n            if (column.field === field || (column.field === column.foreignKeyValue && column.isForeignColumn())) {\n                var currentPred = this_1.filterSettings.columns.filter(function (e) {\n                    return e.uid === column.uid;\n                })[0];\n                if (this_1.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + column.field + '_filterBarcell\\']';\n                    fCell = this_1.parent.getHeaderContent().querySelector(selector);\n                    if (fCell) {\n                        fCell.value = '';\n                        delete this_1.values[field];\n                    }\n                }\n                while (len_1--) {\n                    if (cols[len_1].uid === column.uid) {\n                        cols.splice(len_1, 1);\n                    }\n                }\n                var fltrElement = this_1.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this_1.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this_1.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this_1.isRemove = true;\n                if (this_1.actualPredicate[field]) {\n                    delete this_1.actualPredicate[field];\n                }\n                if (this_1.values[field]) {\n                    delete this_1.values[field];\n                }\n                if (this_1.refresh) {\n                    if (isBlazor() && !this_1.parent.isJsComponent) {\n                        this_1.parent.setProperties({ filterSettings: { columns: this_1.filterSettings.columns } }, true);\n                        this_1.parent.notify(events.modelChanged, {\n                            requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                                field: column.field, operator: this_1.operator, value: this_1.value, predicate: this_1.predicate,\n                                matchCase: this_1.matchCase, ignoreAccent: this_1.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                            }, currentFilterColumn: column\n                        });\n                    }\n                    else {\n                        this_1.parent.notify(events.modelChanged, {\n                            requestType: 'filtering', type: events.actionBegin, currentFilterObject: currentPred,\n                            currentFilterColumn: column, action: 'clearFilter'\n                        });\n                    }\n                }\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = filteredColsUid.length; i < len; i++) {\n            var state_1 = _loop_1(i, len);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandlerImmediate = function (e) {\n        if (e.keyCode !== 13) {\n            this.keyUpHandler(e);\n        }\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if (e.action === 'altDownArrow' && this.parent.filterSettings.showFilterBarOperator) {\n                var dropDownListInput = closest(target, 'span').querySelector('.e-filterbaroperator');\n                dropDownListInput.ej2_instances[0].showPopup();\n                dropDownListInput.focus();\n            }\n            if ((this.filterSettings.mode === 'Immediate' || (e.keyCode === 13 &&\n                !e.target.classList.contains('e-filterbaroperator')))\n                && e.keyCode !== 9 && !this.column.filterTemplate) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n        if (e.action === 'altDownArrow' && this.filterSettings.type !== 'FilterBar') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openMenuByField(column.field);\n                this.parent.focusModule.clearIndicator();\n            }\n        }\n        if (e.action === 'escape' && this.filterSettings.type === 'Menu' && this.filterModule) {\n            this.filterModule.closeDialog();\n            gObj.notify(events.restoreFocus, {});\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.grabColumnByUidFromAllCols(columns[index].uid) || gObj.grabColumnByFieldFromAllCols(columns[index].field);\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            this.valueFormatter.fromView(this.values[column.field], column.getParser(), column.type) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        if (column.type === 'number') {\n            if (DataUtil.operatorSymbols[value] || this.skipNumberInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (this.skipStringInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.isFrozenGrid()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByMethod = false;\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.filterSettings.enableCaseSensitivity, this.ignoreAccent);\n        this.filterByMethod = true;\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = this.filterSettings.enableCaseSensitivity;\n        switch (this.column.type) {\n            case 'number':\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    if (this.column.filter.operator) {\n                        this.operator = this.column.filter.operator;\n                    }\n                    else {\n                        this.operator = this.filterOperators.startsWith;\n                    }\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                if (this.column.filter.operator) {\n                    this.operator = this.column.filter.operator;\n                }\n                else {\n                    this.operator = this.filterOperators.equal;\n                }\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    /** @hidden */\n    Filter.prototype.openMenuByField = function (field) {\n        var gObj = this.parent;\n        if (gObj.enableAdaptiveUI) {\n            this.showCustomFilter();\n            return;\n        }\n        var column = gObj.getColumnByField(field);\n        var header = gObj.getColumnHeaderByField(field);\n        var target = header.querySelector('.e-filtermenudiv');\n        if (!target) {\n            return;\n        }\n        var gClient = gObj.element.getBoundingClientRect();\n        var fClient = target.getBoundingClientRect();\n        this.filterDialogOpen(column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n    };\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.openMenuByField(col.field);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.type === 'FilterBar' && this.filterSettings.showFilterBarOperator) {\n            if (parentsUntil(e.target, 'e-filterbarcell') &&\n                e.target.classList.contains('e-input-group-icon')) {\n                closest(e.target, 'div').querySelector('.e-filterbaroperator').focus();\n            }\n            if (e.target.classList.contains('e-list-item')) {\n                var inputId = document.querySelector('.e-popup-open').getAttribute('id').replace('_popup', '');\n                if (inputId.indexOf('grid-column') !== -1) {\n                    closest(document.getElementById(inputId), 'div').querySelector('.e-filtertext').focus();\n                }\n            }\n        }\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            var dialog = parentsUntil(this.parent.element, 'e-dialog');\n            var hasDialog = false;\n            var popupEle = parentsUntil(target, 'e-popup');\n            var hasDialogClosed = this.parent.element.querySelector('.e-filter-popup');\n            if (dialog && popupEle) {\n                hasDialog = dialog.id === popupEle.id;\n            }\n            if ((hasDialogClosed && (parentsUntil(target, 'e-excel-ascending') ||\n                parentsUntil(target, 'e-excel-descending')))) {\n                this.filterModule.closeDialog(target);\n            }\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule && (!parentsUntil(target, 'e-popup-wrapper')\n                && (!closest(target, '.e-filter-item.e-menu-item'))) && !datepickerEle) {\n                if ((hasDialog && (!parentsUntil(target, 'e-filter-popup'))\n                    && (!parentsUntil(target, 'e-popup-flmenu'))) || (!popupEle && hasDialogClosed)) {\n                    this.filterModule.isresetFocus = parentsUntil(target, 'e-grid') &&\n                        parentsUntil(target, 'e-grid').id === this.parent.element.id;\n                    this.filterModule.closeDialog(target);\n                }\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (args.action === 'clear-filter' && isBlazor() && !this.parent.isJsComponent) {\n            this.parent.setProperties({ filterSettings: { columns: this.filterSettings.columns } }, true);\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            args.requestType = 'filtering';\n            this.parent.renderModule.refresh(args); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        this.actualPredicate = {};\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent, cols[i].uid);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent, uid) {\n        var obj;\n        obj = {\n            field: fieldName,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: operator,\n            value: value,\n            type: type\n        };\n        this.actualPredicate[fieldName] ? this.actualPredicate[fieldName].push(obj) : this.actualPredicate[fieldName] = [obj];\n        var field = uid ? this.parent.grabColumnByUidFromAllCols(uid).field : fieldName;\n        this.addFilteredClass(field);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        if (this.parent.showColumnMenu) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-columnmenu');\n        }\n        else if (this.parent.getColumnByField(fieldName)) {\n            filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        }\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.getFilterUIInfo = function () {\n        return this.filterModule ? this.filterModule.getFilterUIInfo() : {};\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.getOperatorName = function (field) {\n        return document.getElementById(this.parent.getColumnByField(field).uid).ej2_instances[0].value;\n    };\n    /**\n     * Renders checkbox items in Menu filter dialog.\n     * @return {void}\n     */\n    Filter.prototype.renderCheckboxOnFilterMenu = function () {\n        return this.filterModule.renderCheckBoxMenu();\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest, isBlazor, extend } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil, gridActionHandler, Global } from '../base/util';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.autoFit = function () {\n        var newarray = this.parent.getColumns().filter(function (c) { return c.autoFit === true; })\n            .map(function (c) { return c.field || c.headerText; });\n        if (newarray.length > 0) {\n            this.autoFitColumns(newarray);\n        }\n        if (this.parent.resizeSettings.mode === 'Auto') {\n            this.widthService.setWidthToTable();\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var footerDivTag = 'e-gridfooter';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var footerTextClone;\n        var columnIndexByField = this.parent.getColumnIndexByField(fName);\n        var left = gObj.getFrozenColumns() || gObj.getFrozenLeftColumnsCount();\n        var movable = gObj.getMovableColumnsCount();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (gObj.isFrozenGrid()) {\n            var col = gObj.getColumnByField(fName);\n            if (col.getFreezeTableName() === 'frozen-left') {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                if (footerTable) {\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n                }\n            }\n            else if (col.getFreezeTableName() === 'movable') {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - left) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - left) + 1) + \")\");\n                }\n            }\n            else if (col.getFreezeTableName() === 'frozen-right') {\n                headerTable = gObj.getHeaderContent().querySelector('.e-frozen-right-header').children[0];\n                contentTable = gObj.getContent().querySelector('.e-frozen-right-content').children[0];\n                headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - (left + movable)) + 1) + \")\");\n                if (footerTable) {\n                    footerTable = gObj.getFooterContent().querySelector('.e-movablefootercontent').children[0];\n                    footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - (left + movable)) + 1) + \")\");\n                }\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelector('[e-mappinguid=\"' + uid + '\"]').parentElement.cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            if (footerTable) {\n                footerTextClone = footerTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n            }\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        var detailsElement = contentTable.querySelector('.e-detailrowcollapse') ||\n            contentTable.querySelector('.e-detailrowexpand');\n        if ((this.parent.detailTemplate || this.parent.childGrid) && detailsElement) {\n            indentWidth += detailsElement.offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        var footerText = [];\n        if (footerTable) {\n            for (var i = 0; i < footerTextClone.length; i++) {\n                footerText[i] = footerTextClone[i].cloneNode(true);\n            }\n        }\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var wFooter = null;\n        if (footerText.length) {\n            wFooter = this.createTable(footerTable, footerText, footerDivTag);\n        }\n        var columnbyindex = gObj.getColumns()[columnIndexByField];\n        var result;\n        var width = columnbyindex.width = formatUnit(Math.max(wHeader, wContent, wFooter));\n        var colMaxWidth = columnbyindex.maxWidth && parseFloat(columnbyindex.maxWidth.toString());\n        if (parseInt(width, 10) > colMaxWidth) {\n            columnbyindex.width = colMaxWidth;\n        }\n        this.widthService.setColumnWidth(gObj.getColumns()[columnIndexByField]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            var element = gObj.getColumns();\n            for (var i = 0; i < element.length; i++) {\n                if (element[i].visible) {\n                    tWidth = tWidth + parseFloat(element[i].width);\n                }\n            }\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.isFrozenGrid()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            if (this.parent.resizeSettings.mode === 'Auto') {\n                calcTableWidth = '100%';\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        for (var i = 0; i < fName.length; i++) {\n            var fieldName = fName[i];\n            var columnIndex = this.parent.getColumnIndexByField(fieldName);\n            var column = this.parent.getColumns()[columnIndex];\n            if (columnIndex > -1 && !isNullOrUndefined(column) && column.visible === true) {\n                this.resizeColumn(fieldName, columnIndex);\n            }\n        }\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        for (var i = 0; i < text.length; i++) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(text[i]);\n            myTable.appendChild(tr);\n        }\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n        this.parent.on(events.contentReady, this.autoFit, this);\n        this.parent.on(events.refreshHandlers, this.refreshHeight, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n        this.parent.off(events.refreshHandlers, this.refreshHeight);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        var element = this.getResizeHandlers();\n        for (var i = 0; i < element.length; i++) {\n            if (element[i].parentElement.offsetHeight > 0) {\n                element[i].style.height = element[i].parentElement.offsetHeight + 'px';\n            }\n        }\n        this.setHandlerHeight();\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.touchResizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.isFrozenGrid() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        var element = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress));\n        for (var i = 0; i < element.length; i++) {\n            element[i].style.height = element[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            if (col.columns) {\n                return;\n            }\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.touchResizeStart = function (e) {\n        if (!Global.timer) {\n            Global.timer = setTimeout(function () {\n                Global.timer = null;\n            }, 300);\n            return this.resizeStart(e);\n        }\n        else {\n            clearTimeout(Global.timer);\n            Global.timer = null;\n            this.callAutoFit(e);\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    if (this.parent.allowGrouping) {\n                        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n                            this.widthService.setColumnWidth(new Column({ width: '30px' }), i);\n                        }\n                    }\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.refreshStackedColumnWidth();\n                this.element = e.target;\n                if (this.parent.getVisibleFrozenColumns()) {\n                    var mtbody = this.parent.getMovableContentTbody();\n                    var ftbody = this.parent.getFrozenLeftContentTbody();\n                    var frtbody = this.parent.getFrozenRightContentTbody();\n                    var mtr = [].slice.call(mtbody.querySelectorAll('tr'));\n                    var ftr = [].slice.call(ftbody.querySelectorAll('tr'));\n                    var frTr = [];\n                    if (this.parent.getFrozenMode() === 'Left-Right' && frtbody) {\n                        frTr = [].slice.call(frtbody.querySelectorAll('tr'));\n                    }\n                    var _loop_1 = function (i) {\n                        gridActionHandler(this_1.parent, function (tableName, row) {\n                            if (_this.parent.rowHeight) {\n                                row[i].style.height = _this.parent.rowHeight + 'px';\n                            }\n                            else {\n                                row[i].style.removeProperty('height');\n                            }\n                        }, [ftr, mtr, frTr]);\n                    };\n                    var this_1 = this;\n                    for (var i = 0; i < mtr.length; i++) {\n                        _loop_1(i);\n                    }\n                }\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.column.getFreezeTableName() === 'frozen-right') {\n                    if (this.parent.enableRtl) {\n                        this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                            - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                    }\n                    else {\n                        this.minMove = parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString())\n                            - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                    }\n                }\n                else if (this.parent.enableRtl) {\n                    this.minMove = parseFloat(this.column.width.toString())\n                        - (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 0)\n                        - parseFloat(isNullOrUndefined(this.column.width) ? '' : this.column.width.toString());\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = void 0;\n                if (!isBlazor() || this.parent.isJsComponent) {\n                    args = { e: e, column: this.column };\n                }\n                else {\n                    var clonedColumn = extend({}, this.column);\n                    args = { column: clonedColumn };\n                }\n                this.parent.trigger(events.resizeStart, args, function (args) {\n                    if (args.cancel || _this.parent.isEdit) {\n                        _this.cancelResizeAction();\n                        return;\n                    }\n                    EventHandler.add(document, Browser.touchEndEvent, _this.resizeEnd, _this);\n                    EventHandler.add(_this.parent.element, Browser.touchMoveEvent, _this.resizing, _this);\n                    _this.updateCursor('add');\n                });\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.updateResizeEleHeight = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = this.element.parentElement.offsetHeight + 'px';\n        }\n    };\n    Resize.prototype.getColData = function (column, mousemove) {\n        return {\n            width: parseFloat(isNullOrUndefined(this.widthService.getWidth(column)) || this.widthService.getWidth(column) === 'auto' ? '0'\n                : this.widthService.getWidth(column).toString()) + mousemove,\n            minWidth: column.minWidth ? parseFloat(column.minWidth.toString()) : null,\n            maxWidth: column.maxWidth ? parseFloat(column.maxWidth.toString()) : null\n        };\n    };\n    Resize.prototype.resizing = function (e) {\n        if (isNullOrUndefined(this.column)) {\n            return;\n        }\n        var offsetWidth = 0;\n        if (isNullOrUndefined(this.column)) {\n            offsetWidth = parentsUntil(this.element, 'th').offsetWidth;\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        if (this.column.getFreezeTableName() === 'frozen-right') {\n            mousemove = this.parent.enableRtl ? (pageX - this.pageX) : (this.pageX - pageX);\n        }\n        var colData = this.getColData(this.column, mousemove);\n        if (!colData.width) {\n            colData.width = closest(this.element, 'th').offsetWidth;\n        }\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        this.parent.log('resize_min_max', { column: this.column, width: width });\n        if (this.column.getFreezeTableName() === 'frozen-right') {\n            if ((this.parent.enableRtl && this.minMove >= pageX) || (!this.parent.enableRtl && this.minMove <= pageX)) {\n                width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n                this.pageX = pageX = this.minMove;\n            }\n        }\n        if ((this.column.getFreezeTableName() !== 'frozen-right'\n            && ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)))\n            || (this.column.getFreezeTableName() === 'frozen-right' && ((this.parent.enableRtl && this.minMove >= pageX)\n                || (!this.parent.enableRtl && this.minMove <= pageX)))) {\n            width = this.column.minWidth ? parseFloat(this.column.minWidth.toString()) : 10;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseFloat(isNullOrUndefined(this.column.width) || this.column.width === 'auto' ?\n            offsetWidth.toString() : this.column.width.toString())) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            var columns = [this.column];\n            var finalColumns = [this.column];\n            if (this.column.columns) {\n                columns = this.getSubColumns(this.column, []);\n                columns = this.calulateColumnsWidth(columns, false, mousemove);\n                finalColumns = this.calulateColumnsWidth(columns, true, mousemove);\n            }\n            for (var _i = 0, finalColumns_1 = finalColumns; _i < finalColumns_1.length; _i++) {\n                var col = finalColumns_1[_i];\n                this.widthService.setColumnWidth(col, null, 'resize');\n            }\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.calulateColumnsWidth = function (columns, isUpdate, mousemove) {\n        var finalColumns = [];\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            var totalWidth = 0;\n            for (var i = 0; i < columns.length; i++) {\n                totalWidth += parseFloat(columns[i].width.toString());\n            }\n            var colData = this.getColData(col, (parseFloat(col.width)) * mousemove / totalWidth);\n            var colWidth = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n            if ((colWidth !== parseFloat(col.width.toString()))) {\n                if (isUpdate) {\n                    col.width = formatUnit(colWidth < 1 ? 1 : colWidth);\n                }\n                finalColumns.push(col);\n            }\n        }\n        return finalColumns;\n    };\n    Resize.prototype.getSubColumns = function (column, subColumns) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false && col.allowResizing) {\n                if (col.columns) {\n                    this.getSubColumns(col, subColumns);\n                }\n                else {\n                    subColumns.push(col);\n                }\n            }\n        }\n        return subColumns;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args;\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args = { e: e, column: this.column };\n        }\n        else {\n            var clonedColumn = extend({}, this.column);\n            args = { column: clonedColumn };\n        }\n        var content = this.parent.getContent().querySelector('.e-content');\n        var cTable = content.querySelector('.e-movablecontent') ? content.querySelector('.e-movablecontent') : content;\n        if (cTable.scrollHeight > cTable.clientHeight) {\n            this.parent.scrollModule.setPadding();\n            cTable.style.overflowY = 'scroll';\n        }\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.isFrozenGrid()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        if (this.parent.allowTextWrap) {\n            this.updateResizeEleHeight();\n            this.parent.notify(events.textWrapRefresh, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderContent().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_2 = columns; _b < columns_2.length; _b++) {\n                var column = columns_2[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.refreshStackedColumnWidth = function () {\n        for (var _i = 0, _a = this.parent.getStackedColumns(this.parent.columns); _i < _a.length; _i++) {\n            var stackedColumn = _a[_i];\n            stackedColumn.width = this.getStackedWidth(stackedColumn, 0);\n        }\n    };\n    Resize.prototype.getStackedWidth = function (column, width) {\n        for (var _i = 0, _a = column.columns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible !== false) {\n                if (col.columns) {\n                    this.getStackedWidth(col, width);\n                }\n                else {\n                    width += col.width;\n                }\n            }\n        }\n        return width;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        cell = cell.querySelector('.e-headercelldiv') || cell.querySelector('.e-stackedheadercelldiv');\n        var uid = cell.getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var isFrozen = this.parent.isFrozenGrid();\n        var height = isFrozen ? this.parent.getContent().querySelector('.e-content').offsetHeight\n            : this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (isFrozen) {\n            if (parentsUntil(rect, 'e-movableheader')) {\n                tr = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelectorAll('tr'));\n            }\n            else if (right && parentsUntil(rect, 'e-frozen-right-header')) {\n                tr = [].slice.call(this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelectorAll('tr'));\n            }\n            else {\n                tr = [].slice.call(this.parent.getHeaderContent().querySelector('.e-frozen-left-header').querySelectorAll('tr'));\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length && i > -1; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        if (parentsUntil(rect, 'e-frozen-right-header')) {\n            pos.left += (this.parent.enableRtl ? rect.offsetWidth - 2 : 0 - 1);\n        }\n        else {\n            pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        }\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n        if (this.parent.enableVirtualization) {\n            this.helper.classList.add('e-virtual-rhandler');\n        }\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left;\n        if (parentsUntil(rect, 'e-frozen-right-header')) {\n            left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? rect.offsetWidth - 2 : 0 - 1));\n        }\n        else {\n            left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        }\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.isFrozenGrid()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = parentsUntil(elem, 'e-grid') || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        var _this = this;\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(function () {\n                    _this.tapped = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        var col = this.parent.getColumnByUid(destElem.firstElementChild.getAttribute('e-mappinguid'));\n        var bool = col ? !col.lockColumn : true;\n        return ((srcElem.parentElement.isEqualNode(destElem.parentElement) || this.parent.enableColumnVirtualization)\n            || (this.parent.isFrozenGrid()\n                && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                    === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1 && bool;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var cols = this.parent.columns;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        var isFrozen = !this.parent.getFrozenColumns() && this.parent.isFrozenGrid();\n        if (isFrozen) {\n            return this.parent.getColumns();\n        }\n        else {\n            for (var i = 0, len = cols.length; i < len; i++) {\n                columnModel.push(cols[i]);\n                if (cols[i].columns) {\n                    subCols = subCols.concat(cols[i].columns);\n                }\n            }\n            if (subCols.length) {\n                columnModel = columnModel.concat(this.getColumnsModel(subCols));\n            }\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column });\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        if (!isNullOrUndefined(destElemUid)) {\n            var destColumn = gObj.getColumnByUid(destElemUid);\n            if (isNullOrUndefined(destColumn) || !destColumn.allowReordering || destColumn.lockColumn) {\n                this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: column, destColumn: destColumn });\n                return;\n            }\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.columns.filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                var uid = this.element.firstElementChild.getAttribute('e-mappinguid');\n                this.destElement = destElem;\n                this.parent.notify(events.setReorderDestinationElement, { ele: destElem });\n                if (uid) {\n                    this.moveColumns(newIndex, this.parent.getColumnByUid(uid));\n                }\n                else {\n                    var headers = this.getHeaderCells();\n                    var oldIdx = getElementIndex(this.element, headers);\n                    var columns = this.getColumnsModel(this.parent.columns);\n                    var column_2 = columns[oldIdx];\n                    this.moveColumns(newIndex, column_2);\n                }\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column, reorderByColumn, preventRefresh) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var isFrozen = !gObj.getFrozenColumns() && gObj.isFrozenGrid();\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : isFrozen ? this.parent.getColumns() : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (((this.parent.isFrozenGrid() && parent) || this.parent.lockcolPositionCount) && !reorderByColumn) {\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].field === column.field) {\n                    srcIdx = i;\n                    break;\n                }\n            }\n            var col = this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute('e-mappinguid'));\n            if (col) {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].field === col.field) {\n                        destIndex = i;\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < cols.length; i++) {\n                    if (cols[i].headerText === this.destElement.innerText.trim()) {\n                        destIndex = i;\n                    }\n                }\n            }\n        }\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        var args = { column: column, destIndex: destIndex, columns: cols, parent: parent, cancel: false };\n        gObj.notify(events.refreshFrozenColumns, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        if (preventRefresh !== false) {\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'reorder', fromIndex: destIndex, toIndex: srcIdx, toColumnUid: column.uid\n            });\n        }\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var isFrozen = !this.parent.getFrozenColumns() && this.parent.isFrozenGrid();\n        var cols = isFrozen ? this.parent.getColumns() : this.parent.columns;\n        var headers = this.getHeaderCells();\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        var frozenColumns = this.parent.getFrozenColumns();\n        if (frozenColumns || this.parent.lockcolPositionCount) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            if (frozenColumns) {\n                var mRows = [].slice.call(this.parent.getHeaderContent()\n                    .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n                for (var i = 0; i < fRows.length; i++) {\n                    fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                    var isAvail = void 0;\n                    for (var k = 0; k < fTh.length; k++) {\n                        for (var j = 0; j < mTh.length; j++) {\n                            if (mTh[j].innerText === fTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([fTh[k]]);\n                        }\n                    }\n                    for (var j = 0; j < mTh.length; j++) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < fRows.length; i++) {\n                    mTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                    for (var k = 0; k < mTh.length; k++) {\n                        var isAvail = void 0;\n                        for (var j = k + 1; j < mTh.length; j++) {\n                            if (mTh[j].innerText === mTh[k].innerText) {\n                                isAvail = true;\n                                break;\n                            }\n                        }\n                        if (!isAvail) {\n                            fHeaders = fHeaders.concat([mTh[k]]);\n                        }\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    Reorder.prototype.reorderSingleColumn = function (fromFName, toFName) {\n        var fColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === fromFName; })[0]\n            : this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (col) { return col.field === toFName; })[0]\n            : this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && (!fColumn.allowReordering || fColumn.lockColumn)) ||\n            (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || fColumn.lockColumn))) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), column: fColumn, destColumn: toColumn });\n            return;\n        }\n        var column = toColumn;\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, fColumn, true);\n        }\n    };\n    Reorder.prototype.reorderMultipleColumns = function (fromFNames, toFName) {\n        var toIndex = this.parent.getColumnIndexByField(toFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if (toIndex < 0 || (!isNullOrUndefined(toColumn) && (!toColumn.allowReordering || toColumn.lockColumn))) {\n            return;\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByField(fromFNames[i]);\n            if (!isNullOrUndefined(column) && (!column.allowReordering || column.lockColumn)) {\n                return;\n            }\n        }\n        for (var i = 0; i < fromFNames.length; i++) {\n            var column = this.parent.getColumnByIndex(toIndex);\n            var parent_1 = this.getColParent(column, this.parent.columns);\n            var columns = parent_1 ? parent_1.columns : this.parent.columns;\n            var destIndex = inArray(column, columns);\n            if (destIndex > -1) {\n                this.moveColumns(destIndex, this.parent.getColumnByField(fromFNames[i]), true, !(isBlazor() && !this.parent.isJsComponent));\n            }\n            if (this.parent.getColumnIndexByField(fromFNames[i + 1]) >= destIndex) {\n                toIndex++; //R to L\n            }\n        }\n        if (isBlazor() && !this.parent.isJsComponent) {\n            var cols_1 = this.parent.getColumns();\n            this.parent.notify(events.modelChanged, {\n                fromColumnUid: fromFNames.map(function (name) { return cols_1.filter(function (col) { return col.field === name; })[0].uid; }),\n                toColumnUid: toColumn.uid,\n                isMultipleReorder: true,\n                requestType: 'reorder',\n                type: 'actionBegin'\n            });\n        }\n    };\n    Reorder.prototype.moveTargetColumn = function (column, toIndex) {\n        if (toIndex > -1) {\n            this.moveColumns(toIndex, column, true);\n        }\n    };\n    Reorder.prototype.reorderSingleColumnByTarget = function (fieldName, toIndex) {\n        var column = this.parent.getColumnByField(fieldName);\n        this.moveTargetColumn(column, toIndex);\n    };\n    Reorder.prototype.reorderMultipleColumnByTarget = function (fieldName, toIndex) {\n        for (var i = 0; i < fieldName.length; i++) {\n            this.reorderSingleColumnByTarget(fieldName[i], toIndex);\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string | string[]} fromFName - Defines the origin field names.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        if (typeof fromFName === 'string') {\n            this.reorderSingleColumn(fromFName, toFName);\n            this.fromCol = fromFName;\n        }\n        else {\n            this.reorderMultipleColumns(fromFName, toFName);\n            this.fromCol = fromFName[0];\n        }\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {number} fromIndex - Defines the origin field index.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByIndex = function (fromIndex, toIndex) {\n        var column = this.parent.getColumnByIndex(fromIndex);\n        this.moveTargetColumn(column, toIndex);\n    };\n    /**\n     * Changes the position of the Grid columns by field index.\n     * @param  {string | string[]} fieldName - Defines the field name.\n     * @param  {number} toIndex - Defines the destination field index.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumnByTargetIndex = function (fieldName, toIndex) {\n        typeof fieldName === 'string' ? this.reorderSingleColumnByTarget(fieldName, toIndex) :\n            this.reorderMultipleColumnByTarget(fieldName, toIndex);\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function (e) {\n        if (e && e.args.isXaxis) {\n            this.setDisplay('none');\n        }\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n        var target = this.fromCol && this.parent.getColumnHeaderByField(this.fromCol);\n        if (target) {\n            this.parent.focusModule.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlLeftArrow':\n            case 'ctrlRightArrow':\n                var element = gObj.focusModule.currentInfo.element;\n                if (element && element.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                    var visibleCols = gObj.getVisibleColumns();\n                    var index = visibleCols.indexOf(column);\n                    var toCol = e.action === 'ctrlLeftArrow' ? visibleCols[index - 1] : visibleCols[index + 1];\n                    if (toCol && toCol.field && column.field) {\n                        this.reorderColumns(column.field, toCol.field);\n                    }\n                }\n                break;\n        }\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        var isLeft = this.x > getPosition(e.event).x + content.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseRight = cliRect.right;\n        if (this.parent.isFrozenGrid()) {\n            this.updateFrozenScrollPosition(x, cliRect);\n        }\n        else {\n            var cliRectBaseLeft = cliRect.left;\n            var scrollElem_1 = this.parent.getContent().firstElementChild;\n            if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem_1, true); }, 50);\n            }\n            else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n                this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem_1, false); }, 50);\n            }\n        }\n    };\n    Reorder.prototype.updateFrozenScrollPosition = function (x, cliRect) {\n        var _this = this;\n        var scrollElem = this.parent.getContent().querySelector('.e-movablecontent');\n        var mhdrCliRect = this.parent.element.querySelector('.e-movableheader').getBoundingClientRect();\n        var left = this.parent.getFrozenLeftCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var cliRectBaseRight = right ? mhdrCliRect.right : cliRect.right;\n        var cliRectBaseLeft = left ? mhdrCliRect.left : cliRect.left;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        if (this.parent.isFrozenGrid() && target.classList.contains('e-headercell')) {\n            var left = this.parent.getFrozenLeftCount();\n            var right = this.parent.getFrozenRightColumnsCount();\n            var dropEle = this.element.querySelector('.e-headercelldiv');\n            var dropCol = dropEle ? this.parent.getColumnByUid(dropEle.getAttribute('data-uid')) : null;\n            var col = this.parent.getColumnByUid(target.firstElementChild.getAttribute('e-mappinguid'));\n            var fhdrWidth = Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right);\n            var mhdrRight = Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);\n            if (col) {\n                if (left && !right && this.parent.getNormalizedColumnIndex(col.uid) >= left\n                    && ((isLeft && Math.round(cliRect.left) < fhdrWidth) || (!isLeft && mhdrRight < cliRect.right))) {\n                    return;\n                }\n                if (!left && right && dropCol && dropCol.getFreezeTableName() !== col.getFreezeTableName()\n                    && (!isLeft && Math.round(cliRect.right) < fhdrWidth)) {\n                    return;\n                }\n            }\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 7 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (!e.column.allowReordering || e.column.lockColumn) {\n            return;\n        }\n        var content = gObj.isFrozenGrid() ? gObj.getMovableVirtualContent() : gObj.getContent().firstElementChild;\n        this.x = getPosition(e.event).x + content.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition, addRemoveActiveClasses, isActionPrevent } from '../base/util';\nimport { setRowsInTbody, resetRowIndex } from '../base/util';\nimport * as events from '../base/constant';\nimport { Scroll } from '../actions/scroll';\nimport { Query } from '@syncfusion/ej2-data';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        this.selectedRows = [];\n        this.isOverflowBorder = true;\n        this.selectedRowColls = [];\n        this.isRefresh = true;\n        this.isReplaceDragEle = true;\n        this.istargetGrid = false;\n        /* tslint:disable-next-line:max-line-length */\n        // tslint:disable-next-line:max-func-body-length\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = _this.draggable.currentStateTarget;\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement('tbody');\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (gObj.rowDropSettings.targetID && ((!target.classList.contains('e-selectionbackground')\n                    && gObj.selectionSettings.type !== 'Single') || !parentsUntil(target, 'e-rowcell'))) ||\n                (!gObj.rowDropSettings.targetID && !parentsUntil(target, 'e-rowdragdrop'))) {\n                return false;\n            }\n            if (gObj.rowDropSettings.targetID &&\n                gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                gObj.selectRow(parseInt(_this.draggable.currentStateTarget.parentElement.getAttribute('aria-rowindex'), 10));\n            }\n            _this.startedRow = closestElement(target, 'tr').cloneNode(true);\n            var frzCols = _this.parent.isFrozenGrid();\n            if (frzCols) {\n                var rowIndex = parseInt(closestElement(target, 'tr').getAttribute('aria-rowindex'), 10);\n                _this.startedRow.innerHTML = '';\n                _this.startedRow.innerHTML += gObj.getRowByIndex(rowIndex).innerHTML;\n                _this.startedRow.innerHTML += gObj.getMovableRowByIndex(rowIndex).innerHTML;\n                if (gObj.getFrozenMode() === 'Left-Right') {\n                    _this.startedRow.innerHTML += gObj.getFrozenRightRowByIndex(rowIndex).innerHTML;\n                }\n            }\n            _this.processArgs(target);\n            var args = {\n                selectedRow: _this.rows, dragelement: target,\n                cloneElement: visualElement, cancel: false, data: _this.rowData\n            };\n            var selectedRows = gObj.getSelectedRows();\n            gObj.trigger(events.rowDragStartHelper, args);\n            var cancel = 'cancel';\n            var cloneElement = 'cloneElement';\n            if (args[cancel]) {\n                return false;\n            }\n            removeElement(_this.startedRow, '.e-indentcell');\n            removeElement(_this.startedRow, '.e-detailrowcollapse');\n            removeElement(_this.startedRow, '.e-detailrowexpand');\n            _this.removeCell(_this.startedRow, 'e-gridchkbox');\n            var exp = new RegExp('e-active', 'g'); //high contrast issue\n            _this.startedRow.innerHTML = _this.startedRow.innerHTML.replace(exp, '');\n            tbody.appendChild(_this.startedRow);\n            if (gObj.getSelectedRowIndexes().length > 1 && _this.startedRow.hasAttribute('aria-selected')) {\n                var index = gObj.getFrozenMode() === 'Left-Right' ? 3 : 2;\n                var dropCountEle = _this.parent.createElement('span', {\n                    className: 'e-dropitemscount', innerHTML: frzCols ? '' + selectedRows.length / index : '' + selectedRows.length,\n                });\n                visualElement.appendChild(dropCountEle);\n            }\n            var ele = closestElement(target, 'tr').querySelector('.e-icon-rowdragicon');\n            if (ele) {\n                ele.classList.add('e-dragstartrow');\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            var target = e.target;\n            var spanCssEle = _this.parent.element.querySelector('.e-dropitemscount');\n            if (_this.parent.getSelectedRecords().length > 1 && spanCssEle) {\n                spanCssEle.style.left = _this.parent.element.querySelector('.e-cloneproperties table')\n                    .offsetWidth - 5 + 'px';\n            }\n            _this.processArgs(target);\n            gObj.trigger(events.rowDragStart, {\n                rows: (isBlazor()) ? null : _this.rows, target: (isBlazor()) ? null : e.target,\n                draggableType: 'rows', fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                data: (Object.keys(_this.rowData[0]).length > 0) ? _this.rowData : _this.currentViewData()\n            });\n            if (isBlazor()) {\n                e.bindEvents(e.dragElement);\n            }\n            _this.dragStartData = _this.rowData;\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances &&\n                dropElem.ej2_instances[0].getModuleName() === 'grid') {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            _this.isDropGrid = _this.parent;\n            _this.istargetGrid = false;\n            if (_this.parent.rowDropSettings.targetID) {\n                var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n                _this.isDropGrid = dropElement.ej2_instances[0];\n                if (parentsUntil(e.target, 'e-grid')) {\n                    _this.istargetGrid = _this.parent.rowDropSettings.targetID === parentsUntil(e.target, 'e-grid').id;\n                }\n            }\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur', 'e-movecur']);\n            _this.isOverflowBorder = true;\n            _this.hoverState = gObj.enableHover;\n            var trElement = parentsUntil(target, 'e-grid') ? closestElement(e.target, 'tr') : null;\n            gObj.enableHover = false;\n            if (!e.target) {\n                return;\n            }\n            _this.processArgs(target);\n            var args = {\n                rows: _this.rows, target: target, draggableType: 'rows',\n                data: _this.rowData, originalEvent: e, cancel: false\n            };\n            gObj.trigger(events.rowDrag, args);\n            _this.stopTimer();\n            if (args.cancel) {\n                return;\n            }\n            gObj.element.classList.add('e-rowdrag');\n            _this.dragTarget = trElement && parentsUntil(target, 'e-grid').id === cloneElement.parentElement.id ?\n                parseInt(trElement.getAttribute('aria-rowindex'), 10) : parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10);\n            if (gObj.rowDropSettings.targetID) {\n                if (!parentsUntil(target, 'e-grid') ||\n                    parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                }\n            }\n            else {\n                var elem = parentsUntil(target, 'e-grid');\n                if (elem && elem.id === cloneElement.parentElement.id) {\n                    classList(cloneElement, ['e-movecur'], ['e-defaultcur']);\n                }\n                else {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-movecur']);\n                }\n            }\n            if (parentsUntil(_this.isDropGrid.element, 'e-grid')) {\n                if ((!_this.isDropGrid.groupSettings.columns.length || e.target.classList.contains('e-selectionbackground')) &&\n                    !_this.isDropGrid.element.querySelector('.e-emptyrow')) {\n                    if (parentsUntil(target, 'e-grid') && parentsUntil(target, 'e-grid').id === _this.isDropGrid.element.id) {\n                        _this.updateScrollPostion(e.event, target);\n                    }\n                    if (((_this.isOverflowBorder || _this.parent.frozenRows > _this.dragTarget) &&\n                        (parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10) !== _this.dragTarget || _this.istargetGrid))\n                        || (_this.istargetGrid && trElement && _this.isDropGrid.getRowByIndex(_this.isDropGrid.getCurrentViewRecords().length - 1).\n                            getAttribute('data-uid') === trElement.getAttribute('data-uid'))) {\n                        _this.moveDragRows(e, _this.startedRow, trElement);\n                    }\n                    else {\n                        var islastRowIndex = void 0;\n                        if (_this.parent.enableVirtualization) {\n                            islastRowIndex = trElement && parseInt(trElement.getAttribute('aria-rowindex'), 10) ===\n                                _this.parent.renderModule.data.dataManager.dataSource.json.length - 1;\n                        }\n                        else {\n                            var lastRowUid = _this.parent.getRowByIndex(_this.parent.getCurrentViewRecords().length - 1).\n                                getAttribute('data-uid');\n                            islastRowIndex = trElement && lastRowUid === trElement.getAttribute('data-uid') && lastRowUid !==\n                                _this.startedRow.getAttribute('data-uid');\n                        }\n                        if (islastRowIndex && !_this.parent.rowDropSettings.targetID) {\n                            var bottomborder = _this.parent.createElement('div', { className: 'e-lastrow-dragborder' });\n                            var gridcontentEle = _this.parent.getContent();\n                            bottomborder.style.width = _this.parent.element.offsetWidth - _this.getScrollWidth() + 'px';\n                            if (!gridcontentEle.querySelectorAll('.e-lastrow-dragborder').length) {\n                                gridcontentEle.classList.add('e-grid-relative');\n                                gridcontentEle.appendChild(bottomborder);\n                                bottomborder.style.bottom = _this.getScrollWidth() + 'px';\n                            }\n                        }\n                        _this.removeBorder(trElement);\n                    }\n                }\n                if (target && target.classList.contains('e-content')\n                    && !_this.isDropGrid.element.querySelector('.e-emptyrow') && _this.istargetGrid) {\n                    _this.removeBorder(trElement);\n                    var rowIndex = _this.isDropGrid.getCurrentViewRecords().length - 1;\n                    var selector = '.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse';\n                    var rowElement = [];\n                    rowElement = [].slice.call(_this.isDropGrid.getRowByIndex(rowIndex).querySelectorAll(selector));\n                    if (_this.isDropGrid.isFrozenGrid()) {\n                        rowElement = _this.borderRowElement(rowIndex, selector);\n                    }\n                    if (rowElement.length > 0) {\n                        addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n                    }\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            if (isActionPrevent(_this.parent)) {\n                _this.parent.notify(events.preventBatch, {\n                    instance: _this, handler: _this.processDragStop, arg1: e\n                });\n            }\n            else {\n                _this.processDragStop(e);\n            }\n        };\n        this.processDragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var targetEle = _this.getElementFromPosition(e.helper, e.event);\n            var target = targetEle && !targetEle.classList.contains('e-dlg-overlay') ?\n                targetEle : e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElement = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElement && dropElement.ej2_instances &&\n                dropElement.ej2_instances[0].getModuleName() === 'grid') {\n                dropElement.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            if (parentsUntil(_this.isDropGrid.element, 'e-grid')) {\n                _this.stopTimer();\n                _this.isDropGrid.enableHover = _this.hoverState;\n                _this.isDropGrid.getContent().classList.remove('e-grid-relative');\n                _this.removeBorder(targetEle);\n                var stRow = _this.isDropGrid.element.querySelector('.e-dragstartrow');\n                if (stRow) {\n                    stRow.classList.remove('e-dragstartrow');\n                }\n            }\n            _this.processArgs(target);\n            if (_this.parent.enableVirtualization && isNullOrUndefined(_this.rows[0])) {\n                _this.dragTarget = null;\n                remove(e.helper);\n                return;\n            }\n            var args = {\n                target: (isBlazor()) ? null : target, draggableType: 'rows',\n                cancel: false,\n                fromIndex: parseInt(_this.rows[0].getAttribute('aria-rowindex'), 10),\n                dropIndex: _this.dragTarget, rows: (isBlazor()) ? null : _this.rows,\n                data: (Object.keys(_this.dragStartData[0]).length > 0) ? _this.dragStartData : _this.currentViewData()\n            };\n            gObj.trigger(events.rowDrop, args, function () {\n                if (!(parentsUntil(target, 'e-row') || parentsUntil(target, 'e-emptyrow')\n                    || parentsUntil(target, 'e-gridcontent')) || args.cancel) {\n                    _this.dragTarget = null;\n                    remove(e.helper);\n                    return;\n                }\n                _this.isRefresh = false;\n                var selectedIndexes = _this.parent.getSelectedRowIndexes();\n                if (gObj.isRowDragable()) {\n                    if (!isBlazor()) {\n                        if (!_this.parent.rowDropSettings.targetID &&\n                            _this.startedRow.querySelector('td.e-selectionbackground') && selectedIndexes.length > 1 &&\n                            selectedIndexes.length !== _this.parent.getCurrentViewRecords().length) {\n                            _this.reorderRows(selectedIndexes, args.dropIndex);\n                        }\n                        else {\n                            _this.reorderRows([parseInt(_this.startedRow.getAttribute('aria-rowindex'), 10)], _this.dragTarget);\n                        }\n                    }\n                    else {\n                        var draggedData = _this.parent.getSelectedRecords().length ?\n                            _this.parent.getSelectedRecords() : _this.currentViewData();\n                        var changeRecords = {\n                            addedRecords: [],\n                            deletedRecords: draggedData,\n                            changedRecords: []\n                        };\n                        var toIdx = _this.dragTarget ? _this.dragTarget : args.dropIndex;\n                        var dragDropDestinationIndex = 'dragDropDestinationIndex';\n                        var query = new Query;\n                        query[dragDropDestinationIndex] = toIdx;\n                        _this.saveChange(changeRecords, query);\n                        changeRecords.deletedRecords = [];\n                        changeRecords.addedRecords = draggedData;\n                        _this.saveChange(changeRecords, query);\n                    }\n                    _this.dragTarget = null;\n                    if (!gObj.rowDropSettings.targetID) {\n                        remove(e.helper);\n                        if (gObj.frozenRows && gObj.enableVirtualization) {\n                            gObj.refresh();\n                        }\n                        else {\n                            _this.rowOrder(args);\n                        }\n                    }\n                }\n                _this.isRefresh = true;\n            });\n        };\n        this.removeCell = function (targetRow, className) {\n            return [].slice.call(targetRow.querySelectorAll('td')).filter(function (cell) {\n                if (cell.classList.contains(className)) {\n                    targetRow.deleteCell(cell.cellIndex);\n                }\n            });\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.onDataBoundFn = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.refreshRow = function (args, tbody, mtbody, frTbody, target, mTarget, frTarget) {\n        var gObj = this.parent;\n        var frzCols = gObj.isFrozenGrid();\n        var isLeftRight = gObj.getFrozenMode() === 'Left-Right';\n        var tbodyMovableHeader;\n        var tbodyMovableContent;\n        var frHdr;\n        var frCnt;\n        var tbodyContent = gObj.getContentTable().querySelector('tbody');\n        var tbodyHeader = gObj.getHeaderTable().querySelector('tbody');\n        if (frzCols) {\n            tbodyMovableHeader = gObj.getMovableHeaderTbody();\n            tbodyMovableContent = gObj.getMovableContentTbody();\n            if (isLeftRight) {\n                frHdr = gObj.getFrozenRightHeaderTbody();\n                frCnt = gObj.getFrozenRightContentTbody();\n            }\n        }\n        var index = gObj.getFrozenMode() === 'Left-Right' ? 3 : 2;\n        for (var i = 0, len = args.rows.length; i < len; i++) {\n            if (frzCols) {\n                if (i % index === 0) {\n                    tbody.insertBefore(args.rows[i], target);\n                }\n                else if (i % index === 1) {\n                    mtbody.insertBefore(args.rows[i], mTarget);\n                }\n                else {\n                    frTbody.insertBefore(args.rows[i], frTarget);\n                }\n            }\n            else {\n                tbody.insertBefore(args.rows[i], target);\n            }\n        }\n        var tr = [].slice.call(tbody.querySelectorAll('.e-row'));\n        var mtr;\n        var frTr;\n        if (frzCols) {\n            mtr = [].slice.call(mtbody.querySelectorAll('.e-row'));\n            if (isLeftRight) {\n                frTr = [].slice.call(frTbody.querySelectorAll('.e-row'));\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            this.refreshVirtualData(tr, mtr, frTr);\n        }\n        else {\n            this.refreshData(tr, mtr, frTr);\n        }\n        if (this.parent.frozenRows) {\n            var _loop_1 = function (i, len) {\n                if (i < this_1.parent.frozenRows) {\n                    setRowsInTbody(tbodyHeader, tbodyMovableHeader, frHdr, tr, mtr, frTr, function (tbody, rows) {\n                        tbody.appendChild(rows[i]);\n                    });\n                }\n                else {\n                    setRowsInTbody(tbodyContent, tbodyMovableContent, frCnt, tr, mtr, frTr, function (tbody, rows) {\n                        tbody.appendChild(rows[i]);\n                    });\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = tr.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n    };\n    RowDD.prototype.updateFrozenRowreOrder = function (args) {\n        var gObj = this.parent;\n        var tbodyMovH;\n        var tbodyMovC;\n        var tbodyFrH;\n        var tbodyFrC;\n        var frzCols = this.parent.isFrozenGrid();\n        var isLeftRight = gObj.getFrozenMode() === 'Left-Right';\n        var tbodyC = gObj.getContentTable().querySelector('tbody');\n        var tbodyH = gObj.getHeaderTable().querySelector('tbody');\n        if (frzCols) {\n            tbodyMovH = gObj.getMovableHeaderTbody();\n            tbodyMovC = gObj.getMovableContentTbody();\n            if (isLeftRight) {\n                tbodyFrH = gObj.getFrozenRightHeaderTbody();\n                tbodyFrC = gObj.getFrozenRightContentTbody();\n            }\n        }\n        var tr = [].slice.call(tbodyH.querySelectorAll('.e-row')).concat([].slice.call(tbodyC.querySelectorAll('.e-row')));\n        var mtr;\n        var frTr;\n        if (frzCols) {\n            mtr = [].slice.call(tbodyMovH.querySelectorAll('.e-row')).concat([].slice.call(tbodyMovC.querySelectorAll('.e-row')));\n            if (isLeftRight) {\n                frTr = [].slice.call(tbodyFrH.querySelectorAll('.e-row')).concat([].slice.call(tbodyFrC.querySelectorAll('.e-row')));\n            }\n        }\n        var tbody = gObj.createElement('tbody');\n        var mtbody = gObj.createElement('tbody');\n        var frTbody = gObj.createElement('tbody');\n        this.parent.clearSelection();\n        var targetRows = this.refreshRowTarget(args);\n        for (var i = 0, len = tr.length; i < len; i++) {\n            tbody.appendChild(tr[i]);\n            if (frzCols) {\n                mtbody.appendChild(mtr[i]);\n                if (isLeftRight) {\n                    frTbody.appendChild(frTr[i]);\n                }\n            }\n        }\n        this.refreshRow(args, tbody, mtbody, frTbody, targetRows.target, targetRows.mTarget, targetRows.frTarget);\n    };\n    RowDD.prototype.refreshRowTarget = function (args) {\n        var gObj = this.parent;\n        var tr;\n        var mTr;\n        var frTr;\n        var targetIdx = parseInt(args.target.parentElement.getAttribute('aria-rowindex'), 10);\n        if (args.fromIndex < args.dropIndex || args.fromIndex === args.dropIndex) {\n            targetIdx = targetIdx + 1;\n        }\n        tr = gObj.getRowByIndex(targetIdx);\n        if (gObj.isFrozenGrid()) {\n            mTr = gObj.getMovableRowByIndex(targetIdx);\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                frTr = gObj.getFrozenRightRowByIndex(targetIdx);\n            }\n        }\n        var rows = {\n            target: tr, mTarget: mTr, frTarget: frTr\n        };\n        return rows;\n    };\n    ;\n    RowDD.prototype.updateFrozenColumnreOrder = function (args) {\n        var gObj = this.parent;\n        var mtbody;\n        var frTbody;\n        var frzCols = this.parent.isFrozenGrid();\n        var tbody = gObj.getContentTable().querySelector('tbody');\n        if (frzCols) {\n            mtbody = gObj.getMovableContentTbody();\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                frTbody = gObj.getFrozenRightContentTbody();\n            }\n        }\n        this.parent.clearSelection();\n        var targetRows = this.refreshRowTarget(args);\n        this.refreshRow(args, tbody, mtbody, frTbody, targetRows.target, targetRows.mTarget, targetRows.frTarget);\n    };\n    RowDD.prototype.refreshVirtualData = function (tr, mtr, frTr) {\n        var recordobj = {};\n        var currentViewData = this.parent.getCurrentViewRecords();\n        var startedRow = this.parent.isFrozenGrid() ? this.parent.getMovableRows()[0] : this.parent.getRows()[0];\n        var startIndex = parseInt(startedRow.getAttribute('aria-rowindex'), 10);\n        for (var i = 0, len = tr.length; i < len; i++) {\n            var index = parseInt(tr[i].getAttribute('aria-rowindex'), 10);\n            this.parent.notify(events.refreshVirtualCacheOnRowDD, { objIndex: index, end: i === tr.length - 1, startIndex: startIndex });\n            index = index - startIndex;\n            recordobj[i] = currentViewData[index];\n        }\n        var rowsElem = this.parent.getRows();\n        var mvbRows;\n        var frRightRow;\n        if (this.parent.isFrozenGrid()) {\n            mvbRows = this.parent.getMovableRows();\n            if (frTr) {\n                frRightRow = this.parent.getFrozenRightRows();\n            }\n        }\n        for (var i = 0, len = tr.length; i < len; i++) {\n            tr[i].setAttribute('aria-rowindex', (i + startIndex).toString());\n            rowsElem[i] = tr[i];\n            currentViewData[i] = recordobj[i];\n            if (this.parent.isFrozenGrid()) {\n                mtr[i].setAttribute('aria-rowindex', (i + startIndex).toString());\n                mvbRows[i] = mtr[i];\n                if (frTr) {\n                    frTr[i].setAttribute('aria-rowindex', (i + startIndex).toString());\n                    frRightRow[i] = frTr[i];\n                }\n            }\n        }\n    };\n    ;\n    RowDD.prototype.refreshData = function (tr, mtr, frTr) {\n        var rowObj = {};\n        var movobj = {};\n        var frObj = {};\n        var recordobj = {};\n        var rowObjects = this.parent.getRowsObject();\n        var movbObject = this.parent.getMovableRowsObject();\n        var frRightObject = this.parent.getFrozenRightRowsObject();\n        var currentViewData = this.parent.getCurrentViewRecords();\n        for (var i = 0, len = tr.length; i < len; i++) {\n            var index = parseInt(tr[i].getAttribute('aria-rowindex'), 10);\n            rowObj[i] = rowObjects[index];\n            recordobj[i] = currentViewData[index];\n            if (this.parent.isFrozenGrid()) {\n                movobj[i] = movbObject[index];\n                if (frTr) {\n                    frObj[i] = frRightObject[index];\n                }\n            }\n        }\n        var rows = this.parent.getRows();\n        var movbRows;\n        var frRightRows;\n        if (this.parent.isFrozenGrid()) {\n            movbRows = this.parent.getMovableRows();\n            if (frTr) {\n                frRightRows = this.parent.getFrozenRightRows();\n            }\n        }\n        for (var i = 0, len = tr.length; i < len; i++) {\n            rows[i] = tr[i];\n            rowObjects[i] = rowObj[i];\n            currentViewData[i] = recordobj[i];\n            if (this.parent.isFrozenGrid()) {\n                movbRows[i] = mtr[i];\n                movbObject[i] = movobj[i];\n                if (frTr) {\n                    frRightRows[i] = frTr[i];\n                    frRightObject[i] = frObj[i];\n                }\n            }\n        }\n        resetRowIndex(this.parent, rowObjects, tr);\n        if (this.parent.isFrozenGrid()) {\n            resetRowIndex(this.parent, movbObject, mtr);\n            if (frTr) {\n                resetRowIndex(this.parent, frRightObject, frTr);\n            }\n        }\n    };\n    RowDD.prototype.rowOrder = function (args) {\n        if (args.dropIndex === args.fromIndex || isNaN(args.dropIndex)) {\n            return;\n        }\n        if (this.parent.childGrid) {\n            this.parent.detailCollapseAll();\n            var rows = [].slice.call(this.parent.getContentTable().querySelector('tbody').children);\n            var rowObjects = this.parent.getRowsObject();\n            rows.filter(function (row) {\n                if (row.classList.contains('e-detailrow')) {\n                    row.remove();\n                }\n            });\n            for (var i = 0, len = rowObjects.length; i < len; i++) {\n                if (!rowObjects[i]) {\n                    break;\n                }\n                if (rowObjects[i].isDetailRow) {\n                    this.parent.getRowsObject().splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (args.target.classList.contains('e-rowcelldrag')) {\n            args.target = args.target.parentElement;\n        }\n        if (this.parent.frozenRows) {\n            this.updateFrozenRowreOrder(args);\n        }\n        else {\n            this.updateFrozenColumnreOrder(args);\n        }\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            var indexes = [];\n            if (this.parent.filterSettings.columns.length || this.parent.sortSettings.columns.length) {\n                for (var i = 0, len = args.rows.length; i < len; i++) {\n                    indexes.push(parseInt(args.rows[i].getAttribute('aria-rowindex'), 10));\n                }\n                this.selectedRowColls = indexes;\n            }\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.currentViewData = function () {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var currentVdata = [];\n        var fromIdx = parseInt(this.startedRow.getAttribute('aria-rowindex'), 10);\n        for (var i = 0, n = selectedIndexes.length; i < n; i++) {\n            var currentV = 'currentViewData';\n            currentVdata[i] = this.parent[currentV][selectedIndexes[i]];\n        }\n        if (!this.parent.rowDropSettings.targetID && selectedIndexes.length === 0) {\n            currentVdata[0] = this.parent.currentViewData[fromIdx];\n        }\n        return currentVdata;\n    };\n    RowDD.prototype.saveChange = function (changeRecords, query) {\n        var _this = this;\n        this.parent.getDataModule().saveChanges(changeRecords, this.parent.getPrimaryKeyFieldNames()[0], {}, query)\n            .then(function () {\n            _this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }).catch(function (e) {\n            var error = 'error';\n            var message = 'message';\n            if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                e[error] = e[error][message];\n            }\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    RowDD.prototype.reorderRows = function (fromIndexes, toIndex) {\n        var selectedIndexes = this.parent.getSelectedRowIndexes();\n        var selectedRecords = [];\n        var draggedRecords = [];\n        var currentViewData = this.parent.renderModule.data.dataManager.dataSource.json;\n        var skip = this.parent.allowPaging ?\n            (this.parent.pageSettings.currentPage * this.parent.pageSettings.pageSize) - this.parent.pageSettings.pageSize : 0;\n        var dropIdx = toIndex + skip;\n        var actualIdx = fromIndexes[0] + skip;\n        for (var i = 0, len = fromIndexes.length; i < len; i++) {\n            draggedRecords[i] = currentViewData[fromIndexes[i] + skip];\n        }\n        for (var i = 0, len = selectedIndexes.length; i < len; i++) {\n            selectedRecords[i] = currentViewData[selectedIndexes[i] + skip];\n        }\n        for (var i = 0, len = draggedRecords.length; i < len; i++) {\n            if (i !== 0) {\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) ===\n                        JSON.stringify(draggedRecords[i])) {\n                        actualIdx = j;\n                        break;\n                    }\n                }\n                for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                    if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(draggedRecords[i - 1])) {\n                        if (actualIdx > j) {\n                            dropIdx = j + 1;\n                        }\n                        break;\n                    }\n                }\n            }\n            this.reorderRow(actualIdx - skip, dropIdx - skip);\n        }\n        if (this.isRefresh) {\n            this.parent.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n        for (var i = 0, len = selectedRecords.length; i < len; i++) {\n            for (var j = 0, len1 = currentViewData.length; j < len1; j++) {\n                if (JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[j]) === JSON.stringify(selectedRecords[i])) {\n                    selectedIndexes[i] = j - skip;\n                    break;\n                }\n            }\n        }\n        this.selectedRowColls = selectedIndexes;\n    };\n    RowDD.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        this.draggable = new Draggable(gObj.element, {\n            dragTarget: '.e-rowcelldrag, .e-rowdragdrop, .e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop,\n            isReplaceDragEle: this.isReplaceDragEle,\n        });\n    };\n    RowDD.prototype.updateScrollPostion = function (e, target) {\n        var _this = this;\n        var y = getPosition(e).y;\n        var cliRect = this.isDropGrid.getContent().getBoundingClientRect();\n        var rowHeight = this.isDropGrid.getRowHeight() - 15;\n        var scrollElem = this.isDropGrid.getContent().firstElementChild;\n        if (cliRect.top >= y) {\n            var scrollPixel_1 = -(this.isDropGrid.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_1, true); }, 200);\n        }\n        else if (cliRect.top + this.isDropGrid.getContent().clientHeight - rowHeight - 33 <= y) {\n            var scrollPixel_2 = (this.isDropGrid.getRowHeight());\n            this.isOverflowBorder = false;\n            this.timer = window.setInterval(function () { _this.setScrollDown(scrollElem, scrollPixel_2, true); }, 200);\n        }\n    };\n    RowDD.prototype.setScrollDown = function (scrollElem, scrollPixel, isLeft) {\n        scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n    };\n    RowDD.prototype.moveDragRows = function (e, startedRow, targetRow) {\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        var element = closestElement(e.target, 'tr');\n        if (parentsUntil(element, 'e-grid') &&\n            (parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(element, 'e-grid').id || this.istargetGrid)) {\n            var targetElement = element ?\n                element : this.startedRow;\n            this.setBorder(targetElement, e.event, startedRow, targetRow);\n        }\n    };\n    RowDD.prototype.setBorder = function (element, event, startedRow, targetRow) {\n        var node = this.parent.element;\n        if (this.istargetGrid) {\n            node = this.isDropGrid.element;\n        }\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        this.removeFirstRowBorder(element);\n        this.removeLastRowBorder(element);\n        if (parentsUntil(element, 'e-grid') && (!this.parent.rowDropSettings.targetID && element.classList.contains('e-row') &&\n            parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(element, 'e-grid').id) || this.istargetGrid) {\n            removeClass(node.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'), ['e-dragborder']);\n            var rowElement = [];\n            var targetRowIndex = parseInt(targetRow.getAttribute('aria-rowindex'), 10);\n            if (targetRow && targetRowIndex === 0) {\n                var div = this.parent.createElement('div', { className: 'e-firstrow-dragborder' });\n                var gridheaderEle = this.isDropGrid.getHeaderContent();\n                gridheaderEle.classList.add('e-grid-relative');\n                div.style.width = node.offsetWidth - this.getScrollWidth() + 'px';\n                if (!gridheaderEle.querySelectorAll('.e-firstrow-dragborder').length) {\n                    gridheaderEle.appendChild(div);\n                }\n            }\n            else if (this.parent.rowDropSettings.targetID && targetRow) {\n                element = this.isDropGrid.getRowByIndex(targetRowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else if (targetRow && parseInt(startedRow.getAttribute('aria-rowindex'), 10) > targetRowIndex) {\n                element = this.parent.getRowByIndex(targetRowIndex - 1);\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            else {\n                rowElement = [].slice.call(element.querySelectorAll('.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse'));\n            }\n            var frzCols = this.parent.isFrozenGrid();\n            if (targetRow && targetRowIndex !== 0 && frzCols) {\n                var rowIndex = parseInt(element.getAttribute('aria-rowindex'), 10);\n                var selector = '.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse';\n                rowElement = this.borderRowElement(rowIndex, selector);\n            }\n            if (rowElement.length > 0) {\n                addRemoveActiveClasses(rowElement, true, 'e-dragborder');\n            }\n        }\n    };\n    RowDD.prototype.borderRowElement = function (rowIndex, selector) {\n        var lastRow = [];\n        lastRow = [].slice.call(this.isDropGrid.getRowByIndex(rowIndex).querySelectorAll(selector)).\n            concat([].slice.call(this.isDropGrid.getMovableRowByIndex(rowIndex).querySelectorAll(selector)));\n        if (this.isDropGrid.getFrozenMode() === 'Left-Right') {\n            lastRow = lastRow.concat([].slice.call(this.isDropGrid.getFrozenRightRowByIndex(rowIndex).querySelectorAll(selector)));\n        }\n        return lastRow;\n    };\n    RowDD.prototype.getScrollWidth = function () {\n        var scrollElem = this.parent.getContent().firstElementChild;\n        return scrollElem.scrollWidth > scrollElem.offsetWidth ? Scroll.getScrollBarWidth() : 0;\n    };\n    RowDD.prototype.removeFirstRowBorder = function (element) {\n        if (this.isDropGrid.element.getElementsByClassName('e-firstrow-dragborder').length > 0 && element &&\n            element.rowIndex !== 0) {\n            remove(this.isDropGrid.element.getElementsByClassName('e-firstrow-dragborder')[0]);\n        }\n    };\n    RowDD.prototype.removeLastRowBorder = function (element) {\n        var islastRowIndex;\n        if (this.parent.enableVirtualization) {\n            islastRowIndex = element && parseInt(element.getAttribute('aria-rowindex'), 10) !==\n                this.parent.renderModule.data.dataManager.dataSource.json.length - 1;\n        }\n        else {\n            islastRowIndex = element &&\n                this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length - 1).getAttribute('data-uid') !==\n                    element.getAttribute('data-uid');\n        }\n        if (this.parent.element.getElementsByClassName('e-lastrow-dragborder').length > 0 && element && islastRowIndex) {\n            remove(this.parent.element.getElementsByClassName('e-lastrow-dragborder')[0]);\n        }\n    };\n    RowDD.prototype.removeBorder = function (element) {\n        this.removeFirstRowBorder(element);\n        if (!this.parent.rowDropSettings.targetID) {\n            this.removeLastRowBorder(element);\n        }\n        element = (this.isDropGrid.isFrozenGrid() ? this.isDropGrid.getMovableRows() : this.isDropGrid.getRows()).filter(function (row) {\n            return row.querySelector('td.e-dragborder');\n        })[0];\n        if (element) {\n            var rowElement = [].slice.call(element.querySelectorAll('.e-dragborder'));\n            if (this.parent.isFrozenGrid()) {\n                var rowIndex = parseInt(element.getAttribute('aria-rowindex'), 10);\n                var selector = '.e-dragborder';\n                rowElement = this.borderRowElement(rowIndex, selector);\n            }\n            addRemoveActiveClasses(rowElement, false, 'e-dragborder');\n        }\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    RowDD.prototype.onDataBound = function (e) {\n        if (this.selectedRowColls.length > 0) {\n            this.parent.selectRows(this.selectedRowColls);\n            this.selectedRowColls = [];\n        }\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.singleRowDrop = function (e) {\n        var targetRow = closestElement(e.target, 'tr');\n        var currentIndex;\n        var srcControl;\n        srcControl = e.droppedElement.parentElement.ej2_instances[0];\n        currentIndex = targetRow ? targetRow.rowIndex : srcControl.currentViewData.length - 1;\n        this.reorderRow(this.startedRowIndex, currentIndex);\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        var draggObj = e.droppedElement.parentElement.ej2_instances[0];\n        if (e.droppedElement.getAttribute('action') !== 'grouping' &&\n            (parentsUntil(e.target, 'e-row') || parentsUntil(e.target, 'e-emptyrow') || parentsUntil(e.target, 'e-gridcontent'))) {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl_1;\n            var currentIndex = void 0;\n            if ((e.droppedElement.querySelector('tr').getAttribute('single-dragrow') !== 'true' &&\n                e.droppedElement.parentElement.id === gObj.element.id)\n                || (e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true' &&\n                    e.droppedElement.parentElement.id !== gObj.element.id)) {\n                return;\n            }\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl_1 = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else if (this.isSingleRowDragDrop || e.droppedElement.querySelector('tr').getAttribute('single-dragrow') === 'true') {\n                this.singleRowDrop(e);\n                return;\n            }\n            if (srcControl_1.element.id !== gObj.element.id && srcControl_1.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl_1.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges\n            if (!isBlazor()) {\n                gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n                gObj.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n                var selectedRows = srcControl_1.getSelectedRowIndexes();\n                var skip = srcControl_1.allowPaging ?\n                    (srcControl_1.pageSettings.currentPage * srcControl_1.pageSettings.pageSize) - srcControl_1.pageSettings.pageSize : 0;\n                this.selectedRows = [];\n                for (var i = 0, len = records.length; i < len; i++) {\n                    this.selectedRows.push(skip + selectedRows[i]);\n                }\n                srcControl_1.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n                srcControl_1.notify(events.modelChanged, {\n                    type: events.actionBegin, requestType: 'rowdraganddrop'\n                });\n            }\n            else {\n                var currentVdata = [];\n                var selectedIndex = srcControl_1.getSelectedRowIndexes();\n                for (var i = 0; i < selectedIndex.length; i++) {\n                    currentVdata[i] = srcControl_1.currentViewData[selectedIndex[i]];\n                }\n                records = currentVdata;\n                var changes = {\n                    addedRecords: records,\n                    deletedRecords: [],\n                    changedRecords: []\n                };\n                var dragDropDestinationIndex = 'dragDropDestinationIndex';\n                var query = new Query;\n                query[dragDropDestinationIndex] = targetIndex;\n                gObj.getDataModule().saveChanges(changes, gObj.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    gObj.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    var message = 'message';\n                    var error = 'error';\n                    if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                        e[error] = e[error][message];\n                    }\n                    gObj.trigger(events.actionFailure, e);\n                });\n                changes.deletedRecords = records;\n                changes.addedRecords = [];\n                srcControl_1.getDataModule().saveChanges(changes, srcControl_1.getPrimaryKeyFieldNames()[0], {}, query)\n                    .then(function () {\n                    srcControl_1.notify(events.modelChanged, {\n                        type: events.actionBegin, requestType: 'rowdraganddrop'\n                    });\n                }).catch(function (e) {\n                    var error = 'error';\n                    var msg = 'message';\n                    if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][msg])) {\n                        e[error] = e[error][msg];\n                    }\n                    srcControl_1.trigger(events.actionFailure, e);\n                });\n            }\n        }\n    };\n    RowDD.prototype.reorderRow = function (fromIndexes, toIndex) {\n        var gObj = this.parent;\n        if (!gObj.sortSettings.columns.length && !gObj.groupSettings.columns.length && !gObj.filterSettings.columns.length) {\n            //Todo: drag and drop mapper & BatchChanges                 \n            var skip = gObj.allowPaging ?\n                (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize : 0;\n            var fromIndex = fromIndexes;\n            toIndex = toIndex + skip;\n            this.selectedRows = gObj.getSelectedRowIndexes();\n            gObj.notify(events.rowPositionChanged, {\n                fromIndex: fromIndexes + skip,\n                toIndex: toIndex\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.draggable.destroy();\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFn);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    RowDD.prototype.processArgs = function (target) {\n        var gObj = this.parent;\n        var dragIdx = parseInt(this.startedRow.getAttribute('aria-rowindex'), 10);\n        if ((gObj.getSelectedRecords().length > 0 && this.startedRow.cells[0].classList.contains('e-selectionbackground') === false)\n            || gObj.getSelectedRecords().length === 0) {\n            this.rows = [this.parent.getRowByIndex(dragIdx)];\n            if (gObj.isFrozenGrid()) {\n                this.rows = [gObj.getRowByIndex(dragIdx), gObj.getMovableRowByIndex(dragIdx)];\n                if (gObj.getFrozenMode() === 'Left-Right') {\n                    this.rows = [gObj.getRowByIndex(dragIdx), gObj.getMovableRowByIndex(dragIdx), gObj.getFrozenRightRowByIndex(dragIdx)];\n                }\n            }\n            this.rowData = [this.parent.getRowInfo((this.startedRow).querySelector('.e-rowcell')).rowData];\n        }\n        else {\n            this.rows = gObj.getSelectedRows();\n            this.rowData = gObj.getSelectedRecords();\n            if (this.parent.enableVirtualization) {\n                this.rows = [];\n                var selIndex = gObj.getSelectedRowIndexes();\n                for (var i = 0, len = selIndex.length; i < len; i++) {\n                    this.rows.push(gObj.getRowByIndex(selIndex[i]));\n                    if (gObj.isFrozenGrid()) {\n                        this.rows.push(gObj.getMovableRowByIndex(selIndex[i]));\n                        if (gObj.getFrozenMode() === 'Left-Right') {\n                            this.rows.push(gObj.getFrozenRightRowByIndex(selIndex[i]));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent, isGroupAdaptive, updatecloneRow } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        //Internal variables\n        this.sortRequired = true;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.reorderingColumns = [];\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element || (!target.classList.contains('e-drag') && _this.groupSettings.allowReordering)) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function (e) {\n            _this.parent.element.classList.add('e-ungroupdrag');\n            if (isBlazor()) {\n                e.bindEvents(e.dragElement);\n            }\n        };\n        this.drag = function (e) {\n            if (_this.groupSettings.allowReordering) {\n                _this.animateDropper(e);\n            }\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            if (!_this.groupSettings.allowReordering) {\n                classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n                if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                }\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            var preventDrop = !(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'));\n            if (_this.groupSettings.allowReordering && preventDrop) {\n                remove(e.helper);\n                if (parentsUntil(e.target, 'e-groupdroparea')) {\n                    _this.rearrangeGroup(e);\n                }\n                else if (!(parentsUntil(e.target, 'e-grid'))) {\n                    var field = _this.parent.getColumnByUid(e.helper.getAttribute('e-mappinguid')).field;\n                    if (_this.groupSettings.columns.indexOf(field) !== -1) {\n                        _this.ungroupColumn(field);\n                    }\n                }\n                return;\n            }\n            else if (preventDrop) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.animateDropper = function (e) {\n            var uid = _this.parent.element.querySelector('.e-cloneproperties').getAttribute('e-mappinguid');\n            var dragField = _this.parent.getColumnByUid(uid).field;\n            var parent = parentsUntil(e.target, 'e-groupdroparea');\n            var dropTarget = parentsUntil(e.target, 'e-group-animator');\n            // tslint:disable-next-line\n            var grouped = [].slice.call(_this.element.querySelectorAll('.e-groupheadercell'))\n                .map(function (e) { return e.querySelector('div').getAttribute('ej-mappingname'); });\n            var cols = JSON.parse(JSON.stringify(grouped));\n            if (dropTarget || parent) {\n                if (dropTarget) {\n                    var dropField = dropTarget.querySelector('div[ej-mappingname]').getAttribute('ej-mappingname');\n                    var dropIndex = +(dropTarget.getAttribute('index'));\n                    if (dropField !== dragField) {\n                        var dragIndex = cols.indexOf(dragField);\n                        if (dragIndex !== -1) {\n                            cols.splice(dragIndex, 1);\n                        }\n                        var flag = dropIndex !== -1 && dragIndex === dropIndex;\n                        cols.splice(dropIndex + (flag ? 1 : 0), 0, dragField);\n                    }\n                }\n                else if (parent && cols.indexOf(dragField) === -1) {\n                    cols.push(dragField);\n                }\n                _this.element.innerHTML = '';\n                if (cols.length && !_this.element.classList.contains('e-grouped')) {\n                    _this.element.classList.add('e-grouped');\n                }\n                _this.reorderingColumns = cols;\n                for (var c = 0; c < cols.length; c++) {\n                    _this.addColToGroupDrop(cols[c]);\n                }\n            }\n            else {\n                _this.addLabel();\n                _this.removeColFromGroupDrop(dragField);\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                _this.parent.log('action_disabled_column', { moduleName: _this.getModuleName(), columnName: column.headerText });\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n        this.groupGenerator = new GroupModelGenerator(this.parent);\n    }\n    Group.prototype.addLabel = function () {\n        if (!this.element.querySelectorAll('.e-group-animator').length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n    };\n    Group.prototype.rearrangeGroup = function (e) {\n        this.sortRequired = false;\n        this.updateModel();\n    };\n    Group.prototype.columnDrag = function (e) {\n        if (this.groupSettings.allowReordering) {\n            this.animateDropper(e);\n        }\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.headerDrop, this.columnDrop, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.groupAggregates, this.onGroupAggregates, this);\n        this.parent.on('blazor-action-begin', this.blazorActionBegin, this);\n        this.parent.on('group-expand-collapse', this.updateExpand, this);\n        this.parent.on('persist-data-changed', this.initialEnd, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.groupAggregates, this.onGroupAggregates);\n        this.parent.off('blazor-action-begin', this.blazorActionBegin);\n        this.parent.off('group-expand-collapse', this.updateExpand);\n    };\n    Group.prototype.blazorActionBegin = function () {\n        if (this.parent.allowGrouping && !this.parent.isCollapseStateEnabled()) {\n            this.expandAll();\n        }\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (isBlazor() && gObj.isServerRendered) {\n            for (var i = 0; i < gObj.columns.length; i++) {\n                this.removeColFromGroupDrop(gObj.columns[i].field);\n            }\n            this.updateGroupDropArea();\n        }\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action !== 'ctrlSpace' && (!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n            case 'ctrlSpace':\n                var elem = gObj.focusModule.currentInfo.element;\n                if (elem && elem.classList.contains('e-headercell')) {\n                    var column = gObj.getColumnByUid(elem.firstElementChild.getAttribute('e-mappinguid'));\n                    column.field && gObj.groupSettings.columns.indexOf(column.field) < 0 ?\n                        this.groupColumn(column.field) : this.ungroupColumn(column.field);\n                }\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var dataManager = void 0;\n            var query = void 0;\n            var toExpand = [];\n            var gObj = this.parent;\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (isBlazor() && this.parent.isCollapseStateEnabled()) {\n                this.parent.notify('group-expand-collapse', {\n                    uid: trgt.parentElement.getAttribute('data-uid'),\n                    isExpand: trgt.classList.contains('e-recordpluscollapse')\n                });\n                return;\n            }\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, expand, query, dataManager);\n                }\n                if (this.parent.groupSettings.enableLazyLoading) {\n                    this.parent.contentModule.captionExpand(trgt.parentElement);\n                }\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                if (isGroupAdaptive(gObj)) {\n                    this.updateVirtualRows(gObj, target, !isHide, query, dataManager);\n                }\n                if (this.parent.groupSettings.enableLazyLoading) {\n                    this.parent.contentModule.captionCollapse(trgt.parentElement);\n                }\n            }\n            this.aria.setExpand(trgt, expand);\n            if (!isGroupAdaptive(gObj) && !this.parent.groupSettings.enableLazyLoading) {\n                for (var i = 0, len = rows.length; i < len; i++) {\n                    if (rows[i].querySelectorAll('td')[cellIdx] &&\n                        rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                        if (isHide) {\n                            rows[i].style.display = 'none';\n                        }\n                        else {\n                            if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                                rows[i].style.display = '';\n                                expandElem = rows[i].querySelector('.e-recordplusexpand');\n                                if (expandElem) {\n                                    toExpand.push(expandElem);\n                                }\n                                if (rows[i].classList.contains('e-detailrow')) {\n                                    if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                        rows[i].style.display = 'none';\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n                this.updateVisibleexpandCollapseRows();\n                this.parent.notify(events.refreshExpandandCollapse, { rows: this.parent.getRowsObject() });\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.updateVisibleexpandCollapseRows = function () {\n        var rows = this.parent.getRowsObject();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].isDataRow && this.parent.getRowElementByUID(rows[i].uid).style.display === 'none') {\n                rows[i].visible = false;\n            }\n        }\n    };\n    Group.prototype.updateVirtualRows = function (gObj, target, isExpand, query, dataManager) {\n        var rObj = gObj.getRowObjectFromUID(target.closest('tr').getAttribute('data-uid'));\n        rObj.isExpand = isExpand;\n        updatecloneRow(gObj);\n        this.parent.notify(events.refreshVirtualMaxPage, {});\n        query = gObj.getDataModule().generateQuery(false);\n        query.queries = gObj.getDataModule().aggregateQuery(gObj.getQuery().clone()).queries;\n        var args = { requestType: 'virtualscroll', rowObject: rObj };\n        dataManager = gObj.getDataModule().getData(args, query.requiresCount());\n        dataManager.then(function (e) { return gObj.renderModule.dataManagerSuccess(e, args); });\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        if (isBlazor() && this.parent.isCollapseStateEnabled()) {\n            this.parent.notify('group-expand-collapse', { isExpand: isExpand });\n            return;\n        }\n        if (!isExpand) {\n            this.parent.notify(events.initialCollapse, isExpand);\n        }\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n        this.updateVisibleexpandCollapseRows();\n        this.parent.notify(events.refreshExpandandCollapse, { rows: this.parent.getRowsObject() });\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        if (this.groupSettings.allowReordering) {\n            this.element.classList.add('e-group-animate');\n        }\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: this.groupSettings.allowReordering ? '.e-drag' : '.e-groupheadercell',\n            distance: this.groupSettings.allowReordering ? -10 : 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            this.parent.log('action_disabled_column', { moduleName: this.getModuleName(), columnName: column.headerText });\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        if (isBlazor() && gObj.isServerRendered) {\n            var setVisible = [];\n            setVisible[0] = column;\n            this.parent.notify('setvisibility', setVisible);\n        }\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        var isServerRendered = 'isServerRendered';\n        if (isBlazor() && this.parent[isServerRendered]) {\n            gObj.sortSettings.columns = gObj.sortSettings.columns;\n        }\n        if (this.groupSettings.allowReordering) {\n            this.reorderingColumns = columns;\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns = this.reorderingColumns.length ? JSON.parse(JSON.stringify(this.reorderingColumns)) : columns;\n        if (this.sortRequired) {\n            if (columns.indexOf(this.colName) === -1) {\n                columns.push(this.colName);\n            }\n            this.groupAddSortingQuery(this.colName);\n        }\n        this.sortRequired = true;\n        this.parent.groupSettings.columns = columns;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending', isFromGroup: true });\n            var isServerRendered = 'isServerRendered';\n            if (isBlazor() && this.parent[isServerRendered]) {\n                this.parent.sortSettings.columns = this.parent.sortSettings.columns;\n            }\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.createElement = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var animator = this.parent.createElement('div', { className: 'e-grid-icon e-group-animator' });\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        // if (!isNullOrUndefined(column.headerTemplate)) {\n        //     if (column.headerTemplate.indexOf('#') !== -1) {\n        //         childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n        //     } else {\n        //         childDiv.innerHTML = column.headerTemplate;\n        //     }\n        //     childDiv.firstElementChild.classList.add('e-grouptext');\n        // } else {\n        if (this.groupSettings.allowReordering) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-drag e-icons e-icon-drag', innerHTML: '&nbsp;',\n                attrs: { title: 'Drag', tabindex: '-1', 'aria-label': 'Drag the grouped column' }\n            }));\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-grouptext', innerHTML: column.headerText,\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        // }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: isBlazor() ? this.l10n.getConstant('UnGroupButton') : this.l10n.getConstant('UnGroup'),\n                tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        var index = this.groupSettings.columns.indexOf(field);\n        if (this.groupSettings.allowReordering) {\n            animator.appendChild(groupedColumn);\n            animator.appendChild(this.createSeparator());\n            groupedColumn = animator;\n        }\n        return groupedColumn;\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        if (this.groupSettings.allowReordering\n            && this.parent.element.querySelector('.e-groupdroparea div[ej-mappingname=' + field + ']')) {\n            return;\n        }\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        var groupedColumn = this.createElement(field);\n        if (this.groupSettings.allowReordering) {\n            var index = this.element.querySelectorAll('.e-group-animator').length;\n            groupedColumn.setAttribute('index', index.toString());\n        }\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.createSeparator = function () {\n        return this.parent.createElement('span', {\n            className: 'e-nextgroup e-icons e-icon-next', innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'Separator for the grouped columns' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        });\n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.getHeaderTable().getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            var elem = this.getGHeaderCell(field);\n            if (this.groupSettings.allowReordering) {\n                var parent_1 = parentsUntil(elem, 'e-group-animator');\n                remove(parent_1);\n            }\n            else {\n                remove(elem);\n            }\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this.contentRefresh) {\n                        if (!this.isAppliedUnGroup) {\n                            if (!this.isAppliedGroup) {\n                                this.updateGroupDropArea(true);\n                                for (var j = 0; j < this.parent.sortSettings.columns.length; j++) {\n                                    if (this.parent.sortSettings.columns[j].isFromGroup) {\n                                        this.parent.sortSettings.columns.splice(j, 1);\n                                        j--;\n                                    }\n                                }\n                                for (var i = 0; i < this.groupSettings.columns.length; i++) {\n                                    this.colName = this.groupSettings.columns[i];\n                                    var col = this.parent.getColumnByField(this.colName);\n                                    col.visible = this.parent.groupSettings.showGroupedColumn;\n                                    this.groupAddSortingQuery(this.colName);\n                                    if (i < this.groupSettings.columns.length - 1) {\n                                        this.addColToGroupDrop(this.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = {\n                                columnName: this.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin\n                            };\n                        }\n                        else {\n                            args = { columnName: this.colName, requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this.groupSettings.showGroupedColumn) {\n                            var columns = e.oldProperties[prop];\n                            for (var i = 0; i < columns.length; i++) {\n                                if (e.properties[prop].indexOf(columns[i]) === -1) {\n                                    this.parent.getColumnByField(columns[i]).visible = true;\n                                }\n                            }\n                        }\n                        var requestType = 'requestType';\n                        if (isBlazor() && this.parent.isServerRendered && this.parent.isCollapseStateEnabled() &&\n                            args[requestType] === 'grouping') {\n                            this.parent.refreshHeader();\n                        }\n                        this.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this.updateGroupDropArea();\n                    this.groupSettings.showDropArea ? this.element.style.display = '' : this.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this.updateGroupedColumn(this.groupSettings.showGroupedColumn);\n                    this.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this.updateButtonVisibility(this.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this.updateButtonVisibility(this.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this.parent.refreshHeader();\n                    break;\n                case 'enableLazyLoading':\n                    this.parent.freezeRefresh();\n                    break;\n            }\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        // tslint:disable-next-line:no-any\n        if (!this.parent.isDestroyed && !this.parent.refreshing) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (i === (len - 1)) {\n                this.contentRefresh = true;\n            }\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    Group.prototype.onGroupAggregates = function (editedData) {\n        var aggregates = this.iterateGroupAggregates(editedData);\n        var rowData = this.groupGenerator.generateRows(aggregates, {});\n        var summaryRows = this.parent.getRowsObject().filter(function (row) { return !row.isDataRow; });\n        var updateSummaryRows = rowData.filter(function (data) { return !data.isDataRow; });\n        if (this.parent.isReact) {\n            this.parent.destroyTemplate(['groupFooterTemplate', 'groupCaptionTemplate', 'footerTemplate']);\n        }\n        for (var i = 0; i < updateSummaryRows.length; i++) {\n            var row = updateSummaryRows[i];\n            var cells = row.cells.filter(function (cell) { return cell.isDataCell; });\n            var args = { cells: cells, data: row.data, dataUid: summaryRows[i] ? summaryRows[i].uid : '' };\n            this.parent.notify(events.refreshAggregateCell, args);\n        }\n    };\n    Group.prototype.iterateGroupAggregates = function (editedData) {\n        var updatedData = editedData instanceof Array ? editedData : [];\n        var rows = this.parent.getRowsObject();\n        var initData = this.parent.getCurrentViewRecords();\n        var deletedCols = [];\n        var changeds = rows.map(function (row) {\n            if (row.edit === 'delete') {\n                deletedCols.push(row.data);\n            }\n            return row.changes instanceof Object ? row.changes : row.data;\n        });\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        changeds = updatedData.length === 0 ? changeds : updatedData;\n        var mergeData = initData.map(function (item) {\n            var pKeyVal = DataUtil.getObject(field, item);\n            var value;\n            var hasVal = changeds.some(function (cItem) {\n                value = cItem;\n                return pKeyVal === DataUtil.getObject(field, cItem);\n            });\n            return hasVal ? value : item;\n        });\n        var eData = editedData;\n        if (!(eData.type && eData.type === 'cancel') && deletedCols.length > 0) {\n            for (var i = 0; i < deletedCols.length; i++) {\n                var index = mergeData.indexOf(deletedCols[i]);\n                mergeData.splice(index, 1);\n            }\n        }\n        var aggregates = [];\n        var aggregateRows = this.parent.aggregates;\n        for (var j = 0; j < aggregateRows.length; j++) {\n            var row = aggregateRows[j];\n            for (var k = 0; k < row.columns.length; k++) {\n                var aggr = {};\n                var type = row.columns[k].type.toString();\n                aggr = { type: type.toLowerCase(), field: row.columns[k].field };\n                aggregates.push(aggr);\n            }\n        }\n        var result;\n        var aggrds;\n        var groupedCols = this.parent.groupSettings.columns;\n        for (var l = 0; l < groupedCols.length; l++) {\n            aggrds = result ? result : mergeData;\n            result = DataUtil.group(aggrds, groupedCols[l], aggregates, null, null);\n        }\n        return result;\n    };\n    Group.prototype.updateExpand = function (args) {\n        var uid = args.uid;\n        var isExpand = args.isExpand;\n        var rows = this.parent.getRowsObject();\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            if (row.uid === uid || isNullOrUndefined(uid)) {\n                row.isExpand = isExpand;\n                var _loop_1 = function (j) {\n                    var childRow = rows[j];\n                    var closestParent = void 0;\n                    if (childRow.parentUid !== row.uid) {\n                        closestParent = rows.filter(function (x) { return x.uid === childRow.parentUid; })[0];\n                    }\n                    if (childRow.parentUid === row.uid) {\n                        childRow.visible = row.isExpand;\n                    }\n                    else if (!isNullOrUndefined(closestParent) && childRow.parentUid === closestParent.uid) {\n                        if (closestParent.isExpand && closestParent.visible === true) {\n                            childRow.visible = true;\n                        }\n                        else if (closestParent.isExpand && closestParent.visible === false) {\n                            childRow.visible = false;\n                        }\n                    }\n                    if (isNullOrUndefined(uid)) {\n                        return \"break\";\n                    }\n                };\n                for (var j = i + 1; j < rows.length; j++) {\n                    var state_1 = _loop_1(j);\n                    if (state_1 === \"break\")\n                        break;\n                }\n            }\n        }\n        this.parent.notify(events.contentReady, { rows: rows, args: { isFrozen: false, rows: rows } });\n    };\n    return Group;\n}());\nexport { Group };\n","import { isBlazor, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { closest, classList, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.expandChildGrid, this.expand, this);\n        this.parent.on(events.columnVisibilityChanged, this.refreshColSpan, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var table = this.parent.getContentTable();\n        var lastrowIdx = this.parent.getCurrentViewRecords().length - 1;\n        var parent = 'parentDetails';\n        var isServerRendered = 'isServerRendered';\n        var childGrid;\n        var isExpanded = target && target.classList.contains('e-detailrowcollapse');\n        if (!(target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand')))) {\n            return;\n        }\n        if (isBlazor() && this.parent[isServerRendered]) {\n            this.parent.notify('detailclick', target);\n            return;\n        }\n        var tr = target.parentElement;\n        var uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(uid);\n        var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n        if (target.classList.contains('e-detailrowcollapse')) {\n            var data = rowObj.data;\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = '';\n                gObj.notify(events.detailStateChange, { data: data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                var rowId = getUid('grid-row');\n                var detailRow = this.parent.createElement('tr', { className: 'e-detailrow', attrs: { 'data-uid': rowId } });\n                var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                var colSpan = this.parent.getVisibleColumns().length;\n                if (this.parent.allowRowDragAndDrop) {\n                    colSpan++;\n                }\n                detailCell.setAttribute('colspan', colSpan.toString());\n                var row = new Row({\n                    isDataRow: true,\n                    isExpand: true,\n                    uid: rowId,\n                    isDetailRow: true,\n                    cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                });\n                for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                    row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                }\n                detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                detailRow.appendChild(detailCell);\n                tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                if (gObj.detailTemplate) {\n                    var isReactCompiler = this.parent.isReact && typeof (gObj.detailTemplate) !== 'string';\n                    var detailTemplateID = gObj.element.id + 'detailTemplate';\n                    if (isReactCompiler) {\n                        gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID, null, null, detailCell);\n                        this.parent.renderTemplates();\n                    }\n                    else {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate', detailTemplateID));\n                    }\n                    if (isBlazor()) {\n                        updateBlazorTemplate(detailTemplateID, 'DetailTemplate', gObj, false);\n                    }\n                }\n                else {\n                    childGrid = new Grid(this.getGridModel(gObj, rowObj, gObj.printMode));\n                    if (childGrid.query) {\n                        childGrid.query = childGrid.query.clone();\n                    }\n                    childGrid[parent] = {\n                        parentID: gObj.element.id,\n                        parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                        parentKeyField: gObj.childGrid.queryString,\n                        parentKeyFieldValue: data[gObj.childGrid.queryString],\n                        parentRowData: data\n                    };\n                    childGrid.isLegacyTemplate = gObj.isReact\n                        || gObj.isLegacyTemplate;\n                    if (gObj.isPrinting) {\n                        childGrid.isPrinting = true;\n                        childGrid.on(events.contentReady, this.promiseResolve(childGrid), this);\n                        childGrid.on(events.onEmpty, this.promiseResolve(childGrid), this);\n                    }\n                    rowObj.childGrid = childGrid;\n                    var modules = childGrid.getInjectedModules();\n                    var injectedModues = gObj.getInjectedModules();\n                    if (!modules || modules.length !== injectedModues.length) {\n                        childGrid.setInjectedModules(injectedModues);\n                    }\n                    var gridElem = this.parent.createElement('div', {\n                        id: 'child' + parents(tr, 'e-grid').length +\n                            '_grid' + tr.rowIndex + getUid('')\n                    });\n                    detailCell.appendChild(gridElem);\n                    childGrid.appendTo(gridElem);\n                }\n                detailRow.appendChild(detailCell);\n                if (tr.nextSibling) {\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                }\n                else {\n                    tr.parentNode.appendChild(detailRow);\n                }\n                gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                gObj.getRowsObject().splice(rowObj.index + 1, 0, row);\n                gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data, childGrid: childGrid });\n                gObj.notify(events.detailDataBound, { rows: gObj.getRowsObject() });\n            }\n            classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n            classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n            rowObj.isExpand = true;\n            if (target.classList.contains('e-lastrowcell') && this.parent.getContent().clientHeight > table.scrollHeight) {\n                removeClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                var detailrowIdx = table.querySelector('tbody').querySelectorAll('.e-detailrow').length - 1;\n                addClass(table.querySelector('tbody').querySelectorAll('.e-detailrow')[detailrowIdx].childNodes, ['e-lastrowcell']);\n                this.lastrowcell = true;\n            }\n            this.aria.setExpand(target, true);\n        }\n        else {\n            if (this.isDetailRow(nextRow)) {\n                nextRow.style.display = 'none';\n                gObj.notify(events.detailStateChange, { data: rowObj.data,\n                    childGrid: gObj.childGrid, detailElement: target, isExpanded: isExpanded });\n            }\n            classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n            classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n            if (parseInt(tr.getAttribute('aria-rowindex'), 10) === lastrowIdx && this.lastrowcell) {\n                addClass(target.parentElement.querySelectorAll('td'), 'e-lastrowcell');\n                this.lastrowcell = false;\n            }\n            rowObj.isExpand = false;\n            this.aria.setExpand(target, false);\n        }\n    };\n    /**\n     * @hidden\n     * @param gObj\n     * @param rowObj\n     */\n    DetailRow.prototype.getGridModel = function (gObj, rowObj, printMode) {\n        var gridModel;\n        if (gObj.isPrinting && rowObj.isExpand && gObj.expandedRows &&\n            gObj.expandedRows[rowObj.index] && gObj.expandedRows[rowObj.index].gridModel) {\n            gObj.expandedRows[rowObj.index].gridModel.hierarchyPrintMode = gObj.childGrid.hierarchyPrintMode;\n            gridModel = gObj.expandedRows[rowObj.index].gridModel;\n        }\n        else {\n            if (gObj.isPrinting && gObj.childGrid.allowPaging) {\n                gObj.childGrid.allowPaging = printMode === 'CurrentPage';\n                gridModel = gObj.childGrid;\n            }\n            else {\n                gridModel = gObj.childGrid;\n            }\n        }\n        return gridModel;\n    };\n    DetailRow.prototype.promiseResolve = function (grid) {\n        var _this = this;\n        return function () {\n            grid.off(events.contentReady, _this.promiseResolve);\n            grid.off(events.onEmpty, _this.promiseResolve);\n            grid.notify(events.hierarchyPrint, {});\n        };\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.expandChildGrid, this.expand);\n        this.parent.off(events.columnVisibilityChanged, this.refreshColSpan);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n        this.parent.trigger(events.actionComplete, { requestType: 'expandAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n        this.parent.trigger(events.actionComplete, { requestType: 'collapseAllComplete', type: events.actionComplete, moduleObj: this });\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    DetailRow.prototype.refreshColSpan = function () {\n        var detailrows = this.parent.contentModule.getTable().querySelectorAll('tr.e-detailrow');\n        var colSpan = this.parent.getVisibleColumns().length;\n        for (var i = 0; i < detailrows.length; i++) {\n            detailrows[i].querySelector('.e-detailcell').setAttribute('colspan', colSpan + '');\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor, updateBlazorTemplate, select } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren, parentsUntil } from '../base/util';\nimport { ResponsiveToolbarAction } from '../base/enum';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.parent.enableAdaptiveUI ? '' : this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper',\n            type: 'Input'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n                this.predefinedItems.responsiveFilter = {\n                    id: this.gridID + '_' + 'responsivefilter', cssClass: 'e-gridresponsiveicons e-icons',\n                    suffixIcon: 'e-' + 'resfilter-icon', tooltipText: this.l10n.getConstant('FilterButton')\n                };\n            }\n            if (this.parent.allowSorting) {\n                this.predefinedItems.responsiveSort = {\n                    id: this.gridID + '_' + 'responsivesort', cssClass: 'e-gridresponsiveicons e-icons',\n                    suffixIcon: 'e-' + 'ressort-icon', tooltipText: this.l10n.getConstant('Sort')\n                };\n            }\n        }\n        if (this.parent.enableAdaptiveUI && this.parent.toolbar.indexOf('Search') > -1) {\n            this.predefinedItems.responsiveBack = {\n                id: this.gridID + '_' + 'responsiveback', cssClass: 'e-gridresponsiveicons e-icons',\n                suffixIcon: 'e-' + 'resback-icon'\n            };\n        }\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n                if (this.parent.isReact) {\n                    this.parent.renderTemplates();\n                }\n            }\n            else {\n                this.toolbar.off('render-react-toolbar-template', this.addReactToolbarPortals);\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.bindSearchEvents = function () {\n        this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.toolbarCreated = function (isNormal) {\n        if (this.element.querySelector('.e-search-wrapper')) {\n            if (!this.parent.enableAdaptiveUI || isNormal) {\n                this.element.querySelector('.e-search-wrapper').innerHTML = '<div class=\"e-input-group e-search\" role=\"search\">\\\n                    <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n                    placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n                    <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n            }\n            else {\n                this.element.querySelector('.e-search-wrapper').innerHTML = '<span id=\"' + this.gridID\n                    + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n                    tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n                    </div>';\n            }\n        }\n        this.bindSearchEvents();\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getResponsiveToolbarItems(this.getItems());\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl,\n            created: this.toolbarCreated.bind(this)\n        });\n        this.toolbar.isReact = this.parent.isReact;\n        this.toolbar.on('render-react-toolbar-template', this.addReactToolbarPortals, this);\n        var isStringTemplate = 'isStringTemplate';\n        this.toolbar[isStringTemplate] = true;\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.enableAdaptiveUI) {\n            this.toolbar.overflowMode = 'Popup';\n            this.element.classList.add('e-res-toolbar');\n        }\n        if (this.parent.toolbarTemplate) {\n            if (!isBlazor() && typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                if (isBlazor()) {\n                    var tempID = this.parent.element.id + 'toolbarTemplate';\n                    var item = appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', tempID));\n                    var items_1 = this.getItem(item);\n                    this.toolbar.items.push(items_1);\n                    this.toolbar.appendTo(this.element);\n                    updateBlazorTemplate(this.parent.element.id + 'toolbarTemplate', 'ToolbarTemplate', this.parent);\n                }\n                else {\n                    var isReactCompiler = this.parent.isReact && typeof (this.parent.toolbarTemplate) !== 'string';\n                    var ID = this.parent.element.id + 'toolbarTemplate';\n                    if (isReactCompiler) {\n                        templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate', ID, null, null, this.element);\n                        this.parent.renderTemplates();\n                    }\n                    else {\n                        appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n                    }\n                }\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n    };\n    Toolbar.prototype.addReactToolbarPortals = function (args) {\n        if (this.parent.isReact && args) {\n            this.parent.portals = this.parent.portals.concat(args);\n            this.parent.renderTemplates();\n        }\n    };\n    Toolbar.prototype.renderResponsiveSearch = function (isRender) {\n        if (isRender) {\n            this.toolbarCreated(true);\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isSearch);\n            this.searchElement = select('#' + this.gridID + '_searchbar', this.element);\n            var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n            right.classList.add('e-responsive-right');\n            if (this.parent.searchSettings) {\n                this.updateSearchBox();\n            }\n            this.searchBoxObj.searchFocus({ target: this.searchElement });\n            this.searchElement.focus();\n        }\n        else {\n            var right = parentsUntil(this.searchElement, 'e-toolbar-right');\n            right.classList.remove('e-responsive-right');\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n            this.toolbarCreated(false);\n            this.unWireEvent();\n            this.searchElement = undefined;\n        }\n    };\n    Toolbar.prototype.getResponsiveToolbarItems = function (items) {\n        if (this.parent.enableAdaptiveUI) {\n            for (var i = 0; i < items.length; i++) {\n                items[i].visible = (items[i].id === this.parent.element.id + '_add'\n                    || items[i].id === this.parent.element.id + '_search' || items[i].id === this.parent.element.id + '_responsivesort'\n                    || items[i].id === this.parent.element.id + '_responsivefilter');\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.refreshResponsiveToolbarItems = function (action) {\n        var items = this.toolbar.items;\n        var initial = ['add', 'search', 'responsivesort', 'responsivefilter'];\n        if (this.parent.getSelectedRowIndexes().length) {\n            initial.push('edit', 'delete');\n            if (this.parent.rowRenderingMode !== 'Vertical') {\n                initial.push('update', 'cancel');\n            }\n        }\n        var search = ['responsiveback', 'search'];\n        var buttons = action === ResponsiveToolbarAction.isInitial ? initial : search;\n        for (var i = 0; i < items.length; i++) {\n            var names = items[i].id.split('_');\n            var ele = this.element.querySelector('#' + items[i].id);\n            if (ele) {\n                var parent_1 = parentsUntil(ele, 'e-toolbar-item');\n                if (buttons.indexOf(names[1]) > -1) {\n                    parent_1.classList.remove('e-hidden');\n                }\n                else {\n                    parent_1.classList.add('e-hidden');\n                }\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        if (this.parent.rowRenderingMode === 'Vertical') {\n            if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') {\n                items.push(this.getItemObject('responsiveFilter'));\n            }\n            if (this.parent.allowSorting) {\n                items.push(this.getItemObject('responsiveSort'));\n            }\n        }\n        if (this.parent.enableAdaptiveUI) {\n            items.push(this.getItemObject('responsiveBack'));\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n            var item = items_2[_i];\n            var element = select('#' + item, this.element);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        var newArgs = !isBlazor() || this.parent.isJsComponent ? args : { item: args.item, cancel: args.cancel, name: args.name };\n        var originalEvent = args.originalEvent;\n        gObj.trigger(events.toolbarClick, newArgs, function (toolbarargs) {\n            toolbarargs.originalEvent = toolbarargs.originalEvent ? toolbarargs.originalEvent : originalEvent;\n            if (!toolbarargs.cancel) {\n                switch (!isNullOrUndefined(toolbarargs.item) && toolbarargs.item.id) {\n                    case gID + '_print':\n                        gObj.print();\n                        break;\n                    case gID + '_edit':\n                        gObj.startEdit();\n                        break;\n                    case gID + '_update':\n                        gObj.endEdit();\n                        break;\n                    case gID + '_cancel':\n                        gObj.closeEdit();\n                        break;\n                    case gID + '_add':\n                        gObj.addRecord();\n                        break;\n                    case gID + '_delete':\n                        gObj.deleteRecord();\n                        break;\n                    case gID + '_search':\n                        if (toolbarargs.originalEvent.target.id === gID + '_searchbutton' && _this.searchElement) {\n                            _this.search();\n                        }\n                        else if (gObj.enableAdaptiveUI && !_this.searchElement\n                            && (toolbarargs.originalEvent.target.classList.contains('e-search-wrapper')\n                                || toolbarargs.originalEvent.target.id === gID + '_searchbutton')) {\n                            _this.renderResponsiveSearch(true);\n                        }\n                        break;\n                    case gID + '_columnchooser':\n                        var tarElement = _this.parent.element.querySelector('.e-ccdiv');\n                        var y = tarElement.getBoundingClientRect().top;\n                        var x = tarElement.getBoundingClientRect().left;\n                        var targetEle = toolbarargs.originalEvent.target;\n                        y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                        gObj.createColumnchooser(x, y, targetEle);\n                        break;\n                    case 'copy':\n                        if (isBlazor()) {\n                            gObj.copy();\n                        }\n                        break;\n                    case 'copyheader':\n                    case 'copyHeader':\n                        if (isBlazor()) {\n                            gObj.copy(true);\n                        }\n                        break;\n                    case gID + '_responsivefilter':\n                        gObj.showResponsiveCustomFilter();\n                        break;\n                    case gID + '_responsivesort':\n                        gObj.showResponsiveCustomSort();\n                        break;\n                    case gID + '_responsiveback':\n                        _this.renderResponsiveSearch(false);\n                        break;\n                }\n            }\n        });\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.reRenderToolbar = function () {\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.setFullScreenDialog, this.reRenderToolbar, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n        this.parent.on(events.click, this.removeResponsiveSearch, this);\n        this.parent.on(events.rowModeChange, this.reRenderToolbar, this);\n        this.rowSelectedFunction = this.rowSelected.bind(this);\n        this.rowDeSelectedFunction = this.rowSelected.bind(this);\n        this.parent.addEventListener(events.rowSelected, this.rowSelectedFunction);\n        this.parent.addEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.setFullScreenDialog, this.reRenderToolbar);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n        this.parent.off(events.click, this.removeResponsiveSearch);\n        this.parent.off(events.rowModeChange, this.reRenderToolbar);\n        this.parent.removeEventListener(events.rowSelected, this.rowSelectedFunction);\n        this.parent.removeEventListener(events.rowDeselected, this.rowDeSelectedFunction);\n    };\n    Toolbar.prototype.removeResponsiveSearch = function (e) {\n        var target = e.target;\n        var isSearch = target.classList.contains('e-search-icon') || target.classList.contains('e-search-wrapper');\n        if (this.parent.enableAdaptiveUI && !isSearch && this.searchElement\n            && !parentsUntil(e.target, 'e-res-toolbar')) {\n            this.renderResponsiveSearch(false);\n        }\n    };\n    Toolbar.prototype.rowSelected = function () {\n        if (this.parent.enableAdaptiveUI) {\n            this.refreshResponsiveToolbarItems(ResponsiveToolbarAction.isInitial);\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged, refreshFooterRenderer } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable, calculateAggregate, iterateExtend } from '../base/util';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.isFrozenGrid()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-left-footercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            var frDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent e-frozen-right-footercontent' });\n            if (this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()) {\n                innerDiv.appendChild(fDiv);\n                this.frozenContent = fDiv;\n            }\n            innerDiv.appendChild(mDiv);\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n            if (this.parent.getFrozenRightColumnsCount()) {\n                innerDiv.appendChild(frDiv);\n                this.frozenRightContent = frDiv;\n            }\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.isFrozenGrid()) {\n            var freezeTable = table.cloneNode(true);\n            var frTable = table.cloneNode(true);\n            if (frzCols) {\n                this.frozenContent.appendChild(freezeTable);\n                this.freezeTable = freezeTable;\n            }\n            if (this.parent.getFrozenRightColumnsCount()) {\n                remove(frTable.querySelector('colgroup'));\n                var hdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n                var frCol = (hdr.querySelector('colgroup').cloneNode(true));\n                frTable.insertBefore(frCol, frTable.querySelector('tbody'));\n                this.frozenRightContent.appendChild(frTable);\n                this.frTable = frTable;\n            }\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = !isNullOrUndefined(e) ? e : this.aggregates;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (this.parent.isFrozenGrid()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            if (frzCols) {\n                this.freezeTable.tFoot.innerHTML = '';\n                this.renderSummaryContent(e, this.freezeTable, 0, frzCols);\n            }\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), frzCols, right ? frzCols + movable : undefined);\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.frTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.frTable, frzCols + movable, frzCols + movable + right);\n            var movableLastCell = [].slice.call(this.getTable().querySelectorAll('.e-lastsummarycell'));\n            if (movableLastCell.length) {\n                for (var i = 0; i < movableLastCell.length; i++) {\n                    movableLastCell[i].style.borderRight = '0px';\n                }\n            }\n        }\n        // check freeze content have no row case\n        if (this.parent.isFrozenGrid()) {\n            var movableCnt = [].slice.call(this.parent.element.querySelector('.e-movablefootercontent')\n                .querySelectorAll('.e-summaryrow'));\n            var frozenCnt = void 0;\n            if (frzCols) {\n                frozenCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-left-footercontent')\n                    .querySelectorAll('.e-summaryrow'));\n                this.refreshHeight(frozenCnt, movableCnt);\n                var frozenDiv = this.frozenContent;\n                if (!frozenDiv.offsetHeight) {\n                    frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (right) {\n                var frCnt = [].slice.call(this.parent.element.querySelector('.e-frozen-right-footercontent')\n                    .querySelectorAll('.e-summaryrow'));\n                this.refreshHeight(frCnt, movableCnt);\n                if (frozenCnt) {\n                    this.refreshHeight(frCnt, frozenCnt);\n                }\n                var frDiv = this.frTable;\n                if (!frDiv.offsetHeight) {\n                    frDiv.style.height = this.getTable().offsetHeight + 'px';\n                }\n            }\n            if (this.parent.allowResizing) {\n                this.updateFooterTableWidth(this.getTable());\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshHeight = function (frozenCnt, movableCnt) {\n        for (var i = 0; i < frozenCnt.length; i++) {\n            var frozenHeight = frozenCnt[i].getBoundingClientRect().height;\n            var movableHeight = movableCnt[i].getBoundingClientRect().height;\n            if (frozenHeight < movableHeight) {\n                frozenCnt[i].classList.remove('e-hide');\n                frozenCnt[i].style.height = movableHeight + 'px';\n            }\n            else if (frozenHeight > movableHeight) {\n                movableCnt[i].classList.remove('e-hide');\n                movableCnt[i].style.height = frozenHeight + 'px';\n            }\n        }\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            var isXaxis = this.parent.enableColumnVirtualization && this.parent.contentModule.isXaxis();\n            if (isXaxis) {\n                mheaderCol = this.parent.getMovableVirtualHeader().querySelector('colgroup').cloneNode(true);\n            }\n            else {\n                mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns(), this.parent);\n                this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n            }\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = {\n            left: this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('.e-movablecontent').scrollLeft :\n                this.parent.getContent().firstChild.scrollLeft\n        }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        fCol = fCol && this.parent.isRowDragable() ? fCol + 1 : fCol;\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n        this.parent.on(refreshFooterRenderer, this.refreshFooterRenderer, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n        this.parent.off(refreshFooterRenderer, this.refreshFooterRenderer);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    FooterRenderer.prototype.refreshFooterRenderer = function (editedData) {\n        var aggregates = this.onAggregates(editedData);\n        this.refresh(aggregates);\n    };\n    FooterRenderer.prototype.getIndexByKey = function (data, ds) {\n        var key = this.parent.getPrimaryKeyFieldNames()[0];\n        for (var i = 0; i < ds.length; i++) {\n            if (ds[i][key] === data[key]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    FooterRenderer.prototype.onAggregates = function (editedData) {\n        editedData = editedData instanceof Array ? editedData : [];\n        var field = this.parent.getPrimaryKeyFieldNames()[0];\n        var dataSource = [];\n        var isModified = false;\n        var batchChanges = {};\n        var gridData = 'dataSource';\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var currentViewData = this.parent.dataSource instanceof Array ?\n            this.parent.dataSource : this.parent.dataSource[gridData].json.length\n            ? this.parent.dataSource[gridData].json : this.parent.getCurrentViewRecords();\n        if (this.parent.editModule) {\n            batchChanges = this.parent.editModule.getBatchChanges();\n        }\n        if (Object.keys(batchChanges).length) {\n            for (var i = 0; i < currentViewData.length; i++) {\n                isModified = false;\n                if (batchChanges[changedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[changedRecords]) > -1) {\n                    isModified = true;\n                    dataSource.push(batchChanges[changedRecords][this.getIndexByKey(currentViewData[i], batchChanges[changedRecords])]);\n                }\n                if (batchChanges[deletedRecords].length && this.getIndexByKey(currentViewData[i], batchChanges[deletedRecords]) > -1) {\n                    isModified = true;\n                }\n                else if (!isModified) {\n                    dataSource.push(currentViewData[i]);\n                }\n            }\n            if (batchChanges[addedRecords].length) {\n                for (var i = 0; i < batchChanges[addedRecords].length; i++) {\n                    dataSource.push(batchChanges[addedRecords][i]);\n                }\n            }\n        }\n        else {\n            if (editedData.length) {\n                var data = iterateExtend(currentViewData);\n                dataSource = data.map(function (item) {\n                    var idVal = DataUtil.getObject(field, item);\n                    var value;\n                    var hasVal = editedData.some(function (cItem) {\n                        value = cItem;\n                        return idVal === DataUtil.getObject(field, cItem);\n                    });\n                    return hasVal ? value : item;\n                });\n            }\n            else {\n                dataSource = currentViewData;\n            }\n        }\n        var eData = editedData;\n        if ((eData.type && eData.type === 'cancel')) {\n            dataSource = currentViewData;\n        }\n        var aggregate = {};\n        var agrVal;\n        var aggregateRows = this.parent.aggregates;\n        for (var i = 0; i < aggregateRows.length; i++) {\n            for (var j = 0; j < aggregateRows[i].columns.length; j++) {\n                var data = [];\n                var type = aggregateRows[i].columns[j].type.toString();\n                data = dataSource;\n                agrVal = calculateAggregate(type, data, aggregateRows[i].columns[j], this.parent);\n                aggregate[aggregateRows[i].columns[j].field + ' - ' + type.toLowerCase()] = agrVal;\n            }\n        }\n        var result = {\n            result: dataSource,\n            count: dataSource.length,\n            aggregates: aggregate\n        };\n        return result;\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { refreshAggregateCell } from '../base/constant';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        this.parent.on(refreshAggregateCell, this.refreshWithAggregate(node, cell), this);\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            if (this.parent.rowRenderingMode === 'Vertical') {\n                node.style.display = 'none';\n            }\n            return true;\n        }\n        else {\n            if (this.parent.rowRenderingMode === 'Vertical') {\n                node.classList.add('e-lastsummarycell');\n            }\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        var tempID = '';\n        var gColumn = this.parent.getColumnByField(data[column.columnName].field);\n        if (!isNullOrUndefined(gColumn)) {\n            data[column.columnName].headerText = gColumn.headerText;\n            if (gColumn.isForeignColumn()) {\n                var fData = gColumn.columnData.filter(function (e) {\n                    return e[gColumn.foreignKeyField] === data[column.columnName].key;\n                })[0];\n                if (fData) {\n                    data[column.columnName].foreignKey = fData[gColumn.foreignKeyValue];\n                }\n            }\n        }\n        if (isBlazor()) {\n            var guid = 'guid';\n            tempID = this.parent.element.id + column[guid] + tempObj.property;\n        }\n        var isReactCompiler = this.parent.isReact && (column.footerTemplate ?\n            typeof (column.footerTemplate) !== 'string' : column.groupFooterTemplate ? typeof (column.groupFooterTemplate) !== 'string'\n            : column.groupCaptionTemplate ? typeof (column.groupCaptionTemplate) !== 'string' : false);\n        if (isReactCompiler) {\n            var prop = data[column.columnName];\n            if (tempObj.property === 'groupCaptionTemplate' || tempObj.property === 'groupFooterTemplate') {\n                var groupKey = 'groupKey';\n                var key = 'key';\n                prop[groupKey] = prop[key];\n            }\n            tempObj.fn(prop, this.parent, tempObj.property, tempID, null, null, node);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property, tempID));\n        }\n        return false;\n    };\n    SummaryCellRenderer.prototype.refreshWithAggregate = function (node, cell) {\n        var _this = this;\n        var cellNode = cell;\n        return function (args) {\n            var cell = cellNode;\n            var field = cell.column.columnName ? cell.column.columnName : null;\n            var curCell = (!isNullOrUndefined(field) ? args.cells.filter(function (cell) {\n                return cell.column.columnName === field;\n            })[0] : null);\n            if (node.parentElement && node.parentElement.getAttribute('data-uid') === args.dataUid && field &&\n                field === curCell.column.columnName) {\n                _this.refreshTD(node, curCell, args.data);\n            }\n        };\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options, movableEle) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    if (_this.movableEle) {\n                        info.entered = right < _this.movableContainerRect.right;\n                        return right - _this.movableContainerRect.width <= _this.movableContainerRect.right;\n                    }\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    if (_this.movableEle) {\n                        return left + _this.movableContainerRect.width >= _this.movableContainerRect.left;\n                    }\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n        this.movableEle = movableEle;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n        if (this.options.movableContainer) {\n            this.movableContainerRect = this.options.movableContainer.getBoundingClientRect();\n            EventHandler.add(this.options.scrollbar, 'wheel', function () { return _this.fromWheel = true; }, this);\n            EventHandler.add(this.options.scrollbar, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n        }\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        if (this.movableContainerRect && (direction === 'left' || direction === 'right')) {\n            return info.check(this.movableEle.getBoundingClientRect(), info);\n        }\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        this.options.prevTop = this.options.prevLeft = 0;\n        return function (e) {\n            var top = _this.options.movableContainer ? _this.options.container.scrollTop : e.target.scrollTop;\n            var left = _this.options.movableContainer ? _this.options.scrollbar.scrollLeft : e.target.scrollLeft;\n            var direction = _this.options.prevTop < top ? 'down' : 'up';\n            direction = _this.options.prevLeft === left ? direction : _this.options.prevLeft < left ? 'right' : 'left';\n            _this.options.prevTop = top;\n            _this.options.prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                if (_this.movableEle && (direction === 'right' || direction === 'left')) {\n                    onEnterCallback(_this.movableEle, current, direction, { top: top, left: left }, _this.fromWheel, check);\n                }\n                else {\n                    onEnterCallback(_this.element, current, direction, { top: top, left: left }, _this.fromWheel, check);\n                }\n            }\n            if (check) {\n                var fn = debounced100;\n                //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                    focusElement: document.activeElement });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { isGroupAdaptive } from '../base/util';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport * as events from '../base/constant';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.movableCache = {};\n        this.frozenRightCache = {};\n        this.rowCache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    // tslint:disable-next-line:max-func-body-length\n    VirtualRowModelGenerator.prototype.generateRows = function (data, e) {\n        var isFrozen = this.parent.isFrozenGrid();\n        var info = e.virtualInfo = e.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        if ((isFrozen && (this.parent.getFrozenMode() !== 'Left-Right' && !e.renderMovableContent)\n            || this.parent.getFrozenMode() === 'Left-Right' && !e.renderMovableContent && !e.renderFrozenRightContent) || !isFrozen) {\n            this.checkAndResetCache(e.requestType);\n        }\n        if (isGroupAdaptive(this.parent) && this.parent.vcRows.length) {\n            return result = this.parent.vcRows;\n        }\n        if (this.parent.enableColumnVirtualization) {\n            for (var i = 0; i < info.blockIndexes.length; i++) {\n                if (this.isBlockAvailable(info.blockIndexes[i])) {\n                    this.cache[info.blockIndexes[i]] = this.rowModelGenerator.refreshRows(this.cache[info.blockIndexes[i]]);\n                }\n                if ((e.renderMovableContent && this.isMovableBlockAvailable(info.blockIndexes[i]))\n                    || (e.renderFrozenRightContent && this.isFrozenRightBlockAvailable(info.blockIndexes[i]))) {\n                    var cache = e.renderMovableContent\n                        ? this.movableCache : this.frozenRightCache;\n                    cache[info.blockIndexes[i]] = this.rowModelGenerator.refreshRows(cache[info.blockIndexes[i]]);\n                }\n            }\n        }\n        if (isBlazor() && this.parent.isServerRendered) {\n            var virtualStartIdx = 'virtualStartIndex';\n            var startIndex = 'startIndex';\n            var endIndex = 'endIndex';\n            if (!e[virtualStartIdx] && Object.keys(this.rowCache).length === 0) {\n                for (var i = 0; i < data.length; i++) {\n                    var args = [];\n                    args.push(data[i]);\n                    this.rowCache[i] = this.rowModelGenerator.generateRows(args, { startIndex: i })[0];\n                }\n                var j = 0;\n                for (var i = 0; i < this.parent.pageSettings.pageSize; i++) {\n                    result[j] = this.rowCache[i];\n                    j++;\n                }\n            }\n            else if (e[virtualStartIdx]) {\n                var virtualStartIndex = e[startIndex];\n                var cacheindex = [];\n                for (var i = 0; i < Object.keys(this.rowCache).length; i++) {\n                    cacheindex.push(Number(Object.keys(this.rowCache)[i]));\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var args = [];\n                    var check = cacheindex.indexOf(virtualStartIndex);\n                    args.push(data[i]);\n                    if (check === -1) {\n                        this.rowCache[virtualStartIndex] = this.rowModelGenerator.generateRows(args, { startIndex: virtualStartIndex })[0];\n                    }\n                    virtualStartIndex++;\n                }\n            }\n            if (!isNullOrUndefined(e[virtualStartIdx])) {\n                var j = 0;\n                for (var i = e[startIndex]; i < e[endIndex]; i++) {\n                    result[j] = this.rowCache[i];\n                    j++;\n                }\n            }\n        }\n        else {\n            var values = info.blockIndexes;\n            for (var i = 0; i < values.length; i++) {\n                if (!this.isBlockAvailable(values[i])) {\n                    var rows = this.rowModelGenerator.generateRows(data, {\n                        virtualInfo: info, startIndex: this.getStartIndex(values[i], data)\n                    });\n                    if (isGroupAdaptive(this.parent) && !this.parent.vcRows.length) {\n                        this.parent.vRows = rows;\n                        this.parent.vcRows = rows;\n                        this.parent.notify(events.refreshVirtualMaxPage, {});\n                    }\n                    var median = void 0;\n                    if (isGroupAdaptive(this.parent)) {\n                        median = this.model.pageSize / 2;\n                        if (!this.isBlockAvailable(indexes[0])) {\n                            this.cache[indexes[0]] = rows.slice(0, median);\n                        }\n                        if (!this.isBlockAvailable(indexes[1])) {\n                            this.cache[indexes[1]] = rows.slice(median, this.model.pageSize);\n                        }\n                    }\n                    else {\n                        median = ~~Math.max(rows.length, this.model.pageSize) / 2;\n                        if (!this.isBlockAvailable(indexes[0])) {\n                            this.cache[indexes[0]] = rows.slice(0, median);\n                        }\n                        if (!this.isBlockAvailable(indexes[1])) {\n                            this.cache[indexes[1]] = rows.slice(median);\n                        }\n                    }\n                }\n                if (this.parent.groupSettings.columns.length && !xAxis && this.cache[values[i]]) {\n                    this.cache[values[i]] = this.updateGroupRow(this.cache[values[i]], values[i]);\n                }\n                if ((e.renderMovableContent && !this.isMovableBlockAvailable(values[i]))\n                    || (e.renderFrozenRightContent && !this.isFrozenRightBlockAvailable(values[i]))) {\n                    var cache = e.renderMovableContent\n                        ? this.movableCache : this.frozenRightCache;\n                    var rows = this.rowModelGenerator.generateRows(data, {\n                        virtualInfo: info, startIndex: this.getStartIndex(values[i], data)\n                    });\n                    var median = ~~Math.max(rows.length, this.model.pageSize) / 2;\n                    if ((e.renderFrozenRightContent && !this.isFrozenRightBlockAvailable(indexes[0]))\n                        || (e.renderMovableContent && !this.isMovableBlockAvailable(indexes[0]))) {\n                        cache[indexes[0]] = rows.slice(0, median);\n                    }\n                    if ((e.renderFrozenRightContent && !this.isFrozenRightBlockAvailable(indexes[1]))\n                        || (e.renderMovableContent && !this.isMovableBlockAvailable(indexes[1]))) {\n                        cache[indexes[1]] = rows.slice(median);\n                    }\n                }\n                if (!e.renderMovableContent && !e.renderFrozenRightContent && this.cache[values[i]]) {\n                    result.push.apply(result, this.cache[values[i]]);\n                }\n                else {\n                    var cache = e.renderMovableContent\n                        ? this.movableCache : this.frozenRightCache;\n                    if (cache[values[i]]) {\n                        result.push.apply(result, cache[values[i]]);\n                    }\n                }\n                if (this.isBlockAvailable(values[i])) {\n                    loadedBlocks.push(values[i]);\n                }\n            }\n            info.blockIndexes = loadedBlocks;\n        }\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            var grouping = 'records';\n            if (this.parent.allowGrouping) {\n                this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n            }\n            else if (isFrozen) {\n                if ((e.renderMovableContent && (this.parent.getFrozenMode() === 'Left'\n                    || this.parent.getFrozenMode() === 'Right' || this.parent.getFrozenColumns())) || e.renderFrozenRightContent) {\n                    this.parent.currentViewData = result.map(function (m) { return m.data; });\n                }\n            }\n            else {\n                this.parent.currentViewData = result.map(function (m) { return m.data; });\n            }\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.isMovableBlockAvailable = function (value) {\n        return value in this.movableCache;\n    };\n    VirtualRowModelGenerator.prototype.isFrozenRightBlockAvailable = function (value) {\n        return value in this.frozenRightCache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().querySelector('.e-headercontent'); }\n        if (this.parent.isFrozenGrid()) {\n            content = content.querySelector('.e-movableheader');\n        }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.parent.contentModule.startColIndex = indexes[0];\n            this.parent.contentModule.endColIndex = indexes[indexes.length - 1];\n        }\n        this.addFrozenIndex(indexes);\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.addFrozenIndex = function (indexes) {\n        if (this.parent.getFrozenColumns() && this.parent.enableColumnVirtualization && indexes[0] === 0) {\n            for (var i = 0; i < this.parent.getFrozenColumns(); i++) {\n                indexes.push(indexes[indexes.length - 1] + 1);\n            }\n        }\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var actions = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder',\n            'save', 'delete'];\n        if (this.parent.getFrozenColumns() && this.parent.frozenRows && this.parent.enableColumnVirtualization && action === 'reorder') {\n            actions.splice(actions.indexOf(action), 1);\n        }\n        var clear = actions.some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n            this.movableCache = {};\n            this.frozenRightCache = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        var c = this.parent.groupSettings.columns;\n        for (var i = 0; i < c.length; i++) {\n            this.cOffsets[i] = (this.cOffsets[i - 1] | 0) + 30;\n        }\n        var blocks = Array.apply(null, Array(cLen)).map(function () { return col++; });\n        for (var j = 0; j < blocks.length; j++) {\n            blocks[j] = blocks[j] + gLen;\n            this.cOffsets[blocks[j]] = (this.cOffsets[blocks[j] - 1] | 0) + (isVisible(cols[j]) ? parseInt(cols[j].width, 10) : 0);\n        }\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var currentFirst = current[0];\n        var rows = [];\n        var keys = Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            if (Number(keys[i]) < block) {\n                rows = rows.concat(this.cache[keys[i]]);\n            }\n        }\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var rows = [];\n        var isBlazorServerRendered = isBlazor() && this.parent.isServerRendered ? true : false;\n        var keys = isBlazorServerRendered ? Object.keys(this.rowCache) : Object.keys(this.cache);\n        for (var i = 0; i < keys.length; i++) {\n            rows = isBlazorServerRendered ? rows.concat(this.rowCache[keys[i]]) : rows.concat(this.cache[keys[i]]);\n        }\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, createElement, closest, formatUnit, Browser, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\nimport { isGroupAdaptive, ensureLastRow, ensureFirstRow, getEditedDataIndex, getTransformValues, resetRowObjectIndex } from '../base/util';\nimport { isBlazor, setStyleAttribute } from '@syncfusion/ej2-base';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        /** @hidden */\n        _this.startIndex = 0;\n        _this.preStartIndex = 0;\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        /** @hidden */\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        /** @hidden */\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.isSelection = false;\n        _this.isBottom = false;\n        _this.rndrCount = 0;\n        _this.empty = undefined;\n        _this.isCancel = false;\n        _this.requestTypes = ['beginEdit', 'cancel', 'delete', 'add', 'save'];\n        _this.isNormaledit = _this.parent.editSettings.mode === 'Normal';\n        /** @hidden */\n        _this.virtualData = {};\n        _this.emptyRowData = {};\n        _this.vfColIndex = [];\n        _this.frzIdx = 1;\n        _this.orderRowObj = [];\n        _this.mvbOrderRowObj = [];\n        _this.frOrderRowObj = [];\n        _this.isContextMenuOpen = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().querySelector('.e-content');\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.getReorderedFrozenRows = function (args) {\n        var blockIndex = args.virtualInfo.blockIndexes;\n        var colsIndex = args.virtualInfo.columnIndexes;\n        var page = args.virtualInfo.page;\n        args.virtualInfo.blockIndexes = [1, 2];\n        args.virtualInfo.page = 1;\n        if (!args.renderMovableContent) {\n            args.virtualInfo.columnIndexes = [];\n        }\n        var recordslength = this.parent.getCurrentViewRecords().length;\n        var firstRecords = this.parent.renderModule.data.dataManager.dataSource.json.slice(0, recordslength);\n        var virtualRows = this.vgenerator.generateRows(firstRecords, args);\n        args.virtualInfo.blockIndexes = blockIndex;\n        args.virtualInfo.columnIndexes = colsIndex;\n        args.virtualInfo.page = page;\n        return virtualRows.splice(0, this.parent.frozenRows);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        this.scrollAfterEdit();\n        if (this.parent.enablePersistence) {\n            this.parent.scrollPosition = scrollArgs.offset;\n        }\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        if (isNullOrUndefined(document.activeElement)) {\n            this.isFocused = false;\n        }\n        else {\n            this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        }\n        var info = scrollArgs.sentinel;\n        var pStartIndex = this.preStartIndex;\n        var previousColIndexes = this.parent.getColumnIndexesInView();\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (isBlazor() && this.parent.isServerRendered && this.parent.enableColumnVirtualization &&\n            (JSON.stringify(previousColIndexes) !== JSON.stringify(viewInfo.columnIndexes))) {\n            this.parent.refreshHeader();\n            var translateX = this.getColumnOffset(this.startColIndex - 1);\n            var width = this.getColumnOffset(this.endColIndex - 1) - translateX + '';\n            this.parent.notify('refresh-virtual-indices', { requestType: 'virtualscroll', startColumnIndex: viewInfo.columnIndexes[0],\n                endColumnIndex: viewInfo.columnIndexes[viewInfo.columnIndexes.length - 1], axis: 'X',\n                VTablewidth: width, translateX: this.getColumnOffset(viewInfo.columnIndexes[0] - 1) });\n            this.parent.notify('setcolumnstyles', {});\n        }\n        if (isGroupAdaptive(this.parent) && !isBlazor()) {\n            if ((info.axis === 'Y' && viewInfo.blockIndexes && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                && scrollArgs.direction === 'up' && viewInfo.blockIndexes[viewInfo.blockIndexes.length - 1] !== 2) {\n                return;\n            }\n            else {\n                viewInfo.event = 'refresh-virtual-block';\n                if (!isNullOrUndefined(viewInfo.offsets)) {\n                    viewInfo.offsets.top = this.content.scrollTop;\n                }\n                this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo, focusElement: scrollArgs.focusElement });\n                return;\n            }\n        }\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n                || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n                if (Browser.isIE) {\n                    this.parent.hideSpinner();\n                }\n                this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n                this.restoreEdit();\n                return;\n            }\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        }\n        else if (isBlazor() && this.parent.isServerRendered && this.preStartIndex !== pStartIndex &&\n            this.parent.pageSettings.currentPage === viewInfo.currentPage) {\n            this.parent.notify('refresh-virtual-indices', { requestType: 'virtualscroll', virtualStartIndex: viewInfo.startIndex,\n                virtualEndIndex: viewInfo.endIndex, axis: 'Y', RHeight: this.parent.getRowHeight() });\n        }\n        if (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) {\n            this.requestType = 'virtualscroll';\n            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo,\n                focusElement: scrollArgs.focusElement });\n        }\n        else if (this.preStartIndex !== pStartIndex && this.parent.pageSettings.currentPage !== viewInfo.currentPage) {\n            this.parent.pageSettings.currentPage = viewInfo.currentPage;\n            this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualStartIndex: viewInfo.startIndex,\n                virtualEndIndex: viewInfo.endIndex, axis: 'Y', RHeight: this.parent.getRowHeight() });\n        }\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var isBlockAdded = false;\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.preStartIndex, endIndex: this.preEndIndex };\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        if (this.activeKey === 'upArrow' && infoType.blockIndexes.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.blockIndexes.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        if (isBlockAdded) {\n            infoType.blockIndexes = [infoType.blockIndexes[0] - 1, infoType.blockIndexes[0], infoType.blockIndexes[0] + 1];\n        }\n        if (this.activeKey === 'downArrow') {\n            var firstBlock = Math.ceil(this.rowIndex / this.getBlockSize());\n            if (firstBlock !== 1 && (infoType.blockIndexes[1] !== firstBlock || infoType.blockIndexes.length < 3)) {\n                infoType.blockIndexes = [firstBlock - 1, firstBlock, firstBlock + 1];\n            }\n        }\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        if (isBlazor() && this.parent.isServerRendered) {\n            var rowHeight = this.parent.getRowHeight();\n            var exactTopIndex = e.top / rowHeight;\n            var noOfInViewIndexes = vHeight / rowHeight;\n            var exactEndIndex = exactTopIndex + noOfInViewIndexes;\n            var pageSizeBy4 = this.parent.pageSettings.pageSize / 4;\n            if (infoType.direction === 'down') {\n                var sIndex = Math.round(exactEndIndex) - Math.round((pageSizeBy4));\n                if (isNullOrUndefined(infoType.startIndex) || (exactEndIndex >\n                    (infoType.startIndex + Math.round((this.parent.pageSettings.pageSize / 2 + pageSizeBy4)))\n                    && infoType.endIndex !== this.count)) {\n                    infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n                    infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n                    var eIndex = infoType.startIndex + this.parent.pageSettings.pageSize;\n                    infoType.startIndex = eIndex < exactEndIndex ? (Math.ceil(exactEndIndex) - this.parent.pageSettings.pageSize)\n                        : infoType.startIndex;\n                    infoType.endIndex = eIndex < this.count ? eIndex : this.count;\n                    infoType.startIndex = eIndex >= this.count ?\n                        infoType.endIndex - this.parent.pageSettings.pageSize : infoType.startIndex;\n                    infoType.currentPage = Math.ceil(infoType.endIndex / this.parent.pageSettings.pageSize);\n                    this.setKeyboardNavIndex();\n                }\n            }\n            else if (infoType.direction === 'up') {\n                if (infoType.startIndex && infoType.endIndex) {\n                    var loadAtIndex = Math.round(((infoType.startIndex * rowHeight) + (pageSizeBy4 * rowHeight)) / rowHeight);\n                    if (exactTopIndex < loadAtIndex) {\n                        var idxAddedToExactTop = (pageSizeBy4) > noOfInViewIndexes ? pageSizeBy4 :\n                            (noOfInViewIndexes + noOfInViewIndexes / 4);\n                        var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n                        infoType.endIndex = eIndex < this.count ? eIndex : this.count;\n                        var sIndex = infoType.endIndex - this.parent.pageSettings.pageSize;\n                        infoType.startIndex = sIndex > 0 ? sIndex : 0;\n                        infoType.endIndex = sIndex < 0 ? this.parent.pageSettings.pageSize : infoType.endIndex;\n                        infoType.currentPage = Math.ceil(infoType.startIndex / this.parent.pageSettings.pageSize);\n                        this.setKeyboardNavIndex();\n                    }\n                }\n            }\n            this.preStartIndex = this.startIndex = infoType.startIndex;\n            this.preEndIndex = infoType.endIndex;\n            infoType.event = (infoType.currentPage !== this.parent.pageSettings.currentPage) ? modelChanged : refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.setKeyboardNavIndex = function () {\n        this.blazorDataLoad = true;\n        if (this.activeKey === 'downArrow' || this.activeKey === 'upArrow') {\n            this.blzRowIndex = this.activeKey === 'downArrow' ? this.rowIndex + 1 : this.rowIndex - 1;\n            document.activeElement.blur();\n        }\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {\n            // To avoid frozen content white space issue\n            if (info.sentinelInfo.axis === 'X' || (info.sentinelInfo.axis === 'Y' && (info.page === this.prevInfo.page))) {\n                indexes = this.prevInfo.blockIndexes;\n            }\n        }\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === (isGroupAdaptive(_this.parent) ? _this.getGroupedTotalBlocks() : _this.getTotalBlocks());\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    // tslint:disable-next-line:max-func-body-length\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        var _this = this;\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var isFrozen = this.parent.isFrozenGrid();\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n        var colVFtable = this.parent.enableColumnVirtualization && isFrozen;\n        this.checkFirstBlockColIndexes(e);\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        if (colVFtable && info.columnIndexes[0] === frzCols) {\n            cBlock = (info.columnIndexes[0] - frzCols) - 1;\n        }\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        if (this.parent.height === '100%') {\n            this.parent.element.style.height = '100%';\n        }\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.content.getBoundingClientRect().height :\n            this.parent.element.getBoundingClientRect().height;\n        if (!this.requestTypes.some(function (value) { return value === _this.requestType; })) {\n            var translate = this.getTranslateY(this.content.scrollTop, vHeight, info);\n            this.virtualEle.adjustTable(colVFtable ? 0 : cOffset, translate);\n            if (colVFtable) {\n                this.virtualEle.adjustMovableTable(cOffset, 0);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(colVFtable ? 0 : cOffset, 0);\n            if (colVFtable) {\n                this.header.virtualEle.adjustMovableTable(cOffset, 0);\n            }\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            if (colVFtable) {\n                this.header.virtualEle.setMovableWrapperWidth(width);\n            }\n            else {\n                this.header.virtualEle.setWrapperWidth(width);\n            }\n        }\n        if (colVFtable) {\n            this.virtualEle.setMovableWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        }\n        else {\n            this.virtualEle.setWrapperWidth(width, Browser.isIE || Browser.info.name === 'edge');\n        }\n        if (!isNullOrUndefined(target.parentNode)) {\n            remove(target);\n        }\n        var tbody;\n        if (isFrozen) {\n            if (e.renderFrozenRightContent) {\n                tbody = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('tbody');\n            }\n            else if (!e.renderMovableContent) {\n                tbody = this.parent.getFrozenVirtualContent().querySelector('tbody');\n            }\n            else if (e.renderMovableContent) {\n                tbody = this.parent.getMovableVirtualContent().querySelector('tbody');\n            }\n        }\n        else {\n            tbody = this.parent.element.querySelector('.e-content').querySelector('tbody');\n        }\n        if (tbody) {\n            remove(tbody);\n            target = null;\n        }\n        var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);\n        if (!isReact) {\n            target = this.parent.createElement('tbody');\n            target.appendChild(newChild);\n        }\n        else {\n            target = newChild;\n        }\n        if (this.parent.frozenRows && e.requestType === 'virtualscroll' && this.parent.pageSettings.currentPage === 1) {\n            for (var i = 0; i < this.parent.frozenRows; i++) {\n                target.children[0].remove();\n            }\n        }\n        if (isFrozen) {\n            if (e.renderFrozenRightContent) {\n                this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.e-table').appendChild(target);\n                this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n            }\n            else if (!e.renderMovableContent) {\n                this.parent.getFrozenVirtualContent().querySelector('.e-table').appendChild(target);\n            }\n            else if (e.renderMovableContent) {\n                this.parent.getMovableVirtualContent().querySelector('.e-table').appendChild(target);\n                if (this.parent.getFrozenMode() !== 'Left-Right') {\n                    this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n                }\n            }\n            if (this.vfColIndex.length) {\n                e.virtualInfo.columnIndexes = info.columnIndexes = extend([], this.vfColIndex);\n                this.vfColIndex = e.renderMovableContent ? [] : this.vfColIndex;\n            }\n        }\n        else {\n            this.getTable().appendChild(target);\n            this.requestType = this.requestType === 'virtualscroll' ? this.empty : this.requestType;\n        }\n        if (this.parent.groupSettings.columns.length) {\n            if (!isGroupAdaptive(this.parent) && info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused && this.activeKey !== 'downArrow' && this.activeKey !== 'upArrow') {\n            this.content.focus();\n        }\n        var lastPage = Math.ceil(this.getTotalBlocks() / 2);\n        if (this.isBottom) {\n            this.isBottom = false;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 1];\n        }\n        if ((this.parent.pageSettings.currentPage === lastPage) && blocks.length === 1) {\n            this.isBottom = true;\n            this.parent.getContent().firstElementChild.scrollTop = this.offsets[this.offsetKeys.length - 2];\n        }\n        if (e.requestType === 'virtualscroll' && e.virtualInfo.sentinelInfo.axis === 'X') {\n            this.parent.notify(events.autoCol, {});\n        }\n        this.focusCell(e);\n        this.restoreEdit(e);\n        this.restoreAdd(e);\n        if (!this.initialRowTop) {\n            this.initialRowTop = this.parent.getRowByIndex(0).getBoundingClientRect().top;\n        }\n    };\n    VirtualContentRenderer.prototype.checkFirstBlockColIndexes = function (e) {\n        if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && e.virtualInfo.columnIndexes[0] === 0) {\n            var indexes = [];\n            var frozenCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount();\n            if (!e.renderMovableContent && e.virtualInfo.columnIndexes.length > frozenCols) {\n                this.vfColIndex = e.virtualInfo.columnIndexes;\n                for (var i = 0; i < frozenCols; i++) {\n                    indexes.push(i);\n                }\n                e.virtualInfo.columnIndexes = indexes;\n            }\n            else if (e.renderMovableContent) {\n                if (!this.vfColIndex.length) {\n                    this.vfColIndex = extend([], e.virtualInfo.columnIndexes);\n                }\n                e.virtualInfo.columnIndexes = extend([], this.vfColIndex);\n                e.virtualInfo.columnIndexes.splice(0, frozenCols);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.focusCell = function (e) {\n        if (this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            return;\n        }\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        // tslint:disable-next-line:no-any\n        var cell = row.cells[this.cellIndex];\n        cell.focus({ preventScroll: true });\n        this.parent.selectRow(parseInt(row.getAttribute('aria-rowindex'), 10));\n        this.activeKey = this.empty;\n    };\n    VirtualContentRenderer.prototype.restoreEdit = function (e) {\n        if (this.isNormaledit) {\n            var left = this.parent.getFrozenColumns();\n            var isFrozen = e && this.parent.isFrozenGrid();\n            var table = this.parent.getFrozenMode();\n            var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent\n                : e.renderFrozenRightContent);\n            if ((!isFrozen || (isFrozen && trigger)) && this.parent.editSettings.allowEditing\n                && this.parent.editModule && !isNullOrUndefined(this.editedRowIndex)) {\n                var row = this.getRowByIndex(this.editedRowIndex);\n                if (Object.keys(this.virtualData).length && row && !this.content.querySelector('.e-editedrow')) {\n                    var top_1 = row.getBoundingClientRect().top;\n                    if (top_1 < this.content.offsetHeight && top_1 > this.parent.getRowHeight()) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n                if (row && this.content.querySelector('.e-editedrow') && !Object.keys(this.virtualData).length) {\n                    var rowData = extend({}, this.getRowObjectByIndex(this.editedRowIndex));\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n            this.restoreAdd(e);\n        }\n    };\n    VirtualContentRenderer.prototype.getVirtualEditedData = function (rowData) {\n        var editForms = [].slice.call(this.parent.element.querySelectorAll('.e-gridform'));\n        var isFrozen = this.parent.isFrozenGrid();\n        var data = this.parent.editModule.getCurrentEditedData(editForms[0], rowData);\n        if (isFrozen) {\n            if (this.parent.getFrozenMode() !== 'Left-Right') {\n                data = this.parent.editModule.getCurrentEditedData(editForms[1], rowData);\n            }\n            else {\n                data = this.parent.editModule.getCurrentEditedData(editForms[1], rowData);\n                data = this.parent.editModule.getCurrentEditedData(editForms[2], rowData);\n            }\n        }\n        return data;\n    };\n    VirtualContentRenderer.prototype.restoreAdd = function (e) {\n        var left = this.parent.getFrozenColumns();\n        var isFrozen = e && this.parent.isFrozenGrid();\n        var table = this.parent.getFrozenMode();\n        var trigger = e && (left || table === 'Left' || table === 'Right' ? e.renderMovableContent : e.renderFrozenRightContent);\n        if ((!isFrozen || (isFrozen && trigger)) && this.isNormaledit && this.isAdd && !this.parent.element.querySelector('.e-addedrow')) {\n            var isTop = this.parent.editSettings.newRowPosition === 'Top' && this.content.scrollTop < this.parent.getRowHeight();\n            var isBottom = this.parent.editSettings.newRowPosition === 'Bottom'\n                && this.parent.pageSettings.currentPage === this.maxPage;\n            if (isTop || isBottom) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.setVirtualHeight = function (height) {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        if (this.parent.isFrozenGrid()) {\n            var virtualHeightTemp = (this.parent.pageSettings.currentPage === 1 && Object.keys(this.offsets).length <= 2) ?\n                this.offsets[1] : this.offsets[this.getTotalBlocks() - 2];\n            var scrollableElementHeight = this.content.clientHeight;\n            virtualHeightTemp = virtualHeightTemp > scrollableElementHeight ? virtualHeightTemp : 0;\n            // To overcome the white space issue in last page (instead of position absolute)\n            this.virtualEle.setVirtualHeight(virtualHeightTemp, width);\n        }\n        else {\n            var virtualHeight = (isBlazor() && this.parent.isServerRendered && this.parent.groupSettings.columns.length && height)\n                ? height : (this.offsets[isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks()]);\n            this.virtualEle.setVirtualHeight(virtualHeight, width);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n            if (this.parent.isFrozenGrid()) {\n                this.virtualEle.setMovableVirtualHeight(1, width);\n                this.header.virtualEle.setMovableVirtualHeight(1, width);\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = (isGroupAdaptive(this.parent)) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop <= _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && sTop <= _this.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = iOffset + 1;\n                }\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        var totalBlocks = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        if (result + blockHeight > this.offsets[totalBlocks]) {\n            result -= (result + blockHeight) - this.offsets[totalBlocks];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e, isWheel, check) {\n            if (Browser.isIE && !isWheel && check && !_this.preventEvent) {\n                _this.parent.showSpinner();\n            }\n            var colVFtable = _this.parent.enableColumnVirtualization && _this.parent.isFrozenGrid();\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            if (isBlazor() && _this.parent.isServerRendered && _this.currentInfo && _this.currentInfo.startIndex && xAxis) {\n                y = _this.currentInfo.startIndex * _this.parent.getRowHeight();\n            }\n            _this.virtualEle.adjustTable(colVFtable ? 0 : x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (colVFtable) {\n                _this.virtualEle.adjustMovableTable(x, 0);\n            }\n            if (isBlazor() && _this.parent.isServerRendered && xAxis) {\n                _this.parent.notify('setcolumnstyles', { refresh: true });\n            }\n            if (_this.parent.enableColumnVirtualization && (!isBlazor() || (isBlazor() && !_this.parent.isServerRendered))) {\n                _this.header.virtualEle.adjustTable(colVFtable ? 0 : x, 0);\n                if (colVFtable) {\n                    _this.header.virtualEle.adjustMovableTable(x, 0);\n                }\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.dataBound = function () {\n        this.parent.notify(events.refreshVirtualFrozenHeight, {});\n        if (this.isSelection && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow') {\n            this.parent.selectRow(this.selectedRowIndex);\n        }\n        else if (!isBlazor()) {\n            this.activeKey = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.rowSelected = function (args) {\n        if (this.isSelection && !this.isLastBlockRow(args.rowIndex)) {\n            var transform = getTransformValues(this.content.firstElementChild);\n            var rowTop = args.row.getBoundingClientRect().top;\n            var height = this.content.getBoundingClientRect().height;\n            var isBottom = height < rowTop;\n            var remainHeight = isBottom ? rowTop - height : this.initialRowTop - rowTop;\n            var translateY = isBottom ? transform.height - remainHeight : transform.height + remainHeight;\n            this.virtualEle.adjustTable(transform.width, translateY);\n        }\n        this.isSelection = false;\n    };\n    VirtualContentRenderer.prototype.isLastBlockRow = function (index) {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        var startIdx = (this.maxPage * this.parent.pageSettings.pageSize) - visibleRowCount;\n        return index >= startIdx;\n    };\n    VirtualContentRenderer.prototype.refreshVirtualCacheOnRowDD = function (args) {\n        var blockSize = this.getBlockSize();\n        var currentblk = Math.ceil((args.objIndex + 1) / blockSize);\n        var secondBlock = args.objIndex - args.startIndex >= blockSize ? blockSize : 0;\n        var thirdBlock = args.objIndex - args.startIndex >= (blockSize + blockSize) ? blockSize : 0;\n        this.orderRowObj.push(this.vgenerator.cache[currentblk][args.objIndex - args.startIndex - secondBlock - thirdBlock]);\n        if (this.parent.isFrozenGrid()) {\n            this.mvbOrderRowObj.push(this.vgenerator.movableCache[currentblk][args.objIndex - args.startIndex - secondBlock - thirdBlock]);\n            if (this.parent.getFrozenMode() === 'Left-Right') {\n                this.frOrderRowObj.push(this.vgenerator.frozenRightCache[currentblk][args.objIndex - args.startIndex - secondBlock - thirdBlock]);\n            }\n        }\n        if (args.end === true) {\n            var currentBlocks = this.currentInfo.blockIndexes;\n            if (!currentBlocks) {\n                currentBlocks = [1, 2];\n            }\n            resetRowObjectIndex(this.parent, this.orderRowObj, args.startIndex);\n            if (this.parent.isFrozenGrid()) {\n                resetRowObjectIndex(this.parent, this.mvbOrderRowObj, args.startIndex);\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    resetRowObjectIndex(this.parent, this.frOrderRowObj, args.startIndex);\n                }\n            }\n            for (var i = 0; i < currentBlocks.length; i++) {\n                this.vgenerator.cache[currentBlocks[i]] = this.orderRowObj.splice(0, blockSize);\n                if (this.parent.isFrozenGrid()) {\n                    this.vgenerator.movableCache[currentBlocks[i]] = this.mvbOrderRowObj.splice(0, blockSize);\n                    if (this.parent.getFrozenMode() === 'Left-Right') {\n                        this.vgenerator.frozenRightCache[currentBlocks[i]] = this.frOrderRowObj.splice(0, blockSize);\n                    }\n                }\n            }\n            this.orderRowObj = [];\n            this.orderRowObj = [];\n            this.mvbOrderRowObj = [];\n        }\n    };\n    VirtualContentRenderer.prototype.refreshMaxPage = function () {\n        if (this.parent.groupSettings.columns.length && this.parent.vcRows.length) {\n            this.maxPage = Math.ceil(this.parent.vcRows.length / this.parent.pageSettings.pageSize);\n        }\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent.addEventListener(events.dataBound, this.dataBound.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.rowSelected, this.rowSelected.bind(this));\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.parent[action](events.selectVirtualRow, this.selectVirtualRow, this);\n        this.parent[action](events.virtaulCellFocus, this.virtualCellFocus, this);\n        this.parent[action](events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent[action](events.virtualScrollAddActionBegin, this.addActionBegin, this);\n        this.parent[action](events.virtualScrollEdit, this.restoreEdit, this);\n        this.parent[action](events.virtualScrollEditSuccess, this.editSuccess, this);\n        this.parent[action](events.refreshVirtualCache, this.refreshCache, this);\n        this.parent[action](events.editReset, this.resetIsedit, this);\n        this.parent[action](events.getVirtualData, this.getVirtualData, this);\n        this.parent[action](events.virtualScrollEditCancel, this.editCancel, this);\n        this.parent[action](events.refreshVirtualCacheOnRowDD, this.refreshVirtualCacheOnRowDD, this);\n        this.parent[action](events.refreshVirtualMaxPage, this.refreshMaxPage, this);\n        this.parent[action](events.selectRowOnContextOpen, this.selectRowOnContextOpen, this);\n        var event = this.actions;\n        for (var i = 0; i < event.length; i++) {\n            this.parent[action](event[i] + \"-begin\", this.onActionBegin, this);\n        }\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            var gObj = _this.parent;\n            if (gObj.enablePersistence && gObj.scrollPosition) {\n                _this.content.scrollTop = gObj.scrollPosition.top;\n                var scrollValues = { direction: 'down', sentinel: _this.observer.sentinelInfo.down,\n                    offset: gObj.scrollPosition, focusElement: gObj.element };\n                _this.scrollListener(scrollValues);\n                if (gObj.enableColumnVirtualization) {\n                    _this.content.scrollLeft = gObj.scrollPosition.left;\n                }\n            }\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.getVirtualData = function (data) {\n        data.virtualData = this.virtualData;\n        data.isAdd = this.isAdd;\n        data.isCancel = this.isCancel;\n    };\n    VirtualContentRenderer.prototype.selectRowOnContextOpen = function (args) {\n        this.isContextMenuOpen = args.isOpen;\n    };\n    VirtualContentRenderer.prototype.editCancel = function (args) {\n        var dataIndex = getEditedDataIndex(this.parent, args.data);\n        if (!isNullOrUndefined(dataIndex)) {\n            args.data = this.parent.getCurrentViewRecords()[dataIndex];\n        }\n    };\n    VirtualContentRenderer.prototype.editSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewData(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.updateCurrentViewData = function (data) {\n        var dataIndex = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(dataIndex)) {\n            this.parent.getCurrentViewRecords()[dataIndex] = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionBegin = function (args) {\n        if (args.requestType !== 'virtualscroll') {\n            this.requestType = args.requestType;\n        }\n        if (!args.cancel) {\n            this.parent.notify(events.refreshVirtualFrozenRows, args);\n        }\n    };\n    VirtualContentRenderer.prototype.virtualCellFocus = function (e) {\n        // To decide the action (select or scroll), when using arrow keys for cell focus\n        var ele = document.activeElement;\n        if (ele.classList.contains('e-rowcell')\n            && e && (e.action === 'upArrow' || e.action === 'downArrow')) {\n            var rowIndex = parseInt(ele.parentElement.getAttribute('aria-rowindex'), 10);\n            if (e && (e.action === 'downArrow' || e.action === 'upArrow')) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                e.action === 'downArrow' ? rowIndex += 1 : rowIndex -= 1;\n                this.rowIndex = rowIndex;\n                this.cellIndex = parseInt(ele.getAttribute('aria-colindex'), 10);\n                var row = this.parent.getRowByIndex(rowIndex);\n                var page = this.parent.pageSettings.currentPage;\n                var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n                var emptyRow = false;\n                if (isNullOrUndefined(row)) {\n                    emptyRow = true;\n                    if ((e.action === 'downArrow' && page === this.maxPage - 1) || (e.action === 'upArrow' && page === 1)) {\n                        emptyRow = false;\n                    }\n                }\n                if (emptyRow || (ensureLastRow(row, this.parent) && e.action === 'downArrow')\n                    || (ensureFirstRow(row, this.parent.getRowHeight() * 2) && e.action === 'upArrow')) {\n                    this.activeKey = e.action;\n                    scrollEle.scrollTop = e.action === 'downArrow' ?\n                        (rowIndex - visibleRowCount) * this.parent.getRowHeight() : rowIndex * this.parent.getRowHeight();\n                }\n                else {\n                    this.activeKey = this.empty;\n                }\n                if (!isBlazor() || (isBlazor() && !this.blazorDataLoad)) {\n                    this.parent.selectRow(rowIndex);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.editActionBegin = function (e) {\n        this.editedRowIndex = e.index;\n        var rowData = extend({}, this.getRowObjectByIndex(e.index));\n        e.data = Object.keys(this.virtualData).length ? this.virtualData : rowData;\n    };\n    VirtualContentRenderer.prototype.refreshCache = function (data) {\n        var block = Math.ceil((this.editedRowIndex + 1) / this.getBlockSize());\n        var index = this.editedRowIndex - ((block - 1) * this.getBlockSize());\n        this.vgenerator.cache[block][index].data = data;\n        if (this.vgenerator.movableCache[block]) {\n            this.vgenerator.movableCache[block][index].data = data;\n        }\n        if (this.vgenerator.frozenRightCache[block]) {\n            this.vgenerator.frozenRightCache[block][index].data = data;\n        }\n    };\n    VirtualContentRenderer.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' || args.requestType === 'save' || args.requestType === 'cancel') {\n            this.refreshOffsets();\n            this.refreshVirtualElement();\n            if (this.isNormaledit) {\n                if (args.requestType === 'cancel') {\n                    this.isCancel = true;\n                }\n                this.isAdd = false;\n                this.editedRowIndex = this.empty;\n                this.virtualData = {};\n                this.parent.editModule.previousVirtualData = {};\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.requestType === 'filterafteropen'\n            && this.currentInfo.columnIndexes && this.currentInfo.columnIndexes[0] > 0) {\n            this.parent.resetFilterDlgPosition(args.columnName);\n        }\n    };\n    VirtualContentRenderer.prototype.resetIsedit = function () {\n        if (this.parent.enableVirtualization && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && Object.keys(this.virtualData).length)\n                || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.scrollAfterEdit = function () {\n        if (this.parent.editModule && this.parent.editSettings.allowEditing && this.isNormaledit) {\n            if (this.parent.element.querySelector('.e-gridform')) {\n                var editForm = this.parent.element.querySelector('.e-editedrow');\n                var addForm = this.parent.element.querySelector('.e-addedrow');\n                if (editForm || addForm) {\n                    var rowData = editForm ? extend({}, this.getRowObjectByIndex(this.editedRowIndex))\n                        : extend({}, this.emptyRowData);\n                    this.virtualData = this.getVirtualEditedData(rowData);\n                }\n            }\n        }\n    };\n    VirtualContentRenderer.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.getColumns().filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    VirtualContentRenderer.prototype.addActionBegin = function (args) {\n        if (this.isNormaledit) {\n            if (!Object.keys(this.emptyRowData).length) {\n                this.createEmptyRowdata();\n            }\n            this.isAdd = true;\n            var page = this.parent.pageSettings.currentPage;\n            if (page > 1 && this.parent.editSettings.newRowPosition === 'Top') {\n                this.isAdd = true;\n                this.onActionBegin();\n                args.startEdit = false;\n                this.content.scrollTop = 0;\n            }\n            if (page < this.maxPage - 1 && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.isAdd = true;\n                this.parent.setProperties({ pageSettings: { currentPage: this.maxPage - 1 } }, true);\n                args.startEdit = false;\n                this.content.scrollTop = this.offsets[this.offsetKeys.length];\n            }\n        }\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.getRowObjectByIndex = function (index) {\n        var data = this.getRowCollection(index, false, true);\n        return data;\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getGroupedTotalBlocks = function () {\n        var rows = this.parent.vcRows;\n        return Math.floor((rows.length / this.getBlockSize()) < 1 ? 1 : rows.length / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n        if (action !== 'virtualscroll') {\n            this.isAdd = false;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        if (isGroupAdaptive(this.parent)) {\n            return this.parent.getDataRows()[index];\n        }\n        return this.getRowCollection(index, false);\n    };\n    VirtualContentRenderer.prototype.getMovableVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, true);\n    };\n    VirtualContentRenderer.prototype.getFrozenRightVirtualRowByIndex = function (index) {\n        return this.getRowCollection(index, false, false, true);\n    };\n    VirtualContentRenderer.prototype.getRowCollection = function (index, isMovable, isRowObject, isFrozenRight) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (!isBlazor() || (isBlazor() && !this.parent.isServerRendered)) ?\n            (prev[0] - 1) * this.getBlockSize() : this.startIndex;\n        var rowCollection = isMovable ? this.parent.getMovableDataRows() : this.parent.getDataRows();\n        rowCollection = isFrozenRight ? this.parent.getFrozenRightDataRows() : rowCollection;\n        var collection = isRowObject ? this.parent.getCurrentViewRecords() : rowCollection;\n        var selectedRow = collection[index - startIdx];\n        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {\n            if (!isRowObject) {\n                selectedRow = index <= this.parent.frozenRows ? rowCollection[index]\n                    : rowCollection[(index - startIdx) + this.parent.frozenRows];\n            }\n            else {\n                selectedRow = index <= this.parent.frozenRows ? this.parent.getRowsObject()[index].data : selectedRow;\n            }\n        }\n        return selectedRow;\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    /** @hidden */\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var gObj = this.parent;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = isGroupAdaptive(this.parent) ? this.getGroupedTotalBlocks() : this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        var blocks = Array.apply(null, Array(total)).map(function () { return ++row; });\n        for (var i = 0; i < blocks.length; i++) {\n            var tmp = (this.vgenerator.cache[blocks[i]] || []).length;\n            var rem = !isGroupAdaptive(this.parent) ? this.count % bSize : (gObj.vcRows.length % bSize);\n            var size = !isGroupAdaptive(this.parent) && blocks[i] in this.vgenerator.cache ?\n                tmp * this.parent.getRowHeight() : rem && blocks[i] === total ? rem * this.parent.getRowHeight() :\n                this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            this.offsets[blocks[i]] = (this.offsets[blocks[i] - 1] | 0) + size;\n            this.tmpOffsets[blocks[i]] = this.offsets[blocks[i] - 1] | 0;\n        }\n        this.offsetKeys = Object.keys(this.offsets);\n        if (isGroupAdaptive(this.parent)) {\n            this.parent.vGroupOffsets = this.offsets;\n        }\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    VirtualContentRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fcntColGrp;\n        var mcntColGrp;\n        if (frozenCols) {\n            fcntColGrp = [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('col'));\n            mcntColGrp = [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('col'));\n        }\n        if (isBlazor() && gObj.isServerRendered) {\n            this.parent.notify('setvisibility', columns);\n        }\n        var rows = [];\n        rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var needFullRefresh = true;\n        if (!gObj.groupSettings.columns.length && testRow) {\n            needFullRefresh = false;\n        }\n        var tr = gObj.getDataRows();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = gObj.getNormalizedColumnIndex(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            var colGrp = void 0;\n            if (fcntColGrp && mcntColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mcntColGrp;\n                    tr = this.parent.getMovableRows();\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fcntColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            }\n            if (!needFullRefresh) {\n                var width = void 0;\n                if (column.visible) {\n                    width = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    width = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (width > gObj.width) {\n                    this.setDisplayNone(tr, idx, displayVal, rows);\n                    if (this.parent.enableColumnVirtualization) {\n                        this.virtualEle.setWrapperWidth(width + '');\n                    }\n                    this.refreshVirtualElement();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n        if (isBlazor() && this.parent.isServerRendered && needFullRefresh) {\n            var inViewIdx = this.parent.inViewIndexes;\n            var translateX = this.getColumnOffset(inViewIdx[0] - 1);\n            var width = this.getColumnOffset(inViewIdx[inViewIdx.length - 1]) - translateX + '';\n            this.parent.notify('refresh-virtual-indices', { requestType: 'virtualScrollRefresh',\n                startColumnIndex: inViewIdx[0], endColumnIndex: inViewIdx[inViewIdx.length - 1], axis: 'X',\n                VTablewidth: width, translateX: translateX });\n            this.parent.notify('setcolumnstyles', {});\n        }\n        if (needFullRefresh || frozenCols) {\n            this.refreshContentRows({ requestType: 'refresh' });\n        }\n        else {\n            this.parent.notify(events.partialRefresh, { rows: rows, args: { isFrozen: false, rows: rows } });\n        }\n    };\n    VirtualContentRenderer.prototype.selectVirtualRow = function (args) {\n        var _this = this;\n        if (!this.isContextMenuOpen && this.activeKey !== 'upArrow' && this.activeKey !== 'downArrow'\n            && !this.requestTypes.some(function (value) { return value === _this.requestType; }) && !this.parent.selectionModule.isInteracted) {\n            var selectedRow = this.parent.getRowByIndex(args.selectedIndex);\n            var rowHeight = this.parent.getRowHeight();\n            if (!selectedRow || !this.isRowInView(selectedRow)) {\n                this.isSelection = true;\n                this.selectedRowIndex = args.selectedIndex;\n                var scrollTop = (args.selectedIndex + 1) * rowHeight;\n                if (!isNullOrUndefined(scrollTop)) {\n                    this.content.scrollTop = scrollTop;\n                }\n            }\n        }\n        if (this.parent.isFrozenGrid() && this.requestType) {\n            if (this.parent.getTablesCount() === this.frzIdx) {\n                this.requestType = this.empty;\n                this.frzIdx = 1;\n            }\n            else {\n                this.frzIdx++;\n            }\n        }\n        else {\n            this.requestType = this.empty;\n        }\n    };\n    VirtualContentRenderer.prototype.isRowInView = function (row) {\n        var top = row.getBoundingClientRect().top;\n        return (top >= this.initialRowTop && top <= this.content.offsetHeight);\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.isMovable = false;\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(events.columnVisibilityChanged, _this.setVisible, _this);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.e-headercontent')));\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.parent.notify('refresh-virtual-indices', {\n                startColumnIndex: this.parent.contentModule.startColIndex,\n                endColumnIndex: this.parent.contentModule.endColIndex, axis: 'X'\n            });\n        }\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().querySelector('.e-headercontent');\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        if (!this.isMovable) {\n            this.virtualEle.wrapper.appendChild(table);\n        }\n        else {\n            this.virtualEle.movableWrapper.appendChild(table);\n            this.isMovable = false;\n        }\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.isMovable = this.parent.isFrozenGrid();\n        this.setFrozenTable(this.parent.getMovableVirtualContent());\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector('.e-headercontent')));\n        _super.prototype.refreshUI.call(this);\n        this.setFrozenTable(this.parent.getFrozenVirtualContent());\n    };\n    VirtualHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var needFullRefresh;\n        var frozenCols = this.parent.getFrozenColumns();\n        var fhdrColGrp;\n        var mhdrColGrp;\n        if (frozenCols) {\n            fhdrColGrp = [].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll('col'));\n            mhdrColGrp = [].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll('col'));\n        }\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            var colGrp = void 0;\n            if (fhdrColGrp && mhdrColGrp) {\n                if (idx >= frozenCols) {\n                    colGrp = mhdrColGrp;\n                    idx = idx - frozenCols;\n                }\n                else {\n                    colGrp = fhdrColGrp;\n                }\n            }\n            else {\n                colGrp = this.getColGroup().children;\n            }\n            setStyleAttribute(colGrp[idx], { 'display': displayVal });\n            if (gObj.enableColumnVirtualization && !gObj.groupSettings.columns.length) {\n                var tablewidth = void 0;\n                if (column.visible) {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth + parseInt(column.width.toString(), 10);\n                }\n                else {\n                    tablewidth = this.virtualEle.wrapper.offsetWidth - parseInt(column.width.toString(), 10);\n                }\n                if (tablewidth > gObj.width) {\n                    this.setDisplayNone(column, displayVal);\n                    this.virtualEle.setWrapperWidth(tablewidth + '');\n                    this.gen.refreshColOffsets();\n                }\n                else {\n                    needFullRefresh = true;\n                }\n            }\n            else {\n                needFullRefresh = true;\n            }\n            if (needFullRefresh && !frozenCols) {\n                this.refreshUI();\n            }\n        }\n        if (frozenCols) {\n            this.parent.notify(events.columnPositionChanged, {});\n        }\n    };\n    VirtualHeaderRenderer.prototype.setFrozenTable = function (content) {\n        if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization\n            && this.parent.contentModule.isXaxis()) {\n            this.parent.contentModule\n                .setTable(content.querySelector('.e-table'));\n        }\n    };\n    VirtualHeaderRenderer.prototype.setDisplayNone = function (col, displayVal) {\n        var frozenCols = this.parent.isFrozenGrid();\n        var table = this.getTable();\n        if (frozenCols && col.getFreezeTableName() === 'movable') {\n            table = this.parent.getMovableVirtualHeader().querySelector('.e-table');\n        }\n        for (var _i = 0, _a = [].slice.apply(table.querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            if (ele.querySelector('[e-mappinguid]') &&\n                ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === col.uid) {\n                setStyleAttribute(ele, { 'display': displayVal });\n                if (displayVal === '') {\n                    removeClass([ele], 'e-hide');\n                }\n                break;\n            }\n        }\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        if (isBlazor()) {\n            this.wrapper = this.content.querySelector('.e-virtualtable') ? this.content.querySelector('.e-virtualtable') :\n                createElement('div', { className: 'e-virtualtable' });\n            this.wrapper.setAttribute('styles', \"min-height:\" + formatUnit(height));\n        }\n        else {\n            this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        }\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        if (isBlazor()) {\n            this.placeholder = this.content.querySelector('.e-virtualtrack') ? this.content.querySelector('.e-virtualtrack') :\n                createElement('div', { className: 'e-virtualtrack' });\n            this.placeholder.setAttribute('styles', \"position:\" + position);\n        }\n        else {\n            this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        }\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderFrozenWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) + \"; display: flex\" });\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderFrozenPlaceHolder = function () {\n        this.placeholder = createElement('div', { className: 'e-virtualtrack' });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.renderMovableWrapper = function (height) {\n        this.movableWrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.movableContent.appendChild(this.movableWrapper);\n    };\n    VirtualElementHandler.prototype.renderMovablePlaceHolder = function () {\n        this.movablePlaceholder = createElement('div', { className: 'e-virtualtrack' });\n        this.movableContent.appendChild(this.movablePlaceholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.adjustMovableTable = function (xValue, yValue) {\n        this.movableWrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setMovableWrapperWidth = function (width, full) {\n        this.movableWrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setMovableVirtualHeight = function (height, width) {\n        this.movablePlaceholder.style.height = height + \"px\";\n        this.movablePlaceholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    VirtualElementHandler.prototype.setFreezeWrapperWidth = function (wrapper, width, full) {\n        wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\nimport { isBlazor } from '@syncfusion/ej2-base';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n        var renderer = this.locator.getService('rendererFactory');\n        if (!this.parent.isFrozenGrid()) {\n            if (this.parent.enableColumnVirtualization) {\n                renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n            }\n            renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        }\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height :\n            this.parent.element.getBoundingClientRect().height;\n        this.blockSize = ~~(vHeight / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.parent.notify('refresh-virtual-indices', {});\n        }\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, extend, closest, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, alignFrozenEditForm, getMovableTbody, getFrozenRightTbody, setStyleAndAttributes } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        var tbody;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        if (this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top') {\n            tbody = this.parent.getHeaderTable().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            var emptyRow = tbody.querySelector('.e-emptyrow');\n            emptyRow.parentNode.removeChild(emptyRow);\n            if (this.parent.isFrozenGrid()) {\n                var moveTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n                (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    var frTbody_1 = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('tbody');\n                    (frTbody_1.firstElementChild).parentNode.removeChild(frTbody_1.firstElementChild);\n                }\n            }\n        }\n        this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(args.row, tbody.firstChild) : tbody.appendChild(args.row);\n        args.row.appendChild(this.getEditElement(elements, false, undefined, args, true));\n        this.parent.editModule.checkLastRow(args.row, args);\n        if (this.parent.isFrozenGrid()) {\n            var mEle = this.renderMovableform(args.row, args);\n            this.parent.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mEle, mTbody.firstChild) : mTbody.appendChild(mEle);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (frTbody) {\n                var frEle = this.renderFrozenRightForm(args.row, args);\n                this.parent.editSettings.newRowPosition === 'Top' ? frTbody.insertBefore(frEle, frTbody.firstChild)\n                    : frTbody.appendChild(frEle);\n                var colSpan = this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount();\n                args.row.querySelector('.e-normaledit').setAttribute('colspan', colSpan + '');\n                frEle.querySelector('.e-normaledit').setAttribute('colspan', '' + this.parent.getFrozenRightColumnsCount());\n            }\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderFrozenRightForm = function (ele, args) {\n        var frEle = ele.cloneNode(true);\n        var form = args.frozenRightForm = frEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return frEle;\n        }\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector('colgroup').innerHTML;\n        return frEle;\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele, args) {\n        var mEle = ele.cloneNode(true);\n        var form = args.movableForm = mEle.querySelector('form');\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, args.rowData, false);\n            return mEle;\n        }\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        td = td.concat([].slice.call(this.getFreezeRow(row).querySelectorAll('td.e-rowcell')));\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            td = td.concat([].slice.call(this.getFreezeRightRow(row).querySelectorAll('td.e-rowcell')));\n        }\n        return td;\n    };\n    InlineEditRender.prototype.getFreezeRightRow = function (row) {\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        var fCont = this.parent.getFrozenLeftContentTbody();\n        var fHdr = this.parent.getFrozenHeaderTbody();\n        var frHdr = this.parent.getFrozenRightHeaderTbody();\n        var frCont = this.parent.getFrozenRightContentTbody();\n        if (fCont.contains(row) || fHdr.contains(row)) {\n            return this.parent.getFrozenRightRowByIndex(idx);\n        }\n        else if (frCont.contains(row) || frHdr.contains(row)) {\n            return this.parent.getRowByIndex(idx);\n        }\n        return row;\n    };\n    InlineEditRender.prototype.getFreezeRow = function (row) {\n        if (this.parent.isFrozenGrid()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getFrozenLeftContentTbody();\n            var mCont = this.parent.getMovableContentTbody();\n            var fHdr = this.parent.getFrozenHeaderTbody();\n            var mHdr = this.parent.getMovableHeaderTbody();\n            if (fCont.contains(row) || fHdr.contains(row)) {\n                return this.parent.getMovableRowByIndex(idx);\n            }\n            else if (mCont.contains(row) || mHdr.contains(row)) {\n                return this.parent.getRowByIndex(idx);\n            }\n        }\n        return row;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        var cloneRow = 'cloneRow';\n        if (closest(args.row, '.e-movablecontent') || closest(args.row, '.e-movableheader')) {\n            args.row = this.getFreezeRow(args.row);\n            if (isBlazor() && this.parent.isServerRendered) {\n                args[cloneRow] = args.row.cloneNode(true);\n            }\n        }\n        if (closest(args.row, '.e-frozen-right-content') || closest(args.row, '.e-frozen-right-header')) {\n            args.row = this.getFreezeRightRow(args.row);\n        }\n        if (isBlazor() && this.parent.isServerRendered) {\n            args.row.parentNode.insertBefore(args[cloneRow], args.row);\n            args.row.classList.add('e-hiddenrow');\n            var tdElement = [].slice.call(args[cloneRow].querySelectorAll('td.e-rowcell'));\n            args[cloneRow].innerHTML = '';\n            tdElement = this.updateFreezeEdit(args[cloneRow], tdElement);\n            args[cloneRow].appendChild(this.getEditElement(elements, true, tdElement, args, true));\n            args[cloneRow].classList.add('e-editedrow');\n            this.refreshFreezeEdit(args[cloneRow], args);\n        }\n        else {\n            var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n            args.row.innerHTML = '';\n            tdElement = this.updateFreezeEdit(args.row, tdElement);\n            args.row.appendChild(this.getEditElement(elements, true, tdElement, args, true));\n            args.row.classList.add('e-editedrow');\n            this.parent.editModule.checkLastRow(args.row, args);\n            this.refreshFreezeEdit(args.row, args);\n        }\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row, args) {\n        var td = row.firstChild;\n        if (this.parent.getVisibleFrozenColumns() && this.parent.editSettings.template) {\n            td.querySelector('colgroup').innerHTML = this.parent.getHeaderContent().querySelector('.e-frozenheader').\n                querySelector('colgroup').innerHTML;\n        }\n        var fCls;\n        var cont;\n        var frozen = 'frozen';\n        var cloneFrozen = 'cloneFrozen';\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.isFrozenGrid()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var frTd = td.cloneNode(true);\n            var form = args.movableForm = mTd.querySelector('form');\n            if (this.parent.editSettings.template) {\n                this.refreshEditForm(form, args.rowData);\n            }\n            var fRows = void 0;\n            var frRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                if (isBlazor() && this.parent.isServerRendered) {\n                    args[frozen] = fRows;\n                    args[cloneFrozen] = fRows.cloneNode(true);\n                    fRows.classList.add('e-hiddenrow');\n                    fRows.parentNode.insertBefore(args[cloneFrozen], fRows);\n                    this.updateFrozenCont(args[cloneFrozen], td, mTd);\n                }\n                else {\n                    this.updateFrozenCont(fRows, td, mTd);\n                    if (this.parent.getFrozenMode() === 'Left-Right') {\n                        args.frozenRightForm = frTd.querySelector('form');\n                        this.refreshEditForm(args.frozenRightForm, args.rowData);\n                        frRows = this.parent.getFrozenRightRowByIndex(idx);\n                        this.updateFrozenRightCont(frRows, td, frTd);\n                    }\n                }\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                if (isBlazor() && this.parent.isServerRendered) {\n                    args[frozen] = fRows;\n                    args[cloneFrozen] = fRows.cloneNode(true);\n                    fRows.parentNode.insertBefore(args[cloneFrozen], fRows);\n                    fRows.classList.add('e-hiddenrow');\n                    this.updateFrozenCont(args[cloneFrozen], mTd, td);\n                }\n                else {\n                    this.updateFrozenCont(fRows, mTd, td);\n                    if (this.parent.getFrozenMode() === 'Left-Right') {\n                        args.frozenRightForm = frTd.querySelector('form');\n                        this.refreshEditForm(args.frozenRightForm, args.rowData);\n                        frRows = this.parent.getFrozenRightRowByIndex(idx);\n                        this.updateFrozenRightCont(frRows, frTd, td);\n                    }\n                }\n            }\n            if (isBlazor() && this.parent.isServerRendered) {\n                args[cloneFrozen].appendChild(mTd);\n                args[cloneFrozen].classList.add('e-editedrow');\n            }\n            else {\n                fRows.appendChild(mTd);\n                fRows.classList.add('e-editedrow');\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    frRows.appendChild(frTd);\n                    frRows.classList.add('e-editedrow');\n                    alignFrozenEditForm(args.frozenRightForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n                }\n            }\n            alignFrozenEditForm(args.movableForm.querySelector('td:not(.e-hide)'), args.form.querySelector('td:not(.e-hide)'));\n        }\n    };\n    InlineEditRender.prototype.refreshEditForm = function (form, data) {\n        if (this.parent.editSettings.template) {\n            form.innerHTML = '';\n            this.appendChildren(form, data, false);\n        }\n    };\n    InlineEditRender.prototype.updateFrozenRightCont = function (row, ele, frEle) {\n        row.innerHTML = '';\n        this.renderRightFrozen(ele, frEle);\n        frEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-frozen-right-header').querySelector('colgroup').innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() - this.parent.getFrozenRightColumnsCount() + '');\n        frEle.setAttribute('colspan', this.parent.getFrozenRightColumnsCount() + '');\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderRightFrozen = function (ele, frEle) {\n        frEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === 'frozen-right') {\n                var index = k - this.parent.getMovableColumnsCount();\n                frEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[index]));\n                k--;\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        mEle.querySelector('tr').innerHTML = '';\n        var cols = this.parent.getColumns();\n        var k = 0;\n        for (var i = 0; i < cols.length; i++, k++) {\n            if (cols[i].getFreezeTableName() === 'movable') {\n                mEle.querySelector('tr').appendChild(ele.querySelector('tr').removeChild(ele.querySelector('tr').children[k]));\n                k--;\n            }\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement, args, isFrozen) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + this.parent.getIndentCount()).toString() }\n        });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            this.appendChildren(form, args.rowData, isFrozen);\n            td.appendChild(form);\n            return td;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = this.parent.createElement('tbody');\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        if (gObj.isRowDragable()) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-dragindentcell' }));\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (this.parent.rowRenderingMode === 'Vertical') {\n                    setStyleAndAttributes(td_1, { 'data-cell': col.headerText });\n                    if (i === 0) {\n                        td_1.classList.add('e-responsive-editcell');\n                    }\n                }\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    InlineEditRender.prototype.appendChildren = function (form, data, isFrozen) {\n        var _this = this;\n        var dummyData = extend({}, data, { isAdd: !this.isEdit, isFrozen: isFrozen }, true);\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        if (this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string') {\n            this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n            this.parent.renderTemplates();\n        }\n        else {\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n        }\n        var setRules = function () {\n            var cols = _this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                if (cols[i].validationRules) {\n                    _this.parent.editModule.formObj.rules[cols[i].field] =\n                        cols[i].validationRules;\n                }\n            }\n        };\n        updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList, isBlazor } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        if (isBlazor() && this.parent.isServerRendered) {\n            var cloneCell = 'cloneCell';\n            args[cloneCell].innerHTML = '';\n            args[cloneCell].appendChild(this.getEditElement(elements, args));\n            args[cloneCell].classList.remove('e-ellipsistooltip');\n            args[cloneCell].classList.add('e-editedbatchcell');\n            classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n        }\n        else {\n            if (this.parent.isReact && args.columnObject && args.columnObject.template) {\n                var parentRow = args.cell.parentElement;\n                var newTd = args.cell.cloneNode(true);\n                parentRow.insertBefore(newTd, parentRow.children[parseInt(args.cell.getAttribute('aria-colindex'), 10)]);\n                newTd.focus();\n                args.cell.remove();\n                args.cell = newTd;\n            }\n            args.cell.innerHTML = '';\n            args.cell.appendChild(this.getEditElement(elements, args));\n            args.cell.classList.remove('e-ellipsistooltip');\n            args.cell.classList.add('e-editedbatchcell');\n            classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n        }\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, applyBiggerTheme, addBiggerDialog } from '../base/util';\nimport { ResponsiveDialogRenderer } from './responsive-dialog-renderer';\nimport { ResponsiveDialogAction } from '../base/enum';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialogHeader = function (args) {\n        var gObj = this.parent;\n        var header;\n        if (this.parent.enableAdaptiveUI) {\n            var responsiveDlgRenderer = new ResponsiveDialogRenderer(this.parent, this.serviceLocator);\n            responsiveDlgRenderer.action = this.isEdit ? ResponsiveDialogAction.isEdit : ResponsiveDialogAction.isAdd;\n            return responsiveDlgRenderer.renderResponsiveHeader(args);\n        }\n        else {\n            if (gObj.editSettings.headerTemplate) {\n                header = this.getDialogEditTemplateElement('HeaderTemplate', args);\n            }\n            else if (this.isEdit) {\n                header = this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0];\n            }\n            else {\n                header = this.l10n.getConstant('AddFormTitle');\n            }\n        }\n        return header;\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        if (gObj.enableAdaptiveUI) {\n            this.dialog.classList.add('e-responsive-dialog');\n        }\n        this.dialog.setAttribute('aria-label', 'Dialog edit');\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n        //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog(extend({\n            header: this.createDialogHeader(args), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            // position: position,\n            close: this.dialogClose.bind(this),\n            created: this.dialogCreated.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: args.target ? args.target : document.body, animationSettings: { effect: 'None' },\n            footerTemplate: gObj.editSettings.footerTemplate ? this.getDialogEditTemplateElement('FooterTemplate', args) : null,\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        }, gObj.editSettings.dialog ? (gObj.editSettings.dialog.params || {}) : {}));\n        if (!isBlazor()) {\n            args.dialog = this.dialogObj;\n        }\n        else {\n            this.dialogObj.locale = this.parent.locale;\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.renderResponsiveDialog();\n        this.dialogObj.appendTo(this.dialog);\n        applyBiggerTheme(this.parent.element, this.dialogObj.element.parentElement);\n        if (gObj.enableAdaptiveUI) {\n            this.dialogObj.show(true);\n        }\n    };\n    DialogEditRender.prototype.dialogCreated = function () {\n        addBiggerDialog(this.parent);\n    };\n    DialogEditRender.prototype.renderResponsiveDialog = function () {\n        var _this = this;\n        if (this.parent.enableAdaptiveUI) {\n            if (this.parent.adaptiveDlgTarget) {\n                this.dialogObj.target = this.parent.adaptiveDlgTarget;\n            }\n            this.dialogObj.buttons = [{}];\n            this.dialogObj.showCloseIcon = true;\n            this.dialogObj.visible = false;\n            this.dialogObj.width = '100%';\n            this.dialogObj.open = function () {\n                _this.dialogObj.element.style.maxHeight = '100%';\n            };\n        }\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        var dialogEditTemplates = ['template', 'headerTemplate', 'footerTemplate'];\n        for (var i = 0; i < dialogEditTemplates.length; i++) {\n            if (this.parent.editSettings[dialogEditTemplates[i]]) {\n                var templateName = dialogEditTemplates[i].charAt(0).toUpperCase() + dialogEditTemplates[i].slice(1);\n                var editTemplateID = this.parent.element.id + 'editSettings' + templateName;\n                updateBlazorTemplate(editTemplateID, templateName, this.parent.editSettings);\n            }\n        }\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getDialogEditTemplateElement = function (dialogTemp, args) {\n        var tempDiv = this.parent.createElement('div', { className: 'e-dialog' + dialogTemp });\n        var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n        var templateID = this.parent.element.id + 'editSettings' + dialogTemp;\n        appendChildren(tempDiv, (dialogTemp === 'HeaderTemplate' ? this.parent.getEditHeaderTemplate() :\n            this.parent.getEditFooterTemplate())(dummyData, this.parent, 'editSettings' + dialogTemp, templateID));\n        updateBlazorTemplate(templateID, dialogTemp, this.parent.editSettings);\n        return tempDiv;\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var _this = this;\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            var isReactCompiler = this.parent.isReact && typeof (this.parent.editSettings.template) !== 'string';\n            if (isReactCompiler) {\n                this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID, null, null, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n            }\n            var setRules = function () {\n                var columns = _this.parent.getColumns();\n                for (var i = 0; i < columns.length; i++) {\n                    if (columns[i].validationRules) {\n                        _this.parent.editModule.formObj.rules[columns[i].field] =\n                            columns[i].validationRules;\n                    }\n                }\n            };\n            updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate ||\n                cols[i].type === 'checkbox') {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, extend, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList, isBlazor, select } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { getComplexFieldID, getObject, appendChildren, parentsUntil, extendObjWithFn } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.parent.notify(events.beforeStartEdit, args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frForm;\n        var frzCols = gObj.isFrozenGrid();\n        var index = gObj.getFrozenMode() === 'Right' && gObj.editSettings.mode === 'Normal' ? 1 : 0;\n        var form = gObj.editSettings.mode === 'Dialog' ?\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document) :\n            gObj.element.querySelectorAll('.e-gridform')[index];\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && ((args.requestType === 'add' && gObj.editSettings.newRowPosition === 'Top')\n                || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    frForm = args.frozenRightForm;\n                }\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    frForm = args.frozenRightForm;\n                }\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (this.parent.editSettings.template && !isNullOrUndefined(col.field)) {\n                var cellArgs = extend({}, args);\n                cellArgs.element = form.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                if (isNullOrUndefined(cellArgs.element) && frzCols) {\n                    cellArgs.element = fForm.querySelector('[name=' + getComplexFieldID(col.field) + ']');\n                }\n                if (typeof col.edit.write === 'string') {\n                    getObject(col.edit.write, window)(cellArgs);\n                }\n                else {\n                    col.edit.write(cellArgs);\n                }\n                continue;\n            }\n            if (this.parent.editModule.checkColumnIsGrouped(col) || col.commands) {\n                continue;\n            }\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (col.getFreezeTableName() === 'movable' && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else if (frForm && col.getFreezeTableName() === 'frozen-right' && gObj.editSettings.mode === 'Normal') {\n                cell = frForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getObject(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n        if (frzCols && !this.parent.allowTextWrap && ((args.requestType === 'add') || args.requestType === 'beginEdit')\n            && this.parent.editSettings.mode !== 'Dialog' && !isNullOrUndefined(form) && !isNullOrUndefined(fForm)) {\n            var mTdElement = (fForm.querySelector('tr').children[0]);\n            var fTdElement = (form.querySelector('tr').children[0]);\n            if (fTdElement.offsetHeight > mTdElement.offsetHeight) {\n                mTdElement.style.height = fTdElement.offsetHeight + 'px';\n                if (frForm) {\n                    var frTdElement = fForm.querySelector('tr').children[0];\n                    frTdElement.style.height = fTdElement.offsetHeight + 'px';\n                }\n            }\n            else {\n                fTdElement.style.height = mTdElement.offsetHeight + 'px';\n                if (frForm) {\n                    var frTdElement = fForm.querySelector('tr').children[0];\n                    frTdElement.style.height = mTdElement.offsetHeight + 'px';\n                }\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            var isFocus = this.parent.enableVirtualization && this.parent.editSettings.mode === 'Normal' ? false : true;\n            if (isFocus || (this.parent.enableVirtualization && this.parent.editSettings.newRowPosition === 'Bottom'\n                && parentsUntil(elem, 'e-addedrow'))) {\n                elem.focus();\n            }\n            else {\n                // tslint:disable-next-line:no-any\n                elem.focus({ preventScroll: true });\n            }\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var _this = this;\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        if (this.parent.editSettings.template) {\n            return {};\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (this.parent.editModule.checkColumnIsGrouped(col)) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cells = void 0;\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                cells = model.generateRows(args.rowData)[0].cells;\n                var cell = cells.filter(function (cell) { return cell.rowID; });\n                var td = cellRenderer.render(cell[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (col.editTemplate) {\n                input = this.parent.createElement('span', { attrs: { 'e-mappinguid': col.uid } });\n                var tempID = this.parent.element.id + col.uid + 'editTemplate';\n                var tempData = extendObjWithFn({}, args.rowData, { column: col });\n                var isReactCompiler = this.parent.isReact && typeof (col.editTemplate) !== 'string';\n                if (isReactCompiler) {\n                    col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID, null, null, input);\n                    this.parent.renderTemplates();\n                }\n                else {\n                    var template = col.getEditTemplate()(extend({ 'index': args.rowIndex }, tempData), this.parent, 'editTemplate', tempID);\n                    appendChildren(input, template);\n                }\n                if (isBlazor()) {\n                    var setRules = function (ruleColumn) {\n                        var column = ruleColumn;\n                        var func = function () {\n                            _this.parent.editModule.formObj.rules[column.field] = column.validationRules;\n                        };\n                        return func;\n                    };\n                    updateBlazorTemplate(tempID, 'EditTemplate', col, true, setRules(col));\n                }\n            }\n            else {\n                if (typeof temp === 'string') {\n                    temp = getObject(temp, window);\n                    input = temp(tArgs);\n                }\n                else {\n                    input = col.edit.create(tArgs);\n                }\n                if (typeof input === 'string') {\n                    var div = this.parent.createElement('div');\n                    div.innerHTML = input;\n                    input = div.firstChild;\n                }\n                var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n                var complexFieldName = getComplexFieldID(col.field);\n                attributes(isInput ? input.querySelector('input') : input, {\n                    name: complexFieldName, 'e-mappinguid': col.uid,\n                    id: gObj.element.id + complexFieldName\n                });\n                classList(input, ['e-input', 'e-field'], []);\n                if (col.textAlign === 'Right') {\n                    input.classList.add('e-ralign');\n                }\n                if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                    (col.isIdentity && args.requestType === 'add')) { // already disabled in cell plugins\n                    input.setAttribute('disabled', '');\n                }\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            chkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox) && args.column.type === 'checkbox') {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined, isBlazor, select } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil, Predicate } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n        this.flag = false;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var pred = new Predicate(args.column.field, 'notequal', null, true, false);\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().where(pred).select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            created: this.dropdownCreated.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.query.params = this.parent.query.params;\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.dropdownCreated = function (e) {\n        this.flag = true;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (this.flag && this.column.dataSource) {\n            if ('result' in this.column.dataSource) {\n                this.column.dataSource.result = e.result;\n            }\n            else if (this.column.dataSource instanceof DataManager) {\n                this.column.dataSource.dataSource.json = e.result;\n            }\n        }\n        this.flag = false;\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = select('#' + dlgElement.id, document).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend, Internationalization } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.keyEventHandler = function (args) {\n        if (args.keyCode === 13 || args.keyCode === 9) {\n            var evt = document.createEvent('HTMLEvents');\n            evt.initEvent('change', false, true);\n            /* tslint:disable-next-line:no-any */\n            this.dispatchEvent(evt);\n        }\n    };\n    NumericEditCell.prototype.create = function (args) {\n        var complexFieldName = getComplexFieldID(args.column.field);\n        this.instances = new Internationalization(this.parent.locale);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        return this.obj.value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new NumericTextBox(extend({\n            value: parseFloat(getObject(args.column.field, args.rowData)),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            locale: this.parent.locale,\n        }, col.edit.params));\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n        this.obj.appendTo(args.element);\n        this.obj.element.addEventListener('keydown', this.keyEventHandler);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.element.removeEventListener('keydown', this.keyEventHandler);\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { isEditable, getComplexFieldID } from '../base/util';\nimport { TextBox } from '@syncfusion/ej2-inputs';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = this.parent.createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + getComplexFieldID(col.field), name: getComplexFieldID(col.field),\n                style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new TextBox(extend({\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n            placeholder: isInline ? '' : args.column.headerText,\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    DefaultEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend, isBlazor, select } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { parentsUntil, isGroupAdaptive, refreshForeignData, getObject, gridActionHandler } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.args = {};\n        this.currentVirtualData = {};\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        var action = 'action';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            e.rows = null;\n        }\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    if (e[action] !== 'edit') {\n                        this.parent.selectRow(0);\n                    }\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                if (isBlazor() && !this.parent.isJsComponent) {\n                    var d = 'data';\n                    e[d] = e[d][0];\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                if (!this.parent.isCheckBoxSelection) {\n                    this.parent.selectRow(this.editRowIndex);\n                }\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var _this = this;\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        if (gObj.enableVirtualization || gObj.enableInfiniteScrolling) {\n            var selector = '.e-row[aria-rowindex=\"' + this.rowIndex + '\"]';\n            var virtualRow = this.parent.element.querySelector(selector);\n            if (!virtualRow) {\n                return;\n            }\n        }\n        if (isBlazor()) {\n            var cols = this.parent.getColumns();\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    resetBlazorTemplate(gObj.element.id + col.uid, 'Template', this.rowIndex);\n                }\n            }\n        }\n        if (isGroupAdaptive(gObj)) {\n            var rObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n            this.previousData = rObj.data;\n        }\n        else if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {\n            var e = { data: this.previousData, index: this.rowIndex };\n            this.parent.notify(events.virtualScrollEditActionBegin, e);\n            this.previousData = e.data;\n        }\n        else {\n            this.previousData = extend({}, {}, gObj.getCurrentViewRecords()[this.rowIndex], true);\n        }\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(getObject(primaryKeys[i], this.previousData));\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData, target: undefined\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.row = tr;\n        }\n        gObj.trigger(events.beginEdit, args, function (begineditargs) {\n            begineditargs.type = 'actionBegin';\n            gObj.trigger(events.actionBegin, begineditargs, function (editargs) {\n                if (!editargs.cancel) {\n                    var cloneRow = 'cloneRow';\n                    var frozen = 'frozen';\n                    var cloneFrozen = 'cloneFrozen';\n                    gObj.isEdit = true;\n                    editargs.row = editargs.row ? editargs.row : tr;\n                    if (isBlazor() && gObj.isServerRendered) {\n                        _this.originalRow = editargs.row;\n                        _this.cloneRow = editargs.row.cloneNode(true);\n                        editargs[cloneRow] = _this.cloneRow;\n                    }\n                    if (gObj.editSettings.mode !== 'Dialog') {\n                        gObj.clearSelection();\n                    }\n                    if (gObj.editSettings.mode === 'Dialog' && gObj.selectionModule) {\n                        gObj.selectionModule.preventFocus = true;\n                        editargs.row.classList.add('e-dlgeditrow');\n                    }\n                    _this.renderer.update(editargs);\n                    if (isBlazor()) {\n                        editargs.form = null;\n                        _this.cloneFrozen = editargs[cloneFrozen];\n                        _this.frozen = editargs[frozen];\n                        _this.cloneRow = editargs[cloneRow];\n                        _this.originalRow = editargs.row;\n                    }\n                    _this.uid = tr.getAttribute('data-uid');\n                    gObj.editModule.applyFormValidation();\n                    editargs.type = 'actionComplete';\n                    gObj.trigger(events.actionComplete, editargs);\n                    _this.args = editargs;\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                    if (isBlazor()) {\n                        _this.parent.notify(events.toolbarRefresh, {});\n                        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n                        _this.parent.notify('start-edit', {});\n                    }\n                }\n            });\n        });\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var _this = this;\n        var gObj = this.parent;\n        this.editRowIndex = index;\n        var args = {\n            requestType: 'save', action: 'edit', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index],\n            row: gObj.getRowByIndex(index)\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        if (args.promise) {\n            args.promise.then(function () { return gObj.refresh(); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            gObj.refresh();\n        }\n    };\n    NormalEdit.prototype.editFormValidate = function () {\n        var gObj = this.parent;\n        var form1 = gObj.editModule.formObj.validate();\n        var form2 = gObj.editModule.mFormObj ? gObj.editModule.mFormObj.validate() : true;\n        var form3 = gObj.editModule.frFormObj ? gObj.editModule.frFormObj.validate() : true;\n        return (form1 && form2 && form3);\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !this.editFormValidate()) {\n            return;\n        }\n        var editedData = extend({}, {}, this.previousData, true);\n        var args = extend(this.args, {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        });\n        var index = gObj.getFrozenMode() === 'Right' ? 1 : 0;\n        var isDlg = gObj.editSettings.mode === 'Dialog';\n        var dlgWrapper = select('#' + gObj.element.id + '_dialogEdit_wrapper', document);\n        var dlgForm = isDlg ? dlgWrapper.querySelector('.e-gridform') : gObj.element.querySelectorAll('.e-gridform')[index];\n        var data = { virtualData: {}, isAdd: false };\n        this.parent.notify(events.getVirtualData, data);\n        if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)\n            && this.parent.editSettings.mode === 'Normal' && !dlgForm) {\n            if (this.parent.isEdit) {\n                this.currentVirtualData = editedData = args.data = data.virtualData;\n            }\n        }\n        else {\n            editedData = gObj.editModule.getCurrentEditedData(dlgForm, editedData);\n        }\n        if (gObj.isFrozenGrid() && gObj.editSettings.mode === 'Normal') {\n            var mhdrFrm = gObj.getMovableVirtualHeader().querySelector('.e-gridform');\n            var mCntFrm = gObj.getMovableVirtualContent().querySelector('.e-gridform');\n            var mvblEle = [mhdrFrm || mCntFrm];\n            var frHdrFrm = void 0;\n            var frCntFrm = void 0;\n            var frEle = [];\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                frHdrFrm = gObj.getFrozenRightHeader().querySelector('.e-gridform');\n                frCntFrm = gObj.getFrozenRightContent().querySelector('.e-gridform');\n                frEle = [frHdrFrm || frCntFrm];\n            }\n            gridActionHandler(this.parent, function (tableName, elements) {\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var ele = elements_1[_i];\n                    if (ele) {\n                        editedData = gObj.editModule.getCurrentEditedData(ele, editedData);\n                    }\n                }\n            }, [[], mvblEle, frEle]);\n        }\n        if (isBlazor()) {\n            var form = 'form';\n            var movableForm = 'movableForm';\n            args[form] = null;\n            args[movableForm] = null;\n            args.row = {};\n        }\n        var eleLength = [].slice.call(gObj.element.querySelectorAll('.e-editedrow')).length;\n        if (!data.isAdd && Object.keys(this.currentVirtualData).length && !eleLength) {\n            eleLength = 1;\n        }\n        if (isDlg ? dlgWrapper.querySelectorAll('.e-editedrow').length : eleLength) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args, function (endEditArgs) {\n                if (endEditArgs.cancel) {\n                    return;\n                }\n                gObj.showSpinner();\n                gObj.notify(events.updateData, endEditArgs);\n            });\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.virtualScrollEditSuccess, {});\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        this.parent.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        if (isBlazor() && this.parent.isServerRendered) {\n            var error = 'error';\n            var message = 'message';\n            if (!isNullOrUndefined(e[error]) && !isNullOrUndefined(e[error][message])) {\n                e[error] = e[error][message];\n            }\n        }\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        if (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) {\n            this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n        }\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add' &&\n                this.parent.selectionModule) {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e) && !(e instanceof Array)) {\n            var rowData = 'rowData';\n            args.data = extend({}, extend({}, args[rowData], args.data), e);\n        }\n        var editArgs;\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        if (isBlazor() && this.parent.isServerRendered) {\n            this.closeForm();\n            var rowIndex = 'rowIndex';\n            var action = 'action';\n            var data = 'data';\n            editArgs = { requestType: args.requestType,\n                rowIndex: args[rowIndex], action: args[action], data: args[data] };\n            this.parent.notify('editsuccess', editArgs);\n        }\n        else {\n            this.refreshRow(args.data);\n        }\n        this.parent.notify(events.virtualScrollEditSuccess, args);\n        this.parent.editModule.checkLastRow(args.row);\n        this.parent.editModule.isLastRow = false;\n        this.updateCurrentViewData(args.data);\n        this.blazorTemplate();\n        if (!(isBlazor() && this.parent.isServerRendered)) {\n            this.editRowIndex = null;\n            this.parent.trigger(events.actionComplete, args);\n        }\n        if (isBlazor()) {\n            this.parent.notify(events.toolbarRefresh, {});\n        }\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection) && !this.parent.selectionSettings.checkboxOnly) {\n            if (this.parent.editSettings.mode !== 'Dialog') {\n                if (isBlazor() && this.parent.isServerRendered) {\n                    var rowIndex = 'editRowIndex';\n                    editArgs[rowIndex] = this.rowIndex > -1 ? this.rowIndex : this.editRowIndex;\n                }\n                else {\n                    this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n                }\n            }\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.closeForm = function () {\n        if (!this.cloneRow && this.parent.isEdit) {\n            this.stopEditStatus();\n        }\n        if (this.cloneRow) {\n            this.cloneRow.remove();\n            this.cloneRow = null;\n            this.originalRow.classList.remove('e-hiddenrow');\n        }\n        if (this.parent.isFrozenGrid() && this.cloneFrozen) {\n            this.cloneFrozen.remove();\n            this.frozen.classList.remove('e-hiddenrow');\n        }\n    };\n    NormalEdit.prototype.blazorTemplate = function () {\n        var cols = this.parent.getColumns();\n        if (this.parent.editSettings.template && this.parent.editSettings.mode === 'Normal') {\n            updateBlazorTemplate(this.parent.element.id + 'editSettingsTemplate', 'Template', this.parent.editSettings);\n        }\n        for (var i = 0; i < cols.length; i++) {\n            var col = cols[i];\n            if (col.template) {\n                updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n            }\n            if (col.editTemplate) {\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col);\n            }\n        }\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, ((isBlazor() && e instanceof Array) ? e[0] : { error: e }));\n        this.parent.hideSpinner();\n        this.parent.log('actionfailure', { error: e });\n    };\n    NormalEdit.prototype.needRefresh = function () {\n        var refresh = true;\n        var editedRow = this.parent.element.querySelector('.e-gridform');\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && this.parent.editSettings.mode === 'Normal' && !editedRow) {\n            refresh = false;\n        }\n        return refresh;\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.isFrozenGrid();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            this.parent.notify(events.refreshVirtualCache, data);\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            if (this.needRefresh()) {\n                row.refresh(rowObj, this.parent.getColumns(), true);\n            }\n            var tr = [].slice.call(this.parent.element.querySelectorAll('[aria-rowindex=\"' + rowObj.index + '\"]'));\n            if (frzCols && tr.length) {\n                for (var i = 0; i < tr.length; i++) {\n                    var rowUid = tr[i].getAttribute('data-uid');\n                    if (rowUid !== this.uid) {\n                        rowObj = this.parent.getRowObjectFromUID(rowUid);\n                        rowObj.changes = data;\n                        row.refresh(rowObj, this.parent.getColumns(), true);\n                        this.parent.editModule.checkLastRow(tr[i]);\n                    }\n                }\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        var _this = this;\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = extend(this.args, {\n            requestType: 'cancel', type: events.actionBegin, cancel: false, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        });\n        gObj.notify(events.virtualScrollEditCancel, args);\n        this.blazorTemplate();\n        if (isBlazor()) {\n            var form = 'form';\n            args[form] = null;\n        }\n        gObj.trigger(events.actionBegin, args, function (closeEditArgs) {\n            if (closeEditArgs.cancel) {\n                return;\n            }\n            if (_this.parent.editSettings.mode === 'Dialog') {\n                _this.parent.notify(events.dialogDestroy, {});\n            }\n            gObj.isEdit = false;\n            _this.stopEditStatus();\n            closeEditArgs.type = events.actionComplete;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                if (isBlazor() && gObj.isServerRendered) {\n                    _this.closeForm();\n                }\n                else {\n                    _this.refreshRow(closeEditArgs.data);\n                }\n            }\n            var isLazyLoad = gObj.groupSettings.enableLazyLoading && gObj.groupSettings.columns.length\n                && !gObj.getContentTable().querySelector('tr.e-emptyrow');\n            if (!gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n                !gObj.getContentTable().querySelector('tr.e-row') && !isLazyLoad) {\n                gObj.renderModule.emptyRow();\n            }\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.selectRow(_this.rowIndex);\n            }\n            gObj.trigger(events.actionComplete, closeEditArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('close-edit', {});\n            }\n        });\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var _this = this;\n        var gObj = this.parent;\n        this.addedRowIndex = index = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        var cols = (gObj.columnModel);\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field) {\n                DataUtil.setValue(cols[i].field, cols[i].defaultValue, this.previousData);\n            }\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index,\n            rowData: this.previousData, target: undefined\n        };\n        var rowData = { virtualData: {} };\n        this.parent.notify(events.getVirtualData, rowData);\n        if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache)\n            && Object.keys(rowData.virtualData).length) {\n            args.data = args.rowData = rowData.virtualData;\n        }\n        if (isBlazor()) {\n            var form = 'form';\n            args[form] = null;\n        }\n        gObj.trigger(events.actionBegin, args, function (addArgs) {\n            if (addArgs.cancel) {\n                return;\n            }\n            gObj.isEdit = true;\n            if (gObj.editSettings.mode !== 'Dialog') {\n                gObj.clearSelection();\n            }\n            _this.renderer.addNew(addArgs);\n            gObj.editModule.applyFormValidation();\n            addArgs.type = events.actionComplete;\n            addArgs.row = gObj.element.querySelector('.e-addedrow');\n            gObj.trigger(events.actionComplete, addArgs);\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n            _this.args = addArgs;\n        });\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var _a;\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getObject(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : data[i][fieldname] ? data[i] : (_a = {}, _a[fieldname] = data[i], _a);\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        var args = {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        };\n        if (!isNullOrUndefined(this.parent.commandDelIndex)) {\n            args.data[0] =\n                this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute('data-uid')).data;\n        }\n        if (this.parent.enableVirtualization && args.data.length > 1) {\n            var uid = this.parent.getSelectedRows()[0].getAttribute('data-uid');\n            args.data = [this.parent.getRowObjectFromUID(uid).data];\n        }\n        var dataInString = 'data';\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args[dataInString] = args[dataInString][0];\n        }\n        this.parent.notify(events.modelChanged, args);\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var addElements = [].slice.call(gObj.element.querySelectorAll('.e-addedrow'));\n        var editElements = [].slice.call(gObj.element.querySelectorAll('.e-editedrow'));\n        for (var i = 0; i < addElements.length; i++) {\n            remove(addElements[i]);\n        }\n        for (var i = 0; i < editElements.length; i++) {\n            editElements[i].classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n        this.parent.on(events.rowModeChange, this.closeEdit, this);\n        this.parent.on('closeinline', this.closeForm, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n        this.parent.off(events.rowModeChange, this.closeEdit);\n        this.parent.off('closeinline', this.closeForm);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass, setValue, isBlazor, closest, select } from '@syncfusion/ej2-base';\nimport { remove, classList, updateBlazorTemplate, blazorTemplates, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getObject, alignFrozenEditForm, gridActionHandler } from '../base/util';\nimport { splitFrozenRowObjectCells, getGridRowElements } from '../base/util';\nimport { sliceElements, getCellByColAndRowIndex, getMovableTbody, getFrozenRightTbody } from '../base/util';\nimport { getGridRowObjects } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.originalCell = {};\n        this.cloneCell = {};\n        this.editNext = false;\n        this.preventSaveCell = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.batchCancelFunction = this.batchCancel.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.addEventListener(events.batchCancel, this.batchCancelFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.editNextValCell, this.editNextValCell, this);\n        this.parent.on('closebatch', this.closeForm, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.removeEventListener(events.batchCancel, this.batchCancelFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.editNextValCell, this.editNextValCell);\n        this.parent.off('closebatch', this.closeForm);\n    };\n    BatchEdit.prototype.batchCancel = function (args) {\n        this.parent.focusModule.restoreFocus();\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            if (this.parent.isEdit && closest(this.form, 'td') !== closest(e.target, 'td')) {\n                this.saveCell();\n                this.editNextValCell();\n            }\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenLeftCount();\n        var frzRightCols = this.parent.getFrozenRightColumnsCount();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            if (this.parent.isEdit && clear) {\n                this.saveCell();\n            }\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (frzRightCols) {\n            var frHdr = this.parent.getHeaderContent().querySelector('.e-frozen-right-header');\n            var frCont = this.parent.getContent().querySelector('.e-frozen-right-content');\n            if (frCont.contains(e.element) || (this.parent.frozenRows && frHdr.contains(e.element))) {\n                cellIndex += (frzCols + this.parent.getMovableColumnsCount());\n            }\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    var col = this.parent.getColumns()[e.indexes[1]];\n                    if (col && !this.parent.isEdit) {\n                        this.editCell(e.indexes[0], col.field);\n                    }\n                    if (isEdit || this.parent.isLastCellPrimaryKey) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    var args = { cancel: false, keyArgs: e.keyArgs };\n                    this.parent.notify('beforeFocusCellEdit', args);\n                    if (!args.cancel && isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.closeEdit = function () {\n        var _this = this;\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        var argument = { cancel: false, batchChanges: this.getBatchChanges() };\n        gObj.notify(events.beforeBatchCancel, argument);\n        if (argument.cancel) {\n            return;\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    updateBlazorTemplate(this.parent.element.id + col.uid, 'Template', col, false);\n                }\n            }\n        }\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        var allRows = getGridRowObjects(this.parent);\n        var _loop_1 = function (i) {\n            var isInsert = false;\n            var isDirty = rows[i].isDirty;\n            gridActionHandler(this_1.parent, function (tableName, rows) {\n                isInsert = _this.removeBatchElementChanges(rows[i], isDirty);\n                if (isInsert) {\n                    rows.splice(i, 1);\n                }\n            }, allRows);\n            if (isInsert) {\n                i--;\n            }\n            out_i_1 = i;\n        };\n        var this_1 = this, out_i_1;\n        for (var i = 0; i < rows.length; i++) {\n            _loop_1(i);\n            i = out_i_1;\n        }\n        if (isBlazor() && gObj.isServerRendered) {\n            gObj.selectRow(gObj.selectionModule.prevRowIndex);\n        }\n        if (!gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.renderModule.renderEmptyRow();\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n    };\n    BatchEdit.prototype.removeBatchElementChanges = function (row, isDirty) {\n        var gObj = this.parent;\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var isInstertedRemoved = false;\n        if (isDirty) {\n            row.isDirty = isDirty;\n            var tr = gObj.getRowElementByUID(row.uid);\n            if (tr) {\n                if (tr.classList.contains('e-insertedrow')) {\n                    remove(tr);\n                    isInstertedRemoved = true;\n                }\n                else {\n                    refreshForeignData(row, this.parent.getForeignKeyColumns(), row.data);\n                    delete row.changes;\n                    delete row.edit;\n                    row.isDirty = false;\n                    if (isBlazor() && gObj.isServerRendered) {\n                        this.removeHideAndSelection(tr);\n                        this.closeForm();\n                    }\n                    else {\n                        classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(row, gObj.getColumns(), false);\n                    }\n                }\n                if (this.parent.aggregates.length > 0) {\n                    var type = 'type';\n                    var editType = [];\n                    editType[type] = 'cancel';\n                    this.parent.notify(events.refreshFooterRenderer, editType);\n                    if (this.parent.groupSettings.columns.length > 0) {\n                        this.parent.notify(events.groupAggregates, editType);\n                    }\n                }\n            }\n        }\n        return isInstertedRemoved;\n    };\n    BatchEdit.prototype.removeHideAndSelection = function (tr) {\n        if (tr.classList.contains('e-hiddenrow')) {\n            tr.removeAttribute('aria-selected');\n            var tdElements = [].slice.call(tr.querySelectorAll('.e-selectionbackground'));\n            for (var i = 0; i < tdElements.length; i++) {\n                removeClass([tdElements[i]], ['e-selectionbackground', 'e-active']);\n            }\n        }\n        classList(tr, [], ['e-hiddenrow', 'e-updatedtd']);\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n        if (this.parent.aggregates.length > 0) {\n            this.parent.notify(events.refreshFooterRenderer, {});\n            if (this.parent.groupSettings.columns.length > 0) {\n                this.parent.notify(events.groupAggregates, {});\n            }\n        }\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.closeForm = function () {\n        for (var i = 0; i < Object.keys(this.originalCell).length; i++) {\n            for (var j = 0; j < Object.keys(this.cloneCell).length; j++) {\n                if (Object.keys(this.originalCell)[i] === Object.keys(this.cloneCell)[j]) {\n                    this.cloneCell[Object.keys(this.cloneCell)[j]].replaceWith(this.originalCell[Object.keys(this.originalCell)[i]]);\n                    if (this.originalCell[Object.keys(this.originalCell)[i]].classList.contains('e-selectionbackground')) {\n                        this.originalCell[Object.keys(this.originalCell)[i]]\n                            .classList.remove('e-selectionbackground', 'e-cellselectionbackground', 'e-active');\n                    }\n                }\n            }\n        }\n        this.cloneCell = {};\n        this.originalCell = {};\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var _this = this;\n        var gObj = this.parent;\n        var deletedRecords = 'deletedRecords';\n        if (gObj.isCheckBoxSelection) {\n            var checkAllBox = gObj.element.querySelector('.e-checkselectall').parentElement;\n            if (checkAllBox.classList.contains('e-checkbox-disabled') &&\n                gObj.pageSettings.totalRecordsCount > gObj.currentViewData.length) {\n                removeClass([checkAllBox], ['e-checkbox-disabled']);\n            }\n        }\n        var cols = this.parent.getColumns();\n        if (isBlazor()) {\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                if (col.template) {\n                    blazorTemplates[this.parent.element.id + col.uid] = [];\n                    resetBlazorTemplate(this.parent.element.id + col.uid, 'Template');\n                }\n            }\n        }\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        if (this.parent.selectionSettings.type === 'Multiple' && changes[deletedRecords].length &&\n            this.parent.selectionSettings.persistSelection) {\n            changes[deletedRecords] = this.removeSelectedData;\n            this.removeSelectedData = [];\n        }\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args, function (beforeBatchSaveArgs) {\n            if (beforeBatchSaveArgs.cancel) {\n                return;\n            }\n            if (isBlazor() && _this.parent.isServerRendered) {\n                var content = _this.parent.getContent();\n                _this.closeForm();\n                removeClass(content.querySelectorAll('.e-updatedtd'), ['e-updatedtd']);\n                if (content.querySelector('.e-insertedrow, .e-hiddenrow')) {\n                    removeClass(content.querySelectorAll('.e-hiddenrow'), ['e-hiddenrow']);\n                    var insertedRow = [].slice.call(content.querySelectorAll('.e-insertedrow'));\n                    for (var i = 0; i < insertedRow.length; i++) {\n                        insertedRow[i].remove();\n                    }\n                }\n                _this.refreshRowIdx();\n            }\n            gObj.showSpinner();\n            gObj.notify(events.bulkSave, { changes: changes, original: original });\n        });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        gridActionHandler(this.parent, function (tableName, rows) {\n            rows.splice(i, 1);\n        }, getGridRowObjects(this.parent));\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        var gObj = this.parent;\n        var isTop = gObj.editSettings.newRowPosition === 'Top';\n        gridActionHandler(this.parent, function (tableName, rows) {\n            var rowClone = row.clone();\n            rowClone.cells = splitFrozenRowObjectCells(gObj, rowClone.cells, tableName);\n            isTop ? rows.unshift(rowClone) : rows.push(rowClone);\n        }, getGridRowObjects(this.parent), true);\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var _this = this;\n        this.removeSelectedData = [];\n        var gObj = this.parent;\n        var index = gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            if (data) {\n                args.row = gObj.editModule.deleteRowUid ? gObj.getRowElementByUID(gObj.editModule.deleteRowUid)\n                    : gObj.getRows()[gObj.getCurrentViewRecords().indexOf(data)];\n            }\n            else {\n                args.row = data ? gObj.getRows()[index] : selectedRows[0];\n            }\n            if (!args.row) {\n                return;\n            }\n        }\n        // tslint:disable-next-line:max-func-body-length\n        gObj.trigger(events.beforeBatchDelete, args, function (beforeBatchDeleteArgs) {\n            if (beforeBatchDeleteArgs.cancel) {\n                return;\n            }\n            _this.removeSelectedData = gObj.getSelectedRecords();\n            gObj.clearSelection();\n            beforeBatchDeleteArgs.row = beforeBatchDeleteArgs.row ?\n                beforeBatchDeleteArgs.row : data ? gObj.getRows()[index] : selectedRows[0];\n            if (_this.parent.isFrozenGrid()) {\n                if (data) {\n                    index = parseInt(beforeBatchDeleteArgs.row.getAttribute('aria-rowindex'), 10);\n                    selectedRows = [];\n                    selectedRows.push(gObj.getRowByIndex(index));\n                    selectedRows.push(gObj.getMovableRowByIndex(index));\n                    if (gObj.getFrozenMode() === 'Left-Right') {\n                        selectedRows.push(gObj.getFrozenRightRowByIndex(index));\n                    }\n                }\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        var rowObj = gObj.getRowObjectFromUID(uid);\n                        rowObj.isDirty = true;\n                        rowObj.edit = 'delete';\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getMovableDataRows().length >= gObj.frozenRows) {\n                            gObj.getMovableHeaderTbody().appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                            gObj.getFrozenHeaderTbody().appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                            if (gObj.getFrozenMode() === 'Left-Right') {\n                                gObj.getFrozenRightHeaderTbody().appendChild(gObj.getFrozenRightRowByIndex(gObj.frozenRows - 1));\n                            }\n                        }\n                        if (gObj.frozenRows && index < gObj.frozenRows && gObj.getDataRows().length >= gObj.frozenRows) {\n                            gObj.getHeaderTable().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                        }\n                    }\n                    delete selectedRows[i];\n                }\n            }\n            else if (!_this.parent.isFrozenGrid() && (selectedRows.length === 1 || data)) {\n                var uid = beforeBatchDeleteArgs.row.getAttribute('data-uid');\n                uid = data && _this.parent.editModule.deleteRowUid ? uid = _this.parent.editModule.deleteRowUid : uid;\n                if (beforeBatchDeleteArgs.row.classList.contains('e-insertedrow')) {\n                    _this.removeRowObjectFromUID(uid);\n                    remove(beforeBatchDeleteArgs.row);\n                }\n                else {\n                    var rowObj = gObj.getRowObjectFromUID(uid);\n                    rowObj.isDirty = true;\n                    rowObj.edit = 'delete';\n                    classList(beforeBatchDeleteArgs.row, ['e-hiddenrow', 'e-updatedtd'], []);\n                }\n                delete beforeBatchDeleteArgs.row;\n            }\n            else {\n                for (var i = 0; i < selectedRows.length; i++) {\n                    var uniqueid = selectedRows[i].getAttribute('data-uid');\n                    if (selectedRows[i].classList.contains('e-insertedrow')) {\n                        _this.removeRowObjectFromUID(uniqueid);\n                        remove(selectedRows[i]);\n                    }\n                    else {\n                        classList(selectedRows[i], ['e-hiddenrow', 'e-updatedtd'], []);\n                        var selectedRow = gObj.getRowObjectFromUID(uniqueid);\n                        selectedRow.isDirty = true;\n                        selectedRow.edit = 'delete';\n                        delete selectedRows[i];\n                    }\n                }\n            }\n            _this.refreshRowIdx();\n            if (data) {\n                gObj.editModule.deleteRowUid = undefined;\n                if (gObj.getSelectedRows().length) {\n                    index = parseInt(gObj.getSelectedRows()[0].getAttribute('aria-rowindex'), 10);\n                }\n            }\n            if (!gObj.isCheckBoxSelection) {\n                gObj.selectRow(index);\n            }\n            gObj.trigger(events.batchDelete, beforeBatchDeleteArgs);\n            gObj.notify(events.batchDelete, { rows: _this.parent.getRowsObject() });\n            gObj.notify(events.toolbarRefresh, {});\n        });\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var gObj = this.parent;\n        var rows = gObj.getAllDataRows(true);\n        var dataRows = getGridRowElements(this.parent);\n        var dataObjects = getGridRowObjects(this.parent);\n        var _loop_2 = function (i, j, len) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                gridActionHandler(this_2.parent, function (tableName, rowElements, rowObjects) {\n                    rowElements[i].setAttribute('aria-rowindex', j.toString());\n                    rowObjects[i].index = j;\n                }, dataRows, null, dataObjects);\n                j++;\n            }\n            else {\n                gridActionHandler(this_2.parent, function (tableName, rowElements, rowObjects) {\n                    rowElements[i].removeAttribute('aria-rowindex');\n                    rowObjects[i].index = -1;\n                }, dataRows, null, dataObjects);\n            }\n            out_j_1 = j;\n        };\n        var this_2 = this, out_j_1;\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            _loop_2(i, j, len);\n            j = out_j_1;\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    // tslint:disable-next-line:max-func-body-length\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var _this = this;\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.parent.element.classList.add('e-editing');\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args, function (beforeBatchAddArgs) {\n            if (beforeBatchAddArgs.cancel) {\n                return;\n            }\n            _this.isAdded = true;\n            gObj.clearSelection();\n            var mTr;\n            var frTr;\n            var row = new RowRenderer(_this.serviceLocator, null, _this.parent);\n            var model = new RowModelGenerator(_this.parent);\n            var modelData = model.generateRows([beforeBatchAddArgs.defaultData]);\n            var tr = row.render(modelData[0], gObj.getColumns());\n            var col;\n            var index;\n            for (var i = 0; i < _this.parent.groupSettings.columns.length; i++) {\n                tr.insertBefore(_this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n                modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n            }\n            var tbody = gObj.getContentTable().querySelector('tbody');\n            tr.classList.add('e-insertedrow');\n            if (tbody.querySelector('.e-emptyrow')) {\n                var emptyRow = tbody.querySelector('.e-emptyrow');\n                emptyRow.parentNode.removeChild(emptyRow);\n                _this.removeFrozenTbody();\n            }\n            if (gObj.isFrozenGrid()) {\n                frTr = tr.cloneNode(true);\n                mTr = _this.renderMovable(tr, frTr);\n                tr = gObj.getFrozenMode() === 'Right' ? frTr : tr;\n                _this.renderFrozenAddRow(tr, mTr, frTr);\n            }\n            if (gObj.frozenRows && gObj.editSettings.newRowPosition === 'Top') {\n                tbody = gObj.getHeaderTable().querySelector('tbody');\n            }\n            else {\n                tbody = gObj.getContentTable().querySelector('tbody');\n            }\n            _this.parent.editSettings.newRowPosition === 'Top' ? tbody.insertBefore(tr, tbody.firstChild) : tbody.appendChild(tr);\n            addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            modelData[0].isDirty = true;\n            modelData[0].changes = extend({}, {}, modelData[0].data, true);\n            modelData[0].edit = 'add';\n            _this.addRowObject(modelData[0]);\n            _this.refreshRowIdx();\n            _this.focus.forgetPrevious();\n            gObj.notify(events.batchAdd, { rows: _this.parent.getRowsObject(), args: { isFrozen: _this.parent.isFrozenGrid() } });\n            var changes = _this.getBatchChanges();\n            var addedRecords = 'addedRecords';\n            var dRecords = 'deletedRecords';\n            var btmIdx = _this.parent.getCurrentViewRecords().length + changes[addedRecords].length - changes[dRecords].length - 1;\n            _this.parent.editSettings.newRowPosition === 'Top' ? gObj.selectRow(0) : gObj.selectRow(btmIdx);\n            if (!data) {\n                index = _this.findNextEditableCell(0, true);\n                col = gObj.getColumns()[index];\n                _this.parent.editSettings.newRowPosition === 'Top' ? _this.editCell(0, col.field, true) :\n                    _this.editCell(btmIdx, col.field, true);\n            }\n            if (_this.parent.aggregates.length > 0 && (data || changes[addedRecords].length)) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n            }\n            var args1 = {\n                defaultData: beforeBatchAddArgs.defaultData, row: tr,\n                columnObject: col, columnIndex: index, primaryKey: beforeBatchAddArgs.primaryKey, cell: tr.cells[index]\n            };\n            gObj.trigger(events.batchAdd, args1);\n            if (gObj.isFrozenGrid()) {\n                alignFrozenEditForm(mTr.querySelector('td:not(.e-hide)'), tr.querySelector('td:not(.e-hide)'));\n            }\n            if (isBlazor()) {\n                _this.parent.notify(events.toolbarRefresh, {});\n                _this.parent.notify('start-add', {});\n            }\n        });\n    };\n    BatchEdit.prototype.renderFrozenAddRow = function (tr, mTr, frTr) {\n        var gObj = this.parent;\n        var mTbody = getMovableTbody(this.parent);\n        var frTbody = getFrozenRightTbody(this.parent);\n        gObj.editSettings.newRowPosition === 'Top' ? mTbody.insertBefore(mTr, mTbody.firstChild) : mTbody.appendChild(mTr);\n        addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n        if (frTbody && frTr) {\n            gObj.editSettings.newRowPosition === 'Top' ? frTbody.insertBefore(frTr, frTbody.firstChild)\n                : frTbody.appendChild(frTr);\n            addClass(frTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            alignFrozenEditForm(frTr.querySelector('td:not(.e-hide)'), tr.querySelector('td:not(.e-hide)'));\n        }\n        if (gObj.height === 'auto') {\n            gObj.notify(events.frozenHeight, {});\n        }\n    };\n    BatchEdit.prototype.removeFrozenTbody = function () {\n        var gObj = this.parent;\n        if (gObj.isFrozenGrid()) {\n            var moveTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            (moveTbody.firstElementChild).parentNode.removeChild(moveTbody.firstElementChild);\n            if (gObj.getFrozenMode() === 'Left-Right') {\n                var frTbody = gObj.getContent().querySelector('.e-frozen-right-content').querySelector('tbody');\n                (frTbody.firstElementChild).parentNode.removeChild(frTbody.firstElementChild);\n            }\n        }\n    };\n    BatchEdit.prototype.renderMovable = function (ele, rightEle) {\n        var mEle = ele.cloneNode(true);\n        var movable = this.parent.getMovableColumnsCount();\n        var left = this.parent.getFrozenLeftCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        sliceElements(ele, 0, left);\n        sliceElements(mEle, left, right ? mEle.children.length - right : mEle.children.length);\n        sliceElements(rightEle, left + movable, rightEle.children.length);\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = (gObj.columnModel); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.field) {\n                setValue(col.field, col.defaultValue ? col.defaultValue : dValues[col.type], data);\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.getAttribute('index'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        this.index = index;\n        this.field = field;\n        this.isAdd = isAdd;\n        var checkEdit = gObj.isEdit && !(this.cellDetails.column.field === field\n            && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index));\n        if (isBlazor() && col.template && !isAdd) {\n            resetBlazorTemplate(this.parent.element.id + col.uid, 'Template', index);\n        }\n        if (gObj.editSettings.allowEditing) {\n            if (!checkEdit && col.allowEditing) {\n                this.editCellExtend(index, field, isAdd);\n            }\n            else if (checkEdit) {\n                this.editNext = true;\n                this.saveCell();\n            }\n        }\n    };\n    BatchEdit.prototype.editCellExtend = function (index, field, isAdd) {\n        var _this = this;\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.isEdit) {\n            return;\n        }\n        var row;\n        var mRowData;\n        var rowData = extend({}, {}, this.getDataByIndex(index), true);\n        if (col.getFreezeTableName() === 'movable' || col.getFreezeTableName() === 'frozen-right') {\n            row = col.getFreezeTableName() === 'movable' ? gObj.getMovableDataRows()[index] : gObj.getFrozenRightDataRows()[index];\n            mRowData = this.parent.getRowObjectFromUID(row.getAttribute('data-uid'));\n            rowData = mRowData.changes ? extend({}, {}, mRowData.changes, true) : rowData;\n        }\n        else {\n            row = gObj.getDataRows()[index];\n            rowData = extend({}, {}, this.getDataByIndex(index), true);\n        }\n        if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.columns ||\n            (col.isPrimaryKey && col.isIdentity)) {\n            this.parent.isLastCellPrimaryKey = true;\n            return;\n        }\n        this.parent.isLastCellPrimaryKey = false;\n        this.parent.element.classList.add('e-editing');\n        var rowObj = gObj.getRowObjectFromUID(row.getAttribute('data-uid'));\n        var cells = [].slice.apply(row.cells);\n        var args = {\n            columnName: col.field, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n            primaryKey: keys, rowData: rowData,\n            validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n            value: getObject(col.field, rowData),\n            type: !isAdd ? 'edit' : 'add', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = cells[this.getColIndex(cells, this.getCellIdx(col.uid))];\n            args.row = row;\n            args.columnObject = col;\n            if (!args.cell) {\n                return;\n            }\n        }\n        gObj.trigger(events.cellEdit, args, function (cellEditArgs) {\n            if (cellEditArgs.cancel) {\n                return;\n            }\n            cellEditArgs.cell = cellEditArgs.cell ? cellEditArgs.cell : cells[_this.getColIndex(cells, _this.getCellIdx(col.uid))];\n            cellEditArgs.row = cellEditArgs.row ? cellEditArgs.row : row;\n            cellEditArgs.columnObject = cellEditArgs.columnObject ? cellEditArgs.columnObject : col;\n            cellEditArgs.columnObject.index = isNullOrUndefined(cellEditArgs.columnObject.index) ? 0 : cellEditArgs.columnObject.index;\n            _this.cellDetails = {\n                rowData: rowData, column: col, value: cellEditArgs.value, isForeignKey: cellEditArgs.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(cellEditArgs.cell.getAttribute('aria-colindex'), 10),\n                foreignKeyData: cellEditArgs.foreignKeyData\n            };\n            if (cellEditArgs.cell.classList.contains('e-updatedtd')) {\n                _this.isColored = true;\n                cellEditArgs.cell.classList.remove('e-updatedtd');\n            }\n            if (isBlazor() && gObj.isServerRendered) {\n                var cell = 'cells';\n                var cloneCell = 'cloneCell';\n                var indent = cellEditArgs.row.querySelectorAll('.e-indentcell, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop').length;\n                _this.cloneCell[\"\" + _this.cellDetails.rowIndex + cellEditArgs.columnObject.index] =\n                    cellEditArgs[cloneCell] = cellEditArgs.cell.cloneNode(true);\n                if ((parentsUntil(cellEditArgs.cell, 'e-movableheader') || parentsUntil(cellEditArgs.cell, 'e-movablecontent'))) {\n                    cellEditArgs.row.insertCell(cellEditArgs.columnObject.index - gObj.getFrozenColumns());\n                    cellEditArgs.row.replaceChild(cellEditArgs[cloneCell], cellEditArgs.row[cell][cellEditArgs.columnObject.index - gObj.getFrozenColumns()]);\n                }\n                else {\n                    cellEditArgs.row.insertCell(cellEditArgs.columnObject.index + indent);\n                    cellEditArgs.row.replaceChild(cellEditArgs[cloneCell], cellEditArgs.row[cell][cellEditArgs.columnObject.index + indent]);\n                }\n                _this.originalCell[\"\" + _this.cellDetails.rowIndex + cellEditArgs.columnObject.index] =\n                    cellEditArgs.cell.parentElement.removeChild(cellEditArgs.cell);\n                removeClass([_this.cloneCell[\"\" + _this.cellDetails.rowIndex + cellEditArgs.columnObject.index]], ['e-focus', 'e-focused']);\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                gObj.selectRow(_this.cellDetails.rowIndex, true);\n            }\n            _this.renderer.update(cellEditArgs);\n            _this.parent.notify(events.batchEditFormRendered, cellEditArgs);\n            _this.form = select('#' + gObj.element.id + 'EditForm', gObj.element);\n            gObj.editModule.applyFormValidation([col]);\n            _this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        });\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var index = gObj.getColumnIndexByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = getCellByColAndRowIndex(this.parent, col, rowIndex, index);\n            var rowObj = col.getFreezeTableName() === 'movable' ? this.parent.getMovableRowsObject()[rowIndex] :\n                col.getFreezeTableName() === 'frozen-right' ? gObj.getFrozenRightRowsObject()[rowIndex]\n                    : gObj.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value, td) {\n        var currentRowObj;\n        if (!this.parent.isFrozenGrid()) {\n            if (!rowObj.changes) {\n                rowObj.changes = extend({}, {}, rowObj.data, true);\n            }\n            if (!isNullOrUndefined(field)) {\n                DataUtil.setValue(field, value, rowObj.changes);\n            }\n            if (rowObj.data[field] !== value) {\n                rowObj.isDirty = true;\n            }\n        }\n        else {\n            var rowEle = this.parent.getRowElementByUID(rowObj.uid);\n            var rowIndex = parseInt(rowEle.getAttribute('aria-rowindex'), 10);\n            currentRowObj = this.parent.getRowsObject()[rowIndex];\n            if (!currentRowObj.changes) {\n                currentRowObj.changes = extend({}, {}, rowObj.data, true);\n            }\n            if (!isNullOrUndefined(field)) {\n                setValue(field, value, currentRowObj.changes);\n            }\n            var movableRowObject = void 0;\n            if (isBlazor() && this.parent.isServerRendered && (parentsUntil(td, 'e-movableheader') ||\n                parentsUntil(td, 'e-movablecontent'))) {\n                var movRowEle = this.parent.getMovableRowByIndex(this.cellDetails.rowIndex);\n                var movRowIndex = parseInt(movRowEle.getAttribute('aria-rowindex'), 10);\n                movableRowObject = this.parent.getMovableRowsObject()[movRowIndex];\n            }\n            else {\n                movableRowObject = this.parent.getMovableRowsObject()[rowIndex];\n            }\n            movableRowObject.changes = extend({}, {}, currentRowObj.changes, true);\n            if (rowObj.data[field] !== value) {\n                movableRowObject.isDirty = true;\n                currentRowObj.isDirty = true;\n            }\n            if (this.parent.getFrozenMode() === 'Left-Right') {\n                var frRowObject = this.parent.getFrozenRightRowsObject()[rowIndex];\n                frRowObject.changes = extend({}, {}, currentRowObj.changes, true);\n                if (rowObj.data[field] !== value) {\n                    frRowObject.isDirty = true;\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        value = column.type === 'number' && !isNullOrUndefined(value) ? parseFloat(value) : value;\n        this.setChanges(rowObj, column.field, value, td);\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()\n            || this.parent.getFrozenRightColumnsCount();\n        frzCols = frzCols && this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && column.getFreezeTableName() === 'movable' && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        var parentElement;\n        var cellIndex;\n        if (this.parent.isReact) {\n            parentElement = td.parentElement;\n            cellIndex = td.cellIndex;\n        }\n        var index = 0;\n        if (frzCols) {\n            index = column.getFreezeTableName() === 'movable' && this.parent.getFrozenMode() !== 'Right'\n                ? frzCols : column.getFreezeTableName() === 'frozen-right'\n                ? this.parent.getFrozenLeftColumnsCount() + this.parent.getMovableColumnsCount() : index;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - index], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        if (this.parent.isReact) {\n            this.newReactTd = parentElement.cells[cellIndex];\n            parentElement.cells[cellIndex].classList.add('e-updatedtd');\n        }\n        else {\n            td.classList.add('e-updatedtd');\n        }\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        if (this.parent.isRowDragable()) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        var changes = this.getBatchChanges();\n        var addedRecords = 'addedRecords';\n        var dRecords = 'deletedRecords';\n        var btmIdx = (this.parent.getCurrentViewRecords().length + changes[addedRecords].length - changes[dRecords].length) - 1;\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    if (this.parent.editSettings.newRowPosition === 'Bottom') {\n                        this.editCell(btmIdx, col.field, true);\n                    }\n                    else {\n                        var args = { index: 0, column: col };\n                        this.parent.notify(events.nextCellIndex, args);\n                        this.editCell(args.index, col.field, true);\n                    }\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.escapeCellEdit = function () {\n        var args = this.generateCellArgs();\n        args.value = args.previousValue;\n        this.successCallBack(args, args.cell.parentElement, args.column, true)(args);\n    };\n    BatchEdit.prototype.generateCellArgs = function () {\n        var gObj = this.parent;\n        this.parent.element.classList.remove('e-editing');\n        var column = this.cellDetails.column;\n        var obj = {};\n        obj[column.field] = getObject(column.field, this.cellDetails.rowData);\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, obj);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        var value = getObject(column.field, cloneEditedData);\n        if (!isNullOrUndefined(column.field) && !isUndefined(value)) {\n            setValue(column.field, value, editedData);\n        }\n        var args = {\n            columnName: column.field,\n            value: getObject(column.field, editedData),\n            rowData: this.cellDetails.rowData,\n            column: column,\n            previousValue: this.cellDetails.value,\n            isForeignKey: this.cellDetails.isForeignKey,\n            cancel: false\n        };\n        if (!isBlazor() || this.parent.isJsComponent) {\n            args.cell = this.form.parentElement;\n            args.columnObject = column;\n        }\n        return args;\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        if (this.preventSaveCell || !this.form) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        this.preventSaveCell = true;\n        var args = this.generateCellArgs();\n        var tr = isBlazor() ? parentsUntil(this.form, 'e-row') : args.cell.parentElement;\n        var col = isBlazor() ? this.cellDetails.column : args.column;\n        if (isBlazor()) {\n            delete args.column;\n        }\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args, this.successCallBack(args, tr, col));\n            gObj.notify(events.batchForm, { formObj: this.form });\n        }\n        else {\n            this.successCallBack(args, tr, col)(args);\n        }\n    };\n    BatchEdit.prototype.successCallBack = function (cellSaveArgs, tr, column, isEscapeCellEdit) {\n        var _this = this;\n        return function (cellSaveArgs) {\n            var gObj = _this.parent;\n            cellSaveArgs.cell = cellSaveArgs.cell ? cellSaveArgs.cell : _this.form.parentElement;\n            cellSaveArgs.columnObject = cellSaveArgs.columnObject ? cellSaveArgs.columnObject : column;\n            cellSaveArgs.columnObject.index = isNullOrUndefined(cellSaveArgs.columnObject.index) ? 0 : cellSaveArgs.columnObject.index;\n            if (cellSaveArgs.cancel) {\n                _this.preventSaveCell = false;\n                if (_this.editNext) {\n                    _this.editNext = false;\n                    if (_this.cellDetails.rowIndex === _this.index && _this.cellDetails.column.field === _this.field) {\n                        return;\n                    }\n                    _this.editCellExtend(_this.index, _this.field, _this.isAdd);\n                }\n                return;\n            }\n            gObj.editModule.destroyWidgets([column]);\n            gObj.isEdit = false;\n            gObj.editModule.destroyForm();\n            if (isBlazor() && column.template && !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow')) {\n                updateBlazorTemplate(gObj.element.id + column.uid, 'Template', column, false);\n            }\n            _this.parent.notify(events.tooltipDestroy, {});\n            if (isBlazor() && gObj.isServerRendered && (parentsUntil(cellSaveArgs.cell, 'e-movableheader') ||\n                parentsUntil(cellSaveArgs.cell, 'e-movablecontent'))) {\n                _this.refreshTD(cellSaveArgs.cell, column, gObj.getMovableRowsObject()[_this.cellDetails.rowIndex], cellSaveArgs.value);\n            }\n            else {\n                var rowObj = parentsUntil(cellSaveArgs.cell, 'e-movablecontent')\n                    || parentsUntil(cellSaveArgs.cell, 'e-movableheader') ? gObj.getRowObjectFromUID(tr.getAttribute('data-uid'), true)\n                    : gObj.getRowObjectFromUID(tr.getAttribute('data-uid'));\n                if (gObj.getFrozenMode() === 'Left-Right' && (parentsUntil(cellSaveArgs.cell, 'e-frozen-right-header')\n                    || parentsUntil(cellSaveArgs.cell, 'e-frozen-right-content'))) {\n                    rowObj = gObj.getRowObjectFromUID(tr.getAttribute('data-uid'), false, true);\n                }\n                _this.refreshTD(cellSaveArgs.cell, column, rowObj, cellSaveArgs.value);\n                if (_this.parent.isReact) {\n                    cellSaveArgs.cell = _this.newReactTd;\n                }\n            }\n            removeClass([tr], ['e-editedrow', 'e-batchrow']);\n            removeClass([cellSaveArgs.cell], ['e-editedbatchcell', 'e-boolcell']);\n            if (!isNullOrUndefined(cellSaveArgs.value) && cellSaveArgs.value.toString() ===\n                (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString() && !_this.isColored\n                || (isNullOrUndefined(cellSaveArgs.value) && isNullOrUndefined(_this.cellDetails.value) &&\n                    !cellSaveArgs.cell.parentElement.classList.contains('e-insertedrow'))) {\n                cellSaveArgs.cell.classList.remove('e-updatedtd');\n                if (isBlazor() && gObj.isServerRendered && (!isNullOrUndefined(cellSaveArgs.value) ? cellSaveArgs.value : '').toString() ===\n                    (!isNullOrUndefined(_this.cellDetails.value) ? _this.cellDetails.value : '').toString()) {\n                    if (_this.cloneCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index].\n                        classList.contains('e-selectionbackground')) {\n                        _this.originalCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index].\n                            classList.add('e-selectionbackground', 'e-active');\n                    }\n                    else {\n                        _this.originalCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index].\n                            classList.remove('e-selectionbackground', 'e-active');\n                    }\n                    _this.cloneCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs.columnObject.index]\n                        .replaceWith(_this.originalCell[\"\" + parseInt(tr.getAttribute('aria-rowindex'), 10) + cellSaveArgs\n                        .columnObject.index]);\n                }\n            }\n            if (isNullOrUndefined(isEscapeCellEdit)) {\n                gObj.trigger(events.cellSaved, cellSaveArgs);\n            }\n            gObj.notify(events.toolbarRefresh, {});\n            _this.isColored = false;\n            if (_this.parent.aggregates.length > 0) {\n                _this.parent.notify(events.refreshFooterRenderer, {});\n                if (_this.parent.groupSettings.columns.length > 0 && !_this.isAddRow(_this.cellDetails.rowIndex)) {\n                    _this.parent.notify(events.groupAggregates, {});\n                }\n            }\n            _this.preventSaveCell = false;\n            if (_this.editNext) {\n                _this.editNext = false;\n                if (_this.cellDetails.rowIndex === _this.index && _this.cellDetails.column.field === _this.field) {\n                    return;\n                }\n                var col = gObj.getColumnByField(_this.field);\n                if (col && col.allowEditing) {\n                    _this.editCellExtend(_this.index, _this.field, _this.isAdd);\n                }\n            }\n            if (isEscapeCellEdit) {\n                gObj.notify(events.restoreFocus, {});\n            }\n        };\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if ((e.action === 'tab' || e.action === 'shiftTab') && this.parent.isEdit) {\n            var gObj = this.parent;\n            var changes = this.getBatchChanges();\n            var addedRecords = 'addedRecords';\n            var dRecords = 'deletedRecords';\n            var btmIdx = (this.parent.getCurrentViewRecords().length + changes[addedRecords].length - changes[dRecords].length) - 1;\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    var columnIndex = e.action === 'tab' ? visibleColumns.length - 1 : 0;\n                    if (visibleColumns[columnIndex].field === cell.getAttribute('id').slice(this.parent.element.id.length)) {\n                        if (this.cellDetails.rowIndex === btmIdx && e.action === 'tab') {\n                            if (gObj.editSettings.newRowPosition === 'Top') {\n                                gObj.editSettings.newRowPosition = 'Bottom';\n                                this.addRecord();\n                                gObj.editSettings.newRowPosition = 'Top';\n                            }\n                            else {\n                                this.addRecord();\n                            }\n                        }\n                        else {\n                            this.saveCell();\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addCancelWhilePaging = function () {\n        if (this.validateFormObj()) {\n            this.parent.notify(events.destroyForm, {});\n            this.parent.isEdit = false;\n            this.isColored = false;\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","/**\n * `TemplateEditCell` is used to handle template cell.\n * @hidden\n */\nvar TemplateEditCell = /** @class */ (function () {\n    function TemplateEditCell(parent) {\n        this.parent = parent;\n    }\n    TemplateEditCell.prototype.read = function (element, value) {\n        return value;\n    };\n    TemplateEditCell.prototype.write = function () {\n        //\n    };\n    TemplateEditCell.prototype.destroy = function () {\n        //\n    };\n    return TemplateEditCell;\n}());\nexport { TemplateEditCell };\n","import { closest, addClass, select } from '@syncfusion/ej2-base';\nimport { extend, getValue, resetBlazorTemplate, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, getComplexFieldID, setComplexFieldID, getScrollBarWidth, setValidationRuels } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { TemplateEditCell } from '../renderer/template-edit-cell';\nimport { DataUtil } from '@syncfusion/ej2-data';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editSettings.template || cols[i].editTemplate) {\n                var templteCell = 'templateedit';\n                cols[i].edit = extend(new Edit.editCellType[templteCell](this.parent), cols[i].edit || {});\n            }\n            else {\n                cols[i].edit = extend(new Edit.editCellType[cols[i].editType && Edit.editCellType[cols[i].editType] ?\n                    cols[i].editType : 'defaultedit'](this.parent, this.serviceLocator), cols[i].edit || {});\n            }\n        }\n        this.parent.log('primary_column_missing');\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        this.parent.element.classList.add('e-editing');\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        this.isLastRow = tr.rowIndex === this.parent.getContent().querySelector('tr:last-child').rowIndex;\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            this.parent.notify('start-edit', {});\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.checkLastRow = function (tr, args) {\n        var checkLastRow = this.isLastRow;\n        if (this.parent.height !== 'auto' && this.parent.editSettings.newRowPosition === 'Bottom' && args &&\n            args.requestType === 'add' && this.parent.height > this.parent.getContentTable().scrollHeight) {\n            addClass(tr.querySelectorAll('.e-rowcell'), 'e-lastrowadded');\n        }\n        else if (checkLastRow && tr && tr.classList) {\n            addClass(tr.querySelectorAll('.e-rowcell'), 'e-lastrowcell');\n        }\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.parent.element.classList.remove('e-editing');\n        this.editModule.closeEdit();\n        if (!isBlazor()) {\n            this.refreshToolbar();\n            this.parent.notify('close-edit', {});\n        }\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        var args = { startEdit: true };\n        if (!data) {\n            this.parent.notify(events.virtualScrollAddActionBegin, args);\n        }\n        if (args.startEdit) {\n            this.parent.element.classList.add('e-editing');\n            this.editModule.addRecord(data, index);\n            if (!isBlazor()) {\n                this.refreshToolbar();\n                this.parent.notify('start-add', {});\n            }\n        }\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length && isNullOrUndefined(gObj.commandDelIndex)) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRowUid = tr.getAttribute('data-uid');\n        var rowObj = this.parent.getRowObjectFromUID(this.deleteRowUid);\n        if (!isNullOrUndefined(rowObj)) {\n            this.deleteRecord(null, rowObj.data);\n        }\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.parent.element.classList.remove('e-editing');\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') || value === true ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepickeredit' && col.editType !== 'datetimepickeredit'\n                    && value && value.length) {\n                    val = new Date(value);\n                }\n                else if (value === '') {\n                    val = null;\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        var isStringTemplate = 'isStringTemplate';\n        obj[isStringTemplate] = true;\n        obj.appendTo(div);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.parent.focusModule.clearIndicator();\n        this.parent.focusModule.restoreFocus();\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                if (this.parent.editSettings.mode === 'Batch') {\n                    this.editModule.addCancelWhilePaging();\n                    if (isBlazor() && this.parent.isServerRendered) {\n                        this.editModule.closeEdit();\n                    }\n                }\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        if (e.requestType === 'batchsave') {\n            this.parent.focusModule.restoreFocus();\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            var elements = [].slice.call(form.elements);\n            for (var k = 0; k < elements.length; k++) {\n                if ((elements[k].hasAttribute('name') && (elements[k].className !== 'e-multi-hidden')) ||\n                    elements[k].classList.contains('e-multiselect')) {\n                    var field = (elements[k].hasAttribute('name')) ? setComplexFieldID(elements[k].getAttribute('name')) :\n                        setComplexFieldID(elements[k].getAttribute('id'));\n                    var column = gObj.getColumnByField(field) || { field: field, type: elements[k].getAttribute('type') };\n                    var value = void 0;\n                    if (column.type === 'checkbox' || column.type === 'boolean') {\n                        value = elements[k].checked;\n                    }\n                    else if (elements[k].value) {\n                        value = elements[k].value;\n                        if (elements[k].ej2_instances &&\n                            elements[k].ej2_instances.length &&\n                            !isNullOrUndefined(elements[k].ej2_instances[0].value)) {\n                            elements[k].blur();\n                            value = elements[k].ej2_instances[0].value;\n                            if ((column.type === 'date' || column.type === 'dateTime' || column.type === 'datetime') &&\n                                (elements[k].ej2_instances[0].isServerRendered)) {\n                                value = elements[k].value;\n                            }\n                        }\n                    }\n                    else if (elements[k].ej2_instances) {\n                        value = elements[k].ej2_instances[0].value;\n                    }\n                    if (column.edit && typeof column.edit.read === 'string') {\n                        value = getValue(column.edit.read, window)(elements[k], value);\n                    }\n                    else if (column.edit && column.edit.read) {\n                        value = column.edit.read(elements[k], value);\n                    }\n                    value = gObj.editModule.getValueFromType(column, value);\n                    if (elements[k].type === 'radio') {\n                        if (elements[k].checked) {\n                            DataUtil.setValue(column.field, value, editedData);\n                        }\n                    }\n                    else {\n                        DataUtil.setValue(column.field, value, editedData);\n                    }\n                }\n            }\n            return editedData;\n        }\n        var col = gObj.columnModel.filter(function (col) { return col.editTemplate; });\n        for (var j = 0; j < col.length; j++) {\n            if (form[getComplexFieldID(col[j].field)]) {\n                var inputElements = [].slice.call(form[getComplexFieldID(col[j].field)]);\n                inputElements = inputElements.length ? inputElements : [form[getComplexFieldID(col[j].field)]];\n                var temp = inputElements.filter(function (e) {\n                    return !isNullOrUndefined((e.ej2_instances));\n                });\n                if (temp.length === 0) {\n                    temp = inputElements.filter(function (e) { return e.hasAttribute('name'); });\n                }\n                for (var k = 0; k < temp.length; k++) {\n                    var value = this.getValue(col[j], temp[k], editedData);\n                    DataUtil.setValue(col[j].field, value, editedData);\n                }\n            }\n        }\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col_1 = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            if (col_1 && col_1.field) {\n                var value = this.getValue(col_1, inputs[i], editedData);\n                DataUtil.setValue(col_1.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    Edit.prototype.getValue = function (col, input, editedData) {\n        var value = input.ej2_instances &&\n            !(isBlazor() && input.ej2_instances[0].isServerRendered\n                && (col.type === 'date' || col.type === 'datetime')) ?\n            input.ej2_instances[0].value : input.value;\n        var gObj = this.parent;\n        var temp = col.edit.read;\n        if (col.type === 'checkbox' || col.type === 'boolean') {\n            value = input.checked;\n        }\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n            value = gObj.editModule.getValueFromType(col, (temp)(input, value));\n        }\n        else {\n            value = gObj.editModule.getValueFromType(col, col.edit.read(input, value));\n        }\n        if (isNullOrUndefined(editedData[col.field]) && value === '') {\n            value = editedData[col.field];\n        }\n        return value;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        if (e.requestType === 'columnstate' && this.parent.isEdit\n            && this.parent.editSettings.mode !== 'Batch') {\n            this.closeEdit();\n        }\n        else {\n            var editRow = this.parent.element.querySelector('.e-editedrow');\n            if (editRow && this.parent.frozenRows && e.requestType === 'virtualscroll'\n                && parseInt(parentsUntil(editRow, 'e-row').getAttribute('aria-rowindex'), 10) < this.parent.frozenRows) {\n                return;\n            }\n            var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save', 'infiniteScroll'];\n            if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n                && restrictedRequestTypes.indexOf(e.requestType) === -1 && !e.cancel) {\n                this.destroyWidgets();\n                this.destroyForm();\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        var gObj = this.parent;\n        if (gObj.editSettings.template) {\n            this.parent.destroyTemplate(['editSettingsTemplate']);\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        cols = cols ? cols : this.parent.getVisibleColumns();\n        if (cols.some(function (column) { return !isNullOrUndefined(column.editTemplate); })) {\n            this.parent.destroyTemplate(['editTemplate']);\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (isBlazor() && col.editTemplate) {\n                resetBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate');\n                updateBlazorTemplate(this.parent.element.id + col.uid + 'editTemplate', 'EditTemplate', col, false);\n            }\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n        var elements = [].slice.call(this.formObj.element.elements);\n        for (var i = 0; i < elements.length; i++) {\n            if (elements[i].hasAttribute('name')) {\n                if (elements[i].ej2_instances &&\n                    elements[i].ej2_instances.length &&\n                    !elements[i].ej2_instances[0].isDestroyed) {\n                    elements[i].ej2_instances[0].destroy();\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, 'e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                if (this.parent.isEdit) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        this.editModule.escapeCellEdit();\n                    }\n                    else {\n                        this.closeEdit();\n                    }\n                }\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.isFrozenGrid();\n        var isInline = this.parent.editSettings.mode === 'Normal';\n        var idx = this.parent.getFrozenMode() === 'Right' && isInline ? 1 : 0;\n        var form = this.parent.editSettings.mode !== 'Dialog' ?\n            gObj.element.querySelectorAll('.e-gridform')[idx] :\n            select('#' + gObj.element.id + '_dialogEdit_wrapper .e-gridform', document);\n        var index = this.parent.getFrozenMode() === 'Right' && isInline ? 0 : 1;\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[index];\n        var rules = {};\n        var mRules = {};\n        var frRules = {};\n        cols = cols ? cols : gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible) {\n                continue;\n            }\n            if (isBlazor() && cols[i].editTemplate) {\n                continue;\n            }\n            if (cols[i].validationRules) {\n                setValidationRuels(cols[i], index, rules, mRules, frRules, cols.length);\n            }\n        }\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n            if (this.parent.getFrozenMode() === 'Left-Right') {\n                var frForm = gObj.element.querySelectorAll('.e-gridform')[2];\n                this.parent.editModule.frFormObj = this.createFormObj(frForm, frRules);\n            }\n        }\n        else {\n            rules = extend(rules, mRules, frRules);\n        }\n        if (isBlazor() && this.parent.editSettings.template) {\n            this.parent.editModule.formObj = this.createFormObj(form, {});\n        }\n        else {\n            this.parent.editModule.formObj = this.createFormObj(form, rules);\n        }\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            locale: this.parent.locale,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                var uid = inputElement.getAttribute('e-mappinguid');\n                var args = {\n                    column: _this.parent.getColumnByUid(uid),\n                    error: error,\n                    inputElement: inputElement,\n                    value: inputElement.value,\n                };\n                _this.valErrorPlacement(inputElement, error);\n                _this.parent.notify(events.valCustomPlacement, args);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.outerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            select('#' + this.parent.element.id + '_dialogEdit_wrapper', document);\n    };\n    Edit.prototype.resetElemPosition = function (elem, args) {\n        var td = parentsUntil(args.element, 'e-rowcell');\n        if (td) {\n            var tdRight = td.getBoundingClientRect().right;\n            var elemRight = elem.getBoundingClientRect().right;\n            if (elemRight > tdRight) {\n                var offSet = elemRight - tdRight;\n                elem.style.left = (elem.offsetLeft - offSet) + 'px';\n            }\n        }\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                    this.resetElemPosition(elem, args);\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    // tslint:disable-next-line:max-func-body-length\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var column = this.parent.getColumnByField(name);\n        var formObj = this.parent.getFrozenMode() === 'Left-Right' && this.parent.editSettings.mode === 'Normal'\n            && column.getFreezeTableName() === 'frozen-right' ? this.frFormObj.element : this.formObj.element;\n        var gcontent = this.parent.getContent().firstElementChild;\n        var frzCols = this.parent.getFrozenColumns() || this.parent.getFrozenLeftColumnsCount()\n            || this.parent.getFrozenRightColumnsCount();\n        if (frzCols) {\n            gcontent = this.parent.getMovableVirtualContent();\n        }\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var td = closest(element, '.e-rowcell');\n        var row = closest(element, '.e-row');\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var isFHdr;\n        var isFHdrLastRow = false;\n        var validationForBottomRowPos;\n        var isBatchModeLastRow = false;\n        var viewPortRowCount = Math.round(this.parent.getContent().clientHeight / this.parent.getRowHeight()) - 1;\n        var rows = !fCont ? [].slice.call(this.parent.getContent().querySelectorAll('.e-row'))\n            : [].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll('.e-row'));\n        if (this.parent.editSettings.mode === 'Batch') {\n            if (viewPortRowCount > 1 && rows.length >= viewPortRowCount\n                && rows[rows.length - 1].getAttribute('aria-rowindex') === row.getAttribute('aria-rowindex')) {\n                isBatchModeLastRow = true;\n            }\n        }\n        if (isInline) {\n            if (this.parent.frozenRows) {\n                var fHeraderRows = frzCols ? this.parent.getFrozenVirtualHeader().querySelector('tbody').children\n                    : this.parent.getHeaderTable().querySelector('tbody').children;\n                isFHdr = fHeraderRows.length > (parseInt(row.getAttribute('aria-rowindex'), 10) || 0);\n                isFHdrLastRow = isFHdr && parseInt(row.getAttribute('aria-rowindex'), 10) === fHeraderRows.length - 1;\n            }\n            if (isFHdrLastRow || (viewPortRowCount > 1 && rows.length >= viewPortRowCount\n                && ((this.parent.editSettings.newRowPosition === 'Bottom' && (this.editModule.args\n                    && this.editModule.args.requestType === 'add')) || (td.classList.contains('e-lastrowcell')\n                    && !row.classList.contains('e-addedrow')))) || isBatchModeLastRow) {\n                validationForBottomRowPos = true;\n            }\n        }\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            select('#' + this.parent.element.id + '_dialogEdit_wrapper .e-dlg-content', document);\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = closest(element, 'td');\n        var inputClient = input ? input.getBoundingClientRect() : element.parentElement.getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-lib e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (frzCols ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + inputClient.width + 'px;text-align:center;'\n        });\n        if (isInline && client.left < left) {\n            div.style.left = parseInt(div.style.left, 10) - client.left + left + 'px';\n        }\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow;\n        if (validationForBottomRowPos) {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-bottom' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-bottom' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-bottom' }));\n        }\n        else {\n            arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n            arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        }\n        div.appendChild(content);\n        div.appendChild(arrow);\n        if ((frzCols || this.parent.frozenRows) && this.parent.editSettings.mode !== 'Dialog') {\n            var getEditCell = this.parent.editSettings.mode === 'Normal' ?\n                closest(element, '.e-editcell') : closest(element, '.e-table');\n            getEditCell.style.position = 'relative';\n            div.style.position = 'absolute';\n            if (this.parent.editSettings.mode === 'Batch' ||\n                (closest(element, '.e-frozencontent') || closest(element, '.e-frozenheader'))\n                || (this.parent.frozenRows && !frzCols)) {\n                formObj.appendChild(div);\n            }\n            else {\n                this.mFormObj.element.appendChild(div);\n            }\n        }\n        else {\n            this.formObj.element.appendChild(div);\n        }\n        if (!validationForBottomRowPos && isInline && gcontent.getBoundingClientRect().bottom < inputClient.bottom + inputClient.height) {\n            gcontent.scrollTop = gcontent.scrollTop + div.offsetHeight + arrow.scrollHeight;\n        }\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < inputClient.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        if ((frzCols || this.parent.frozenRows) && this.parent.editSettings.mode !== 'Dialog') {\n            div.style.left = input.offsetLeft + (input.offsetWidth / 2 - div.offsetWidth / 2) + 'px';\n        }\n        else {\n            div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        }\n        if (isInline && !isScroll && !this.parent.allowPaging || frzCols || this.parent.frozenRows) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n        if (validationForBottomRowPos) {\n            if (isScroll && !frzCols && this.parent.height !== 'auto' && !this.parent.frozenRows\n                && !this.parent.enableVirtualization) {\n                var scrollWidth = gcontent.scrollWidth > gcontent.offsetWidth ? getScrollBarWidth() : 0;\n                div.style.bottom = (this.parent.height - gcontent.querySelector('table').offsetHeight\n                    - scrollWidth) + inputClient.height + 9 + 'px';\n            }\n            else {\n                div.style.bottom = inputClient.height + 9 + 'px';\n            }\n            if (rows.length < viewPortRowCount && this.parent.editSettings.newRowPosition === 'Bottom' && (this.editModule.args\n                && this.editModule.args.requestType === 'add')) {\n                var rowsCount = this.parent.frozenRows ? this.parent.frozenRows + (rows.length - 1) : rows.length - 1;\n                var rowsHeight = rowsCount * this.parent.getRowHeight();\n                var position = this.parent.getContent().clientHeight - rowsHeight;\n                div.style.bottom = position + 9 + 'px';\n            }\n            div.style.top = null;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.checkColumnIsGrouped = function (col) {\n        return !col.visible && !(this.parent.groupSettings.columns.indexOf(col.field) > -1);\n    };\n    /**\n     * @hidden\n     */\n    Edit.AddEditors = function (editors) {\n        Edit.editCellType = extend(Edit.editCellType, editors);\n    };\n    Edit.editCellType = {\n        'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n        'datepickeredit': DatePickerEditCell, 'datetimepickeredit': DatePickerEditCell,\n        'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell,\n        'templateedit': TemplateEditCell\n    };\n    return Edit;\n}());\nexport { Edit };\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { createCboxWithWrap, toogleCheckbox, parentsUntil, removeAddCboxClasses } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.changedColumns = [];\n        this.unchangedColumns = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.searchOperator = 'startswith';\n        this.prevShowedCols = [];\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.resetColumns, this.onResetColumns, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(document, 'click', this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.off(events.resetColumns, this.onResetColumns);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                    this.refreshCheckboxButton();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.targetdlg = e.target;\n            }\n        }\n        if (this.isCustomizeOpenCC && e.target.classList.contains('e-cc-cancel')) {\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible && (this.parent.detailTemplate || this.parent.childGrid)) {\n            this.hideOpenedDialog();\n        }\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args = this.beforeOpenColumnChooserEvent();\n            if (args.cancel) {\n                return;\n            }\n            if (target) {\n                this.targetdlg = target;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n            this.parent.notify(events.columnChooserOpened, { dialog: this.dlgObj });\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n            this.clearActions();\n            this.refreshCheckboxState();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        var args = this.beforeOpenColumnChooserEvent();\n        if (args.cancel) {\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n            this.updateIntermediateBtn();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.keyUpHandler = function (e) {\n        if (e.action === 'escape') {\n            this.hideDialog();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.dlgDiv.setAttribute('aria-label', this.l10n.getConstant('ColumnChooserDialogARIA'));\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgObj.appendTo(this.dlgDiv);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', {\n            className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') }\n        });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        this.changedStateColumns = [];\n        this.changedColumns = (this.changedColumns.length > 0) ? this.changedColumns : this.unchangedColumns;\n        this.changedColumnState(this.changedColumns);\n        var uncheckedLength = this.ulElement.querySelector('.e-uncheck') &&\n            this.ulElement.querySelectorAll('.e-uncheck:not(.e-selectall)').length;\n        if (!isNullOrUndefined(args)) {\n            if (uncheckedLength < this.parent.getColumns().length) {\n                if (this.hideColumn.length) {\n                    this.columnStateChange(this.hideColumn, false);\n                }\n                if (this.showColumn.length) {\n                    this.columnStateChange(this.showColumn, true);\n                }\n                this.getShowHideService.setVisible(this.stateChangeColumns, this.changedStateColumns);\n                this.clearActions();\n                this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n                if (this.parent.getCurrentViewRecords().length === 0) {\n                    var emptyRowCell = this.parent.element.querySelector('.e-emptyrow').querySelector('td');\n                    emptyRowCell.setAttribute('colSpan', this.parent.getVisibleColumns().length.toString());\n                }\n            }\n        }\n    };\n    ColumnChooser.prototype.onResetColumns = function (e) {\n        if (e.requestType === 'columnstate') {\n            this.showColumn = [];\n            this.hideColumn = [];\n            this.hideDialog();\n            return;\n        }\n    };\n    ColumnChooser.prototype.resetColumnState = function () {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.hideDialog();\n    };\n    ColumnChooser.prototype.changedColumnState = function (changedColumns) {\n        for (var index = 0; index < changedColumns.length; index++) {\n            var colUid = changedColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            isBlazor() ? this.changedStateColumns.push(JSON.parse(JSON.stringify(currentCol))) : this.changedStateColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            if (currentCol.type !== 'checkbox') {\n                currentCol.visible = state;\n            }\n            isBlazor() ? this.stateChangeColumns.push(JSON.parse(JSON.stringify(currentCol))) : this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.clearBtnClick = function () {\n        this.clearActions();\n        this.parent.notify(events.columnChooserCancelBtnClick, { dialog: this.dlgObj });\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid, selectAll) {\n        if (selectAll === void 0) { selectAll = false; }\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n        if (selectAll) {\n            if (!isChecked) {\n                this.changedColumns.push(coluid);\n            }\n            else {\n                this.unchangedColumns.push(coluid);\n            }\n        }\n        else if (this.changedColumns.indexOf(coluid) !== -1) {\n            this.changedColumns.splice(this.changedColumns.indexOf(coluid), 1);\n        }\n        else {\n            this.changedColumns.push(coluid);\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        var okButton;\n        var buttonEle = this.dlgDiv.querySelector('.e-footer-content');\n        var selectedCbox = this.ulElement.querySelector('.e-check') &&\n            this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        this.isInitialOpen = true;\n        if (buttonEle) {\n            okButton = buttonEle.querySelector('.e-btn').ej2_instances[0];\n        }\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', this.searchOperator, searchVal, true, this.parent.columnChooserSettings.ignoreAccent));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n                this.refreshCheckboxButton();\n            }\n            else {\n                if (okButton && selectedCbox) {\n                    okButton.disabled = false;\n                }\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n            if (okButton) {\n                okButton.disabled = true;\n            }\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateSelectAll(!elem.querySelector('.e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            this.updateIntermediateBtn();\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumns();\n            if (columnUid === 'grid-selectAll') {\n                this.changedColumns = [];\n                this.unchangedColumns = [];\n                for (var i = 0; i < column.length; i++) {\n                    if (column[i].showInColumnChooser) {\n                        this.checkstatecolumn(checkstate, column[i].uid, true);\n                    }\n                }\n            }\n            else {\n                this.checkstatecolumn(checkstate, columnUid);\n            }\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.updateIntermediateBtn = function () {\n        var cnt = this.ulElement.children.length - 1;\n        var className = [];\n        var elem = this.ulElement.children[0].querySelector('.e-frame');\n        var selected = this.ulElement.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dlgObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    ColumnChooser.prototype.updateSelectAll = function (checked) {\n        var cBoxes = [].slice.call(this.ulElement.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var visibleCols = this.parent.getVisibleColumns();\n        for (var i = 0; i < visibleCols.length; i++) {\n            var columnUID = visibleCols[i].uid;\n            if (this.prevShowedCols.indexOf(columnUID) === -1) {\n                this.prevShowedCols.push(columnUID);\n            }\n        }\n        var selected;\n        for (var i = 0; i < this.hideColumn.length; i++) {\n            var index = this.prevShowedCols.indexOf(this.hideColumn[i]);\n            if (index !== -1) {\n                this.prevShowedCols.splice(index, 1);\n            }\n        }\n        selected = this.showColumn.length !== 0 ? 1 : this.prevShowedCols.length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        var srchShowCols = [];\n        var searchData = this.parent.element.querySelectorAll('.e-cc-chbox');\n        for (var i = 0, itemsLen = searchData.length; i < itemsLen; i++) {\n            var element = searchData[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            srchShowCols.push(columnUID);\n        }\n        var hideCols = this.showColumn.filter(function (column) { return srchShowCols.indexOf(column) !== -1; });\n        if (selected === 0 && hideCols.length === 0) {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        var selectAllValue = this.l10n.getConstant('SelectAll');\n        var cclist = this.parent.createElement('li', { className: 'e-cclist e-cc e-cc-selectall' });\n        var selectAll = this.createCheckBox(selectAllValue, false, 'grid-selectAll');\n        if (gdCol.length) {\n            selectAll.querySelector('.e-checkbox-wrapper').firstElementChild.classList.add('e-selectall');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            this.checkState(selectAll.querySelector('.e-icons'), true);\n            cclist.appendChild(selectAll);\n            this.ulElement.appendChild(cclist);\n        }\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        var gridObject = this.parent;\n        var currentCheckBoxColls = this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)');\n        for (var i = 0, itemLen = currentCheckBoxColls.length; i < itemLen; i++) {\n            var element = currentCheckBoxColls[i];\n            var columnUID = void 0;\n            if (this.parent.childGrid || this.parent.detailTemplate) {\n                columnUID = parentsUntil(this.dlgObj.element.querySelectorAll('.e-cc-chbox:not(.e-selectall)')[i], 'e-ccheck').getAttribute('uid');\n            }\n            else {\n                columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            }\n            var column = gridObject.getColumnByUid(columnUID);\n            var uncheck = element.parentElement.querySelectorAll('.e-uncheck');\n            if (column.visible && !uncheck.length) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n        if (this.isInitialOpen) {\n            this.updateIntermediateBtn();\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    ColumnChooser.prototype.hideOpenedDialog = function () {\n        var openCC = [].slice.call(document.getElementsByClassName('e-ccdlg')).filter(function (dlgEle) {\n            return dlgEle.classList.contains('e-popup-open');\n        });\n        for (var i = 0, dlgLen = openCC.length; i < dlgLen; i++) {\n            if (openCC[i].classList.contains('e-dialog') || this.parent.element.id + '_ccdlg' !== openCC[i].id) {\n                openCC[i].ej2_instances[0].hide();\n            }\n        }\n    };\n    ColumnChooser.prototype.beforeOpenColumnChooserEvent = function () {\n        if (isBlazor() && this.parent.isServerRendered && this.parent.columnChooserSettings.operator === 'none') {\n            this.parent.columnChooserSettings.operator = 'startsWith';\n        }\n        var args1 = {\n            requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n            columns: this.getColumns(), cancel: false,\n            searchOperator: this.parent.columnChooserSettings.operator\n        };\n        if (isBlazor() && !this.parent.isJsComponent) {\n            args1 = {\n                requestType: 'beforeOpenColumnChooser', cancel: false,\n                searchOperator: this.parent.columnChooserSettings.operator\n            };\n        }\n        this.parent.trigger(events.beforeOpenColumnChooser, args1);\n        this.searchOperator = args1.searchOperator;\n        return args1;\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue, createElement } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getForeignData, measureColumnDepth, getUid } from '../base/util';\nimport { Grid } from '../base/grid';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent, foreignKeyData) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n        if (!parent.parentDetails && foreignKeyData) {\n            this.foreignKeyData = foreignKeyData;\n        }\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        var query = data.generateQuery(true).requiresCount();\n        if (data.isRemote()) {\n            if (parent.groupSettings.enableLazyLoading && parent.groupSettings.columns.length) {\n                query.lazyLoad = [];\n            }\n            else {\n                query.take(parent.pageSettings.totalRecordsCount);\n            }\n        }\n        return query;\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getGridRowModel = function (columns, dataSource, gObj, startIndex) {\n        if (startIndex === void 0) { startIndex = 0; }\n        var rows = [];\n        var length = dataSource.length;\n        if (length) {\n            for (var i = 0; i < length; i++, startIndex++) {\n                var options = { isExpand: false };\n                options.data = dataSource[i];\n                options.index = startIndex;\n                if (gObj.childGrid) {\n                    if (gObj.hierarchyPrintMode === 'All') {\n                        options.isExpand = true;\n                    }\n                    else if (gObj.hierarchyPrintMode === 'Expanded' &&\n                        this.parent.expandedRows && this.parent.expandedRows[startIndex]) {\n                        options.isExpand = gObj.expandedRows[startIndex].isExpand;\n                    }\n                }\n                var row = new Row(options);\n                row.cells = this.generateCells(columns, gObj);\n                rows.push(row);\n            }\n            this.processColumns(rows);\n        }\n        return rows;\n    };\n    ExportHelper.prototype.generateCells = function (columns, gObj) {\n        var cells = [];\n        if (gObj.childGridLevel) {\n            var len = gObj.childGridLevel;\n            for (var i = 0; len > i; i++) {\n                cells.push(this.generateCell({}, CellType.Indent));\n            }\n        }\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            cells.push(this.generateCell(col, CellType.Data));\n        }\n        return cells;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            for (var i = 0; i < fColumns.length; i++) {\n                var colData = ('result' in fColumns[i].dataSource) ?\n                    new DataManager(fColumns[i].dataSource.result) :\n                    fColumns[i].dataSource;\n                columnPromise.push(colData.executeQuery(new Query()));\n            }\n            promise = Promise.all(columnPromise).then(function (e) {\n                for (var j = 0; j < fColumns.length; j++) {\n                    _this.foreignKeyData[fColumns[j].field] = e[j].result;\n                }\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    ExportHelper.prototype.getHeaders = function (columns, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        this.colDepth = measureColumnDepth(columns);\n        var rows = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows, columns);\n        return { rows: rows, columns: this.generateActualColumns(columns) };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (columns, actualColumns) {\n        if (actualColumns === void 0) { actualColumns = []; }\n        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {\n            var column = columns_2[_i];\n            if (column.commands) {\n                continue;\n            }\n            if (!column.columns) {\n                if (column.visible || this.hideColumnInclude) {\n                    actualColumns.push(column);\n                }\n            }\n            else {\n                if (column.visible || this.hideColumnInclude) {\n                    var colSpan = this.getCellCount(column, 0);\n                    if (colSpan !== 0) {\n                        this.generateActualColumns(column.columns, actualColumns);\n                    }\n                }\n            }\n        }\n        return actualColumns;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows, cols) {\n        var columns = cols;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0);\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index) {\n        if (!cols.columns && (cols.visible !== false || this.hideColumnInclude) && !cols.commands) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, index));\n        }\n        else if (cols.columns) {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isIgnoreFirstCell = true;\n                }\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, rowIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': cellType === CellType.Data,\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'index': rowIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = [];\n        if (gridObj.enableColumnVirtualization) {\n            columnIndexes = gridObj.getColumnIndexesInView();\n        }\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (gridObj.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.splice(0, 0, this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n        }\n        return rows;\n    };\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    ExportHelper.prototype.checkAndExport = function (gridPool, globalResolve) {\n        var bool = Object.keys(gridPool).some(function (key) {\n            return !gridPool[key];\n        });\n        if (!bool) {\n            globalResolve();\n        }\n    };\n    ExportHelper.prototype.failureHandler = function (gridPool, childGridObj, resolve) {\n        var _this = this;\n        return function () {\n            gridPool[childGridObj.id] = true;\n            _this.checkAndExport(gridPool, resolve);\n        };\n    };\n    // tslint:disable-next-line:no-any\n    ExportHelper.prototype.createChildGrid = function (gObj, row, exportType, gridPool) {\n        var childGridObj = new Grid(this.parent.detailRowModule.getGridModel(gObj, row, exportType));\n        gObj.isPrinting = false;\n        var parent = 'parentDetails';\n        childGridObj[parent] = {\n            parentID: gObj.element.id,\n            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n            parentKeyField: gObj.childGrid.queryString,\n            parentKeyFieldValue: getValue(childGridObj.queryString, row.data),\n            parentRowData: row.data\n        };\n        var exportId = getUid('child-grid');\n        var element = createElement('div', {\n            id: exportId, styles: 'display: none'\n        });\n        document.body.appendChild(element);\n        childGridObj.id = exportId;\n        gridPool[exportId] = false;\n        return { childGrid: childGridObj, element: element };\n    };\n    ExportHelper.prototype.getGridExportColumns = function (columns) {\n        var actualGridColumns = [];\n        for (var i = 0, gridColumns = columns; i < gridColumns.length; i++) {\n            if (gridColumns[i].type !== 'checkbox') {\n                actualGridColumns.push(gridColumns[i]);\n            }\n        }\n        return actualGridColumns;\n    };\n    /** @hidden */\n    ExportHelper.prototype.getForeignKeyData = function () {\n        return this.foreignKeyData;\n    };\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args, isServerBlaz) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value || args.value === 0 ?\n                this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean' && args.value !== '') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.value === 'string') {\n                args.value = new Date(args.value);\n            }\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                var cFormat = args.column.format;\n                if (args.column.type === 'date') {\n                    format = isServerBlaz ? { type: 'date', format: cFormat } : { type: 'date', skeleton: cFormat };\n                }\n                else if (args.column.type === 'time') {\n                    format = isServerBlaz ? { type: 'time', format: cFormat } : { type: 'time', skeleton: cFormat };\n                }\n                else {\n                    format = isServerBlaz ? { type: 'dateTime', format: cFormat } : { type: 'dateTime', skeleton: cFormat };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, getValue, detach, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { getPrintGridModel, getUid, isExportColumns, updateColumnTypeForExportColumns, prepareColumns, measureColumnDepth } from '../base/util';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent, locator) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.gridPool = {};\n        this.sheet = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.locator = locator;\n        this.l10n = this.locator.getService('localization');\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        this.workSheet = [];\n        this.rows = [];\n        this.columns = [];\n        this.styles = [];\n        this.rowLength = 1;\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n        gObj.id = getUid('main-grid');\n        this.gridPool[gObj.id] = false;\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        this.gridPool = {};\n        if (grid.childGrid && !(!isNullOrUndefined(exportProperties) && exportProperties.hierarchyExportMode === 'None')) {\n            grid.expandedRows = getPrintGridModel(grid).expandedRows;\n        }\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        if (args[cancel]) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        this.parent.log('exporting_begin', this.getModuleName());\n        this.data = new Data(gObj);\n        this.isExporting = true;\n        this.isBlob = args[isBlb];\n        if (args[csv]) {\n            this.isCsvExport = args[csv];\n        }\n        else {\n            this.isCsvExport = false;\n        }\n        if (isExportColumns(exportProperties)) {\n            updateColumnTypeForExportColumns(exportProperties, gObj);\n        }\n        return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n    };\n    ExcelExport.prototype.exportingSuccess = function (resolve) {\n        this.isExporting = false;\n        this.parent.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n        this.parent.log('exporting_complete', this.getModuleName());\n        resolve(this.book);\n        this.sheet.images = [];\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource)) {\n            if (!(exportProperties.dataSource instanceof DataManager)) {\n                exportProperties.dataSource = new DataManager(exportProperties.dataSource);\n            }\n            var query_1 = exportProperties.query ? exportProperties.query : new Query();\n            if (isNullOrUndefined(query_1.isCountRequired) || gObj.aggregates) {\n                query_1.isCountRequired = true;\n            }\n            return new Promise(function (resolve, reject) {\n                var dataManager = exportProperties.dataSource.executeQuery(query_1);\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                });\n            });\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, _this.parent.getCurrentViewRecords());\n                _this.exportingSuccess(resolve);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise_1.push(this.helper.getColumnData(gObj));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]).then(function () {\n                        _this.exportingSuccess(resolve);\n                    });\n                }).catch(function (e) {\n                    reject(_this.book);\n                    _this.parent.trigger(events.actionFailure, e);\n                });\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, \n    /* tslint:disable-next-line:no-any */\n    isMultipleExport, workbook, r) {\n        var _this = this;\n        this.groupedColLength = gObj.groupSettings.columns.length;\n        var blankRows = 5;\n        var separator;\n        var rows = [];\n        var colDepth = measureColumnDepth(gObj.columns);\n        var isExportPropertiesPresent = !isNullOrUndefined(exportProperties);\n        if (isExportPropertiesPresent && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (isExportPropertiesPresent) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (isExportPropertiesPresent ? exportProperties.includeHiddenColumn : false);\n        return new Promise(function (resolve, reject) {\n            gObj.childGridLevel = 0;\n            rows = _this.processGridExport(gObj, exportProperties, r);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            var organisedRows = [];\n            _this.organiseRows(rows, rows[0].index, organisedRows);\n            _this.rows = _this.rows.concat(organisedRows);\n            //footer template add\n            if (!isNullOrUndefined(_this.footer)) {\n                if ((_this.expType === 'AppendToSheet' && !isMultipleExport) || (_this.expType === 'NewSheet')) {\n                    _this.processExcelFooter(_this.footer);\n                }\n            }\n            if (_this.columns.length > 0) {\n                _this.sheet.columns = _this.columns;\n            }\n            /* tslint:disable-next-line:no-any */\n            _this.sheet.rows = _this.rows;\n            _this.sheet.enableRtl = _this.parent.enableRtl;\n            if (_this.parent.allowFiltering && gObj.getVisibleColumns().length && isExportPropertiesPresent &&\n                exportProperties.enableFilter) {\n                var autoFilters = {\n                    row: colDepth, column: _this.groupedColLength ? _this.groupedColLength + 1 :\n                        _this.sheet.columns[0].index, lastRow: _this.sheet.rows.length, lastColumn: _this.sheet.columns.length\n                };\n                _this.sheet.autoFilters = autoFilters;\n            }\n            _this.workSheet.push(_this.sheet);\n            _this.book.worksheets = _this.workSheet;\n            _this.book.styles = _this.styles;\n            gObj.notify('finalPageSetup', _this.book);\n            if (!isMultipleExport) {\n                if (_this.isCsvExport) {\n                    if (isBlazor() && gObj.isServerRendered) {\n                        _this.book.isServerRendered = gObj.isServerRendered;\n                    }\n                    if (isExportPropertiesPresent && !isNullOrUndefined(exportProperties.separator)\n                        && exportProperties.separator !== ',') {\n                        separator = exportProperties.separator;\n                    }\n                    /* tslint:disable-next-line:max-line-length */\n                    var book = new Workbook(_this.book, 'csv', gObj.locale, gObj.currencyCode, separator);\n                    if (!_this.isBlob) {\n                        if (isExportPropertiesPresent && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.csv');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('text/csv');\n                    }\n                }\n                else {\n                    var book = new Workbook(_this.book, 'xlsx', gObj.locale, gObj.currencyCode);\n                    if (!_this.isBlob) {\n                        if (isExportPropertiesPresent && exportProperties.fileName) {\n                            book.save(exportProperties.fileName);\n                        }\n                        else {\n                            book.save('Export.xlsx');\n                        }\n                    }\n                    else {\n                        _this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                    }\n                }\n                if (_this.isElementIdChanged) {\n                    gObj.element.id = '';\n                }\n                delete gObj.expandedRows;\n            }\n            return workbook;\n        });\n    };\n    ExcelExport.prototype.organiseRows = function (rows, initialIndex, organisedRows) {\n        if (!rows.length) {\n            return initialIndex;\n        }\n        for (var i = 0; i < rows.length; i++) {\n            var row = rows[i];\n            var childRows = row.childRows;\n            if (childRows) {\n                row.index = initialIndex++;\n                delete row.childRows;\n                organisedRows.push(row);\n                initialIndex = this.organiseRows(childRows, initialIndex, organisedRows);\n            }\n            else {\n                row.index = initialIndex++;\n                organisedRows.push(row);\n            }\n        }\n        return initialIndex;\n    };\n    ExcelExport.prototype.processGridExport = function (gObj, exportProperties, r) {\n        var excelRows = [];\n        var isFrozen = this.parent.isFrozenGrid() && !this.parent.getFrozenColumns();\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n            this.theme = exportProperties.theme;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(exportProperties)) {\n            gObj.hierarchyPrintMode = exportProperties.hierarchyExportMode || 'Expanded';\n        }\n        var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n        var gColumns = isExportColumns(exportProperties) ?\n            prepareColumns(exportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(isFrozen ? gObj.getColumns() : gObj.columns);\n        var headerRow = helper.getHeaders(gColumns, this.includeHiddenColumn);\n        var groupIndent = gObj.groupSettings.columns.length;\n        excelRows = this.processHeaderContent(gObj, headerRow, groupIndent, excelRows);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, exportProperties.dataSource, excelRows, helper);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, gObj.currentViewData, excelRows, helper);\n        }\n        else {\n            excelRows = this.processRecordContent(gObj, r, headerRow, exportProperties, undefined, excelRows, helper);\n        }\n        gObj.notify(events.exportDataBound, { excelRows: excelRows, type: 'excel' });\n        return excelRows;\n    };\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, exportProperties, currentViewRecords, excelRow, helper) {\n        var record;\n        if (!isNullOrUndefined(currentViewRecords) && currentViewRecords.length) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level, 0, exportProperties, excelRow, helper);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0, 0, exportProperties, excelRow, helper);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, excelRow, currentViewRecords);\n            }\n            else {\n                var result = returnType.result.GroupGuid ?\n                    returnType.result.records : returnType.result;\n                this.processAggregates(gObj, result, excelRow);\n            }\n        }\n        return excelRow;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            var value = gObj.getColumnByField(item.field).headerText +\n                ': ' + (!col.enableGroupByFormat ? this.exportValueFormatter.formatCellValue(args) : item.key) + ' - ';\n            if (item.count > 1) {\n                value += item.count + ' items';\n            }\n            else {\n                value += item.count + ' item';\n            }\n            var cArgs = { captionText: value, type: this.isCsvExport ? 'CSV' : 'Excel' };\n            this.parent.trigger(events.exportGroupCaption, cArgs);\n            cell.value = cArgs.captionText;\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, excelRows, this.rowLength);\n            cells.push(cell);\n            if (excelRows[excelRows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = excelRows[excelRows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level + dataSource.childLevels)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    sCell.index = (hIndex + 1);\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            excelRows[excelRows.length - 1].cells = cells;\n            this.rowLength++;\n            if (this.groupedColLength < 8 && level > 1) {\n                var grouping = { outlineLevel: level - 1, isCollapsed: true };\n                excelRows[excelRows.length - 1].grouping = grouping;\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level, startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level) + dataSource.childLevels, true);\n            }\n            else {\n                startIndex = this.processRecordRows(gObj, item.items, headerRow, (level), startIndex, excelExportProperties, excelRows, helper);\n                this.processAggregates(gObj, item, excelRows, undefined, (level), true);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-func-body-length */\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level, startIndex, excelExportProperties, excelRows, helper) {\n        var index = 1;\n        var cells = [];\n        var columns = headerRow.columns;\n        var rows = helper.getGridRowModel(columns, record, gObj, startIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            cells = [];\n            startIndex++;\n            index = 1;\n            var templateRowHeight = void 0;\n            for (var c = 0, len = row.cells.length; c < len; c++) {\n                var gCell = row.cells[c];\n                if (gCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var fkData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    fkData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, fkData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    var cell = {};\n                    var idx = index + level + gObj.childGridLevel;\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = {\n                        data: row.data, column: column, foreignKeyData: fkData,\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    };\n                    gObj.trigger(events.excelQueryCellInfo, excelCellArgs);\n                    if (!isNullOrUndefined(excelCellArgs.image) && !isNullOrUndefined(excelCellArgs.image.base64)) {\n                        if (isNullOrUndefined(this.sheet.images)) {\n                            this.sheet.images = [];\n                        }\n                        /* tslint:disable-next-line:no-any */\n                        var excelImage = {\n                            image: excelCellArgs.image.base64, row: this.rowLength, column: idx,\n                            lastRow: this.rowLength, lastColumn: idx\n                        };\n                        this.sheet.images.push(excelImage);\n                        templateRowHeight = excelCellArgs.image.height || 50;\n                        this.columns[idx - 1].width = excelCellArgs.image.width || this.columns[idx - 1].width;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.hyperLink)) {\n                        excelCellArgs.cell.hyperlink = { target: excelCellArgs.hyperLink.target };\n                        excelCellArgs.value = excelCellArgs.hyperLink.displayText || excelCellArgs.value;\n                    }\n                    cell = excelCellArgs.cell;\n                    cell.index = idx;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.data === '' && gObj.childGridLevel && index === 1) {\n                        var style = {};\n                        style.hAlign = 'left';\n                        excelCellArgs = { style: style };\n                        cell.colSpan = gObj.getVisibleColumns().length;\n                        cell.value = this.l10n.getConstant('EmptyRecord');\n                    }\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            var excelRow = { index: this.rowLength++, cells: cells };\n            if (!isNullOrUndefined(templateRowHeight)) {\n                /* tslint:disable-next-line:no-any */\n                excelRow.height = templateRowHeight;\n            }\n            if (this.groupedColLength < 8 && level > 0) {\n                excelRow.grouping = { outlineLevel: level, isCollapsed: true };\n                excelRows.push(excelRow);\n            }\n            else {\n                excelRows.push(excelRow);\n            }\n            if (!isNullOrUndefined(gObj.childGrid)) {\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(excelExportProperties) && excelExportProperties.exportType) ?\n                    excelExportProperties.exportType : 'AllPages';\n                var returnVal = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnVal.childGrid;\n                var element = returnVal.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                childGridObj.childGridLevel = gObj.childGridLevel + 1;\n                var args = { childGrid: childGridObj, row: row, exportProperties: excelExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(excelRow, childGridObj, excelExportProperties, row);\n                childGridObj.appendTo(element);\n            }\n            gObj.notify(events.exportRowDataBound, { rowObj: row, type: 'excel', excelRows: excelRows });\n        }\n        return startIndex;\n    };\n    ExcelExport.prototype.childGridCell = function (excelRow, childGridObj, excelExportProps, gRow) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            if (result.result.length === 0) {\n                result.result = [''];\n            }\n            excelRow.childRows = _this.processGridExport(childGridObj, excelExportProps, result);\n            var intent = _this.parent.groupSettings.columns.length;\n            var rows = excelRow.childRows;\n            for (var i = 0; i < rows.length; i++) {\n                rows[i].grouping = { outlineLevel: intent + childGridObj.childGridLevel,\n                    isCollapsed: !gRow.isExpand, isHidden: !gRow.isExpand };\n            }\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return excelRow;\n        };\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.processAggregates = function (gObj, rec, excelRows, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        var columns = summaryModel.getColumns();\n        columns = columns.filter(function (col) { return isNullOrUndefined(col.commands) && col.type !== 'checkbox'; });\n        if (gObj.aggregates.length && this.parent !== gObj) {\n            gObj.aggregateModule.prepareSummaryInfo();\n        }\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                excelRows = this.fillAggregates(gObj, groupSummaryRows, indent, excelRows);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates, null, null, columns);\n            if (sRows.length > 0 && !byGroup) {\n                excelRows = this.fillAggregates(gObj, sRows, indent, excelRows);\n            }\n        }\n        return excelRows;\n    };\n    // tslint:disable-next-line:max-line-length\n    ExcelExport.prototype.fillAggregates = function (gObj, rows, indent, excelRows, customIndex) {\n        for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {\n            var row = rows_2[_i];\n            var cells = [];\n            var isEmpty = true;\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    continue;\n                }\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        isEmpty = false;\n                        var footerTemplate = !isNullOrUndefined(cell.column.footerTemplate);\n                        var groupFooterTemplate = !isNullOrUndefined(cell.column.groupFooterTemplate);\n                        var groupCaptionTemplate = !isNullOrUndefined(cell.column.groupCaptionTemplate);\n                        eCell.index = index + indent + gObj.childGridLevel;\n                        if (footerTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (groupFooterTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (groupCaptionTemplate) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - sum\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - average\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - max\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - min\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - count\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - truecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field][cell.column.field + \" - falsecount\"];\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        this.aggregateStyle(cell.column, eCell.style, cell.column.field);\n                        var gridCellStyle = cell.attributes.style;\n                        if (gridCellStyle.textAlign) {\n                            eCell.style.hAlign = gridCellStyle.textAlign.toLowerCase();\n                        }\n                        var args = {\n                            row: row,\n                            type: footerTemplate ? 'Footer' : groupFooterTemplate ? 'GroupFooter' : 'GroupCaption',\n                            style: eCell\n                        };\n                        this.parent.trigger(events.excelAggregateQueryCellInfo, args);\n                        cells.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent + gObj.childGridLevel;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                excelRows.push({ index: customIndex, cells: cells });\n            }\n            else {\n                var row_1 = {};\n                if (this.groupedColLength < 8 && this.groupedColLength > 0) {\n                    var dummyOutlineLevel = 'outlineLevel';\n                    var dummyGrouping = 'grouping';\n                    var level = excelRows[excelRows.length - 1][dummyGrouping][dummyOutlineLevel];\n                    var grouping = { outlineLevel: level, isCollapsed: true };\n                    row_1 = { index: this.rowLength++, cells: cells, grouping: grouping };\n                }\n                else {\n                    row_1 = { index: this.rowLength++, cells: cells };\n                }\n                if (!isEmpty) {\n                    excelRows.push(row_1);\n                }\n            }\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.aggregateStyle = function (col, style, field) {\n        var column = this.parent.getColumnByField(field);\n        if (typeof col.format === 'object') {\n            var format = col.format;\n            style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n            if (!isNullOrUndefined(format.type)) {\n                style.type = format.type.toLowerCase();\n            }\n        }\n        else {\n            style.numberFormat = col.format;\n        }\n        if (!isNullOrUndefined(column) && isNullOrUndefined(style.type)) {\n            style.type = column.type.toLowerCase();\n        }\n    };\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        var txt;\n        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n        if (this.parent.isReact || this.parent.isVue) {\n            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n            if (this.parent.isReact) {\n                this.parent.renderTemplates();\n            }\n        }\n        else {\n            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n        }\n        return txt[0].textContent;\n    };\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        var result = {};\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, indent, excelRows) {\n        var rowIndex = 1;\n        var gridRows = headerRow.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = headerRow.columns;\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            var cells = [];\n            for (var column = 0; column < gridRows[row].cells.length; column++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                var cell = {};\n                var gridCell = gridRows[row].cells[column];\n                if (gridCell.cellType === CellType.HeaderIndent || gridCell.cellType === CellType.DetailHeader) {\n                    continue;\n                }\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index + gObj.childGridLevel;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign.toLowerCase();\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign.toLowerCase();\n                }\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, style: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, excelHeaderCellArgs);\n                cell.style = excelHeaderCellArgs.style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            excelRows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n        return excelRows;\n    };\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        style.bold = true;\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        return extend(style, themestyle);\n    };\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (typeof col.format === 'object') {\n                var format = col.format;\n                style.numberFormat = !isNullOrUndefined(format.format) ? format.format : format.skeleton;\n                if (!isNullOrUndefined(format.type)) {\n                    style.type = format.type.toLowerCase();\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign.toLowerCase();\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width) && col.width !== 'auto') {\n            this.columns.push({ index: index + gObj.childGridLevel, width: typeof col.width === 'number' ?\n                    col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @return{void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen, PdfPaddings } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush, PdfTextWebLink } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { PdfTrueTypeFont } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined, detach, isBlazor } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\nimport { getUid, getPrintGridModel, measureColumnDepth, isExportColumns, updateColumnTypeForExportColumns, prepareColumns } from '../base/util';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.headerOnPages = [];\n        this.drawPosition = { xPosition: 0, yPosition: 0 };\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n        this.gridPool = {};\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        parent.id = getUid('main-grid');\n        this.gridPool[parent.id] = false;\n        this.pdfPageSettings = new PdfPageSettings();\n    };\n    PdfExport.prototype.exportWithData = function (parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject) {\n        var _this = this;\n        this.init(parent);\n        if (!isNullOrUndefined(pdfDoc)) {\n            this.pdfDocument = pdfDoc;\n        }\n        else {\n            this.pdfDocument = new PdfDocument();\n        }\n        this.processExport(parent, returnType, pdfExportProperties, isMultipleExport).then(function () {\n            _this.isExporting = false;\n            parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n            _this.parent.log('exporting_complete', _this.getModuleName());\n            resolve(_this.pdfDocument);\n        }).catch(function (e) {\n            reject(_this.pdfDocument);\n            _this.parent.trigger(events.actionFailure, e);\n        });\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        this.gridPool = {};\n        var query = new Query();\n        if (parent.childGrid && !(!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.hierarchyExportMode === 'None')) {\n            parent.expandedRows = getPrintGridModel(parent).expandedRows;\n        }\n        var args = {\n            requestType: 'beforePdfExport', cancel: false,\n            headerPageNumbers: [], gridDrawPosition: { xPosition: 0, yPosition: 0 }, generateQuery: false\n        };\n        if (!isBlazor()) {\n            var gridObject = 'gridObject';\n            args[gridObject] = parent;\n        }\n        var can = 'cancel';\n        var generateQuery = 'generateQuery';\n        var header = 'headerPageNumbers';\n        var drawPos = 'gridDrawPosition';\n        parent.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            return new Promise(function (resolve, reject) {\n                return resolve();\n            });\n        }\n        if (isExportColumns(pdfExportProperties)) {\n            updateColumnTypeForExportColumns(pdfExportProperties, parent);\n        }\n        if (args[generateQuery]) {\n            query = ExportHelper.getQuery(parent, this.data);\n        }\n        this.headerOnPages = args[header];\n        this.drawPosition = args[drawPos];\n        this.parent.log('exporting_begin', this.getModuleName());\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource)\n            && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                pdfExportProperties.dataSource.executeQuery(query).then(function (returnType) {\n                    _this.exportWithData(parent, pdfDoc, resolve, returnType, pdfExportProperties, isMultipleExport, reject);\n                });\n            });\n        }\n        else if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType === 'CurrentPage') {\n            return new Promise(function (resolve, reject) {\n                _this.exportWithData(parent, pdfDoc, resolve, _this.parent.getCurrentViewRecords(), pdfExportProperties, isMultipleExport, reject);\n            });\n        }\n        else {\n            var allPromise_1 = [];\n            allPromise_1.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise_1.push(this.helper.getColumnData(parent));\n            return new Promise(function (resolve, reject) {\n                Promise.all(allPromise_1).then(function (e) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport).then(function () {\n                        _this.isExporting = false;\n                        parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                        _this.parent.log('exporting_complete', _this.getModuleName());\n                        resolve(_this.pdfDocument);\n                    }).catch(function (e) {\n                        reject(_this.pdfDocument);\n                        _this.parent.trigger(events.actionFailure, e);\n                    });\n                });\n            });\n        }\n    };\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        var _this = this;\n        var section = this.pdfDocument.sections.add();\n        var pdfGrid;\n        this.processSectionExportProperties(section, pdfExportProperties);\n        var pdfPage = section.pages.add();\n        return new Promise(function (resolve, reject) {\n            pdfGrid = _this.processGridExport(gObj, returnType, pdfExportProperties);\n            _this.globalResolve = resolve;\n            _this.gridPool[gObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n        }).then(function () {\n            // draw the grid\n            var xPosition = 'xPosition';\n            var yPosition = 'yPosition';\n            pdfGrid.draw(pdfPage, _this.drawPosition[xPosition], _this.drawPosition[yPosition]);\n            _this.drawHeader(pdfExportProperties);\n            if (!isMultipleExport) {\n                // save the PDF\n                if (!_this.isBlob) {\n                    if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                        _this.pdfDocument.save(pdfExportProperties.fileName);\n                    }\n                    else {\n                        _this.pdfDocument.save('Export.pdf');\n                    }\n                }\n                else {\n                    _this.blobPromise = _this.pdfDocument.save();\n                }\n                _this.pdfDocument.destroy();\n                delete gObj.expandedRows;\n            }\n            return _this.pdfDocument;\n        });\n    };\n    PdfExport.prototype.processSectionExportProperties = function (section, pdfExportProperties) {\n        if (!isNullOrUndefined(pdfExportProperties) && (!isNullOrUndefined(pdfExportProperties.pageOrientation)\n            || !isNullOrUndefined(pdfExportProperties.pageSize))) {\n            this.pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ?\n                PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n            this.pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n            section.setPageSettings(this.pdfPageSettings);\n        }\n        return section;\n    };\n    PdfExport.prototype.processGridExport = function (gObj, returnType, pdfExportProperties) {\n        var allowHorizontalOverflow = true;\n        var isFrozen = this.parent.isFrozenGrid() && !this.parent.getFrozenColumns();\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n            if (isBlazor() && !isNullOrUndefined(this.gridTheme)) {\n                this.getGridPdfFont(this.gridTheme);\n            }\n            allowHorizontalOverflow = isNullOrUndefined(pdfExportProperties.allowHorizontalOverflow) ?\n                true : pdfExportProperties.allowHorizontalOverflow;\n        }\n        var helper = new ExportHelper(gObj, this.helper.getForeignKeyData());\n        var dataSource = this.processExportProperties(pdfExportProperties, returnType.result);\n        var columns = isExportColumns(pdfExportProperties) ?\n            prepareColumns(pdfExportProperties.columns, gObj.enableColumnVirtualization) :\n            helper.getGridExportColumns(isFrozen ? gObj.getColumns() : gObj.columns);\n        columns = columns.filter(function (columns) { return isNullOrUndefined(columns.commands); });\n        var isGrouping = false;\n        if (gObj.groupSettings.columns.length) {\n            isGrouping = true;\n        }\n        if (gObj.childGrid && !isNullOrUndefined(pdfExportProperties)) {\n            gObj.hierarchyPrintMode = pdfExportProperties.hierarchyExportMode || 'Expanded';\n        }\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        var returnValue = helper.getHeaders(columns, this.hideColumnInclude);\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(gObj.groupSettings.columns.length, pdfGrid, returnValue.rows, gridColumns, border, headerFont, headerBrush, gObj, allowHorizontalOverflow, columns);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow);\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length) {\n            if (isGrouping) {\n                if (!isNullOrUndefined(captionThemeStyle.border)) {\n                    border = captionThemeStyle.border;\n                }\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.\n                    brush, captionThemeStyle.backgroundBrush, returnType, pdfExportProperties, helper, 0);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid, 0, pdfExportProperties, helper, 0);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                var column = summaryModel.getColumns();\n                column = column.filter(function (col) { return isNullOrUndefined(col.commands) && col.type !== 'checkbox'; });\n                if (gObj.aggregates.length && this.parent !== gObj) {\n                    gObj.aggregateModule.prepareSummaryInfo();\n                }\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates, null, null, column);\n                }\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption)) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var fontFamily = !isNullOrUndefined(this.gridTheme.caption.fontName) ?\n                this.getFontFamily(this.gridTheme.caption.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.caption);\n            var pdfColor = new PdfColor(0, 0, 0);\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var borderCaption = this.gridTheme.caption.border ? this.getBorderStyle(this.gridTheme.caption.border) : null;\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.caption.font)) {\n                font = this.gridTheme.caption.font;\n            }\n            return { font: font, brush: new PdfSolidBrush(pdfColor), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)),\n                border: borderCaption };\n        }\n        else {\n            //Material theme\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)),\n                backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    PdfExport.prototype.getGridPdfFont = function (args) {\n        var fontFamily = 'fontFamily';\n        var fontSize = 'fontSize';\n        var fontStyle = 'fontStyle';\n        var isTrueType = 'isTrueType';\n        var style = 0;\n        if (args.header && args.header.font) {\n            var headerFont = args.header.font[fontFamily];\n            var headerSize = args.header.font[fontSize];\n            var headerStyle = args.header.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[headerStyle]) ? 0 : PdfFontStyle[headerStyle]);\n            if (args.header.font[isTrueType]) {\n                args.header.font = new PdfTrueTypeFont(headerFont, headerSize, style);\n            }\n            else {\n                var fontFamily_1 = !isNullOrUndefined(headerFont) ?\n                    this.getFontFamily(headerFont) : PdfFontFamily.Helvetica;\n                args.header.font = new PdfStandardFont(fontFamily_1, headerSize, style);\n            }\n        }\n        if (args.caption && args.caption.font) {\n            var captionFont = args.caption.font[fontFamily];\n            var captionSize = args.caption.font[fontSize];\n            var captionStyle = args.caption.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[captionStyle]) ? 0 : PdfFontStyle[captionStyle]);\n            if (args.caption.font[isTrueType]) {\n                args.caption.font = new PdfTrueTypeFont(captionFont, captionSize, style);\n            }\n            else {\n                var fontFamily_2 = !isNullOrUndefined(captionFont) ?\n                    this.getFontFamily(captionFont) : PdfFontFamily.Helvetica;\n                args.caption.font = new PdfStandardFont(fontFamily_2, captionSize, style);\n            }\n        }\n        if (args.record && args.record.font) {\n            var recordFont = args.record.font[fontFamily];\n            var recordSize = args.record.font[fontSize];\n            var recordStyle = args.record.font[fontStyle];\n            style = (isNullOrUndefined(PdfFontStyle[recordStyle]) ? 0 : PdfFontStyle[recordStyle]);\n            if (args.record.font[isTrueType]) {\n                args.record.font = new PdfTrueTypeFont(recordFont, recordSize, style);\n            }\n            else {\n                var fontFamily_3 = !isNullOrUndefined(recordFont) ?\n                    this.getFontFamily(recordFont) : PdfFontFamily.Helvetica;\n                args.record.font = new PdfStandardFont(fontFamily_3, recordSize, style);\n            }\n        }\n    };\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.header.fontName) ?\n                this.getFontFamily(this.gridTheme.header.fontName) : PdfFontFamily.Helvetica;\n            var fontStyle = this.getFontStyle(this.gridTheme.header);\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.header.font)) {\n                font = this.gridTheme.header.font;\n            }\n            return { border: this.getBorderStyle(this.gridTheme.header.border), font: font, brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5),\n                brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index) {\n        var _this = this;\n        var groupIndex = level;\n        var _loop_1 = function (dataSourceItems) {\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = this_1.parent.getColumnByField(dataSourceItems.field).headerText + ': ' + (!col.enableGroupByFormat ? this_1.exportValueFormatter.formatCellValue(args) : dataSourceItems.key) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            var cArgs = { captionText: value, type: 'PDF' };\n            this_1.parent.trigger(events.exportGroupCaption, cArgs, function (cArgs) {\n                row.cells.getCell(groupIndex).value = cArgs.captionText;\n                row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n                row.style.setBorder(border);\n                row.style.setFont(font);\n                row.style.setTextBrush(brush);\n                row.style.setBackgroundBrush(backgroundBrush);\n                var sRows;\n                var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n                if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                }\n                else {\n                    sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                }\n                if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                    row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                }\n                if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    _this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType, pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n                }\n                else {\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                    index = _this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1), pdfExportProperties, helper, index);\n                    var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                    sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                    var isGroupedFooter = true;\n                    _this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false, null, null, isGroupedFooter);\n                }\n            });\n        };\n        var this_1 = this;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            _loop_1(dataSourceItems);\n        }\n    };\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumn, border, headerFont, headerBrush, grid, allowHorizontalOverflow, eCols) {\n        var _this = this;\n        var columnCount = gridColumn.length + childLevels;\n        var depth = measureColumnDepth(eCols);\n        var cols = eCols;\n        var index = 0;\n        if (this.parent.allowGrouping) {\n            index = this.parent.groupSettings.columns.length;\n        }\n        pdfGrid.columns.add(columnCount);\n        pdfGrid.headers.add(rows.length);\n        var applyTextAndSpan = function (rowIdx, colIdx, col, rowSpan, colSpan) {\n            var gridHeader = pdfGrid.headers.getHeader(rowIdx);\n            var pdfCell = gridHeader.cells.getCell(colIdx);\n            var cell = rows[rowIdx].cells[colIdx];\n            if (!isNullOrUndefined(col.headerTextAlign)) {\n                pdfCell.style.stringFormat = _this.getHorizontalAlignment(col.headerTextAlign);\n            }\n            if (rowSpan > 0) {\n                pdfCell.rowSpan = rowSpan;\n                pdfCell.style.stringFormat = _this.getVerticalAlignment('Bottom', pdfCell.style.stringFormat, col.textAlign);\n            }\n            if (colSpan > 0) {\n                pdfCell.columnSpan = colSpan;\n            }\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            pdfCell.value = col.headerText;\n            if (!isNullOrUndefined(cell) && (cell.cellType === CellType.HeaderIndent || cell.cellType === CellType.DetailHeader)) {\n                pdfCell.value = '';\n                pdfCell.width = 20;\n            }\n            var args = {\n                cell: pdfCell,\n                gridCell: cell,\n                style: pdfCell.style\n            };\n            _this.parent.trigger(events.pdfHeaderQueryCellInfo, args);\n        };\n        var recuHeader = function (cols, depth, spanCnt, colIndex, rowIndex, isRoot) {\n            var cidx = 0;\n            for (var i = 0; i < cols.length; i++) {\n                if (isRoot) {\n                    cidx = cidx + spanCnt + (i === 0 ? 0 : -1);\n                    colIndex = cidx;\n                    spanCnt = 0;\n                }\n                if (cols[i].columns && cols[i].columns.length) {\n                    var newSpanCnt = recuHeader(cols[i].columns, depth - 1, 0, i + colIndex, rowIndex + 1, false);\n                    applyTextAndSpan(rowIndex, i + colIndex, cols[i], 0, newSpanCnt);\n                    spanCnt = spanCnt + newSpanCnt;\n                    colIndex = colIndex + newSpanCnt - 1;\n                }\n                else if (cols[i].visible || _this.hideColumnInclude) {\n                    spanCnt++;\n                    applyTextAndSpan(rowIndex, i + colIndex + index, cols[i], depth, 0);\n                }\n            }\n            return spanCnt;\n        };\n        recuHeader(cols, depth, 0, 0, 0, true);\n        if (pdfGrid.columns.count >= 6 && allowHorizontalOverflow) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            var clientSize = this.pdfPageSettings.size;\n            this.drawHeader(pdfExportProperties);\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.currentViewData;\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return dataSource;\n    };\n    PdfExport.prototype.drawHeader = function (pdfExportProperties) {\n        var _this = this;\n        var clientSize = this.pdfPageSettings.size;\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.header)) {\n            /* tslint:disable-next-line:no-any */\n            var header = pdfExportProperties.header;\n            var position = new PointF(0, header.fromTop);\n            var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n            var bounds = new RectangleF(position, size);\n            if (!this.headerOnPages.length) {\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            else {\n                var headerTemplate_1 = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n                this.headerOnPages.filter(function (index) {\n                    if (index - 1 >= 0 && index - 1 < _this.pdfDocument.pages.count - 1) {\n                        _this.pdfDocument.pages.getPageByIndex(index - 1).graphics\n                            .drawPdfTemplate(headerTemplate_1.template, new PointF(0, 0));\n                    }\n                });\n            }\n        }\n    };\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format = new PdfStringFormat();\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                pageCount.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:max-func-body-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex, isGroupedFooter) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                var cell = row.cells[index];\n                if (cell.cellType === CellType.DetailFooterIntent) {\n                    i--;\n                    index++;\n                    continue;\n                }\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (cell.cellType === CellType.DetailFooterIntent) {\n                            continue;\n                        }\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                /* tslint:disable-next-line:max-line-length */\n                                var args = { row: row, type: 'GroupCaption', style: captionRow.cells };\n                                this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                if (!isCaption) {\n                                    i += 1;\n                                }\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        var txt = void 0;\n                        var data = row.data[cell.column.field ? cell.column.field : cell.column.columnName];\n                        if (this.parent.isReact || this.parent.isVue) {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data, this.parent));\n                            if (this.parent.isReact) {\n                                this.parent.renderTemplates();\n                            }\n                        }\n                        else {\n                            txt = (templateFn[getEnumValue(CellType, cell.cellType)](data));\n                        }\n                        value.push(txt[0].textContent);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (isCaption) {\n                for (var i = (this.parent.groupSettings.columns.length) + 1; i < value.length - 1; i++) {\n                    value[i] = value[i + 1];\n                }\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    /* tslint:disable-next-line:max-line-length */\n                    var args = { row: row, type: isGroupedFooter ? 'GroupFooter' : 'Footer', style: gridRow.cells };\n                    this.parent.trigger(events.pdfAggregateQueryCellInfo, args);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1 && leastCaptionSummaryIndex !== 1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, cell) {\n        if (!isNullOrUndefined(cell.column.footerTemplate) && cell.cellType === CellType.Summary) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(cell.column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(cell.column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(cell.column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    /**\n     * Set alignment, width and type of the values of the column\n     */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid, helper, gObj, allowHorizontalOverflow) {\n        var startIndex = gObj.groupSettings.columns.length;\n        for (var i = 0; i < startIndex; i++) {\n            pdfGrid.columns.getColumn(i).width = 20;\n        }\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width) && allowHorizontalOverflow) {\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ?\n                    gridColumns[i].width * 0.75 : helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record)) {\n            var fontFamily = !isNullOrUndefined(this.gridTheme.record.fontName) ?\n                this.getFontFamily(this.gridTheme.record.fontName) : PdfFontFamily.Helvetica;\n            var fontSize = !isNullOrUndefined(this.gridTheme.record.fontSize) ? this.gridTheme.record.fontSize : 9.75;\n            var fontStyle = this.getFontStyle(this.gridTheme.record);\n            var font = new PdfStandardFont(fontFamily, fontSize, fontStyle);\n            if (!isNullOrUndefined(this.gridTheme.record.font)) {\n                font = this.gridTheme.record.font;\n            }\n            row.style.setFont(font);\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        var borderRecord = this.gridTheme && this.gridTheme.record &&\n            this.gridTheme.record.border ? this.getBorderStyle(this.gridTheme.record.border) : border;\n        row.style.setBorder(borderRecord);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, startIndex, pdfExportProperties, helper, rowIndex) {\n        var rows = helper.getGridRowModel(columns, dataSource, gObj, rowIndex);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            rowIndex++;\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            var cellLength = row.cells.length;\n            for (var j = 0; j < cellLength; j++) {\n                var gridCell = row.cells[j];\n                if (gridCell.cellType !== CellType.Data) {\n                    continue;\n                }\n                var column = gridCell.column;\n                var field = column.field;\n                var cellValue = !isNullOrUndefined(field) ? column.valueAccessor(field, row.data, column) : '';\n                var value = !isNullOrUndefined(cellValue) ? cellValue : '';\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = row.data;\n                var cell = gridRow.cells.getCell(j);\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1,\n                    cell: cell\n                };\n                args.value = args.column.type === 'boolean' && typeof args.value === 'string' ? args.value :\n                    this.exportValueFormatter.formatCellValue(args, gObj.isServerRendered);\n                this.parent.trigger(events.pdfQueryCellInfo, args);\n                if (!isNullOrUndefined(args.image)) {\n                    args.value = new PdfBitmap(args.image.base64);\n                }\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.hyperLink)) {\n                    // create the Text Web Link\n                    var textLink = new PdfTextWebLink();\n                    // set the hyperlink\n                    textLink.url = args.hyperLink.target;\n                    // set the link text\n                    textLink.text = args.hyperLink.displayText || args.hyperLink.target;\n                    // set the font\n                    textLink.font = new PdfStandardFont(PdfFontFamily.Helvetica, 9.75);\n                    // set the brush and pen for the text color\n                    textLink.brush = new PdfSolidBrush(new PdfColor(51, 102, 187));\n                    cell.value = textLink;\n                }\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n            if (row.isExpand) {\n                var gridRow_1 = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n                var cell = gridRow_1.cells.getCell(startIndex);\n                cell.columnSpan = gridRow_1.cells.count - (startIndex);\n                cell.style.cellPadding = new PdfPaddings(10, 10, 10, 10);\n                gObj.isPrinting = true;\n                var exportType = (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.exportType) ?\n                    pdfExportProperties.exportType : 'AllPages';\n                var returnValue = this.helper.createChildGrid(gObj, row, exportType, this.gridPool);\n                var childGridObj = returnValue.childGrid;\n                var element = returnValue.element;\n                childGridObj.actionFailure =\n                    helper.failureHandler(this.gridPool, childGridObj, this.globalResolve);\n                var args = { childGrid: childGridObj, row: row, cell: cell, exportProperties: pdfExportProperties };\n                this.parent.trigger(events.exportDetailDataBound, args);\n                childGridObj.beforeDataBound = this.childGridCell(cell, childGridObj, pdfExportProperties);\n                childGridObj.appendTo(element);\n            }\n            this.parent.notify(events.exportRowDataBound, { type: 'pdf', rowObj: row });\n        }\n        return rowIndex;\n    };\n    PdfExport.prototype.childGridCell = function (cell, childGridObj, pdfExportProperties) {\n        var _this = this;\n        return function (result) {\n            childGridObj.beforeDataBound = null;\n            result.cancel = true;\n            cell.value = _this.processGridExport(childGridObj, result, pdfExportProperties);\n            childGridObj.destroy();\n            detach(childGridObj.element);\n            _this.gridPool[childGridObj.id] = true;\n            _this.helper.checkAndExport(_this.gridPool, _this.globalResolve);\n            return cell;\n        };\n    };\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.cellPadding)) {\n            cell.style.cellPadding = args.style.cellPadding;\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) ||\n            !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        if (content.font) {\n            return content.font;\n        }\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ?\n            (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.TimesRoman;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    PdfExport.prototype.getFontStyle = function (theme) {\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(theme) && theme.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(theme) && theme.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(theme) && theme.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(theme) && theme.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return fontStyle;\n    };\n    PdfExport.prototype.getBorderStyle = function (border) {\n        var borders = new PdfBorders();\n        if (!isNullOrUndefined(border)) {\n            var borderWidth = border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? borderWidth * 0.75 : undefined;\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(border.color)) {\n                var borderColor = this.hexToRgb(border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(border.dashStyle);\n            }\n            borders.all = pen;\n        }\n        else {\n            borders.all = new PdfPen(new PdfColor(234, 234, 234));\n        }\n        return borders;\n    };\n    /**\n     * To destroy the pdf export\n     * @return{void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var uid = 'uid';\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            if (this.parent.isReact && typeof (cell.column.commandsTemplate) !== 'string') {\n                var tempID = this.parent + 'commandsTemplate';\n                cell.column.getColumnTemplate()(data, this.parent, 'commandsTemplate', tempID, null, null, node.firstElementChild);\n                this.parent.renderTemplates();\n            }\n            else {\n                appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n            }\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index, command[uid]);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index, uid) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index + '_' + uid, 'type': 'button',\n            title: !isNullOrUndefined(buttonOption.title) ? buttonOption.title :\n                buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type,\n            'data-uid': uid\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { click, keyPressed, commandClick, initialEnd } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\nimport { getUid } from '../base/util';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.initiateRender();\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        var uid = target.getAttribute('data-uid');\n        var commandColumn;\n        var row = gObj.getRowObjectFromUID(closest(target, '.e-row').getAttribute('data-uid'));\n        var cols = this.parent.columnModel;\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].commands) {\n                var commandCols = cols[i].commands;\n                for (var j = 0; j < commandCols.length; j++) {\n                    var idInString = 'uid';\n                    var typeInString = 'type';\n                    if (isBlazor() && !gObj.isJsComponent && commandCols[j][idInString] === uid) {\n                        commandColumn = commandCols[j];\n                        type = commandCols[j][typeInString];\n                    }\n                    else if (commandCols[j][idInString] === uid && commandCols[j][typeInString] === type) {\n                        commandColumn = commandCols[j];\n                    }\n                }\n            }\n        }\n        var args = {\n            cancel: false,\n            target: target,\n            commandColumn: commandColumn,\n            rowData: isNullOrUndefined(row) ? undefined : row.data\n        };\n        this.parent.trigger(commandClick, args, function (commandclickargs) {\n            if (buttonObj.disabled || !gObj.editModule || commandclickargs.cancel) {\n                return;\n            }\n            switch (type) {\n                case 'Edit':\n                    gObj.editModule.endEdit();\n                    gObj.editModule.startEdit(closest(target, 'tr'));\n                    break;\n                case 'Cancel':\n                    gObj.editModule.closeEdit();\n                    break;\n                case 'Save':\n                    gObj.editModule.endEdit();\n                    break;\n                case 'Delete':\n                    if (gObj.editSettings.mode !== 'Batch') {\n                        gObj.editModule.endEdit();\n                    }\n                    gObj.commandDelIndex = parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10);\n                    gObj.clearSelection();\n                    //for toogle issue when dbl click\n                    gObj.selectRow(gObj.commandDelIndex, false);\n                    gObj.editModule.deleteRecord();\n                    gObj.commandDelIndex = undefined;\n                    break;\n            }\n        });\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(keyPressed, this.keyPressHandler);\n        this.parent.off(initialEnd, this.load);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n        this.parent.on(initialEnd, this.load, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    CommandColumn.prototype.load = function () {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return;\n        }\n        var uid = 'uid';\n        var col = this.parent.columnModel;\n        for (var i = 0; i < col.length; i++) {\n            if (col[i].commands) {\n                var commandCol = col[i].commands;\n                for (var j = 0; j < commandCol.length; j++) {\n                    commandCol[j][uid] = getUid('gridcommand');\n                }\n            }\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove, isBlazor } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n        if (e.code === 'Escape') {\n            this.contextMenu.close();\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode === 'Batch') {\n                        if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                            this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                        }\n                    }\n                    else {\n                        this.parent.editModule.endEdit();\n                        this.parent.editModule.startEdit(this.row);\n                    }\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editModule) {\n                    if (this.parent.editSettings.mode !== 'Batch') {\n                        this.parent.editModule.endEdit();\n                    }\n                    if (this.parent.getSelectedRecords().length === 1) {\n                        this.parent.editModule.deleteRow(this.row);\n                    }\n                    else {\n                        this.parent.deleteRecord();\n                    }\n                }\n                break;\n            case 'Save':\n                if (this.parent.editModule) {\n                    this.parent.editModule.endEdit();\n                }\n                break;\n            case 'Cancel':\n                if (this.parent.editModule) {\n                    this.parent.editModule.closeEdit();\n                }\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        args.rowInfo = this.targetRowdata;\n        if (isBlazor()) {\n            var contextMenuClickArgs = args.rowInfo.row ?\n                {\n                    element: args.element, item: args.item, event: args.event, column: this.targetColumn, rowInfo: {\n                        rowData: this.targetRowdata.rowData, rowIndex: this.targetRowdata.rowIndex, cellIndex: this.targetRowdata.cellIndex\n                    }\n                }\n                : this.targetColumn ? { element: args.element, item: args.item, event: args.event, column: this.targetColumn }\n                    : { element: args.element, item: args.item, event: args.event };\n            this.parent.trigger(events.contextMenuClick, contextMenuClickArgs);\n        }\n        else {\n            this.parent.trigger(events.contextMenuClick, args);\n        }\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n        this.parent.notify(events.selectRowOnContextOpen, { isOpen: false });\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.targetRowdata = this.parent.getRowInfo(args.event.target);\n            if ((isNullOrUndefined(args.parentItem)) && this.targetColumn) {\n                if (this.targetRowdata.cell) {\n                    this.parent.notify(events.selectRowOnContextOpen, { isOpen: true });\n                    this.selectRow(args.event, (this.targetRowdata.cell.classList.contains('e-selectionbackground')\n                        && this.parent.selectionSettings.type === 'Multiple') ? false : true);\n                }\n            }\n            var hideSepItems = [];\n            var showSepItems = [];\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editModule && this.parent.editSettings.mode === 'Batch' &&\n                        ((closest(args.event.target, '.e-gridform')) ||\n                            this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                            this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    if (item.separator) {\n                        hideSepItems.push(item.id);\n                    }\n                    else {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (this.ensureTarget(args.event.target, item.target) && item.separator) {\n                    showSepItems.push(item.id);\n                }\n            }\n            if (showSepItems.length > 0) {\n                this.contextMenu.showItems(showSepItems, true);\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            if (hideSepItems.length > 0) {\n                this.contextMenu.hideItems(hideSepItems, true);\n            }\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            args.rowInfo = this.targetRowdata;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (args.cancel || (this.hiddenItems.length === args.items.length && !args.parentItem)) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n        applyBiggerTheme(this.parent.element, this.contextMenu.element.parentElement);\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.isFrozenGrid() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit)\n                    || (this.targetColumn && !this.targetColumn.field && item === 'AutoFit');\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort) ||\n                    (this.targetColumn && !this.targetColumn.field)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    }\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n        if (isBlazor()) {\n            var autoFitAll = 'AutoFitAll';\n            localeKeys[autoFitAll] = 'AutoFitAll';\n            var autoFit = 'AutoFit';\n            localeKeys[autoFit] = 'AutoFit';\n        }\n        return localeKeys;\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            var uid = cell.querySelector('.e-headercelldiv, .e-stackedheadercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        else {\n            var ele = (this.parent.getRowInfo(e.target).column);\n            return ele || null;\n        }\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { splitFrozenRowObjectCells } from '../base/util';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs, virtualRows) {\n        var frzCols = this.parent.getFrozenColumns();\n        var tableName;\n        if (notifyArgs.renderFrozenRightContent || (notifyArgs.renderMovableContent && !this.parent.enableVirtualization)) {\n            tableName = 'frozen-right';\n        }\n        else if (notifyArgs.renderMovableContent || notifyArgs.isFrozen) {\n            tableName = 'movable';\n        }\n        else {\n            tableName = this.parent.getFrozenLeftCount() ? 'frozen-left' : 'frozen-right';\n        }\n        frzCols = frzCols && this.parent.isRowDragable() ? frzCols + 1 : frzCols;\n        if (notifyArgs.requestType === 'virtualscroll' && notifyArgs.virtualInfo.sentinelInfo.axis === 'X') {\n            if (tableName !== 'movable') {\n                return null;\n            }\n        }\n        var row = this.parent.enableVirtualization && !notifyArgs.isFrozenRowsRender ? virtualRows\n            : this.rowModelGenerator.generateRows(data, notifyArgs);\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return row;\n        }\n        for (var i = 0, len = row.length; i < len; i++) {\n            row[i].cells = splitFrozenRowObjectCells(this.parent, row[i].cells, tableName);\n        }\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass, isNullOrUndefined, isBlazor, extend, isUndefined, Browser } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth, wrap } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.isInitialRender = true;\n        _this.widthService = locator.getService('widthService');\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeContentRender.prototype.addEventListener = function () {\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.addEventListener(events.batchAdd, this.batchAdd.bind(this));\n        this.parent.on(events.batchCancel, this.batchAdd.bind(this));\n        this.parent.addEventListener(events.batchDelete, this.batchAdd.bind(this));\n        this.parent.on(events.setHeightToFrozenElement, this.refreshScrollOffset);\n        this.parent.on(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar, this);\n    };\n    FreezeContentRender.prototype.batchAdd = function (args) {\n        var isAdd = args.name !== 'batchCancel'\n            && !(this.parent.frozenRows && this.parent.editSettings.newRowPosition === 'Top');\n        if (this.parent.height !== 'auto' && (isAdd || args.name === 'batchCancel' || args.name === 'batchDelete')) {\n            this.refreshScrollOffset();\n            var height = this.getTable().offsetHeight;\n            if (args.name === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.parent.getContent().firstChild.scroll(0, height);\n            }\n        }\n    };\n    FreezeContentRender.prototype.setHeightToContent = function (height) {\n        this.getFrozenContent().style.height = height.toString() + 'px';\n        this.getMovableContent().style.height = height.toString() + 'px';\n    };\n    FreezeContentRender.prototype.actionComplete = function (args) {\n        if (this.parent.editSettings.mode !== 'Dialog' && (args.requestType === 'add' || (args.requestType === 'cancel'\n            && args.row.classList.contains('e-addedrow')))\n            && (!this.parent.frozenRows || this.parent.editSettings.newRowPosition === 'Bottom') && this.parent.height !== 'auto') {\n            this.refreshScrollOffset();\n            var height = this.getTable().offsetHeight;\n            if (args.requestType === 'add' && this.parent.editSettings.newRowPosition === 'Bottom') {\n                this.parent.getContent().firstChild.scroll(0, height);\n            }\n        }\n    };\n    FreezeContentRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.removeEventListener(events.actionComplete, this.actionComplete);\n        this.parent.removeEventListener(events.batchAdd, this.batchAdd);\n        this.parent.off(events.columnVisibilityChanged, this.widthService.refreshFrozenScrollbar);\n    };\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.element.querySelector('.e-frozencontent');\n        var mDiv = this.parent.element.querySelector('.e-movablecontent');\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-left-content' });\n            mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n            this.getPanel().querySelector('.e-content').appendChild(fDiv);\n            this.getPanel().querySelector('.e-content').appendChild(mDiv);\n            mDiv.style.scrollbarWidth = 'none';\n        }\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n        if (Browser.userAgent.indexOf('Mac OS') > -1 && Browser.info.name === 'safari' && !this.parent.enableVirtualization) {\n            this.getPanel().firstElementChild.classList.add('e-mac-safari');\n        }\n    };\n    FreezeContentRender.prototype.renderFrozenRigthPanel = function () {\n        _super.prototype.renderPanel.call(this);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        if (isBlazor() && !this.parent.isJsComponent) {\n            return;\n        }\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        addClass([this.getMovableContent().querySelector('tbody').querySelector('tr')], ['e-emptyrow']);\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getVisibleFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.renderFrozenRightEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderFrozenRightTable = function () {\n        _super.prototype.renderTable.call(this);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        var mTbl;\n        if (this.getFrozenContent().querySelector('.e-table') == null) {\n            _super.prototype.renderTable.call(this);\n            this.getFrozenContent().appendChild(this.getTable());\n            mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        else {\n            this.setTable(this.getFrozenContent().querySelector('.e-table'));\n            this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n            this.getFrozenContent().querySelector('.e-table').appendChild(this.getColGroup());\n            mTbl = this.getMovableContent().querySelector('.e-table');\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n            }\n        }\n        if (this.getMovableContent().querySelector('colgroup')) {\n            remove(this.getMovableContent().querySelector('colgroup'));\n        }\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n        var style = this.parent.enableVirtualization ? '' : 'flex';\n        this.getPanel().firstChild.style.display = style;\n        this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-left-scrollbar', this.getScrollbarDisplay());\n    };\n    FreezeContentRender.prototype.getScrollbarDisplay = function () {\n        var frozenDisplay = '';\n        if ((this.parent.getFrozenColumns() && !this.parent.getVisibleFrozenColumns())\n            || (this.parent.getFrozenLeftColumnsCount() && !this.parent.getVisibleFrozenLeftCount())) {\n            frozenDisplay = 'none';\n        }\n        return frozenDisplay;\n    };\n    FreezeContentRender.prototype.renderHorizontalScrollbar = function (className, display, isRight) {\n        var left = this.parent.createElement('div', { className: className, styles: 'display:' + display });\n        var movable = this.parent.createElement('div', { className: 'e-movablescrollbar' });\n        var child = this.parent.createElement('div', { className: 'e-movablechild' });\n        var scrollbarHeight = getScrollBarWidth().toString();\n        this.setScrollbarHeight(movable, scrollbarHeight);\n        this.setScrollbarHeight(child, scrollbarHeight);\n        movable.appendChild(child);\n        this.appendScrollbar(left, movable, isRight);\n    };\n    FreezeContentRender.prototype.appendScrollbar = function (frozen, movable, isRight) {\n        var parent = this.parent.createElement('div', { className: 'e-scrollbar', styles: 'display: flex' });\n        parent.appendChild(frozen);\n        parent.appendChild(movable);\n        this.parent.getContent().appendChild(parent);\n    };\n    FreezeContentRender.prototype.setScrollbarHeight = function (ele, height) {\n        ele.style.minHeight = height + 'px';\n        ele.style.maxHeight = height + 'px';\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.setIsFrozen = function (args, tableName) {\n        args.isFrozen = !args.isFrozen;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.setTbody = function (modelData, args) {\n        var tableName;\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            this.getMovableContent().querySelector('tbody').innerHTML = '';\n        }\n        var cell = modelData[0].cells[0];\n        var idx = cell.index;\n        if (isUndefined(idx) && this.parent.isRowDragable()) {\n            cell = modelData[0].cells[1];\n            idx = cell.index;\n        }\n        if (idx === 0) {\n            this.getPanel().firstChild.style.overflowX = 'hidden';\n            if (this.parent.enableColumnVirtualization) {\n                this.getMovableContent().style.overflowX = 'hidden';\n            }\n        }\n        if (this.parent.enableColumnVirtualization && args.renderMovableContent\n            && args.requestType === 'virtualscroll' && this.getMovableContent().scrollLeft > 0 && args.virtualInfo.columnIndexes[0] !== 0) {\n            idx = this.parent.getFrozenColumns();\n        }\n        if (cell && cell.column) {\n            tableName = cell.column.getFreezeTableName();\n        }\n        this.setIdx(idx);\n        return tableName;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.splitRows = function (tableName) {\n        if (tableName === 'frozen-left') {\n            this.freezeRows = this.rows;\n            this.freezeRowElements = this.rowElements;\n        }\n        else {\n            this.movableRows = this.rows;\n        }\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.renderNextFrozentPart = function (args, tableName) {\n        var isVFTable = this.parent.enableVirtualization;\n        if (tableName === 'frozen-left') {\n            if (isVFTable) {\n                args.renderMovableContent = true;\n            }\n            this.refreshContentRows(extend({}, args));\n        }\n    };\n    FreezeContentRender.prototype.appendContent = function (tbody, frag, args, tableName) {\n        if (this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate)) {\n            tbody = frag;\n        }\n        else {\n            tbody.appendChild(frag);\n        }\n        if (tableName === 'frozen-left') {\n            this.isLoaded = false;\n            this.getFrozenContent().querySelector('table').appendChild(tbody);\n        }\n        else {\n            this.refreshTbody(tbody);\n            this.isLoaded = true;\n            this.getMovableContent().querySelector('table').appendChild(tbody);\n            this.refreshHeight();\n            this.refreshScrollOffset();\n            this.widthService.refreshFrozenScrollbar();\n        }\n        if (this.isInitialRender) {\n            this.parent.scrollModule.setHeight();\n            this.isInitialRender = false;\n        }\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.refreshScrollOffset = function () {\n        if (this.parent.height !== 'auto') {\n            var height = this.getTable().offsetHeight + 1;\n            this.setHeightToContent(height);\n        }\n        this.parent.notify(events.refreshFrozenHeight, {});\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.getFrozenHeader = function (tableName) {\n        if (tableName === 'frozen-left') {\n            return this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n        }\n        else {\n            return this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n        }\n    };\n    FreezeContentRender.prototype.refreshTbody = function (tbody) {\n        if (tbody.childElementCount < 1) {\n            tbody.appendChild(this.parent.createElement('tr').appendChild(this.parent.createElement('td')));\n        }\n    };\n    FreezeContentRender.prototype.refreshHeight = function () {\n        if (!this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n        }\n        this.getFrozenContent().style.borderRightWidth = '1px';\n    };\n    FreezeContentRender.prototype.setIdx = function (idx) {\n        this.idx = idx;\n    };\n    FreezeContentRender.prototype.getIdx = function () {\n        return this.idx;\n    };\n    /**\n     * @hidden\n     */\n    FreezeContentRender.prototype.getTbody = function (tableName) {\n        if (tableName === 'frozen-left') {\n            return this.getTable().querySelector('tbody');\n        }\n        else {\n            return this.getMovableContent().querySelector('tbody');\n        }\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        if (!isBlazor()) {\n            _super.prototype.renderTable.call(this);\n        }\n        else {\n            this.setTable(this.createTable(this.getFrozenHeader().querySelector('.e-table')));\n            this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: true } });\n            this.createTable(this.getMovableHeader().querySelector('.e-table'));\n        }\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        var fDiv = this.parent.element.querySelector('.e-frozenheader');\n        var mDiv = this.parent.element.querySelector('.e-movableheader');\n        _super.prototype.renderPanel.call(this);\n        if (isNullOrUndefined(fDiv)) {\n            fDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-left-header' });\n            mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n            this.getPanel().querySelector('.e-headercontent').appendChild(fDiv);\n            this.getPanel().querySelector('.e-headercontent').appendChild(mDiv);\n        }\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.renderFrozenRightPanel = function () {\n        _super.prototype.renderPanel.call(this);\n    };\n    FreezeRender.prototype.renderFrozenRightTable = function () {\n        _super.prototype.renderTable.call(this);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        if (!(isBlazor() && this.parent.isServerRendered) || this.parent.frozenRows === 0) {\n            var tbody = this.getMovableHeader().querySelector('tbody');\n            remove(this.getMovableHeader().querySelector('table'));\n            _super.prototype.refreshUI.call(this);\n            this.rfshMovable();\n            this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        }\n        else {\n            if (this.parent.getFrozenColumns() && this.freezeReorder) {\n                _super.prototype.refreshUI.call(this);\n                this.freezeReorder = false;\n                _super.prototype.refreshUI.call(this);\n            }\n            this.rfshMovable();\n        }\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            this.updateColgroup();\n        }\n        if (!this.parent.enableVirtualization) {\n            this.widthService.setWidthToTable();\n        }\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.movableHeader.querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent);\n        }\n        this.widthService.refreshFrozenScrollbar();\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.refreshFrozenLeftUI = function () {\n        _super.prototype.refreshUI.call(this);\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        if (!isBlazor() || this.parent.frozenRows === 0) {\n            this.getFrozenHeader().appendChild(this.getTable());\n            this.getMovableHeader().appendChild(this.createHeader(undefined, 'movable'));\n        }\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = movablefirstcell.length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.filterRenderer(filterRow, this.parent.getFrozenColumns()));\n                var elements = [].slice.call(this.getMovableHeader().\n                    querySelectorAll('thead .e-filterbarcell .e-input'));\n                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                    var elem = elements_1[_i];\n                    var args = {\n                        element: elem, floatLabelType: 'Never',\n                        properties: {\n                            enableRtl: this.parent.enableRtl, showClearButton: true\n                        }\n                    };\n                    Input.bindInitialEvent(args);\n                }\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            this.refreshHeight(obj);\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    FreezeRender.prototype.refreshHeight = function (obj) {\n        var fRows;\n        var mRows;\n        var fHdr = this.getFrozenHeader();\n        var mHdr = this.getMovableHeader();\n        var cont = this.parent.getContent();\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var hdrClassList = this.parent.getHeaderContent().querySelector('.e-headercontent').classList;\n        if (obj.case === 'textwrap') {\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                    'tbody' : 'thead').querySelectorAll('tr');\n                fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                    'tbody' : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n            }\n            this.refreshStackedHdrHgt();\n        }\n        else if (obj.case === 'refreshHeight') {\n            this.setWrapHeight(cont.querySelector('.e-frozencontent').querySelectorAll('tr'), cont.querySelector('.e-movablecontent').querySelectorAll('tr'), obj.isModeChg);\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fHdr.querySelectorAll('tr'), mHdr.querySelectorAll('tr'), obj.isModeChg);\n            }\n        }\n    };\n    FreezeRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'scroll') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        var elements = [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler'));\n        for (var i = 0; i < elements.length; i++) {\n            elements[i].style.height = elements[i].parentElement.offsetHeight + 'px';\n        }\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n                height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n                width[i] = mRows[i].getBoundingClientRect().height;\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) ||\n                (!isWrap && fRowHgt < mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === false))) {\n                fRows[i].style.height = mRowHgt + 'px';\n            }\n            if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) ||\n                (!isWrap && fRowHgt > mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                mRows[i].style.height = fRowHgt + 'px';\n            }\n        }\n        if (isWrap && this.parent.height !== 'auto') {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function (height) {\n        if (height === void 0) { height = getScrollBarWidth(); }\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var movableContent = this.parent.element.querySelector('.e-movablecontent');\n        var frozenContent = this.parent.element.querySelector('.e-frozencontent');\n        var contentScrollWidth = this.parent.getContent().scrollWidth;\n        var contentTableScrollWidth = this.parent.element.querySelector('.e-movablecontent table').scrollWidth +\n            this.parent.getContentTable().scrollWidth;\n        if (movableContent.scrollWidth - movableContent.clientWidth) {\n            frozenContent.style.height = movableContentHeight -\n                height + 'px';\n            frozenContent.style.borderBottom = '';\n        }\n        else {\n            frozenContent.style.height = movableContentHeight + 'px';\n            if (((frozenContent.scrollHeight <= frozenContent.clientHeight) ||\n                (movableContent.scrollHeight <= movableContent.clientHeight))\n                && contentScrollWidth === contentTableScrollWidth) {\n                this.parent.scrollModule.removePadding();\n            }\n            frozenContent.style.borderBottom = '0px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    /**\n     * @hidden\n     */\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    /**\n     * @hidden\n     */\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns(), this.parent), mTable.querySelector('thead'));\n    };\n    FreezeRender.prototype.filterRenderer = function (ele, frozenColumn, total) {\n        var clone = ele.cloneNode(true);\n        clone.innerHTML = '';\n        var end = total ? total : this.parent.getColumns().length;\n        for (var i = frozenColumn; i < end; i++) {\n            clone.appendChild(ele.removeChild(ele.children[frozenColumn]));\n        }\n        return clone;\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass, isNullOrUndefined, extend, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { FreezeContentRender, FreezeRender } from './freeze-renderer';\nimport * as events from '../base/constant';\nimport { wrap, parentsUntil } from '../base/util';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * ColumnFreezeHeaderRenderer is used to freeze the columns header at right and left\n * @hidden\n */\nvar ColumnFreezeHeaderRenderer = /** @class */ (function (_super) {\n    __extends(ColumnFreezeHeaderRenderer, _super);\n    function ColumnFreezeHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    ColumnFreezeHeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.refreshFrozenColumns, this.refreshFrozenColumns, this);\n        this.parent.on(events.setReorderDestinationElement, this.setReorderElement, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n    };\n    ColumnFreezeHeaderRenderer.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.freezeRender, this.refreshFreeze);\n        this.parent.off(events.refreshFrozenColumns, this.refreshFrozenColumns);\n        this.parent.off(events.setReorderDestinationElement, this.setReorderElement);\n        this.parent.off(events.columnVisibilityChanged, this.setVisible);\n    };\n    ColumnFreezeHeaderRenderer.prototype.setReorderElement = function (args) {\n        this.destEle = args.ele;\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshFrozenColumns = function (args) {\n        if (!args.parent) {\n            this.parent.setProperties({ columns: args.columns }, true);\n        }\n        var isFrozenLeft = parentsUntil(this.destEle, 'e-frozen-left-header');\n        var isFrozenRight = parentsUntil(this.destEle, 'e-frozen-right-header');\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        args.column.freeze = null;\n        if (isFrozenLeft) {\n            args.column.freeze = 'Left';\n        }\n        else if (isFrozenRight) {\n            args.column.freeze = 'Right';\n        }\n        this.parent.setFrozenCount();\n        args.cancel = left !== this.parent.getFrozenLeftColumnsCount() || right !== this.parent.getFrozenRightColumnsCount();\n        if (args.cancel) {\n            this.parent.refreshColumns();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr, frRows) {\n        var fRowHgt;\n        var mRowHgt;\n        var frRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var height = [];\n        var width = [];\n        var rightHeight = [];\n        for (var i = 0, len = fRows.length; i < len; i++) { //separate loop for performance issue \n            if (!isNullOrUndefined(fRows[i]) && !isNullOrUndefined(mRows[i])) {\n                if (frRows) {\n                    rightHeight[i] = frRows[i].getBoundingClientRect().height;\n                }\n                width[i] = mRows[i].getBoundingClientRect().height;\n                height[i] = fRows[i].getBoundingClientRect().height; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n            }\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && (((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i]))) || (wrapMode === 'Header' && isContReset)) || isStackedHdr) {\n                if (frRows[i]) {\n                    frRows[i].style.height = null;\n                }\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            frRowHgt = rightHeight[i] ? rightHeight[i] : 0;\n            var maxHeight = Math.max(fRowHgt, mRowHgt, frRowHgt);\n            if (!isNullOrUndefined(fRows[i]) && fRows[i].childElementCount && ((isWrap && fRowHgt < maxHeight) ||\n                (!isWrap && fRowHgt < maxHeight) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === false))) {\n                fRows[i].style.height = maxHeight + 'px';\n            }\n            if (mRows && !isNullOrUndefined(mRows[i]) && mRows[i].childElementCount && ((isWrap && maxHeight > mRowHgt) ||\n                (!isWrap && maxHeight > mRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                mRows[i].style.height = maxHeight + 'px';\n            }\n            if (frRows && !isNullOrUndefined(frRows[i]) && frRows[i].childElementCount && ((isWrap && maxHeight > frRowHgt) ||\n                (!isWrap && maxHeight > frRowHgt) || (this.parent.allowResizing && this.parent.resizeModule &&\n                this.parent.resizeModule.isFrozenColResized === true))) {\n                frRows[i].style.height = maxHeight + 'px';\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshHeight = function (obj) {\n        var isLeftRight = this.parent.getFrozenMode() === 'Left-Right';\n        var fRows;\n        var frRows;\n        var mRows;\n        var frHdr = this.getFrozenRightHeader();\n        var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader');\n        var cont = this.parent.getContent();\n        var mHdr = this.getMovableHeader();\n        var hdrClassList = this.parent.getHeaderContent().querySelector('.e-headercontent').classList;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        if (obj.case === 'textwrap') {\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                if (isLeftRight) {\n                    frRows = cont.querySelector('.e-frozen-right-content').querySelectorAll('tr');\n                }\n                mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true, false, frRows);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                if (isLeftRight) {\n                    frRows = frHdr.querySelectorAll('tr');\n                }\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                if (isLeftRight) {\n                    frRows = frHdr.querySelector(wrapMode === 'Content' ?\n                        'tbody' : 'thead').querySelectorAll('tr');\n                }\n                fRows = fHdr.querySelector(wrapMode === 'Content' ?\n                    'tbody' : 'thead').querySelectorAll('tr');\n                mRows = mHdr.querySelector(wrapMode === 'Content' ?\n                    'tbody' : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1, frRows);\n            }\n            this.refreshStackedHdrHgt();\n        }\n        else if (obj.case === 'refreshHeight') {\n            mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n            fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n            if (isLeftRight) {\n                frRows = cont.querySelector('.e-frozen-right-content').querySelectorAll('tr');\n            }\n            this.setWrapHeight(fRows, mRows, obj.isModeChg, false, false, frRows);\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                if (isLeftRight) {\n                    frRows = frHdr.querySelectorAll('tr');\n                }\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, false, frRows);\n            }\n        }\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ColumnFreezeHeaderRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var displayVal;\n        var idx;\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            displayVal = column.visible ? '' : 'none';\n            if (column.freeze === 'Left' || column.freeze === 'Right') {\n                if (left && !right) {\n                    var leftColGrp = gObj.getHeaderContent().querySelector('.e-frozen-left-header').querySelector('colgroup');\n                    setStyleAttribute(leftColGrp.children[idx], { 'display': displayVal });\n                }\n                else if (!left && right) {\n                    var rightColGrp = gObj.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('colgroup');\n                    setStyleAttribute(rightColGrp.children[idx - movable], { 'display': displayVal });\n                }\n            }\n            else {\n                var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                setStyleAttribute(mTblColGrp.children[idx - left], { 'display': displayVal });\n            }\n        }\n        this.refreshUI();\n    };\n    ColumnFreezeHeaderRenderer.prototype.filterRenderer = function (ele, frozenColumn, total) {\n        return _super.prototype.filterRenderer.call(this, ele, frozenColumn, total);\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshUI = function () {\n        var frTbody;\n        var tbody = this.getMovableHeader().querySelector('tbody');\n        remove(this.getMovableHeader().querySelector('table'));\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            frTbody = this.getFrozenRightHeader().querySelector('tbody');\n            remove(this.getFrozenRightHeader().querySelector('table'));\n        }\n        _super.prototype.refreshFrozenLeftUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        if (frTbody) {\n            this.getFrozenRightHeader().querySelector('tbody').innerHTML = frTbody.innerHTML;\n        }\n        this.updateColgroup();\n        this.widthService.setWidthToColumns();\n        this.parent.notify(events.colGroupRefresh, {});\n        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n            wrap([].slice.call(this.getMovableHeader().querySelectorAll('tr.e-columnheader')), true);\n        }\n        this.parent.updateDefaultCursor();\n        var mTbl = this.parent.getContent().querySelector('.e-movablecontent').querySelector('.e-table');\n        remove(mTbl.querySelector('colgroup'));\n        var mColGroup = (this.getMovableHeader().querySelector('colgroup').cloneNode(true));\n        mTbl.insertBefore(mColGroup, mTbl.querySelector('tbody'));\n        if (frTbody) {\n            var frtbl = this.parent.getContent().querySelector('.e-frozen-right-content').querySelector('.e-table');\n            remove(frtbl.querySelector('colgroup'));\n            var frtblColGroup = (this.getFrozenRightHeader().querySelector('colgroup').cloneNode(true));\n            frtbl.insertBefore(frtblColGroup, frtbl.querySelector('tbody'));\n        }\n        this.widthService.refreshFrozenScrollbar();\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshFreeze = function (obj) {\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                var isDraggable = this.parent.isRowDragable();\n                var index = left ? isDraggable ? left + 1 : left : 0;\n                var total = left + movable + (left && isDraggable ? 1 : 0);\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(this.filterRenderer(filterRow, index, total));\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    var ele = [].slice.call(this.getMovableHeader().\n                        querySelectorAll('thead .e-filterbarcell .e-input'));\n                    this.getFrozenRightHeader().querySelector('thead').appendChild(this.filterRenderer(filterRow, index, index + right));\n                    this.adjudtFilterBarCell(ele);\n                }\n                var elements = [].slice.call(this.getMovableHeader().\n                    querySelectorAll('thead .e-filterbarcell .e-input'));\n                this.adjudtFilterBarCell(elements);\n            }\n        }\n        else if (obj.case === 'textwrap' || obj.case === 'refreshHeight') {\n            this.refreshHeight(obj);\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateFrozenColGroup = function (cols, colGroup) {\n        if (cols && cols.visible === false) {\n            setStyleAttribute(colGroup, { 'display': 'none' });\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.adjudtFilterBarCell = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            var args = {\n                element: elem, floatLabelType: 'Never',\n                properties: {\n                    enableRtl: this.parent.enableRtl, showClearButton: true\n                }\n            };\n            Input.bindInitialEvent(args);\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderPanel = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderPanel.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderLeftWithRightFrozenPanel();\n            }\n        }\n        else {\n            this.renderRightFrozenPanelAlone();\n        }\n        this.getPanel().firstChild.style.display = 'flex';\n        this.getMovableHeader().style.flex = '1';\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderTable = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderTable.call(this);\n        }\n        else {\n            this.renderFrozenRightTableAlone();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.rfshMovable = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.rfshMovable.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                var rows = this.rows;\n                this.getFrozenRightHeader().appendChild(this.createHeader(undefined, 'frozen-right'));\n                this.refreshStackedHdrHgt();\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { renderFrozenRightContent: true } });\n                this.rows = rows;\n            }\n        }\n        else {\n            this.getFrozenRightHeader().appendChild(this.getTable());\n            this.getMovableHeader().appendChild(this.createHeader(undefined, 'movable'));\n            this.refreshStackedHdrHgt();\n            this.addMovableFirstCls();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshStackedHdrHgt = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.refreshStackedHdrHgt.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.refreshFrozenRightStackedHdrHgt();\n            }\n        }\n        else {\n            this.refreshFrozenRightStackedHdrHgt();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.refreshFrozenRightStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var frTr = this.getFrozenRightHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = frTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(frTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, frTr[i], mTr);\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeHeaderRenderer.prototype.updateColgroup = function () {\n        this.updateMovableColGroup();\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            this.updateFrozenLeftColGroup();\n        }\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.updateFrozenRightColGroup();\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderRightFrozenPanelAlone = function () {\n        var mDiv = this.parent.element.querySelector('.e-movableheader');\n        var fRightDiv = this.parent.element.querySelector('.e-frozen-right-header');\n        _super.prototype.renderFrozenRightPanel.call(this);\n        if (isNullOrUndefined(fRightDiv)) {\n            mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n            fRightDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-right-header' });\n            this.getPanel().querySelector('.e-headercontent').appendChild(mDiv);\n            this.getPanel().querySelector('.e-headercontent').appendChild(fRightDiv);\n        }\n        _super.prototype.setMovableHeader.call(this, mDiv);\n        this.setFrozenRightHeader(fRightDiv);\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderLeftWithRightFrozenPanel = function () {\n        var fRightDiv = this.parent.element.querySelector('.e-frozen-right-header');\n        _super.prototype.renderFrozenRightPanel.call(this);\n        if (isNullOrUndefined(fRightDiv)) {\n            fRightDiv = this.parent.createElement('div', { className: 'e-frozenheader e-frozen-right-header' });\n            this.getPanel().querySelector('.e-headercontent').appendChild(fRightDiv);\n        }\n        this.setFrozenRightHeader(fRightDiv);\n    };\n    ColumnFreezeHeaderRenderer.prototype.renderFrozenRightTableAlone = function () {\n        _super.prototype.renderFrozenRightTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateFrozenLeftColGroup = function () {\n        var leftColGroup = this.getFrozenHeader().querySelector('colgroup').children;\n        var start = this.parent.isRowDragable() ? 1 : 0;\n        var count = this.parent.isRowDragable() ? this.parent.getFrozenLeftColumnsCount() + 1\n            : this.parent.getFrozenLeftColumnsCount();\n        for (var i = start; i < leftColGroup.length; i++) {\n            if (i >= count) {\n                remove(leftColGroup[i]);\n                i--;\n            }\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateMovableColGroup = function () {\n        var movableColGroup = this.getMovableHeader().querySelector('colgroup').children;\n        if (this.parent.isRowDragable()) {\n            remove(movableColGroup[0]);\n        }\n        var length = movableColGroup.length;\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var k = 0;\n        for (var i = 0; i < length; i++, k++) {\n            if (i < left || i >= left + movable) {\n                remove(movableColGroup[k]);\n                k--;\n            }\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.updateFrozenRightColGroup = function () {\n        var isDraggable = this.parent.isRowDragable();\n        var rightColumns = this.parent.getFrozenRightColumns();\n        var rightColGroup = this.getFrozenRightHeader().querySelector('colgroup').children;\n        if (this.parent.getFrozenMode() === 'Left-Right' && isDraggable) {\n            remove(rightColGroup[0]);\n        }\n        var length = rightColGroup.length;\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var movable = this.parent.getMovableColumnsCount();\n        var k = 0;\n        for (var i = 0; i < length; i++) {\n            if (i < left + movable) {\n                remove(rightColGroup[0]);\n            }\n            else {\n                this.updateFrozenColGroup(rightColumns[k], rightColGroup[k]);\n                k++;\n            }\n        }\n    };\n    ColumnFreezeHeaderRenderer.prototype.setFrozenRightHeader = function (ele) {\n        this.frozenRightHeader = ele;\n    };\n    ColumnFreezeHeaderRenderer.prototype.getFrozenRightHeader = function () {\n        return this.frozenRightHeader;\n    };\n    return ColumnFreezeHeaderRenderer;\n}(FreezeRender));\nexport { ColumnFreezeHeaderRenderer };\n/**\n * ColumnFreezeContentRenderer is used to freeze the columns content at right and left\n * @hidden\n */\nvar ColumnFreezeContentRenderer = /** @class */ (function (_super) {\n    __extends(ColumnFreezeContentRenderer, _super);\n    function ColumnFreezeContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.frzCount = 0;\n        _this.isColGroupRefresh = false;\n        _this.widthService = locator.getService('widthService');\n        return _this;\n    }\n    ColumnFreezeContentRenderer.prototype.renderPanel = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderPanel.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderFrozenLeftWithRightPanel();\n            }\n        }\n        else {\n            this.renderFrozenRightPanelAlone();\n        }\n        var display = this.parent.enableVirtualization ? '' : 'flex';\n        this.getPanel().firstChild.style.display = display;\n    };\n    ColumnFreezeContentRenderer.prototype.renderTable = function () {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderTable.call(this);\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderFrozenLeftWithRightTable();\n                var display = !this.parent.getVisibleFrozenRightCount() ? 'none' : '';\n                this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-right-scrollbar', display, true);\n            }\n        }\n        else {\n            this.renderFrozenRightTableAlone();\n            var display = !this.parent.getVisibleFrozenRightCount() ? 'none' : '';\n            this.renderHorizontalScrollbar('e-frozenscrollbar e-frozen-right-scrollbar', display);\n        }\n        this.getMovableContent().style.flex = '1';\n    };\n    ColumnFreezeContentRenderer.prototype.appendScrollbar = function (frozen, movable, isRight) {\n        var parent = this.parent.createElement('div', { className: 'e-scrollbar', styles: 'display: flex' });\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            if (!isRight) {\n                parent.appendChild(frozen);\n                parent.appendChild(movable);\n            }\n            else {\n                this.parent.getContent().querySelector('.e-scrollbar').appendChild(frozen);\n                return;\n            }\n        }\n        else {\n            parent.appendChild(movable);\n            parent.appendChild(frozen);\n        }\n        this.parent.getContent().appendChild(parent);\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenRightPanelAlone = function () {\n        this.renderFrozenRigthPanel();\n        var mDiv = this.parent.element.querySelector('.e-movablecontent');\n        var fRightContent = this.parent.element.querySelector('.e-frozen-right-content');\n        if (isNullOrUndefined(fRightContent)) {\n            mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n            fRightContent = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-right-content' });\n            this.getPanel().querySelector('.e-content').appendChild(mDiv);\n            this.getPanel().querySelector('.e-content').appendChild(fRightContent);\n        }\n        _super.prototype.setMovableContent.call(this, mDiv);\n        this.setFrozenRightContent(fRightContent);\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenLeftWithRightPanel = function () {\n        this.renderFrozenRigthPanel();\n        var fRightContent = this.parent.element.querySelector('.e-frozen-right-content');\n        if (isNullOrUndefined(fRightContent)) {\n            fRightContent = this.parent.createElement('div', { className: 'e-frozencontent e-frozen-right-content' });\n            this.getPanel().querySelector('.e-content').appendChild(fRightContent);\n        }\n        this.setFrozenRightContent(fRightContent);\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenRightTableAlone = function () {\n        var mTbl;\n        if (this.getFrozenRightContent().querySelector('.e-table') == null) {\n            _super.prototype.renderFrozenRightTable.call(this);\n            this.getFrozenRightContent().appendChild(this.getTable());\n            mTbl = this.getTable().cloneNode(true);\n            this.getMovableContent().appendChild(mTbl);\n        }\n        else {\n            if (this.parent.frozenRows) {\n                this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n            }\n            this.setTable(this.getFrozenRightContent().querySelector('.e-table'));\n            this.setColGroup(this.getFrozenRightHeaderColGroup());\n            mTbl = this.getMovableContent().querySelector('.e-table');\n            this.getFrozenRightContent().querySelector('.e-table').appendChild(this.getColGroup());\n        }\n        if (this.getMovableContent().querySelector('colgroup')) {\n            remove(this.getMovableContent().querySelector('colgroup'));\n        }\n        var colgroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader')\n            .querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colgroup, mTbl.querySelector('tbody'));\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenLeftWithRightTable = function () {\n        var frozenRight = this.getTable().cloneNode(true);\n        this.getFrozenRightContent().appendChild(frozenRight);\n        var oldColGroup = this.getFrozenRightContent().querySelector('colgroup');\n        if (oldColGroup) {\n            remove(oldColGroup);\n        }\n        var rightTable = this.getFrozenRightContent().querySelector('.e-table');\n        rightTable.insertBefore(this.getFrozenRightHeaderColGroup(), rightTable.querySelector('tbody'));\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenRightEmptyRowAlone = function (tbody) {\n        _super.prototype.renderFrozenRightEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        addClass([this.parent.getMovableContentTbody().querySelector('tr')], ['e-emptyrow']);\n        this.getFrozenRightContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getVisibleFrozenRightCount();\n        if (this.parent.frozenRows) {\n            this.parent.getFrozenRightHeaderTbody().innerHTML = '';\n            this.parent.getMovableHeaderTbody().innerHTML = '';\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenHeader = function (tableName) {\n        if (tableName === 'frozen-left') {\n            return this.parent.getHeaderContent().querySelector('.e-frozen-left-header').querySelector('tbody');\n        }\n        else if (tableName === 'movable') {\n            return this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n        }\n        else {\n            return this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('tbody');\n        }\n    };\n    ColumnFreezeContentRenderer.prototype.renderFrozenLeftWithRightEmptyRow = function () {\n        this.getFrozenRightContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        addClass([this.getFrozenRightContent().querySelector('tbody').querySelector('tr')], ['e-emptyrow']);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('tbody').innerHTML = '';\n        }\n    };\n    ColumnFreezeContentRenderer.prototype.setFrozenRightContent = function (ele) {\n        this.frozenRigthContent = ele;\n    };\n    ColumnFreezeContentRenderer.prototype.getFrozenRightContent = function () {\n        return this.frozenRigthContent;\n    };\n    ColumnFreezeContentRenderer.prototype.getHeaderColGroup = function () {\n        var colGroup = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (!this.parent.getFrozenLeftColumnsCount()) {\n            var right = this.getFrozenRightHeaderColGroup();\n            colGroup = right && this.frzCount ? right.cloneNode(true) : colGroup;\n            this.frzCount++;\n            this.isColGroupRefresh = true;\n        }\n        return colGroup;\n    };\n    ColumnFreezeContentRenderer.prototype.getFrozenRightHeaderColGroup = function () {\n        var col = this.parent.getHeaderContent().querySelector('.e-frozen-right-header').querySelector('colgroup');\n        if (!col) {\n            col = this.parent.getHeaderContent().querySelector('colgroup');\n        }\n        return col.cloneNode(true);\n    };\n    ColumnFreezeContentRenderer.prototype.setColGroup = function (colGroup) {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            return _super.prototype.setColGroup.call(this, colGroup);\n        }\n        else {\n            colGroup = !this.isColGroupRefresh ? this.getFrozenRightHeaderColGroup() : colGroup;\n            if (!isNullOrUndefined(colGroup)) {\n                colGroup.id = 'content-' + colGroup.id;\n            }\n            this.isColGroupRefresh = false;\n            if (this.frzCount === 2) {\n                this.frzCount = 0;\n            }\n            return this.colgroup = colGroup;\n        }\n    };\n    ColumnFreezeContentRenderer.prototype.renderEmpty = function (tbody) {\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            _super.prototype.renderEmpty.call(this, tbody);\n            this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getVisibleFrozenLeftCount();\n            if (this.parent.getFrozenRightColumnsCount()) {\n                this.renderFrozenLeftWithRightEmptyRow();\n            }\n        }\n        else {\n            this.renderFrozenRightEmptyRowAlone(tbody);\n        }\n        this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n    };\n    ColumnFreezeContentRenderer.prototype.setHeightToContent = function (height) {\n        if (this.parent.getFrozenRightColumnsCount()) {\n            this.getFrozenRightContent().style.height = height.toString() + 'px';\n        }\n        if (this.parent.getFrozenLeftColumnsCount()) {\n            this.getFrozenContent().style.height = height.toString() + 'px';\n        }\n        this.getMovableContent().style.height = height.toString() + 'px';\n    };\n    ColumnFreezeContentRenderer.prototype.actionComplete = function (args) {\n        _super.prototype.actionComplete.call(this, args);\n    };\n    ColumnFreezeContentRenderer.prototype.batchAdd = function (args) {\n        _super.prototype.batchAdd.call(this, args);\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.getTbody = function (tableName) {\n        var tbody;\n        if (tableName === 'frozen-left') {\n            tbody = this.parent.getFrozenLeftContentTbody();\n        }\n        else if (tableName === 'movable') {\n            tbody = this.parent.getMovableContentTbody();\n        }\n        else if (tableName === 'frozen-right') {\n            tbody = this.parent.getFrozenRightContentTbody();\n        }\n        return tbody;\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.setIsFrozen = function (args, tableName) {\n        args.isFrozen = (tableName === 'frozen-left' || (this.parent.getFrozenMode() === 'Right'\n            && tableName === 'frozen-right'));\n        args.renderFrozenRightContent = this.parent.getFrozenMode() === 'Left-Right' && tableName === 'frozen-right';\n        args.renderMovableContent = tableName === 'movable';\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.appendContent = function (tbody, frag, args, tableName) {\n        if (!isNullOrUndefined(this.parent.rowTemplate) && this.parent.isReact) {\n            tbody = frag;\n        }\n        else {\n            tbody.appendChild(frag);\n        }\n        if (this.parent.getFrozenMode() === 'Left') {\n            if (tableName === 'frozen-left') {\n                this.isLoaded = false;\n                this.getFrozenContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n            else {\n                this.refreshTbody(tbody);\n                this.isLoaded = true;\n                this.getMovableContent().querySelector('table').appendChild(tbody);\n                this.refreshHeight();\n                this.refreshScrollOffset();\n            }\n        }\n        else if (this.parent.getFrozenMode() === 'Right') {\n            if (tableName === 'movable') {\n                this.refreshTbody(tbody);\n                this.isLoaded = true;\n                this.getMovableContent().querySelector('table').appendChild(tbody);\n                this.refreshHeight();\n                this.refreshScrollOffset();\n            }\n            else {\n                this.isLoaded = false;\n                this.getFrozenRightContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n        }\n        else if (this.parent.getFrozenMode() === 'Left-Right') {\n            if (tableName === 'frozen-left') {\n                this.isLoaded = false;\n                this.getFrozenContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n            else if (tableName === 'movable') {\n                this.refreshTbody(tbody);\n                this.isLoaded = false;\n                this.getMovableContent().querySelector('table').appendChild(tbody);\n                this.refreshContentRows(extend({}, args));\n            }\n            else {\n                this.isLoaded = true;\n                this.getFrozenRightContent().querySelector('table').appendChild(tbody);\n                this.refreshHeight();\n                this.refreshScrollOffset();\n            }\n        }\n        if (this.isInitialRender) {\n            this.parent.scrollModule.setHeight();\n            this.isInitialRender = false;\n        }\n        this.widthService.refreshFrozenScrollbar();\n    };\n    ColumnFreezeContentRenderer.prototype.refreshHeight = function () {\n        if (!this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.splitRows = function (tableName) {\n        var left = this.parent.getFrozenLeftColumnsCount();\n        var right = this.parent.getFrozenRightColumnsCount();\n        if (left && !right) {\n            if (tableName === 'frozen-left') {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n        else if (!left && right) {\n            if (tableName === 'movable') {\n                this.movableRows = this.rows;\n            }\n            else {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n        }\n        else if (left && right) {\n            if (tableName === 'frozen-left') {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else if (tableName === 'movable') {\n                this.movableRows = this.rows;\n                this.movableRowElements = this.rowElements;\n            }\n            else {\n                this.frozenRightRows = this.rows;\n                this.frozenRightRowElements = this.rowElements;\n            }\n        }\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ColumnFreezeContentRenderer.prototype.getMovableRowElements = function () {\n        if (this.parent.getFrozenMode() !== 'Left-Right') {\n            return this.rowElements;\n        }\n        else {\n            return this.movableRowElements;\n        }\n    };\n    /**\n     * Get the Freeze pane frozen right content table data row elements\n     * @return {Element}\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenRightRowElements = function () {\n        if (this.parent.getFrozenMode() !== 'Left-Right') {\n            return this.freezeRowElements;\n        }\n        else {\n            return this.frozenRightRowElements;\n        }\n    };\n    /**\n     * Get the frozen right row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenRightRows = function () {\n        if (this.parent.getFrozenMode() === 'Left-Right') {\n            if (this.parent.enableInfiniteScrolling) {\n                return this.rightFreezeRows;\n            }\n            return this.frozenRightRows;\n        }\n        else {\n            return this.getRows();\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnFreezeContentRenderer.prototype.getFrozenRightRowByIndex = function (index) {\n        return this.parent.getFrozenRightDataRows()[index];\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ColumnFreezeContentRenderer.prototype.getRows = function () {\n        var infiniteRows = this.getInfiniteRows();\n        return infiniteRows.length ? infiniteRows : this.freezeRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ColumnFreezeContentRenderer.prototype.getRowElements = function () {\n        return this.freezeRowElements;\n    };\n    return ColumnFreezeContentRenderer;\n}(FreezeContentRender));\nexport { ColumnFreezeContentRenderer };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\nimport { VirtualFreezeRenderer, VirtualFreezeHdrRenderer, ColumnVirtualFreezeRenderer } from '../renderer/virtual-freeze-renderer';\nimport { ColumnFreezeContentRenderer, ColumnFreezeHeaderRenderer } from '../renderer/column-freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        this.parent.log('limitation', this.getModuleName());\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            this.parent.enableColumnVirtualization ?\n                renderer.addRenderer(RenderType.Header, new VirtualFreezeHdrRenderer(this.parent, this.locator))\n                : renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            this.parent.enableVirtualization ?\n                renderer.addRenderer(RenderType.Content, new VirtualFreezeRenderer(this.parent, this.locator))\n                : renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n        if (this.parent.getFrozenLeftColumnsCount() || this.parent.getFrozenRightColumnsCount()) {\n            renderer.addRenderer(RenderType.Header, new ColumnFreezeHeaderRenderer(this.parent, this.locator));\n            this.parent.enableVirtualization\n                ? renderer.addRenderer(RenderType.Content, new ColumnVirtualFreezeRenderer(this.parent, this.locator))\n                : renderer.addRenderer(RenderType.Content, new ColumnFreezeContentRenderer(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove, isBlazor } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.add(elements[i], 'mousedown', this.columnMenuHandlerDown, this);\n        }\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var elements = this.getColumnMenuHandlers();\n        for (var i = 0; i < elements.length; i++) {\n            EventHandler.remove(elements[i], 'mousedown', this.columnMenuHandlerDown);\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    /** @hidden */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1 && this.ensureDisabledStatus(key) && !dItem.hide) {\n                this.disableItems.push(item.text);\n            }\n            if (item.hide) {\n                this.hiddenItems.push(item.text);\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n            else if (this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    var sortColumns = this.parent.sortSettings.columns;\n                    for (var i = 0; i < sortColumns.length; i++) {\n                        if (sortColumns[i].field === this.targetColumn.field\n                            && sortColumns[i].direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    }\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!this.parent.isFrozenGrid()) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        var localeKeys = {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n        if (isBlazor()) {\n            var autoFitAll = 'AutoFitAll';\n            localeKeys[autoFitAll] = 'AutoFitAll';\n            var autoFit = 'AutoFit';\n            localeKeys[autoFit] = 'AutoFit';\n        }\n        return localeKeys;\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        if (top + gridPos.top < 0) {\n            top = 0;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n            if (liPos.left < ul.offsetWidth) {\n                left = liPos.left + ul.offsetWidth / 2;\n            }\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null && this.parent.filterSettings.type === 'Menu') {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\nimport * as events from '../base/constant';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        for (var i = 0; i < columns.length; i++) {\n            columns[i].dataSource = (columns[i].dataSource instanceof DataManager ? columns[i].dataSource :\n                (isNullOrUndefined(columns[i].dataSource) ? new DataManager() : 'result' in columns[i].dataSource ? columns[i].dataSource :\n                    new DataManager(columns[i].dataSource)));\n        }\n    };\n    ForeignKey.prototype.eventfPromise = function (args, query, key, column) {\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        state.action = args.action;\n        var dataModule = this.parent.getDataModule();\n        if (!isNullOrUndefined(args.action) && args.action.requestType && dataModule.foreignKeyDataState.isDataChanged !== false) {\n            dataModule.setForeignKeyDataState({\n                isPending: true, resolver: deff.resolve\n            });\n            deff.promise.then(function () {\n                def.resolve(column.dataSource);\n            });\n            state.setColumnData = this.parent.setForeignKeyData.bind(this.parent);\n            this.parent.trigger(events.columnDataStateChange, state);\n        }\n        else {\n            dataModule.setForeignKeyDataState({});\n            def.resolve(key);\n        }\n        return def;\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        var _loop_1 = function (i) {\n            var promise = void 0;\n            var query = args.isComplex ? this_1.genarateColumnQuery(foreignColumns[i]) :\n                this_1.genarateQuery(foreignColumns[i], args.result.result, false, true);\n            query.params = this_1.parent.query.params;\n            var dataSource = foreignColumns[i].dataSource;\n            if (dataSource && 'result' in dataSource) {\n                var def = this_1.eventfPromise(args, query, dataSource, foreignColumns[i]);\n                promise = def.promise;\n            }\n            else if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        };\n        var this_1 = this;\n        for (var i = 0; i < foreignColumns.length; i++) {\n            _loop_1(i);\n        }\n        Promise.all(allPromise).then(function (responses) {\n            for (var i = 0; i < responses.length; i++) {\n                foreignColumns[i].columnData = responses[i].result;\n                if (foreignColumns[i].editType === 'dropdownedit' && 'result' in foreignColumns[i].dataSource) {\n                    foreignColumns[i].edit.params = extend(foreignColumns[i].edit.params, {\n                        dataSource: responses[i].result,\n                        query: new Query(), fields: {\n                            value: foreignColumns[i].foreignKeyField || foreignColumns[i].field,\n                            text: foreignColumns[i].foreignKeyValue\n                        }\n                    });\n                }\n            }\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            _this.parent.log(['actionfailure', 'foreign_key_failure']);\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length && !fromData) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            for (var i = 0; i < filteredValue.length; i++) {\n                if (filteredValue[i] && filteredValue[i].getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: filteredValue[i], matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', filteredValue[i], false));\n                }\n            }\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            if (column.dataSource instanceof DataManager && (column.dataSource.adaptor.getModuleName &&\n                column.dataSource.adaptor.getModuleName() === 'ODataV4Adaptor')) {\n                query = this.searchQuery(query, column, true);\n            }\n            else {\n                query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n            }\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue && fColumn.uid === column.uid);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n","/**\n *\n * `Logger` class\n */\nimport { isNullOrUndefined, L10n, isUndefined } from '@syncfusion/ej2-base';\nimport { DataUtil, DataManager } from '@syncfusion/ej2-data';\nvar BASE_DOC_URL = 'https://ej2.syncfusion.com/documentation/grid';\nvar DOC_URL = 'https://ej2.syncfusion.com/documentation/';\nvar WARNING = '[EJ2Grid.Warning]';\nvar ERROR = '[EJ2Grid.Error]';\nvar INFO = '[EJ2Grid.Info]';\nvar Logger = /** @class */ (function () {\n    function Logger(parent) {\n        this.parent = parent;\n        this.parent.on('initial-end', this.patchadaptor, this);\n    }\n    Logger.prototype.getModuleName = function () {\n        return 'logger';\n    };\n    Logger.prototype.log = function (types, args) {\n        if (!(types instanceof Array)) {\n            types = [types];\n        }\n        var type = types;\n        for (var i = 0; i < type.length; i++) {\n            var item = detailLists[type[i]];\n            var cOp = item.check(args, this.parent);\n            if (cOp.success) {\n                console[item.logType](item.generateMessage(args, this.parent, cOp.options));\n            }\n        }\n    };\n    Logger.prototype.patchadaptor = function () {\n        var adaptor = this.parent.getDataModule().dataManager.adaptor;\n        var original = adaptor.beforeSend;\n        if (original) {\n            adaptor.beforeSend = function (dm, request, settings) {\n                original.call(adaptor, dm, request, settings);\n            };\n        }\n    };\n    Logger.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('initial-end', this.patchadaptor);\n    };\n    return Logger;\n}());\nexport { Logger };\nexport var detailLists = {\n    module_missing: {\n        type: 'module_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var injected = parent.getInjectedModules().map(function (m) { return m.prototype.getModuleName(); });\n            /* tslint:disable-next-line:no-any */\n            var modules = parent.requiredModules().map(function (m) { return m.member; })\n                .filter(function (name) { return injected.indexOf(name) === -1; });\n            return { success: modules.filter(function (m) { return m !== 'resize'; }).length > 0, options: modules };\n        },\n        generateMessage: function (args, parent, modules) {\n            modules = modules.filter(function (m) { return m !== 'resize'; })\n                .reduce(function (prev, cur) { return prev + (\"* \" + cur + \"\\n\"); }, '');\n            return WARNING + ': MODULES MISSING\\n' + 'The following modules are not injected:.\\n' +\n                (\"\" + modules) +\n                (\"Refer to \" + BASE_DOC_URL + \"/module.html for documentation on importing feature modules.\");\n        }\n    },\n    promise_enabled: {\n        type: 'promise_enabled',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: typeof Promise === 'undefined' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': PROMISE UNDEFINED\\n' +\n                'Promise object is not present in the global environment,' +\n                'please use polyfil to support Promise object in your environment.\\n' +\n                (\"Refer to \" + DOC_URL + \"/base/browser.html?#required-polyfills for more information.\");\n        }\n    },\n    primary_column_missing: {\n        type: 'primary_column_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' + 'Editing is enabled but primary key column is not specified.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    selection_key_missing: {\n        type: 'selection_key_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.selectionSettings.persistSelection &&\n                    parent.getColumns().filter(function (column) { return column.isPrimaryKey; }).length === 0 };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': PRIMARY KEY MISSING\\n' +\n                'selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/api-column.html?#isprimarykey for documentation on providing primary key columns.\");\n        }\n    },\n    actionfailure: {\n        type: 'actionfailure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            var message = '';\n            var formatError = formatErrorHandler(args, parent);\n            var ajaxError = ajaxErrorHandler(args, parent);\n            if (ajaxError !== '') {\n                message = ajaxError;\n            }\n            else if (formatError !== '') {\n                message = formatError;\n            }\n            else {\n                message = args.error;\n            }\n            return WARNING + ': ' + message;\n        }\n    },\n    locale_missing: {\n        type: 'locale_missing',\n        logType: 'warn',\n        check: function (args, parent) {\n            var lObj = DataUtil.getObject(\"locale.\" + parent.locale + \".grid\", L10n);\n            return { success: parent.locale !== 'en-US' && isNullOrUndefined(lObj) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': LOCALE CONFIG MISSING\\n' + (\"Locale configuration for '\" + parent.locale + \"' is not provided.\\n\") +\n                (\"Refer to \" + BASE_DOC_URL + \"/globalization-and-localization.html?#localization \\n             for documentation on setting locale configuration.\");\n        }\n    },\n    limitation: {\n        type: 'limitation',\n        logType: 'warn',\n        check: function (args, parent) {\n            var name = args;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = {\n                        success: parent.allowGrouping || !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid)\n                            || !isUndefined(parent.rowTemplate) || parent.enableVirtualization,\n                        options: { name: 'freeze' }\n                    };\n                    break;\n                case 'virtualization':\n                    opt = {\n                        success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid) || parent.frozenRows !== 0\n                            || parent.frozenColumns !== 0,\n                        options: { name: 'virtualization' }\n                    };\n                    break;\n                default:\n                    opt = { success: false };\n                    break;\n            }\n            return opt;\n        },\n        generateMessage: function (args, parent, options) {\n            var name = options.name;\n            var opt;\n            switch (name) {\n                case 'freeze':\n                    opt = 'Frozen rows and columns do not support the following features:\\n' +\n                        '* Virtualization\\n' +\n                        '* Row Template\\n' +\n                        '* Details Template\\n' +\n                        '* Hierarchy Grid\\n' +\n                        '* Grouping';\n                    break;\n                case 'virtualization':\n                    opt = 'Virtualization does not support the following features.\\n' +\n                        '* Freeze rows and columns.\\n' +\n                        '* Details Template.\\n' +\n                        '* Hierarchy Grid.\\n';\n                    break;\n                default:\n                    opt = '';\n                    break;\n            }\n            return WARNING + (\": \" + name.toUpperCase() + \" LIMITATIONS\\n\") + opt;\n        }\n    },\n    check_datasource_columns: {\n        type: 'check_datasource_columns',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: !(parent.columns.length ||\n                    (parent.dataSource instanceof DataManager) || parent.dataSource.length) };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': GRID CONFIG MISSING\\n' + 'dataSource and columns are not provided in the grid. ' +\n                'At least one of either must be provided for grid configuration.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns.html for documentation on configuring the grid data and columns.\");\n        }\n    },\n    virtual_height: {\n        type: 'virtual_height',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(parent.height) || parent.height === 'auto' };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': GRID HEIGHT MISSING \\n' + 'height property is required to use virtualization.\\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/virtual.html for documentation on configuring the virtual grid.\");\n        }\n    },\n    grid_remote_edit: {\n        type: 'grid_remote_edit',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: Array.isArray(args) || Array.isArray(args.result) };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': RETRUN VALUE MISSING  \\n' +\n                'Remote service returns invalid data. \\n' +\n                (\"Refer to \" + BASE_DOC_URL + \"/edit.html for documentation on configuring editing with remote data.\");\n        }\n    },\n    grid_sort_comparer: {\n        type: 'grid_sort_comparer',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: parent.getDataModule().isRemote() };\n        },\n        generateMessage: function (args, parent) {\n            return WARNING + ': SORT COMPARER NOT WORKING  \\n' + 'Sort comparer will not work with remote data.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/sorting/#custom-sort-comparer for documentation on using the sort comparer.\");\n        }\n    },\n    resize_min_max: {\n        type: 'resize_min_max',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: (args.column.minWidth && args.column.minWidth >= args.width) ||\n                    (args.column.maxWidth && args.column.maxWidth <= args.width) };\n        },\n        generateMessage: function (args, parent) {\n            return INFO + ': RESIZING COLUMN REACHED MIN OR MAX  \\n' + 'The column resizing width is at its min or max.';\n        }\n    },\n    action_disabled_column: {\n        type: 'action_disabled_column',\n        logType: 'info',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'reorder':\n                    if (isNullOrUndefined(args.destColumn)) {\n                        fn = \"reordering action is disabled for the \" + args.column.headerText + \" column\";\n                    }\n                    else {\n                        fn = \"reordering action is disabled for the \" + (args.column.allowReordering ?\n                            args.destColumn.headerText : args.column.headerText) + \" column\";\n                    }\n                    break;\n                case 'group':\n                    fn = \"grouping action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'filter':\n                    fn = \"filtering action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n                case 'sort':\n                    fn = \"sorting action is disabled for the \" + args.columnName + \" column.\";\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": ACTION DISABLED \\n \" + options.fn);\n        }\n    },\n    exporting_begin: {\n        type: 'exporting_begin',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG INPROGRESS \\n Grid \" + options.args + \"ing is in progress\");\n        }\n    },\n    exporting_complete: {\n        type: 'exporting_complete',\n        logType: 'info',\n        check: function (args, parent) {\n            return { success: true, options: { args: args } };\n        },\n        generateMessage: function (args, parent, options) {\n            return INFO + (\": EXPORTNIG COMPLETED \\n Grid \" + options.args + \"ing is complete\");\n        }\n    },\n    foreign_key_failure: {\n        type: 'foreign_key_failure',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: true };\n        },\n        generateMessage: function (args, parent) {\n            return ERROR + ': FOREIGNKEY CONFIG \\n  Grid foreign key column needs a valid data source/service.' +\n                (\"Refer to \" + BASE_DOC_URL + \"/columns/#foreign-key-column for documentation on configuring foreign key columns.\");\n        }\n    },\n    initial_action: {\n        type: 'initial_action',\n        logType: 'error',\n        check: function (args, parent) {\n            var success = true;\n            var fn;\n            switch (args.moduleName) {\n                case 'group':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to group the column';\n                    break;\n                case 'filter':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to filter the column.';\n                    break;\n                case 'sort':\n                    fn = \"The \" + args.columnName + \" column is not available in the grid's column model.\" +\n                        'Please provide a valid field name to sort the column.';\n                    break;\n            }\n            return { success: success, options: { fn: fn } };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": INITIAL ACTION FAILURE \\n \" + options.fn);\n        }\n    },\n    frozen_rows_columns: {\n        type: 'frozen_rows_columns',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: parent.getColumns().length <= parent.frozenColumns || parent.frozenRows >= parent.currentViewData.length };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": OUT OF RANGE ERROR-\\n \" + (parent.getColumns().length <= parent.frozenColumns ? 'FROZEN COLUMNS,' : '')) +\n                ((parent.frozenRows >= parent.currentViewData.length ? 'FROZEN ROWS' : '') + \" invalid\");\n        }\n    },\n    column_type_missing: {\n        type: 'column_type_missing',\n        logType: 'error',\n        check: function (args, parent) {\n            return { success: isNullOrUndefined(args.column.type), options: args.column.headerText };\n        },\n        generateMessage: function (args, parent, options) {\n            return ERROR + (\": COLUMN TYPE MISSING-\\n  \" + options + \" column type was invalid or not defined.\") +\n                (\"Please go through below help link: \" + DOC_URL + \"/grid/columns/#column-type\");\n        }\n    },\n    datasource_syntax_mismatch: {\n        type: 'datasource_syntax_mismatch',\n        logType: 'warn',\n        check: function (args, parent) {\n            return { success: (args.dataState.dataSource instanceof DataManager || args.dataState.dataSource instanceof Array) &&\n                    !(isNullOrUndefined(args.dataState.dataStateChange)) };\n        },\n        generateMessage: function (args, parent, options) {\n            return WARNING + ': DATASOURCE SYNTAX WARNING\\n' +\n                'DataSource should be in the form of {result: Object[], count: number}' +\n                'when dataStateChangeEvent used';\n        }\n    }\n};\nvar formatErrorHandler = function (args, parent) {\n    var error = args.error;\n    if (error.indexOf && error.indexOf('Format options') !== 0) {\n        return '';\n    }\n    return 'INVALID FORMAT\\n' +\n        'For more information, refer to the following documentation links:\\n' +\n        (\"Number format: \" + DOC_URL + \"/base/intl.html?#supported-format-string.\\n\") +\n        (\"Date format: \" + DOC_URL + \"/base/intl.html?#manipulating-datetime.\\n\") +\n        (\"Message: \" + error);\n};\nvar ajaxErrorHandler = function (args, parent) {\n    var error = DataUtil.getObject('error.error', args);\n    if (isNullOrUndefined(error)) {\n        return '';\n    }\n    var jsonResult = '';\n    try {\n        jsonResult = JSON.parse(error.responseText);\n    }\n    catch (_a) {\n        jsonResult = '';\n    }\n    return 'XMLHTTPREQUEST FAILED\\n' +\n        (\"Url: \" + error.responseURL + \"\\n\") +\n        (\"Status: \" + error.status + \" - \" + error.statusText + \"\\n\") +\n        (\"\" + (jsonResult !== '' ? 'Message: ' + jsonResult : ''));\n};\n","import { isNullOrUndefined, remove, extend } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, ensureLastRow, ensureFirstRow, getEditedDataIndex, resetRowIndex, setRowElements } from '../base/util';\n/**\n * Infinite Scrolling class\n * @hidden\n */\nvar InfiniteScroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid infinite scrolling.\n     * @hidden\n     */\n    function InfiniteScroll(parent, serviceLocator) {\n        this.infiniteCache = {};\n        this.infiniteCurrentViewData = {};\n        this.infiniteFrozenCache = {};\n        this.isDownScroll = false;\n        this.isUpScroll = false;\n        this.isScroll = true;\n        this.enableContinuousScroll = false;\n        this.initialRender = true;\n        this.isRemove = false;\n        this.isInitialCollapse = false;\n        this.prevScrollTop = 0;\n        this.actions = ['filtering', 'searching', 'grouping', 'ungrouping', 'reorder', 'sorting'];\n        this.keys = ['downArrow', 'upArrow', 'PageUp', 'PageDown'];\n        this.rowTop = 0;\n        this.isInitialMovableRender = true;\n        this.virtualInfiniteData = {};\n        this.isCancel = false;\n        this.emptyRowData = {};\n        this.isNormaledit = false;\n        this.isInfiniteScroll = false;\n        this.isLastPage = false;\n        this.isInitialRender = true;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.isNormaledit = this.parent.editSettings.mode === 'Normal';\n        this.addEventListener();\n        this.widthService = serviceLocator.getService('widthService');\n        this.rowModelGenerator = this.parent.isFrozenGrid() ? new FreezeRowModelGenerator(this.parent)\n            : new RowModelGenerator(this.parent);\n    }\n    InfiniteScroll.prototype.getModuleName = function () {\n        return 'infiniteScroll';\n    };\n    /**\n     * @hidden\n     */\n    InfiniteScroll.prototype.addEventListener = function () {\n        this.parent.on(events.dataReady, this.onDataReady, this);\n        this.parent.on(events.dataSourceModified, this.dataSourceModified, this);\n        this.parent.on(events.infinitePageQuery, this.infinitePageQuery, this);\n        this.parent.on(events.infiniteScrollHandler, this.infiniteScrollHandler, this);\n        this.parent.on(events.beforeCellFocused, this.infiniteCellFocus, this);\n        this.parent.on(events.appendInfiniteContent, this.appendInfiniteRows, this);\n        this.parent.on(events.removeInfiniteRows, this.removeInfiniteCacheRows, this);\n        this.parent.on(events.resetInfiniteBlocks, this.resetInfiniteBlocks, this);\n        this.parent.on(events.setInfiniteCache, this.setCache, this);\n        this.parent.on(events.initialCollapse, this.ensureIntialCollapse, this);\n        this.parent.on(events.keyPressed, this.infiniteCellFocus, this);\n        this.parent.on(events.infiniteShowHide, this.setDisplayNone, this);\n        this.parent.on(events.virtualScrollEditActionBegin, this.editActionBegin, this);\n        this.parent.on(events.getVirtualData, this.getVirtualInfiniteData, this);\n        this.parent.on(events.editReset, this.resetInfiniteEdit, this);\n        this.parent.on(events.virtualScrollEditSuccess, this.infiniteEditSuccess, this);\n        this.parent.on(events.refreshVirtualCache, this.refreshInfiniteCache, this);\n        this.parent.on(events.infiniteEditHandler, this.infiniteEditHandler, this);\n        this.parent.on(events.virtualScrollAddActionBegin, this.infiniteAddActionBegin, this);\n        this.parent.on(events.modelChanged, this.modelChanged, this);\n        this.parent.on(events.refreshInfiniteCurrentViewData, this.refreshInfiniteCurrentViewData, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.on(events.deleteComplete, this.deleteComplate, this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    /**\n     * @hidden\n     */\n    InfiniteScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dataReady, this.onDataReady);\n        this.parent.off(events.dataSourceModified, this.dataSourceModified);\n        this.parent.off(events.infinitePageQuery, this.infinitePageQuery);\n        this.parent.off(events.infiniteScrollHandler, this.infiniteScrollHandler);\n        this.parent.off(events.beforeCellFocused, this.infiniteCellFocus);\n        this.parent.off(events.appendInfiniteContent, this.appendInfiniteRows);\n        this.parent.off(events.removeInfiniteRows, this.removeInfiniteCacheRows);\n        this.parent.off(events.resetInfiniteBlocks, this.resetInfiniteBlocks);\n        this.parent.off(events.setInfiniteCache, this.setCache);\n        this.parent.off(events.initialCollapse, this.ensureIntialCollapse);\n        this.parent.off(events.keyPressed, this.infiniteCellFocus);\n        this.parent.off(events.infiniteShowHide, this.setDisplayNone);\n        this.parent.off(events.virtualScrollEditActionBegin, this.editActionBegin);\n        this.parent.off(events.getVirtualData, this.getVirtualInfiniteData);\n        this.parent.off(events.editReset, this.resetInfiniteEdit);\n        this.parent.off(events.virtualScrollEditSuccess, this.infiniteEditSuccess);\n        this.parent.off(events.refreshVirtualCache, this.refreshInfiniteCache);\n        this.parent.off(events.infiniteEditHandler, this.infiniteEditHandler);\n        this.parent.off(events.virtualScrollAddActionBegin, this.infiniteAddActionBegin);\n        this.parent.off(events.modelChanged, this.modelChanged);\n        this.parent.off(events.refreshInfiniteCurrentViewData, this.refreshInfiniteCurrentViewData);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n    };\n    InfiniteScroll.prototype.updateCurrentViewData = function () {\n        var gObj = this.parent;\n        if (gObj.groupSettings.columns.length) {\n            return;\n        }\n        var keys = Object.keys(this.infiniteCurrentViewData);\n        gObj.currentViewData = [];\n        var page = gObj.pageSettings.currentPage;\n        var isCache = gObj.infiniteScrollSettings.enableCache;\n        var blocks = gObj.infiniteScrollSettings.maxBlocks;\n        var isMiddlePage = isCache && (page > blocks || (this.isUpScroll && page > 1));\n        var start = isMiddlePage ? this.isUpScroll ? page : (page - blocks) + 1 : 1;\n        var end = isMiddlePage ? (start + blocks) - 1 : isCache ? blocks : keys.length;\n        for (var i = start; i <= end; i++) {\n            if (this.infiniteCurrentViewData[i]) {\n                gObj.currentViewData = gObj.currentViewData.concat(this.infiniteCurrentViewData[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.refreshInfiniteCurrentViewData = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        var size = this.parent.pageSettings.pageSize;\n        var blocks = this.parent.infiniteScrollSettings.initialBlocks;\n        var keys = Object.keys(this.infiniteCurrentViewData);\n        var cache = this.parent.infiniteScrollSettings.enableCache;\n        if (!this.parent.groupSettings.columns.length) {\n            var isAdd = e.args.requestType === 'save';\n            var isDelete = e.args.requestType === 'delete';\n            if (!cache && (isAdd || isDelete)) {\n                if (isAdd) {\n                    this.infiniteCurrentViewData[1] = e.data.concat(this.infiniteCurrentViewData[1]);\n                }\n                else {\n                    this.infiniteCurrentViewData[keys[keys.length - 1]].push(e.data[0]);\n                }\n            }\n            else {\n                if (blocks > 1 && e.data.length === (blocks * size)) {\n                    this.setInitialCache(e.data.slice(), {}, cache && e.args.requestType === 'delete', true);\n                }\n                else {\n                    this.infiniteCurrentViewData[page] = e.data.slice();\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.deleteComplate = function () {\n        if (this.parent.isFrozenGrid() && !this.parent.infiniteScrollSettings.enableCache) {\n            this.parent.contentModule.refreshScrollOffset();\n        }\n    };\n    InfiniteScroll.prototype.modelChanged = function (args) {\n        if (args.requestType !== 'infiniteScroll' && (args.requestType === 'delete' || this.requestType === 'add')) {\n            var rows = this.parent.getRows();\n            this.firstIndex = parseInt(rows[0].getAttribute('aria-rowindex'), 10);\n            this.firstBlock = Math.ceil((this.firstIndex + 1) / this.parent.pageSettings.pageSize);\n            this.lastIndex = parseInt(rows[rows.length - 1].getAttribute('aria-rowindex'), 10);\n            if (args.requestType === 'delete') {\n                var rowObj = this.parent.getRowsObject();\n                args.startIndex = this.parent.infiniteScrollSettings.enableCache\n                    ? (this.firstBlock - 1) * this.parent.pageSettings.pageSize : rowObj[rowObj.length - 1].index;\n            }\n            else {\n                args.startIndex = this.firstIndex;\n            }\n            if (!this.parent.infiniteScrollSettings.enableCache\n                && this.parent.pageSettings.currentPage === this.maxPage && args.requestType === 'delete') {\n                this.isLastPage = true;\n                this.lastIndex = this.lastIndex - 1;\n            }\n        }\n    };\n    InfiniteScroll.prototype.infiniteAddActionBegin = function (args) {\n        if (this.isNormaledit) {\n            this.isAdd = true;\n            if (this.parent.infiniteScrollSettings.enableCache) {\n                if (!Object.keys(this.emptyRowData).length) {\n                    this.createEmptyRowdata();\n                }\n                if (this.parent.pageSettings.currentPage > 1) {\n                    args.startEdit = false;\n                    this.resetInfiniteBlocks({}, true);\n                    this.makeRequest({ currentPage: 1 });\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.infiniteEditHandler = function (args) {\n        if (!this.parent.infiniteScrollSettings.enableCache && (args.e.requestType === 'delete'\n            || (args.e.requestType === 'save' && this.requestType === 'add'))) {\n            var frozenCols = this.parent.isFrozenGrid();\n            var rowElms = this.parent.getRows();\n            var rows = this.parent.getRowsObject();\n            if (this.ensureRowAvailability(rows, args.result[0])) {\n                this.resetRowIndex(rows, args.e, rowElms, this.requestType === 'add', true);\n                if (frozenCols) {\n                    var rows_1 = this.parent.getMovableRowsObject();\n                    this.resetRowIndex(rows_1, args.e, this.parent.getMovableDataRows(), this.requestType === 'add');\n                    if (this.parent.getFrozenMode() === 'Left-Right') {\n                        var frRows = this.parent.getFrozenRightRowsObject();\n                        this.resetRowIndex(frRows, args.e, this.parent.getFrozenRightRows(), this.requestType === 'add');\n                    }\n                }\n                if (!this.isLastPage) {\n                    this.createRow(rows, args);\n                }\n                else {\n                    this.isLastPage = false;\n                    this.parent.pageSettings.currentPage = this.maxPage;\n                    if (this.parent.selectionModule.index < this.parent.frozenRows) {\n                        remove(rowElms[this.parent.frozenRows - 1]);\n                        this.createRow([rows[this.parent.frozenRows - 1]], args, false, true);\n                        if (frozenCols) {\n                            var movableRows = this.parent.getMovableDataRows();\n                            remove(movableRows[this.parent.frozenRows]);\n                            this.createRow([this.parent.getMovableRowsObject()[this.parent.frozenRows - 1]], args, true, true);\n                            if (this.parent.getFrozenMode() === 'Left-Right') {\n                                var rightRows = this.parent.getFrozenRightDataRows();\n                                remove(rightRows[this.parent.frozenRows]);\n                                this.createRow([this.parent.getFrozenRightRowsObject()[this.parent.frozenRows - 1]], args, false, true, true);\n                            }\n                        }\n                        setRowElements(this.parent);\n                    }\n                }\n            }\n            this.parent.hideSpinner();\n            this.requestType === 'delete' ? this.parent.notify(events.deleteComplete, args.e)\n                : this.parent.notify(events.saveComplete, args.e);\n        }\n        this.parent.notify(events.freezeRender, { case: 'refreshHeight' });\n    };\n    InfiniteScroll.prototype.createRow = function (rows, args, isMovable, isFrozenRows, isFrozenRight) {\n        var row = !isFrozenRows ? this.generateRows(args.result, args.e) : rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tbody;\n        if (isFrozenRight) {\n            tbody = this.parent.element.querySelector('.e-frozen-right-content').querySelector('tbody');\n        }\n        else {\n            tbody = !this.parent.isFrozenGrid() ? this.parent.getContent().querySelector('tbody') : isMovable\n                ? this.parent.getMovableVirtualContent().querySelector('tbody')\n                : this.parent.getFrozenVirtualContent().querySelector('tbody');\n        }\n        if (this.parent.frozenRows) {\n            tbody = isFrozenRows && this.requestType !== 'add' || !isFrozenRows && this.requestType === 'add'\n                ? !this.parent.isFrozenGrid() ? this.parent.getHeaderContent().querySelector('tbody')\n                    : isMovable ? this.parent.getMovableVirtualHeader().querySelector('tbody')\n                        : isFrozenRight ? this.parent.element.querySelector('.e-frozen-right-header').querySelector('tbody')\n                            : this.parent.getFrozenVirtualHeader().querySelector('tbody') : tbody;\n        }\n        var notifyArgs = {\n            rows: rows, cancel: false, args: args, isMovable: isMovable,\n            isFrozenRows: isFrozenRows, isFrozenRight: isFrozenRows, row: row\n        };\n        this.parent.notify(events.infiniteCrudCancel, notifyArgs);\n        if (!notifyArgs.cancel) {\n            for (var i = row.length - 1; i >= 0; i--) {\n                if (this.requestType === 'delete') {\n                    tbody.appendChild(rowRenderer.render(row[i], this.parent.getColumns()));\n                }\n                else {\n                    tbody.insertBefore(rowRenderer.render(row[i], this.parent.getColumns()), tbody.firstElementChild);\n                }\n            }\n        }\n        if (!isFrozenRows && this.parent.frozenRows\n            && (this.parent.selectionModule.index < this.parent.frozenRows || this.requestType === 'add')) {\n            var rowElems = isMovable ? this.parent.getMovableDataRows() : isFrozenRight ? this.parent.getFrozenRightDataRows()\n                : this.parent.getRows();\n            var index = (isMovable || isFrozenRight) && this.requestType === 'add'\n                ? this.parent.frozenRows : this.parent.frozenRows - 1;\n            remove(rowElems[index]);\n            this.createRow([rows[this.parent.frozenRows - 1]], args, isMovable, true, isFrozenRight);\n        }\n        if (!this.parent.infiniteScrollSettings.enableCache && !isFrozenRows) {\n            if (isFrozenRight) {\n                setRowElements(this.parent);\n                this.parent.contentModule.rightFreezeRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n            }\n            else if (!this.parent.isFrozenGrid() || isMovable) {\n                setRowElements(this.parent);\n                this.parent.contentModule.visibleRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n                if (this.parent.getFrozenMode() === 'Left-Right') {\n                    this.createRow(this.parent.getFrozenRightRowsObject(), args, false, false, true);\n                }\n            }\n            else {\n                this.parent.contentModule.visibleFrozenRows = this.requestType === 'add'\n                    ? row.concat(rows) : rows.concat(row);\n                this.createRow(this.parent.getMovableRowsObject(), args, true);\n            }\n        }\n    };\n    InfiniteScroll.prototype.ensureRowAvailability = function (rows, data) {\n        var resume = true;\n        if (this.parent.frozenRows && !this.parent.infiniteScrollSettings.enableCache\n            && this.parent.sortSettings.columns && this.requestType === 'add') {\n            var key = this.parent.getPrimaryKeyFieldNames()[0];\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].data[key] === data[key]) {\n                    resume = false;\n                    break;\n                }\n            }\n        }\n        return resume;\n    };\n    InfiniteScroll.prototype.generateRows = function (data, args) {\n        return this.rowModelGenerator.generateRows(data, args);\n    };\n    InfiniteScroll.prototype.resetRowIndex = function (rows, args, rowElms, isAdd, isFrozen) {\n        var _this = this;\n        var keyField = this.parent.getPrimaryKeyFieldNames()[0];\n        var isRemove = !(rowElms.length % this.parent.pageSettings.pageSize);\n        if (isAdd) {\n            if (isRemove) {\n                if (isFrozen && !this.parent.groupSettings.columns.length) {\n                    this.swapCurrentViewData(1, true);\n                }\n                remove(rowElms[rows.length - 1]);\n                rowElms.splice(rows.length - 1, 1);\n                rows.splice(rows.length - 1, 1);\n            }\n        }\n        else {\n            rows.filter(function (e, index) {\n                if (e.data[keyField] === args.data[0][keyField]) {\n                    if (isFrozen && !_this.parent.groupSettings.columns.length) {\n                        var page = Math.ceil((index + 1) / _this.parent.pageSettings.pageSize);\n                        _this.resetInfiniteCurrentViewData(page, index);\n                    }\n                    rows.splice(index, 1);\n                    remove(rowElms[index]);\n                    rowElms.splice(index, 1);\n                }\n            });\n        }\n        var startIndex = isAdd ? 1 : 0;\n        resetRowIndex(this.parent, rows, rowElms, startIndex);\n    };\n    InfiniteScroll.prototype.resetInfiniteCurrentViewData = function (page, index) {\n        index = index - ((page - 1) * this.parent.pageSettings.pageSize);\n        this.infiniteCurrentViewData[page].splice(index, 1);\n        this.swapCurrentViewData(page, false);\n    };\n    InfiniteScroll.prototype.swapCurrentViewData = function (page, isAdd) {\n        var keys = Object.keys(this.infiniteCurrentViewData);\n        var end = isAdd ? keys.length + 1 : keys.length;\n        for (var i = page; i < end; i++) {\n            if (this.infiniteCurrentViewData[i + 1]) {\n                var pageIndex = isAdd ? i : i + 1;\n                var index = isAdd ? this.infiniteCurrentViewData[i].length - 1 : 0;\n                var data = this.infiniteCurrentViewData[pageIndex].splice(index, 1);\n                if (isAdd) {\n                    this.infiniteCurrentViewData[i + 1] = data.concat(this.infiniteCurrentViewData[i + 1]);\n                    if ((i + 1) === end - 1) {\n                        this.infiniteCurrentViewData[i + 1].splice(this.infiniteCurrentViewData[i + 1].length - 1, 1);\n                    }\n                }\n                else {\n                    this.infiniteCurrentViewData[i].push(data[0]);\n                }\n            }\n        }\n        this.updateCurrentViewData();\n    };\n    InfiniteScroll.prototype.setDisplayNone = function (args) {\n        if (this.parent.infiniteScrollSettings.enableCache) {\n            var frozenCols = this.parent.isFrozenGrid();\n            var keys = frozenCols ? Object.keys(this.infiniteFrozenCache) : Object.keys(this.infiniteCache);\n            for (var i = 1; i <= keys.length; i++) {\n                var cache = frozenCols ? args.isFreeze ? this.infiniteFrozenCache[i][0]\n                    : this.infiniteFrozenCache[i][1] : this.infiniteCache[i];\n                cache.filter(function (e) {\n                    e.cells[args.index].visible = args.visible === '';\n                });\n            }\n            this.resetContentModuleCache(frozenCols ? this.infiniteFrozenCache : this.infiniteCache);\n        }\n    };\n    InfiniteScroll.prototype.refreshInfiniteCache = function (data) {\n        this.getEditedRowObject().data = data;\n    };\n    InfiniteScroll.prototype.getEditedRowObject = function () {\n        var rowObjects = this.parent.getRowsObject();\n        var editedrow;\n        for (var i = 0; i < rowObjects.length; i++) {\n            if (rowObjects[i].index === this.editRowIndex) {\n                editedrow = rowObjects[i];\n            }\n        }\n        return editedrow;\n    };\n    InfiniteScroll.prototype.infiniteEditSuccess = function (args) {\n        if (this.isNormaledit) {\n            if (!this.isAdd && args.data) {\n                this.updateCurrentViewRecords(args.data);\n            }\n            this.isAdd = false;\n        }\n    };\n    InfiniteScroll.prototype.updateCurrentViewRecords = function (data) {\n        var index = getEditedDataIndex(this.parent, data);\n        if (!isNullOrUndefined(index)) {\n            this.parent.getCurrentViewRecords()[index] = data;\n        }\n    };\n    InfiniteScroll.prototype.actionBegin = function (args) {\n        if (args.requestType === 'add' || args.requestType === 'delete') {\n            this.requestType = args.requestType;\n        }\n        if (this.parent.isFrozenGrid() && !args.cancel && args.requestType === 'searching'\n            || args.requestType === 'sorting' || args.requestType === 'filtering') {\n            this.isInitialRender = true;\n        }\n    };\n    InfiniteScroll.prototype.actionComplete = function (args) {\n        if (args.requestType === 'delete' || args.requestType === 'save' || args.requestType === 'cancel') {\n            this.requestType = this.empty;\n            this.isCancel = args.requestType === 'cancel' || args.requestType === 'save';\n            this.isAdd = this.isEdit = false;\n            if (this.isNormaledit) {\n                this.editRowIndex = this.empty;\n                this.virtualInfiniteData = {};\n                this.parent.editModule.previousVirtualData = {};\n            }\n        }\n    };\n    InfiniteScroll.prototype.resetInfiniteEdit = function () {\n        if (this.parent.enableInfiniteScrolling && this.isNormaledit) {\n            if ((this.parent.editSettings.allowEditing && this.isEdit) || (this.parent.editSettings.allowAdding && this.isAdd)) {\n                this.parent.isEdit = true;\n            }\n        }\n    };\n    InfiniteScroll.prototype.getVirtualInfiniteData = function (data) {\n        data.virtualData = this.virtualInfiniteData;\n        data.isAdd = this.isAdd;\n        data.isCancel = this.isCancel;\n    };\n    InfiniteScroll.prototype.editActionBegin = function (e) {\n        this.isEdit = true;\n        this.editRowIndex = e.index;\n        var rowObject = extend({}, this.getEditedRowObject().data);\n        e.data = Object.keys(this.virtualInfiniteData).length ? this.virtualInfiniteData : rowObject;\n    };\n    InfiniteScroll.prototype.dataSourceModified = function () {\n        this.resetInfiniteBlocks({ requestType: this.empty }, true);\n    };\n    InfiniteScroll.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n    };\n    InfiniteScroll.prototype.ensureIntialCollapse = function (isExpand) {\n        this.isInitialCollapse = !isExpand;\n    };\n    InfiniteScroll.prototype.infiniteScrollHandler = function (e) {\n        this.restoreInfiniteEdit();\n        this.restoreInfiniteAdd();\n        var targetEle = e.target;\n        var isInfinite = targetEle.classList.contains('e-content');\n        if (isInfinite && this.parent.enableInfiniteScrolling && !e.isLeft) {\n            var scrollEle = this.parent.getContent().firstElementChild;\n            this.prevScrollTop = scrollEle.scrollTop;\n            var rows = this.parent.getRows();\n            var index = parseInt(rows[rows.length - 1].getAttribute('aria-rowindex'), 10) + 1;\n            var prevPage = this.parent.pageSettings.currentPage;\n            var args = void 0;\n            var offset = targetEle.scrollHeight - targetEle.scrollTop;\n            var round = Math.round(targetEle.scrollHeight - targetEle.scrollTop);\n            var floor = offset < targetEle.clientHeight ? Math.ceil(offset) : Math.floor(offset);\n            var isBottom = (floor === targetEle.clientHeight || round === targetEle.clientHeight);\n            if (this.isScroll && isBottom && (this.parent.pageSettings.currentPage <= this.maxPage - 1 || this.enableContinuousScroll)) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    this.isUpScroll = false;\n                    this.isDownScroll = true;\n                }\n                var rows_2 = [].slice.call(scrollEle.querySelectorAll('.e-row:not(.e-addedrow)'));\n                var row = rows_2[rows_2.length - 1];\n                var rowIndex = parseInt(row.getAttribute('aria-rowindex'), 10);\n                this.parent.pageSettings.currentPage = Math.ceil(rowIndex / this.parent.pageSettings.pageSize) + 1;\n                args = {\n                    requestType: 'infiniteScroll',\n                    currentPage: this.parent.pageSettings.currentPage,\n                    prevPage: prevPage,\n                    startIndex: index,\n                    direction: 'down'\n                };\n                this.makeRequest(args);\n            }\n            if (this.isScroll && this.parent.infiniteScrollSettings.enableCache && targetEle.scrollTop === 0\n                && this.parent.pageSettings.currentPage !== 1) {\n                if (this.parent.infiniteScrollSettings.enableCache) {\n                    this.isDownScroll = false;\n                    this.isUpScroll = true;\n                }\n                var row = [].slice.call(scrollEle.querySelectorAll('.e-row'));\n                var rowIndex = parseInt(row[this.parent.pageSettings.pageSize - 1].getAttribute('aria-rowindex'), 10);\n                var startIndex = parseInt(row[0].getAttribute('aria-rowindex'), 10) - this.parent.pageSettings.pageSize;\n                this.parent.pageSettings.currentPage = Math.ceil(rowIndex / this.parent.pageSettings.pageSize) - 1;\n                if (this.parent.pageSettings.currentPage) {\n                    args = {\n                        requestType: 'infiniteScroll',\n                        currentPage: this.parent.pageSettings.currentPage,\n                        prevPage: prevPage,\n                        startIndex: startIndex,\n                        direction: 'up'\n                    };\n                    this.makeRequest(args);\n                }\n            }\n            if (this.parent.infiniteScrollSettings.enableCache && !this.isScroll && isNullOrUndefined(args)) {\n                if (this.isDownScroll || this.isUpScroll) {\n                    scrollEle.scrollTop = this.top;\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.makeRequest = function (args) {\n        var _this = this;\n        if (this.parent.pageSettings.currentPage !== args.prevPage) {\n            if (this.parent.pageSettings.currentPage <= this.maxPage) {\n                this.isInfiniteScroll = true;\n                if (isNullOrUndefined(this.infiniteCache[args.currentPage])) {\n                    setTimeout(function () {\n                        _this.getVirtualInfiniteEditedData();\n                        _this.parent.notify('model-changed', args);\n                    }, 100);\n                }\n                else {\n                    setTimeout(function () {\n                        _this.getVirtualInfiniteEditedData();\n                        _this.parent.notify(events.refreshInfiniteModeBlocks, args);\n                    }, 100);\n                }\n            }\n            else {\n                this.parent.pageSettings.currentPage = this.maxPage;\n            }\n        }\n    };\n    InfiniteScroll.prototype.infinitePageQuery = function (query) {\n        if (this.initialRender) {\n            this.initialRender = false;\n            this.intialPageQuery(query);\n        }\n        else {\n            if (!this.isInfiniteScroll && (this.requestType === 'delete' || this.requestType === 'add')) {\n                this.editPageQuery(query);\n            }\n            else {\n                query.page(this.parent.pageSettings.currentPage, this.parent.pageSettings.pageSize);\n            }\n        }\n    };\n    InfiniteScroll.prototype.editPageQuery = function (query) {\n        var initialBlocks = this.parent.infiniteScrollSettings.initialBlocks;\n        var isCache = this.parent.infiniteScrollSettings.enableCache;\n        if (isCache) {\n            this.infiniteCache = {};\n            this.infiniteFrozenCache = {};\n            this.infiniteCurrentViewData = {};\n            query.skip(this.firstIndex);\n            query.take(initialBlocks * this.parent.pageSettings.pageSize);\n        }\n        else {\n            if (this.parent.editSettings.mode === 'Dialog') {\n                this.parent.clearSelection();\n            }\n            var index = this.requestType === 'delete' ? this.lastIndex : this.firstIndex;\n            query.skip(index);\n            query.take(1);\n        }\n    };\n    InfiniteScroll.prototype.intialPageQuery = function (query) {\n        if (this.parent.infiniteScrollSettings.enableCache\n            && this.parent.infiniteScrollSettings.initialBlocks > this.parent.infiniteScrollSettings.maxBlocks) {\n            this.parent.infiniteScrollSettings.initialBlocks = this.parent.infiniteScrollSettings.maxBlocks;\n        }\n        var pageSize = this.parent.pageSettings.pageSize * this.parent.infiniteScrollSettings.initialBlocks;\n        query.page(1, pageSize);\n    };\n    InfiniteScroll.prototype.infiniteCellFocus = function (e) {\n        if (e.byKey && (e.keyArgs.action === 'upArrow' || e.keyArgs.action === 'downArrow')) {\n            this.pressedKey = e.keyArgs.action;\n            var ele = document.activeElement;\n            var rowIndex = parseInt(ele.parentElement.getAttribute('aria-rowindex'), 10);\n            var scrollEle = this.parent.getContent().firstElementChild;\n            this.rowIndex = e.keyArgs.action === 'downArrow' ? rowIndex + 1 : rowIndex - 1;\n            this.cellIndex = parseInt(ele.getAttribute('aria-colindex'), 10);\n            var row = this.parent.getRowByIndex(rowIndex);\n            var visibleRowCount = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight());\n            if (!row || ensureLastRow(row, this.parent) || ensureFirstRow(row, this.rowTop)) {\n                var height = row ? row.getBoundingClientRect().height : this.parent.getRowHeight();\n                if (!this.parent.infiniteScrollSettings.enableCache) {\n                    if (e.keyArgs.action === 'downArrow' && (ensureLastRow(row, this.parent) || !row)) {\n                        var nTop = (this.rowIndex - visibleRowCount) * height;\n                        var oTop = scrollEle.scrollTop + this.parent.getRowHeight();\n                        scrollEle.scrollTop = nTop < oTop ? oTop : nTop;\n                    }\n                    if (e.keyArgs.action === 'upArrow' && ensureFirstRow(row, this.rowTop)) {\n                        scrollEle.scrollTop = this.rowIndex * height;\n                    }\n                }\n            }\n            else {\n                this.pressedKey = this.empty;\n            }\n        }\n        else if (e.key === 'PageDown' || e.key === 'PageUp') {\n            this.pressedKey = e.key;\n        }\n    };\n    InfiniteScroll.prototype.createEmptyRowdata = function () {\n        var _this = this;\n        this.parent.getColumns().filter(function (e) {\n            _this.emptyRowData[e.field] = _this.empty;\n        });\n    };\n    InfiniteScroll.prototype.getVirtualInfiniteEditedData = function () {\n        var editForm = this.parent.element.querySelector('.e-editedrow');\n        var addForm = this.parent.element.querySelector('.e-addedrow');\n        var gridForm = this.parent.element.querySelector('.e-gridform');\n        if (this.parent.infiniteScrollSettings.enableCache && (editForm || addForm)) {\n            var rowData = editForm ? extend({}, this.getEditedRowObject().data)\n                : extend({}, this.emptyRowData);\n            this.virtualInfiniteData = this.parent.editModule.getCurrentEditedData(gridForm, rowData);\n            if (this.parent.isFrozenGrid()) {\n                this.virtualInfiniteData = this.parent.editModule\n                    .getCurrentEditedData(this.parent.getMovableVirtualContent().querySelector('.e-gridform'), rowData);\n            }\n        }\n    };\n    InfiniteScroll.prototype.restoreInfiniteEdit = function () {\n        var content = this.parent.getContent().firstElementChild;\n        var frozenEdit = this.parent.frozenRows ? this.editRowIndex >= this.parent.frozenRows : true;\n        if (this.isNormaledit && this.parent.infiniteScrollSettings.enableCache && frozenEdit) {\n            if (this.parent.editSettings.allowEditing && !isNullOrUndefined(this.editRowIndex)) {\n                var row = this.parent.getRowByIndex(this.editRowIndex);\n                if (Object.keys(this.virtualInfiniteData).length && row && !this.parent.getContent().querySelector('.e-editedrow')) {\n                    var top_1 = row.getBoundingClientRect().top;\n                    if (top_1 < content.offsetHeight && top_1 > this.parent.getRowHeight()) {\n                        this.parent.isEdit = false;\n                        this.parent.editModule.startEdit(row);\n                    }\n                }\n            }\n        }\n    };\n    InfiniteScroll.prototype.restoreInfiniteAdd = function () {\n        var content = this.parent.getContent().firstElementChild;\n        if (this.parent.getCurrentViewRecords().length && this.parent.getRowByIndex(0) && this.isNormaledit &&\n            this.parent.infiniteScrollSettings.enableCache && this.isAdd && !content.querySelector('.e-addedrow')) {\n            var isTop = content.scrollTop < this.parent.getRowHeight();\n            if (isTop) {\n                this.parent.isEdit = false;\n                this.parent.addRecord();\n            }\n        }\n    };\n    InfiniteScroll.prototype.appendInfiniteRows = function (e) {\n        var target = document.activeElement;\n        var frozenCols = this.parent.isFrozenGrid();\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll';\n        var isMovable = this.parent.getFrozenMode() === 'Left-Right' && e.tableName === 'movable';\n        if ((isInfiniteScroll && !e.args.isFrozen && !isMovable) || !isInfiniteScroll) {\n            if (isInfiniteScroll && e.args.direction === 'up') {\n                e.tbody.insertBefore(e.frag, e.tbody.firstElementChild);\n            }\n            else {\n                e.tbody.appendChild(e.frag);\n            }\n        }\n        if (!frozenCols) {\n            this.parent.contentModule.getTable().appendChild(e.tbody);\n            this.updateCurrentViewData();\n        }\n        else {\n            if (isInfiniteScroll) {\n                if (e.tableName === 'frozen-left' || (this.parent.getFrozenMode() === 'Right' && e.tableName === 'frozen-right')) {\n                    this.frozenFrag = e.frag;\n                }\n                else if (this.parent.getFrozenMode() === 'Left-Right' && e.tableName === 'movable') {\n                    this.movableFrag = e.frag;\n                }\n                else {\n                    var tbody = this.parent.getFrozenVirtualContent().querySelector('tbody');\n                    e.args.direction === 'up' ? tbody.insertBefore(this.frozenFrag, tbody.firstElementChild)\n                        : tbody.appendChild(this.frozenFrag);\n                    if (e.tableName === 'frozen-right') {\n                        this.parent.getMovableVirtualContent().querySelector('tbody').appendChild(this.movableFrag);\n                        this.parent.element.querySelector('.e-frozen-right-content').querySelector('tbody').appendChild(e.frag);\n                    }\n                    else {\n                        this.parent.getMovableVirtualContent().querySelector('.e-table').appendChild(e.tbody);\n                    }\n                    this.parent.contentModule.refreshScrollOffset();\n                    this.updateCurrentViewData();\n                }\n            }\n            else {\n                var table = void 0;\n                if (e.tableName === 'frozen-left') {\n                    table = this.parent.getFrozenVirtualContent().querySelector('.e-table');\n                }\n                else if (e.tableName === 'movable') {\n                    table = this.parent.getMovableVirtualContent().querySelector('.e-table');\n                    if (this.parent.getFrozenMode() !== 'Left-Right') {\n                        this.parent.contentModule.refreshScrollOffset();\n                        this.updateCurrentViewData();\n                    }\n                }\n                else {\n                    table = this.parent.element.querySelector('.e-frozen-right-content').querySelector('.e-table');\n                    if (this.parent.getFrozenMode() === 'Left-Right') {\n                        this.parent.contentModule.refreshScrollOffset();\n                        this.updateCurrentViewData();\n                    }\n                }\n                table.appendChild(e.tbody);\n                this.widthService.refreshFrozenScrollbar();\n            }\n        }\n        if (this.isInitialRender && !e.args.isFrozen) {\n            this.isInitialRender = false;\n            this.parent.scrollModule.setHeight();\n        }\n        if (!e.args.isFrozen) {\n            this.rowTop = !this.rowTop ? this.parent.getRows()[0].getBoundingClientRect().top : this.rowTop;\n            if (isInfiniteScroll) {\n                if (this.parent.infiniteScrollSettings.enableCache && this.isRemove) {\n                    scrollEle.scrollTop = this.top;\n                }\n                setRowElements(this.parent);\n                this.selectNewRow(e.tbody, e.args.startIndex);\n                this.pressedKey = undefined;\n            }\n            this.restoreInfiniteAdd();\n            this.isScroll = true;\n        }\n        this.isInfiniteScroll = false;\n    };\n    InfiniteScroll.prototype.selectNewRow = function (tbody, startIndex) {\n        var _this = this;\n        var row = this.parent.getRowByIndex(this.rowIndex);\n        if (this.keys.some(function (value) { return value === _this.pressedKey; })) {\n            if (this.pressedKey === 'downArrow' || (this.parent.infiniteScrollSettings.enableCache && this.pressedKey === 'upArrow')) {\n                setTimeout(function () {\n                    // tslint:disable-next-line:no-any\n                    var target = row.cells[0];\n                    target.focus({ preventScroll: true });\n                    _this.parent.selectRow(_this.rowIndex);\n                    _this.parent.getContent().firstElementChild.scrollTop += _this.parent.getRowHeight();\n                }, 0);\n            }\n            if (this.pressedKey === 'PageDown') {\n                var row_1 = this.parent.getRowByIndex(startIndex);\n                if (row_1) {\n                    row_1.cells[0].focus();\n                }\n            }\n            if (this.pressedKey === 'PageUp') {\n                tbody.querySelector('.e-row').cells[0].focus();\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeInfiniteCacheRows = function (e) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.args.requestType === 'infiniteScroll';\n        if (!e.args.isFrozen && isInfiniteScroll && this.parent.infiniteScrollSettings.enableCache && this.isRemove) {\n            var rows = [].slice.call(this.parent.getContentTable().querySelectorAll('.e-row'));\n            if (e.args.direction === 'down') {\n                if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                    var captionRows = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n                    this.removeCaptionRows(captionRows, e.args);\n                }\n                var addRowCount = this.parent.element.querySelector('.e-addedrow') ? 0 : 1;\n                this.removeTopRows(rows, this.parent.pageSettings.pageSize - addRowCount);\n            }\n            if (e.args.direction === 'up') {\n                if (this.parent.allowGrouping && this.parent.groupSettings.columns.length) {\n                    var captionRows = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n                    this.removeCaptionRows(captionRows, e.args);\n                }\n                else {\n                    this.removeBottomRows(rows, rows.length - 1, e.args);\n                }\n            }\n            this.isScroll = false;\n            this.top = this.calculateScrollTop(e.args);\n        }\n    };\n    InfiniteScroll.prototype.calculateScrollTop = function (args) {\n        var top = 0;\n        var scrollCnt = this.parent.getContent().firstElementChild;\n        if (args.direction === 'down') {\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !this.isInitialCollapse) {\n                top = this.captionRowHeight();\n            }\n            var captionRows = [].slice.call(this.parent.getContent().firstElementChild.querySelectorAll('tr:not(.e-row)'));\n            var captionCount = 0;\n            if (this.isInitialCollapse && !isNullOrUndefined(captionRows)) {\n                captionCount = Math.round((captionRows.length - 1) / this.parent.groupSettings.columns.length);\n            }\n            var value = captionCount ? captionCount\n                : this.parent.pageSettings.pageSize * (this.parent.infiniteScrollSettings.maxBlocks - 1);\n            var currentViewRowCount = 0;\n            var i = 0;\n            while (currentViewRowCount < scrollCnt.clientHeight) {\n                i++;\n                currentViewRowCount = i * this.parent.getRowHeight();\n            }\n            i = i - 1;\n            top += (value - i) * this.parent.getRowHeight();\n        }\n        if (args.direction === 'up') {\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !this.isInitialCollapse) {\n                top = this.infiniteCache[this.parent.pageSettings.currentPage].length * this.parent.getRowHeight();\n            }\n            else if (this.isInitialCollapse) {\n                var groupedData = this.infiniteCache[this.parent.pageSettings.currentPage];\n                var count = 0;\n                for (var i = 0; i < groupedData.length; i++) {\n                    if (groupedData[i].isCaptionRow) {\n                        count++;\n                    }\n                }\n                top += Math.round(count / this.parent.groupSettings.columns.length) * this.parent.getRowHeight();\n            }\n            else {\n                top += (this.parent.pageSettings.pageSize * this.parent.getRowHeight() + getScrollBarWidth());\n            }\n        }\n        return top;\n    };\n    InfiniteScroll.prototype.captionRowHeight = function () {\n        var rows = [].slice.call(this.parent.getContent().querySelectorAll('tr:not(.e-row)'));\n        return rows.length * this.parent.getRowHeight();\n    };\n    InfiniteScroll.prototype.removeTopRows = function (rows, maxIndx) {\n        var frozeCols = this.parent.isFrozenGrid();\n        var frRows = this.parent.getFrozenMode() === 'Left-Right'\n            ? [].slice.call(this.parent.element.querySelector('.e-frozen-right-content').querySelectorAll('.e-row')) : null;\n        var movableRows = frozeCols ?\n            [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('.e-row')) : null;\n        for (var i = 0; i <= maxIndx; i++) {\n            if (this.parent.frozenRows && this.parent.pageSettings.currentPage === this.parent.infiniteScrollSettings.maxBlocks + 1\n                && i > (maxIndx - this.parent.frozenRows)) {\n                continue;\n            }\n            remove(rows[i]);\n            if (movableRows) {\n                remove(movableRows[i]);\n            }\n            if (frRows) {\n                remove(frRows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeBottomRows = function (rows, maxIndx, args) {\n        var cnt = 0;\n        var frozeCols = this.parent.isFrozenGrid();\n        var movableRows = frozeCols ?\n            [].slice.call(this.parent.getMovableVirtualContent().querySelectorAll('.e-row')) : null;\n        var frRows = this.parent.getFrozenMode() === 'Left-Right' ?\n            [].slice.call(this.parent.element.querySelector('.e-frozen-right-content').querySelectorAll('.e-row')) : null;\n        var pageSize = this.parent.pageSettings.pageSize;\n        if (!frozeCols && this.infiniteCache[args.prevPage].length < pageSize) {\n            cnt = this.parent.pageSettings.pageSize - this.infiniteCache[args.prevPage].length;\n        }\n        if (frozeCols && this.infiniteFrozenCache[args.prevPage][1].length < pageSize) {\n            cnt = this.parent.pageSettings.pageSize - this.infiniteFrozenCache[args.prevPage][1].length;\n        }\n        for (var i = maxIndx; cnt < pageSize; i--) {\n            cnt++;\n            remove(rows[i]);\n            if (movableRows) {\n                remove(movableRows[i]);\n            }\n            if (frRows) {\n                remove(frRows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.removeCaptionRows = function (rows, args) {\n        if (args.direction === 'down') {\n            var lastRow = this.parent.getRows()[this.parent.pageSettings.pageSize];\n            var lastRowIndex = parseInt(lastRow.getAttribute('aria-rowindex'), 10) - 1;\n            var k = 0;\n            for (var i = 0; k < lastRowIndex; i++) {\n                if (!rows[i].classList.contains('e-row')) {\n                    remove(rows[i]);\n                }\n                else {\n                    k = parseInt(rows[i].getAttribute('aria-rowindex'), 10);\n                }\n            }\n        }\n        if (args.direction === 'up') {\n            var rowElements = [].slice.call(this.parent.getContent().querySelectorAll('.e-row'));\n            var lastIndex = parseInt(rowElements[rowElements.length - 1].getAttribute('aria-rowindex'), 10);\n            var page = Math.ceil(lastIndex / this.parent.pageSettings.pageSize);\n            var startIndex = 0;\n            for (var i = this.parent.pageSettings.currentPage + 1; i < page; i++) {\n                startIndex += this.infiniteCache[i].length;\n            }\n            for (var i = startIndex; i < rows.length; i++) {\n                remove(rows[i]);\n            }\n        }\n    };\n    InfiniteScroll.prototype.resetInfiniteBlocks = function (args, isDataModified) {\n        var isInfiniteScroll = this.parent.enableInfiniteScrolling && args.requestType !== 'infiniteScroll';\n        if (!this.initialRender && !isNullOrUndefined(this.parent.infiniteScrollModule) && isInfiniteScroll) {\n            if (this.actions.some(function (value) { return value === args.requestType; }) || isDataModified) {\n                var scrollEle = this.parent.getContent().firstElementChild;\n                this.initialRender = true;\n                scrollEle.scrollTop = 0;\n                this.parent.pageSettings.currentPage = 1;\n                this.infiniteCache = this.infiniteFrozenCache = {};\n                this.infiniteCurrentViewData = {};\n                this.resetContentModuleCache({});\n                this.isRemove = false;\n                this.top = 0;\n                this.isInitialMovableRender = true;\n                this.isInitialCollapse = false;\n                this.parent.contentModule.isRemove = this.isRemove;\n                this.parent.contentModule.isAddRows = this.isRemove;\n                this.parent.contentModule.visibleRows = [];\n                this.parent.contentModule.visibleFrozenRows = [];\n            }\n        }\n    };\n    InfiniteScroll.prototype.setCache = function (e) {\n        if (this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache) {\n            var frozeCols = this.parent.isFrozenGrid();\n            var idx = e.args.isFrozen ? 1 : 0;\n            var isEdit = e.args.requestType !== 'infiniteScroll'\n                && (this.requestType === 'delete' || this.requestType === 'add');\n            var currentPage = this.parent.pageSettings.currentPage;\n            if ((frozeCols && this.isInitialMovableRender) || (!frozeCols && !Object.keys(this.infiniteCache).length) || isEdit) {\n                this.isInitialMovableRender = !e.args.isFrozen;\n                this.setInitialCache(e.modelData, e.args, isEdit);\n            }\n            if (!frozeCols && isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])) {\n                this.infiniteCache[this.parent.pageSettings.currentPage] = e.modelData;\n                this.resetContentModuleCache(this.infiniteCache);\n            }\n            if (frozeCols) {\n                if ((idx === 0 && isNullOrUndefined(this.infiniteFrozenCache[currentPage]))\n                    || !this.infiniteFrozenCache[currentPage][idx].length) {\n                    this.createFrozenCache(currentPage);\n                    this.infiniteFrozenCache[currentPage][idx] = e.modelData;\n                    if (idx === 1) {\n                        this.resetContentModuleCache(this.infiniteFrozenCache);\n                    }\n                }\n            }\n            if (e.isInfiniteScroll && !this.isRemove) {\n                this.isRemove = (currentPage - 1) % this.parent.infiniteScrollSettings.maxBlocks === 0;\n                this.parent.contentModule.isRemove = this.isRemove;\n            }\n        }\n    };\n    InfiniteScroll.prototype.setInitialCache = function (data, args, isEdit, isCurrentViewData) {\n        var frozenCols = this.parent.isFrozenGrid();\n        var idx = args.isFrozen ? 1 : 0;\n        var k = !isEdit ? 1 : this.firstBlock;\n        for (var i = 1; i <= this.parent.infiniteScrollSettings.initialBlocks; i++) {\n            var startIndex = (i - 1) * this.parent.pageSettings.pageSize;\n            var endIndex = i * this.parent.pageSettings.pageSize;\n            if (this.parent.allowGrouping && this.parent.groupSettings.columns.length && !isCurrentViewData) {\n                this.setInitialGroupCache(data, k, startIndex, endIndex);\n            }\n            else {\n                if (isCurrentViewData) {\n                    this.infiniteCurrentViewData[k] = data.slice(startIndex, endIndex);\n                }\n                else {\n                    if (frozenCols) {\n                        this.createFrozenCache(k);\n                        this.infiniteFrozenCache[k][idx] = data.slice(startIndex, endIndex);\n                        this.resetContentModuleCache(this.infiniteFrozenCache);\n                    }\n                    else {\n                        this.infiniteCache[k] = data.slice(startIndex, endIndex);\n                        this.resetContentModuleCache(this.infiniteCache);\n                    }\n                }\n            }\n            k++;\n        }\n    };\n    InfiniteScroll.prototype.createFrozenCache = function (index) {\n        if (!this.infiniteFrozenCache[index]) {\n            this.infiniteFrozenCache[index] = [[], []];\n        }\n    };\n    InfiniteScroll.prototype.setInitialGroupCache = function (data, index, sIndex, eIndex) {\n        var pageData = [];\n        var startIndex = 0;\n        for (var i = 1; i <= Object.keys(this.infiniteCache).length; i++) {\n            startIndex += this.infiniteCache[i].length;\n        }\n        var k = sIndex;\n        for (var i = startIndex; i < data.length && k < eIndex; i++) {\n            if (data[i].index < eIndex || data[i].isCaptionRow) {\n                k = data[i].isCaptionRow ? k : data[i].index;\n                pageData.push(data[i]);\n            }\n            if (data[i].index >= eIndex || data[i].index === eIndex - 1) {\n                break;\n            }\n        }\n        this.infiniteCache[index] = pageData;\n        this.resetContentModuleCache(this.infiniteCache);\n    };\n    InfiniteScroll.prototype.resetContentModuleCache = function (data) {\n        this.parent.contentModule\n            .infiniteCache = data;\n    };\n    /**\n     * @hidden\n     */\n    InfiniteScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return InfiniteScroll;\n}());\nexport { InfiniteScroll };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { extend, remove, isNullOrUndefined, setStyleAttribute, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { ContentRender } from './content-renderer';\nimport * as events from '../base/constant';\nimport { isRowEnteredInGrid, parentsUntil, setDisplayValue } from '../base/util';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * GroupLazyLoadRenderer is used to perform lazy load grouping\n * @hidden\n */\nvar GroupLazyLoadRenderer = /** @class */ (function (_super) {\n    __extends(GroupLazyLoadRenderer, _super);\n    function GroupLazyLoadRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.childCount = 0;\n        _this.scrollData = [];\n        _this.isFirstChildRow = false;\n        _this.groupCache = {};\n        _this.startIndexes = {};\n        _this.captionCounts = {};\n        _this.rowsByUid = {};\n        _this.objIdxByUid = {};\n        _this.initialGroupCaptions = {};\n        _this.requestType = ['paging', 'columnstate', 'reorder', 'cancel', 'save', 'beginEdit', 'add', 'delete'];\n        /** @hidden */\n        _this.cacheMode = false;\n        /** @hidden */\n        _this.cacheBlockSize = 5;\n        /** @hidden */\n        _this.ignoreAccent = _this.parent.allowFiltering ? _this.parent.filterSettings.ignoreAccent : false;\n        /** @hidden */\n        _this.allowCaseSensitive = false;\n        _this.locator = locator;\n        _this.groupGenerator = new GroupModelGenerator(_this.parent);\n        _this.summaryModelGen = new GroupSummaryModelGenerator(_this.parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(_this.parent);\n        _this.rowRenderer = new RowRenderer(_this.locator, null, _this.parent);\n        _this.eventListener();\n        return _this;\n    }\n    GroupLazyLoadRenderer.prototype.eventListener = function () {\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.addEventListener(events.actionComplete, this.actionComplete.bind(this));\n        this.parent.on(events.initialEnd, this.setLazyLoadPageSize, this);\n        this.parent.on(events.setGroupCache, this.setCache, this);\n        this.parent.on(events.lazyLoadScrollHandler, this.scrollHandler, this);\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.groupCollapse, this.collapseShortcut, this);\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.captionExpand = function (tr) {\n        var _this = this;\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var oriIndex = this.getRowObjectIndexByUid(uid);\n        var isRowExist = rowsObject[oriIndex + 1] ? rowsObject[oriIndex].indent < rowsObject[oriIndex + 1].indent : false;\n        var data = rowsObject[oriIndex];\n        var key = this.getGroupKeysAndFields(oriIndex, rowsObject);\n        var e = { captionRowElement: tr, groupInfo: data, enableCaching: true, cancel: false };\n        this.parent.trigger(events.lazyLoadGroupExpand, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.keys = key.keys;\n            args.fields = key.fields;\n            args.rowIndex = tr.rowIndex;\n            args.makeRequest = !args.enableCaching || !isRowExist;\n            if (!args.enableCaching && isRowExist) {\n                _this.clearCache([uid]);\n            }\n            args.skip = 0;\n            args.take = _this.pageSize;\n            data.isExpand = _this.rowsByUid[page][data.uid].isExpand = true;\n            _this.captionRowExpand(args);\n        });\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.captionCollapse = function (tr) {\n        var _this = this;\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var rowIdx = tr.rowIndex;\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var e = {\n            captionRowElement: tr, groupInfo: cache[captionIndex], cancel: false\n        };\n        this.parent.trigger(events.lazyLoadGroupCollapse, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            args.isExpand = false;\n            _this.removeRows(captionIndex, rowIdx);\n        });\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.setLazyLoadPageSize = function () {\n        var scrollEle = this.parent.getContent().firstElementChild;\n        var blockSize = Math.floor(scrollEle.offsetHeight / this.parent.getRowHeight()) - 1;\n        this.pageSize = this.pageSize ? this.pageSize : blockSize * 3;\n        this.blockSize = Math.ceil(this.pageSize / 2);\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.clearLazyGroupCache = function () {\n        this.clearCache();\n    };\n    GroupLazyLoadRenderer.prototype.clearCache = function (uids) {\n        uids = uids ? uids : this.getInitialCaptionIndexes();\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (uids.length) {\n            for (var i = 0; i < uids.length; i++) {\n                var capIdx = this.getRowObjectIndexByUid(uids[i]);\n                var capRow = cache[capIdx];\n                if (!capRow) {\n                    continue;\n                }\n                if (this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid]) {\n                    for (var i_1 = capIdx + 1; i_1 < cache.length; i_1++) {\n                        if (cache[i_1].indent === capRow.indent || cache[i_1].indent < capRow.indent) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][capRow.uid];\n                            break;\n                        }\n                        if (cache[i_1].isCaptionRow) {\n                            delete this.captionCounts[this.parent.pageSettings.currentPage][cache[i_1].uid];\n                        }\n                    }\n                }\n                if (capRow.isExpand) {\n                    var tr = this.parent.getRowElementByUID(capRow.uid);\n                    if (!tr) {\n                        return;\n                    }\n                    this.parent.groupModule.expandCollapseRows(tr.querySelector('.e-recordplusexpand'));\n                }\n                var child = this.getNextChilds(capIdx);\n                if (!child.length) {\n                    continue;\n                }\n                var subChild = [];\n                if (child[child.length - 1].isCaptionRow) {\n                    subChild = this.getChildRowsByParentIndex(cache.indexOf(child[child.length - 1]), false, false, null, true, true);\n                }\n                var start = cache.indexOf(child[0]);\n                var end = subChild.length ? cache.indexOf(subChild[subChild.length - 1]) : cache.indexOf(child[child.length - 1]);\n                cache.splice(start, end - (start - 1));\n                this.refreshCaches();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaches = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        for (var i = 0; i < cache.length; i++) {\n            this.maintainRows(cache[i], i);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getInitialCaptionIndexes = function () {\n        var page = this.parent.pageSettings.currentPage;\n        var uids = [];\n        for (var i = 0; i < this.initialGroupCaptions[page].length; i++) {\n            uids.push(this.initialGroupCaptions[page][i].uid);\n        }\n        return uids;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRowObjectIndexByUid = function (uid) {\n        return this.objIdxByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.collapseShortcut = function (args) {\n        if (this.parent.groupSettings.columns.length &&\n            args.target && parentsUntil(args.target, 'e-content') && args.target.parentElement.tagName === 'TR') {\n            if (!args.collapse && parentsUntil(args.target, 'e-row')) {\n                return;\n            }\n            var row = args.target.parentElement;\n            var uid = row.getAttribute('data-uid');\n            if (args.collapse) {\n                var rowObj = this.getRowByUid(uid);\n                var capRow = this.getRowByUid(rowObj.parentUid);\n                if (capRow.isCaptionRow && capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(rowObj.parentUid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[rowObj.indent - 1]);\n                }\n            }\n            else {\n                var capRow = this.getRowByUid(uid);\n                if (capRow.isCaptionRow && !capRow.isExpand) {\n                    var capEle = this.getRowElementByUid(uid);\n                    this.parent.groupModule.expandCollapseRows(capEle.cells[capRow.indent]);\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getRowByUid = function (uid) {\n        return this.rowsByUid[this.parent.pageSettings.currentPage][uid];\n    };\n    GroupLazyLoadRenderer.prototype.actionBegin = function (args) {\n        if (!args.cancel) {\n            if (!this.requestType.some(function (value) { return value === args.requestType; })) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n            if (args.requestType === 'reorder' && this.parent.groupSettings.columns.length) {\n                var keys = Object.keys(this.groupCache);\n                for (var j = 0; j < keys.length; j++) {\n                    var cache = this.groupCache[keys[j]];\n                    for (var i = 0; i < cache.length; i++) {\n                        if (cache[i].isCaptionRow && !this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(cache[i], null, keys[j]);\n                        }\n                        if (cache[i].isDataRow) {\n                            var from = args.fromIndex + cache[i].indent;\n                            var to = args.toIndex + cache[i].indent;\n                            this.moveCells(cache[i].cells, from, to);\n                        }\n                    }\n                }\n            }\n            if (args.requestType === 'delete'\n                || (args.action === 'add' && args.requestType === 'save')) {\n                this.groupCache = {};\n                this.resetRowMaintenance();\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.actionComplete = function (args) {\n        if (!args.cancel && args.requestType !== 'columnstate' && args.requestType !== 'beginEdit'\n            && args.requestType !== 'delete' && args.requestType !== 'save' && args.requestType !== 'reorder') {\n            this.scrollReset();\n        }\n    };\n    GroupLazyLoadRenderer.prototype.resetRowMaintenance = function () {\n        this.startIndexes = {};\n        this.captionCounts = {};\n        this.rowsByUid = {};\n        this.objIdxByUid = {};\n        this.initialGroupCaptions = {};\n    };\n    GroupLazyLoadRenderer.prototype.moveCells = function (arr, from, to) {\n        if (from >= arr.length) {\n            var k = from - arr.length;\n            while ((k--) + 1) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(from, 0, arr.splice(to, 1)[0]);\n    };\n    GroupLazyLoadRenderer.prototype.removeRows = function (idx, trIdx) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var aggUid;\n        if (this.parent.aggregates.length) {\n            var agg = this.getAggregateByCaptionIndex(idx);\n            aggUid = agg.length ? agg[agg.length - 1].uid : undefined;\n        }\n        var indent = rows[idx].indent;\n        this.addClass(this.getNextChilds(idx));\n        rows[idx].isExpand = this.rowsByUid[page][rows[idx].uid].isExpand = false;\n        var capUid;\n        for (var i = idx + 1; i < rows.length; i++) {\n            if (rows[i].indent === indent || rows[i].indent < indent) {\n                capUid = rows[i].uid;\n                break;\n            }\n            if (rows[i].isCaptionRow && rows[i].isExpand) {\n                this.addClass(this.getNextChilds(i));\n            }\n        }\n        for (var i = trIdx + 1; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === capUid) {\n                break;\n            }\n            else if (trs[i].getAttribute('data-uid') === aggUid) {\n                remove(trs[i]);\n                break;\n            }\n            else {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.addClass = function (rows) {\n        var last = rows[this.blockSize];\n        if (last) {\n            last.lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getNextChilds = function (index, rowObjects) {\n        var group = this.groupCache[this.parent.pageSettings.currentPage];\n        var rows = rowObjects ? rowObjects : group;\n        var indent = group[index].indent + 1;\n        var childRows = [];\n        for (var i = rowObjects ? 0 : index + 1; i < rows.length; i++) {\n            if (rows[i].indent < indent) {\n                break;\n            }\n            if (rows[i].indent === indent) {\n                childRows.push(rows[i]);\n            }\n        }\n        return childRows;\n    };\n    GroupLazyLoadRenderer.prototype.lazyLoadHandler = function (args) {\n        this.setStartIndexes();\n        var tr = this.parent.getContent().querySelectorAll('tr')[args.index];\n        var uid = tr.getAttribute('data-uid');\n        var captionIndex = this.getRowObjectIndexByUid(uid);\n        var captionRow = this.groupCache[this.parent.pageSettings.currentPage][captionIndex];\n        var rows = args.isRowExist ? args.isScroll ? this.scrollData\n            : this.getChildRowsByParentIndex(captionIndex, true, true, null, true) : [];\n        this.scrollData = [];\n        if (!args.isRowExist) {\n            this.setRowIndexes(captionIndex, captionRow);\n            this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][captionIndex], args.count);\n            if (Object.keys(args.data).indexOf('GroupGuid') !== -1) {\n                for (var i = 0; i < args.data.length; i++) {\n                    var data = this.groupGenerator.generateCaptionRow(args.data[i], args.level, captionRow.parentGid, undefined, 0, captionRow.uid);\n                    rows.push(data);\n                    if (this.parent.aggregates.length) {\n                        rows = rows.concat((this.summaryModelGen.generateRows(args.data[i], { level: args.level + 1, parentUid: data.uid })));\n                    }\n                }\n            }\n            else {\n                this.groupGenerator.index = this.getStartIndex(captionIndex, args.isScroll);\n                rows = this.groupGenerator.generateDataRows(args.data, args.level, captionRow.parentGid, 0, captionRow.uid);\n            }\n        }\n        var trIdx = args.isScroll ? this.rowIndex : args.index;\n        var nxtChild = this.getNextChilds(captionIndex, rows);\n        var lastRow = !args.up ? this.hasLastChildRow(args.isScroll, args.count, nxtChild.length) : true;\n        if (!args.isRowExist && !lastRow) {\n            nxtChild[this.blockSize].lazyLoadCssClass = 'e-lazyload-middle-down';\n        }\n        if (!lastRow) {\n            nxtChild[nxtChild.length - 1].lazyLoadCssClass = 'e-not-lazyload-end';\n        }\n        var aggregates = !args.isScroll && !args.isRowExist ? this.getAggregateByCaptionIndex(captionIndex) : [];\n        if (!args.up) {\n            if (!args.isRowExist) {\n                this.refreshRowObjects(rows, args.isScroll ? this.rowObjectIndex : captionIndex);\n            }\n        }\n        this.render(trIdx, rows, lastRow, aggregates);\n        if (this.isFirstChildRow && !args.up) {\n            this.parent.getContent().firstElementChild.scrollTop = rows.length * this.parent.getRowHeight();\n        }\n        this.isFirstChildRow = false;\n        this.rowIndex = undefined;\n        this.rowObjectIndex = undefined;\n        this.childCount = 0;\n    };\n    GroupLazyLoadRenderer.prototype.setRowIndexes = function (capIdx, row) {\n        if (!this.captionCounts[this.parent.pageSettings.currentPage]) {\n            this.captionCounts[this.parent.pageSettings.currentPage] = {};\n        }\n        if (row.isCaptionRow) {\n            this.captionCounts[this.parent.pageSettings.currentPage][row.uid] = row.data.count;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getStartIndex = function (capIdx, isScroll) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        if (isScroll) {\n            return cache[this.rowObjectIndex].index + 1;\n        }\n        var count = 0;\n        var idx = 0;\n        var prevCapRow = this.getRowByUid(cache[capIdx].parentUid);\n        if (prevCapRow) {\n            idx = this.prevCaptionCount(prevCapRow);\n        }\n        if (cache[capIdx].indent > 0) {\n            for (var i = capIdx - 1; i >= 0; i--) {\n                if (cache[i].indent < cache[capIdx].indent) {\n                    break;\n                }\n                if (cache[i].isCaptionRow && cache[i].indent === cache[capIdx].indent) {\n                    count = count + cache[i].data.count;\n                }\n            }\n        }\n        var index = count + idx + this.startIndexes[page][cache[capIdx].parentGid];\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.prevCaptionCount = function (prevCapRow) {\n        var page = this.parent.pageSettings.currentPage;\n        var cache = this.groupCache[page];\n        var idx = 0;\n        for (var i = cache.indexOf(prevCapRow) - 1; i >= 0; i--) {\n            if (cache[i].indent === 0) {\n                break;\n            }\n            if (cache[i].indent < prevCapRow.indent) {\n                break;\n            }\n            if (cache[i].isCaptionRow && cache[i].indent === prevCapRow.indent) {\n                var count = this.captionCounts[page][cache[i].uid];\n                idx = idx + (count ? count : cache[i].data.count);\n            }\n        }\n        var capRow = this.getRowByUid(prevCapRow.parentUid);\n        if (capRow) {\n            idx = idx + this.prevCaptionCount(capRow);\n        }\n        return idx;\n    };\n    GroupLazyLoadRenderer.prototype.setStartIndexes = function () {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (!this.startIndexes[this.parent.pageSettings.currentPage]) {\n            var indexes = [];\n            var idx = void 0;\n            for (var i = 0; i < cache.length; i++) {\n                if (cache[i].isCaptionRow) {\n                    !indexes.length ? indexes.push(0)\n                        : indexes.push(cache[idx].data.count + indexes[indexes.length - 1]);\n                    idx = i;\n                }\n            }\n            this.startIndexes[this.parent.pageSettings.currentPage] = indexes;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.hasLastChildRow = function (isScroll, captionCount, rowCount) {\n        return isScroll ? captionCount === this.childCount + rowCount : captionCount === rowCount;\n    };\n    GroupLazyLoadRenderer.prototype.refreshCaptionRowCount = function (row, count) {\n        row.data.count = count;\n    };\n    GroupLazyLoadRenderer.prototype.render = function (trIdx, rows, hasLastChildRow, aggregates) {\n        var tr = this.parent.getContent().querySelectorAll('tr')[trIdx];\n        var isLastRow = true;\n        if (tr && aggregates.length) {\n            for (var i = aggregates.length - 1; i >= 0; i--) {\n                tr.insertAdjacentElement('afterend', this.rowRenderer.render(aggregates[i], this.parent.getColumns()));\n            }\n        }\n        if (tr && rows.length) {\n            for (var i = rows.length - 1; i >= 0; i--) {\n                if (this.confirmRowRendering(rows[i])) {\n                    tr.insertAdjacentElement('afterend', this.rowRenderer.render(rows[i], this.parent.getColumns()));\n                }\n            }\n        }\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.maintainRows = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        if (!this.rowsByUid[page]) {\n            this.rowsByUid[page] = {};\n            this.objIdxByUid[page] = {};\n        }\n        if (row.uid) {\n            this.rowsByUid[page][row.uid] = row;\n        }\n        this.objIdxByUid[page][row.uid] = index;\n    };\n    GroupLazyLoadRenderer.prototype.confirmRowRendering = function (row) {\n        var check = true;\n        if (isNullOrUndefined(row.indent) && !row.isDataRow && !row.isCaptionRow) {\n            var cap = this.getRowByUid(row.parentUid);\n            if (cap.isCaptionRow && !cap.isExpand) {\n                check = false;\n            }\n        }\n        return check;\n    };\n    GroupLazyLoadRenderer.prototype.refreshRowObjects = function (newRows, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rowsObject = this.groupCache[page];\n        this.rowsByUid[page] = {};\n        this.objIdxByUid[page] = {};\n        var newRowsObject = [];\n        var k = 0;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (i === index) {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n                for (var j = 0; j < newRows.length; j++) {\n                    this.maintainRows(newRows[j], k);\n                    newRowsObject.push(newRows[j]);\n                    k++;\n                }\n            }\n            else {\n                this.maintainRows(rowsObject[i], k);\n                newRowsObject.push(rowsObject[i]);\n                k++;\n            }\n        }\n        this.groupCache[this.parent.pageSettings.currentPage] = extend([], newRowsObject);\n        this.updateCurrentViewData();\n    };\n    GroupLazyLoadRenderer.prototype.getAggregateByCaptionIndex = function (index) {\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        var parent = cache[index];\n        var indent = parent.indent;\n        var uid = parent.uid;\n        var agg = [];\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].indent === indent) {\n                break;\n            }\n            if (isNullOrUndefined(cache[i].indent) && cache[i].parentUid === uid) {\n                agg.push(cache[i]);\n            }\n        }\n        return agg;\n    };\n    GroupLazyLoadRenderer.prototype.getChildRowsByParentIndex = function (index, deep, block, data, includeAgg, includeCollapseAgg) {\n        var cache = data ? data : this.groupCache[this.parent.pageSettings.currentPage];\n        var parentRow = cache[index];\n        var agg = [];\n        if (!parentRow.isCaptionRow || (parentRow.isCaptionRow && !parentRow.isExpand && !includeCollapseAgg)) {\n            return [];\n        }\n        if (includeAgg && this.parent.aggregates.length) {\n            agg = this.getAggregateByCaptionIndex(index);\n        }\n        var indent = parentRow.indent;\n        var uid = parentRow.uid;\n        var rows = [];\n        var count = 0;\n        for (var i = index + 1; i < cache.length; i++) {\n            if (cache[i].parentUid === uid) {\n                if (isNullOrUndefined(cache[i].indent)) {\n                    continue;\n                }\n                count++;\n                rows.push(cache[i]);\n                if (deep && cache[i].isCaptionRow) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, deep, block, data, includeAgg));\n                }\n                if (block && count === this.pageSize) {\n                    break;\n                }\n            }\n            if (cache[i].indent === indent) {\n                break;\n            }\n        }\n        return rows.concat(agg);\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.initialGroupRows = function (isReorder) {\n        var rows = [];\n        var cache = this.groupCache[this.parent.pageSettings.currentPage];\n        if (isReorder) {\n            return this.getRenderedRowsObject();\n        }\n        for (var i = 0; i < cache.length; i++) {\n            if (cache[i].indent === 0) {\n                rows.push(cache[i]);\n                rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, cache, true));\n            }\n        }\n        return rows;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRenderedRowsObject = function () {\n        var rows = [];\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        for (var i = 0; i < trs.length; i++) {\n            rows.push(this.getRowByUid(trs[i].getAttribute('data-uid')));\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnDownScroll = function (index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var k = index;\n        for (var i = 0; i < this.pageSize; i++) {\n            if (!rowsObject[k] || rowsObject[k].indent < rowsObject[index].indent) {\n                break;\n            }\n            if (rowsObject[k].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[k]);\n                if (rowsObject[k].isCaptionRow && rowsObject[k].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(k, true, true, null, true));\n                }\n            }\n            if (rowsObject[k].indent > rowsObject[index].indent || isNullOrUndefined(rowsObject[k].indent)) {\n                i--;\n            }\n            k++;\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.getCacheRowsOnUpScroll = function (start, end, index) {\n        var rows = [];\n        var rowsObject = this.groupCache[this.parent.pageSettings.currentPage];\n        var str = false;\n        for (var i = 0; i < rowsObject.length; i++) {\n            if (str && (!rowsObject[i] || rowsObject[i].indent < rowsObject[index].indent || rowsObject[i].uid === end)) {\n                break;\n            }\n            if (!str && rowsObject[i].uid === start) {\n                str = true;\n            }\n            if (str && rowsObject[i].indent === rowsObject[index].indent) {\n                rows.push(rowsObject[i]);\n                if (rowsObject[i].isCaptionRow && rowsObject[i].isExpand) {\n                    rows = rows.concat(this.getChildRowsByParentIndex(i, true, true, null, true));\n                }\n            }\n        }\n        return rows;\n    };\n    GroupLazyLoadRenderer.prototype.scrollHandler = function (e) {\n        if (this.parent.isDestroyed || this.childCount) {\n            return;\n        }\n        var downTrs = [].slice.call(this.parent.getContent().querySelectorAll('.e-lazyload-middle-down'));\n        var upTrs = [].slice.call(this.parent.getContent().querySelectorAll('.e-lazyload-middle-up'));\n        var endTrs = [].slice.call(this.parent.getContent().querySelectorAll('.e-not-lazyload-end'));\n        var tr;\n        var lazyLoadDown = false;\n        var lazyLoadUp = false;\n        var lazyLoadEnd = false;\n        if (e.scrollDown && downTrs.length) {\n            var result = this.findRowElements(downTrs);\n            tr = result.tr;\n            lazyLoadDown = result.entered;\n        }\n        if (!e.scrollDown && endTrs) {\n            for (var i = 0; i < endTrs.length; i++) {\n                var top_1 = endTrs[i].getBoundingClientRect().top;\n                var scrollHeight = this.parent.getContent().scrollHeight;\n                if (top_1 > 0 && top_1 < scrollHeight) {\n                    tr = endTrs[i];\n                    lazyLoadEnd = true;\n                    this.rowIndex = tr.rowIndex;\n                    break;\n                }\n            }\n        }\n        if (!e.scrollDown && upTrs.length && !lazyLoadEnd) {\n            var result = this.findRowElements(upTrs);\n            tr = result.tr;\n            lazyLoadUp = result.entered;\n        }\n        if (tr) {\n            if (lazyLoadDown && e.scrollDown && lazyLoadDown && tr) {\n                this.scrollDownHandler(tr);\n            }\n            if (!e.scrollDown && lazyLoadEnd && tr) {\n                this.scrollUpEndRowHandler(tr);\n            }\n            if (this.cacheMode && !e.scrollDown && !lazyLoadEnd && lazyLoadUp && tr) {\n                this.scrollUpHandler(tr);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpEndRowHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getContent().querySelector('tr[data-uid=' + parentCapRow.uid + ']');\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        if (currentPage === 1) {\n            return;\n        }\n        this.childCount = currentPage * this.pageSize;\n        index = this.getCurrentBlockEndIndex(childRow, index);\n        if (this.childCount < parentCapRow.data.count) {\n            tr.classList.remove('e-not-lazyload-end');\n            childRow.lazyLoadCssClass = '';\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(index + 1) : [];\n            var key = this.getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: key.fields,\n                keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && this.childCount >= (this.pageSize * this.cacheBlockSize)) {\n                var child_1 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_1.indexOf(rows[idx]) / this.pageSize));\n                var removeBlock = currenBlock - (this.cacheBlockSize - 1);\n                this.removeBlock(uid, isRowExist, removeBlock, child_1);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollDownHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var index = this.getRowObjectIndexByUid(uid);\n        var idx = index;\n        var childRow = rows[index];\n        var parentCapRow = this.getRowByUid(childRow.parentUid);\n        var capRowObjIdx = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.getRowElementByUid(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(childRow);\n        var currentPage = Math.ceil(childIdx / this.pageSize);\n        this.childCount = currentPage * this.pageSize;\n        index = this.rowObjectIndex = this.getRowObjectIndexByUid(child[this.childCount - 1].uid);\n        var lastchild = rows[index];\n        var lastRow = this.getRowElementByUid(lastchild.uid);\n        this.rowIndex = lastRow.rowIndex;\n        index = this.getCurrentBlockEndIndex(lastchild, index);\n        if (this.childCount < parentCapRow.data.count) {\n            var isRowExist = rows[index + 1] ? childRow.indent === rows[index + 1].indent : false;\n            if (isRowExist && !isNullOrUndefined(this.getRowElementByUid(rows[index + 1].uid))) {\n                this.childCount = 0;\n                return;\n            }\n            if (currentPage > 1 || !this.cacheMode) {\n                tr.classList.remove('e-lazyload-middle-down');\n                lastRow.classList.remove('e-not-lazyload-end');\n                lastchild.lazyLoadCssClass = '';\n            }\n            this.scrollData = isRowExist ? this.getCacheRowsOnDownScroll(this.rowObjectIndex + 1) : [];\n            var query = this.getGroupKeysAndFields(capRowObjIdx, rows);\n            var args = {\n                rowIndex: capRowEleIndex, makeRequest: !isRowExist, groupInfo: parentCapRow, fields: query.fields,\n                keys: query.keys, skip: this.childCount, take: this.pageSize, isScroll: true\n            };\n            if (this.cacheMode && (this.childCount - this.pageSize) >= (this.pageSize * this.cacheBlockSize)) {\n                var child_2 = this.getChildRowsByParentIndex(capRowObjIdx);\n                var currenBlock = Math.ceil((child_2.indexOf(rows[idx]) / this.pageSize)) - 1;\n                var removeBlock = (currenBlock - (this.cacheBlockSize - 1)) + 1;\n                this.removeBlock(uid, isRowExist, removeBlock, child_2, lastchild);\n                args.cachedRowIndex = (removeBlock * this.pageSize);\n            }\n            this.captionRowExpand(args);\n        }\n        else {\n            this.childCount = 0;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.getCurrentBlockEndIndex = function (row, index) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        if (row.isCaptionRow) {\n            if (row.isExpand) {\n                var childCount = this.getChildRowsByParentIndex(index, true).length;\n                this.rowIndex = this.rowIndex + childCount;\n            }\n            var agg = this.getAggregateByCaptionIndex(index);\n            this.rowObjectIndex = this.rowObjectIndex + agg.length;\n            var idx = index;\n            for (var i = idx + 1; i < rows.length; i++) {\n                if (rows[i].indent === rows[index].indent || rows[i].indent < rows[index].indent) {\n                    index = idx;\n                    break;\n                }\n                else {\n                    idx++;\n                }\n            }\n        }\n        return index;\n    };\n    GroupLazyLoadRenderer.prototype.removeBlock = function (uid, isRowExist, removeBlock, child, lastchild) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid1 = child[(((removeBlock + 1) * this.pageSize) - 1) - this.blockSize].uid;\n        var uid2 = child[(removeBlock * this.pageSize) - this.pageSize].uid;\n        var uid3 = child[(removeBlock * this.pageSize)].uid;\n        var firstIdx = this.getRowObjectIndexByUid(uid1);\n        rows[firstIdx].lazyLoadCssClass = 'e-lazyload-middle-up';\n        this.getRowElementByUid(uid1).classList.add('e-lazyload-middle-up');\n        if (lastchild) {\n            this.getRowElementByUid(uid3).classList.add('e-not-lazyload-first');\n            this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-first';\n            this.getRowByUid(uid2).lazyLoadCssClass = '';\n        }\n        if (isRowExist) {\n            this.removeTopRows(lastchild ? lastchild.uid : uid, uid2, uid3);\n        }\n        else {\n            this.uid1 = uid2;\n            this.uid2 = uid3;\n            this.uid3 = lastchild ? lastchild.uid : uid;\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollUpHandler = function (tr) {\n        var page = this.parent.pageSettings.currentPage;\n        var rows = this.groupCache[page];\n        var uid = tr.getAttribute('data-uid');\n        var row = this.getRowByUid(uid);\n        var index = this.rowObjectIndex = this.getRowObjectIndexByUid(uid);\n        var parentCapRow = this.getRowByUid(row.parentUid);\n        var capRowObjIdx = this.rowIndex = this.getRowObjectIndexByUid(parentCapRow.uid);\n        var captionRowEle = this.parent.getRowElementByUID(parentCapRow.uid);\n        var capRowEleIndex = captionRowEle.rowIndex;\n        var child = this.getChildRowsByParentIndex(capRowObjIdx);\n        var childIdx = child.indexOf(rows[index]);\n        var currenBlock = Math.floor((childIdx / this.pageSize));\n        var idx = this.blockSize;\n        if ((this.blockSize * 2) > this.pageSize) {\n            idx = (this.blockSize * 2) - this.pageSize;\n            idx = this.blockSize - idx;\n        }\n        var start = child[(childIdx - (idx - 1)) - this.pageSize].uid;\n        var end = child[childIdx - (idx - 1)].uid;\n        this.scrollData = this.getCacheRowsOnUpScroll(start, end, index - (idx - 1));\n        this.isFirstChildRow = currenBlock > 1;\n        if (this.isFirstChildRow) {\n            this.scrollData[0].lazyLoadCssClass = 'e-not-lazyload-first';\n        }\n        this.getRowByUid(end).lazyLoadCssClass = '';\n        this.getRowElementByUid(end).classList.remove('e-not-lazyload-first');\n        var removeBlock = currenBlock + this.cacheBlockSize;\n        if (child.length !== parentCapRow.data.count && (removeBlock * this.pageSize > child.length)) {\n            this.isFirstChildRow = false;\n            this.scrollData[0].lazyLoadCssClass = '';\n            this.getRowElementByUid(end).classList.add('e-not-lazyload-first');\n            return;\n        }\n        var count = removeBlock * this.pageSize > parentCapRow.data.count\n            ? parentCapRow.data.count : removeBlock * this.pageSize;\n        var size = removeBlock * this.pageSize > parentCapRow.data.count\n            ? (this.pageSize - ((this.pageSize * removeBlock) - parentCapRow.data.count)) : this.pageSize;\n        var childRows = this.getChildRowsByParentIndex(rows.indexOf(child[count - 1]), true, false, null, true);\n        var uid1 = childRows.length ? childRows[childRows.length - 1].uid : child[(count - 1)].uid;\n        var uid2 = child[count - size].uid;\n        var uid3 = child[(count - size) - 1].uid;\n        var lastIdx = this.objIdxByUid[page][uid2] - idx;\n        if (rows[lastIdx].lazyLoadCssClass === 'e-lazyload-middle-down') {\n            var trEle = this.getRowElementByUid(rows[lastIdx].uid);\n            if (trEle) {\n                trEle.classList.add('e-lazyload-middle-down');\n            }\n        }\n        this.getRowByUid(uid1).lazyLoadCssClass = '';\n        this.getRowByUid(uid3).lazyLoadCssClass = 'e-not-lazyload-end';\n        this.getRowElementByUid(uid3).classList.add('e-not-lazyload-end');\n        this.removeBottomRows(uid1, uid2, uid3);\n        this.rowIndex = tr.rowIndex - idx;\n        tr.classList.length > 1 ? tr.classList.remove('e-lazyload-middle-up') : tr.removeAttribute('class');\n        if (!isNullOrUndefined(this.getRowElementByUid(start))) {\n            this.childCount = 0;\n            this.scrollData = [];\n            return;\n        }\n        var key = this.getGroupKeysAndFields(this.getRowObjectIndexByUid(parentCapRow.uid), rows);\n        var args = {\n            rowIndex: capRowEleIndex, makeRequest: false, groupInfo: parentCapRow, fields: key.fields,\n            keys: key.keys, skip: this.childCount, take: this.pageSize, isScroll: true, scrollUp: true\n        };\n        this.captionRowExpand(args);\n    };\n    GroupLazyLoadRenderer.prototype.findRowElements = function (rows) {\n        var entered = false;\n        var tr;\n        for (var i = 0; i < rows.length; i++) {\n            var rowIdx = rows[i].rowIndex;\n            if (isRowEnteredInGrid(rowIdx, this.parent)) {\n                entered = true;\n                this.rowIndex = rowIdx;\n                tr = rows[i];\n                break;\n            }\n        }\n        return { entered: entered, tr: tr };\n    };\n    GroupLazyLoadRenderer.prototype.getRowElementByUid = function (uid) {\n        return this.parent.getContent().querySelector('tr[data-uid=' + uid + ']');\n    };\n    GroupLazyLoadRenderer.prototype.removeTopRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var page = this.parent.pageSettings.currentPage;\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid3) {\n                var tr = this.parent.getContent().querySelector('tr[data-uid=' + uid1 + ']');\n                if (tr) {\n                    this.rowIndex = tr.rowIndex;\n                }\n                break;\n            }\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.removeBottomRows = function (uid1, uid2, uid3) {\n        var trs = [].slice.call(this.parent.getContent().querySelectorAll('tr'));\n        var start = false;\n        for (var i = 0; i < trs.length; i++) {\n            if (trs[i].getAttribute('data-uid') === uid2) {\n                start = true;\n            }\n            if (start) {\n                remove(trs[i]);\n                if (trs[i].getAttribute('data-uid') === uid1) {\n                    break;\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.setCache = function (e) {\n        var page = this.parent.pageSettings.currentPage;\n        this.groupCache[page] = this.initialGroupCaptions[page] = extend([], e.data);\n    };\n    GroupLazyLoadRenderer.prototype.getGroupKeysAndFields = function (index, rowsObject) {\n        var fields = [];\n        var keys = [];\n        for (var i = index; i >= 0; i--) {\n            if (rowsObject[i].isCaptionRow && fields.indexOf(rowsObject[i].data.field) === -1\n                && (rowsObject[i].indent < rowsObject[index].indent || i === index)) {\n                fields.push(rowsObject[i].data.field);\n                keys.push(rowsObject[i].data.key);\n                if (rowsObject[i].indent === 0) {\n                    break;\n                }\n            }\n        }\n        return { fields: fields, keys: keys };\n    };\n    GroupLazyLoadRenderer.prototype.generateExpandPredicates = function (fields, values) {\n        var filterCols = [];\n        for (var i = 0; i < fields.length; i++) {\n            var column = this.parent.getColumnByField(fields[i]);\n            var value = values[i] === 'null' ? null : values[i];\n            var pred = {\n                field: fields[i], predicate: 'or', uid: column.uid, operator: 'equal', type: column.type,\n                matchCase: this.allowCaseSensitive, ignoreAccent: this.ignoreAccent\n            };\n            if (value === '' || isNullOrUndefined(value)) {\n                filterCols = filterCols.concat(CheckBoxFilterBase.generateNullValuePredicates(pred));\n            }\n            else {\n                filterCols.push(extend({}, { value: value }, pred));\n            }\n        }\n        return CheckBoxFilterBase.getPredicate(filterCols);\n    };\n    GroupLazyLoadRenderer.prototype.getPredicates = function (pred) {\n        var predicateList = [];\n        for (var _i = 0, _a = Object.keys(pred); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            predicateList.push(pred[prop]);\n        }\n        return predicateList;\n    };\n    GroupLazyLoadRenderer.prototype.captionRowExpand = function (args) {\n        var _this = this;\n        var captionRow = args.groupInfo;\n        var level = this.parent.groupSettings.columns.indexOf(captionRow.data.field) + 1;\n        var pred = this.generateExpandPredicates(args.fields, args.keys);\n        var predicateList = this.getPredicates(pred);\n        var lazyLoad = { level: level, skip: args.skip, take: args.take, where: predicateList };\n        if (args.makeRequest) {\n            var query = this.parent.renderModule.data.generateQuery(true);\n            if (!query.isCountRequired) {\n                query.isCountRequired = true;\n            }\n            query.lazyLoad.push({ key: 'onDemandGroupInfo', value: lazyLoad });\n            this.parent.showSpinner();\n            this.parent.renderModule.data.getData({}, query).then(function (e) {\n                _this.parent.hideSpinner();\n                if (e.result.length === 0) {\n                    return;\n                }\n                if (_this.cacheMode && _this.uid1 && _this.uid2) {\n                    _this.removeTopRows(_this.uid3, _this.uid1, _this.uid2);\n                    _this.uid1 = _this.uid2 = _this.uid3 = undefined;\n                }\n                _this.lazyLoadHandler({\n                    data: e.result, count: e.count, level: level, index: args.rowIndex,\n                    isRowExist: false, isScroll: args.isScroll, up: false, rowIndex: args.cachedRowIndex\n                });\n            })\n                .catch(function (e) { return _this.parent.renderModule.dataManagerFailure(e, { requestType: 'grouping' }); });\n        }\n        else {\n            this.lazyLoadHandler({\n                data: null, count: args.groupInfo.data.count, level: level, index: args.rowIndex,\n                isRowExist: true, isScroll: args.isScroll, up: args.scrollUp, rowIndex: args.cachedRowIndex\n            });\n        }\n    };\n    GroupLazyLoadRenderer.prototype.scrollReset = function (top) {\n        this.parent.getContent().firstElementChild.scrollTop = top ? this.parent.getContent().firstElementChild.scrollTop + top : 0;\n    };\n    GroupLazyLoadRenderer.prototype.updateCurrentViewData = function () {\n        var records = [];\n        this.getRows().filter(function (row) {\n            if (row.isDataRow) {\n                records[row.index] = row.data;\n            }\n        });\n        this.parent.currentViewData = records.length ? records : this.parent.currentViewData;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getGroupCache = function () {\n        return this.groupCache;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRows = function () {\n        return this.groupCache[this.parent.pageSettings.currentPage] || [];\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRowElements = function () {\n        return [].slice.call(this.parent.getContent().querySelectorAll('.e-row'));\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.getRowByIndex = function (index) {\n        var tr = [].slice.call(this.parent.getContent().querySelectorAll('.e-row'));\n        var row;\n        for (var i = 0; !isNullOrUndefined(index) && i < tr.length; i++) {\n            if (tr[i].getAttribute('aria-rowindex') === index.toString()) {\n                row = tr[i];\n                break;\n            }\n        }\n        return row;\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = this.getRows();\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var contentrows = this.getRows().filter(function (row) { return !row.isDetailRow; });\n        for (var i = 0; i < columns.length; i++) {\n            var column = columns[i];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            var colIdx = this.parent.getColumnIndexByUid(column.uid);\n            var displayVal = column.visible === true ? '' : 'none';\n            if (idx !== -1 && testRow && idx < testRow.cells.length) {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n            this.setDisplayNone(gObj.getDataRows(), colIdx, displayVal, contentrows, idx);\n            if (!this.parent.invokedFromMedia && column.hideAtMedia) {\n                this.parent.updateMediaColumns(column);\n            }\n            this.parent.invokedFromMedia = false;\n        }\n    };\n    /** @hidden */\n    GroupLazyLoadRenderer.prototype.setDisplayNone = function (tr, idx, displayVal, rows, oriIdx) {\n        if (!this.parent.groupSettings.columns.length) {\n            setDisplayValue(tr, idx, displayVal, rows);\n        }\n        else {\n            var keys = Object.keys(this.groupCache);\n            for (var j = 0; j < keys.length; j++) {\n                var uids = this.rowsByUid[keys[j]];\n                var idxs = Object.keys(uids);\n                for (var i = 0; i < idxs.length; i++) {\n                    var tr_1 = this.parent.getContent().querySelector('tr[data-uid=' + idxs[i] + ']');\n                    var row = uids[idxs[i]];\n                    if (row.isCaptionRow) {\n                        if (!this.captionModelGen.isEmpty()) {\n                            this.changeCaptionRow(row, tr_1, keys[j]);\n                        }\n                        else {\n                            row.cells[row.indent + 1].colSpan = displayVal === '' ? row.cells[row.indent + 1].colSpan + 1\n                                : row.cells[row.indent + 1].colSpan - 1;\n                            if (tr_1) {\n                                tr_1.cells[row.indent + 1].colSpan = row.cells[row.indent + 1].colSpan;\n                            }\n                        }\n                    }\n                    if (row.isDataRow) {\n                        this.showAndHideCells(tr_1, idx, displayVal, false);\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                    }\n                    if (!row.isCaptionRow && !row.isDataRow && isNullOrUndefined(row.indent)) {\n                        row.cells[oriIdx].visible = displayVal === '' ? true : false;\n                        row.visible = row.cells.some(function (cell) { return cell.isDataCell && cell.visible; });\n                        this.showAndHideCells(tr_1, idx, displayVal, true, row);\n                    }\n                }\n            }\n        }\n    };\n    GroupLazyLoadRenderer.prototype.changeCaptionRow = function (row, tr, index) {\n        var capRow = row;\n        var captionData = row.data;\n        var data = this.groupGenerator.generateCaptionRow(captionData, capRow.indent, capRow.parentGid, undefined, capRow.tIndex, capRow.parentUid);\n        data.uid = row.uid;\n        data.isExpand = row.isExpand;\n        data.lazyLoadCssClass = row.lazyLoadCssClass;\n        this.rowsByUid[index][row.uid] = data;\n        this.groupCache[index][this.objIdxByUid[index][row.uid]] = data;\n        if (tr) {\n            var tbody = this.parent.getContentTable().querySelector('tbody');\n            tbody.replaceChild(this.rowRenderer.render(data, this.parent.getColumns()), tr);\n        }\n    };\n    GroupLazyLoadRenderer.prototype.showAndHideCells = function (tr, idx, displayVal, isSummary, row) {\n        if (tr) {\n            var cls = isSummary ? 'td.e-summarycell' : 'td.e-rowcell';\n            setStyleAttribute(tr.querySelectorAll(cls)[idx], { 'display': displayVal });\n            if (tr.querySelectorAll(cls)[idx].classList.contains('e-hide')) {\n                removeClass([tr.querySelectorAll(cls)[idx]], ['e-hide']);\n            }\n            if (isSummary) {\n                if (row.visible && tr.classList.contains('e-hide')) {\n                    removeClass([tr], ['e-hide']);\n                }\n                else if (!row.visible) {\n                    addClass([tr], ['e-hide']);\n                }\n            }\n        }\n    };\n    return GroupLazyLoadRenderer;\n}(ContentRender));\nexport { GroupLazyLoadRenderer };\n","import * as events from '../base/constant';\nimport { GroupLazyLoadRenderer } from '../renderer/group-lazy-load-renderer';\nimport { RenderType } from '../base/enum';\n/**\n * Group lazy load class\n */\nvar LazyLoadGroup = /** @class */ (function () {\n    /**\n     * Constructor for Grid group lazy load module\n     * @hidden\n     */\n    function LazyLoadGroup(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    LazyLoadGroup.prototype.getModuleName = function () {\n        return 'lazyLoadGroup';\n    };\n    /**\n     * @hidden\n     */\n    LazyLoadGroup.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n    };\n    /**\n     * @hidden\n     */\n    LazyLoadGroup.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    LazyLoadGroup.prototype.instantiateRenderer = function () {\n        if (this.parent.height === 'auto') {\n            this.parent.height = this.parent.pageSettings.pageSize * this.parent.getRowHeight();\n        }\n        var renderer = this.serviceLocator.getService('rendererFactory');\n        if (this.parent.groupSettings.enableLazyLoading) {\n            renderer.addRenderer(RenderType.Content, new GroupLazyLoadRenderer(this.parent, this.serviceLocator));\n        }\n    };\n    /**\n     * @hidden\n     */\n    LazyLoadGroup.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return LazyLoadGroup;\n}());\nexport { LazyLoadGroup };\n","import { extend, isBlazor } from '@syncfusion/ej2-base';\nimport { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `AutoCompleteEditCell` is used to handle autocomplete cell type editing.\n * @hidden\n */\nvar AutoCompleteEditCell = /** @class */ (function () {\n    function AutoCompleteEditCell(parent) {\n        //constructor\n        this.parentObj = parent;\n    }\n    AutoCompleteEditCell.prototype.create = function (args) {\n        //create \n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parentObj.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parentObj.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    AutoCompleteEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parentObj.editSettings.mode !== 'Dialog';\n        this.object = new AutoComplete(extend({\n            dataSource: this.parentObj.dataSource instanceof DataManager ?\n                this.parentObj.dataSource : new DataManager(this.parentObj.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            // enableRtl: this.parentObject.enableRtl,\n            actionComplete: this.selectedValues.bind(this),\n            placeholder: isInlineEdit ? '' : args.column.headerText,\n            floatLabelType: isInlineEdit ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        if (isBlazor()) {\n            this.object.locale = this.parentObj.locale;\n        }\n        this.object.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    AutoCompleteEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    AutoCompleteEditCell.prototype.selectedValues = function (valObj) {\n        valObj.result = DataUtil.distinct(valObj.result, this.object.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = valObj.result;\n        }\n    };\n    AutoCompleteEditCell.prototype.destroy = function () {\n        if (this.object) {\n            this.object.destroy();\n        }\n    };\n    return AutoCompleteEditCell;\n}());\nexport { AutoCompleteEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { ComboBox } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ComboBoxEditCell` is used to handle ComboBoxEdit cell type editing.\n * @hidden\n */\nvar ComboboxEditCell = /** @class */ (function () {\n    function ComboboxEditCell(parentObject) {\n        //constructor\n        this.parent = parentObject;\n    }\n    ComboboxEditCell.prototype.create = function (args) {\n        //create\n        var fieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + fieldName,\n                name: fieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    ComboboxEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineMode = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new ComboBox(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.finalValue.bind(this),\n            placeholder: isInlineMode ? '' : args.column.headerText,\n            floatLabelType: isInlineMode ? 'Never' : 'Always',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ComboboxEditCell.prototype.read = function (inputEle) {\n        return inputEle.ej2_instances[0].value;\n    };\n    ComboboxEditCell.prototype.finalValue = function (val) {\n        val.result = DataUtil.distinct(val.result, this.obj.fields.value, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = val.result;\n        }\n    };\n    ComboboxEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ComboboxEditCell;\n}());\nexport { ComboboxEditCell };\n","import { extend, getValue } from '@syncfusion/ej2-base';\nimport { MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { getComplexFieldID, } from '../base/util';\n/**\n * `MultiSelectEditCell` is used to handle multiselect dropdown cell type editing.\n * @hidden\n */\nvar MultiSelectEditCell = /** @class */ (function () {\n    function MultiSelectEditCell(parentObj) {\n        //constructor\n        this.parent = parentObj;\n    }\n    MultiSelectEditCell.prototype.create = function (args) {\n        //create\n        var colName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + colName,\n                name: colName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MultiSelectEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MultiSelectEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MultiSelect(extend({\n            fields: { text: args.column.field, value: args.column.field },\n            value: getValue(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    MultiSelectEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MultiSelectEditCell;\n}());\nexport { MultiSelectEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { TimePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `TimePickerEditCell` is used to handle Timepicker cell type editing.\n * @hidden\n */\nvar TimePickerEditCell = /** @class */ (function () {\n    function TimePickerEditCell(grid) {\n        this.parent = grid;\n    }\n    TimePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexField,\n                name: complexField, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    TimePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    TimePickerEditCell.prototype.write = function (args) {\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        var rowDataValue = getObject(args.column.field, args.rowData);\n        rowDataValue = rowDataValue ? new Date(rowDataValue) : null;\n        this.obj = new TimePicker(extend({\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            value: rowDataValue,\n            placeholder: isInlineEdit ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    TimePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return TimePickerEditCell;\n}());\nexport { TimePickerEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Switch } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, addRemoveActiveClasses, getComplexFieldID, getObject } from '../base/util';\n/**\n * `ToggleEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar ToggleEditCell = /** @class */ (function () {\n    function ToggleEditCell(parentObject) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parentObject;\n    }\n    ToggleEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var complexField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: this.parent.element.id + complexField,\n                name: complexField\n            }\n        });\n    };\n    ToggleEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    ToggleEditCell.prototype.write = function (args) {\n        var chkBoxElement;\n        var checkState;\n        // let isAddRow : boolean =  args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            chkBoxElement = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (getObject(args.column.field, args.rowData)) {\n            checkState = JSON.parse(getObject(args.column.field, args.rowData).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(chkBoxElement)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                checkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), checkState].concat(this.activeClasses));\n        }\n        this.obj = new Switch(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? ' ' : args.column.headerText,\n            checked: checkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.switchModeChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    ToggleEditCell.prototype.switchModeChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var addClass = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                addClass = true;\n                this.editRow.setAttribute('aria-selected', addClass.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), addClass].concat(this.activeClasses));\n        }\n    };\n    ToggleEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return ToggleEditCell;\n}());\nexport { ToggleEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { MaskedTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\n/**\n * `MaskedTextBoxCellEdit` is used to handle masked input cell type editing.\n * @hidden\n */\nvar MaskedTextBoxCellEdit = /** @class */ (function () {\n    function MaskedTextBoxCellEdit(parentInstance) {\n        //constructor\n        this.parent = parentInstance;\n    }\n    MaskedTextBoxCellEdit.prototype.create = function (args) {\n        //create\n        var columnField = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + columnField,\n                name: columnField, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    MaskedTextBoxCellEdit.prototype.write = function (args) {\n        this.column = args.column;\n        var isInlineEdit = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new MaskedTextBox(extend({\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            floatLabelType: isInlineEdit ? 'Never' : 'Always',\n            mask: '000-000-0000',\n            enabled: isEditable(args.column, args.requestType, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    MaskedTextBoxCellEdit.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    MaskedTextBoxCellEdit.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return MaskedTextBoxCellEdit;\n}());\nexport { MaskedTextBoxCellEdit };\n","import * as index from './index';\nindex.Grid.Inject(index.Filter, index.Page, index.Selection, index.Sort, index.Group, index.Reorder, index.RowDD, index.DetailRow, index.Toolbar, index.Aggregate, index.Search, index.VirtualScroll, index.Edit, index.Resize, index.ExcelExport, index.PdfExport, index.CommandColumn, index.ContextMenu, index.Freeze, index.ColumnMenu, index.ColumnChooser, index.ForeignKey, index.BlazorAction, index.InfiniteScroll, index.LazyLoadGroup);\nexport * from './index';\n"],"names":["setStateAndProperties","target","attribute","value","remove","removeAttribute","setAttribute","getCloneProperties","doesImplementInterface","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","headerValueAccessor","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","isExportColumns","exportProperties","columns","length","updateColumnTypeForExportColumns","gObj","exportColumns","gridColumns","i","j","type","updatecloneRow","grid","nRows","actualRows","vRows","isDataRow","push","isExpand","isCaptionRow","getCollapsedRowsCount","vcRows","val","count","gLen","groupSettings","items","dataRowCnt","agrCnt","indent","len","gLevel","GroupGuid","childLevels","recursive","row","length_1","nLevel","iterateArrayOrObject","collection","predicate","result","pred","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","values","Object","keys","indexOf","setColumnIndex","columnModel","ind","index","prepareColumns","autoWidth","c","Column","toLowerCase","allowReordering","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","getPopupLeftPosition","popup","offsetWidth","x","getPosition","right","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","context","temp","customAggregate","Array","aggregates","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","getActualRowHeight","actualRowHeight","isComplexField","split","getComplexFieldID","replace","setComplexFieldID","isEditable","col","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","select","editSettings","mode","selectAll","showConfirmDialog","wrap","action","add","setFormatter","serviceLocator","isServerRendered","args","fmtr","getService","skeleton","format","isBlazor","getFormatFunction","setParser","getParserFunction","addRemoveActiveClasses","cells","_i","arguments","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","elementVisible","newpos","dlgWidth","calculateRelativeBasedPosition","leftPos","getZIndexCalcualtion","zIndex","toogleCheckbox","span","input","previousSibling","checked","setChecked","createCboxWithWrap","div","removeAddCboxClasses","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Predicate","Date","setSeconds","getSeconds","setHours","predicateSt","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","isRowDragable","mEle","cloneNode","childElementCount","isGroupAdaptive","enableVirtualization","isVirtualAdaptive","object","splits","getCustomDateFormat","colType","intl","Internationalization","getDatePattern","getExpandedState","hierarchyPrintMode","rows_1","getRowsObject","isDetailRow","allowPaging","printMode","pageSettings","currentPage","pageSize","gridModel","getPrintGridModel","childGrid","printGridModel","isFrozen","isFrozenGrid","getFrozenColumns","_a","Print","printGridProp","getColumns","expandedRows","extendObjWithFn","deep","obj1","getPrototypeOf","concat","getPrototypesOfObj","i_1","source","cpy","cln","isObject","isArray","measureColumnDepth","max","depth","checkDepth","indices","refreshFilteredColsUid","filteredCols","getForeignKeyColumns","getColumnByField","getTransformValues","replacedTv","defaultView","getComputedStyle","getPropertyValue","parseFloat","applyBiggerTheme","rootElement","alignFrozenEditForm","mTD","fTD","mHeight","closest","fHeight","ensureLastRow","gridObj","cntOffset","getContent","firstElementChild","ensureFirstRow","rowTop","isRowEnteredInGrid","startIndex","scrollTop","getEditedDataIndex","dataIndex","keyField","getPrimaryKeyFieldNames","getCurrentViewRecords","filter","eventPromise","state","getStateEventArgument","def","Deferred","resolve","deffered","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","ispercentageWidth","getVisibleColumns","percentageCol","undefinedWidthCol","isUndefined","Browser","info","name","showGroupedColumn","resetRowIndex","rows","rowElms","isAltRow","enableAltRow","renderModule","emptyRow","resetRowObjectIndex","compareChanges","changes","newArray","dataToBeUpdated","reduce","r","o","assign","map","k","setRowElements","contentModule","rowElements","cls","getFrozenMode","freezeRowElements","frozenRightRowElements","splitFrozenRowObjectCells","tableName","getFrozenLeftCount","movable","getMovableColumnsCount","getFrozenRightColumnsCount","frozenMode","drag","rightIndex","mvblIndex","mvblEndIdx","gridActionHandler","force","rowObj","getGridRowObjects","getMovableRowsObject","getFrozenRightRowsObject","getGridRowElements","getAllDataRows","getAllMovableDataRows","getAllFrozenRightDataRows","sliceElements","start","end","getCellsByTableName","rowIndex","getFreezeTableName","getMovableDataRows","getFrozenRightDataRows","getDataRows","getCellByColAndRowIndex","setValidationRuels","rules","mRules","frRules","validationRules","getMovableTbody","tbody","frozenRows","newRowPosition","getMovableHeaderTbody","getMovableContentTbody","getFrozenRightTbody","getFrozenRightHeaderTbody","getFrozenRightContentTbody","setRowsInTbody","mTbody","frTbody","tr","mTr","frTr","getNumberFormat","numberFormat","isExcel","getNumberPattern","currency","this","useGrouping","error","mtch_1","G","H","'"," a","yy","EEEE","E","pattern","addBiggerDialog","enableAdaptiveUI","dialogs","getElementsByClassName","performComplexDataOperation","mapObject","returnObj","duplicateMap","setDisplayValue","idx","displayVal","isContent","trs","td","summaryIterator","callback","dateanddatetimerender","rtl","isInline","rowData","floatLabelType","placeholder","enableRtl","enabled","requestType","renderFrozenRows","selectedIdx","rowModelGenerator","locator","virtualRenderer","instance","clearSelection","rowRenderer","RowRenderer","generateRows","renderMovableContent","vgenerator","movableCache","renderFrozenRightContent","frozenRightCache","cache","hdr","getHeaderContent","render","isSelected","mvblRows","frRows","frzRows","isFrozenRowsRender","splitCells","collectRows","setFreezeSelection","leftKeys","movableKeys","rightKeys","selectFreezeRows","clearAll","set","appendContent","widthService","newChild","refreshFrozenScrollbar","notifyArgs","freezeRowGenerator","arr","getReorderedFrozenRows","firstPageRecords","bIndex","virtualInfo","blockIndexes","colIndex","columnIndexes","page","firstRecordslength","dataManager","splitReorderedRows","splice","isXaxis","currentInfo","sentinelInfo","axis","getHeaderCells","content","getMovableVirtualHeader","getVirtualFreezeHeader","getFrozenVirtualHeader","ensureFrozenCols","setColGroup","colGroup","colgroup","setCache","setDebounce","scrollbar","mCont","debounceEvent","offline","opt","container","pageHeight","getBlockHeight","axes","enableColumnVirtualization","movableContainer","observer","InterSectionObserver","virtualEle","wrapper","movableWrapper","ValueFormatter","cultureName","culture","getDateFormat","getDateParser","getNumberParser","fromView","toView","setCulture","__decorate","decorators","desc","d","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","options","_this","disableHtmlEncode","allowSorting","allowResizing","allowFiltering","allowGrouping","showColumnMenu","enableGroupByFormat","showInColumnChooser","edit","allowSearching","autoFit","sortDirection","getEditTemplate","editTemplateFn","getFilterTemplate","filterTemplateFn","merge","editType","valueFormatter","toJSON","skip","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","editTemplate","filterTemplate","isForeignColumn","params","fields","text","sortComparer","a_1","xObj","yObj","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","freezeTable","isReact","refreshReactColumnTemplateByUid","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","CommandColumnModel","Property","actionBegin","actionComplete","dataBound","columnDragStart","columnDrag","columnDrop","rowDragStartHelper","rowDragStart","rowDrag","rowDrop","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","reorderComplete","beforeCellFocused","keyPressed","click","destroy","columnVisibilityChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshVirtualBlock","toolbarRefresh","autoCol","updateData","preventBatch","dialogDestroy","addDeleteAction","freezeRender","hierarchyPrint","expandChildGrid","rowPositionChanged","columnsPrepared","cBoxFltrComplete","fltrPrevent","getVirtualData","refreshInfiniteModeBlocks","refreshHandlers","CellType","RenderType","ToolbarItem","ResponsiveDialogAction","ResponsiveToolbarAction","Data","dataState","isPending","resolver","group","foreignKeyDataState","initDataManager","isDestroyed","getModuleName","on","events.rowsAdded","addRows","events.rowPositionChanged","reorderRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","events.autoCol","refreshFilteredCols","events.columnsPrepared","toIndex","fromIndex","isAngular","isQueryInvokedFromData","generateQuery","skipPage","getQuery","clone","columnQueryMode","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","virtualGroupPageQuery","pageQuery","groupQuery","isForeign","cols","types","aggregate","queries","enableInfiniteScrolling","pageCount","infiniteScrollModule","notify","enableLazyLoading","lazyLoad","log","moduleName","columnName","isGrpFmt","formatGroupColumn","bind","sortSettings","sortGrp","fn","isRemote","sortByForeignKey","sortBy","fcolumn","sSettings","searchSettings","getSearchColumnFieldNames","predicateList","needForeignKeySearch","fGeneratePredicate","ignoreCase","ignoreAccent","predList","search","skipFoerign","foreignColEmpty","actualFilter","foreignColumn","filterSettings","foreignCols","defaultFltrCols","_b","columns_1","gridColumn","grabColumnByFieldFromAllCols","excelPredicate","CheckBoxFilterBase","getPredicate","_c","_d","prop","_e","foreignCols_1","column_1","grabColumnByUidFromAllCols","_f","_g","fPredicate","predicates","getKey","promise","crud","fromTable","addedRecords","deletedRecords","changedRecords","saveChanges","requiresCount","insert","then","catch","executeQuery","ready","deferred_1","reject","date","getHours","getMinutes","getMilliseconds","pr","update","previousData","original","deff","endEdit","setState","trigger","records","off","getState","getForeignKeyDataState","setForeignKeyDataState","pvtData","dataArgs","isDataChanged","editArgs_1","cancelEdit","colFieldNames","columns_2","Row","cell","setRowValue","setRowData","setCellValue","pKeyField","makechanges","getDataModule","Cell","isSpanned","isRowSpanned","CellMergeRender","cellArgs","spannedCell","cellRenderer","getCellRenderer","cellType","colSpan","cellSpan","rowSpan","targetCell_1","colSpanLen","colSpanRange","rowSpanRange","spanText","aria-colSpan","rowspan","aria-rowspan","Number","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","item","isSpan","attrs","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","cells_1","isEdit","rowArgs","attrCopy","chekBoxEnable","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","this_1","isColumnSelected","DetailExpand","isPrinting","Filter","CommandColumn","requestTypeAction","prevRowCell","detailTemplate","cssClass","lazyLoadCssClass","frozenColumns","scrollHeight","footerTemplate","summarycell","lastSummaryCell","firstSummaryCell","attr","rowindex","dataUID","ariaSelected","classes","class","RowModelGenerator","getInfiniteIndex","generateRow","ensureColumns","generateCell","RowDragIcon","pid","tIndex","parentUid","getRowUid","parentGid","selectionModule","checkBoxState","selectedRowIndexes","refreshForeignKeyRow","generateCells","foreignKeyColumns","dummies","tmp","rowId","oIndex","isDataCell","isTemplate","rowID","refreshRows","__extends","extendStatics","b","setPrototypeOf","__proto__","p","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","apply","getIndentCount","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","DetailFooterIntent","sColumn","scolumn","e-mappinguid","dummy","summaryRows","single","setTemplate","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","initVal","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","isInfiniteScroll","getGroupedRecords","isCollapseStateEnabled","ensureRowVisibility","parentid","childId","isRenderCaption","prevKey","generateDataRows","captionRow","generateCaptionRow","rowCnt","aggregatesCount","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","parentID","childID","childGid","gSummary","getForeignKeyData","fkValue","unshift","cRow","childRow","ContentRender","freezeRows","movableRows","prevCurrentView","isLoaded","viewColIndexes","drop","events.columnDrop","droppedElement","infiniteCache","isRemove","visibleRows","visibleFrozenRows","rightFreezeRows","isAddRows","isInfiniteFreeze","useGroupCache","mutableData","rafCallback","arg","mContentRows","getMovableVirtualContent","fContentRows","getFrozenVirtualContent","mHdr","fHdr","ariaService","setBusy","getPanel","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","cancel","events.actionComplete","hideSpinner","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","events.refreshInfiniteModeBlocks","refreshContentRows","events.beforeCellFocused","droppableDestroy","byKey","keyArgs","pressedKey","renderPanel","setOptions","busy","setPanel","innerDiv","renderTable","contentDiv","virtualTable","virtualTrack","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","cellspacing","getHeaderTable","getColGroup","currentViewData","currentMovableRows","frag","createDocumentFragment","initialPageRecords","hdrTbody","trElement","hdrfrag","tbdy","fCont","cont","emptyVcRows","modelData","prevInfo","mRow","sRow","overflowY","borderRightWidth","isPersistSelection","selectRow","removeClassByUid","getRows","getAttribute","addClassByUid","getRowObjectFromUID","getRowElementByUID","checkCache","setGroupCache","setTbody","getTbody","isFrozenLeft","registeredTemplate","templatetoclear","rootNodes","parentNode","destroyTemplate","renderTemplates","blockLoad","offsets","offsets_1","vGroupOffsets","bSize","m","round","contentPanel","rowObject","isVFFrozenOnly","mhdrData","virtualFrozenHdrRefresh","setRowsInLazyGroup","setInfiniteVisibleRows","rowTemplateID","isHeader","getRowTemplate","tagName","lastElementChild","isTR","nodeName","isVFreorder","ensureFrozenHeaderRender","ensureVirtualFrozenHeaderRender","events.expandChildGrid","colcount","splitRows","getFrozenHeader","parentTable","isJsComponent","setIsFrozen","isVFTable","updateBlazorTemplate","frCont","renderNextFrozentPart","maintainRows","infiniteScrollSettings","enableCache","frozenCols","getGroupCache","initialGroupRows","getCurrentBlockInfiniteRecords","isFreeze","parseInt","last","getReorderedVFRows","getReorderedRows","fhdrData","getInfiniteRows","getInfiniteMovableRows","infiniteCacheRows","panel","contentTable","infiniteRows","getMovableRows","getRowElements","getMovableRowElements","fRows","mRows","rowLen","cellLen","rightRows","rightLen","testRow","needFullRefresh","infiniteData","infiniteRowVisibility","contentrows","clen","getNormalizedColumnIndex","colIdx","getColumnIndexByUid","getFrozenLeftColumnsCount","colG","childNodes","infiniteFreezeData","mTable","infiniteMovableData","setDisplayNone","invokedFromMedia","hideAtMedia","updateMediaColumns","getHeaderColGroup","replaceChild","droppable","Droppable","accept","canSkip","renderEmpty","setSelection","getRowByIndex","getInfiniteRowIndex","firstRowIndex","getVirtualRowIndex","getMovableRowByIndex","module","enable","setRowObjects","immutableModeRendering","oldKeys","newKeys","newRowObjs","oldIndexes","oldRowObjs","batchChangeKeys","getBatchEditedRecords","newIndexes","hasBatch","oldRowElements","prevLen","currentLen","oldIndex","refreshImmutableContent","isEqual","objectEqualityChecker","old","next","primaryKey","getBatchChanges","isDirty","updateCellIndex","rowEle","HeaderRender","frzIdx","notfrzIdx","isFirstCol","isReplaceDragEle","draggable","currentStateTarget","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","lockColumn","getColumnIndexByField","lineHeight","dragStart","events.columnDragStart","event","bindEvents","dragElement","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","events.columnPositionChanged","colPosRefresh","events.initialEnd","renderCustomToolbar","rowRenderingMode","updateCustomResponsiveToolbar","isRendered","toggleStackClass","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","skipDom","createTable","createHeader","tableEle","tblName","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","headerRow","colDepth","colFreezeMode","pop","shift","freeze","len_2","HeaderIndent","DetailHeader","RowDragHIcon","enablePersistence","lockcolPositionCount","lockColsRendered","appendCells","isFirstObj","isLastCol","isMovable","lastCol","isLockColumn","isFrozenLockColumn","scrollLeft","getCellCnt","stackedLockColsCount","getStackedLockColsCount","isStackedLockColumn","isFrozenStack","ensureStackedFrozen","StackedHeader","getColSpan","isFirstCol_1","isLaststackedCol","inViewIndexes","isTrue","lockColsCount","getFrozenColSpan","normalizedfrzCols","mTblColGrp","mTbl","refreshUI","freezeReorder","setFrozenTable","firstChild","insertBefore","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","cnt","showDropArea","Draggable","dragTarget","distance","abort","toolbar","toolbarItems","toolbarLeft","toolbarItem","button","Button","appendTo","onclick","showResponsiveCustomSort","showResponsiveCustomFilter","resToolbar","CellRenderer","localizer","formatter","tabindex","rowChkBox","getGui","isNaN","evaluate","fData","isReactCompiler","dummyData","templateID","str","rNumber","invokeFormatter","refreshCell","refreshTD","cellIndex","parentRow","newTD","cloneAttributes","elements_1","innerHtml","displayAsCheckBox","localeStr","getConstant","fromFormatter","appendHtml","persistSelection","checkWrap","createCheckBox","label","setAttributes","property","buildAttributeFromCell","data-cell","clipMode","isCheckBoxType","colindex","AriaService","props","config","setExpand","expand","setSort","sort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","selected","haspopup","rowcount","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","hValueAccer","ariaAttr","innerDIV","checkAllWrap","matchFlColumns","extendPrepareHeader","headerTempID","headerTextAlign","alignment","matchFilteredColumns","handler","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","tempID","isVue","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","RowDragDropRenderer","nodeElement","RowDragDropHeaderRenderer","Render","emptyGrid","counter","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","scrollModule","setWidth","setHeight","setPadding","refreshDataManager","resetTemplates","tempPreventUpdate","events.actionBegin","commandDelIndex","getSelectedRecords","tempSelectedRecord","dataLength","totalRecordsCount","prevPageMoving","pagerModule","pagerObj","showSpinner","allowServerDataBinding","serverDataBind","detailTemplateID","blazorTemplates","resetBlazorTemplate","toolbarTemplate","refreshComplete","isFActon","isNeedForeignAction","getFData","deffered_1","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","query_1","dmSuccess","dmFailure","renderEmptyRow","isTrigger","spanCount","colspan","events.onEmpty","dynamicColumnChange","updateColumnType","record","isColTypeDef","isServerDateMap","printModule","isPrintGrid","actionArgs","isInfiniteDelete","isInfiniteEnd","agg","fieldName","filteredColumns","dataBind","updatesOnInitialRender","isInitialLoad","events.dataReady","enableImmutableMode","alert","events.toolbarRefresh","setRowCount","dataRowCount","buildColumns","isAutoGen","iterateComplexColumns","complexCols","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","Promise","group0","groupN","addWhere","groups","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","l","data_1","CellRendererFactory","cellRenderMap","getEnumValue","ResponsiveDialogRenderer","sortedCols","sortPredicate","closeCustomDialog","setCustomFilterHeader","refreshCustomFilterOkBtn","renderResponsiveContextMenu","renderCustomFilterDiv","customExFilterClose","refreshCustomFilterClearBtn","onActionCompleteFn","editComplate","isCustomDlgRender","header","customResponsiveDlg","title","closeBtn","filterModule","closeDialog","saveBtn","disabled","backBtn","localeObj","customExcelFilterParent","isFilter","isOpen","filterClearBtn","isFiltered","getHeaderTitle","renderResponsiveContent","filterParent","customColumnDiv","sortBtnParent","cDiv","isSort","getSortedFieldsAndDirections","sortButtonClickHandler","divIcon","iconSpan","EventHandler","customFilterColumnClickHandler","allowMultiSorting","isSortApplied","resetSortButtons","txt","textContent","setSortedCols","buttons","getCurrentSortedFields","isRowResponsive","showResponsiveDialog","colDiv","isDialogClose","clearCustomFilter","removeCustomDlgFilterEle","filteredCol","renderResponsiveDialog","setFilterModel","openDialog","createOptions","show","maxHeight","setTopToChildDialog","renderCustomFilterDialog","customFilterDlg","dialogEle","child","top_1","outerDiv","getDialogOptions","isCustomFilter","Dialog","isModal","showCloseIcon","closeOnEscape","locale","adaptiveDlgTarget","open","dialogOpen","created","dialogCreated","close","beforeDialogClose","animationSettings","effect","renderResponsiveHeader","sortField","closeResponsiveDialog","closeCustomFilter","keyHandler","sortColumn","clearSorting","primaryKeyValue","isAdd","getDialogName","getButtonText","titleDiv","dialogHdrBtnClickHandler","id_1","clearBtn","clearFiltering","filterClear","applyCustomFilter","mainfilterdiv","destroyCustomFilterDialog","getElementById","customEle","keyCode","removeEventListener","ServiceLocator","services","register","registerAdaptiveService","isAdaptiveUI","responsiveDialogRenderer","RendererFactory","rendererMap","rName","ColumnWidthService","totalColumnsWidth","setColumnWidth","getTableWidth","setMinwidthBycalculation","tWidth","difference","tmWidth","collection_1","minWidth","isWidthUndefined","setUndefinedColumnWidth","cWidth","getWidth","tgridWidth","setWidthToTable","clear","toFixed","headerCol","getContentTable","fWidth","formatUnit","isDraggable","freezeLeft","freezeRight","movableCount","isColFrozen","frHdr","getFrozenRightHeader","getColumnLevelFrozenColgroup","contentCol","editTableCol","isDrag","frzMode","frozenScrollbar","movableScrollbar","frozencontent","movableContent","frozenWidth","movableWidth","frozenRightScrollbar","frozenRightWidth","placeHolder","getSiblingsHeight","getHeightFromDirection","sibling","isWidUndefCount","maxWidth","calcMovableOrFreezeColWidth","tableType","setWidthToFrozenRightTable","freezeWidth","isAutoResize","headerTbl","cntTbl","setWidthToFrozenLeftTable","setWidthToMovableTable","isColUndefined","isWidthAuto","setWidthToFrozenEditTable","setWidthToMovableEditTable","resizeSettings","FocusStrategy","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","refMatrix","refreshMatrix","actions","isVirtualScroll","rowModelGen","focusCheck","onFocus","isDevice","setActive","enableHeaderFocus","editModule","matrix","generate","get","validator","focus","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","isFrozenRight","clearOutline","beforeArgs","byClick","clickArgs","event.beforeCellFocused","onKeyPress","skipOn","activeKey","bValue","outline","swapInfo","jump","toHeader","toFrozen","toFrozenRight","getNextCurrent","active","setActiveByKey","lastIdxCell","clearIndicator","preventDefault","th","activeElement","filterCell","lastIndexOf","focusVirtualElement","virtualData","isCancel","event.getVirtualData","isKeyFocus","selectedRowIndex","empty","preventScroll","getFocusedElement","fContent","frContent","fHeader","frHeader","setFocusedElement","setTimeout","addFocus","addOutline","focusHeader","resetFocus","focusContent","isFocused","isJump","getInfo","focusedColumnUid","getColumnByIndex","FixedContentFocus","FixedRightContentFocus","ContentFocus","FixedHeaderFocus","FixedRightHeaderFocus","HeaderFocus","cFocus","updateRow","isRowTemplate","newMovableRows","newFrozenRows","newfrRows","handlerInstance","index_1","focusElement","cellPosition","gridPosition","min","innerWidth","documentElement","bottom","innerHeight","clientHeight","passiveHandler","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","evts","filterfocus","actionsG","restoreFocusWithAction","event.onEmpty","internalCellFocus","getPrevIndexes","forgetPrevious","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","navigator","emptyTable","inValid","vector","moveTo","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","editNextRow","allowNextRowEdit","isLastCellPrimaryKey","visibleIndex","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","nextRowFocusValidate","lastIndex","previousRowFocusValidate","firstIndex","frozenSwap","frSwap","enterFrozen","isHeaderFocus","previous","optionals","defaultLen","rIndex","cIndex","isData","isSelectable","isCellWidth","getGridSeletion","allowSelection","allowColumnSelection","isLastCell","lastRow","headerSwap","fMatrix","focusModule","current1","current2","hMatrix","current3","SearchBox","searchBox","searchFocus","searchBlur","wireEvent","unWireEvent","headerMat","PageSettings","ColumnChooserSettings","__assign","t","s","n","Selection","selectedRowCellIndexes","selectedRecords","preventFocus","selectedColumnsIndexes","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","clearRowCheck","selectRowCheck","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","needColumnSelection","isCancelDeSelect","isPreventCellSelect","disableUI","isPersisted","cmdKeyPressed","cellselected","isMultiSelection","isAddRowsToSelection","initialRowSelection","isPrevRowSelection","autoFillRLselection","factory","wireEvents","initializeSelection","onActionBegin","fDataUpdate","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","unWireEvents","mouseDownHandler","isEditing","formObj","validate","getSelectedMovableRow","getSelectedFrozenRightRow","getFrozenRightContent","getFrozenRightRowByIndex","getCurrentBatchRecordChanges","currentRecords","isToggle","enableSimpleMultiRowSelection","addRowsToSelection","selectData","selectedRow","selectedMovableRow","selectedFrozenRightRow","selectedIndex","frozenData","getRowObjectByIndex","clearRowSelection","isRowType","isRowSelected","hasAttribute","activeTarget","rowSelectingCallBack","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","actualTarget","isInteracted","isHeaderCheckboxClicked","addMovableArgs","isRemoved","can","disableInteracted","toggle","removed","checkboxMode","clearSelectedRow","selectRowCallBack","clearRow","updateRowSelection","selectMovableRow","selectRowIndex","isHeaderCheckBoxClicked","updateRowProps","targetObj","frRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedRows","selectedData","currentRow","prevRow","selectRowFn","rightEle","rowIndexes_1","checkboxOnly","checkboxColumn","rowIndexes_2","isUnSelected","enableToggle","rowDeselect","addRemoveClassesForRow","isHybrid","reverse","clearRowCallBack","selectedEle","updatePersistCollection","updateCheckBoxes","chkState","ensureCheckboxFieldSelection","pKey_1","updatePersistDelete","pKey","chkBox","nextElementSibling","checkedTarget","setCheckAllState","contextMenuModule","mouseButton","clearCellSelection","clearColumnSelection","row_1","mRow_1","fRightRow_1","rowIndex_1","foreignKeyData_1","target_1","getFrozenRightRows","isRowClicked","checkSelectAllClicked","getCheckAllStatus","updatePersistSelectedData","movableRow","rowDeselectCallBack","frozenRightRow","isSingleDeSel","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","prevCIdxs","successCallBack","previousRowCell","prevECIdxs","getCellIndex","cellSelectingArgs","clearCell","updateCellSelection","currentCell","selectedRowCellIndex","updateCellProps","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","cellSelectedArgs","isDragged","selectCells","rowCellIndexes","cellSelectArgs","previousRowCellIndex","addRowCellIndex","addCellsToSelection","hideAutoFill","cellIndexes_1","selectedCellIdx","cellDeselect","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","bdrElement","showHideBorders","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","startAFCell","startCell","endAFCell","selectLikeExcel","startDIndex","isAutoFillSel","showAFBorders","selectLikeAutoFill","startDCellIndex","drawBorders","createBorders","positionBorders","isLastRow","isFirstRow","isFirstCell","setBorders","border","bdrStr","stOff","endOff","parentOff","offsetParent","topOffSet","leftOffset","rightOffset","selectDirection","updateStartEndCells","getMovableContent","mcBdrElement","frcBdrElement","fhBdrElement","headerModule","getMovableHeader","mhBdrElement","frhBdrElement","applyBorders","applyBothFrozenBorders","borderWidth","includes","drawAFBorders","bdrAFBottom","createAFBorders","positionAFBorders","bdrAFLeft","firstCellTop","firstCellLeft","parentRect","sTop","sLeft","offsetTop","totalHeight","totalWidth","floor","scrolloffSet","bdrAFRight","bdrAFTop","leftRemove","topRemove","hideAFBorders","updateValue","createBeforeAutoFill","updateCell","getAutoFillCells","startCellIdx","isApply","startrowIdx","endrowIdx","endCellIdx","colLen","cellIdx","endCell","startCellIndex","trIdx","mouseUpHandler","mUPTarget","updateAutoFillPosition","lastCell","updateStartCellsIndex","autofill","enableAutoFill","rindex","isFrozenCol","isFrozenRow","clientRect","colWidth","allowRowDragAndDrop","enableDrag","isUpdate","postion","clearSelAfterRefresh","events.inBoundModelChanged","onPropertyChanged","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","isMacOS","userAgent","keyDownHandler","keyUpHandler","beforeFragAppend","getCheckAllBox","initPerisistSelection","prevColIndex","checkBoxSelectionChanged","isLeftRightFrozen","gobj","chkField","proxy_1","dataSuccess","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","totalRecords","checkSelectAllAction","cRenderer","editForm","checkSelectAll","checkBox","stateStr","rowCache","forEach","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","updateSelectedRowIndex","selectedVal","isInteraction","checkToSelectAll","isServerRenderedVirtualization","checkedLen","spanEle","indeterminate","clickHandler","popUpClickHandler","chkSelect","hoverFrozenRows","showPopup","headerSelectionHandler","headerAction","thLen","selectedIndexes","getSelectedRowCellIndexes","getKeyColIndex","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","stackedHeader","innerColumn","getstackedColumns","applyUpDown","selectColumn","selectColumnsByRange","innerColumnIndexes","detailIndentCell","dragdropIndentCell","selectedCol","getColumnHeaderByUid","isColSelected","isMultiColumns","clearColDependency","headerCell","previousColumnIndex","updateColSelection","selectedArgs","updateColProps","selectColumns","getselectedCols","selectingArgs","selectColumnWithExisting","newCol","clearIndex","deselectedArgs","getFrozenRightColumnHeaderByIndex","getMovableColumnHeaderByIndex","columnDeselect","selectedHeader","getSelectedColumnCells","seletedcells","selectionString","onDataBoundFunction","setCheckAllForEmptyGrid","actionCompleteFunc","actionCompleteHandler","events.click","resizeEndFn","checkAllBox","isInfinitecroll","isSelectedRowIndexUpdating","Search","searchString","events.preventBatch","arg1","refreshSearch","onSearchComplete","cancelBeginEvent","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","changedStateColumns","stringify","showHideArgs","currentViewCols","col1","col2","Scroll","lastScrollTop","previousValues","oneTimeReady","uiupdate","toolbarModule","refreshOverflow","mHdrHeight","ensureOverflow","getThreshold","cssProps","getCssProperties","padding","removePadding","hDiv","footerDiv","getFooterContent","setScrollLeft","onFrozenContentScroll","isPreventScrollEvent","onContentScroll","scrollTarget","isLeft","isDown","scrollDown","isFooter","onCustomScrollbarScroll","onTouchScroll","pointerType","pageXY","getPointXY","setPageXY","touches","pageX","pageY","mScrollBar","sHeight","css","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","pasteHandler","isMacLike","test","platform","metaKey","clipBoardTextArea","x_1","scrollX","y_1","scrollY","scrollTo","paste","isAvail","dataRows","fTr","aria-label","copy","setCopyData","withHeader","getSelection","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","gridObserver","Observer","BlazorAction","aria","virtualHeight","onDetailRowClick","addDeleteSuccess","editSuccess","setColumnVisibility","setServerOffSet","onGroupClick","setColVTableWidthAndTranslate","invokeServerDataBind","contentColGroup","currentAction","editArgs","gridRowId","gridRow","virtualContentModule","blzRowIndex","blazorDataLoad","foreignColumnsData","aggRows","aggRow","aggr","aggrds","groupedCols","sign","abs","getTimezoneOffset","setClientOffSet","batchChanges","getMediaColumns","setVirtualHeight","removeDisplayNone","renderedContentRows","renderedContentCells","setVirtualTrackHeight","VisibleGroupedRowsCount","translateX","getColumnOffset","startColIndex","endColIndex","setWrapperWidth","adjustTable","dataSourceChanged","transform","refreshOffsets","refreshVirtualElement","timeZone","serverTimezoneOffset","parseJson","serverTimeZone","setPersistData","mergePersistGridData","resetPersistData","parseArgs","persistArgs","movableContentTable","movableHeaderTable","dataFailure","SortDescriptor","SortSettings","InfiniteScrollSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","ResizeSettings","GroupSettings","EditSettings","Grid","keyA","frozenRightCount","frozenLeftCount","tablesCount","visibleFrozenLeft","visibleFrozenRight","visibleMovable","frozenLeftColumns","frozenRightColumns","movableColumns","media","isFreezeRefresh","tableIndex","componentRefresh","Component","rowUid","pageTemplateChange","mediaBindInstance","asyncTimeOut","enableLogger","needsID","Grid_1","Inject","getPersistData","keyEntity","ignoreOnPersist","scrollPosition","currentObject","pagerTemplate","addOnPersist","requiredModules","setFrozenCount","modules","member","allowExcelExport","allowPdfExport","sortedColumns","isDetail","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","isInitial","mediaCol","ignoreCollectionWatch","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","UnGroupButton","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","AutoFitAll","AutoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","Clear","NumberFilter","TextFilter","DateFilter","DateTimeFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","FilterMenuDialogARIA","ExcelFilterDialogARIA","DialogEditARIA","ColumnChooserDialogARIA","ColumnMenuDialogARIA","CustomFilterDialogARIA","SortAtoZ","SortZtoA","SortByOldest","SortByNewest","SortSmallestToLargest","SortLargestToSmallest","Sort","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","ctrlSpace","ctrlLeftArrow","ctrlRightArrow","renderComplete","createSpinner","searchModule","checkLockColumns","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","pushMediaColumn","matchMedia","mediaQueryUpdate","mediaColumn","matches","showHider","refreshMediaCol","footerContent","enableHover","removeMediaListener","removeListener","eventInitializer","hasGridChild","unwireEvents","destroyDependentModules","toolTipObj","keyboardModule","enableBoxSelection","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","freezeRefresh","isEllipsisTooltip","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","maintainSelection","updateRTL","ej2_instances","getToolbar","getContextMenu","columnMenuModule","getColumnMenu","showFilterBarOperator","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","deepWatch","gResult","names","scrollRefresh","enableVerticalRendering","fn_1","muteOnChange","refreshFilter","setTablesCount","frozenLeft","frozenRight","getTablesCount","headerCells","stdHdrCell","updateColumnModel","updateColumnLevelFrozen","updateFrozenColumns","updateLockableColumns","leftCols","rightCols","movableCols","directFrozenCount","totalFrozenCount","frozenName","frozenCount","isRefresh","inview","vLen","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getFooterContentTable","getPager","gridPager","setGridPager","getFrozenRowByIndex","getFrozenDataRows","getRowInfo","rowsObject","getFrozenRightRowElements","includeAdd","getFrozenLeftContentTbody","mrows","includAdd","dRows","getAllFrozenDataRows","fieldIdx","pkName","movableSelectedRow","rowObjects","movableRowObjects","columnUid","clearTemplate","rowsObj","getFrozenRightCellFromIndex","getFrozenLeftColumnHeaderByIndex","getColumnHeaderByField","getStackedColumns","getUidByColumnField","rowDropSettings","targetID","getColumnFieldNames","columnNames","getDetailTemplate","getEditHeaderTemplate","editHeaderTemplateFn","getEditFooterTemplate","editFooterTemplateFn","getSelectedRows","getSelectedColumnsUid","showColumns","hideColumns","getFrozenCount","splitFrozenCount","getVisibleFrozenLeftCount","getVisibleFrozenRightCount","getVisibleMovableCount","getFrozenRightColumns","getFrozenLeftColumns","getMovableColumns","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","getFilterUIInfo","visibleFrozenColumns","goToPage","pageNo","updateExternalMessage","message","isMultiSort","sortModule","removeSortColumn","filterByColumn","filterOperator","filterValue","actualFilterValue","actualOperator","removeFilteredColsByField","isClearFilterBar","print","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","editCell","saveCell","enableToolbarItems","isEnable","enableItems","clipboardModule","recalcIndentWidth","indentWidth","perPixel","parentOffset","applyWidth","newWidth","resetIndentWidth","events.refreshHandlers","reorderColumns","fromFName","toFName","reorderModule","reorderColumnByIndex","reorderColumnByTargetIndex","fromIndexes","rowDragAndDropModule","refreshDataSource","disableRowDD","headerRows","disValue","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","sLen","isFromGroup","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","prevElement","elemNames","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","onKeyPressed","mouseClickHandler","focusOutHandler","dblClickHandler","keyPressHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","tapEvent","dataBoundFunction","blazorTemplate","isChildGrid","checkEdit","clonedColumn","dataRow","ariaOwns","keyPress","editFormValidate","persistedData","getLocalData","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","storedColumns","this_2","localCol","tCol","presskey","stopImmediatePropagation","altKey","collapse","setInjectedModules","injectedModules","refreshColumns","fCnt","frCnt","frTbl","colGrp","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","groupExpandAll","expandAll","groupCollapseAll","collapseAll","clearGrouping","ungroupColumn","openColumnChooser","detailCollapseAll","detailRowModule","detailExpandAll","isContextMenuOpen","ensureModuleInjected","getInjectedModules","propertyNames","loggerModule","getPreviousRowData","hideScroll","scrollBar","mvblScrollBar","mvblChild","getRowIndexByPrimaryKey","pKvalue","getFilteredRecords","getUserAgent","Global","timer","clearTimeout","frozenRigtRows","cntRows","rows_2","getHiddenColumns","calculatePageSizeByParentHeight","containerHeight","pagesize","getNoncontentHeight","getSummaryValues","summaryCol","summaryData","serverExcelExport","exportGrid","serverPdfExport","getFormat","setHeaderText","form","gridInput","method","submit","updateRowValue","setForeignKeyData","colpending","resetFilterDlgPosition","filterDlg","gClient","fClient","renderReactTemplates","batchUpdate","processRowChanges","batchAsyncUpdate","processBulkRowChanges","loopstring","setNewData","oldValues","bulkRefresh","deleteRowElement","mtr","out_i_1","this_3","this_4","isRowExist","renderRowElement","addRowObject","moveTbody","getHeight","isInteger","getFrozenHeaderTbody","showCustomFilter","Complex","Event","NotifyPropertyChanges","isAsyncPrint","defered","isContentReady","events.hierarchyPrint","removeColGroup","printGridObj","renderPrintGrid","printWind","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","printGrid","viewContainerRef","load","injectedModues","printgrid","detach","overflowX","waitingPop","printGridElement","printWindow","groupCaption","colGroups","contentColGroups","hideColGroup","existingPredicate","foreignKeyQuery","filterState","cBoxTrue","cBoxFalse","keyupHandler","searchHandler","debounce","searchBoxKeyUp","foreignKeyFilter","fColl","mPredicate","filterCollection","fpred","foreignFilter","initalPredicate","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","sIcon","getLocalizedLabel","updateDataSource","updateModel","actualPredicate","allowCaseSensitive","getAndSetChkElem","sBox","hideSearchbox","inputargs","Input","createInput","spinner","cBox","showDialog","columnType","btnClick","buttonModel","isPrimary","renderResponsiveFilter","isResponsiveFilter","getAllData","X","Y","filterTemplateCol","filterItemTemplate","clearFilter","events.fltrPrevent","fltrBtnHandler","check","optr","ddlValue","isMenuNotEqual","searchInput","caseSen","defaults","isNotEqual","itemsCnt","fObj","generateNullValuePredicates","arg2","arg3","arg4","arg5","arg6","initiateFilter","firstVal","foreignQuery","parsed","predicte","addDistinct","filterModel","filterChoiceCount","filterargs","excelSearchOperator","take","filterEvent","processSearch","getPredicateFromCols","isGrid","processDataOperation","filteredColumn","distinct","defObj","allPromise","runArray","colData","all","fullData","args1","f","filterColumn","filteredData","getDistinct","processDataSource","events.cBoxFltrComplete","updateResult","createFilterItems","result_1","updateAllCBoxes","updateIndeterminatenBtn","setFocus","prevElem","cBoxes_1","createCheckbox","btn","btnObj","cBoxes","nullCounter","selectAllValue","isColFiltered","isRndere","args_1","checkbox","getCheckedState","lookup","foreignDataObj","generatePredicate","updateDateFilter","getCaseValue","ExcelFilterBase","customFltrOperators","customFilterOperators","getCMenuDS","number","string","datetime","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","eleOptions","menu","ul","icon","hdrele","colIsSort","isAsc","isDesc","ascName","descName","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","isCMenuOpen","menuObj","focused","submenu","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","isIE","pageYOffset","getCMenuYPosition","optrData","isFilterBack","MouseEvent","contextWidth","targetBorder","filterLength","renderDialogue","complexFieldName","mainDiv","dlgDiv","dlgObj","overlayClick","removeDialog","createdDialog","filterBtnClick","rowResponsiveDlg","removeObjects","dropOptr","datePicker","dateTimePicker","actObj","numericTxtObj","renderCustomFilter","dialog","dlgConetntEle","dlgFields","fieldSet","displayName","renderFilterUI","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","arg7","arg8","renderOperatorUI","elementID","isFirst","fieldElement","xlfloptr","optrDiv","optrInput","dropDatasource","selectedValue","dropSelectedVal","menuText","DropDownList","dropDownOpen","change","dropDownValueChange","getSelectedValue","selectedField","getSelectedText","renderFlValueUI","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","valueDiv","isFilteredCol","fltrPredicates","columnObj","getExcelFilterData","valueInput","flValue","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","predIndex","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","DatePicker","DateTimePicker","completeAction","NumericTextBox","colObj","AutoComplete","sortOrder","columnvalue","filterType","contentRefresh","isModelChanged","currentTarget","setFullScreenDialog","sortedColumn","getSortedColsIndexByField","sCol","getSortColumnFromField","lastSortedCol","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","sortColumns","refreshSortIcons","refreshing","initiateSort","showPopUp","colUid","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","hasParent","enableExternalMessage","checkpagesizes","defaultConstants","currentPageInfo","totalItemsInfo","totalItemInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","CurrentPageInfo","TotalItemsInfo","FirstPageTooltip","LastPageTooltip","NextPageTooltip","PreviousPageTooltip","NextPagerTooltip","PreviousPagerTooltip","PagerDropDown","PagerAllDropDown","All","containerModule","pagerMessageModule","isReactTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","setPageSize","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","tempId","getPagerTemplate","isStringTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","isInitialRender","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","renderReactPagerTemplate","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","appendToElement","handlers","complete","updateLayout","inboundChange","FilterCellRenderer","fltrData","filterBarTemplate","showClearButton","Element","operatorIconRender","templateWrite","write","fbicon","operators","popupHeight","popupWidth","internalEvent","beforeOpen","customOperators","spanElmt","FlMenuOptrUI","customOptr","renderResponsiveDropDownList","selValue","optrLen","getFlOperator","StringFilterUI","serLocator","getAutoCompleteOptions","foreignColumnQuery","autoComplete","openPopup","getOptrInstance","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","enableCaseSensitivity","NumberFilterUI","keyEventHandler","evt","createEvent","initEvent","dispatchEvent","numberuiObj","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","inputElem","datePickerObj","FilterMenuRenderer","fltrObj","isDialogOpen","isMenuCheck","colTypes","boolean","flMuiObj","menuFilterBase","clearBtnClick","renderDlgContent","argument","writeMethod","menuOperator","instanceofFilterUI","compElement","ui","dlgContentEle","flOptrValue","targ","fltrValue","eControl","iconClass","flIcon","renderCheckBoxMenu","CheckBoxFilter","isresetFocus","checkBoxBase","actionPrevent","ExcelFilter","excelFilterBase","filterByMethod","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","skipNumberInput","skipStringInput","getLocalizedCustomOperators","fltrElem","rowdrag","detail","updateFilterMsg","dropdownlist","filterBarElement","filterObjIndex","getFilteredColsIndexByField","prevFilterObject","arrayVal","currentFilterObject","currentFilteringColumn","keyUpHandlerImmediate","refreshFilterValue","filterMenuClose","docClickHandler","columnMenuFilter","filterIconClickHandler","getOperatorName","checkForSkipInput","filterStatusMsg","applyColumnFormat","predObj","fColumn","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","skipUid","addFilteredClass","updateFilterIcon","refreshFilterSettings","updateFilter","getFilterBarElement","fltrIconElement","filteredcols","fltrElement","isClose","filterDialogOpen","filterHandler","localizedStrings","fCell","filteredColsUid","currentPred","currentFilterColumn","closeHeaderEle","dropDownListInput","processFilter","openMenuByField","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","operatorSymbols","value_1","stopTimer","startTimer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","skipInput","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","inputId","datepickerEle","hasDialog","popupEle","hasDialogClosed","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","renderCheckboxOnFilterMenu","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","newarray","resizeColumn","footerTable","headerTextClone","contentTextClone","footerTextClone","columnIndexByField","indentWidthClone","detailsElement","contentText","footerText","wHeader","wContent","wFooter","columnbyindex","colMaxWidth","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","touchResizeStart","callAutoFit","getTargetColumn","resizeStart","refreshColumnWidth","refreshStackedColumnWidth","mtbody","ftbody","frtbody","ftr","removeProperty","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","updateResizeEleHeight","getColData","mousemove","setHelperHeight","finalColumns","getSubColumns","calulateColumnsWidth","finalColumns_1","updateHelper","subColumns","cTable","isFrozenColResized","doubleTapEvent","getStackedWidth","headerRows_1","calcPos","fLeft","offset","doc","ownerDocument","nodeType","timeoutHandler","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","bool","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","newIndex","destElement","oldIdx","column_2","destIndex","reorderByColumn","preventRefresh","getColParent","srcIdx","toColumnUid","flatColumns","fTh","mTh","fHeaders","reorderSingleColumn","toColumn","reorderMultipleColumns","fromFNames","parent_1","cols_1","fromColumnUid","isMultipleReorder","moveTargetColumn","reorderSingleColumnByTarget","reorderMultipleColumnByTarget","fromCol","setDisplay","visibleCols","toCol","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseRight","updateFrozenScrollPosition","cliRectBaseLeft","scrollElem_1","scrollElem","mhdrCliRect","cliRectBase","dropEle","dropCol","fhdrWidth","mhdrRight","RowDD","isOverflowBorder","selectedRowColls","istargetGrid","startedRow","processArgs","dragelement","events.rowDragStartHelper","removeCell","exp","dropCountEle","spanCssEle","events.rowDragStart","dragStartData","dropElem","isDropGrid","dropElement","getElementFromPosition","hoverState","originalEvent","events.rowDrag","moveDragRows","islastRowIndex","lastRowUid","bottomborder","gridcontentEle","getScrollWidth","removeBorder","rowElement","borderRowElement","processDragStop","targetEle","stRow","dropIndex","events.rowDrop","draggedData","changeRecords","toIdx","saveChange","rowOrder","targetRow","deleteCell","initializeDrag","onDataBoundFn","mTarget","frTarget","tbodyMovableHeader","tbodyMovableContent","isLeftRight","tbodyContent","tbodyHeader","refreshVirtualData","refreshData","updateFrozenRowreOrder","tbodyMovH","tbodyMovC","tbodyFrH","tbodyFrC","tbodyC","tbodyH","targetRows","refreshRowTarget","targetIdx","updateFrozenColumnreOrder","recordobj","objIndex","mvbRows","frRightRow","rowsElem","movobj","frObj","movbObject","frRightObject","movbRows","frRightRows","currentVdata","fromIdx","draggedRecords","dropIdx","actualIdx","len1","reorderRow","scrollPixel_1","setScrollDown","scrollPixel_2","scrollPixel","targetElement","setBorder","removeFirstRowBorder","removeLastRowBorder","targetRowIndex","gridheaderEle","getTargetIdx","singleRowDrop","srcControl","startedRowIndex","srcControl_1","isSingleRowDragDrop","targetIndex","dragIdx","selIndex","sortRequired","isAppliedGroup","isAppliedUnGroup","reorderingColumns","sender","animateDropper","preventDrop","rearrangeGroup","dragField","dropTarget","grouped","dropField","dragIndex","addColToGroupDrop","addLabel","removeColFromGroupDrop","groupGenerator","dragLabel","dropArea","onGroupAggregates","blazorActionBegin","updateExpand","updateGroupDropArea","grpRow","expandCollapseRows","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","rowIdx","rowNodes","isHide","expandElem","toExpand","updateVirtualRows","captionExpand","captionCollapse","updateVisibleexpandCollapseRows","rObj","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","initializeGHeaderDrop","initializeGHeaderDrag","colName","groupAddSortingQuery","animator","groupedColumn","childDiv","ej-mappingname","showUngroupButton","createSeparator","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","editedData","iterateGroupAggregates","updateSummaryRows","dataUid","updatedData","initData","deletedCols","changeds","mergeData","pKeyVal","cItem","eData","aggregateRows","closestParent","DetailRow","refreshColSpan","toogleExpandcollapse","lastrowIdx","isExpanded","nextRow","detailElement","detailRow","data-uid","detailCell","nextSibling","getGridModel","parentPrimaryKeys","parentKeyField","parentRowData","isLegacyTemplate","promiseResolve","gridElem","detailrowIdx","lastrowcell","getTDfromIndex","moduleObj","detailrows","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","responsiveFilter","responsiveSort","responsiveBack","createToolbar","addReactToolbarPortals","bindSearchEvents","searchElement","refreshToolbarItems","updateSearchBox","toolbarCreated","isNormal","getResponsiveToolbarItems","getItems","tool","clicked","toolbarClickHandler","viewStr","overflowMode","items_1","getItem","ID","portals","renderResponsiveSearch","isRender","refreshResponsiveToolbarItems","isSearch","searchBoxObj","initial","disableItems","hasData","toolbarItems_1","getItemObject","itemObject","itemName","items_2","gID","newArgs","toolbarargs","tarElement","reRenderToolbar","removeResponsiveSearch","rowSelectedFunction","rowSelected","rowDeSelectedFunction","FooterRenderer","gridModule","modelGenerator","fDiv","mDiv","frDiv","frozenContent","frozenRightContent","tFoot","frTable","frCol","renderSummaryContent","cStart","cEnd","summaries","fragment","rowrenderer","srow","movableLastCell","borderRight","movableCnt","frozenCnt","frozenDiv","updateFooterTableWidth","onScroll","frozenHeight","movableHeight","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","fCol","refreshFooterRenderer","onAggregates","getIndexByKey","ds","isModified","idVal","agrVal","SummaryCellRenderer","refreshWithAggregate","tempObj","gColumn","cellNode","curCell","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","cModel","movableEle","fromWheel","touchMove","up","containerRect","entered","down","movableContainerRect","observe","onEnterCallback","virtualScrollHandler","delay","debounced100","debounced50","prevTop","prevLeft","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","isBlockAvailable","isMovableBlockAvailable","isFrozenRightBlockAvailable","virtualStartIndex","cacheindex","getStartIndex","median","updateGroupRow","getPage","block","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","addFrozenIndex","refreshColOffsets","blocks","currentFirst","iterateGroup","oRow","isBlazorServerRendered","VirtualContentRenderer","prevHeight","preStartIndex","preventEvent","tmpOffsets","VirtualElementHandler","offsetKeys","isSelection","isBottom","rndrCount","requestTypes","isNormaledit","emptyRowData","vfColIndex","orderRowObj","mvbOrderRowObj","frOrderRowObj","eventListener","renderWrapper","renderPlaceHolder","blockIndex","colsIndex","recordslength","firstRecords","virtualRows","scrollListener","scrollArgs","scrollAfterEdit","pStartIndex","previousColIndexes","viewInfo","getInfoFromView","startColumnIndex","endColumnIndex","VTablewidth","restoreEdit","virtualEndIndex","RHeight","isBlockAdded","tempBlocks","infoType","preEndIndex","vHeight","getPageFromTop","ensureBlocks","newBlock","every","firstBlock","getBlockSize","exactTopIndex","noOfInViewIndexes","exactEndIndex","pageSizeBy4","sIndex","eIndex","setKeyboardNavIndex","idxAddedToExactTop","mIdx","isEndBlock","getGroupedTotalBlocks","getTotalBlocks","colVFtable","checkFirstBlockColIndexes","cBlock","cOffset","translate","getTranslateY","adjustMovableTable","setMovableWrapperWidth","getOffset","focusCell","restoreAdd","initialRowTop","editedRowIndex","getVirtualEditedData","editForms","getCurrentEditedData","isTop","maxPage","onDataReady","resetScrollPosition","virtualHeightTemp","setMovableVirtualHeight","total","cHeight","isOnenter","endTranslate","blockHeight","totalBlocks","maxBlock","onEntered","isWheel","isLastBlockRow","remainHeight","translateY","scrollEle","visibleRowCount","refreshVirtualCacheOnRowDD","blockSize","currentblk","secondBlock","thirdBlock","currentBlocks","refreshMaxPage","selectVirtualRow","virtualCellFocus","editActionBegin","addActionBegin","refreshCache","resetIsedit","events.getVirtualData","editCancel","selectRowOnContextOpen","scrollValues","updateCurrentViewData","previousVirtualData","addForm","createEmptyRowdata","getRowCollection","getMovableVirtualRowByIndex","getFrozenRightVirtualRowByIndex","isRowObject","startIdx","rowCollection","rem","size","fcntColGrp","mcntColGrp","inViewIdx","isRowInView","VirtualHeaderRenderer","gen","fhdrColGrp","mhdrColGrp","tablewidth","renderFrozenWrapper","renderFrozenPlaceHolder","renderMovableWrapper","renderMovablePlaceHolder","movablePlaceholder","xValue","yValue","setFreezeWrapperWidth","VirtualScroll","ensurePageSize","InlineEditRender","addNew","frTbody_1","getEditElement","checkLastRow","renderMovableform","frEle","renderFrozenRightForm","frozenRightForm","renderRightFrozen","movableForm","updateFreezeEdit","getFreezeRow","getFreezeRightRow","tdElement","refreshFreezeEdit","fCls","mTd","frTd","refreshEditForm","updateFrozenCont","updateFrozenRightCont","td_1","editTemplateID","setRules","BatchEditRender","columnObject","newTd","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","createDialogHeader","responsiveDlgRenderer","getDialogEditTemplateElement","allowDragging","dialogClose","dialogEditTemplates","templateName","dialogTemp","tempDiv","checkColumnIsGrouped","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","frForm","mTdElement","fTdElement","frTdElement","tArgs","tempData","ruleColumn","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","editRow","checkBoxChange","DropDownEditCell","ddActionComplete","dropdownCreated","dlgElement","NumericEditCell","instances","DefaultEditCell","TextBox","NormalEdit","currentVirtualData","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","begineditargs","editargs","originalRow","cloneRow","cloneFrozen","frozen","applyFormValidation","edFail","form1","form2","mFormObj","form3","frFormObj","isDlg","dlgWrapper","dlgForm","mhdrFrm","mCntFrm","mvblEle","frHdrFrm","frCntFrm","eleLength","endEditArgs","addedRowIndex","destroyElements","destroyWidgets","destroyForm","editHandler","edSucc","editFailure","requestSuccess","stopEditStatus","closeForm","needRefresh","editedRow","closeEditArgs","isLazyLoad","addArgs","dataLen","tmpRecord","contained","addElements","editElements","InlineEdit","BatchEdit","cellDetails","originalCell","cloneCell","editNext","preventSaveCell","onBeforeCellFocused","batchCancelFunction","batchCancel","editNextValCell","setCellIdx","isAddRow","validateFormObj","frzRightCols","editCellFromIndex","isAdded","allRows","isInsert","removeBatchElementChanges","refreshRowIdx","isInstertedRemoved","removeHideAndSelection","tdElements","bulkDelete","bulkAddRow","batchSave","replaceWith","removeSelectedData","beforeBatchSaveArgs","insertedRow","removeRowObjectFromUID","rowClone","deleteRowUid","beforeBatchDeleteArgs","uniqueid","out_j_1","dataObjects","getIndexFromData","defaultData","getDefaultData","beforeBatchAddArgs","removeFrozenTbody","renderFrozenAddRow","btmIdx","findNextEditableCell","isValOnly","validation","checkNPCell","dValues","editCellExtend","mRowData","getDataByIndex","getCellIdx","cellEditArgs","isColored","insertCell","setChanges","currentRowObj","movableRowObject","movRowEle","movRowIndex","frRowObject","rowcell","newReactTd","escapeCellEdit","generateCellArgs","previousValue","cloneEditedData","isForceSave","cellSaveArgs","isEscapeCellEdit","visibleColumns","addCancelWhilePaging","DialogEdit","DatePickerEditCell","TemplateEditCell","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","editCellType","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputElements","inputs","col_1","restrictedRequestTypes","preventObj","mForm","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","outerHTML","isFHdr","resetElemPosition","tdRight","elemRight","offSet","inputName","gcontent","validationForBottomRowPos","isScroll","isFHdrLastRow","isBatchModeLastRow","viewPortRowCount","fHeraderRows","inputClient","arrow","rowsHeight","AddEditors","editors","dropdownedit","numericedit","datepickeredit","datetimepickeredit","booleanedit","defaultedit","templateedit","showColumn","hideColumn","changedColumns","unchangedColumns","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","searchOperator","prevShowedCols","rtlUpdate","enableAfterRenderEle","hideDialog","onResetColumns","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","refreshCheckboxButton","targetdlg","hideOpenedDialog","addcancelIcon","beforeOpenColumnChooserEvent","refreshPosition","mOpenDlg","renderChooserList","updateIntermediateBtn","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","changedColumnState","uncheckedLength","ulElement","columnStateChange","resetColumnState","currentCol","stateColumns","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","okButton","clearSearch","buttonEle","selectedCbox","columnChooserSettings","nMatchele","checkBoxClickHandler","checkstate","updateSelectAll","columnUID","srchShowCols","searchData","itemsLen","hideCols","gdCol","cclist","renderCheckbox","gridObject","currentCheckBoxColls","itemLen","uncheck","cbox","hideColState","showColState","cccheckboxlist","searchValue","proxy","interval","openCC","dlgEle","dlgLen","ExportHelper","hideColumnInclude","getGridRowModel","processColumns","childGridLevel","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","processHeaderCells","generateActualColumns","getConvertedWidth","actualColumns","getCellCount","appendGridCells","gridRows","isIgnoreFirstCell","option","checkAndExport","gridPool","globalResolve","failureHandler","childGridObj","createChildGrid","exportType","exportId","getGridExportColumns","actualGridColumns","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","isServerBlaz","cFormat","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","sheet","init","toISOString","isExporting","footer","exportValueFormatter","isCsv","hierarchyExportMode","processRecords","exportingSuccess","blobPromise","images","allPromise_1","processInnerRecords","isCountRequired","groupedColLength","blankRows","isExportPropertiesPresent","multipleExport","worksheets","processExcelHeader","processGridExport","organisedRows","organiseRows","processExcelFooter","enableFilter","autoFilters","lastColumn","Workbook","currencyCode","saveAsBlob","fileName","save","initialIndex","childRows","excelRows","theme","gColumns","groupIndent","processHeaderContent","processRecordContent","returnType","currentViewRecords","excelRow","processRecordRows","processGroupedRows","processAggregates","dataSource_1","cArgs","captionText","getCaptionThemeStyle","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","grouping","outlineLevel","isCollapsed","templateRowHeight","gCell","cellValue","fkData","excelCellArgs","image","base64","excelImage","hyperLink","hyperlink","displayText","hAlign","styleIndex","getColumnStyle","mergeOptions","returnVal","actionFailure","beforeDataBound","childGridCell","excelExportProps","gRow","intent","isHidden","rec","byGroup","summaryModel","aggregateModule","groupSummaryRows","sRows","customIndex","eCell","getAggreateValue","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","aggregateStyle","gridCellStyle","JSON1","JSON2","attrname","spannedCells","currentCellIndex","gridCell","getIndex","getHeaderThemeStyle","excelHeaderCellArgs","parseStyles","getRecordThemeStyle","fontSize","borders","color","bold","updateThemeStyle","themestyle","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","PdfExport","customDataSource","isGrouping","headerOnPages","drawPosition","xPosition","yPosition","pdfDocument","pdfPageSettings","PdfPageSettings","exportWithData","PdfDocument","processExport","headerPageNumbers","gridDrawPosition","pdfGrid","section","sections","processSectionExportProperties","pdfPage","pages","draw","drawHeader","pageOrientation","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","allowHorizontalOverflow","gridTheme","getGridPdfFont","processExportProperties","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","returnValue","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","fontFamily","fontName","getFontFamily","fontStyle","getFontStyle","pdfColor","fontColor","penBrushColor","hexToRgb","g","borderCaption","getBorderStyle","headerSize","headerStyle","PdfFontStyle","PdfTrueTypeFont","fontFamily_1","captionFont","captionSize","captionStyle","fontFamily_2","recordFont","recordSize","recordStyle","fontFamily_3","PdfBorders","PdfPen","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","groupSummaryModel","eCols","columnCount","applyTextAndSpan","gridHeader","getHeader","pdfCell","getHorizontalAlignment","getVerticalAlignment","recuHeader","spanCnt","isRoot","cidx","newSpanCnt","clientSize","PointF","fromBottom","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromTop","headerTemplate_1","getPageByIndex","graphics","drawPdfTemplate","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","isGroupedFooter","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","getColumn","setRecordThemeStyle","borderRecord","cellLength","textLink","PdfTextWebLink","processCellStyle","gridRow_1","cellPadding","PdfPaddings","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","italic","underline","strikeout","borderColor","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","TimesRoman","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","buttonObj","commandType","commandClickHandler","commandColumn","commandCols","commandclickargs","commandCol","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","rowInfo","targetRowdata","contextMenuClickArgs","updateItemStatus","getLocaleText","showItems","closestGrid","parentItem","hideSepItems","showSepItems","dItem","ensureDisabledStatus","ensureTarget","hideItems","eventArgs","ensureFrozenHeader","substr","generateID","localeKeys","CsvExport","export","PrevPage","FreezeRowModelGenerator","FreezeContentRender","batchAdd","refreshScrollOffset","scroll","setHeightToContent","getFrozenContent","scrollbarWidth","setFrozenContent","setMovableContent","renderFrozenRigthPanel","renderFrozenRightEmpty","renderFrozenRightTable","renderHorizontalScrollbar","getScrollbarDisplay","frozenDisplay","isRight","scrollbarHeight","setScrollbarHeight","appendScrollbar","minHeight","setIdx","refreshTbody","getIdx","FreezeRender","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","renderFrozenRightPanel","movableHeader","refreshFrozenLeftUI","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","filterRenderer","bindInitialEvent","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","contentScrollWidth","contentTableScrollWidth","borderBottom","fRowSpan","mRowSpan","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","frozenColumn","ColumnFreezeHeaderRenderer","refreshFrozenColumns","setReorderElement","destEle","frRowHgt","rightHeight","leftColGrp","rightColGrp","mColGroup","frtbl","frtblColGroup","adjudtFilterBarCell","updateFrozenColGroup","renderLeftWithRightFrozenPanel","renderRightFrozenPanelAlone","flex","renderFrozenRightTableAlone","refreshFrozenRightStackedHdrHgt","updateMovableColGroup","updateFrozenLeftColGroup","updateFrozenRightColGroup","fRightDiv","setFrozenRightHeader","leftColGroup","movableColGroup","rightColumns","rightColGroup","frozenRightHeader","ColumnFreezeContentRenderer","frzCount","isColGroupRefresh","renderFrozenLeftWithRightPanel","renderFrozenRightPanelAlone","renderFrozenLeftWithRightTable","fRightContent","setFrozenRightContent","getFrozenRightHeaderColGroup","oldColGroup","rightTable","renderFrozenRightEmptyRowAlone","renderFrozenLeftWithRightEmptyRow","frozenRigthContent","movableRowElements","frozenRightRows","VirtualFreezeRenderer","serviceLoc","refreshVirtualFrozenRows","selectedIdx_1","virtualHdrRenderer","frzCont","movableCont","tbl","movableTable","mCol","VirtualFreezeHdrRenderer","ColumnVirtualFreezeRenderer","selectedIdx_2","frozenRightCont","renderVirtualFrozenLeft","renderVirtualFrozenRight","renderVirtualFrozenLeftRight","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","openColumnMenuByField","elePos","calculatePosition","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","field_1","colChooser","getFilter","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initForeignKeyColumns","generateQueryFormData","eventfPromise","dataModule","setColumnData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","destroyEvent","BASE_DOC_URL","DOC_URL","WARNING","ERROR","INFO","Logger","patchadaptor","detailLists","cOp","success","console","logType","generateMessage","beforeSend","request","settings","module_missing","injected","promise_enabled","primary_column_missing","selection_key_missing","actionfailure","formatError","formatErrorHandler","ajaxError","ajaxErrorHandler","locale_missing","lObj","limitation","check_datasource_columns","virtual_height","grid_remote_edit","grid_sort_comparer","resize_min_max","action_disabled_column","exporting_begin","exporting_complete","foreign_key_failure","initial_action","frozen_rows_columns","column_type_missing","datasource_syntax_mismatch","dataStateChange","jsonResult","responseText","responseURL","statusText","InfiniteScroll","infiniteCurrentViewData","infiniteFrozenCache","isDownScroll","isUpScroll","enableContinuousScroll","initialRender","isInitialCollapse","prevScrollTop","isInitialMovableRender","virtualInfiniteData","isLastPage","infinitePageQuery","infiniteScrollHandler","infiniteCellFocus","appendInfiniteRows","removeInfiniteCacheRows","resetInfiniteBlocks","ensureIntialCollapse","getVirtualInfiniteData","resetInfiniteEdit","infiniteEditSuccess","refreshInfiniteCache","infiniteEditHandler","infiniteAddActionBegin","refreshInfiniteCurrentViewData","deleteComplate","isCache","maxBlocks","isMiddlePage","initialBlocks","isDelete","setInitialCache","makeRequest","ensureRowAvailability","createRow","isFrozenRows","rowElems","resume","swapCurrentViewData","resetInfiniteCurrentViewData","pageIndex","resetContentModuleCache","getEditedRowObject","editedrow","updateCurrentViewRecords","restoreInfiniteEdit","restoreInfiniteAdd","getVirtualInfiniteEditedData","intialPageQuery","editPageQuery","nTop","oTop","gridForm","frozenEdit","frozenFrag","movableFrag","selectNewRow","captionRows","removeCaptionRows","addRowCount","removeTopRows","removeBottomRows","calculateScrollTop","scrollCnt","captionRowHeight","captionCount","currentViewRowCount","groupedData","maxIndx","frozeCols","lastRowIndex","isDataModified","createFrozenCache","isCurrentViewData","setInitialGroupCache","pageData","GroupLazyLoadRenderer","childCount","scrollData","isFirstChildRow","groupCache","startIndexes","captionCounts","rowsByUid","objIdxByUid","initialGroupCaptions","cacheMode","cacheBlockSize","setLazyLoadPageSize","collapseShortcut","oriIndex","getRowObjectIndexByUid","getGroupKeysAndFields","captionRowElement","groupInfo","enableCaching","clearCache","captionRowExpand","captionIndex","clearLazyGroupCache","uids","getInitialCaptionIndexes","capIdx","capRow","getNextChilds","subChild","getChildRowsByParentIndex","refreshCaches","getRowByUid","capEle","getRowElementByUid","resetRowMaintenance","changeCaptionRow","from","to","moveCells","scrollReset","aggUid","getAggregateByCaptionIndex","capUid","lazyLoadHandler","setStartIndexes","setRowIndexes","refreshCaptionRowCount","nxtChild","hasLastChildRow","refreshRowObjects","rowObjectIndex","prevCapRow","prevCaptionCount","rowCount","insertAdjacentElement","confirmRowRendering","cap","newRows","newRowsObject","includeAgg","includeCollapseAgg","isReorder","getRenderedRowsObject","getCacheRowsOnDownScroll","getCacheRowsOnUpScroll","downTrs","upTrs","endTrs","lazyLoadDown","lazyLoadUp","lazyLoadEnd","findRowElements","scrollDownHandler","scrollUpEndRowHandler","scrollUpHandler","parentCapRow","capRowObjIdx","capRowEleIndex","childIdx","getCurrentBlockEndIndex","child_1","removeBlock","cachedRowIndex","lastchild","child_2","uid1","uid2","uid3","currenBlock","lastIdx","trEle","scrollUp","generateExpandPredicates","filterCols","getPredicates","oriIdx","idxs","tr_1","showAndHideCells","captionData","isSummary","LazyLoadGroup","AutoCompleteEditCell","parentObj","isInlineEdit","selectedValues","valObj","ComboboxEditCell","parentObject","isInlineMode","ComboBox","finalValue","inputEle","MultiSelectEditCell","MultiSelect","TimePickerEditCell","complexField","rowDataValue","TimePicker","ToggleEditCell","chkBoxElement","Switch","switchModeChange","MaskedTextBoxCellEdit","parentInstance","columnField","MaskedTextBox","mask","index.Grid","index.Filter","index.Page","index.Selection","index.Sort","index.Group","index.Reorder","index.RowDD","index.DetailRow","index.Toolbar","index.Aggregate","index.Search","index.VirtualScroll","index.Edit","index.Resize","index.ExcelExport","index.PdfExport","index.CommandColumn","index.ContextMenu","index.Freeze","index.ColumnMenu","index.ColumnChooser","index.ForeignKey","index.BlazorAction","index.InfiniteScroll","index.LazyLoadGroup"],"mappings":"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AK/gF,UAAW,wBAAqB,IACxC8lB,IACIi9E,aAAYxmC,KACbwkB,EAAK/gF,UAAW,4BAAyB,IAC5C8lB,IACImE,YAAS,IACV82D,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACImE,WAAS,SACV82D,EAAK/gF,UAAW,aAAU,IAC7B8lB,IACImE,WAAS,SACV82D,EAAK/gF,UAAW,YAAS,IAC5B8lB,IACImE,WAAS,YACV82D,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACImE,cACD82D,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACImE,cACD82D,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACImE,cACD82D,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACImE,cACD82D,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACImE,WAAS,aACV82D,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACImE,WAAS,aACV82D,EAAK/gF,UAAW,yBAAsB,IACzC8lB,IACImE,gBACD82D,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACImE,WAAS,OACV82D,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACImE,cACD82D,EAAK/gF,UAAW,YAAS,IAC5B8lB,IACImE,WAAS,QACV82D,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACImE,cACD82D,EAAK/gF,UAAW,cAAW,IAC9B8lB,IACImE,cACD82D,EAAK/gF,UAAW,uBAAoB,IACvC8lB,IACImE,cACD82D,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACImE,cACD82D,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACImE,cACD82D,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACImE,WAAS,IACV82D,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACImE,WAAS,IACV82D,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACImE,WAAS,QACV82D,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACImE,gBACD82D,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACImE,WAAS,oBACV82D,EAAK/gF,UAAW,iCAA8B,IACjD8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,cAAW,IAC9B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,WAAQ,IAC3B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,uBAAoB,IACvC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,oBAAiB,IACpC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,uBAAoB,IACvC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,6BAA0B,IAC7C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,gCAA6B,IAChD8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kCAA+B,IAClD8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,4BAAyB,IAC5C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,yBAAsB,IACzC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,+BAA4B,IAC/C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,0BAAuB,IAC1C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,yBAAsB,IACzC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,cAAW,IAC9B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,cAAW,IAC9B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,8BAA2B,IAC9C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,eAAY,IAC/B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,mBAAgB,IACnC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,eAAY,IAC/B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,eAAY,IAC/B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,gBAAa,IAChC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,eAAY,IAC/B8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,uBAAoB,IACvC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,iBAAc,IACjC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,kBAAe,IAClC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,qBAAkB,IACrC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,4BAAyB,IAC5C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,sBAAmB,IACtC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,wBAAqB,IACxC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,yBAAsB,IACzC8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,0BAAuB,IAC1C8lB,IACIk9E,WACDjiB,EAAK/gF,UAAW,4BAAyB,IAC5C+gF,EAAOsB,EAASv8D,IACZm9E,yBACDliB,IAELe,a9CjkKEjuE,GAAuB,WAKvB,QAASA,GAAMzL,EAAQ+2C,GACnBthC,KAAKqlF,cAAe,EACpBrlF,KAAKslF,QAAU,GAAI3rF,YACnBqG,KAAKzV,OAASA,EACVyV,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGwW,GAAqB5mB,KAAKulF,iBAAkBvlF,MAC3DA,KAAKzV,OAAOy2C,iBAAiBa,GAAoB7hC,KAAKqM,YAAYgH,KAAKrT,OACvEA,KAAKzV,OAAO6lB,GAAG6zB,GAAgBjkC,KAAKoN,QAAQiG,KAAKrT,OACjDA,KAAKzV,OAAO6lB,GAAGo1E,GAAuBxlF,KAAK6O,eAAgB7O,MAC3DA,KAAKshC,aAAeA,GA+MxB,MA7MAtrC,GAAM7T,UAAUojG,eAAiB,WAC7B,GAAI78E,GAAQ1I,IACZ,QAAIA,KAAKwkC,eAAqD,SAAnCxkC,KAAKzV,OAAOwK,oBAAkCiL,KAAKzV,OAAOmL,UAG9E,WACHgT,EAAM48E,QAAQrvE,QAAQS,KAAK,WACvBhO,EAAMwE,iBAENxE,EAAM87B,eACN97B,EAAMmG,kBAPH7O,KAAKkN,cAWpBlX,EAAM7T,UAAU0sB,eAAiB,WAC7B7O,KAAKylF,eAAezlF,KAAKzV,OACzB,IAAIm7F,GAAej9F,OAAOi9F,YACtBA,KAAiBA,EAAa96F,QAAQtE,cAAc,oBACpDo/F,EAAanhD,YAAY+gD,QAAQ1rF,WASzC5D,EAAM7T,UAAUs2F,MAAQ,WACpBz4E,KAAK2lF,kBACL3lF,KAAK4lF,UAAYn9F,OAAOyjD,KAAK,GAAI,QAAS,UAAYzjD,OAAOo9F,YAAc,UAAYp9F,OAAOq9F,WAAa,cAC3G9lF,KAAK4lF,UAAUhrC,OAAO,EAAG,GACzB56C,KAAK4lF,UAAUG,SAASC,OAAOC,WAAYD,OAAOE,cAEtDlwF,EAAM7T,UAAUirB,QAAU,WAClBpN,KAAKwkC,eACLxkC,KAAKkN,gBAGblX,EAAM7T,UAAUkqB,YAAc,WACtBrM,KAAKwkC,gBACLxkC,KAAKqlF,cAAe,IAG5BrvF,EAAM7T,UAAUwjG,gBAAkB,WAC9B,GAAIriG,GAAO0c,KAAKzV,OACZK,EAAU6B,gBAAc,OACxBjC,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK,SAAU1B,UAAWxF,EAAKsH,QAAQ9B,UAAY,iBAE/E8B,GAAQH,UAAU5I,OAAO,eACzBsE,SAASwG,KAAKb,YAAYlB,EAC1B,IAAIu7F,GAAY,GAAIjjB,IAAKztE,GAAkBnS,EAAMA,EAAKyR,oBACtD,IAAIzR,EAAKuS,iBAAmBvS,EAAKwS,mBAC7B,IAAK,GAAIrS,GAAI,EAAGA,EAAI0iG,EAAUhjG,QAAQC,OAAQK,IAC1C0iG,EAAUhjG,QAAQM,GAAKwD,YAAWk/F,EAAUhjG,QAAQM,IACpD0iG,EAAUhjG,QAAQM,GAAGyzC,WAASnqC,EAIlCiT,MAAKzV,OAAO+mB,YAEZ60E,EAAUC,iBAAmBpmF,KAAKzV,OAAO67F,kBAG7CD,EAAUE,KAAO,aACjBF,EAAUt0F,MAAQvO,EAAKouB,WAAWC,QAClClpB,OAAOi9F,aAAeS,EACtBA,EAAUxpE,YAAa,CACvB,IAAIwoD,GAAUghB,EAAUjF,qBACpBoF,EAAiBhjG,EAAK49F,oBACrB/b,IAAWA,EAAQ/hF,SAAWkjG,EAAeljG,QAC9C+iG,EAAUlH,mBAAmBqH,GAEjChjG,EAAKuvB,OOgPc,kBPhPiBjoB,QAASA,EAAS27F,UAAWJ,IACjEnmF,KAAKzV,OAAOyoB,IAAI,kBAAmBhT,KAAKmQ,iBACxCg2E,EAAUh7D,mBAAqBnrB,KAAKzV,OAAO4gC,mBAC3Cg7D,EAAU1rD,SAAS7vC,GACnBu7F,EAAUxuE,QAAUr0B,EAAKq0B,SAE7B3hB,EAAM7T,UAAU+qB,aAAe,WAC3B,GAAIlN,KAAKwkC,cAAe,CACpB,GAAIlhD,GAAO0c,KAAKzV,MAChB,IAAIyV,KAAKqlF,aAEL,WADArlF,MAAKmmF,WAGT,IAAIj3F,IACAkT,YAAa,QACbxX,QAAStH,EAAKsH,QACdm6D,aAAczhE,EAAKwsD,kBAAkB1pD,iBAAiB,4BACtD6gC,QAAQ,EACRlyB,mBAAoBzR,EAAKyR,mBAK7B,IAHKiL,KAAKqlF,cACN/hG,EAAKq0B,QOxEI,cPwEwBzoB,GAEjCA,EAAK+3B,OAEL,WADAu/D,UAAOljG,EAAKsH,QAGXoV,MAAKqlF,cACNrlF,KAAKmmF,cAIjBnwF,EAAM7T,UAAUgkG,UAAY,WACxB,GAAI7iG,GAAO0c,KAAKzV,MAEhB,IAAoB,SAAhBjH,EAAKgK,OAAmB,CACxB,GAAI0sE,GAAWh6D,KAAKshC,aAAa24B,mBAC7BzxC,EAAallC,EAAKsH,QAAQtE,cAAc,cACxCgvC,EAAYhyC,EAAKsH,QAAQtE,cAAc,gBAC3CkiC,GAAWn/B,MAAMiE,OAAS,OAC1Bk7B,EAAWn/B,MAAM+gC,UAAY,OAC7BkL,EAAUjsC,MAAM2wE,EAASE,SAAW,GACpC5kC,EAAU38B,kBAAkBtP,MAAM2wE,EAASpN,QAAU,GAGrDtpE,EAAKylB,gBACAzlB,EAAKoB,cAAcvB,QAAQC,OAI5B4c,KAAKylF,eAAeniG,GAHpBA,EAAKsH,QAAQtE,cAAc,oBAAoB+C,MAAMC,QAAU,OAOvE,KAAK,GAAIuG,GAAK,EAAGkG,KAAQ1K,MAAMC,KAAKhI,EAAKsH,QAAQxE,iBAAiB,eAAgByJ,EAAKkG,EAAG3S,OAAQyM,KAC1FjF,EAAUmL,EAAGlG,IACTxG,MAAMo9F,UAAY,QAI9B,KAAK,GADDC,GAAapjG,EAAKsH,QAAQxE,iBAAiB,gBACtC0uB,EAAK,EAAGO,KAAQhqB,MAAMC,KAAKo7F,GAAa5xE,EAAKO,EAAGjyB,OAAQ0xB,IAAM,CACnE,GAAIlqB,GAAUyqB,EAAGP,EACjBrqB,aAAUG,GAAU,gBAAiB,gBAEzCoV,KAAK2mF,iBAAiBrjG,GACtBA,EAAKq5B,YAAa,QACXl0B,QAAOi9F,YACd,IAAIx2F,IACAtE,QAAStH,EAAKsH,QAElBtH,GAAKq0B,QOvHc,gBPuHgBzoB,GACnC8Q,KAAKzV,OAAOyoB,IAAI,qBAAsBhT,KAAKmQ,kBAE/Cna,EAAM7T,UAAUwkG,iBAAmB,SAAUrjG,GACzCmH,YAAUnH,EAAKsH,SAAU,wBAAyB,iBAC9CtH,EAAKq5B,YACL6pE,SAAOljG,EAAKsH,SAEhBoV,KAAK4lF,UAAYgB,QAAYtjG,EAAKsH,QAASoV,KAAK4lF,YAEpD5vF,EAAM7T,UAAUsjG,eAAiB,SAAUniG,GACvC,GAAI4T,GAAQ5T,EAAKoB,cAAcvB,QAAQC,OACnCwH,EAAUtH,EAAKsH,QACfJ,EAAK,IAAMlH,EAAKsH,QAAQJ,EAC5B,IAAK0M,EAAL,CAKA,IAAK,GAFD2vF,GAAen4F,YAAUlE,EAAK,6BAA8BI,GAC5D6uB,EAAUotE,EAAa3vF,EAAQ,GAAGwzB,aAAa,WAC1CjnC,EAAI,EAAGA,EAAIojG,EAAazjG,OAAQK,IACrCojG,EAAapjG,GAAG1B,aAAa,UAAW03B,EAE5C,IAAIqtE,GAAYp4F,YAAU,WAAalE,EAAK,WAAYI,GACpDm8F,EAAmBr4F,YAAU,sBAAuB9D,EACxDoV,MAAKgnF,aAAaF,EAAW5vF,GAC7B8I,KAAKgnF,aAAaD,EAAkB7vF,KAExClB,EAAM7T,UAAU6kG,aAAe,SAAUF,EAAW5vF,GAChD,IAAK,GAAIzT,GAAI,EAAGA,EAAIqjG,EAAU1jG,OAAQK,IAClC,IAAK,GAAIC,GAAI,EAAGA,EAAIwT,EAAOxT,IACvBojG,EAAUrjG,GAAGoI,SAASnI,GAAG2F,MAAMC,QAAU,QAQrD0M,EAAM7T,UAAUqiD,YAAc,WAC1B,MAAOxkC,MAAKzV,OAAOK,QAAQJ,GAAG9C,QAAQ,UAAY,GAAKsY,KAAKzV,OAAOoyB,YAOvE3mB,EAAM7T,UAAU0rB,QAAU,WAClB7N,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAI+O,GAAqB5mB,KAAKkN,aAAamG,KAAKrT,OAC5DA,KAAKzV,OAAO0jD,oBAAoBpM,GAAoB7hC,KAAKqM,YAAYgH,KAAKrT,OAC1EA,KAAKzV,OAAOstB,IAAIosB,GAAgBjkC,KAAKoN,QAAQiG,KAAKrT,OAClDA,KAAKzV,OAAOstB,IAAI2tE,GAAuBxlF,KAAK6O,kBAMhD7Y,EAAM7T,UAAUguB,cAAgB,WAC5B,MAAO,SAEXna,EAAMC,eAzOE,aAAc,gBAAiB,iBAAkB,oBAAqB,kBAAmB,eAC7F,gBAAiB,YAAa,UAAW,kBAAmB,aAAc,iBAAkB,eAC5F,6BAA8B,iBAAkB,YAChD,gBAAiB,SAAU,SAAU,eAAgB,YAAa,QAAS,cAAe,YAC1F,YAAa,cAAe,eAAgB,mBAAoB,cAAe,qBAAsB,iBACrG,gBAAiB,mBAoOsBO,QOvLtB,cAEE,gBAxDT,SP8OPR,KC5IPxR,GAAQ,EA2RRmH,GAAM,EAyCNY,GAAc,MA8flB,SAAWu1F,GACPA,EAAOC,MAAQ,MAChBD,WAAWA,a8C15Bd,IAAI3sE,IAAoC,WAKpC,QAASA,GAAmB5qB,GACxByV,KAAKinF,qBACLjnF,KAAKknF,gBAAkB,GAAIp1F,SAE3BkO,KAAKmnF,aAAc,EACnBnnF,KAAKzY,UACLyY,KAAKixB,aAAc,EACnBjxB,KAAKzV,OAASA,EACdyV,KAAKxV,GAAKwV,KAAKzV,OAAOK,QAAQJ,GAC9BwV,KAAK6J,eAAiB,GAAIrC,IAAexH,KAAKzV,OAAOyhD,QACrDhsC,KAAKonF,SAAWxqD,iBAAe58B,KAAKzV,OAAOkC,eAAe,GAASsE,SAAS,EAAM8rC,MAAO,MACzF78B,KAAKqnF,UAAYzqD,iBAAe58B,KAAKzV,OAAOkC,eAAe,GAASsE,SAAS,EAAO8rC,MAAO,MAC3F78B,KAAKonF,SAAS7tD,aAAav5B,KAAKzV,OAAOkC,cAAc,SACjD3D,UAAW,eAAgBwyB,OAAS33B,KAAM,cAC1Cqc,KAAKonF,SAAS9tD,YAClBt5B,KAAKqnF,UAAU9tD,aAAav5B,KAAKzV,OAAOkC,cAAc,SAClD3D,UAAW,eAAgBwyB,OAAS33B,KAAQ,cAC5Cqc,KAAKqnF,UAAU/tD,YACnBt5B,KAAKqnF,UAAU/gG,cAAc,YAAYmE,UAAUqE,IAAI,aACnDkR,KAAKzV,OAAO2X,WACZnb,YAAUiZ,KAAKonF,SAAUpnF,KAAKqnF,YAAa,UA8+BnD,MAt+BAlyE,GAAmBhzB,UAAU0rB,QAAU,WACnC7N,KAAKuoC,eAETpzB,EAAmBhzB,UAAUu+D,WAAa,WACtC9W,eAAa96C,IAAIkR,KAAK1R,IAAK,QAAS0R,KAAKs0D,aAAct0D,MACvD4pC,eAAa96C,IAAIkR,KAAK1R,IAAK,QAAS0R,KAAKsnF,aAActnF,MACvDA,KAAKunF,cAAgBC,WAASxnF,KAAKynF,eAAgB,IACnD,IAAIr9F,GAAO4V,KAAK7P,UAAUvF,QAAQtE,cAAc,iBAC5C8D,IACAw/C,eAAa96C,IAAI1E,EAAM,QAAS4V,KAAKunF,cAAevnF,OAG5DmV,EAAmBhzB,UAAUg/D,aAAe,WACxCvX,eAAa/nD,OAAOme,KAAK1R,IAAK,QAAS0R,KAAKs0D,cAC5C1qB,eAAa/nD,OAAOme,KAAK1R,IAAK,QAAS0R,KAAKsnF,aAC5C,IAAIl9F,GAAO4V,KAAK7P,UAAUvF,QAAQtE,cAAc,iBAC5C8D,IACAw/C,eAAa/nD,OAAOuI,EAAM,QAAS4V,KAAKunF,gBAGhDpyE,EAAmBhzB,UAAUulG,iBAAmB,SAAUx4F,EAAMy4F,EAAOC,GACnE,GAAIl/E,GAAQ1I,KACR8V,KACA+xE,KACAh2F,EAAQmO,KAAKknF,gBAAgBv1E,OACjC3R,MAAKyI,QAAQlmB,OAAOyP,WAChB4kB,aAAa/kB,EAAMQ,MAAMu1F,IAAalxE,KAAK,SAAU1zB,GACrD0lB,EAAMD,QAAQlmB,OAAO4P,WAAanP,EAAE0C,OACpCgjB,EAAMne,OAAOsoB,OxCkPE,iBwClP6BptB,UAAWqwB,EAAYvzB,OAAQmmB,EAAMD,QAAQlmB,SACzF2M,EAAK0E,YAAckiB,EAAWrwB,UAAUswB,UAExC,KAAK,GADD+xE,GAAQhyE,EAAWrwB,UAAUswB,WACxBtyB,EAAI,EAAGA,EAAIqkG,EAAM1kG,OAAQK,IAC9BokG,EAAiB3jG,MACb7B,MAAOylG,EAAMrkG,GAAGpB,MAChBoD,UAAW,KACX+M,UAAWs1F,EAAMrkG,GAAG0wB,WACpBC,aAAc0zE,EAAMrkG,GAAG2wB,aACvB7hB,SAAUu1F,EAAMrkG,GAAG8O,SACnB3Q,MAAOkmG,EAAMrkG,GAAG7B,MAChB+B,KAAM+kB,EAAMD,QAAQ9kB,MAG5BuL,GAAK24F,iBAAmBA,EAAiBzkG,OAASykG,EAC9CF,EAAMruF,OAAO,SAAUvL,GAAO,MAAOA,GAAI1L,MAAQqmB,EAAMD,QAAQpmB,QACnEqmB,EAAMD,QAAQg3B,QAAQvwC,MAG9BimB,EAAmBhzB,UAAU4lG,cAAgB,SAAU74F,EAAMtN,GACzD,GAAI2Q,GAAWyN,KAAKyI,QAAQgL,SACM,WAA7BzT,KAAKyI,QAAQlmB,OAAOoB,KAAoB,WAAa,QAAYqc,KAAKyI,QAAQlmB,OAAOoB,KAAO,WAAa,QAC1GqkG,EAAkB,GAAI90F,aAAU8M,KAAKyI,QAAQlmB,OAAO+F,gBAAiBiK,EAAU3Q,GAAO,EAAMoe,KAAKyI,QAAQ2L,aAC7GpU,MAAK0nF,iBAAiBx4F,GAAOA,EAAK24F,kBAAmBG,IAEzD7yE,EAAmBhzB,UAAU8lG,eAAiB,SAAUjlG,GACvCA,EAAEtB,OACJ+I,UAAUC,SAAS,mBAC1BsV,KAAKkoF,OAAOtmG,MAAQ,GACpBoe,KAAKmoF,oBACLnoF,KAAKooF,mBACLpoF,KAAKkoF,OAAOn0C,UAGpB5+B,EAAmBhzB,UAAUslG,eAAiB,SAAUzkG,GACpDgd,KAAKmoF,oBACLnoF,KAAKooF,oBAETjzE,EAAmBhzB,UAAUimG,iBAAmB,WACxCpoF,KAAKkoF,OAAOtmG,MAAMwB,OAClBqH,YAAUuV,KAAKqoF,OAAQ,qBAAsB,kBAG7C59F,YAAUuV,KAAKqoF,OAAQ,kBAAmB,sBAQlDlzE,EAAmBhzB,UAAUmmG,kBAAoB,SAAU12F,GACvD,MAAOoO,MAAK2oC,UAAUpM,YAAY3qC,IAEtCujB,EAAmBhzB,UAAUomG,iBAAmB,WAC5C,GAAIv2F,GAAagO,KAAKyI,QAAQzW,UAE9B,MAAMA,YAAsBC,gBACxB,IAAK,GAAIxO,GAAI,EAAGA,EAAIuO,EAAW5O,OAAQK,IACnC,GAHE,gBAGSuO,GAAoB,CAC3B,GAAIlM,KACJA,GAAIka,KAAKyI,QAAQpmB,OAAS2P,EAAWvO,GACrCuO,EAAWvO,GAAKqC,IAKhCqvB,EAAmBhzB,UAAUqmG,YAAc,SAAU//E,GACjDzI,KAAKyI,QAAUA,EACfzI,KAAKinF,kBAAoBx+E,EAAQggF,oBACjCzoF,KAAKyI,QAAQzW,WAAayW,EAAQzW,WAClCgO,KAAKyI,QAAQnD,YAAcmD,EAAQnD,YAAcmD,EAAQnD,YAAcmD,EAAQzW,WAC/EgO,KAAKuoF,mBACLvoF,KAAKyI,QAAQ9kB,KAAO8kB,EAAQ9kB,KAC5Bqc,KAAKyI,QAAQnZ,OAASmZ,EAAQnZ,QAAU,GACxC0Q,KAAKyI,QAAQ2L,aAAe3L,EAAQ2L,eAAgB,EACpDpU,KAAKyI,QAAQq8B,gBAAkBr8B,EAAQq8B,iBAAmB9kC,KAAKzV,OAAOoqB,eAAexxB,QACrF6c,KAAKyI,QAAQ5W,MAAQ4W,EAAQ5W,OAAS,GAAIC,SAC1CkO,KAAKyI,QAAQigF,mBAAqBjgF,EAAQigF,qBAAsB,EAChE1oF,KAAKyI,QAAQ9c,IAAM8c,EAAQlmB,OAAOoJ,IAClCqU,KAAKzY,UACLyY,KAAK2oC,UAAYlgC,EAAQkgC,UACzB3oC,KAAKgpC,WAAavgC,EAAQq8B,gBAAgB1hD,QAE9C+xB,EAAmBhzB,UAAUwmG,iBAAmB,SAAUlgF,GAOtD,GANAzI,KAAK1R,IAAM0R,KAAKzV,OAAOkC,cAAc,OACjCjC,GAAIwV,KAAKxV,GAAKwV,KAAKyI,QAAQ9kB,KAAO,YAClC23B,OAAS3vB,IAAKqU,KAAKyI,QAAQlmB,OAAOoJ,KAClC7C,UAAW,oCAEfkX,KAAK4oF,KAAO5oF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,uBACrD2f,EAAQogF,cAAe,CACxB7oF,KAAKkoF,OAASloF,KAAKzV,OAAOkC,cAAc,SACpCjC,GAAIwV,KAAKxV,GAAK,aACd1B,UAAW,kBAEfkX,KAAKqoF,MAAQroF,KAAKzV,OAAOkC,cAAc,QACnC3D,UAAW,yDAA0DwyB,OACjE33B,KAAM,OAAQykD,MAAOpoC,KAAKsoF,kBAAkB,aAGpDtoF,KAAKm+C,UAAYn+C,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,yBAChEkX,KAAKm+C,UAAUryD,YAAYkU,KAAKkoF,QAChCloF,KAAK4oF,KAAK98F,YAAYkU,KAAKm+C,UAC3B,IAAI2qC,IACAl+F,QAASoV,KAAKkoF,OAAQlmF,eAAgB,QAAS7W,YAC3C8W,YAAajC,KAAKsoF,kBAAkB,WAG5CS,SAAMC,YAAYF,EAAW9oF,KAAKzV,OAAOkC,eACzCuT,KAAKm+C,UAAU73D,cAAc,kBAAkBwF,YAAYkU,KAAKqoF,OASpE,MAPAroF,MAAKipF,QAAUjpF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,cAC7DkX,KAAKkpF,KAAOlpF,KAAKzV,OAAOkC,cAAc,OAClCjC,GAAIwV,KAAKxV,GAAKwV,KAAKyI,QAAQ9kB,KAAO,gBAClCmF,UAAW,4BAEfkX,KAAKipF,QAAQn9F,YAAYkU,KAAKkpF,MAC9BlpF,KAAK4oF,KAAK98F,YAAYkU,KAAKipF,SACpBjpF,KAAK4oF,MAEhBzzE,EAAmBhzB,UAAUgnG,WAAa,SAAU1gF,GAChD,GAAIvZ,IACAkT,YxClFkB,mBwCmFlB8Q,WAAYlT,KAAKyI,QAAQpmB,MAAO+mG,WAAYppF,KAAKyI,QAAQ9kB,KAAMsjC,QAAQ,EAE3E,KAAK13B,cAAcyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,YAAI8Q,KAGxB,GADAA,KAAKzV,OAAOsoB,OxCwKO,oBwCxKsB3jB,IACrCA,EAAK+3B,OAAT,CAGAjnB,KAAK7P,UAAY,GAAIy7C,WACjBjjD,SAAS,EAAOmd,QAAS9F,KAAK4oF,KAC9Bt8C,MAAOtsC,KAAKuoC,YAAYl1B,KAAKrT,MAC7BtX,OAASlG,oBAAkB2H,EAAase,EAAQ/mB,OAAQ,cACjDse,KAAKzV,OAAOK,QAAQH,UAAUC,SAAS,YAAc,IAAM,IAClEhJ,OAAQse,KAAKzV,OAAOK,QAAS4hD,mBAAqBC,OAAQ,QAC1DrC,UACQx8B,MAAO5N,KAAKqpF,SAASh2E,KAAKrT,MAC1BspF,aACIxjF,QAAS9F,KAAKsoF,kBAAkBtoF,KAAKH,QAAU,WAAa,gBAC5Dod,SAAU,YAAassE,WAAW,KAItC37E,MAAO5N,KAAKqpF,SAASh2E,KAAKrT,MAC1BspF,aAAersE,SAAU,SAAUnX,QAAS9F,KAAKsoF,kBAAkBtoF,KAAKH,QAAU,eAAiB,kBAE3GusC,QAASpsC,KAAKqsC,cAAch5B,KAAKrT,MACjCksC,KAAMlsC,KAAKmsC,WAAW94B,KAAKrT,OAG/BA,MAAK7P,UAA0B,kBAAI,EACnC6P,KAAKwpF,uBAAuB/gF,GAC5BzI,KAAK1R,IAAIvM,aAAa,aAAcie,KAAKsoF,kBAAkB,0BACvD7/E,EAAQghF,mBACYtjG,SAASG,cAAc,4DAC7BwF,YAAYkU,KAAK1R,KAG/B0R,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAK1R,KAEzC0R,KAAK7P,UAAUsqC,SAASz6B,KAAK1R,KAC7B0R,KAAK7P,UAAUvF,QAAQvB,MAAM6hD,UAAYziC,EAAQghF,mBAAqB,OAASzpF,KAAKyI,QAAQnb,OAAS,KACrG0S,KAAK7P,UAAU86C,OACDjrC,KAAK7P,UAAUvF,QAAQtE,cAAc,kBAC3CwF,YAAYkU,KAAK4oF,MACzB5oF,KAAK0gD,aACL+tB,iBAAgB/sF,OAAQse,KAAKipF,SAAWjpF,KAAKzV,OAAOkC,eACpD61C,cAAYtiC,KAAKipF,SACjBjpF,KAAK0pF,eAETv0E,EAAmBhzB,UAAUqnG,uBAAyB,SAAU/gF,GACxDA,EAAQghF,qBACRzpF,KAAK7P,UAAUi6C,aACfpqC,KAAK7P,UAAUlH,UAAa0gG,EAAG,GAAIC,EAAG,IACtC5pF,KAAK7P,UAAUzO,OAASyE,SAASG,cAAc,oDAC/C0Z,KAAK7P,UAAUzH,MAAQ,SAG/BysB,EAAmBhzB,UAAUkqD,cAAgB,SAAUrpD,GAC/Cgd,KAAKyI,QAAQghF,mBACbzpF,KAAK7P,UAAUvF,QAAQvB,MAAMM,KAAO,MAG/BgR,UAAQ44C,SAITvzC,KAAK7P,UAAUlH,UAAa0gG,EAAG,SAAUC,EAAG,UAH5C15F,GAAqB8P,KAAKyI,QAAQ/mB,OAAQse,KAAK7P,UAAW6P,KAAKzV,QAMvEyV,KAAKzV,OAAOsoB,OxCuCa,sBwCvCsB7vB,IAEnDmyB,EAAmBhzB,UAAU4oD,WAAa,SAAUtiC,GAChDzI,KAAKwoF,YAAY//E,GACjBzI,KAAK2oF,iBAAiBlgF,GACtBzI,KAAKmpF,WAAW1gF,IAEpB0M,EAAmBhzB,UAAUomD,YAAc,WACvC,GAAIvoC,KAAK7P,YAAc6P,KAAK7P,UAAU+f,YAAa,CAC/C,GAAI25E,GAAoB7pF,KAAKyI,QAAQtlB,QAAQmW,OAAO,SAAUvL,GAAO,MAAOA,GAAIke,0BAE5Ekf,EAAqBnrB,KAAKzV,OAAO4gC,kBACjC0+D,GAAkBzmG,SAAWZ,oBAAkB2oC,IAAuBA,EAAmB2+D,oBACzF9pF,KAAKzV,OAAOghC,iBAAiB,uBAE7BvrB,KAAKzV,OAAOkhB,UACZzL,KAAKzV,OAAOghC,iBAAiB,uBAC7BvrB,KAAKzV,OAAOihC,mBAEhBxrB,KAAKzV,OAAOsoB,OxCsBK,qBwCtB4BxwB,MAAO2d,KAAKyI,QAAQpmB,QACjE2d,KAAK7P,UAAU0d,UACf7N,KAAKmhD,eACLt/D,SAAOme,KAAK1R,KACZ0R,KAAK1R,IAAM,KACX0R,KAAKzV,OAAOsoB,OxCmMO,4BwC/L3BsC,EAAmBhzB,UAAU4nG,YAAc,SAAUh8F,GAEjD,GAAImB,IAASwT,SAAU1C,KAAMy/B,QAASz/B,KAAK+pF,YAAa9iE,QAAQ,EAChEjnB,MAAKzV,OAAOsoB,OAAOm3E,GAAoB96F,GACnCA,EAAK+3B,QAGTjnB,KAAKyI,QAAQg3B,SAAU5wC,OAAQ,eAAgBxM,MAAO0L,EAAMA,EAAI1L,MAAQ2d,KAAKyI,QAAQpmB,SAEzF8yB,EAAmBhzB,UAAUknG,SAAW,SAAUrmG,GAC9C,GAAIgd,KAAKmnF,YAAa,CAClB,GAAuC,UAAnCnkG,EAAEtB,OAAOgrC,QAAQvkC,eAA6BnF,EAAEtB,OAAO+I,UAAUC,SAAS,iBAAkB,CAC5F,GAAI9I,GAAQoB,EAAEtB,OAAOE,KACY,aAA7Boe,KAAKyI,QAAQlmB,OAAOoB,OACN,KAAV/B,IACqF,IAArFoe,KAAKsoF,kBAAkB,cAAcngG,cAAcT,QAAQ9F,EAAMuG,eACjEvG,GAAQ,EAEO,KAAVA,IACiF,IAAtFoe,KAAKsoF,kBAAkB,eAAengG,cAAcT,QAAQ9F,EAAMuG,iBAClEvG,GAAQ,GAGhB,IAAIsN,IACAL,OAAQ,YAAag5F,kBACjBxlG,MAAO2d,KAAKyI,QAAQpmB,MACpBkQ,SAAUyN,KAAKyI,QAAQgL,SACW,WAA7BzT,KAAKyI,QAAQlmB,OAAOoB,KAAoB,WAAa,QACxB,SAA7Bqc,KAAKyI,QAAQlmB,OAAOoB,MAAgD,aAA7Bqc,KAAKyI,QAAQlmB,OAAOoB,MAC3B,YAA7Bqc,KAAKyI,QAAQlmB,OAAOoB,KAAqB,QAAU,WAC3D/B,MAAOA,EAAO4Q,WAAW,EAAO7O,KAAMqc,KAAKyI,QAAQlmB,OAAOoB,KAAMywB,aAAcpU,KAAKyI,QAAQ2L,cAE/F/xB,MAAO2d,KAAKyI,QAAQpmB,WAEd0K,KAAVnL,GAAiC,OAAVA,GAA4B,KAAVA,EAAeoe,KAAK0K,gBAAgB1K,KAAKyI,QAAQlmB,QACtFyd,KAAK+nF,cAAc74F,EAAMtN,GAASoe,KAAKyI,QAAQg3B,QAAQvwC,GAAQ8Q,KAAKuoC,kBAGxE,IAAkB,KAAdvlD,EAAEgrD,QACFhuC,KAAKiqF,qBAEJ,CACD,GAAIp/E,GAAO7nB,EAAEtB,OAAO43C,WAAW4Q,YAAY/hD,aACvC6X,MAAKsoF,kBAAkBtoF,KAAKH,QAAU,WAAa,gBAAgB1X,gBAAkB0iB,EACrF7K,KAAKiqF,iBAEAjqF,KAAKsoF,kBAAkB,eAAengG,gBAAkB0iB,GAC7D7K,KAAK+pF,cAIjB/pF,KAAKuoC,kBAEqC,UAAnCvlD,EAAEtB,OAAOgrC,QAAQvkC,gBACxB6X,KAAK+pF,cACL/pF,KAAKuoC,gBAIbpzB,EAAmBhzB,UAAU8nG,eAAiB,WAC1C,GAAIl5F,MAAa1F,MAAMC,KAAK0U,KAAKkpF,KAAK9iG,iBAAiB,+BACnD8jG,EAAQn5F,EACRo5F,EAAO,QACPC,EAAWpqF,KAAK7P,UAAUvF,QAAQtE,cAAc,kBAChD8jG,KACApqF,KAAKyI,QAAQlW,SAAW43F,EAAOC,EAASjZ,cAAc,GAAGvvF,OAE7Doe,KAAKqqF,eAA2C,aAA1BrqF,KAAKyI,QAAQlW,QACnC,IAAI+3F,EACCtqF,MAAKyI,QAAQogF,gBACdyB,EAActqF,KAAKm+C,UAAU73D,cAAc,kBAE/C,IAAIikG,GAAUvqF,KAAKyI,QAAQigF,mBACvB8B,GACAnoG,MAAO2d,KAAKyI,QAAQpmB,MAAOoD,UAAWua,KAAKqqF,eAAiB,MAAQ,KAAM1+F,IAAKqU,KAAKyI,QAAQ9c,IAC5F4G,SAAU43F,EAAMxmG,KAAMqc,KAAKyI,QAAQ9kB,KAAM6O,UAAW+3F,EAASn2E,aAAcpU,KAAKyI,QAAQ2L,cAExFq2E,EAAazqF,KAAK0qF,WAAa35F,EAAQ3N,QAAU4c,KAAK0qF,SAAW35F,EAAQ3N,OAAS2N,EAAQ3N,MAC1FqnG,IAAcH,GAAqC,KAAtBA,EAAY1oG,QACzCuoG,EAAOnqF,KAAKqqF,eAAiB,QAAU,WACvCt5F,KAAa1F,MAAMC,KAAK0U,KAAKkpF,KAAK9iG,iBAAiB,iCACnDokG,EAAS/kG,UAAYua,KAAKqqF,eAAiB,KAAO,MAClDG,EAASj4F,SAAW43F,EAExB,IAAIvoG,GACA2C,EACAnB,EACAunG,EACA1/F,IACJ,IAAI8F,EAAQ3N,SAAW4c,KAAK0qF,UAAaJ,GAAeA,EAAY1oG,OAA+B,KAAtB0oG,EAAY1oG,MAAe,CACpG,IAAK,GAAI6B,GAAI,EAAGA,EAAIsN,EAAQ3N,OAAQK,IAAK,CACrC7B,EAAQoe,KAAKzY,OAAO4C,EAAa4G,EAAQtN,GAAI,YAAYinC,aAAa,QACtEigE,EAAO1jG,aAAarF,MAAOA,GAAS4oG,GAChC5oG,IAAUA,EAAMqO,WAAW7M,SAC3BunG,EAAKp4F,SAAWk4F,EAAa,WAAa,SAEhC,KAAV7oG,GAAgBY,oBAAkBZ,GAClCqJ,EAAOA,EAAKuL,OAAO2e,EAAmBy1E,4BAA4BJ,IAGlEv/F,EAAK/G,KAAKymG,EAEd,IAAIz7F,IACAwT,SAAU1C,KAAMy/B,QAASz/B,KAAKiqF,eAAgB3xB,KAAMqyB,EAAKtoG,MAAOwoG,KAAMF,EAAKllG,UAAWqlG,KAAMH,EAAKp4F,SACjGw4F,KAAMJ,EAAKn4F,UAAWw4F,KAAML,EAAKv2E,aAAc62E,KAAMN,EAAK/oG,MAAOqlC,QAAQ,EAG7E,IADAjnB,KAAKzV,OAAOsoB,OAAOm3E,GAAoB96F,GACnCA,EAAK+3B,OACL,OAGkB,SAAtBjnB,KAAKyI,QAAQ9kB,MAAyC,aAAtBqc,KAAKyI,QAAQ9kB,OAC7CP,EAAS8mG,EAAM9mG,OAAS,EACxBmB,EAAMyb,KAAKzY,OAAO4C,EAAa+/F,EAAM9mG,GAAS,YAAYsnC,aAAa,QACnEloC,oBAAkB+B,IAAQkmG,GAC1Bx/F,EAAK/G,MACD7B,MAAOmoG,EAASnoG,MAAOmQ,UAAWg4F,EAASh4F,UAAWD,SAAU,QAChE9M,UAAW,MAAO7D,MAAO,QAIrCoe,KAAKkrF,eAAejgG,OAGpB+U,MAAK+pF,eAIb50E,EAAmBy1E,4BAA8B,SAAUJ,GACvD,GAAIv/F,KAeJ,OAdsB,WAAlBu/F,EAAS7mG,MACTsH,EAAK/G,MACD7B,MAAOmoG,EAASnoG,MAAO+xB,aAAco2E,EAASp2E,aAAc5hB,UAAWg4F,EAASh4F,UAChFD,SAAUi4F,EAASj4F,SAAU9M,UAAW+kG,EAAS/kG,UAAW7D,MAAO,KAG3EqJ,EAAK/G,MACD7B,MAAOmoG,EAASnoG,MAChBmQ,UAAWg4F,EAASh4F,UAAWD,SAAUi4F,EAASj4F,SAAU9M,UAAW+kG,EAAS/kG,UAAW7D,MAAO,OAEtGqJ,EAAK/G,MACD7B,MAAOmoG,EAASnoG,MAAOmQ,UAAWg4F,EAASh4F,UAAWD,SAAUi4F,EAASj4F,SACzE9M,UAAW+kG,EAAS/kG,UAAW7D,UAAOmL,KAEnC9B,GAEXkqB,EAAmBhzB,UAAU+oG,eAAiB,SAAUvD,GACpD,GACIliG,GADA0lG,EAAWxD,EAAM,EAErB,KAAKnlG,oBAAkB2oG,GAAW,CAC9B1lG,EAAY0lG,EAASv3F,YAAcu3F,EAASv3F,YACxC,GAAIV,aAAUi4F,EAAS9oG,MAAO8oG,EAAS54F,SAAU44F,EAASvpG,OAAQupG,EAAS34F,UAAW24F,EAAS/2E,aACnG,KAAK,GAAI1wB,GAAI,EAAGA,EAAIikG,EAAMvkG,OAAQM,IAC9B+B,MAAqCsH,KAAzB46F,EAAMjkG,GAAGkQ,YACjBnO,EAAUkiG,EAAMjkG,GAAG+B,WAAWkiG,EAAMjkG,GAAGkQ,aACvCnO,EAAUkiG,EAAMjkG,GAAG+B,WAAWkiG,EAAMjkG,GAAGrB,MAAOslG,EAAMjkG,GAAG6O,SAAUo1F,EAAMjkG,GAAG9B,OAAQ+lG,EAAMjkG,GAAG8O,UAAWm1F,EAAMjkG,GAAG0wB,aAEvH,IAAIllB,IACAL,OAAQ,YAAag5F,iBAAkBF,EAAOtlG,MAAO2d,KAAKyI,QAAQpmB,MAClEuR,YAAaV,YAAUQ,GAAGjO,GAE9Bua,MAAKyI,QAAQg3B,QAAQvwC,KAG7BimB,EAAmBhzB,UAAUuoB,gBAAkB,SAAU3c,GACrD,QAAOA,EAAI2c,iBAAkB3c,EAAI2c,mBAErCyK,EAAmBhzB,UAAUgmG,kBAAoB,WAC7C,GAAIz/E,GAAQ1I,KACRzb,EAAMyb,KAAKkoF,OAAOtmG,MAClBW,EAASyd,KAAKyI,QAAQlmB,OACtBsP,EAAQmO,KAAK0K,gBAAgBnoB,GAAUyd,KAAKknF,gBAAgBv1E,QAAU3R,KAAKyI,QAAQ5W,MAAM8f,QACzFy5E,EAAeprF,KAAKyI,QAAQ5W,MAAM8f,QAClChsB,EAAOkM,EAAM4gB,QAAQnZ,OAAO,SAAUtW,GAAK,MAAOA,IAAc,YAATA,EAAEwwB,KAAqB,EAClF3hB,GAAM4gB,WACN24E,EAAa34E,UACb,IAAI44E,GAAgC,WAAtBrrF,KAAKyI,QAAQ9kB,MAAqBmU,WAAWvT,GAAQuT,WAAWvT,GAAOA,EACjFgO,EAAWyN,KAAKyI,QAAQgL,SACD,WAAtBzT,KAAKyI,QAAQ9kB,KAAoB,WAAa,QAAYqc,KAAKyI,QAAQ9kB,KAAO,WAAa,QAE5FywB,EAAepU,KAAKyI,QAAQ2L,aAC5B/xB,EAAQ2d,KAAK0K,gBAAgBnoB,GAAUA,EAAO+F,gBAAkB/F,EAAOF,KAC3EgpG,GAAqB,KAAXA,OAA4Bt+F,KAAXs+F,MAAwBt+F,GAAYs+F,CAC/D,IAAIC,GACAr4E,EAAajT,KAAKyI,QAAQnD,YAAYpL,QAAQiW,aACxB,aAAtBnQ,KAAKyI,QAAQ9kB,WACEoJ,KAAXs+F,IACsF,IAAtFrrF,KAAKsoF,kBAAkB,cAAcngG,cAAcT,QAAQ2jG,EAAOljG,eAClEkjG,EAAS,WAEOt+F,KAAXs+F,IACkF,IAAvFrrF,KAAKsoF,kBAAkB,eAAengG,cAAcT,QAAQ2jG,EAAOljG,iBACnEkjG,EAAS,aAEEt+F,KAAXs+F,IACsF,IAAtFrrF,KAAKsoF,kBAAkB,cAAcngG,cAAcT,QAAQ2jG,EAAOljG,gBAAyB8qB,GACjFA,IAAVo4E,GAAiE,OAEjDt+F,KAAXs+F,IACkF,IAAvFrrF,KAAKsoF,kBAAkB,eAAengG,cAAcT,QAAQ2jG,EAAOljG,gBAAyB8qB,IAClFA,IAAVo4E,GAAiE,GAErE94F,EAAW,SAEW,SAAtByN,KAAKyI,QAAQ9kB,MAAyC,aAAtBqc,KAAKyI,QAAQ9kB,OAC7C0nG,EAASrrF,KAAK6J,eAAe/B,SAASvjB,EAAKyb,KAAKyI,QAAQqD,SAAU9L,KAAKyI,QAAQ9kB,OAEnFqc,KAAKurF,YAAY15F,EAEjB,IAAI3C,IACAkT,YxCtYmB,oBwCuYnBopF,YAAaxrF,KAAMkT,WAAY7wB,EAAOE,OAAQA,EAC9CgQ,SAAUA,EAAUC,WAjCR,EAiC8B4hB,aAAcA,EAAcq3E,kBAAmB,KACzF55F,MAAOA,EAAOjQ,MAAOypG,EAEzB,IAAI97F,eAAeyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,eAEpB8Q,KAAKzV,OAAOotB,QAAQkqB,GAAoB3yC,EAAM,SAAUw8F,GAIpD,GAHAA,EAAWn5F,SAAYhD,cAAiD,SAAnCm8F,EAAWC,oBAC5CD,EAAWC,oBAAsBD,EAAWn5F,SAChD+4F,EAAW,GAAIp4F,aAAU7Q,EAAOqpG,EAAWn5F,SAAU84F,EAAQK,EAAWl5F,UAAWk5F,EAAWt3E,cACnE,SAAvB1L,EAAMD,QAAQ9kB,MAA0C,aAAvB+kB,EAAMD,QAAQ9kB,KAAqB,CAEpE,GADA4O,EAAW,QACP/P,oBAAkB6oG,IAAW9mG,EAAInB,OACjC,MAMJkoG,GAAWh5F,IAHPjQ,MAAOA,EAAOkQ,SAAUA,EAAU3Q,MAAOypG,EAAQ74F,WAlD7C,EAmDJ4hB,aAAcA,GAEqB1L,EAAMD,QAAQ9kB,MAErDY,EAAInB,QACJkoG,EAAY9oG,oBAAkBmD,GAA+B2lG,EAAvBA,EAAS73F,IAAI9N,EAAK3C,GACxD6O,EAAMQ,MAAMi5F,IAEN9oG,oBAAkBmD,IACxBkM,EAAMQ,MAAM1M,EAAK3C,GAErB0oG,EAAWD,kBAAqBjpG,oBAAkBkpG,EAAWD,mBAAoD,IAA/BC,EAAWD,iBAC7F,IAAI31E,KACJwsB,eAAY55B,EAAMugF,SAClBvgF,EAAMuoB,aAAc,EAChBvoB,EAAMgC,gBAAgBnoB,IAAWgC,EAAInB,QACtB,UAAYb,GAAOyP,WAAc,GAAIC,eAAY1P,EAAOyP,WAAWtM,QAC9EnD,EAAOyP,YAEH4kB,aAAa/kB,GAAO6kB,KAAK,SAAU1zB,GACvC,GAAImP,GAAauW,EAAMD,QAAQlmB,OAAO4P,UACtCuW,GAAMD,QAAQlmB,OAAO4P,WAAanP,EAAE0C,OACpCgjB,EAAMne,OAAOsoB,OxCzON,iBwCyOqCptB,UAAWqwB,EAAYvzB,OAAQA,IACvEuzB,EAAWrwB,UAAUswB,WAAW3yB,OAChCgoG,EAAa/4F,MAAMyjB,EAAWrwB,WAG9BijB,EAAMuoB,aAAc,EAExBvoB,EAAMD,QAAQlmB,OAAO4P,WAAaA,EAClCi5F,EAAaQ,KAAKF,EAAWD,mBAC7B/iF,EAAM4L,OAAOo3E,EAAYN,MAI7Bv5F,EAAM+5F,KAAKF,EAAWD,mBACtB/iF,EAAM4L,OAAOo3E,EAAY75F,OAIrCsjB,EAAmBhzB,UAAUmyB,OAAS,SAAUplB,EAAM2C,GAC9CmO,KAAKzV,OAAOyH,YAAc,UAAYgO,MAAKzV,OAAOyH,WAClDgO,KAAK6rF,YAAY38F,EAAM2C,GAGvBmO,KAAK8rF,cAAcj6F,IAG3BsjB,EAAmBhzB,UAAU4pG,qBAAuB,SAAU5oG,GAM1D,IAAK,GALD4yB,GAAaZ,EAAmBC,aAAajyB,GAC7C6wB,KACA8B,KACAk2E,MAA8Cj/F,KAArCiT,KAAKzV,OAAOgN,qBACrBmd,EAAgBs3E,EAAShsF,KAAKzV,OAAOgN,0BAChC1H,EAAK,EAAGkG,EAAKvO,OAAOC,KAAKsuB,GAAalmB,EAAKkG,EAAG3S,OAAQyM,IAAM,CACjE,GAAI0lB,GAAOxf,EAAGlG,GACV9B,MAAM,EACNi+F,IAAUhsF,KAAKzV,OAAOiN,iBAAiB+d,GAAM7K,oBAC7C3c,EAAM2E,GAA2B6iB,EAAMb,IAEvC3mB,GACAiS,KAAKzV,OAAOsoB,OxChRD,iBwCgRgCptB,UAAWqwB,EAAYvzB,OAAQwL,IACtE+nB,EAAWrwB,UAAUswB,WAAW3yB,QAChC4wB,EAAc9vB,KAAKgP,YAAUQ,GAAGoiB,EAAWrwB,UAAUswB,cAIzD/B,EAAc9vB,KAAK6xB,EAAWR,IAGtC,MAAOvB,GAAc5wB,QAAU8P,YAAUO,IAAIugB,IAEjDmB,EAAmBhzB,UAAUuvB,SAAW,WACpC,MAAO1R,MAAKzV,OAAOmnB,SAAW1R,KAAKzV,OAAOmnB,WAAWC,QAAU,GAAI7f,UAEvEqjB,EAAmBhzB,UAAUunG,WAAa,WACtC,GAAIhhF,GAAQ1I,KACRnO,EAAQmO,KAAK0R,UACjB7f,GAAM2kB,gBACNxW,KAAKurF,YAAY15F,EACjB,IAAI3C,IACAkT,YxCjfqB,sBwCifoBvQ,MAAOA,EAAO45F,kBAAmB,KAE9E,KAAKl8F,cAAcyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,YAAI8Q,KAExBA,KAAKzV,OAAOotB,QAAQkqB,GAAoB3yC,EAAM,SAAUA,GACpDA,EAAKu8F,kBAAqBjpG,oBAAkB0M,EAAKu8F,mBAA8C,IAAzBv8F,EAAKu8F,kBAC3E55F,EAAM+5F,KAAK18F,EAAKu8F,mBACZ/iF,EAAMne,OAAOyH,YAAc,UAAY0W,GAAMne,OAAOyH,WACpD0W,EAAMmjF,YAAY38F,EAAM2C,GAGxB6W,EAAMujF,qBAAqBp6F,GAAO,MAI9CsjB,EAAmBhzB,UAAUopG,YAAc,SAAU15F,GACjD,GAAIq6F,GAAiBzpG,WAAS0pG,SAASnsF,KAAKyI,QAAQq8B,gBAAiB,QAKrE,OAJIonD,GAAexkG,QAAQsY,KAAKyI,QAAQlmB,OAAOF,SAAW,IACtD6pG,EAAiBA,EAAe11F,OAAOwJ,KAAKyI,QAAQlmB,OAAOF,QAE/DwP,EAAMs6F,SAASD,GACRr6F,GAEXsjB,EAAmBhzB,UAAU0pG,YAAc,SAAU38F,EAAM2C,GACvD,GAAI6W,GAAQ1I,KACRosF,EAAS7yF,GAAarK,EAAM2C,EAChCmO,MAAKzV,OAAOotB,QxCxTS,kBwCwTuBy0E,EAAO5yF,OACzC4yF,EAAOvyF,SACboc,QAAQS,KAAK,SAAU1zB,GACvB0lB,EAAMiqD,YAAY3vE,MAG1BmyB,EAAmBhzB,UAAU8pG,qBAAuB,SAAUp6F,EAAOs0E,GACjE,GAAIz9D,GAAQ1I,IACZA,MAAKyI,QAAQzW,WAAagO,KAAKyI,QAAQzW,qBAAsBC,eACzD+N,KAAKyI,QAAQzW,WAAa,GAAIC,eAAY+N,KAAKyI,QAAQzW,WAC3D,IAAIq6F,MACAC,IACJ,IAAItsF,KAAK0K,gBAAgB1K,KAAKyI,QAAQlmB,SAAW4jF,EAAW,CACxD,GAAIomB,GAAW,UAAYvsF,MAAKyI,QAAQlmB,OAAOyP,WAC3C,GAAIC,eAAY+N,KAAKyI,QAAQlmB,OAAOyP,WAAWtM,QAC/Csa,KAAKyI,QAAQlmB,OAAOyP,UACxBgO,MAAKknF,gBAAgBv8E,OAAS9Y,EAAM8Y,OACpC0hF,EAAWnoG,KAAKqoG,EAAQ31E,aAAa5W,KAAKknF,kBAC1CoF,EAASpoG,KAAK,SAAU5B,GAAQ,MAAOomB,GAAMlX,eAAiBlP,IAElE+pG,EAAWnoG,KAAK8b,KAAKyI,QAAQzW,WAAW4kB,aAAa/kB,IACrDy6F,EAASpoG,KAAK8b,KAAK2yD,YAAYt/C,KAAKrT,MACpC,IAAIvc,GAAI,CACRyiD,SAAQsmD,IAAIH,GAAY31E,KAAK,SAAU1zB,GACnC,IAAK,GAAIU,GAAI,EAAGA,EAAIV,EAAEI,OAAQM,IAC1B4oG,EAAS7oG,KAAKT,EAAEU,GAAGgC,WAI/ByvB,EAAmBhzB,UAAUwwE,YAAc,SAAU3vE,GACjDgd,KAAKysF,SAAWzpG,CAChB,IAAI0pG,IAAU16F,WAAYgO,KAAKysF,SAAU71E,cAAc,EAAMv0B,MAAO2d,KAAKyI,QAAQpmB,MAEjF,IADA2d,KAAKzV,OAAOsoB,OxCxNgB,yBwCwNsB65E,GAC9CA,EAAM91E,aAAc,CACpB,GAAI/kB,GAAQ,GAAIC,QAChB,IAAIkO,KAAKzV,OAAOupB,gBAAkB9T,KAAKzV,OAAOupB,eAAeliB,IAAIxO,OAAQ,CACrE,GAAIywB,GAAY7T,KAAKzV,OAAOupB,eACxBlJ,EAASiJ,EAAUjJ,OAAOxnB,OAASywB,EAAUjJ,OAAS5K,KAAKyI,QAAQtlB,QAAQ4Y,IAAI,SAAU4wF,GAAK,MAAOA,GAAEtqG,OAE3GwP,GAAMyiB,OAAOT,EAAUjiB,IAAKgZ,EAAQiJ,EAAUthB,SAAUshB,EAAUM,WAAYN,EAAUO,cAE5F,GAAKpU,KAAKyI,QAAQq8B,uBAAyB,CAEvC,IAAK,GADDxyB,MACK7uB,EAAI,EAAGA,EAAIuc,KAAKyI,QAAQq8B,gBAAgB1hD,OAAQK,IAAK,CAC1D,GAAImpG,GAAe5sF,KAAKyI,QAAQq8B,gBAAgBrhD,EAC5Cuc,MAAKyI,QAAQ9c,KACbihG,EAAajhG,IAAMihG,EAAajhG,KAAOqU,KAAKzV,OAAOiN,iBAAiBo1F,EAAavqG,OAAOsJ,IACpFihG,EAAajhG,MAAQqU,KAAKyI,QAAQ9c,KAClC2mB,EAAKpuB,KAAK8b,KAAKyI,QAAQq8B,gBAAgBrhD,KAIvCmpG,EAAavqG,QAAU2d,KAAKyI,QAAQpmB,OACpCiwB,EAAKpuB,KAAK8b,KAAKyI,QAAQq8B,gBAAgBrhD,IAInD,GAAIgC,GAAYua,KAAK+rF,qBAAqBz5E,EACtC7sB,IACAoM,EAAMQ,MAAM5M,GAIpB,GAAIC,GAAS,GAAIuM,eAAYy6F,EAAM16F,YAAYS,aAAaZ,GACxD9D,EAAMiS,KAAKyI,QAAQlmB,MACvByd,MAAK6sF,aAAe13E,EAAmB23E,YAAYpnG,EAAQsa,KAAKyI,QAAQpmB,MAAO0L,EAAKiS,KAAKxO,gBAAgBomB,YAE7G,GAAIt1B,GAAOoqG,EAAM91E,aAAe5W,KAAK6sF,aAAeH,EAAM16F,UAC1DgO,MAAK+sF,kBAAkB,MAAM,EAAMzqG,EAAMoqG,GACrC1sF,KAAKkoF,QACLloF,KAAKkoF,OAAOn0C,OAEhB,IAAI7kD,IACAkT,YxCplBiB,kBwCqlBjB8Q,WAAYlT,KAAKyI,QAAQpmB,MAAO+mG,WAAYppF,KAAKyI,QAAQ9kB,KAE7D,KAAK4L,cAAcyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,YAAI8Q,KAExBA,KAAKzV,OAAOsoB,OAAOm6E,GAAyB99F,IAEhDimB,EAAmBhzB,UAAU4qG,kBAAoB,SAAUl7F,EAAOs0E,EAAWn0E,EAAY9C,GACrFozC,cAAYtiC,KAAKipF,SAKjBjpF,KAAKitF,eACLjtF,KAAKktF,kBAAkBl7F,EAAYm0E,EAAWj3E,IAElDimB,EAAmBhzB,UAAU2pG,cAAgB,SAAUj6F,GACnDmO,KAAKisF,qBAAqBp6F,IAE9BsjB,EAAmBhzB,UAAU8qG,aAAe,WACxCjtF,KAAKta,SACL,IAAID,GAAYua,KAAK+rF,qBAAqB/rF,KAAKyI,QAAQq8B,iBACnDjzC,EAAQ,GAAIC,QACZrM,IACAoM,EAAMQ,MAAM5M,EAGhB,KAAK,GAAIoK,GAAK,EAAGs9F,EADJ,GAAIl7F,eAAY+N,KAAKysF,UAAUh6F,aAAaZ,GACrBhC,EAAKs9F,EAAS/pG,OAAQyM,IAAM,CAC5D,GAAIG,GAAMm9F,EAASt9F,EACnBmQ,MAAKta,OAAOhD,GAAUsd,KAAKyI,QAAQpmB,MAAO2N,KAAQ,IAG1DmlB,EAAmBhzB,UAAUmyE,aAAe,SAAUtxE,GAClD,GAAItB,GAASsB,EAAEtB,OACX0I,EAAOD,EAAazI,EAAQ,qBAIhC,IAHIyI,EAAazI,EAAQ,gBACrBse,KAAKioF,eAAejlG,GAEpBoH,EAAM,CACN,GAAIsE,GAAYtE,EAAK9D,cAAc,eAC/BoI,GACAsR,KAAKotF,iBAAiB1+F,EAAUjE,UAAUC,SAAS,YAGnDiG,GAAevG,EAAKlB,eAExB8W,KAAKqtF,0BACLjjG,EAAK9D,cAAc,iBAAiBytD,QAExC/zC,KAAKstF,SAASnjG,EAAaC,EAAM,cAErC+qB,EAAmBhzB,UAAUmlG,aAAe,SAAUtkG,GAClDgd,KAAKstF,SAASnjG,EAAanH,EAAEtB,OAAQ,cAEzCyzB,EAAmBhzB,UAAUmrG,SAAW,SAAUljG,GAC9C,GAAImjG,GAAWvtF,KAAK1R,IAAIhI,cAAc,cAClCinG,IACAA,EAAS9iG,UAAU5I,OAAO,cAE1BuI,GACAA,EAAKK,UAAUqE,IAAI,eAG3BqmB,EAAmBhzB,UAAUirG,gBAAkB,SAAUr8F,GAErD,IAAK,GAAIlB,GAAK,EAAG29F,KADDniG,MAAMC,KAAK0U,KAAKkpF,KAAK9iG,iBAAiB,aAClByJ,EAAK29F,EAASpqG,OAAQyM,IAAM,CAC5D,GAAIq5F,GAAOsE,EAAS39F,EACpBsB,IAAqB+3F,EAAMn4F,GAC3BC,GAAWk4F,EAAKp4F,gBAAiBC,KAGzCokB,EAAmBhzB,UAAUgqD,WAAa,WAClCnsC,KAAKzV,OAAOK,QAAQH,UAAUC,SAAS,cACvCsV,KAAK7P,UAAUvF,QAAQtE,cAAc,kBAAkBmE,UAAU5I,OAAO,iBACnEme,KAAKyI,QAAQghF,oBACdzpF,KAAK7P,UAAUvF,QAAQtE,cAAc,UAAUytD,UAI3D5+B,EAAmBhzB,UAAUsrG,eAAiB,SAAU7rG,EAAOmP,EAASzO,GACpE,GAAI8H,GAAO2G,EAAUiP,KAAKonF,SAASlzF,WAAU,GACzC8L,KAAKqnF,UAAUnzF,WAAU,EAC7BlD,IAAW5G,EAAK9D,cAAc,SAAUyK,EACxC,IAAI8rC,GAAQzyC,EAAK9D,cAAc,YAC3Bk1C,EAAYplC,MAAoB9T,GAAQC,OAAQyd,KAAKyI,QAAQlmB,OAAQgI,OAAQyV,KAAKzV,QAmBtF,OAlBAsyC,GAAMt2C,WAAa/D,oBAAkBZ,IAAUA,EAAMqO,WAAW7M,OAASxB,EACrEoe,KAAKsoF,kBAAkB,UACN,iBAAV1mG,KACPi7C,EAAMt2C,WAAsB,IAAV3E,EAAiBoe,KAAKsoF,kBAAkB,cAAgBtoF,KAAKsoF,kBAAkB,gBAErGvhG,YAAU81C,IAAS,yBACf78B,KAAKyI,QAAQviB,UAAY5D,EAAK0d,KAAKyI,QAAQlmB,OAAOF,SAAW2d,KAAKsoF,kBAAkB,eACpFzrD,EAAMt2C,UAAY,GACIyZ,KAAKzV,OAAOkhB,SAAWzL,KAAKyI,QAAQlmB,OAAO+W,QACL,gBAA7C0G,MAAKyI,QAAQlmB,OAAO+W,qBAE/B0G,KAAKyI,QAAQviB,SAASs1C,EAAWx7B,KAAKzV,OAAQ,qBAAsB,KAAM,KAAM,KAAMsyC,GACtF78B,KAAKzV,OAAOihC,mBAGZ5/B,EAAeixC,EAAO78B,KAAKyI,QAAQviB,SAASs1C,EAAWx7B,KAAKzV,OAAQ,wBAGrEH,GAEX+qB,EAAmBhzB,UAAUkrG,wBAA0B,WACnD,GAKIK,GALA7zD,EAAM75B,KAAKkpF,KAAKr9F,SAASzI,OAAS,EAClC0F,KACA2/C,GAAW,EACXr+C,EAAO4V,KAAKkpF,KAAK5iG,cAAc,gBAC/B83C,EAAWp+B,KAAKkpF,KAAK9iG,iBAAiB,8BAA8BhD,MAEnE4c,MAAKyI,QAAQghF,sBACdiE,EAAM1tF,KAAK7P,UAAUw9F,OAAO,IACxBllD,UAAW,EAEnB,IAAI53C,GAAQzG,EAAK0G,eACjBE,IAAWH,GAAO,GAClBA,EAAMwjE,eAAgB,EAClBx6B,IAAQuE,GACRt1C,GAAa,WACbkI,GAAWH,GAAO,IAEbutC,GACLt1C,GAAa,UACb+H,EAAMwjE,eAAgB,IAGtBvrE,GAAa,aACb2/C,GAAW,EACPilD,IACAA,EAAIjlD,UAAW,IAGnBilD,IACA1tF,KAAKmnF,aAAeuG,EAAIjlD,SACxBilD,EAAI3oD,YAER3zC,eAAahH,IAAQ,UAAW,SAAU,cAC1CrD,YAAUqD,GAAOtB,GACjBkX,KAAKzV,OAAOsoB,OxCvWkB,mCwCuWwB41B,SAAUA,KAEpEtzB,EAAmBhzB,UAAU+qG,kBAAoB,SAAU5qG,EAAM6jF,EAAWumB,GACxE,GAAI32F,GAEA23F,EADAE,EAAS5tF,KAAKzV,OAAOkC,cAAc,OAEnCg8C,GAAW,CACVzoC,MAAKyI,QAAQghF,qBACdiE,EAAM1tF,KAAK7P,UAAUw9F,OAAO,GAEhC,IAAIE,IAAe,EACfj8F,EAAM,SACL86F,GAAM91E,eACPhlB,EAAM86F,EAAMrqG,MAEhB,KAASoB,EAAI,EAAGA,EAAInB,EAAKc,OAAQK,IAAK,CAClC,GAAIc,GAAMiE,WAASoJ,EAAKtP,EAAKmB,KACjB,KAARc,GAAc/B,oBAAkB+B,MAChCspG,GAA4B,GAIpC,GADA7tF,KAAK0qF,UAA4B,IAAjBmD,EAAqBvrG,EAAKc,OAASyqG,EAAcvrG,EAAKc,OAClEd,EAAKc,SAAW4c,KAAKixB,YAAa,CAClC,GAAI68D,GAAiB9tF,KAAKsoF,kBAAkB,aACxCh1B,EAAWtzD,KAAKytF,eAAeK,GAAgB,GAAQ/3F,KAASA,EAAGiK,KAAKyI,QAAQpmB,OAASyrG,EAAgB/3F,IACzGrH,EAAYuC,GAAmBxF,EAAO,QAAS6nE,EAAU,WAC7D5kE,GAAUpI,cAAc,YAAYmE,UAAUqE,IAAI,eAClD8+F,EAAO9hG,YAAY4C,EACnB,IAAIjJ,GAAY,GAAIyN,aAAU,QAAS,QAAS8M,KAAKyI,QAAQpmB,MACzD2d,MAAKyI,QAAQngB,kBACb7C,EAAYA,EAAUiO,GAAG,QAAS,QAASsM,KAAKyI,QAAQngB,iBAI5D,KAAK,GAFDylG,GAAgB,GAAI97F,eAAY+N,KAAKyI,QAAQq8B,iBAAiBryC,cAAa,GAAIX,UAAQO,MAAM5M,IAAYrC,OACzG4qG,MAAW,GACNvqG,EAAI,EAAGA,EAAInB,EAAKc,OAAQK,IAAK,CAClC,GAAIkI,GAAMF,EAAO,OACjBuU,MAAKzY,OAAOoE,GAAOnD,WAASoJ,EAAKtP,EAAKmB,GACtC,IAAI7B,GAAQ4G,WAASwX,KAAKyI,QAAQpmB,MAAOC,EAAKmB,GAC1Cuc,MAAKyI,QAAQmD,WACbhqB,EAAQoe,KAAK6J,eAAe9B,OAAOnmB,EAAOoe,KAAKyI,QAAQmD,UAE3D,IAAIqiF,IAAWrsG,MAAOA,EAAOW,OAAQyd,KAAKyI,QAAQlmB,OAAQD,KAAMA,EAAKmB,GAGrE,IAFAuc,KAAKzV,OAAOsoB,OxC/fC,oBwC+f8Bo7E,GAE5B,MADfrsG,EAAQqsG,EAAOrsG,QACMY,oBAAkBZ,GAAS,CAC5C,GAAIosG,EACA,QAEJA,IAAW,EAEf,GAAIE,GAAWluF,KAAKytF,eAAe7rG,EAAOoe,KAAKmuF,gBAAgBJ,EAAe/tF,KAAKzY,OAAOoE,IAAOnD,WAAS,UAAWlG,EAAKmB,IAC1HmqG,GAAO9hG,YAAYmF,GAAmBtF,EAAKuiG,EAAU,aAEzDluF,KAAKkpF,KAAK3iG,UAAY,GACtBqF,EAAeoU,KAAKkpF,QAAS79F,MAAMC,KAAKsiG,EAAO/hG,WAC/CmU,KAAKqtF,0BACDK,IACAA,EAAIjlD,UAAW,GAEnBA,GAAW,MAGXmlD,GAAO9hG,YAAYkU,KAAKzV,OAAOkC,cAAc,QAAUlG,UAAWyZ,KAAKsoF,kBAAkB,eACzFtoF,KAAKkpF,KAAK3iG,UAAY,GACtBqF,EAAeoU,KAAKkpF,QAAS79F,MAAMC,KAAKsiG,EAAO/hG,WAC3C6hG,IACAA,EAAIjlD,UAAW,GAEnBA,GAAW,CAEXilD,KACA1tF,KAAKmnF,aAAeuG,EAAIjlD,SACxBilD,EAAI3oD,WAER,IAAI71C,IAASkT,YxC9yBY,sBwC8yB6BpQ,WAAYgO,KAAKixB,aAC9D1hC,cAAcyQ,KAAKzV,OAAO0E,oBAAyB3M,EAC5D,KAAKiN,cAAcyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,YAAI8Q,KAExBA,KAAKzV,OAAOsoB,OAAOm6E,GAAyB99F,GAC5C8Q,KAAKzV,OAAOsoB,OxCxbkB,mCwCwbwB41B,SAAUA,IAChEthB,cAAYnnB,KAAKipF,UAErB9zE,EAAmBhzB,UAAUgsG,gBAAkB,SAAUJ,EAAensG,GACpE,GAAKoe,KAAKgpC,YAAe+kD,EAGpB,CACD,GAAIj7B,GAAa9yD,KAAKta,OAAO9D,EAC7B,OAAiC,aAA1Boe,KAAKyI,QAAQlW,UAA2BugE,EAAaA,EAJ5D,OAAO,GAOf39C,EAAmB23E,YAAc,SAAU56F,EAAM7P,EAAOE,EAAQiP,GAO5D,IANA,GAEI5P,GAFAmD,EAAMmN,EAAK9O,OACXsC,KAGA0oG,KACA38F,KAAelP,IAAUA,EAAOmoB,kBAAkBnoB,EAAOmoB,kBACtD3lB,KAGH,GAFAnD,EAAQsQ,EAAKnN,MACbnD,EAAQc,GAAUL,EAAOT,KACVwsG,IAAS,CACpB,GAAItoG,KAGJ,IAFAA,EAAW,QAAIlE,EACfwsG,EAAOxsG,IAAS,EACZ6P,EAAc,CACd,GAAI48F,GAAiB98F,GAAehP,KAAYX,EAAO4P,GAAgB,EACvEF,YxChoBQ,iBwCgoBwB+8F,EAAgBn8F,EAAKnN,IACrDnD,EAAQ4G,WAASjG,EAAO+F,gBAAiB+lG,GAE7C/8F,WAASjP,EAAOG,oBAAkBZ,GAAS,KAAOA,EAAOkE,GACzDwL,WAAS,UAAWY,EAAKnN,GAAMe,GAC/BJ,EAAOxB,KAAK4B,GAGpB,MAAOrD,YAASstB,MAAMttB,WAASk7C,KAAKj4C,EAAQrD,EAAOI,WAAS2oB,aAAc,YAE9E+J,EAAmBC,aAAe,SAAUjyB,GAIxC,IAAK,GAHDmvB,GAAO7vB,WAAS0pG,SAAShpG,EAAS,SAAS,OAC3CqC,KACAG,KACKlC,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAEH,KAD1B+B,EAAa,GAAIyM,eAAY9O,GAASsP,cAAa,GAAIX,UAAQO,MAAM,QAAS,QAASigB,EAAK7uB,GAAGpB,SAChFe,SACXuC,EAAK2sB,EAAK7uB,GAAGpB,OAAS8yB,EAAmBm5E,kBAAkB9oG,GAGnE,OAAOG,IAEXwvB,EAAmBm5E,kBAAoB,SAAUh8E,GAC7C,GACI7sB,GACA0B,EAFApC,EAAMutB,EAAOA,EAAKlvB,OAAS,GAI/B+D,EAAQguB,EAAmBo5E,iBAAiBj8E,EAAK,KAC3C8B,cAAgB5xB,oBAAkB2E,EAAMitB,eAAgBjtB,EAAMitB,aAEhE3uB,EADe,SAAf0B,EAAMxD,MAAkC,aAAfwD,EAAMxD,KACnB2O,GAAiBnL,EAAOA,EAAMxD,MAG9BwD,EAAMyM,YAAczM,EAAMyM,YAClC,GAAIV,aAAU/L,EAAM9E,MAAO8E,EAAMoL,SAAUpL,EAAMvF,OAAQuzB,EAAmBq5E,aAAarnG,GAAQA,EAAMitB,aAE/G,KAAK,GAAIyL,GAAI,EAAGA,EAAI96B,EAAK86B,IACrBvN,EAAKuN,GAAK1K,EAAmBo5E,iBAAiBj8E,EAAKuN,IAC/C96B,EAAM,GAAK86B,EAAI,GAA2B,OAAtBvN,EAAKuN,GAAGp6B,UACP,SAAjB6sB,EAAKuN,GAAGl8B,MAAoC,aAAjB2uB,EAAKuN,GAAGl8B,KACnC8B,EAAUswB,WAAW7xB,KAAKoO,GAAiBggB,EAAKuN,GAAIvN,EAAKuN,GAAGl8B,OAG5D8B,EAAUswB,WAAW7xB,KAAK,GAAIgP,aAAUof,EAAKuN,GAAGx9B,MAAOiwB,EAAKuN,GAAGttB,SAAU+f,EAAKuN,GAAGj+B,OAAQuzB,EAAmBq5E,aAAal8E,EAAKuN,IAAKvN,EAAKuN,GAAGzL,eAMvI3uB,EAFa,SAAjB6sB,EAAKuN,GAAGl8B,MAAoC,aAAjB2uB,EAAKuN,GAAGl8B,KACT,QAAtB2uB,EAAKuN,GAAGp6B,WAA4C,UAArB6sB,EAAKuN,GAAGttB,SAC3B9M,EAAiB,GAAE6M,GAAiBggB,EAAKuN,GAAIvN,EAAKuN,GAAGl8B,MAAO2uB,EAAKuN,GAAGl8B,KAAM2uB,EAAKuN,GAAGzL,cAGlF3uB,EAAW6sB,EAAKuN,cAAevtB,GAAiBggB,EAAKuN,GAAIvN,EAAKuN,GAAGl8B,MAAO2uB,EAAKuN,GAAGl8B,KAAM2uB,EAAKuN,GAAGzL,cAKlG9B,EAAKuN,GAAGjsB,YAChBnO,EAAU6sB,EAAKuN,GAAGp6B,WAAW6sB,EAAKuN,GAAGjsB,aACrCnO,EAAW6sB,EAAKuN,cAAevN,EAAKuN,GAAGx9B,MAAOiwB,EAAKuN,GAAGttB,SAAU+f,EAAKuN,GAAGj+B,OAAQuzB,EAAmBq5E,aAAal8E,EAAKuN,IAAKvN,EAAKuN,GAAGzL,aAIlJ,OAAO3uB,IAAa,MAExB0vB,EAAmBq5E,aAAe,SAAUl1F,GACxC,MAAI9W,qBAAkB8W,EAAO9G,aACL,WAAhB8G,EAAO3V,MAAqBnB,oBAAkB8W,EAAO3V,OAAmC,gBAAlB2V,UAQnEA,EAAO9G,WAGtB2iB,EAAmBo5E,iBAAmB,SAAUj1F,GAI5C,OAHqB,SAAhBA,EAAO3V,MAAmC,aAAhB2V,EAAO3V,MAAuB2V,EAAO1X,gBAAiBuR,SACjFmG,EAAO3V,KAAO2V,EAAO3V,MAAQ,QAE1B2V,GAEJ6b,KCxhCPqK,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAoBnF2uE,GAAiC,SAAUzsE,GAM3C,QAASysE,GAAgBlkG,EAAQmkG,GAC7B,GAAIhmF,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,IAAWyV,IAGzC,OAFA0I,GAAMimF,sBAAwBD,EAC9BhmF,EAAM7I,SAAU,EACT6I,EA0zBX,MAn0BA8W,IAAUivE,EAAiBzsE,GAW3BysE,EAAgBtsG,UAAUysG,WAAa,SAAUjrG,EAAM4O,GACnD,GAAIkW,IACAomF,QAAS,QAAS,WAAY,GAAI,WAAY,kBAAmB,cAC7D,qBAAsB,UAAW,GAAI,gBACzCC,QAAS,QAAS,WAAY,GAAI,aAAc,WAAY,GAAI,WAAY,GAAI,gBAEpFrmF,GAAQuO,KAAOvO,EAAQomF,OACvBpmF,EAAQsmF,SAAWtmF,EAAQomF,MAE3B,KAAK,GADDG,MACKvrG,EAAI,EAAGA,EAAIglB,EAAQ9kB,GAAMP,OAAQK,IAClCglB,EAAQ9kB,GAAMF,GAAGL,OACbmP,EACAy8F,EAAM9qG,MACF2mB,KAAM7K,KAAKsoF,kBAAkB7/E,EAAQ9kB,GAAMF,IAAM,MACjDwrG,QAAS,yBAA2B18F,IAAakW,EAAQ9kB,GAAMF,GAAG0E,cAAgB,GAAK,iBAI3F6mG,EAAM9qG,MACF2mB,KAAM7K,KAAKsoF,kBAAkB7/E,EAAQ9kB,GAAMF,IAAM,QAKzDurG,EAAM9qG,MAAOgrG,WAAW,GAGhC,OAAOF,IAOXP,EAAgBtsG,UAAU0rB,QAAU,WAC5B7N,KAAK1R,MACL0R,KAAKmvF,iBACLntE,EAAO7/B,UAAU0rB,QAAQviB,KAAK0U,OAE9BA,KAAKovF,OAASpvF,KAAKovF,MAAMlmG,eACzBrH,SAAOme,KAAKovF,QAGpBX,EAAgBtsG,UAAUktG,WAAa,SAAU1rG,EAAMqlD,EAAYsmD,EAAaC,GAC5E,GAAI9mF,IAAYqmF,OAAQ,aAAc93E,KAAM,aAAc+3E,SAAU,iBAAkBF,OAAQ,eAC9F7uF,MAAKwvF,KAAOxvF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,0BACtDkX,KAAKzV,OAAO2X,UACZlC,KAAKwvF,KAAK/kG,UAAUqE,IAAI,SAGxBkR,KAAKwvF,KAAK/kG,UAAU5I,OAAO,QAE/B,IAAI4tG,GAAKzvF,KAAKzV,OAAOkC,cAAc,MAC/BijG,EAAO1mD,EAAa,gCAAkC,oBAE1D,IAAIhpC,KAAKzV,OAAOqe,cAAgD,SAAhC5I,KAAKzV,OAAO4lB,kBACpCnQ,KAAKyI,QAAQghF,mBAAoB,CACrC,GAAIkG,GAAS3vF,KAAKzV,OAAO4rE,qBAAqBo5B,EAAW5jG,KAAK++B,aAAa,aACvEklE,EAAY5vF,KAAKzV,OAAOiN,iBAAiB+3F,EAAWltG,OAAOumB,aAC3DinF,EAAUD,GAAwB,cAAXD,EAA2D,oBAAjC,+BACjDG,EAAWF,GAAwB,eAAXD,EAA6D,qBAAlC,gCACnDI,EAAoB,WAATpsG,EAAqBqc,KAAKsoF,kBAAkB,YAAwB,aAAT3kG,GAAgC,SAATA,EAC7Fqc,KAAKsoF,kBAAkB,gBAAkBtoF,KAAKsoF,kBAAkB,yBAChE0H,EAAqB,WAATrsG,EAAqBqc,KAAKsoF,kBAAkB,YAAwB,aAAT3kG,GAAgC,SAATA,EAC9Fqc,KAAKsoF,kBAAkB,gBAAkBtoF,KAAKsoF,kBAAkB,wBACpEmH,GAAG3jG,YAAYkU,KAAKiwF,eAAeF,EAASF,EAAO,oBACnDJ,EAAG3jG,YAAYkU,KAAKiwF,eAAeD,EAAUF,EAAQ,oBACrD,IAAIZ,GAAYlvF,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,6CAC7D2mG,GAAG3jG,YAAYojG,GAEdlvF,KAAKyI,QAAQghF,oBACdgG,EAAG3jG,YAAYkU,KAAKiwF,eAAejwF,KAAKsoF,kBAAkB,eAAgBt/C,EAAa,GAAK,aAAc0mD,IAEjG,YAAT/rG,GACA8rG,EAAG3jG,YAAYkU,KAAKiwF,eAAejwF,KAAKsoF,kBAAkB7/E,EAAQ9kB,IAAQ,YAAa2rG,GAAetvF,KAAKkwF,mBAAqB,eAAiBR,EAAO,gBAAgB,IAE5K1vF,KAAKwvF,KAAK1jG,YAAY2jG,GACtBzvF,KAAKzV,OAAOsoB,OzCuQa,4ByCvQwBjoB,QAASoV,KAAKwvF,OAC/DxvF,KAAKzV,OAAOsoB,OzC0XqB,sCyC1XwBm2B,WAAYA,KAEzEylD,EAAgBtsG,UAAU8tG,eAAiB,SAAU1rG,EAAKuE,EAAWqnG,EAAUC,GAC3E,GAAIC,GAAKrwF,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAWA,EAAY,gBAMlE,OALAunG,GAAG9pG,UAAYhC,EACf8rG,EAAG92D,aAAav5B,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,uBAAyBqnG,IAAaE,EAAG/2D,YACpG82D,GACAC,EAAGvkG,YAAYkU,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,qBAE3DunG,GAEX5B,EAAgBtsG,UAAUmuG,aAAe,WACrC1mD,eAAa96C,IAAIkR,KAAK1R,IAAK,YAAa0R,KAAKuwF,aAAcvwF,MAC3D4pC,eAAa96C,IAAIkR,KAAK1R,IAAK,QAAS0R,KAAKwwF,eAAgBxwF,OAE7DyuF,EAAgBtsG,UAAUgtG,eAAiB,WACvCvlD,eAAa/nD,OAAOme,KAAK1R,IAAK,YAAa0R,KAAKuwF,cAChD3mD,eAAa/nD,OAAOme,KAAK1R,IAAK,QAAS0R,KAAKwwF,iBAEhD/B,EAAgBtsG,UAAUquG,eAAiB,SAAUxtG,GACjD,GAAIylB,IAAYqmF,OAAQ,aAAc93E,KAAM,aAAc+3E,SAAU,iBAAkBF,OAAQ,gBAC1F4B,EAAWtmG,EAAanH,EAAEtB,OAAQ,cAClC+uG,KACIzwF,KAAKsoF,kBAAkB,iBAAmBmI,EAAS38D,UAAUttC,QAC7DwZ,KAAK+pF,cACL/pF,KAAKuoC,eAEAvoC,KAAKyI,QAAQghF,oBACfzpF,KAAKsoF,kBAAkB7/E,EAAQzI,KAAKyI,QAAQ9kB,SAAW8sG,EAAS38D,UAAUttC,QAC7EwZ,KAAKuwF,aAAavtG,KAI9ByrG,EAAgBtsG,UAAUuuG,aAAe,WACrC1wF,KAAK2wF,aAAc,EACf3wF,KAAK4wF,UAAY5wF,KAAK4wF,QAAQ1gF,cAC9BlQ,KAAK4wF,QAAQ/iF,UACbhsB,SAAOme,KAAKovF,OACZpvF,KAAKzV,OAAOsoB,OzCsVW,2ByCtV4BnxB,OAAQ,KAAMwmD,OAAQ,GAAIY,QAAQ,MAG7F2lD,EAAgBtsG,UAAUouG,aAAe,SAAUvtG,GAC/C,IAAIgd,KAAKyI,QAAQghF,oBAAiC,cAAXzmG,EAAEW,KAAzC,CAGA,GAGIysG,GAHA1uG,EAASsB,EAAEtB,OAAO4E,cAAc,kBAChC+pG,EAAKlmG,EAAanH,EAAEtB,OAAQ,eAC5BmvG,EAAU7wF,KAAKwvF,KAAKlpG,cAAc,aAStC,IAPIuqG,GACAA,EAAQpmG,UAAU5I,OAAO,aAEzBwuG,IACAA,EAAG5lG,UAAUqE,IAAI,aACjBshG,EAAYC,EAAG5lG,UAAUC,SAAS,eAElChJ,EAAJ,CAGA,IAAK0uG,EAAW,CACZ,GAAIU,GAAU9wF,KAAKwvF,KAAKlpG,cAAc,aACjC9D,qBAAkBsuG,IACnBA,EAAQrmG,UAAU5I,OAAO,cAE7Bme,KAAK0wF,eAET,GAAIK,GAAe/wF,KAAKkwF,kBACxB,KAAKlwF,KAAK2wF,aAAeP,EAAW,CAChCC,EAAG5lG,UAAUqE,IAAI,cACjBkR,KAAK2wF,aAAc,CACnB,IAAIK,IACArsG,MAAOqb,KAAK4uF,WAAW5uF,KAAKyI,QAAQ9kB,KAAMotG,EAAeA,EAAanjG,QAAQ,MAAO,QAAMb,IAC3FwB,OAAQyR,KAAKixF,cAAc59E,KAAKrT,MAChCkxF,QAASlxF,KAAK0wF,aAAar9E,KAAKrT,MAChCkC,UAAWlC,KAAKzV,OAAO2X,UACvBivF,YAAanxF,KAAKoxF,aAAa/9E,KAAKrT,MACpCid,SAAUjd,KAAKyI,QAAQghF,mBAAqB,4BAA8B,GAE9EzpF,MAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKovF,OACrCpvF,KAAK4wF,QAAU,GAAIS,eAAYL,EAAahxF,KAAKovF,MACjD,IAAIkC,GAAStxF,KAAKwvF,KAAKlpG,cAAc,cAAc6C,wBAC/CooG,GAAQ7nG,IAAK,EAAGC,KAAM,EAC1B,IAAIqW,KAAKyI,QAAQghF,mBAAoB,CACjC,GAAIhhF,IAAYqmF,OAAQ,aAAc93E,KAAM,aAAc+3E,SAAU,iBAAkBF,OAAQ,gBAE1FvhG,EADUnH,SAASG,cAAc,gDAChBmD,aAAe,CACpCuW,MAAK4wF,QAAQhmG,QAAQvB,MAAMiE,OAAS,eAAiBA,EAAS,MAC9D0S,KAAK4wF,QAAQ1kD,KAAK5+C,EAAQ,EAAGnH,SAASwG,KACtC,IAAIu7C,GAASloC,KAAKsoF,kBAAkB7/E,EAAQzI,KAAKyI,QAAQ9kB,MACzDqc,MAAKzV,OAAOsoB,OzCmSO,2ByClSfnxB,OAAQse,KAAK4wF,QAAQhmG,QAAQ1B,cAAeg/C,OAAQA,EAAQY,QAAQ,QAGvE,CACD,GAAInuC,UAAQ44C,SAAU,CAClB,GAAIi+C,GAAcxxF,KAAKyxF,iBAAiBzxF,KAAK4wF,QAC7CW,GAAI7nG,KAAOjB,OAAOwwD,YAAcu4C,EAAYlkG,QAAU,EACtDikG,EAAI5nG,MAAQlB,OAAOqwD,WAAa04C,EAAY9oG,OAAS,EACrDsX,KAAKuoC,kBAGLgpD,GAAI7nG,IAAMiR,UAAQ+2F,KAAOjpG,OAAOkpG,YAAcL,EAAO5nG,IAAMjB,OAAOs0E,QAAUu0B,EAAO5nG,IACnF6nG,EAAI5nG,KAAOqW,KAAK4xF,kBAAkB5xF,KAAK1R,IAAK0R,KAAK4wF,QAErD5wF,MAAK4wF,QAAQ1kD,KAAKqlD,EAAI7nG,IAAK6nG,EAAI5nG,KAAM3G,EAAEtB,QAE3CqW,GAAiBiI,KAAKzV,OAAOK,QAASoV,KAAK4wF,QAAQhmG,QAAQ1B,mBAGnEulG,EAAgBtsG,UAAU+tG,iBAAmB,WACzC,GAAIa,GACAh7E,EAAa/V,KAAKinF,kBAAkBjnF,KAAKyI,QAAQpmB,MAerD,OAdI0zB,IAAoC,IAAtBA,EAAW3yB,OAErB2tG,EAD2B,uBAA3Bh7E,EAAW,GAAGxjB,UAAgE,oBAA3BwjB,EAAW,GAAGxjB,SAClD,UAGA,eAIfwjB,GAAoC,IAAtBA,EAAW3yB,SACzB4c,KAAK6xF,SAAW7xF,KAAK2uF,sBAAsB3uF,KAAKyI,QAAQ9kB,KAAO,YAC/DotG,EAAeh7E,EAAW,GAAGxjB,UAG9Bw+F,GAEXtC,EAAgBtsG,UAAUivG,aAAe,SAAUliG,GAC/C,GAAI8Q,KAAKyI,SAAWzI,KAAKyI,QAAQghF,oBAAsBv6F,EAAKmlC,MAAO,CAC/D,GAAI3yC,GAASwN,EAAKmlC,MAAM3yC,OACpBowG,EAAepwG,EAAO+I,UAAUC,SAAS,oBACtChJ,EAAO+I,UAAUC,SAAS,mBAAqBhJ,EAAO+I,UAAUC,SAAS,cAChFwE,GAAK+3B,QAAU6qE,MAGX5iG,GAAKmlC,gBAAiB09D,aAAc7iG,EAAKmlC,MAAM3yC,OAAO+I,UAAUC,SAAS,eACzEwE,EAAK+3B,QAAS,IAI1BwnE,EAAgBtsG,UAAUsvG,iBAAmB,SAAUxlG,GAC9B+T,KAAK4wF,QAAQhmG,QAAQvB,MAAMC,OAEhD,OADA0W,MAAK4wF,QAAQhmG,QAAQvB,MAAMC,QAAU,QAC9B0W,KAAK4wF,QAAQhmG,QAAQzB,yBAEhCslG,EAAgBtsG,UAAUyvG,kBAAoB,SAAUlwG,EAAQuK,GAC5D,GAAI+lG,GAAehyF,KAAKyxF,iBAAiBxlG,GAASvD,MAC9CU,EAAiB1H,EAAOyH,wBACxBqH,EAAUpH,EAAea,MAAQ+nG,EAAehyF,KAAKzV,OAAOK,QAAQgC,YACpEqlG,EAAevwG,EAAOoI,YAAcpI,EAAOkL,WAE/C,OADAqlG,GAAeA,EAAeA,EAAe,EAAI,EACzCzhG,EAAU,EAAMpH,EAAea,MAAQ,EAAIgoG,EAAiB7oG,EAAeO,KAAOqoG,EAAe,EAAIC,GAEjHxD,EAAgBtsG,UAAU4oD,WAAa,SAAUtiC,GAC7C,GAAIC,GAAQ1I,IACZA,MAAKwoF,YAAY//E,GACjBzI,KAAK2oF,iBAAiBlgF,GACtBzI,KAAKmpF,WAAW1gF,GAChBzI,KAAK7P,UAAU40C,UACf,IAAImtD,GAAgBlyF,KAAKinF,kBAAkBx+E,EAAQpmB,QAAU2d,KAAKinF,kBAAkBx+E,EAAQpmB,OAAOe,QAC/F4c,KAAKyI,QAAQq8B,gBAAgBxrC,OAAO,SAAUvL,GAC1C,MAAO2a,GAAMD,QAAQpmB,QAAU0L,EAAI1L,QACpCe,MACP4c,MAAKqvF,WAAW5mF,EAAQ9kB,KAAMuuG,EAAe,EAAqB,IAAjBA,GAAuC,IAAjBA,EAAqBzpF,GAC5FzI,KAAK1R,IAAIirC,aAAav5B,KAAKwvF,KAAMxvF,KAAK1R,IAAIgrC,YAC1Ct5B,KAAK1R,IAAI7D,UAAUqE,IAAI,iBACnBkR,KAAKzV,OAAO2X,WACZlC,KAAK1R,IAAI7D,UAAUqE,IAAI,SAE3BkR,KAAK1R,IAAI7D,UAAU5I,OAAO,oBAC1Bme,KAAKovF,MAAQpvF,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,iBAC1DkX,KAAKzV,OAAOsoB,OzCoBa,0ByCnBzB7S,KAAKswF,gBAET7B,EAAgBtsG,UAAUomD,YAAc,WACpCvmB,EAAO7/B,UAAUomD,YAAYj9C,KAAK0U,OAEtCyuF,EAAgBtsG,UAAU8uG,cAAgB,SAAUjuG,GAC5CA,EAAEo4B,OACFpb,KAAKzV,OAAOsoB,OzC0MO,0ByCzMnB7S,KAAKywF,SAAWztG,EAAEo4B,KAClBpb,KAAKmyF,eAAenvG,KAI5ByrG,EAAgBtsG,UAAUgwG,eAAiB,SAAUnvG,GACjD,GAAI0lB,GAAQ1I,KACRte,EAASsB,EAAIA,EAAE4H,YAAUmC,GACzBxK,EAASyd,KAAKyI,QAAQpmB,MACtBkhD,GAAa/gD,oBAAkBD,IAAWkL,EAAelL,GACzD6vG,GAAoB5vG,oBAAkBD,IAAWoL,EAAkBpL,GACnE8vG,EAAUryF,KAAKzV,OAAOkC,cAAc,OACpC3D,UAAW,iBACX0B,GAAI+4C,EAAY6uD,EAAmB,YAAc7vG,EAAS,aAE9Dyd,MAAKsyF,OAAStyF,KAAKzV,OAAOkC,cAAc,OACpC3D,UAAW,aACX0B,GAAI+4C,EAAY6uD,EAAmB,WAAa7vG,EAAS,aAEzDyd,KAAKyI,QAAQghF,mBACOtjG,SAASG,cAAc,yDAC7BwF,YAAYkU,KAAKsyF,QAG/BtyF,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKsyF,QAEzCtyF,KAAKuyF,OAAS,GAAI3mD,WACd1D,OAAQloC,KAAKsoF,kBAAkB,gBAC/Bz8C,SAAS,EACT2mD,aAAcxyF,KAAKyyF,aAAap/E,KAAKrT,MACrC8rC,eAAe,EACfC,eAAe,EACfrqD,OAAQyE,SAASwG,KAEjBhE,SAAS,EACTuZ,UAAWlC,KAAKzV,OAAO2X,UACvBgqC,KAAM,WACF,GAAI9mD,GAAMsjB,EAAM6pF,OAAO3nG,QAAQtE,cAAc,wBACzCoiB,GAAMD,QAAQlmB,OAAOkoB,iBACjBlb,aACAnK,EAAIkB,cAAc,oBAAoBuF,SAAS,GAAGkoD,QAGlD3uD,EAAIkB,cAAc,IAAMoiB,EAAMD,QAAQlmB,OAAOF,MAAQ,mBAAmB0xD,UAOpFzH,MAAOtsC,KAAKyyF,aAAap/E,KAAKrT,MAC9BosC,QAASpsC,KAAK0yF,cAAcr/E,KAAKrT,KAAMte,EAAQa,GAC/C6nD,UACQx8B,MAAO5N,KAAK2yF,eAAet/E,KAAKrT,KAAMzd,GACtC+mG,aACIxjF,QAAS9F,KAAKsoF,kBAAkB,YAAaiB,WAAW,EAAMtsE,SAAU,kBAI5ErP,MAAO5N,KAAKyyF,aAAap/E,KAAKrT,MAC9BspF,aAAexjF,QAAS9F,KAAKsoF,kBAAkB,gBAAiBrrE,SAAU,sBAElFnX,QAASusF,EACT3pG,MAAO,IACP8jD,mBAAqBC,OAAQ,SAGjCzsC,MAAKuyF,OAAuB,kBAAI,EAChCvyF,KAAK6qC,yBACL7qC,KAAKsyF,OAAOvwG,aAAa,aAAcie,KAAKsoF,kBAAkB,2BAC9DtoF,KAAKuyF,OAAO93D,SAASz6B,KAAKsyF,SAE9B7D,EAAgBtsG,UAAU0oD,uBAAyB,WAC/C,GAAI7qC,KAAKyI,QAAQghF,mBAAoB,CACjC,GAAImJ,GAAmBzsG,SAASG,cAAc,2BAC1CssG,IACAA,EAAiBnoG,UAAU5I,OAAO,2BAEtCme,KAAKuyF,OAAOnoD,aACZpqC,KAAKuyF,OAAOrqD,WAASn7C,GACrBiT,KAAKuyF,OAAOtpG,UAAa0gG,EAAG,GAAIC,EAAG,IACnC5pF,KAAKuyF,OAAO7wG,OAASyE,SAASG,cAAc,yDAC5C0Z,KAAKuyF,OAAO7pG,MAAQ,OACpBsX,KAAKuyF,OAAO1mD,SAAU,EACtB7rC,KAAKuyF,OAAOzmD,eAAgB,IAIpC2iD,EAAgBtsG,UAAUswG,aAAe,WACrC,GAAIljG,aAEA,IAAK,GADDpM,GAAU6c,KAAKyI,QAAQtlB,YAClBM,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAChC,GAAIN,EAAQM,GAAGgnB,eAAgB,CAC3B,GAAIu1B,GAAShgC,KAAKzV,OAAOK,QAAQJ,GAAKrH,EAAQM,GAAGkI,IAAM,gBACvD8hC,wBAAqBuS,EAAQ,iBAAkB78C,EAAQM,IAInEuc,KAAKzV,OAAOsoB,OzCyGW,0ByCxGnB7S,KAAKzV,OAAOkhB,UACZzL,KAAKzV,OAAOghC,iBAAiB,mBAC7BvrB,KAAKzV,OAAOihC,mBAEhBxrB,KAAK6yF,eAAe7yF,KAAK8yF,SAAU9yF,KAAK+yF,WAAY/yF,KAAKgzF,eAAgBhzF,KAAKizF,OAAQjzF,KAAKkzF,cAAelzF,KAAKuyF,SAC/G1wG,SAAOme,KAAKsyF,QACZtyF,KAAKzV,OAAOsoB,OzCsFW,2ByCpF3B47E,EAAgBtsG,UAAUuwG,cAAgB,SAAUhxG,EAAQa,GAGxD,GAFAyd,KAAKmzF,mBAAmBzxG,EAAQa,GAChCyd,KAAKuyF,OAAO3nG,QAAQvB,MAAMM,KAAO,MAC5BqW,KAAKyI,QAAQghF,mBAGb,CACD,GACIn8F,GADUnH,SAASG,cAAc,gDAChBmD,aAAe,CACpCuW,MAAKuyF,OAAO3nG,QAAQvB,MAAMK,IAAM4D,EAAS,SALzC0S,MAAKuyF,OAAO3nG,QAAQvB,MAAMK,IAAM,OAO/BsW,KAAKyI,QAAQghF,oBAAsB9uF,UAAQ44C,UAAY9qD,OAAOqwD,WAAa,MAC5E94C,KAAKuyF,OAAO3nG,QAAQvB,MAAMX,MAAQ,OAEtCsX,KAAKzV,OAAOsoB,OzCpDgB,0ByCoDwBtwB,OAAQA,EAAQ6wG,OAAQpzF,KAAK7P,YACjF6P,KAAKuyF,OAAOtnD,OACZlzC,GAAiBiI,KAAKzV,OAAOK,QAASoV,KAAKuyF,OAAO3nG,QAAQ1B,eAC1D8W,KAAKzV,OAAOsoB,OzCqEe,4ByCrEwBu1B,MAAOpoC,KAAKsoF,kBAAkB,mBAErFmG,EAAgBtsG,UAAUgxG,mBAAqB,SAAUzxG,EAAQa,GAC7D,GAAI8wG,GAAgBrzF,KAAKuyF,OAAO3nG,QAAQtE,cAAc,mBAElDgtG,EAAYtzF,KAAKzV,OAAOkC,cAAc,OAASlG,UAAWyZ,KAAKsoF,kBAAkB,iBAAkBx/F,UAAW,oBAClHuqG,GAAcvnG,YAAYwnG,EAE1B,IAAIC,GAAWvzF,KAAKzV,OAAOkC,cAAc,OAASlG,UAAWyZ,KAAKyI,QAAQ+qF,YAAa1qG,UAAW,mBAClGuqG,GAAcvnG,YAAYynG,GAC1BvzF,KAAKyzF,eAAelxG,EAAQ8wG,IAGhC5E,EAAgBtsG,UAAUwwG,eAAiB,SAAU5kG,GACjD,GAWI2lG,GAXAnwD,GAAa/gD,oBAAkBuL,IAAQN,EAAeM,GACtDqkG,GAAoB5vG,oBAAkBuL,IAAQJ,EAAkBI,GAChE4lG,EAAWpwD,EAAY6uD,EAAmBrkG,EAC1C6lG,EAAS5zF,KAAKyI,QAAQlmB,OAAOkoB,gBAAkBlb,aAC/CyQ,KAAKsyF,OAAOhsG,cAAc,oBAAoBuF,SAAS,GAAGvF,cAAc,cAAc6qF,cAAc,GAClGnxE,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,mBAAmBxiB,cAAc,GAC9E0iB,EAAY7zF,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,kBAAkBxiB,cAAc,GACvF2iB,EAAS9zF,KAAKyI,QAAQlmB,OAAOkoB,gBAAkBlb,aAC/CyQ,KAAKsyF,OAAOhsG,cAAc,qBAAqBuF,SAAS,GAAGvF,cAAc,cAAc6qF,cAAc,GACnGnxE,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,oBAAoBxiB,cAAc,GAC/E4iB,EAAY/zF,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,mBAAmBxiB,cAAc,EAElE,YAAtBnxE,KAAKyI,QAAQ9kB,OAEb+vG,EADe1zF,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,eAAexiB,cAAc,GAC9DpgF,QAE7B,IAAIijG,GAAWh0F,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,wBAAwBxiB,cAAc,GAE5F1rF,GADUua,KAAKsyF,OAAOhsG,cAAc,IAAMqtG,EAAW,yBAAyBxiB,cAAc,GAC/E6iB,EAASjjG,QAAU,MAAQ,KACvB,QAAjB+iG,EAAOlyG,QACP6D,EAAY,MAEhBua,KAAKk4E,eAAel4E,KAAKyI,QAAQpmB,MAAOwxG,EAAUjyG,MAAOgyG,EAAOhyG,MAAO6D,EAAWiuG,EAAe1zF,KAAKyI,QAAQ2L,aAAc2/E,EAAUnyG,MAAOkyG,EAAOlyG,OACpJoe,KAAKyyF,gBAeThE,EAAgBtsG,UAAU+1F,eAAiB,SAAUrzC,EAAWovD,EAAeC,EAAYzuG,EAAW+M,EAAW4hB,EAAc+/E,EAAgBC,GAC3I,GAGIxM,GAHA75F,EAAMiS,KAAKzV,OAAOiN,iBAAmBwI,KAAKzV,OAAOiN,iBAAiBqtC,GAAa7kC,KAAKyI,QAAQlmB,OAC5FF,EAAQ2d,KAAK0K,gBAAgB3c,GAAOA,EAAIzF,gBAAkBu8C,EAC1D8iD,IAEJA,GAAMzjG,MACF7B,MAAOA,EACPoD,UAAWA,EACX+M,UAAWA,EACX4hB,aAAcA,EACd7hB,SAAU0hG,EACVryG,MAAOsyG,EACPvwG,KAAMqc,KAAKyI,QAAQ9kB,MAEvB,IAAIuiC,IACAxjB,SAAU1C,KAAMy/B,QAASz/B,KAAKk4E,eAAgB5f,KAAMzzB,EAAWgmD,KAAMoJ,EAAenJ,KAAMoJ,EAAYnJ,KAAMtlG,EAC5GulG,KAAMx4F,EAAWy4F,KAAM72E,EAAcigF,KAAMF,EAAgBG,KAAMF,EAAantE,QAAQ,EAG1F,IADAjnB,KAAKzV,OAAOsoB,OAAOm3E,GAAoB9jE,IACnCA,EAAIe,OAAR,CAGA2gE,EAAa,GAAI10F,aAAU7Q,EAAO4xG,EAAc9rG,cAAe+rG,GAAa1hG,EAAW4hB,GAClF5xB,oBAAkB4xG,IAAiB5xG,oBAAkB2xG,KACtDxM,EAAMzjG,MACF7B,MAAOA,EACPoD,UAAWA,EACX+M,UAAWA,EACX4hB,aAAcA,EACd7hB,SAAU4hG,EACVvyG,MAAOwyG,EACPzwG,KAAMqc,KAAKyI,QAAQ9kB,OAGvBikG,EAAaA,EAAWniG,GAAWpD,EAAO8xG,EAAehsG,cAAeisG,GAAc5hG,EAAW4hB,GAErG,IAAIllB,IACAL,OAAQ,YAAag5F,iBAAkBF,EAAOtlG,MAAO2d,KAAKyI,QAAQpmB,MAClEuR,YAAag0F,EAAYa,gBAAiBd,EAE1C3nF,MAAK0K,gBAAgB3c,GACrBiS,KAAK0nF,iBAAiBx4F,EAAMy4F,EAAOC,GAGnC5nF,KAAKyI,QAAQg3B,QAAQvwC,KAI7Bu/F,EAAgBtsG,UAAUoyG,iBAAmB,SAAUhyG,EAAQ0K,EAAOunG,EAAWz+E,EAAY0+E,GACzF,GAAIC,GAAe10F,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,iBAChEmE,GAAMnB,YAAY4oG,EAClB,IAAIC,GAAW30F,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,eAC5D4rG,GAAa5oG,YAAY6oG,EACzB,IAAIC,GAAU50F,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,mBACxDy6C,GAAa/gD,oBAAkBD,IAAWkL,EAAelL,GACzD6vG,GAAoB5vG,oBAAkBD,IAAWoL,EAAkBpL,GACnEsyG,EAAY70F,KAAKzV,OAChBkC,cAAc,SAAWjC,GAAI+4C,EAAY6uD,EAAmBoC,EAAYjyG,EAASiyG,GACtFI,GAAQ9oG,YAAY+oG,GACpBF,EAAS7oG,YAAY8oG,EACrB,IAAIzK,GAAOnqF,KAAKyI,QAAQ9kB,KAAO,WAC3BmxG,EAAiB90F,KAAK2uF,sBAAsBxE,EAChDnqF,MAAK6xF,SAAWiD,CAChB,IAAIC,GAAgB/0F,KAAKg1F,gBAAgBh1F,KAAKyI,QAAQlmB,OAAQwzB,EAAY0+E,GAEtEQ,EAAW,EACXj1F,MAAKywF,YACLwE,EAAWj1F,KAAKywF,SAAS5lF,KAAKxf,MAAM,GAAI,MACvB2U,KAAKsoF,kBAAkB,kBACpCyM,EAAgBN,EAAUQ,MAAWloG,IAErCkoG,IAAaj1F,KAAKsoF,kBAAkB,aACpCyM,EAAgB/0F,KAAKsoF,kBAAkBmM,EAAU,qBAAuB,oBAGhF,IAAI1mG,GAAMiS,KAAKyI,QAAQlmB,MAWvB,OAVAyd,MAAK8yF,SAAW,GAAIoC,gBAAajuG,GAC7B+K,WAAY8iG,EACZlqF,QAAUC,KAAM,OAAQjpB,MAAO,SAC/BipB,KAAMkqF,EACN7oD,KAAMlsC,KAAKm1F,aAAa9hF,KAAKrT,MAC7BkC,UAAWlC,KAAKzV,OAAO2X,UACvBkzF,OAAQp1F,KAAKq1F,oBAAoBhiF,KAAKrT,OACvCjS,EAAIuL,OAAOqR,SACd3K,KAAK8yF,SAASr4D,SAASo6D,IAEdH,aAAcA,EAAcniG,SADtByN,KAAKs1F,iBAAiBP,KAGzCtG,EAAgBtsG,UAAUgzG,aAAe,SAAUjmG,GAC/CA,EAAKrF,MAAMe,QAAQvB,MAAMqH,QAAUsP,KAAK7P,UAAUO,OAAS,GAAGT,YAElEw+F,EAAgBtsG,UAAUkzG,oBAAsB,SAAUnmG,GAClDA,EAAKtE,QAAQJ,GAAG0jE,SAAS,kBACzBluD,KAAKi0F,cAAgB/kG,EAAKtN,MAAMqO,WAGhC+P,KAAKm0F,eAAiBjlG,EAAKtN,MAAMqO,YAMzCw+F,EAAgBtsG,UAAUs1F,gBAAkB,WACxC,OAASwc,cAAej0F,KAAKi0F,cAAeE,eAAgBn0F,KAAKm0F,eAAgB9xG,MAAO2d,KAAKyI,QAAQpmB,QAEzGosG,EAAgBtsG,UAAUmzG,iBAAmB,SAAUzqF,GACnD,GAAI0qF,GAAgB,GAAItjG,eAAY+N,KAAK6xF,UAAUp/F,cAAa,GAAIX,UAAQO,MAAM,OAAQ,QAASwY,GACnG,OAAQroB,qBAAkB+yG,EAAc,IAA+B,GAAzBA,EAAc,GAAG3zG,OAEnE6sG,EAAgBtsG,UAAU6yG,gBAAkB,SAAUjnG,EAAKgoB,EAAY0+E,GACnE,GAAIliG,EAYJ,OAVIA,GADAwjB,GAAcA,EAAW3yB,OAAS,EACD,IAAtB2yB,EAAW3yB,OACjBqxG,EAAU1+E,EAAW,GAAGxjB,SAAWwjB,EAAW,GAAGxjB,SACjDkiG,EAAU1+E,EAAW,GAAGxjB,aAAWxF,GAEnC0nG,GAAwB,WAAb1mG,EAAIpK,OAAsBoK,EAAIuL,OAAO/G,SAC1C,aAGAkiG,EAAU1mG,EAAIuL,OAAO/G,UAAY,YAAUxF,GAEnDiT,KAAKw1F,gBAAgBjjG,IAEhCk8F,EAAgBtsG,UAAUqzG,gBAAkB,SAAUjjG,GAClD,GAAIgjG,GAAgB,GAAItjG,eAAY+N,KAAK6xF,UAAUp/F,cAAa,GAAIX,UAAQO,MAAM,QAAS,QAASE,GACpG,OAAQ/P,qBAAkB+yG,EAAc,IAA8B,GAAxBA,EAAc,GAAG1qF,MAEnE4jF,EAAgBtsG,UAAUsxG,eAAiB,SAAUlxG,EAAQ8wG,GACzD,GAAIt9E,GAAa/V,KAAKinF,kBAAkB1kG,GACpC0K,EAAQ+S,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,gBAC5DuqG,GAAcvnG,YAAYmB,EAC1B,IAAImZ,GAAWpG,KAAKzV,OAAOkC,cAAc,WACzC2Z,GAAS7f,UAAY,+DACrB0G,EAAMnB,YAAYsa,EAGlB,IAAI+jF,GAAOnqF,KAAKu0F,iBAAiBhyG,EAAQ0K,EAAO,iBAAkB8oB,GAAY,EAC9E/V,MAAKi0F,cAAgB9J,EAAK53F,SAE1ByN,KAAKy1F,gBAAgBlzG,EAAQ4nG,EAAM,kBAAmBp0E,GAAY,EAClE,IAAItwB,GAAYua,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,oBAC7DmE,GAAMnB,YAAYrG,GAElBua,KAAK01F,kBAAkBnzG,EAAQkD,EAAWswB,GAE1Co0E,EAAOnqF,KAAKu0F,iBAAiBhyG,EAAQ0K,EAAO,kBAAmB8oB,GAAY,GAC3E/V,KAAKm0F,eAAiBhK,EAAK53F,SAE3ByN,KAAKy1F,gBAAgBlzG,EAAQ4nG,EAAM,mBAAoBp0E,GAAY,IAEvE04E,EAAgBtsG,UAAUuzG,kBAAoB,SAAUnzG,EAAQid,EAAIuW,GAChE,GAAItU,GAAKzB,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,eAAgBwyB,OAAS7B,QAAW,MAC1Fja,GAAG1T,YAAY2V,EACf,IAAIk0F,GAAW31F,KAAKzV,OACfkC,cAAc,OAAS3D,UAAW,kBAAmBwyB,OAASjyB,MAAS,2BACxEk6C,GAAa/gD,oBAAkBD,IAAWkL,EAAelL,GACzD6vG,GAAoB5vG,oBAAkBD,IAAWoL,EAAkBpL,GAEnEqzG,EAAgB51F,KAAKzV,OAAOkC,cAAc,SAAWjC,GAAI+4C,EAAY6uD,EAAmB,uBAAyB7vG,EAAS,uBAAwB+4B,OAAS33B,KAAQ,WAEnKkyG,EAAiB71F,KAAKzV,OAAOkC,cAAc,SAAWjC,GAAI+4C,EAAY6uD,EAAmB,wBAA0B7vG,EAAS,wBAAyB+4B,OAAS33B,KAAQ,UAE1KgyG,GAAS7pG,YAAY8pG,GACrBD,EAAS7pG,YAAY+pG,GACrBp0F,EAAG3V,YAAY6pG,GACW,WAAtB31F,KAAKyI,QAAQ9kB,MACbqc,KAAK81F,gBAAgBvzG,EAAQid,EAAIiC,EAAI,cAAesU,EAIxD,IAAIi+E,GAAW,GAAI+B,gBAAcl5D,MAAO78B,KAAKsoF,kBAAkB,OAAQztF,KAAM,UAAWoiB,SAAU,mBAAoBlsB,SAAS,EAAMmR,UAAWlC,KAAKzV,OAAO2X,YAGxJ8zF,EAAU,GAAID,gBAAcl5D,MAAO78B,KAAKsoF,kBAAkB,MAAOztF,KAAM,UAAWoiB,SAAU,kBAAmB/a,UAAWlC,KAAKzV,OAAO2X,WAE1H,UADF6T,GAAoC,IAAtBA,EAAW3yB,OAAe2yB,EAAW,GAAGtwB,UAAY,QAE5EuuG,EAASjjG,SAAU,EACnBilG,EAAQjlG,SAAU,IAGlBilG,EAAQjlG,SAAU,EAClBijG,EAASjjG,SAAU,GAGvBijG,EAASv5D,SAASm7D,GAClBI,EAAQv7D,SAASo7D,IAGrBpH,EAAgBtsG,UAAU0wG,cAAgB,SAAUhoG,GAChD,IAAK,GAAIgF,GAAK,EAAGssC,EAAatxC,EAAUgF,EAAKssC,EAAW/4C,OAAQyM,IAAM,CAClE,GAAI/J,GAAMq2C,EAAWtsC,EACjB/J,KAAQA,EAAIoqB,aACZpqB,EAAI+nB,YAKhB4gF,EAAgBtsG,UAAUszG,gBAAkB,SAAUlzG,EAAQ4nG,EAAM8L,EAAWlgF,EAAY0+E,GACvF,GAAI7yG,GAAQoe,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,gBACzDqhG,GAAKuK,aAAa5oG,YAAYlK,EAC9B,IAAI2hD,IAAa/gD,oBAAkBD,IAAWkL,EAAelL,GACzD6vG,GAAoB5vG,oBAAkBD,IAAWoL,EAAkBpL,GACnE2zG,EAAWl2F,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,oBACzDqtG,EAAgBn2F,KAAKyI,QAAQq8B,gBAAgBnyC,KAAK,SAAU5E,GAAO,MAAOxL,KAAWwL,EAAI1L,QACzF+zG,EAAiBp2F,KAAKyI,QAAQq8B,gBAAgBxrC,OAAO,SAAUvL,GAAO,MAAOA,GAAI1L,QAAUE,GAC/F,IAAIyd,KAAKyI,QAAQlmB,OAAOkoB,eAAgB,CACpC,GAAInoB,MACA+zG,EAAYr2F,KAAKyI,QAAQlmB,MACzB4zG,IAAiBF,IACjB3zG,EAAO0d,KAAKs2F,mBAAmBL,EAAW3zG,EAAM+zG,EAAWtgF,EAAYqgF,GAE3E,IAAI76D,GAAkBv7B,KAAKzV,OAAOkhB,SAA2D,gBAAxCzL,MAAKyI,QAAQlmB,sBAC9Dy9C,EAAShgC,KAAKzV,OAAOK,QAAQJ,GAAK6rG,EAAU1qG,IAAM,gBAClD4vC,IACAv7B,KAAKyI,QAAQlmB,OAAOknB,oBAAoBnnB,EAAM0d,KAAKzV,OAAQ,iBAAkBy1C,EAAQ,KAAM,KAAMk2D,GACjGl2F,KAAKzV,OAAOihC,mBAIZ5/B,EAAesqG,EADDl2F,KAAKyI,QAAQlmB,OAAOknB,oBAAoBnnB,EAAM0d,KAAKzV,OAAQ,iBAAkBy1C,IAG3FzwC,cACA2mG,EAASrqG,SAAS,GAAGpB,UAAUqE,IAAImnG,GAC/Bj2F,KAAKsyF,OAAOlsG,iBAAiB,iBAAiBhD,OAAS,GACvDqqC,uBAAqBuS,EAAQ,iBAAkBq2D,IAInDH,EAAS5vG,cAAc,SAASkE,GAAK+4C,EAAY6uD,EAAmB6D,EAAY1zG,EAAS0zG,EAE7Fr0G,EAAMkK,YAAYoqG,OAEjB,CACD,GAAIK,GAAav2F,KAAKzV,OACjBkC,cAAc,SAAWjC,GAAI+4C,EAAY6uD,EAAmB6D,EAAY1zG,EAAS0zG,GACtFC,GAASpqG,YAAYyqG,GACrB30G,EAAMkK,YAAYoqG,EAClB,IAAIM,OAAU,GACV/wG,MAAY,EACZswB,IAAcA,EAAW3yB,OAAS,IAIlCozG,GAHA/wG,EAAkC,IAAtBswB,EAAW3yB,OAClBqxG,EAAU1+E,EAAW,GAAKA,EAAW,GACrC0+E,EAAU1+E,EAAW,OAAKhpB,KACPtH,EAAU8M,WAAa43F,EAAK53F,SAAY9M,EAAU7D,UAAQmL,GAC9EvK,oBAAkBg0G,KAClBA,MAAUzpG,MAId+hG,OAAU9uF,KAAKy2F,mBAAmBpjF,KAAKrT,MACvC6uF,OAAU7uF,KAAK02F,qBAAqBrjF,KAAKrT,MACzCgX,KAAQhX,KAAK22F,WAAWtjF,KAAKrT,MAC7B+uF,SAAY/uF,KAAK42F,eAAevjF,KAAKrT,OAEnCA,KAAKyI,QAAQ9kB,MAAMqc,KAAKyI,QAASlmB,EAAQg0G,EAAYC,EAASx2F,KAAKzV,OAAO2X,aAIxFusF,EAAgBtsG,UAAUm0G,mBAAqB,SAAUL,EAAW3zG,EAAM+zG,EAAWtgF,EAAYqgF,GAC7F,GAAIS,GAA0B,oBAAdZ,EAAkC,EAAI,CACtD,IAAkB,oBAAdA,GAAmCG,EAAehzG,OAAS,EAAG,CAC9Dd,GAASC,OAAQwzB,YAAsB3pB,OAAQ2pB,EAAW8gF,GAAa9gF,EACvE,IAAImM,GAAOliB,KAAKyI,QAAQlmB,OAAO4P,YAAcikG,EAAehzG,OAAS,EACtB,IAA1C4c,KAAKyI,QAAQlmB,OAAO4P,WAAW/O,OAAe,EAAI,EAAKyzG,CAC5Dv0G,GAAK0d,KAAKyI,QAAQpmB,OAASg0G,EAAU/tG,gBAAkB0X,KAAKyI,QAAQlmB,OAAO4P,WAAW+vB,GAAMm0E,EAAU/tG,iBAClG8tG,EAAel0E,GAAMtgC,MACrBoe,KAAKyI,QAAQngB,kBACbhG,EAAK0d,KAAKyI,QAAQngB,iBAAmB0X,KAAKyI,QAAQlmB,OAAO4P,WAAW+vB,GAAMm0E,EAAU/tG,kBAG5F,MAAOhG,IAGXmsG,EAAgBtsG,UAAU2zG,gBAAkB,SAAUvzG,EAAQid,EAAIhN,EAAWyjG,EAAWlgF,GAEpF,GAAI+gF,GAAe92F,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,sBAAuBwyB,OAASjyB,MAAS,2BACtGk6C,GAAa/gD,oBAAkBD,IAAWkL,EAAelL,GACzD6vG,GAAoB5vG,oBAAkBD,IAAWoL,EAAkBpL,GACnEw0G,EAAiB/2F,KAAKzV,OAAOkC,cAAc,SAAWjC,GAAI+4C,EAAY6uD,EAAmB6D,EAAY1zG,EAAS0zG,EAAW36E,OAAS33B,KAAQ,aAC9ImzG,GAAahrG,YAAYirG,GACzBvkG,EAAU1G,YAAYgrG,EACtB,IAAIN,MAAUzgF,GAAcA,EAAW3yB,OAAS,KAC3C2yB,GAAoC,IAAtBA,EAAW3yB,OAAe2yB,EAAW,GAAGvjB,UAAYujB,EAAW,GAAGvjB,UAGtE,IAAIwkG,aACfn6D,MAAO78B,KAAKsoF,kBAAkB,aAC9BpmF,UAAWlC,KAAKzV,OAAO2X,UAAWnR,QAASylG,IAGtC/7D,SAASs8D,IAGtBtI,EAAgBtsG,UAAUw0G,WAAa,SAAUluF,EAASlmB,EAAQ00G,EAAYrD,EAAQsD,GAClF,GAAI5nG,GAASmF,GAAoBgU,EAAQnZ,OAAQmZ,EAAQ9kB,KACzDqc,MAAK+yF,WAAa,GAAIoE,cAAWlwG,GAC7BqI,OAAQA,EACR2tB,SAAU,iBACVhb,YAAajC,KAAKsoF,kBAAkB,+BACpC5/F,MAAO,OACPwZ,UAAWg1F,EACXt1G,MAAO,GAAIuR,MAAKygG,GAChB5nD,OAAQhsC,KAAKzV,OAAOyhD,QACrBvjC,EAAQlmB,OAAO+W,OAAOqR,SACzB3K,KAAK+yF,WAAWt4D,SAASw8D,IAG7BxI,EAAgBtsG,UAAUy0G,eAAiB,SAAUnuF,EAASlmB,EAAQ00G,EAAYrD,EAAQsD,GACtF,GAAI5nG,GAASmF,GAAoBgU,EAAQnZ,OAAQmZ,EAAQ9kB,KACzDqc,MAAKgzF,eAAiB,GAAIoE,kBAAenwG,GACrCqI,OAAQA,EACR2tB,SAAU,iBACVhb,YAAajC,KAAKsoF,kBAAkB,+BACpC5/F,MAAO,OACPwZ,UAAWg1F,EACXt1G,MAAO,GAAIuR,MAAKygG,GAChB5nD,OAAQhsC,KAAKzV,OAAOyhD,QACrBvjC,EAAQlmB,OAAO+W,OAAOqR,SACzB3K,KAAKgzF,eAAev4D,SAASw8D,IAEjCxI,EAAgBtsG,UAAUk1G,eAAiB,SAAUr0G,GACjDA,EAAE0C,OAASqK,EAAqB/M,EAAE0C,SAGtC+oG,EAAgBtsG,UAAUu0G,qBAAuB,SAAUjuF,EAASlmB,EAAQ00G,EAAYrD,EAAQsD,GAC5Fl3F,KAAKkzF,cAAgB,GAAIoE,kBAAerwG,GACpCqI,OAAQmZ,EAAQnZ,OAChB2S,YAAajC,KAAKsoF,kBAAkB,2BACpCpmF,UAAWg1F,EACXt1G,MAAOgyG,EACP5nD,OAAQhsC,KAAKzV,OAAOyhD,QACrBvjC,EAAQlmB,OAAO+W,OAAOqR,SACzB3K,KAAKkzF,cAAcz4D,SAASw8D,IAGhCxI,EAAgBtsG,UAAUs0G,mBAAqB,SAAUhuF,EAASlmB,EAAQ00G,EAAYrD,EAAQsD,GAC1F,GAAIxuF,GAAQ1I,KACRu3F,EAASv3F,KAAKyI,QAAQlmB,OACtBmoB,EAAkB1K,KAAK0K,gBAAgB6sF,GACvCvlG,EAAa0Y,EAAkB6sF,EAAOvlG,WAAayW,EAAQzW,WAC3D4Y,GAAWhpB,MAAO8oB,EAAkB6sF,EAAOjvG,gBAAkB/F,GAC7D0wG,EAAS,GAAIuE,gBAAavwG,GAC1B+K,WAAYA,YAAsBC,eAAcD,EAAa,GAAIC,eAAYD,GAC7E4Y,OAAQA,EACR/Y,MAAOmO,KAAK0R,WACZ+lF,UAAW,YACXzrD,OAAQhsC,KAAKzV,OAAOyhD,OACpB/uB,SAAU,iBACVyzC,UAAU,EACV3c,MAAO,WACH,GAAIxQ,IAAa/gD,oBAAkBD,IAAWkL,EAAelL,GACzD6vG,GAAoB5vG,oBAAkBD,IAAWoL,EAAkBpL,GACnEm1G,EAAcn0D,EAAY6uD,EAAmB7vG,CACjD0wG,GAAO0E,WAAajvF,EAAM4pF,OAAOhsG,cAAc,IAAMoxG,GAChDT,EAAWzsG,KAAQktG,EAAc,kBAC9B,iBACA,oBAAoBvmB,cAAc,GAAGvvF,MAC7CqxG,EAAO9+E,WAA8B,WAAjB1L,EAAQ9kB,OACvB+kB,EAAM4pF,OAAOhsG,cAAc,IAAMoxG,EAAc,eAAevmB,cAAc,GAAGpgF,QAEpFkiG,EAAO0E,WAAcn1G,oBAAkBywG,EAAO0E,YAC1C,QADwD1E,EAAO0E,YAGvE11F,YAAajC,KAAKsoF,kBAAkB,2BACpCpmF,UAAWg1F,EACX5qF,eAAgB,SAAUtpB,GACtB,GAAIugD,IAAa/gD,oBAAkBD,IAAWkL,EAAelL,EAC7DS,GAAE0C,OAAS1C,EAAE0C,OAAO4T,OAAO,SAAUxT,EAAKgC,EAAO8c,GAC7C,MAAOA,GAAI7I,IAAI,SAAUkF,GACrB,MAAOsiC,GAAYviC,GAA4BiyF,EAAOroF,OAAOhpB,MAAOqf,GAC9DA,EAAUgyF,EAAOroF,OAAOhpB,SAC/B8F,QAAQ67C,EAAYviC,GAA4BiyF,EAAOroF,OAAOhpB,MAAOkE,GACpEA,EAAI4iB,EAAMuqF,OAAOroF,OAAOhpB,UAAYkG,KAGhD+iB,KAAM+oF,GACP2D,EAAOj+F,OAAOqR,QACjB,IAAI3Y,GAAc,UAAYA,GAAY,CACtC,GAAIo6F,GAAS7yF,IAAe6I,YAAa,uBAAyBpC,KAAK0R,WACvE1R,MAAKzV,OAAOotB,QzCjhBK,kByCihB2By0E,EAAO5yF,OACzC4yF,EAAOvyF,SACboc,QAAQS,KAAK,SAAU1zB,GACvBiwG,EAAOjhG,WAAa,GAAIC,eAAYjP,KAG5CiwG,EAAOx4D,SAASw8D,GAChBj3F,KAAKizF,OAASA,GAEXxE,GACTt5E,ICx1BE83D,GAAsB,WAKtB,QAASA,GAAK1iF,EAAQ+oB,EAAciyD,EAAe/iE,GAC/CxC,KAAK43F,gBAAiB,EACtB53F,KAAK63F,gBAAiB,EACtB73F,KAAK6+D,KAAO,GAAIxhC,IAChBr9B,KAAK83F,cAAgB,KACrB93F,KAAKzV,OAASA,EACdyV,KAAKsT,aAAeA,EACpBtT,KAAKulE,cAAgBA,EACrBvlE,KAAKhR,eAAiBwT,EACtBxC,KAAK+zC,MAAQvxC,EAAQpT,WAAW,SAChC4Q,KAAKghC,mBACLhhC,KAAK+3F,sBAqeT,MA9dA9qB,GAAK9qF,UAAUqmG,YAAc,WACzB,GACI1gG,GADAkwG,GAAiB31G,MAAO2d,KAAKkT,WAAY3H,UAAWvL,KAAKuL,WAEzD4vE,EAAQn7E,KAAKzV,OAAO7F,cAAcvB,QAClC+3F,GAAO,CACX,IAAKl7E,KAAK+3E,aAwBNjwF,EAAQkY,KAAKi4F,0BAA0Bj4F,KAAKkT,cAC/B,GACTlT,KAAKsT,aAAanwB,QAAQqiB,OAAO1d,EAAO,GAE5CkY,KAAKsT,aAAanwB,QAAQe,KAAK8zG,GAC/Bh4F,KAAKsT,aAAanwB,QAAU6c,KAAKsT,aAAanwB,YA5B9C,IAAKg4F,EAAM/3F,OAGN,CAED,IAAK,GADDkkD,MACK7jD,EAAI,EAAGsB,EAAMo2F,EAAM/3F,OAAQK,EAAIsB,EAAKtB,IAEzC,GADAqE,EAAQkY,KAAKi4F,0BAA0B9c,EAAM13F,GAAI6jD,GAC7CtnC,KAAKkT,aAAeioE,EAAM13F,GAC1By3F,GAAO,EACP5zC,EAAWpjD,KAAK8zG,OAEf,CACD,GAAIE,GAAOl4F,KAAKm4F,uBAAuBhd,EAAM13F,GAC7C6jD,GAAWpjD,MAAO7B,MAAO61G,EAAK71G,MAAOkpB,UAAW2sF,EAAK3sF,UAAW+vE,YAAa4c,EAAK5c,cAGrFJ,GACD5zC,EAAWpjD,KAAK8zG,GAEpBh4F,KAAKsT,aAAanwB,QAAUmkD,MAlB5BtnC,MAAKsT,aAAanwB,SAAW60G,EA6BrCh4F,MAAKzV,OAAOw6C,WACZ/kC,KAAKo4F,cAAgBp4F,KAAKkT,YAO9B+5D,EAAK9qF,UAAU6+D,iBAAmB,SAAUh+D,GACpCuM,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BtqC,EAAEgY,KAAO,KAEb,IAAI9L,GAAQ8Q,KAAKylB,UAEXrjB,YAAa,UAAWze,KAAMujC,KADhChU,WAAYlT,KAAKkT,WAAY3H,UAAWvL,KAAKuL,UAAWnJ,YAAa,UAAWze,KAAMujC,GAE1FlnB,MAAKylB,UAAW,EAChBzlB,KAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,EAAGkM,KASzD+9E,EAAK9qF,UAAU4qD,WAAa,SAAU75B,EAAY3H,EAAWwsE,GACzD,GAAIz0F,GAAO0c,KAAKzV,MAChB,KAA8D,IAA1DyV,KAAKzV,OAAOiN,iBAAiB0b,GAAYtK,cAA0B5I,KAAKzV,OAAOy2F,oBAE/E,WADAhhF,MAAKzV,OAAOyoB,IAAI,0BAA4BC,WAAYjT,KAAKmQ,gBAAiB+C,WAAYA,GAM9F,IAHK5vB,EAAKwmD,oBACNiuC,EAAcz0F,EAAKwmD,mBAEnB9pC,KAAK5R,kBAKL,WAJA9K,GAAKuvB,OAAOwlD,IACR31D,SAAU1C,KAAMy/B,QAASz/B,KAAK+sC,WAC9BurB,KAAMplD,EAAY23E,KAAMt/E,EAAWu/E,KAAM/S,GAIjD/3E,MAAKq4F,iBACLr4F,KAAKkT,WAAaA,EAClBlT,KAAKuL,UAAYA,EACjBvL,KAAK+3E,YAAcA,EACnB/3E,KAAKs4F,iBACQh1G,GAAKwyF,uBAAuB5iE,EACzClT,MAAKu4F,iBAAiBrlF,EAAY6kE,GAClC/3E,KAAKwoF,eAETvb,EAAK9qF,UAAU41G,oBAAsB,WAC7B/3F,KAAKhR,gBACLgR,KAAKhR,eAAeq/C,wBAAwBruC,KAAMA,KAAKzV,OAAOsW,iBAAkB4O,yBAAuB85B,SAG/G0jC,EAAK9qF,UAAUk2G,eAAiB,WAC5Br4F,KAAKw4F,eAAiB5yG,EAAcoa,KAAKsT,aAAanwB,SACtD6c,KAAKy4F,SAAWz4F,KAAKulE,eAEzB0H,EAAK9qF,UAAUu2G,gBAAkB,WAC7B14F,KAAK63F,gBAAiB,EACtB73F,KAAK+3E,aAAc,EACnB/3E,KAAKzV,OAAOoJ,eAAgB2f,cAAgBnwB,QAAS6c,KAAKw4F,kBAAoB,GAE9Ex4F,KAAKulE,cAAgBvlE,KAAKy4F,SAC1Bz4F,KAAK63F,gBAAiB,GAE1B5qB,EAAK9qF,UAAUo2G,iBAAmB,SAAUrlF,EAAY6kE,GACpD,IAAKA,EACD,GAAI/3E,KAAKzV,OAAOwe,cACZ,IAAK,GAAItlB,GAAI,EAAGsB,EAAMib,KAAKulE,cAAcniF,OAAQK,EAAIsB,EAAKtB,IAClDuc,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQsY,KAAKulE,cAAc9hF,IAAM,IACnEuc,KAAKulE,cAAc//D,OAAO/hB,EAAG,GAC7BsB,IACAtB,SAKRuc,MAAKulE,cAAc//D,OAAO,EAAGxF,KAAKulE,cAAcniF,OAGpD4c,MAAKulE,cAAc79E,QAAQwrB,GAAc,GACzClT,KAAKulE,cAAcrhF,KAAKgvB,IAMhC+5D,EAAK9qF,UAAUovE,kBAAoB,SAAUvuE,GACzC,GAAIA,EAAEwuC,SAAWxxB,KAAKmQ,gBAAtB,CAGA,GAAInQ,KAAK43F,eAAgB,CACrB,GAAI1oG,GAAO8Q,KAAKsT,aAAanwB,QAAQC,QACjC8vB,WAAYlT,KAAKkT,WAAY3H,UAAWvL,KAAKuL,UAAWnJ,YAAa,UACrEze,KAAMk+C,GAAoBngD,OAAQse,KAAK83F,cAAe7wE,QAAQ,IAE9D7kB,YAAa,UAAWze,KAAMk+C,GAAoB5a,QAAQ,EAC1DvlC,OAAQse,KAAK83F,cAEjB93F,MAAKzV,OAAOsoB,OAAOozB,GAAqB/2C,GAE5C8Q,KAAK24F,sBACL34F,KAAKs4F,kBACLt4F,KAAK44F,iBAET3rB,EAAK9qF,UAAUw2G,oBAAsB,WACjC34F,KAAKulE,cAAcniF,OAAS,CAE5B,KAAK,GADDy1G,GAAc74F,KAAKsT,aAAanwB,QAC3BM,EAAI,EAAGA,EAAIo1G,EAAYz1G,OAAQK,IAC/Bo1G,EAAYp1G,GAAG63F,aAChBt7E,KAAKulE,cAAcrhF,KAAK20G,EAAYp1G,GAAGpB,QAQnD4qF,EAAK9qF,UAAU6qD,aAAe,WAC1B,GAAI16B,GAAOtnB,EAAsBgV,KAAKsT,aAAanwB,QACnD,IAAI6c,KAAK5R,kBAEL,WADA4R,MAAKzV,OAAOsoB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAKgtC,cAG5E,KAAK,GAAIvpD,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACxCuc,KAAKi4E,iBAAiB3lE,EAAK7uB,GAAGpB,MAE9BkN,gBAAeyQ,KAAKzV,OAAO+iC,gBAC3BttB,KAAKsT,aAAanwB,QAAU6c,KAAKsT,aAAanwB,UAGtD8pF,EAAK9qF,UAAUiM,gBAAkB,WAC7B,MAAOA,GAAgB4R,KAAKzV,SAQhC0iF,EAAK9qF,UAAU81F,iBAAmB,SAAU51F,GACxC,GAAIiB,GAAO0c,KAAKzV,OACZ+nB,EAAOtS,KAAKsT,aAAanwB,OAC7B,MAAoB,IAAhBmvB,EAAKlvB,QAAgB4c,KAAKulE,cAAc79E,QAAQrF,GAAS,GAA7D,CAGA,GAAI2d,KAAK5R,kBAEL,WADA4R,MAAKzV,OAAOsoB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAKi4E,iBAAkB3f,KAAMj2E,GAGpG2d,MAAKq4F,iBACLr4F,KAAKs4F,iBACL,KAAK,GAAI70G,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACxC,GAAI6uB,EAAK7uB,GAAGpB,QAAUA,EAAO,CACzB,GAAIiB,EAAKylB,eAAiBzlB,EAAKoB,cAAcvB,QAAQuE,QAAQ4qB,EAAK7uB,GAAGpB,QAAU,EAC3E,QAEJ2d,MAAKulE,cAAc//D,OAAOxF,KAAKulE,cAAc79E,QAAQ4qB,EAAK7uB,GAAGpB,OAAQ,GACrEiwB,EAAK9M,OAAO/hB,EAAG,GACfuc,KAAKylB,UAAW,EACZzlB,KAAK63F,gBACL73F,KAAKzV,OAAOsoB,OAAOozB,IACf7jC,YAAa,UAAWze,KAAMk+C,GAAoBngD,OAAQse,KAAK83F,eAGvE,OAGR93F,KAAK44F,iBAET3rB,EAAK9qF,UAAU81G,0BAA4B,SAAU51G,EAAOkjF,GAExD,IAAK,GADDjzD,GAAOizD,GAAgCvlE,KAAKsT,aAAanwB,QACpDM,EAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACxC,GAAI6uB,EAAK7uB,GAAGpB,QAAUA,EAClB,MAAOoB,EAGf,QAAQ,GAMZwpF,EAAK9qF,UAAUguB,cAAgB,WAC3B,MAAO,QAEX88D,EAAK9qF,UAAU6qB,WAAa,WACxBhN,KAAKzV,OAAOstB,IAAI+O,GAAqB5mB,KAAKgN,WAE1C,MAAIzd,eAAcyQ,KAAKzV,OAAuB,mBAG1CyV,KAAKzV,OAAO2L,aAAa9S,QAAU4c,KAAKsT,aAAanwB,QAAQC,OAAQ,CACrE,GAAIE,GAAO0c,KAAKzV,MAChByV,MAAK43F,gBAAiB,EACtB53F,KAAK+3E,YAAc/3E,KAAKsT,aAAanwB,QAAQC,OAAS,CACtD,KAAK,GAAIyM,GAAK,EAAGkG,EAAKzS,EAAKgwB,aAAanwB,QAAQkI,QAASwE,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC3E,GAAI9B,GAAMgI,EAAGlG,EACTmQ,MAAKulE,cAAc79E,QAAQqG,EAAI1L,QAAU,GACzC2d,KAAK+sC,WAAWh/C,EAAI1L,MAAO0L,EAAIwd,WAAW,GAGlDvL,KAAK+3E,aAAc,EACnB/3E,KAAK43F,gBAAiB,IAM9B3qB,EAAK9qF,UAAU6+C,iBAAmB,WAC1BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,G1C6Na,wB0C7NkBpQ,KAAK+3F,oBAAqB/3F,MACrEA,KAAKzV,OAAO6lB,GAAGwW,GAAqB5mB,KAAKgN,WAAYhN,MACrDA,KAAKzV,OAAO6lB,G1C/HM,mB0C+HkBpQ,KAAKghD,iBAAkBhhD,MAC3DA,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKuxD,kBAAmBvxD,MACnEA,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKs0D,aAAct0D,MAChDA,KAAKzV,OAAO6lB,GAAGslB,GAAwB11B,KAAK84F,iBAAkB94F,MAC9DA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAK2N,WAAY3N,MACnDA,KAAKzV,OAAO6lB,G1CkDK,e0ClDkBpQ,KAAKy4D,iBAAkBz4D,QAK9DitE,EAAK9qF,UAAU8rD,oBAAsB,WAC7BjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,I1C6Ma,wB0C7MmB7X,KAAK+3F,qBACjD/3F,KAAKzV,OAAOstB,I1C9IM,mB0C8ImB7X,KAAKghD,kBAC1ChhD,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKuxD,mBACjDvxD,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKs0D,cACnCt0D,KAAKzV,OAAOstB,IAAI6d,GAAwB11B,KAAK84F,kBAC7C94F,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAK2N,YACxC3N,KAAKzV,OAAOstB,I1CmCK,e0CnCmB7X,KAAKy4D,oBAO7CwU,EAAK9qF,UAAU0rB,QAAU,WACrB7N,KAAK63F,gBAAiB,CACtB,IAAI52C,GAAcjhD,KAAKzV,OAAOK,OACzBq2D,KAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,qBAG3F0Z,KAAKzV,OAAOK,QAAQtE,cAAc,gBAAgBF,iBAAiB,iBAAiBhD,SACpF4c,KAAKzV,OAAOK,QAAQtE,cAAc,gBAAgB+C,MAAMC,QAAU,QAGjE0W,KAAKzV,OAAOwuG,YACb/4F,KAAKgtC,eAEThtC,KAAK63F,gBAAiB,EACtB73F,KAAKiuC,wBAETg/B,EAAK9qF,UAAUs2E,iBAAmB,SAAUz1E,GAClB,YAAlBA,EAAEof,cACFpC,KAAK04F,kBACL14F,KAAK84F,mBACL94F,KAAK+3E,aAAc,IAG3B9K,EAAK9qF,UAAUmyE,aAAe,SAAUtxE,GACpC,GAAIM,GAAO0c,KAAKzV,MAChByV,MAAK83F,cAAgB,KACrB93F,KAAKu0D,kBAAkBvxE,EACvB,IAAItB,GAAS2W,UAAQrV,EAAEtB,OAAQ,gBAC/B,IAAIA,IAAWsB,EAAEtB,OAAO+I,UAAUC,SAAS,oBACrChJ,EAAO+I,UAAUC,SAAS,eAC3B1H,EAAEtB,OAAO+I,UAAUC,SAAS,gBAC5B1H,EAAEtB,OAAO+I,UAAUC,SAAS,kBAC5B1H,EAAEtB,OAAO+I,UAAUC,SAAS,qBAC5BP,EAAanH,EAAEtB,OAAQ,0BACtB4B,EAAKi6D,gBAAkBj6D,EAAKylC,kBAAkBy0B,sBAC5Cx6D,EAAEtB,OAAO+I,UAAUC,SAAS,iBAAkB,CAClD,GACI6sG,GADSv3F,KAAKzV,OACEwpC,eAAeryC,EAAO4E,cAAc,oBAAoBokC,aAAa,iBACrFnf,EAAa7pB,EAAO0E,iBAAiB,gBAAgBhD,OACrD,aAD8D,WAE9C,cAAhBm0G,EAAO5zG,OACPqc,KAAKg5F,aAAat3G,EAAQsB,EAAGu0G,GACzB58F,UAAQ44C,UACRvzC,KAAKi5F,UAAUj2G,IAO3B,GAHItB,GACAA,EAAO+I,UAAU5I,OAAO,aAExBsI,EAAanH,EAAEtB,OAAQ,sBACvByI,EAAanH,EAAEtB,OAAQ,sBAAuB,CAC9C,GAAIw3G,GAAS7gG,UAAQrV,EAAEtB,OAAQ,mBAAmBgpC,aAAa,OAC3Dnf,EAAY/oB,oBAAkB2H,EAAanH,EAAEtB,OAAQ,uBACrD,YAAc,YAClBse,MAAK+sC,WAAWzpD,EAAKywC,eAAemlE,GAAQ72G,MAAOkpB,GAAW,KAGtE0hE,EAAK9qF,UAAUwrB,WAAa,SAAU3qB,GAClC,GAAI8Q,GAAM9Q,EAAEtB,MACZ,KAAKse,KAAKzV,OAAOuxB,SAAwB,UAAb94B,EAAE6L,QAAmC,cAAb7L,EAAE6L,QAAuC,eAAb7L,EAAE6L,SAC3EwJ,UAAQvE,EAAK,iBAAkB,CAClC,GAAIpS,GAASse,KAAK+zC,MAAM4C,mBACxB,IAAIn0D,oBAAkBd,KAAYA,EAAO+I,UAAUC,SAAS,kBACpDhJ,EAAO4E,cAAc,oBACzB,MAEJ,IAAIyH,GAAMiS,KAAKzV,OAAOwpC,eAAeryC,EAAO4E,cAAc,oBAAoBokC,aAAa,gBAC3F1qB,MAAKg5F,aAAat3G,EAAQsB,EAAG+K,KAGrCk/E,EAAK9qF,UAAU62G,aAAe,SAAUt3G,EAAQsB,EAAGT,GAC/C,GAAIe,GAAO0c,KAAKzV,OACZlI,EAAQE,EAAOF,KACnB2d,MAAK83F,cAAgB90G,EAAEtB,MACvB,IAAI6pB,GAAa7pB,EAAO0E,iBAAiB,gBAAgBhD,OACrD,aAD8D,WAE9DJ,GAAE2oE,UAAa3rD,KAAKsT,aAAa6lF,aAAez3G,EAAO0E,iBAAiB,iBAAiBhD,UACpFE,EAAKoB,cAAcvB,QAAQuE,QAAQrF,IAAU,IAClD2d,KAAKi4E,iBAAiB51F,GAClBkN,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BttB,KAAKsT,aAAanwB,QAAU6c,KAAKsT,aAAanwB,UAIlD6c,KAAK+sC,WAAW1qD,EAAOkpB,EAAWvoB,EAAE0oE,SAAW1rD,KAAKo5F,uBACJ,IAA3C5+C,UAAUuX,UAAUrqE,QAAQ,WAAoB1E,EAAE05E,UAG/DuQ,EAAK9qF,UAAU82G,UAAY,SAAUj2G,GACjC,GAAItB,GAAS2W,UAAQrV,EAAEtB,OAAQ,kBAC3Bse,KAAKzV,OAAOu/C,mBAAuBtnD,oBAAkBd,KAAWse,KAAKzV,OAAOy2F,qBAC5Ep4F,EAAkBoX,KAAKzV,OAAOK,QAAQtE,cAAc,gBAAiBtD,EAAG,0CAA4Cgd,KAAKulE,cAAcniF,OAAS,EAAI,iBAAmB,MAG/K6pF,EAAK9qF,UAAUoyE,kBAAoB,SAAUvxE,GACzC,GAAItB,GAASsB,EAAEtB,MACX2W,WAAQ3W,EAAQ,kBAAoBsB,EAAEtB,OAAO+I,UAAUC,SAAS,cAChE2N,UAAQ3W,EAAQ,gBACZA,EAAO+I,UAAUC,SAAS,kBACrBhJ,EAAO+I,UAAUC,SAAS,kBAK3BhJ,EAAO+I,UAAU5I,OAAO,iBACxBme,KAAKo5F,sBAAuB,EAC5Bp5F,KAAKzV,OAAOK,QAAQtE,cAAc,gBAAgB+C,MAAMC,QAAU,SANlE5H,EAAO+I,UAAUqE,IAAI,iBACrBkR,KAAKo5F,sBAAuB,IAUpCp5F,KAAKzV,OAAOK,QAAQtE,cAAc,gBAAgB+C,MAAMC,QAAU,QAG1E2jF,EAAK9qF,UAAUy2G,aAAe,WAM1B,IAAK,GAJD1wD,GACAmxD,EAFA/1G,EAAO0c,KAAKzV,OAGZ+nB,EAAOtS,KAAKsT,aAAanwB,QACzBw3F,EAAa36E,KAAKzV,OAAO2L,aAAa6F,IAAI,SAAU9T,GAAK,MAAOA,GAAE5F,QAC7DoB,EAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACxCykD,EAAS5kD,EAAKwyF,uBAAuBxjE,EAAK7uB,GAAGpB,QACF,IAAvCs4F,EAAWjzF,QAAQ4qB,EAAK7uB,GAAGpB,QAAiBG,oBAAkB0lD,KAGlEloC,KAAK6+D,KAAKnhC,QAAQwK,EAAQ51B,EAAK7uB,GAAG8nB,WAC9BvL,KAAK+3E,aAAezlE,EAAKlvB,OAAS,GAClC8kD,EAAO5hD,cAAc,oBAAoBizC,aAAav5B,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,eAAgBvC,WAAY9C,EAAI,GAAGwM,aAAei4C,EAAO5hD,cAAc,kBAEhL+yG,EAAgBnxD,EAAO5hD,cAAc,oBACX,cAAtBgsB,EAAK7uB,GAAG8nB,UACR9gB,YAAU4uG,GAAgB,cAAe,wBAGzC5uG,YAAU4uG,GAAgB,eAAgB,2BAItDpsB,EAAK9qF,UAAUm2G,gBAAkB,SAAUrvG,GAKvC,IAAK,GAHDi/C,GADA5kD,EAAO0c,KAAKzV,OAEZ+nB,EAAOtS,KAAKsT,aAAanwB,QACzBw3F,EAAa36E,KAAKzV,OAAO2L,aAAa6F,IAAI,SAAU9T,GAAK,MAAOA,GAAE5F,QAC7DoB,EAAIwF,GAAsB,EAAGlE,EAAOvC,oBAAkByG,GAA2BqpB,EAAKlvB,OAApB6F,EAAW,EAAiBxF,EAAIsB,EAAKtB,IAC5GykD,EAAS5kD,EAAKwyF,uBAAuBxjE,EAAK7uB,GAAGpB,OACzCG,oBAAkB0lD,IAAY5kD,EAAKylB,eAAiBzlB,EAAKoB,cAAcvB,QAAQuE,QAAQ4qB,EAAK7uB,GAAGpB,QAAU,IACxG6lD,EAAO5hD,cAAc,sBAGiB,IAAvCq0F,EAAWjzF,QAAQ4qB,EAAK7uB,GAAGpB,SAG/B2d,KAAK6+D,KAAKnhC,QAAQwK,EAAQ,QAC1Bz9C,YAAUy9C,EAAO5hD,cAAc,wBAA0B,eAAgB,oBAAqB,cAAe,qBACzG4hD,EAAO5hD,cAAc,kBACrB4hD,EAAO5hD,cAAc,oBAAoBuG,YAAYq7C,EAAO5hD,cAAc,oBAItF2mF,EAAK9qF,UAAUg2G,uBAAyB,SAAU91G,GAC9C,IAAK,GAAIoB,GAAI,EAAGsB,EAAMib,KAAKsT,aAAanwB,QAAQC,OAAQK,EAAIsB,EAAKtB,IAC7D,GAAIuc,KAAKsT,aAAanwB,QAAQM,GAAGpB,QAAUA,EACvC,MAAO2d,MAAKsT,aAAanwB,QAAQM,EAGzC,QAAO,GAEXwpF,EAAK9qF,UAAUm3G,eAAiB,WAE5B,IAAK,GADD3e,GAAa36E,KAAKzV,OAAO2L,aAAa6F,IAAI,SAAU9T,GAAK,MAAOA,GAAE5F,QAC7DwN,EAAK,EAAGkG,EAAKiK,KAAKulE,cAAe11E,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC5D,GAAI9B,GAAMgI,EAAGlG,EACb,KAAiC,IAA7B8qF,EAAWjzF,QAAQqG,GAAvB,CAGA,GAAIm6C,GAASloC,KAAKzV,OAAOurF,uBAAuB/nF,EAChDiS,MAAK6+D,KAAKnhC,QAAQwK,EAAQloC,KAAKm4F,uBAAuBpqG,GAAKwd,cAGnE0hE,EAAK9qF,UAAU22G,iBAAmB,SAAUnuF,OACzB,KAAXA,IAAqBA,GAAWzb,MAAQ0G,UAAU,KACjD+U,EAAOzb,KAAK0G,WACboK,KAAKs4F,kBACLt4F,KAAK+3E,aAAc,EACnB/3E,KAAKs4F,kBACLt4F,KAAK44F,eACL54F,KAAK+3E,aAAc,EACnB/3E,KAAKs5F,mBAQbrsB,EAAK9qF,UAAU8iG,iBAAmB,WAC9BjlF,KAAKuuC,yBAAyBhE,wBAE3B0iC,KC1fPssB,GAAkC,WAKlC,QAASA,GAAiBn3D,GACtBpiC,KAAKoiC,YAAcA,EAsRvB,MAhRAm3D,GAAiBp3G,UAAUohB,OAAS,WAChCvD,KAAKw5F,aAAex5F,KAAKoiC,YAAYx3C,QACrCoV,KAAKy5F,yBACLz5F,KAAK05F,sBACL15F,KAAK0gD,cAKT64C,EAAiBp3G,UAAUu5B,QAAU,WACjC1b,KAAKoiC,YAAYu3D,mBACb35F,KAAK45F,MAAMx2G,QACX4c,KAAK65F,kBAET75F,KAAK85F,gBAMTP,EAAiBp3G,UAAUu3G,oBAAsB,WAC7C,GAAIK,GACA13D,EAAWriC,KAAKoiC,YAChBlxC,EAAMmxC,EAASz3C,QAAQtE,cAAc,uBACrCgjC,EAAOnjC,SAASojC,wBACpBr4B,GAAI3K,UAAY,EAChB,KAAK,GAAI9C,GAAI,EAAGA,GAAK4+C,EAAS1vB,UAAWlvB,IACrCs2G,EAAOttG,gBAAc,KACjB3D,UAAW,iDACXwyB,OAASC,KAAM,OAAQ0f,SAAU,KAAMoiC,aAAc,aAAe55E,EAChEu2G,KAAM,sBAAuBn/F,KAAM,YAAcpX,KAErD4+C,EAAS/sC,cAAgB7R,GACzBgH,YAAUsvG,GAAO,gBAAiB,aAAc,oBAEpDzwE,EAAKx9B,YAAYiuG,EAErB7oG,GAAIpF,YAAYw9B,GAChBtpB,KAAK45F,SAAWvuG,MAAMC,KAAK4F,EAAIi/B,aAMnCopE,EAAiBp3G,UAAUu+D,WAAa,WACpC9W,eAAa96C,IAAIkR,KAAKw5F,aAAc,QAASx5F,KAAKs0D,aAAct0D,OAMpEu5F,EAAiBp3G,UAAU4tF,aAAe,WACtCnmC,eAAa/nD,OAAOme,KAAKoiC,YAAYx3C,QAAS,QAASoV,KAAKs0D,eAQhEilC,EAAiBp3G,UAAU0rB,QAAU,WACjC7N,KAAK+vE,gBAETwpB,EAAiBp3G,UAAUs3G,uBAAyB,WAChDz5F,KAAKpV,QAAU6B,gBAAc,OACzB3D,UAAW,mBAAoBwyB,OAASC,KAAQ,gBAEpDvb,KAAKi6F,iBAAiBj6F,KAAKpV,SAC3BoV,KAAKk6F,mBAAmBl6F,KAAKpV,SAC7BoV,KAAKpV,QAAQkB,YAAYW,gBAAc,OAAS3D,UAAW,wBAC3DkX,KAAKm6F,mBAAmBn6F,KAAKpV,SAC7BoV,KAAKo6F,gBAAgBp6F,KAAKpV,SAC1BoV,KAAKoiC,YAAYx3C,QAAQkB,YAAYkU,KAAKpV,UAE9C2uG,EAAiBp3G,UAAU83G,iBAAmB,SAAUI,GACpDr6F,KAAK7Y,MAAQsF,gBAAc,OACvB3D,UAAW,+BACXwyB,OACI8sB,MAAO74C,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,oBACnDtoF,KAAKoiC,YAAYkmD,kBAAkB,oBACvCjrB,aAAc9tE,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,oBAC1DtoF,KAAKoiC,YAAYkmD,kBAAkB,oBACvCrtD,SAAU,QAGlBj7B,KAAKsiB,KAAO71B,gBAAc,OACtB3D,UAAW,6BACXwyB,OACI8sB,MAAO74C,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,uBACnDtoF,KAAKoiC,YAAYkmD,kBAAkB,uBACvCjrB,aAAc9tE,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,uBAC1DtoF,KAAKoiC,YAAYkmD,kBAAkB,uBACvCrtD,SAAU,QAGlB6gD,UAAQ97E,KAAK7Y,MAAO6Y,KAAKsiB,MAAO+3E,IAEpCd,EAAiBp3G,UAAU+3G,mBAAqB,SAAUG,GACtD,GAAIC,GAAY7tG,gBAAc,MAC9BuT,MAAKu6F,GAAK9tG,gBAAc,KACpB3D,UAAW,wBAAyBvC,UAAW,MAC/C+0B,OACI8sB,MAAO74C,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,wBACnDtoF,KAAKoiC,YAAYkmD,kBAAkB,wBAAyB/sE,KAAM,OACtE8hD,aAAc9tE,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,wBAC1DtoF,KAAKoiC,YAAYkmD,kBAAkB,wBACvCrtD,SAAU,KACVpgC,KAAMtL,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,wBAClDtoF,KAAKoiC,YAAYkmD,kBAAkB,wBACvC0R,KAAM,yBAGdM,EAAUxuG,YAAYkU,KAAKu6F,IAC3BF,EAAevuG,YAAYwuG,IAE/Bf,EAAiBp3G,UAAUg4G,mBAAqB,SAAUE,GACtD,GAAIG,GAAY/tG,gBAAc,MAC9BuT,MAAKy6F,GAAKhuG,gBAAc,KACpB3D,UAAW,wBACXvC,UAAW,MAAO+0B,OACd8sB,MAAO74C,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,oBACnDtoF,KAAKoiC,YAAYkmD,kBAAkB,oBAAqB/sE,KAAM,OAClE8hD,aAAc9tE,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,oBAC1DtoF,KAAKoiC,YAAYkmD,kBAAkB,oBACvCrtD,SAAU,KACVpgC,KAAMtL,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,oBAClDtoF,KAAKoiC,YAAYkmD,kBAAkB,oBACvC0R,KAAM,yBAGdQ,EAAU1uG,YAAYkU,KAAKy6F,IAC3BJ,EAAevuG,YAAY0uG,IAE/BjB,EAAiBp3G,UAAUi4G,gBAAkB,SAAUC,GACnDr6F,KAAK6yB,KAAOpmC,gBAAc,OACtB3D,UAAW,6BACXwyB,OACI8sB,MAAO74C,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,mBACnDtoF,KAAKoiC,YAAYkmD,kBAAkB,mBACvCjrB,aAAc9tE,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,mBAC1DtoF,KAAKoiC,YAAYkmD,kBAAkB,mBACvCrtD,SAAU,QAGlBj7B,KAAKquB,KAAO5hC,gBAAc,OACtB3D,UAAW,6BACXwyB,OACI8sB,MAAO74C,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,mBACnDtoF,KAAKoiC,YAAYkmD,kBAAkB,mBACvCjrB,aAAc9tE,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,mBAC1DtoF,KAAKoiC,YAAYkmD,kBAAkB,mBACvCrtD,SAAU,QAGlB6gD,UAAQ97E,KAAK6yB,KAAM7yB,KAAKquB,MAAOgsE,IAEnCd,EAAiBp3G,UAAUmyE,aAAe,SAAUtxE,GAChD,GAAIq/C,GAAWriC,KAAKoiC,YAChB1gD,EAASsB,EAAEtB,MAMf,OALA2gD,GAASq4D,eAAiBr4D,EAAS/sC,YAC9B5T,EAAO+I,UAAUC,SAAS,cAAiBlI,oBAAkBd,EAAOgpC,aAAa,YAClF2X,EAAS/sC,YAAc84B,SAAS1sC,EAAOgpC,aAAa,SAAU,IAC9D2X,EAAS0C,aAEN,GAEXw0D,EAAiBp3G,UAAU03G,gBAAkB,WACzC,GACIc,GACA/iB,EAFAv1C,EAAWriC,KAAKoiC,WAGpBC,GAAS/sC,YAAsC,IAAxB+sC,EAASu4D,WAAmB,EAAIv4D,EAAS/sC,YAC5D+sC,EAAS/sC,YAAc+sC,EAASu4D,YAAcv4D,EAASu4D,aACvDv4D,EAAS/sC,YAAc+sC,EAASu4D,YAEpCD,EAAiBvsE,UAAUiU,EAAS/sC,YAAc+sC,EAAS1vB,WAAW1iB,WAAY,IAC9EoyC,EAAS/sC,YAAc+sC,EAAS1vB,WAAc,GAAKgoF,EAAiB,IACpEA,GAAkC,EAEtC,KAAK,GAAIl3G,GAAI,EAAGA,EAAI4+C,EAAS1vB,UAAWlvB,KACpCm0F,EAAU+iB,EAAiBt4D,EAAS1vB,UAAa,EAAIlvB,IACvC4+C,EAASu4D,YACnB56F,KAAK45F,MAAMn2G,GAAG4F,MAAMC,QAAU,GAC9B0W,KAAK45F,MAAMn2G,GAAG1B,aAAa,QAAS61F,EAAO3nF,YAC3C+P,KAAK45F,MAAMn2G,GAAG8C,UAAa87C,EAASw4D,WAAiCx4D,EAASw4D,WAAajjB,EAA1CA,EAAO3nF,WACpDoyC,EAAS/sC,cAAgBsiF,EACzB53E,KAAK45F,MAAMn2G,GAAGgH,UAAUqE,IAAI,mBAG5BkR,KAAK45F,MAAMn2G,GAAGgH,UAAU5I,OAAO,qBAInCme,KAAK45F,MAAMn2G,GAAG8C,UAAa87C,EAASw4D,WAAiCx4D,EAASw4D,WAAajjB,EAA1CA,EAAO3nF,WACxD+P,KAAK45F,MAAMn2G,GAAG4F,MAAMC,QAAU,QAElCmB,YAAUuV,KAAK45F,MAAMn2G,OAAS,gBAAiB,YAEnDuc,MAAK7Y,MAAMpF,aAAa,QAAS,KACjCie,KAAKquB,KAAKtsC,aAAa,QAASsgD,EAASu4D,WAAW3qG,YACpD+P,KAAKsiB,KAAKvgC,aAAa,SAAUsgD,EAAS/sC,YAAc,GAAGrF,YAC3D+P,KAAK6yB,KAAK9wC,aAAa,SAAUsgD,EAAS/sC,YAAc,GAAGrF,YAC3D+P,KAAKw5F,aAAalzG,cAAc,aAAavE,aAAa,QAAS,KACnEie,KAAKw5F,aAAalzG,cAAc,YAAYvE,aAAa,QAASsgD,EAASu4D,WAAW3qG,YACtF+P,KAAKw5F,aAAalzG,cAAc,YAAYvE,aAAa,SAAUsgD,EAAS/sC,YAAc,GAAGrF,YAC7F+P,KAAKw5F,aAAalzG,cAAc,YAAYvE,aAAa,SAAUsgD,EAAS/sC,YAAc,GAAGrF,YAC7F+P,KAAKu6F,GAAGx4G,aAAa,SAAUqsC,SAASpuB,KAAK45F,MAAM,GAAGlvE,aAAa,SAAU,IAAM2X,EAAS1vB,WAAW1iB,YACvG+P,KAAKy6F,GAAG14G,aAAa,SAAUqsC,SAASpuB,KAAK45F,MAAM55F,KAAK45F,MAAMx2G,OAAS,GAAGsnC,aAAa,SAAU,IAAM,GAAGz6B,aAE9GspG,EAAiBp3G,UAAU23G,aAAe,WACtC95F,KAAK86F,yBACL96F,KAAK+6F,2BACL/6F,KAAKg7F,2BACLh7F,KAAKi7F,wBACDj7F,KAAK45F,MAAMx2G,QACXqH,YAAUuV,KAAK45F,OAAO55F,KAAKoiC,YAAY9sC,YAAc,GAAK0K,KAAKoiC,YAAYzvB,YAAa,gBAAiB,iBAGjH4mF,EAAiBp3G,UAAU24G,uBAAyB,WAChD,GAAII,IAAa,cAAe,mBAC5BC,GAAqB,sBAAuB,aAC5CC,GAAY,aAAc,mBAC1BC,GAAoB,qBAAsB,YAC1Cr7F,MAAKoiC,YAAYw4D,WAAa,GAAK56F,KAAKoiC,YAAY9sC,YAAc,GAClE7K,YAAUuV,KAAKsiB,KAAM84E,EAAUC,GAC/B5wG,YAAUuV,KAAK7Y,MAAO+zG,EAAWC,GACjC1wG,YAAUuV,KAAKw5F,aAAalzG,cAAc,aAAc40G,EAAWC,GACnE1wG,YAAUuV,KAAKw5F,aAAalzG,cAAc,YAAa80G,EAAUC,KAGjE5wG,YAAUuV,KAAKsiB,KAAM+4E,EAAkBD,GACvC3wG,YAAUuV,KAAK7Y,MAAOg0G,EAAmBD,GACzCzwG,YAAUuV,KAAKw5F,aAAalzG,cAAc,YAAa+0G,EAAkBD,GACzE3wG,YAAUuV,KAAKw5F,aAAalzG,cAAc,aAAc60G,EAAmBD,KAGnF3B,EAAiBp3G,UAAU44G,yBAA2B,WAC9C/6F,KAAKoiC,YAAY9sC,YAAc0K,KAAKoiC,YAAYzvB,UAChDloB,YAAUuV,KAAKu6F,IAAK,gBAAiB,oBAAqB,yBAA0B,cAGpF9vG,YAAUuV,KAAKu6F,IAAK,yBAA0B,cAAe,gBAAiB,qBAGtFhB,EAAiBp3G,UAAU64G,yBAA2B,WAClD,GAAI34D,GAAWriC,KAAKoiC,YAChB84D,EAAYl7F,KAAK45F,MAAM,GAAGrzG,UAAUqH,QAAQy0C,EAASw4D,WAAY,KAChEK,EAAU93G,SAAW4c,KAAK45F,MAAMx2G,QAAWgrC,SAAS8sE,EAAW,IAAM74D,EAAS1vB,UAAY0vB,EAASu4D,WACpGnwG,YAAUuV,KAAKy6F,IAAK,yBAA0B,cAAe,gBAAiB,oBAG9EhwG,YAAUuV,KAAKy6F,IAAK,gBAAiB,oBAAqB,yBAA0B,eAG5FlB,EAAiBp3G,UAAU84G,sBAAwB,WAC/C,GAAIK,IAAY,aAAc,mBAC1BC,GAAoB,qBAAsB,aAC1CC,GAAY,aAAc,mBAC1BC,GAAoB,qBAAsB,aAC1Cp5D,EAAWriC,KAAKoiC,WAChBC,GAAS/sC,cAAgB+sC,EAASu4D,YAA6C,IAA/Bv4D,EAASH,mBACzDz3C,YAAUuV,KAAKquB,KAAMktE,EAAkBD,GACvC7wG,YAAUuV,KAAK6yB,KAAM4oE,EAAkBD,GACvC/wG,YAAUuV,KAAKw5F,aAAalzG,cAAc,YAAai1G,EAAkBD,GACzE7wG,YAAUuV,KAAKw5F,aAAalzG,cAAc,YAAam1G,EAAkBD,KAGzE/wG,YAAUuV,KAAKquB,KAAMitE,EAAUC,GAC/B9wG,YAAUuV,KAAK6yB,KAAM2oE,EAAUC,GAC/BhxG,YAAUuV,KAAKw5F,aAAalzG,cAAc,YAAag1G,EAAUC,GACjE9wG,YAAUuV,KAAKw5F,aAAalzG,cAAc,YAAak1G,EAAUC,KAGlElC,KC9RPmC,GAA8B,WAK9B,QAASA,GAAat5D,GAClBpiC,KAAKoiC,YAAcA,EAuEvB,MAjEAs5D,GAAav5G,UAAUohB,OAAS,WAC5B,GAAIrS,GAAMzE,gBAAc,OAAS3D,UAAW,iBAAkBwyB,OAAS+hD,aAAc,sBACrFr9D,MAAK27F,cAAgBlvG,gBAAc,QAAU3D,UAAW,cAAeoE,OAAQ,oBAC/E8S,KAAK47F,iBAAmBnvG,gBAAc,QAAU3D,UAAW,iBAAkBoE,OAAQ,oBACrF4uF,UAAQ97E,KAAK27F,cAAe37F,KAAK47F,kBAAmB1qG,GACpD8O,KAAKoiC,YAAYx3C,QAAQkB,YAAYoF,GACrC8O,KAAK0b,WAKTggF,EAAav5G,UAAUu5B,QAAU,WAC7B,GAAI2mB,GAAWriC,KAAKoiC,WAChB7yC,eACAyQ,KAAK27F,cAAczxD,YAAclqC,KAAK1Q,OAAO+yC,EAASimD,kBAAkB,oBAAoD,IAA/BjmD,EAASH,kBAA0B,EACxHG,EAAS/sC,YAAa+sC,EAASu4D,YAAc,IAAM,IAC3D56F,KAAK47F,iBAAiB1xD,YAAclqC,KAAK1Q,OAAO+yC,EAASimD,kBAAkB,mBAAoBjmD,EAASH,mBAAqB,MAG7HliC,KAAK27F,cAAczxD,YAAclqC,KAAK1Q,OAAO+yC,EAASimD,kBAAkB,oBAAoD,IAA/BjmD,EAASH,kBAA0B,EACxHG,EAAS/sC,YAAa+sC,EAASu4D,YAAc,EAAGv4D,EAASH,mBAAqB,IAAM,IAC5FliC,KAAK47F,iBAAiB1xD,YAAclqC,KAAK1Q,OAAO+yC,EAASimD,kBAAkBjmD,EAASH,mBAAqB,EAAI,gBAAkB,mBAAoBG,EAASH,mBAAqB,EAAGG,EAASH,kBAAqBG,EAAS9sC,UAAY8sC,EAAS/sC,YAAc,GAAM,EAAI,EACpQ+sC,EAAS9sC,SAAW8sC,EAAS/sC,YAAc+sC,EAASH,kBAAoBG,EAASH,kBAC7EG,EAAS9sC,SAAW8sC,EAAS/sC,eAEzC0K,KAAK27F,cAAczyG,cAAcnH,aAAa,aAAcie,KAAK27F,cAAczxD,YAAclqC,KAAK47F,iBAAiB1xD,cAKvHwxD,EAAav5G,UAAU05G,YAAc,WAC7B77F,KAAK27F,gBACL37F,KAAK27F,cAActyG,MAAMC,QAAU,QAEnC0W,KAAK47F,mBACL57F,KAAK47F,iBAAiBvyG,MAAMC,QAAU,SAM9CoyG,EAAav5G,UAAU25G,YAAc,WAC5B97F,KAAK27F,eACN37F,KAAKuD,SAETvD,KAAK27F,cAActyG,MAAMC,QAAU,GACnC0W,KAAK47F,iBAAiBvyG,MAAMC,QAAU,IAQ1CoyG,EAAav5G,UAAU0rB,QAAU,aAGjC6tF,EAAav5G,UAAUmN,OAAS,SAAUosC,EAAKxsC,GAE3C,IAAK,GADD6sG,GACKt4G,EAAI,EAAGA,EAAIyL,EAAK9L,OAAQK,IAC7Bs4G,EAAO,GAAIC,QAAO,QAAc,MAAO,MACvCtgE,EAAMA,EAAI9tC,QAAQmuG,EAAM7sG,EAAKzL,GAAGwM,WAEpC,OAAOyrC,IAEJggE,KCjFPl8E,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAGnF7X,GAA0C,SAAUC,EAAYxmB,EAAQkQ,EAAKuW,GAC7E,GAA2HC,GAAvHngB,EAAI6H,UAAU1M,OAAQwY,EAAI3T,EAAI,EAAIvG,EAAkB,OAATymB,EAAgBA,EAAO3gB,OAAO6gB,yBAAyB3mB,EAAQkQ,GAAOuW,CACrH,IAAuB,gBAAZG,UAAoD,kBAArBA,SAAQC,SAAyB3M,EAAI0M,QAAQC,SAASL,EAAYxmB,EAAQkQ,EAAKuW,OACpH,KAAK,GAAI1kB,GAAIykB,EAAW9kB,OAAS,EAAGK,GAAK,EAAGA,KAAS2kB,EAAIF,EAAWzkB,MAAImY,GAAK3T,EAAI,EAAImgB,EAAExM,GAAK3T,EAAI,EAAImgB,EAAE1mB,EAAQkQ,EAAKgK,GAAKwM,EAAE1mB,EAAQkQ,KAASgK,EAChJ,OAAO3T,GAAI,GAAK2T,GAAKpU,OAAOghB,eAAe9mB,EAAQkQ,EAAKgK,GAAIA,GAqB5DqgG,GAAuB,SAAUj6E,GAMjC,QAASi6E,GAAMxzF,EAAS7d,GACpB,GAAI8d,GAAQsZ,EAAO12B,KAAK0U,KAAMyI,EAAS7d,IAAYoV,IAGnD,OADA0I,GAAMwzF,WAAY,EACXxzF,EAocX,MA7cA8W,IAAUy8E,EAAOj6E,GAejBi6E,EAAM95G,UAAU8iF,gBAAkB,WAC9B,GAAIE,KAaJ,OAZInlE,MAAKm8F,uBACLh3B,EAAQjhF,MACJkhF,OAAQ,kBACRl2E,MAAO8Q,QAGXA,KAAKo8F,kBACLj3B,EAAQjhF,MACJkhF,OAAQ,gBACRl2E,MAAO8Q,QAGRmlE,GAMX82B,EAAM95G,UAAU6jF,UAAY,WAExBhmE,KAAKq8F,kBACDC,gBAAiB,mBACjBC,eAAgB,cAChBC,cAAe,aACfC,iBAAkB,mBAClBC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,oBAAqB,sBACrBC,iBAAkB,mBAClBC,qBAAsB,uBACtBC,cAAe,iBACfC,iBAAkB,QAClBC,gBAAiB,mBACjBC,eAAgB,cAChBC,iBAAkB,mBAClBC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,oBAAqB,sBACrBC,iBAAkB,mBAClBC,qBAAsB,uBACtBC,cAAe,iBACfC,iBAAkB,QAClBC,IAAK,OAET39F,KAAK49F,gBAAkB,GAAIrE,IAAiBv5F,MAC5CA,KAAK69F,mBAAqB,GAAInC,IAAa17F,OAK/Ci8F,EAAM95G,UAAUohB,OAAS,WACjBvD,KAAK9Z,SACD8Z,KAAK89F,mBACL99F,KAAKoQ,GAAG,gBAAiBpQ,KAAK+kE,cAAe/kE,MAC7CA,KAAK6S,OAAO,qBAGZ7S,KAAK+kE,iBAIT/kE,KAAK+9F,mBACL/9F,KAAKkxE,YACLlxE,KAAKkiC,kBAAoBliC,KAAKkiC,mBAAqB,EACnDliC,KAAKg+F,8BACLh+F,KAAK49F,gBAAgBr6F,SACjBvD,KAAKi+F,oBACLj+F,KAAK69F,mBAAmBt6F,SAE5BvD,KAAKk+F,6BACDl+F,KAAKo8F,kBAAoBp8F,KAAKm+F,qBAC9Bn+F,KAAKm+F,oBAAoB56F,SAE7BvD,KAAKo+F,eACDp+F,KAAKm8F,uBAAyBn8F,KAAKq+F,uBACnCr+F,KAAKq+F,sBAAsB96F,SAE/BvD,KAAK0b,UACL1b,KAAK2X,QAAQ,WAAariB,YAAe0K,KAAK1K,YAAa4sC,kBAAqBliC,KAAKkiC,sBAO7F+5D,EAAM95G,UAAUuiF,eAAiB,WAC7B,GAAIC,IAAa,cAAe,WAChC,OAAO3kE,MAAKglE,aAAaL,IAO7Bs3B,EAAM95G,UAAU0rB,QAAU,WAClB7N,KAAK89F,oBACL99F,KAAK6X,IAAI,gBAAiB7X,KAAK+kE,eAC1B/kE,KAAKk8F,WACNl8F,KAAKurB,iBAAiB,cAG9BvJ,EAAO7/B,UAAU0rB,QAAQviB,KAAK0U,MAC9BA,KAAK49F,gBAAgB/vF,UACrB7N,KAAK69F,mBAAmBhwF,UACnB7N,KAAK89F,oBACN99F,KAAKpV,QAAQrE,UAAY,KAQjC01G,EAAM95G,UAAUopC,gBAAkB,SAAU41D,EAAer5F,GACvDkY,KAAK01E,cAAcyL,EAAer5F,IAMtCm0G,EAAM95G,UAAUguB,cAAgB,WAC5B,MAAO,SAMX8rF,EAAM95G,UAAUovE,kBAAoB,SAAU6e,EAASC,GACnD,IAAIrwE,KAAKkQ,YAAT,CAGIkgE,EAAQz9D,YAAc09D,EAAQ19D,YAC9B3S,KAAK49F,gBAAgBlE,sBACrB15F,KAAK49F,gBAAgBliF,UAEzB,KAAK,GAAI7rB,GAAK,EAAGkG,EAAKvO,OAAOC,KAAK2oF,GAAUvgF,EAAKkG,EAAG3S,OAAQyM,IAExD,OADWkG,EAAGlG,IAEV,IAAK,cACGmQ,KAAKs+F,cAAcluB,EAAQ96E,YAAa+6E,EAAQ/6E,cAChD0K,KAAKu+F,mBAAmBnuB,EAASC,EAErC,MACJ,KAAK,WACL,IAAK,oBACL,IAAK,aACGrwE,KAAKo8F,kBAAoBp8F,KAAKm+F,sBAC1B9tB,EAAQ96E,WAAa66E,EAAQ76E,WAC7ByK,KAAK1K,YAAc,GAEvB0K,KAAKm+F,oBAAoBK,iBAAiB,QAASx+F,KAAKzK,WAExD66E,EAAQ76E,WAAa86E,EAAQ96E,UAC7ByK,KAAKzK,SAAW66E,EAAQ76E,SACxByK,KAAKu+F,mBAAmBnuB,EAASC,IAGjCrwE,KAAK0b,SAET,MACJ,KAAK,YACG1b,KAAKo8F,kBAAoBp8F,KAAKm+F,sBAC9Bn+F,KAAKm+F,oBAAoBtwF,UACzB7N,KAAKm+F,oBAAoB56F,UAE7BvD,KAAK0b,SACL,MACJ,KAAK,WACD1b,KAAKmK,WAAanK,KAAK67D,QAAQ77D,KAAK9Z,UACpC8Z,KAAK0b,SACL,MACJ,KAAK,SACD1b,KAAK+9F,mBACL/9F,KAAK0b,SACL,MACJ,KAAK,wBACG1b,KAAKm8F,uBAAyBn8F,KAAKq+F,uBACnCr+F,KAAKq+F,sBAAsB96F,QAE/B,MACJ,KAAK,kBACGvD,KAAKq+F,uBACLr+F,KAAKq+F,sBAAsB3iF,SAE/B,MACJ,KAAK,YACD1b,KAAKkxE,WACL,MACJ,KAAK,qBACGlxE,KAAKi+F,mBACLj+F,KAAK69F,mBAAmB/B,cAGxB97F,KAAK69F,mBAAmBhC,iBAW5CI,EAAM95G,UAAUmmG,kBAAoB,SAAU12F,GAC1C,MAAOoO,MAAK2oC,UAAUpM,YAAY3qC,IAOtCqqG,EAAM95G,UAAUw1F,SAAW,SAAUC,GAC7B53E,KAAKs+F,cAAc1mB,KACnB53E,KAAK1K,YAAcsiF,EACnB53E,KAAK+kC,aAMbk3D,EAAM95G,UAAUs8G,YAAc,SAAUlpG,GACpCyK,KAAKzK,SAAWA,EAChByK,KAAK+kC,YAETk3D,EAAM95G,UAAUi6G,eAAiB,WAC7B,SAAuB,IAAnBp8F,KAAK0+F,YAAsB1+F,KAAK0+F,UAAUt7G,SAKlD64G,EAAM95G,UAAUm8G,cAAgB,SAAUK,EAAWC,GAOjD,MANID,KAAc3+F,KAAK1K,cACnB0K,KAAK06F,eAAiB16F,KAAK1K,aAE1B9S,oBAAkBo8G,KACnB5+F,KAAK06F,eAAiBkE,GAEtB5+F,KAAK06F,iBAAmBiE,GAAcA,GAAa,GAAKA,GAAa3+F,KAAK46F,YAKlFqB,EAAM95G,UAAUo8G,mBAAqB,SAAUnuB,EAASC,GAIpD,GAHIrwE,KAAK6+F,mBACL7+F,KAAK8+F,kBAAkB9+F,KAAK1K,aAE5B86E,EAAQ96E,cAAgB+6E,EAAQ/6E,aAAe86E,EAAQ76E,WAAa86E,EAAQ96E,SAAU,CACtF,GAAIrG,IACAoG,YAAa0K,KAAK1K,YAClB86E,QAASA,EAASC,QAASA,EAASppD,QAAQ,EAEhDjnB,MAAK2X,QAAQ,QAASzoB,GACjBA,EAAK+3B,QACNjnB,KAAK0b,YAIjBugF,EAAM95G,UAAU4iF,cAAgB,WAC5B,IAAI/kE,KAAK89F,oBAAqB99F,KAAKk8F,UAAnC,CAGA,GAAIx2G,EACJsa,MAAKpV,QAAQH,UAAUqE,IAAI,mBAC3BkR,KAAK67D,QAAQ77D,KAAK9Z,SAClB,IAAI5D,IACAgT,YAAa0K,KAAK1K,YAAaC,SAAUyK,KAAKzK,SAAUod,UAAW3S,KAAK2S,UACxEuvB,kBAAmBliC,KAAKkiC,kBAAmB04D,WAAY56F,KAAK46F,YAE5DmE,EAAS/+F,KAAKpV,QAAQ1B,cAAcsB,GAAK,WACzCwV,MAAK89F,mBACL99F,KAAKg/F,mBAAmB18G,EAAM0d,KAAM,WAAY++F,EAAQ,KAAM,KAAM/+F,KAAKpV,SACzEoV,KAAK4jF,yBAGLl+F,EAAS6J,aAAayQ,KAAKg/F,mBAAmB18G,EAAM0d,KAAM,WAAY++F,EAAQ/+F,KAAKi/F,kBAC/Ej/F,KAAKigC,MAAQjgC,KAAKg/F,mBAAmB18G,EAAM0d,MAAQA,KAAKg/F,mBAAmB18G,GAC/EsJ,EAAeoU,KAAKpV,QAASlF,MAIrCu2G,EAAM95G,UAAUw3G,iBAAmB,WAC/B35F,KAAK46F,WAAc56F,KAAKkiC,kBAAoBliC,KAAKzK,UAAa,EAAMyK,KAAKkiC,kBAAoBliC,KAAKzK,SAC7F64B,UAAUpuB,KAAKkiC,kBAAoBliC,KAAKzK,UAAUtF,WAAY,IAAM,GAG7EgsG,EAAM95G,UAAU68G,iBAAmB,WAC/B,MAAOh/F,MAAKmK,YAGhB8xF,EAAM95G,UAAU05E,QAAU,SAAU31E,GAChC,GAAIA,EACA,IAEQC,SAASC,iBAAiBF,GAAU9C,SACpC4c,KAAKmK,WAAalkB,UAAiBE,SAASG,cAAcJ,GAAUK,UAAUC,SAGtF,MAAOxD,GACHgd,KAAKmK,WAAalkB,UAAiBC,KAS/C+1G,EAAM95G,UAAUu5B,QAAU,WAClB1b,KAAK9Z,SACD8Z,KAAK89F,mBACL99F,KAAK25F,mBACL35F,KAAK6S,OAAO,sBAGZ7S,KAAKpV,QAAQrE,UAAY,GACzByZ,KAAK25F,mBACL35F,KAAK+kE,kBAIT/kE,KAAKkxE,YACLlxE,KAAK49F,gBAAgBliF,UACjB1b,KAAKi+F,oBACLj+F,KAAK69F,mBAAmBniF,UAExB1b,KAAKm+F,qBACLn+F,KAAKm+F,oBAAoBziF,UAEzB1b,KAAKm8F,uBAAyBn8F,KAAKq+F,uBACnCr+F,KAAKq+F,sBAAsB3iF,YAIvCugF,EAAM95G,UAAU+uF,UAAY,WACpBlxE,KAAKkC,UACLlC,KAAKpV,QAAQH,UAAUqE,IAAI,SAG3BkR,KAAKpV,QAAQH,UAAU5I,OAAO,UAGtCo6G,EAAM95G,UAAU47G,iBAAmB,WAC/B/9F,KAAK2oC,UAAY,GAAIqyC,QAAKh7E,KAAKmQ,gBAAiBnQ,KAAKq8F,iBAAkBr8F,KAAKgsC,SAEhFiwD,EAAM95G,UAAU28G,kBAAoB,SAAUl9G,GAC1C,GAAIs9G,GAAal/F,KAAKm/F,cAAc12G,OAAO22G,SAASpF,KAAM,OAAQp4G,EAAMqO,WACxExH,QAAO42G,QAAQC,WAAYC,KAAML,GAAc,GAAIA,IAEvDjD,EAAM95G,UAAUg9G,cAAgB,SAAUK,EAAK5tG,EAAKhQ,GAChD,GAAIm6G,GAAO,GAAIC,QAAO,UAAYpqG,EAAM,cAAe,IACvD,IAAI4tG,EAAIvhC,MAAM89B,GACV,MAAOyD,GAAI5xG,QAAQmuG,EAAM,KAAOnqG,EAAM,IAAMhQ,EAAQ,KAGpD,IAAI69G,GAAO,EAKX,QAJ0B,IAAtBD,EAAI93G,QAAQ,OACZ+3G,EAAOD,EAAI5xG,QAAQ,MAAO,KAC1B4xG,EAAMA,EAAI5xG,QAAQ,MAAO,KAEtB4xG,IAA6B,IAAtBA,EAAI93G,QAAQ,KAAc,IAAM,KAAOkK,EAAM,IAAMhQ,EAAQ69G,GAGjFxD,EAAM95G,UAAU67G,4BAA8B,WAC1Ch+F,KAAKpV,QAAQkB,YAAYW,gBAAc,OACnC3D,UAAW,gCACXwyB,OAAS8sB,MAAO74C,aAAayQ,KAAKsoF,kBAAkB,oBAAsBtoF,KAAKsoF,kBAAkB,oBAC7FrtD,SAAU,SAElBj7B,KAAKpV,QAAQkB,YAAYW,gBAAc,OACnC3D,UAAW,8BACXwyB,OAAS8sB,MAAO74C,aAAayQ,KAAKsoF,kBAAkB,uBAC5CtoF,KAAKsoF,kBAAkB,uBAAwBrtD,SAAU,UAGzEghE,EAAM95G,UAAU+7G,2BAA6B,WACzCl+F,KAAKpV,QAAQkB,YAAYW,gBAAc,OACnC3D,UAAW,8BACXwyB,OAAS8sB,MAAO74C,aAAayQ,KAAKsoF,kBAAkB,mBAC5CtoF,KAAKsoF,kBAAkB,mBAAoBrtD,SAAU,SAEjEj7B,KAAKpV,QAAQkB,YAAYW,gBAAc,OACnC3D,UAAW,8BACXwyB,OAAS8sB,MAAO74C,aAAayQ,KAAKsoF,kBAAkB,mBAC5CtoF,KAAKsoF,kBAAkB,mBAAoBrtD,SAAU,UAGrEghE,EAAM95G,UAAUi8G,aAAe,WAC3B,GAAI3zG,IAAa,YAAa,WAAY,WAAY,WACtD,KAAKkQ,UAAQ44C,SACT,IAAK,GAAI9vD,GAAI,EAAGA,EAAIgH,EAAUrH,OAAQK,IAAK,CACvC,GAAImH,GAAUoV,KAAKpV,QAAQtE,cAAcmE,EAAUhH,GACnDmH,GAAQ7I,aAAa,aAAc6I,EAAQ8/B,aAAa,YAIpEuxE,EAAM95G,UAAU27G,gBAAkB,WAC9B,MAAO99F,MAAKyL,SAAWzL,KAAK9Z,UAAuC,gBAAnB8Z,gBAEpDiI,IACImE,YAAS,IACV6vF,EAAM95G,UAAW,wBAAqB,IACzC8lB,IACImE,YAAS,IACV6vF,EAAM95G,UAAW,4BAAyB,IAC7C8lB,IACImE,YAAS,IACV6vF,EAAM95G,UAAW,yBAAsB,IAC1C8lB,IACImE,WAAS,KACV6vF,EAAM95G,UAAW,eAAY,IAChC8lB,IACImE,WAAS,KACV6vF,EAAM95G,UAAW,gBAAa,IACjC8lB,IACImE,WAAS,IACV6vF,EAAM95G,UAAW,kBAAe,IACnC8lB,IACImE,cACD6vF,EAAM95G,UAAW,wBAAqB,IACzC8lB,IACImE,cACD6vF,EAAM95G,UAAW,sBAAmB,IACvC8lB,IACImE,YAAS,IACV6vF,EAAM95G,UAAW,gBAAa,IACjC8lB,IACImE,cACD6vF,EAAM95G,UAAW,eAAY,IAChC8lB,IACImE,WAAS,KACV6vF,EAAM95G,UAAW,iBAAc,IAClC8lB,IACIk9E,WACD8W,EAAM95G,UAAW,YAAS,IAC7B8lB,IACIk9E,WACD8W,EAAM95G,UAAW,sBAAmB,IACvC8lB,IACIk9E,WACD8W,EAAM95G,UAAW,cAAW,IAC/B85G,EAAQh0F,IACJm9E,yBACD6W,IAELh4B,aChfEw5B,GAA+B,WAK/B,QAASA,GAAcr7D,GACnBpiC,KAAKoiC,YAAcA,EAwHvB,MAjHAq7D,GAAct7G,UAAUguB,cAAgB,WACpC,MAAO,iBAMXstF,EAAct7G,UAAUohB,OAAS,WAC7B,GAAI8+B,GAAWriC,KAAKoiC,WACpBpiC,MAAK0/F,iBAAmBjzG,gBAAc,OAAS3D,UAAW,eAC1D,IAAI62G,GAAclzG,gBAAc,OAAS3D,UAAW,oBAChD82G,EAAiBnzG,gBAAc,OAAS3D,UAAW,oBACnD+H,EAAQpE,gBAAc,SAAW6uB,OAAS33B,KAAM,OAAQs3C,SAAU,MACtEj7B,MAAK6/F,UAAYpzG,gBAAc,QAAU3D,UAAW,aAAcvC,UAAWgJ,aACrEyQ,KAAKoiC,YAAYkmD,kBAAkB,iBACnCtoF,KAAKoiC,YAAYkmD,kBAAkB,mBAC3CqX,EAAY7zG,YAAY+E,GACxB+uG,EAAe9zG,YAAYkU,KAAK6/F,WAChC7/F,KAAK0/F,iBAAiB5zG,YAAY6zG,GAClC3/F,KAAK0/F,iBAAiB5zG,YAAY8zG,GAClC5/F,KAAKoiC,YAAYx3C,QAAQkB,YAAYkU,KAAK0/F,iBAC1C,IAAII,GAAkB9/F,KAAKoiC,YAAYs8D,UACnCqB,EAAkBD,EAAgB18G,OAAS4c,KAAKggG,aAAaF,IAC5D9/F,KAAKoiC,YAAYkmD,kBAAkB,OAAQ,IAAK,KAAM,KAAM,MAC7D2X,EAAejgG,KAAKoiC,YAAY7sC,QACpCyK,MAAKkgG,mBAAqB,GAAIhL,iBAC1BljG,WAAY+tG,EACZn+G,MAAOq+G,EAAahwG,WACpBmlG,OAAQp1F,KAAKmgG,SAAS9sF,KAAKrT,MAC3Bid,SAAU,cAEdjd,KAAKkgG,mBAAmBzlE,SAAS5pC,GAC7BivG,EAAgB18G,SAChB4c,KAAKkgG,mBAAmBt1G,QAAQhJ,MAAQoe,KAAKoiC,YAAY7sC,SAAStF,YAEtEoyC,EAAS9sC,SAAW0qG,EACpB59D,EAAS0C,WACT1C,EAAS1qB,QAAQ,mBAAqBpiB,SAAU0qG,IAChDjgG,KAAKghC,oBAOTy8D,EAAct7G,UAAUg+G,SAAW,SAAUn9G,GACrCgd,KAAKkgG,mBAAmBt+G,QAAUoe,KAAKoiC,YAAYkmD,kBAAkB,QACrEtoF,KAAKoiC,YAAY7sC,SAAWyK,KAAKoiC,YAAYF,kBAC7CliC,KAAK0b,UACL14B,EAAEpB,MAAQoe,KAAKoiC,YAAY7sC,SACvBpP,SAAS4a,uBAAuB,0BAA0B3d,SAC1D+C,SAAS4a,uBAAuB,0BAA0B,GAAG1X,MAAMC,QAAU,UAIjF0W,KAAKoiC,YAAY7sC,SAAW64B,SAASpuB,KAAKkgG,mBAAmBt+G,MAAO,IAChEoe,KAAK6/F,UAAUt5G,YAAcyZ,KAAKoiC,YAAYkmD,kBAAkB,kBAChEtoF,KAAK0b,WAGb1b,KAAKoiC,YAAY2C,WACjB/kC,KAAKoiC,YAAYzqB,QAAQ,mBAAqBpiB,SAAU64B,SAASpuB,KAAKkgG,mBAAmBt+G,MAAO,OAEpG67G,EAAct7G,UAAUu5B,QAAU,WAC1B1b,KAAK6/F,YACD7/F,KAAKoiC,YAAY7sC,WAAayK,KAAKoiC,YAAYF,kBAC/CliC,KAAK6/F,UAAUt5G,UAAYgJ,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,oBACvEtoF,KAAKoiC,YAAYkmD,kBAAkB,oBAGvCtoF,KAAK6/F,UAAUt5G,UAAYgJ,aAAayQ,KAAKoiC,YAAYkmD,kBAAkB,iBACvEtoF,KAAKoiC,YAAYkmD,kBAAkB,mBAInDmV,EAAct7G,UAAUi+G,kBAAoB,SAAU7qF,GAClD,GAAkC,gBAAvBA,GAAK66D,QAAQxuF,MAAoB,CACxC,GAAI2C,GAAMgxB,EAAK66D,QAAQxuF,MAAMqO,UAC7BslB,GAAK66D,QAAQxuF,MAAQ2C,IAG7Bk5G,EAAct7G,UAAU69G,aAAe,SAAUK,GAE7C,IAAK,GADDjlF,GAAOilF,EACF58G,EAAI,EAAGA,EAAI23B,EAAKh4B,OAAQK,IAC7B23B,EAAK33B,GAAK2qC,SAAShT,EAAK33B,GAAI,IAAM23B,EAAK33B,GAAGwM,WAA8D,KAAhD+P,KAAKoiC,YAAYkmD,kBAAkBltE,EAAK33B,IAC1Fuc,KAAKoiC,YAAYkmD,kBAAkBltE,EAAK33B,IAAM23B,EAAK33B,EAE7D,OAAO23B,IAEXqiF,EAAct7G,UAAUq8G,iBAAmB,SAAUjpF,EAAM3zB,GACnDoe,KAAKkgG,qBACLlgG,KAAKkgG,mBAAmB3qF,GAAQ3zB,IAGxC67G,EAAct7G,UAAU6+C,iBAAmB,WACvChhC,KAAKkgG,mBAAmB9vF,GAAG,oBAAqBpQ,KAAKogG,kBAAmBpgG,OAE5Ey9F,EAAct7G,UAAU8rD,oBAAsB,WAC1CjuC,KAAKkgG,mBAAmBroF,IAAI,oBAAqB7X,KAAKogG,oBAQ1D3C,EAAct7G,UAAU0rB,QAAU,SAAU3e,GACpC8Q,KAAKkgG,qBAAuBlgG,KAAKkgG,mBAAmBhwF,cACpDlQ,KAAKiuC,sBACLjuC,KAAKkgG,mBAAmBryF,UACxBhsB,SAAOme,KAAK0/F,oBAGbjC,KC/HP6C,GAAiC,WAOjC,QAASA,GAAgBl+D,GACrBpiC,KAAKoiC,YAAcA,EAqDvB,MA/CAk+D,GAAgBn+G,UAAUguB,cAAgB,WACtC,MAAO,mBAMXmwF,EAAgBn+G,UAAUohB,OAAS,WAC/BvD,KAAKpV,QAAU6B,gBAAc,OAAS3D,UAAW,qBAAsBwyB,OAAS+hD,aAAc,4BAC9Fr9D,KAAKoiC,YAAYx3C,QAAQkB,YAAYkU,KAAKpV,SAC1CoV,KAAK0b,WAKT4kF,EAAgBn+G,UAAUu5B,QAAU,WAC5B1b,KAAKoiC,YAAYm+D,iBAAmBvgG,KAAKoiC,YAAYm+D,gBAAgBtwG,WAAW7M,QAChF4c,KAAK87F,cACL97F,KAAKpV,QAAQrE,UAAYyZ,KAAKoiC,YAAYm+D,iBAG1CvgG,KAAK67F,eAMbyE,EAAgBn+G,UAAU05G,YAAc,WAC/Br5G,oBAAkBwd,KAAKpV,WACxBoV,KAAKpV,QAAQvB,MAAMC,QAAU,SAMrCg3G,EAAgBn+G,UAAU25G,YAAc,WACpC97F,KAAKpV,QAAQvB,MAAMC,QAAU,IAQjCg3G,EAAgBn+G,UAAU0rB,QAAU,WAChChsB,SAAOme,KAAKpV,UAET01G,KCvDPE,GAAsB,WAKtB,QAASA,GAAKj2G,EAAQ8K,GAClB2K,KAAKygG,iBAAkB,EACvBxE,GAAMx3B,OAAO67B,GAAiB7C,IAC9Bz9F,KAAKzV,OAASA,EACdyV,KAAK3K,aAAeA,EACpB2K,KAAKghC,mBAsST,MAhSAw/D,GAAKr+G,UAAUguB,cAAgB,WAC3B,MAAO,SAOXqwF,EAAKr+G,UAAUohB,OAAS,WACpB,GACI8+B,GADA/+C,EAAO0c,KAAKzV,MAEhByV,MAAK0gG,eACAl+G,oBAAkBwd,KAAKzV,OAAOw6E,iBAC/B/kE,KAAK3K,aAAanP,SAAW8Z,KAAKzV,OAAOw6E,cACzC/kE,KAAKzV,OAAO45E,oBAAqB,GAErCnkE,KAAKpV,QAAUoV,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,gBAC7Du5C,EAAWs+D,KAAe15G,YAAWjB,EAAoBga,KAAK3K,gBAC1DuY,MAAO5N,KAAKs0D,aAAajhD,KAAKrT,MAC9B4gG,gBAAiB5gG,KAAK6gG,SAASxtF,KAAKrT,MACpCkC,UAAW5e,EAAK4e,UAAW8pC,OAAQ1oD,EAAK0oD,OACxCI,QAASpsC,KAAK8gG,YAAYztF,KAAKrT,QAC/B,YAAa,aACjBA,KAAKqiC,SAAW,GAAI45D,IAAM55D,GAC1BriC,KAAKqiC,SAAS65D,WAAY,EAC1Bl8F,KAAKqiC,SAASjyB,GAAG,gBAAiBpQ,KAAK+gG,yBAA0B/gG,MACjEA,KAAKqiC,SAASE,wBAAyB,GAE3Ci+D,EAAKr+G,UAAU0+G,SAAW,SAAU79G,GAChCgd,KAAK3K,aAAaE,SAAWvS,EAAEuS,SAC1ByK,KAAKilC,gBACNjlC,KAAK3K,aAAaC,YAAc,IAGxCkrG,EAAKr+G,UAAU2+G,YAAc,WACzB,IAAM9gG,KAAK3K,aAAsB,SAAE,CAM/B,IAAK,GALD2rG,GAAsBhhG,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,uBACpEuxG,EAAiBr6F,KAAKpV,QAAQtE,cAAc,qBAC5CgjC,EAAOnjC,SAASojC,yBAChB03E,EAAmBjhG,KAAKpV,QAAQtE,cAAc,uBAC9CszG,EAAQqH,EAAiB76G,iBAAiB,KACrC3C,EAAI,EAAGA,EAAIm2G,EAAMx2G,OAAQK,IAAK,CAC/Buc,KAAKzV,OAAOulD,kBACZ8pD,EAAMn2G,GAAG1B,aAAa,YAAaie,KAAKzV,OAAOulD,kBAAkBtlD,IAGjEovG,EAAMn2G,GAAG1B,aAAa,YAAaie,KAAKzV,OAAOK,QAAQ8/B,aAAa,MAAQ,iBAEhF,IAAIw2E,GAAsBlhG,KAAKzV,OAAOkC,cAAc,MACpDy0G,GAAoBp1G,YAAY8tG,EAAMn2G,IACtC6lC,EAAKx9B,YAAYo1G,GAErBF,EAAoBl1G,YAAYw9B,GAChC+wE,EAAezpE,aAAaowE,EAAqBC,EAEjD,KAAK,GADDx2G,IAAa,YAAa,WAAY,WAAY,UAAW,UAAW,UAAW,WAAY,YAC1F/G,EAAI,EAAGA,EAAI+G,EAAUrH,OAAQM,IAAK,CACvC,GAAIkH,GAAUoV,KAAKpV,QAAQtE,cAAcmE,EAAU/G,GAC/Csc,MAAKzV,OAAOulD,mBACZllD,EAAQ7I,aAAa,YAAaie,KAAKzV,OAAOulD,kBAAkBtlD,OAKhFg2G,EAAKr+G,UAAU8qB,UAAY,SAAUjqB,GACjCgd,KAAKwoF,YAAYxlG,IAMrBw9G,EAAKr+G,UAAUu5B,QAAU,WACrB1b,KAAKqiC,SAAS3mB,WAOlB8kF,EAAKr+G,UAAUw1F,SAAW,SAAUC,GAChC53E,KAAKqiC,SAASs1C,SAASC,IAK3B4oB,EAAKr+G,UAAUs8G,YAAc,SAAUlpG,GACnCyK,KAAKqiC,SAASo8D,YAAYlpG,IAO9BirG,EAAKr+G,UAAUqmG,YAAc,SAAUxlG,GACnCgd,KAAKzV,OAAO8K,aAAa6sC,kBAAoBl/C,EAAEwB,MAC/Cwb,KAAKzV,OAAOw6C,YAOhBy7D,EAAKr+G,UAAU6+D,iBAAmB,SAAUh+D,GACpCuM,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BtqC,EAAEgY,KAAO,MAEbgF,KAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,GAC9CsS,YAAa0K,KAAKzV,OAAO8K,aAAaC,YAAa8M,YAAa,SAChEze,KAAMujC,OAMds5E,EAAKr+G,UAAUovE,kBAAoB,SAAUvuE,GACzC,GAAIA,EAAEwuC,SAAWxxB,KAAKmQ,gBAAtB,CAIA,IAAK,GADDigE,GAAUptF,EAAEmI,WACP0E,EAAK,EAAGkG,EAAKvO,OAAOC,KAAK2oF,GAAUvgF,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC9D,GAAI0lB,GAAOxf,EAAGlG,EACdmQ,MAAKqiC,SAAS9sB,GAAQ66D,EAAQ76D,GAElCvV,KAAKqiC,SAAS0C,aAElBy7D,EAAKr+G,UAAUmyE,aAAe,SAAUtxE,GACpC,GAAIM,GAAO0c,KAAKzV,MAChB,IAAIyV,KAAKmhG,eAAiB/yG,EAAgB9K,KAAUA,EAAK6+C,eAmBrD,MAlBKniC,MAAKmhG,cAeNnhG,KAAKmhG,eAAgB,GAdhB3+G,oBAAkBQ,EAAEotF,UAAa5tF,oBAAkBQ,EAAEotF,QAAQ76E,UAKzDvS,EAAEsS,cACPhS,EAAKuvB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAK23E,SAAUrf,KAAMt1E,EAAEsS,cACnF0K,KAAKqiC,SAAS/sC,YAAchS,EAAK+R,aAAaC,cAAgB0K,KAAKqiC,SAAS/sC,YACxE0K,KAAKqiC,SAASq4D,eAAiBp3G,EAAK+R,aAAaC,cAPrDhS,EAAKuvB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAKy+F,YAAanmC,KAAMt1E,EAAEotF,QAAQ76E,WAC9FyK,KAAKqiC,SAAS9sC,SAAWvS,EAAEqtF,QAAQ96E,SACnCjS,EAAK+R,aAAaE,SAAWvS,EAAEotF,QAAQ76E,UAO3CyK,KAAKmhG,eAAgB,EACrBnhG,KAAKqiC,SAAS0C,iBAKlB/hD,EAAEikC,QAAS,EAGf3jC,GAAK+R,aAAaE,SAAWyK,KAAKqiC,SAAS9sC,SAC3CjS,EAAK6+C,gBAAiB,CACtB,IAAIi5D,GAAWp7F,KAAK3K,aAAaC,WACjC0K,MAAK3K,aAAaC,YAActS,EAAEsS,WAClC,IAAIpG,IACA+3B,QAAQ,EAAO7kB,YAAa,SAAUg/F,aAAchG,EACpD9lG,YAAatS,EAAEsS,YAAa3R,KAAMk+C,GAEtC7hC,MAAKzV,OAAOsoB,OAAOozB,GAAqB/2C,GACpCA,EAAK+3B,SACLjkC,EAAEikC,QAAS,GAEfjnB,KAAKzV,OAAOuyB,kBAAoB,UAEpC0jF,EAAKr+G,UAAU+6F,gBAAkB,SAAUl6F,GACnCA,EAAE6L,SAAUgsD,MACZ73D,EAAE8yD,iBACF91C,KAAKpV,QAAQtE,cAAcu0D,GAAW73D,EAAE6L,SAAS+e,UAQzD4yF,EAAKr+G,UAAU01F,sBAAwB,SAAUC,GACxC93E,KAAKqiC,SAAS85D,wBACfn8F,KAAKqiC,SAAS85D,uBAAwB,EACtCn8F,KAAKqiC,SAAS0C,YAElB/kC,KAAKqiC,SAASk+D,gBAAkBzoB,EAChC93E,KAAKqiC,SAAS0C,YAElBy7D,EAAKr+G,UAAUk/G,gBAAkB,SAAUr+G,GACvCgd,KAAKilC,eAAgB,EACrBjlC,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKpV,SACrCoV,KAAKzV,OAAOiqF,aAAax0E,KAAKpV,SAC9BoV,KAAKqiC,SAAS52B,QAAUzL,KAAKzV,OAAOkhB,QACpCzL,KAAKqiC,SAASpC,MAAQjgC,KAAKzV,OAAO01C,MAClCjgC,KAAKqiC,SAAS5H,SAASz6B,KAAKpV,SAC5BoV,KAAKilC,eAAgB,GAEzBu7D,EAAKr+G,UAAUulC,kBAAoB,SAAU1kC,GACrCA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,SACvCzxB,KAAKuD,SACLvD,KAAKqhG,kBACDrhG,KAAK89F,oBACL99F,KAAKqiC,SAASs3D,mBACd35F,KAAKosC,aAOjBo0D,EAAKr+G,UAAU6+C,iBAAmB,WAC9BhhC,KAAKshG,UACDjb,KAAMrmF,KAAKuD,OACXxF,IAAKiC,KAAKqhG,gBACVxqF,MAAO7W,KAAKiN,UACZs0F,SAAUvhG,KAAKghD,iBACfwgD,aAAcxhG,KAAK0nB,kBACnB+5E,cAAezhG,KAAKuxD,kBACpBysB,SAAUh+E,KAAKk9E,gBACf9wC,QAASpsC,KAAKosC,SAEdpsC,KAAKzV,OAAO2lB,cAGZlQ,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOy2C,iBAAiB,UAAWhhC,KAAKshG,SAASl1D,QAAQ/4B,KAAKrT,OAEvEA,KAAKzV,OAAO6lB,GAAG41B,GAAoBhmC,KAAKshG,SAASjb,KAAMrmF,MACvDA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKshG,SAASvjG,IAAKiC,MACrDA,KAAKzV,OAAO6lB,GAAG80B,GAAkBllC,KAAKshG,SAASzqF,MAAO7W,MACtDA,KAAKzV,OAAO6lB,GhD5FM,kBgD4FkBpQ,KAAKshG,SAASC,SAAUvhG,MAC5DA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAKshG,SAASE,aAAcxhG,MAC5DA,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKshG,SAASG,cAAezhG,MACxEA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKshG,SAAStjB,SAAUh+E,QAE9DwgG,EAAKr+G,UAAUiqD,QAAU,WACjBpsC,KAAKygG,iBAAmBzgG,KAAK89F,oBAC7B99F,KAAKygG,iBAAkB,EACvBzgG,KAAK+gG,6BAGbP,EAAKr+G,UAAU27G,gBAAkB,WAC7B,MAAO99F,MAAKzV,OAAOkhB,SAAWzL,KAAKqiC,SAASn8C,UAAgD,gBAA5B8Z,MAAKqiC,mBAEzEm+D,EAAKr+G,UAAU4+G,yBAA2B,WACtC,IAAK/gG,KAAKygG,iBAAmBzgG,KAAK89F,kBAAmB,CACjD99F,KAAKzV,OAAOghC,iBAAiB,kBAC7BvrB,KAAKpV,QAAQH,UAAUqE,IAAI,mBAC3BkR,KAAKqiC,SAASw5B,QAAQ77D,KAAKqiC,SAASn8C,SACpC,IAAIkf,GAAOpF,KAAKzV,OAAO8K,aACnB/S,GACAgT,YAAa8P,EAAK9P,YAAaC,SAAU6P,EAAK7P,SAAUod,UAAWvN,EAAKuN,UACxEuvB,kBAAmB98B,EAAK88B,kBAAmB04D,WAAY56F,KAAKqiC,SAASu4D,YAErEmE,EAAS/+F,KAAKzV,OAAOC,GAAK,gBAC9BwV,MAAKqiC,SAASl4B,WAAW7nB,EAAM0d,KAAKzV,OAAQ,gBAAiBw0G,EAAQ,KAAM,KAAM/+F,KAAKqiC,SAASz3C,SAC/FoV,KAAKzV,OAAOihC,oBAMpBg1E,EAAKr+G,UAAU8rD,oBAAsB,WAC7BjuC,KAAKzV,OAAO2lB,cAGZlQ,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAO0jD,oBAAoB,UAAWjuC,KAAKshG,SAASl1D,SAE7DpsC,KAAKzV,OAAOstB,IAAI,gBAAiB7X,KAAK+gG,0BACtC/gG,KAAKzV,OAAOstB,IAAImuB,GAAoBhmC,KAAKshG,SAASjb,MAClDrmF,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKshG,SAASvjG,KACjDiC,KAAKzV,OAAOstB,IAAIqtB,GAAkBllC,KAAKshG,SAASzqF,OAChD7W,KAAKzV,OAAOstB,IhDvIM,kBgDuImB7X,KAAKshG,SAASC,UACnDvhG,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAKshG,SAASE,cAC/CxhG,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKshG,SAASG,eAC1DzhG,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKshG,SAAStjB,YAOrDwiB,EAAKr+G,UAAU0rB,QAAU,WACrB7N,KAAKiuC,sBACDjuC,KAAK89F,mBACL99F,KAAKzV,OAAOghC,iBAAiB,kBAEjCvrB,KAAKqiC,SAASx0B,WAElB2yF,EAAKr+G,UAAUu+G,aAAe,WACtB1gG,KAAKqiC,WAAariC,KAAKqiC,SAASnyB,cAChClQ,KAAKqiC,SAASx0B,UACdhsB,SAAOme,KAAKpV,WAGb41G,KAMP3lD,IACAuyB,OAAQ,UACRC,SAAU,UACVE,gBAAiB,UACjBD,cAAe,WACfE,UAAW,QACXC,YAAa,SCtUbjuD,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAcnF4hF,GAAoC,SAAU1/E,GAE9C,QAAS0/E,KACL,GAAIh5F,GAAmB,OAAXsZ,GAAmBA,EAAO3B,MAAMrgB,KAAMlQ,YAAckQ,IAEhE,OADA0I,GAAM9d,QAAU8d,EAAMne,OAAOkC,cAAc,MAAQ3D,UAAW,oBACvD4f,EAmLX,MAvLA8W,IAAUkiF,EAAoB1/E,GAU9B0/E,EAAmBv/G,UAAUg5C,OAAS,WAClC,MAAOn7B,MAAKzV,OAAOkC,cAAc,QAQrCi1G,EAAmBv/G,UAAUohB,OAAS,SAAUkV,EAAMn2B,GAClD,GAGIuO,GAHA2O,EAAKQ,KAAKzV,OAAOK,QAAQtE,cAAc,gBACvCI,EAAOsZ,KAAKpV,QAAQsJ,YACpB+qC,EAAWj/B,KAAKm7B,SAEhB54C,EAASk2B,EAAKl2B,MAGlB,IAFAid,EAAG1T,YAAYpF,GACfA,EAAK3E,aAAa,eAAgBQ,EAAOoJ,KACrCpJ,EAAOkoB,eAAgB,CACvB,GAAIk3F,KACAr/G,KACAq/G,EAASp/G,EAAOF,OAASC,EAAKC,EAAOF,OAIzC,IADAs/G,EAAY,OAAIp/G,EACZA,EAAOoG,QAAS,CAChB,GAAI4yC,GAAkBv7B,KAAKzV,OAAOkhB,SAA8C,gBAA3BlpB,kBACjDy9C,EAAShgC,KAAKzV,OAAOK,QAAQJ,GAAKjI,EAAOoJ,IAAM,gBAC/C4vC,IACAh5C,EAAOknB,oBAAoBk4F,EAAU3hG,KAAKzV,OAAQ,iBAAkBy1C,EAAQ,KAAM,KAAMt5C,GACxFsZ,KAAKzV,OAAOihC,mBAIZ5/B,EAAelF,EADDnE,EAAOknB,oBAAoBk4F,EAAU3hG,KAAKzV,OAAQ,iBAAkBy1C,QAKtFt5C,GAAK+D,UAAUqE,IAAI,cAIvB,IAAoB,aAAhBvM,EAAOoB,KAAqB,CAC5B,IAAKnB,oBAAkBD,EAAOumB,kBAAmBvmB,EAAOumB,gBAAoBtmB,oBAAkBD,EAAOq/G,mBAgChG,CACD56G,aAAWi4C,GACPnhB,MAAS,+BAEbjtB,EAAQmP,KAAKzV,OAAOkC,cAAc,SAC9BjC,GAAIjI,EAAOF,MAAQ,iBAAkByG,UAAW,eAChDwyB,OACI33B,KAAM,SAAUykD,MAAO7lD,EAAO8F,WAAaowB,EAAKzxB,WAAWohD,MAC3DxmD,MAAOU,EAAKm2B,EAAKl2B,OAAOF,OAASC,EAAKm2B,EAAKl2B,OAAOF,OAAS,GAAIk5B,KAAM,YAG7E0jB,EAASnzC,YAAY+E,EACjB3B,IACAtE,QAASiG,EAAOmR,eAAgB,QAChC7W,YACI+W,UAAWlC,KAAKzV,OAAO2X,UAAW2/F,iBAAiB,GAG3D9Y,SAAMC,YAAY95F,EAAM8Q,KAAKzV,OAAOkC,mBA7CpC,IAJA/F,EAAK+D,UAAUqE,IAAI,cACnB9H,aAAWi4C,GACPnhB,MAAS,kBAETt7B,oBAAkBD,EAAOq/G,kBAAkB5hF,QAC3CnvB,EAAQmP,KAAKzV,OAAOkC,cAAc,SAC9BjC,GAAIjI,EAAOF,MAAQ,iBAAkByG,UAAW,2CAChDwyB,OAAS33B,KAAM,SAAUykD,MAAO7lD,EAAO8F,cAE3C42C,EAASnzC,YAAY+E,OAEpB,CACD,GAAI3B,IAAS3M,OAAQA,EAAQmE,KAAMo7G,SAC/B51G,EAAO3J,EAAOq/G,kBAAkB5hF,MAKpC,IAJoB,gBAAT9zB,KACPA,EAAO1D,WAAS0D,EAAMzD,SAGL,iBADrBoI,EAAQ3E,EAAKgD,IACkB,CAC3B,GAAIgC,GAAM8O,KAAKzV,OAAOkC,cAAc,MACpCyE,GAAI3K,UAAYsK,EAChBA,EAAQK,EAAIooC,WAEhBtyC,aAAWi4C,GACPnhB,MAAO,2CACPsqB,MAAO7lD,EAAO8F,WACdmC,GAAIjI,EAAOF,MAAQ,mBAEvB48C,EAASnzC,YAAY+E,GAqC7B,KAb8B,IAA1BtO,EAAOumB,gBAA6C,KAAjBvmB,EAAOF,OAAgBG,oBAAkBD,EAAOF,UACnFwO,EAAM9O,aAAa,WAAY,QAC/B8O,EAAMpG,UAAUqE,IAAI,cAEnBvM,EAAOoG,SACRjC,EAAK+D,UAAUqE,IAAI,UAEvBkR,KAAKy8B,WAAW/1C,EAAMu4C,GAElBj/B,KAAKzV,OAAOoqB,eAAe68D,uBAA6D,cAApCxxE,KAAKzV,OAAOoqB,eAAehxB,OAC3Eqc,KAAKzV,OAAOoyB,YAAcn6B,oBAAkBD,EAAOkoB,iBACvDzK,KAAK+hG,mBAAmB9iE,EAAU18C,EAAQk2B,IAEzCj2B,oBAAkBD,EAAOumB,iBAAmBvmB,EAAOumB,kBAAoBtmB,oBAAkBD,EAAOq/G,mBAAoB,CACrH,GAAII,GAAgBz/G,EAAOq/G,kBAAkBK,MACzC/yG,GAAStE,QAASiG,EAAOtO,OAAQA,EACR,iBAAlBy/G,KACPA,EAAgBx5G,WAASw5G,EAAev5G,SAE5Cu5G,EAAc12G,KAAK0U,KAAM9Q,IAIrC,MAAOxI,IAQXg7G,EAAmBv/G,UAAUs6C,WAAa,SAAU/1C,EAAM01C,GAEtD,MADA11C,GAAKoF,YAAYswC,GACV11C,GAEXg7G,EAAmBv/G,UAAU4/G,mBAAqB,SAAU9iE,EAAU18C,EAAQk2B,GAC1E,GAAIn1B,GAAO0c,KAAKzV,OACZ23G,EAASliG,KAAKzV,OAAOkC,cAAc,SACnC3D,UAAW,6CACX0B,GAAIiuB,EAAKl2B,OAAOoJ,KAEpBszC,GAAS34C,cAAc,QAAQwF,YAAYo2G,EAC3C,IAAIC,GAAa5/G,EAAO+W,QAAU/W,EAAO+W,OAAO/G,SAAYhQ,EAAO+W,OAAO/G,SAAW,OAChF/P,qBAAkBc,EAAKglD,aAAa65D,UAAU5/G,EAAOF,UACtD8/G,EAAY7+G,EAAKglD,aAAa65D,UAAU5/G,EAAOF,QAEnD2d,KAAK8yF,SAAW,GAAIoC,iBAChBtqF,QAAUC,KAAM,OAAQjpB,MAAO,SAC/BwgH,YAAa,OACbxgH,MAAOugH,EACPz5G,MAAO,MACPyZ,QAAS5f,EAAOumB,eAChBu5F,WAAY,OACZngG,UAAWlC,KAAKzV,OAAO2X,UACvBkzF,OAAQp1F,KAAKsiG,cAAcjvF,KAAKrT,MAChCuiG,WAAY,WACR,GAAIhwG,GAAWjP,EAAKglD,aAAak6D,eACjCxiG,MAAKhO,WAAaO,EAASjP,EAAKywC,eAAe/zB,KAAKpV,QAAQJ,IAAI7G,KAAO,WACvE,KAAK,GAAIF,GAAI,EAAGA,EAAIuc,KAAKhO,WAAW5O,OAAQK,IACpClB,EAAO+W,QAAU/W,EAAO+W,OAAO/G,UAAY/P,oBAAkBc,EAAKglD,aAAa65D,UAAU5/G,EAAOF,SAChG2d,KAAKhO,WAAWvO,GAAG7B,QAAUW,EAAO+W,OAAO/G,WAC3CyN,KAAKpe,MAAQW,EAAO+W,OAAO/G,aAK3CyN,KAAK8yF,SAASr4D,SAASynE,EACvB,IAAIO,GAAWpqG,UAAQ2H,KAAK8yF,SAASloG,QAAS,OAC9C63G,GAASh4G,UAAUqE,IAAI,uBACvB2zG,EAAS3gH,gBAAgB,aAE7B4/G,EAAmBv/G,UAAUmgH,cAAgB,SAAUt/G,GACnD,GAAIM,GAAO0c,KAAKzV,OACZwD,EAAMzK,EAAKywC,eAAe/wC,EAAE4H,QAAQ8/B,aAAa,MACrD1nC,GAAET,OAASwL,EACXzK,EAAKglD,aAAa65D,UAAUp0G,EAAI1L,OAASW,EAAEpB,MAC3C0B,EAAKuvB,OjD4OqB,yBiD5Oe7vB,IAEtC0+G,GACT5mE,IC1ME4nE,GAA8B,WAC9B,QAASA,GAAan4G,EAAQmkG,EAAqB1/F,EAAgB2lB,GAC/D3U,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAK2U,eAAiBA,EACtB3U,KAAK2uF,sBAAwBD,EAoEjC,MA9DAgU,GAAavgH,UAAUoyG,iBAAmB,SAAUlB,EAAe3xG,EAAQa,EAAQgwG,EAAQhgG,GACvFyN,KAAK7P,UAAYoiG,CACjB,IAAIpI,GAAO5nG,EAAOoB,KAAO,UACzBqc,MAAK6xF,SAAW7xF,KAAK2iG,WAAcngH,oBAAkB+P,GAC/C/P,oBAAkBwd,KAAKzV,OAAOoqB,eAAewtF,YAAe3/G,oBAAkBwd,KAAKzV,OAAOoqB,eAAewtF,UAAUhY,IACpEnqF,KAAK2uF,sBAAsBxE,GAAxEnqF,KAAKzV,OAAOoqB,eAAewtF,UAAUhY,GAFoB53F,CAGjE,IAAIuiG,GAAiB90F,KAAK2iG,WACtB5N,EAAgB/0F,KAAKg1F,gBAAgBzyG,EAAQ4nG,GAC7CyK,EAAU50F,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,iBAC5DuqG,GAAcvnG,YAAY8oG,EAC1B,IAAIC,GAAY70F,KAAKzV,OAAOkC,cAAc,SAAWjC,GAAIjI,EAAOoJ,IAAM,WACtEipG,GAAQ9oG,YAAY+oG,GACpB70F,KAAK8yF,SAAW,GAAIoC,iBAChBljG,WAAY8iG,EACZlqF,QAAUC,KAAM,OAAQjpB,MAAO,SAC/BsqD,KAAMlsC,KAAKm1F,aAAa9hF,KAAKrT,MAC7Bid,SAAU,iBACV/a,UAAWlC,KAAKzV,OAAO2X,UACvB2I,KAAMkqF,IAEV/0F,KAAK8yF,SAASr4D,SAAS,IAAMl4C,EAAOoJ,IAAM,YAE9C+2G,EAAavgH,UAAUygH,6BAA+B,SAAU1zG,GAC5DA,EAAKrF,MAAMe,QAAQvB,MAAMX,MAAQ,QAErCg6G,EAAavgH,UAAUgzG,aAAe,SAAUjmG,GAC5CA,EAAKrF,MAAMe,QAAQvB,MAAMqH,QAAUsP,KAAK7P,UAAUO,OAAS,GAAGT,WAC1D+P,KAAKzV,OAAOsW,kBACZb,KAAK4iG,6BAA6B1zG,IAG1CwzG,EAAavgH,UAAU6yG,gBAAkB,SAAUjnG,EAAKo8F,GAGpD,IAAK,GAFD0Y,GAAW,GAENhzG,EAAK,EAAGklB,EADH/U,KAAKzV,OAAOoqB,eAAexxB,QACH0M,EAAKklB,EAAU3xB,OAAQyM,IAAM,CAC/D,GAAItN,GAASwyB,EAAUllB,EACvB,IAAI9B,EAAI1L,QAAUE,EAAOF,OAAU0L,EAAI2c,mBAAqB3c,EAAIzF,kBAAoB/F,EAAOF,MAAQ,CAC/F,GAAIkzG,GAAgB,GAAItjG,eAAY+N,KAAK6xF,UAAUp/F,cAAa,GAAIX,UAAQO,MAAM,QAAS,QAAS9P,EAAOgQ,UAC3GswG,GAAYrgH,oBAAkB+yG,EAAc,IAA8B,GAAxBA,EAAc,GAAG1qF,MAG3E,GAAiB,KAAbg4F,EACA,GAAI90G,EAAIuL,OAAO/G,SAEX,IAAK,GADDuwG,GAAUt7G,OAAOC,KAAKuY,KAAK6xF,UAAUzuG,OAChCK,EAAI,EAAGA,EAAIq/G,EAASr/G,IACrBuc,KAAK6xF,SAASpuG,GAAG7B,QAAUmM,EAAIuL,OAAO/G,WACtCswG,EAAW7iG,KAAK6xF,SAASpuG,GAAGonB,UAKpCg4F,GAAW7iG,KAAK6xF,SAAS,GAAGhnF,IAGpC,OAAOg4F,IAKXH,EAAavgH,UAAU4gH,cAAgB,WACnC,MAAO/iG,MAAK8yF,SAASlxG,OAElB8gH,KCvEPM,GAAgC,WAChC,QAASA,GAAez4G,EAAQyE,EAAgB2lB,GAC5C3U,KAAKzV,OAASA,EACdyV,KAAKijG,WAAaj0G,EAClBgR,KAAK2U,eAAiBA,EA4E1B,MA1EAquF,GAAe7gH,UAAU69B,OAAS,SAAU9wB,GACxC8Q,KAEK0C,SAAW1C,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,iBAAkB0B,GAAI,SAAW0E,EAAK3M,OAAOoJ,MAC7GuD,EAAKxN,OAAOoK,YAAYkU,KAAK0C,UAC7B1C,KAAK7P,UAAYjB,EAAKiB,UACtB6P,KAAKizF,OAASjzF,KAAKkjG,uBAAuBh0G,GAC1C8Q,KAAKizF,OAAOx4D,SAASz6B,KAAK0C,WAE9BsgG,EAAe7gH,UAAU+gH,uBAAyB,SAAUh0G,GACxD,GAEIi0G,GAFAz6F,EAAQ1I,KACR0K,EAAkBxb,EAAK3M,OAAOmoB,iBAE9BA,MACAy4F,EAAqB,GAAIrxG,UACN6Y,OAAS3K,KAAKzV,OAAOsH,MAAM8Y,OAElD,IAAI3Y,GAAa0Y,EAAkBxb,EAAK3M,OAAOyP,WAAagO,KAAKzV,OAAOyH,WACpE4Y,GAAWhpB,MAAO8oB,EAAkBxb,EAAK3M,OAAO+F,gBAAkB4G,EAAK3M,OAAOF,OAC9E+gH,EAAe,GAAI5L,gBAAavwG,UAChC+K,WAAYA,YAAsBC,eAAcD,EAAa,GAAIC,eAAYD,GAC7E4Y,OAAQA,EACRohC,OAAQhsC,KAAKzV,OAAOyhD,OACpB9pC,UAAWlC,KAAKzV,OAAO2X,UACvBrQ,MAAO6Y,EAAkBy4F,EAAqBnjG,KAAKzV,OAAOsH,MAAM8f,QAChE8lF,UAAW,YACXvrD,KAAMlsC,KAAKqjG,UAAUhwF,KAAKrT,MAC1Bid,SAAU,iBACV82B,MAAO,WACHrrC,EAAMuqF,OAAO0E,WAAazoG,EAAKo0G,gBAAgBP,iBAEnDryC,UAAU,EACVzuD,YAAa/S,EAAKq0G,aAAahnE,YAAY,cAC3CjwB,eAAgB,SAAUtpB,GACtBA,EAAE0C,OAAS1C,EAAE0C,OAAO4T,OAAO,SAAUxT,EAAKgC,EAAO8c,GAC7C,MAAOA,GAAI7I,IAAI,SAAUynG,GACrB,MAAQh7G,YAASkgB,EAAMuqF,OAAOroF,OAAOhpB,MAAO4hH,KAC7C97G,QAAQc,WAAUkgB,EAAMuqF,OAAOroF,aAAe9kB,MAAUgC,MAGpEoH,EAAK3M,OAAO+W,OAAOqR,QACtB,IAAI3Y,GAAc,UAAYA,GAAY,CACtC,GACIo6F,GAAS7yF,IAAe6I,YAAa,uBAD7BpC,KAAKzV,OAAOmnB,SAAW1R,KAAKzV,OAAOmnB,WAAWC,QAAU,GAAI7f,SAExEkO,MAAKzV,OAAOotB,QnD6QK,kBmD7Q2By0E,EAAO5yF,OACzC4yF,EAAOvyF,SACboc,QAAQS,KAAK,SAAU1zB,GACvBogH,EAAapxG,WAAa,GAAIC,eAAYjP,KAGlD,MAAOogH,IAEXJ,EAAe7gH,UAAU8/G,MAAQ,SAAU/yG,GACzB8Q,KAAK2U,eAAexxB,OACP,MAAvB+L,EAAKu0G,eAAyBjhH,oBAAkB0M,EAAKu0G,iBACtCt9G,SAASG,cAAc,UAAY4I,EAAK3M,OAAOoJ,KAAKwlF,cAAc,GACxEvvF,MAAQsN,EAAKu0G,gBAG9BT,EAAe7gH,UAAUuhH,KAAO,SAAU94G,EAASrI,EAAQohH,EAAYC,GACnE,GAAIC,GAAW19G,SAASG,cAAc,UAAY/D,EAAOoJ,KAAKwlF,cAAc,EACxEx2E,WAAQ44C,WACRswD,EAASC,YACTD,EAASE,WAEb,IAAI3rB,GAAcyrB,EAASjiH,OACvBY,oBAAkB41F,IAAgC,KAAhBA,KAClCA,EAAc,MAElBwrB,EAAU1rB,eAAe31F,EAAOF,MAAOshH,EAAYvrB,EAAa,MAAOp4E,KAAKzV,OAAOoqB,eAAeqvF,wBAEtGhB,EAAe7gH,UAAUkhH,UAAY,SAAUn0G,GAC3CuB,GAAqBvB,EAAM8Q,KAAK7P,YAE7B6yG,KCnFPiB,GAAgC,WAChC,QAASA,GAAe15G,EAAQyE,EAAgB2lB,GAC5C3U,KAAK2U,eAAiBA,EACtB3U,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EAiC1B,MA/BAi1G,GAAe9hH,UAAU+hH,gBAAkB,SAAUh1G,GACjD,GAAqB,KAAjBA,EAAK8+C,SAAmC,IAAjB9+C,EAAK8+C,QAAe,CAC3C,GAAIm2D,GAAMh+G,SAASi+G,YAAY,aAC/BD,GAAIE,UAAU,UAAU,GAAO,GAE/BrkG,KAAKskG,cAAcH,KAG3BF,EAAe9hH,UAAU69B,OAAS,SAAU9wB,GACxC8Q,KAAK0C,SAAW1C,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,iBAAkB0B,GAAI,YAAc0E,EAAK3M,OAAOoJ,MAChHuD,EAAKxN,OAAOoK,YAAYkU,KAAK0C,UAC7B1C,KAAKkzF,cAAgB,GAAIoE,kBAAerwG,UACpCqI,OAAwC,gBAAxBJ,GAAK3M,eAA+BmY,cAAYxL,EAAK3M,OAAO+M,QAAUJ,EAAK3M,OAAO+M,OAC9FJ,EAAK3M,OAAO+M,OAAOA,OACvB08C,OAAQhsC,KAAKzV,OAAOyhD,OACpB/uB,SAAU,iBACVhb,YAAa/S,EAAKq0G,aAAahnE,YAAY,cAC3Cr6B,UAAWlC,KAAKzV,OAAO2X,WACxBhT,EAAK3M,OAAO+W,OAAOqR,SACtB3K,KAAKkzF,cAAcz4D,SAASz6B,KAAK0C,WAErCuhG,EAAe9hH,UAAU8/G,MAAQ,SAAU/yG,GACvC,GAAIq1G,GAAcp+G,SAASG,cAAc,aAAe4I,EAAK3M,OAAOoJ,KAAKwlF,cAAc,EACvFozB,GAAY35G,QAAQo2C,iBAAiB,UAAWhhC,KAAKkkG,iBACrDK,EAAY3iH,MAAQsN,EAAKu0G,eAE7BQ,EAAe9hH,UAAUuhH,KAAO,SAAU94G,EAASrI,EAAQohH,EAAYC,GACnE,GACIxrB,GADcjyF,SAASG,cAAc,aAAe/D,EAAOoJ,KAAKwlF,cAAc,GACpDvvF,KAC9BgiH,GAAU1rB,eAAe31F,EAAOF,MAAOshH,EAAYvrB,EAAa,OAAO,IAEpE6rB,KCnCPO,GAAiC,WACjC,QAASA,GAAgBj6G,EAAQyE,EAAgB2lB,GAC7C3U,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAK2U,eAAiBA,EAuC1B,MArCA6vF,GAAgBriH,UAAU69B,OAAS,SAAU9wB,GACzC,GAAIwb,GAAkBxb,EAAK3M,OAAOmoB,kBAC9B1Y,EAAa0Y,EAAkBxb,EAAK3M,OAAOyP,WAAagO,KAAKzV,OAAOyH,WACpE4Y,EAASF,EAAkBxb,EAAK3M,OAAO+F,gBAAkB4G,EAAK3M,OAAOF,KACzE2d,MAAK5V,KAAO4V,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,iBAAkB0B,GAAI,WAAa0E,EAAK3M,OAAOoJ,MAC3GuD,EAAKxN,OAAOoK,YAAYkU,KAAK5V,MAC7B4V,KAAK7P,UAAYjB,EAAKiB,UACtB6P,KAAKykG,aAAe,GAAIvP,gBAAajuG,UACjC+K,WAAYA,YAAsBC,eAC9BD,EAAa,GAAIC,eAAYD,GACjCH,OAAO,GAAIC,UAAQvD,OAAOqc,GAC1BA,QAAUC,KAAMD,EAAQhpB,MAAOgpB,GAC/B3I,YAAa/S,EAAKq0G,aAAahnE,YAAY,eAC3Ctf,SAAU,iBACV+uB,OAAQhsC,KAAKzV,OAAOyhD,OACpB9pC,UAAWlC,KAAKzV,OAAO2X,UACvBgqC,KAAMlsC,KAAKqjG,UAAUhwF,KAAKrT,MAC1BsM,eAAgB,SAAUtpB,GACtBA,EAAE0C,OAASjD,WAAS0pG,SAASnpG,EAAE0C,OAAQklB,GAAQ,KAEpD1b,EAAK3M,OAAO+W,OAAOqR,SACtB3K,KAAKykG,aAAahqE,SAASz6B,KAAK5V,OAEpCo6G,EAAgBriH,UAAU8/G,MAAQ,SAAU/yG,GACxC,GAAIw1G,GAAWv+G,SAASG,cAAc,YAAc4I,EAAK3M,OAAOoJ,KAAKwlF,cAAc,EAC9E3uF,qBAAkB0M,EAAKu0G,iBACxBiB,EAAS75F,KAAO3b,EAAKu0G,gBAG7Be,EAAgBriH,UAAUuhH,KAAO,SAAU94G,EAASrI,EAAQohH,EAAYC,GACpE,GACIxrB,GADWjyF,SAASG,cAAc,YAAc/D,EAAOoJ,KAAKwlF,cAAc,GACnDvvF,KAC3BgiH,GAAU1rB,eAAe31F,EAAOF,MAAOshH,EAAYvrB,EAAa,OAAO,IAE3EosB,EAAgBriH,UAAUkhH,UAAY,SAAUn0G,GAC5CuB,GAAqBvB,EAAM8Q,KAAK7P,YAE7Bq0G,KC5CPG,GAA8B,WAC9B,QAASA,GAAap6G,EAAQyE,EAAgB2lB,GAC1C3U,KAAKzV,OAASA,EACdyV,KAAKwC,QAAUxT,EACfgR,KAAK4kG,aAAejwF,EA6CxB,MA3CAgwF,GAAaxiH,UAAU69B,OAAS,SAAU9wB,GACtC,GAAII,GAASmF,GAAoBvF,EAAK3M,OAAO+M,OAAQJ,EAAK3M,OAAOoB,KACjEqc,MAAK7P,UAAYjB,EAAKiB,UACtB6P,KAAK6kG,UAAY7kG,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,iBAAkB0B,GAAI,UAAY0E,EAAK3M,OAAOoJ,MAC/GuD,EAAKxN,OAAOoK,YAAYkU,KAAK6kG,WACJ,SAArB31G,EAAK3M,OAAOoB,KACZqc,KAAK8kG,cAAgB,GAAI3N,cAAWlwG,UAChCqI,OAAQA,EACR2tB,SAAU,iBACVhb,YAAa/S,EAAKq0G,aAAahnE,YAAY,cAC3C7zC,MAAO,OACPsjD,OAAQhsC,KAAKzV,OAAOyhD,OACpB9pC,UAAWlC,KAAKzV,OAAO2X,UACvBgqC,KAAMlsC,KAAKqjG,UAAUhwF,KAAKrT,OAC3B9Q,EAAK3M,OAAO+W,OAAOqR,SAEI,aAArBzb,EAAK3M,OAAOoB,OACjBqc,KAAK8kG,cAAgB,GAAI1N,kBAAenwG,UACpCqI,OAAQA,EACR2tB,SAAU,iBACVhb,YAAa/S,EAAKq0G,aAAahnE,YAAY,cAC3C7zC,MAAO,OACPsjD,OAAQhsC,KAAKzV,OAAOyhD,OACpB9pC,UAAWlC,KAAKzV,OAAO2X,UACvBgqC,KAAMlsC,KAAKqjG,UAAUhwF,KAAKrT,OAC3B9Q,EAAK3M,OAAO+W,OAAOqR,UAE1B3K,KAAK8kG,cAAcrqE,SAASz6B,KAAK6kG,YAErCF,EAAaxiH,UAAU8/G,MAAQ,SAAU/yG,GACvB8Q,KAAK4kG,aAAazhH,OAChBgD,UAASG,cAAc,WAAa4I,EAAK3M,OAAOoJ,KAAKwlF,cAAc,GACzEvvF,MAASY,oBAAkB0M,EAAKu0G,eAAgD,KAA/B,GAAItwG,MAAKjE,EAAKu0G,gBAE7EkB,EAAaxiH,UAAUuhH,KAAO,SAAU94G,EAASrI,EAAQohH,EAAYC,GACjE,GACIxrB,GADYjyF,SAASG,cAAc,WAAa/D,EAAOoJ,KAAKwlF,cAAc,GAClDvvF,KAC5Bw2F,GAAc51F,oBAAkB41F,GAAe,KAAOA,EACtDwrB,EAAU1rB,eAAe31F,EAAOF,MAAOshH,EAAYvrB,EAAa,OAAO,IAE3EusB,EAAaxiH,UAAUkhH,UAAY,SAAUn0G,GACzCA,EAAKrF,MAAMe,QAAQvB,MAAMqH,QAAUsP,KAAK7P,UAAUO,OAAS,GAAGT,YAE3D00G,KCzCPI,GAAoC,WACpC,QAASA,GAAmBx6G,EAAQoqB,EAAgB3lB,EAAgB0/F,EAAqBsW,GACrFhlG,KAAKilG,cAAe,EACpBjlG,KAAKkrC,UAAY,QACjBlrC,KAAKklG,aAAc,EACnBllG,KAAKmlG,UACDrW,OAAUkU,GAAgBnU,OAAUoV,GAAgBjtF,KAAQ2tF,GAAcS,QAAWZ,GAAiBzV,SAAY4V,IAEtH3kG,KAAKzV,OAASA,EACdyV,KAAK2U,eAAiBA,EACtB3U,KAAKhR,eAAiBA,EACtBgR,KAAK2uF,sBAAwBD,EAC7B1uF,KAAK4jG,UAAYoB,EACjBhlG,KAAKqlG,SAAW,GAAI3C,IAAa1iG,KAAKzV,OAAQyV,KAAK2uF,sBAAuB3uF,KAAKhR,gBAC/EgR,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKslG,eAAiB,GAAInwF,IAAmB5qB,GA8TjD,MA5TAw6G,GAAmB5iH,UAAUuoD,kBAAoB,SAAU38C,GACvDiS,KAAKulG,cAAcx3G,IAEvBg3G,EAAmB5iH,UAAUwrD,kBAAoB,SAAUz+C,GACvD8Q,KAAK2yF,eAAezjG,EAAKnB,MAE7Bg3G,EAAmB5iH,UAAU4oD,WAAa,SAAU77C,GAChD8Q,KAAKyI,QAAUvZ,EACf8Q,KAAKjS,IAAMiS,KAAKzV,OAAOiN,iBAAiBtI,EAAK7M,QACzCG,oBAAkBwd,KAAKjS,IAAIuL,SAAY9W,oBAAkBwd,KAAKjS,IAAIuL,OAAO3V,OAAkC,SAAzBqc,KAAKjS,IAAIuL,OAAO3V,OAClGqc,KAAKwlG,iBAAiBt2G,EAAKxN,OAAQse,KAAKjS,MAGhDg3G,EAAmB5iH,UAAUomD,YAAc,SAAU7mD,GACjD,GAAKse,KAAKuyF,OAAV,CAGA,GAAIhjG,aAEA,IAAK,GADDpM,GAAU6c,KAAKzV,OAAO2L,aACjBzS,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAChC,GAAIN,EAAQM,GAAGgnB,eAAgB,CAC3B,GAAIu1B,GAAShgC,KAAKzV,OAAOK,QAAQJ,GAAKrH,EAAQM,GAAGkI,IAAM,gBACvD8hC,wBAAqBuS,EAAQ,iBAAkB78C,EAAQM,IAI/Duc,KAAKzV,OAAOkhB,UACZzL,KAAKzV,OAAOghC,iBAAiB,mBAC7BvrB,KAAKzV,OAAOihC,kBAEhB,IAAIphC,GAAOjE,SAAS2nD,eAAe9tC,KAAKuyF,OAAO3nG,QAAQJ,GACvD,IAAIwV,KAAKuyF,SAAWvyF,KAAKuyF,OAAOriF,aAAe9lB,EAAM,CACjD,GAAIq7G,IAAax+E,QAAQ,EAAO1kC,OAAQyd,KAAKjS,IAAKrM,OAAQA,EAAQkJ,QAASR,EAE3E,IADA4V,KAAKzV,OAAOsoB,OvDyPK,oBuDzP0B4yF,GACvCA,EAASx+E,OACT,MAEJjnB,MAAKilG,cAAe,EAChBjlG,KAAKklG,cACLllG,KAAKslG,eAAenkD,eACpBnhD,KAAKzV,OAAOstB,IAAIm1E,GAAyBhtF,KAAKsM,gBAC9CtM,KAAKklG,aAAc,GAEvBllG,KAAKuyF,OAAO1kF,UACZhsB,SAAOuI,GAEX4V,KAAKzV,OAAOsoB,OvD8ZW,4BuD5Z3BkyF,EAAmB5iH,UAAUqjH,iBAAmB,SAAU9jH,EAAQa,GAC9D,GAAI2M,IACAkT,YvDqCkB,mBuDpClB8Q,WAAY3wB,EAAOF,MAAO+mG,WAAY7mG,EAAOoB,KAEjD,KAAK4L,cAAcyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,YAAI8Q,KAExBA,KAAKzV,OAAOotB,QAAQkqB,GAAoB3yC,EACxC,IAAImjG,GAAUryF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,mBAAoB0B,GAAIjI,EAAOoJ,IAAM,WACjGqU,MAAKsyF,OAAStyF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,WAAY0B,GAAIjI,EAAOoJ,IAAM,YACzFqU,KAAKsyF,OAAOvwG,aAAa,aAAcie,KAAK8gC,KAAKvE,YAAY,yBACzDv8B,KAAKzV,OAAOsW,iBACQ1a,SAASG,cAAc,oDAC7BwF,YAAYkU,KAAKsyF,QAG/BtyF,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKsyF,QAEzCtyF,KAAKuyF,OAAS,GAAI3mD,WACdE,eAAe,EACfC,eAAe,EACfC,OAAQhsC,KAAKzV,OAAOyhD,OACpBrjD,SAAS,EACTuZ,UAAWlC,KAAKzV,OAAO2X,UACvBkqC,QAASpsC,KAAKqsC,cAAch5B,KAAKrT,KAAMte,EAAQa,GAC/C0G,SAAU+W,KAAKzV,OAAOK,QAAQH,UAAUC,SAAS,aAAgBi/F,EAAG,SAAUC,EAAG,WAAeD,EAAG,GAAIC,EAAG,IAC1GloG,OAAQse,KAAKzV,OAAOK,QAAQH,UAAUC,SAAS,YAAcvE,SAASwG,KAAOqT,KAAKzV,OAAOK,QACzFw/C,UACQx8B,MAAO5N,KAAK2yF,eAAet/E,KAAKrT,KAAMzd,GACtC+mG,aACIxjF,QAAS9F,KAAK8gC,KAAKvE,YAAY,gBAAiBgtD,WAAW,EAAMtsE,SAAU,oBAI/ErP,MAAO5N,KAAKulG,cAAclyF,KAAKrT,KAAMzd,GACrC+mG,aAAexjF,QAAS9F,KAAK8gC,KAAKvE,YAAY,eAAgBtf,SAAU,wBAEhFnX,QAASusF,EACT3pG,OAASlG,oBAAkB2H,EAAazI,EAAQ,cAAiBse,KAAKzV,OAAOK,QAAQH,UAAUC,SAAS,YAAc,IAAM,IAC5H8hD,mBAAqBC,OAAQ,QAC7BxvB,SAAU,kBAGdjd,MAAKuyF,OAAuB,kBAAI,EAChCvyF,KAAK6qC,yBACL7qC,KAAKuyF,OAAO93D,SAASz6B,KAAKsyF,SAE9ByS,EAAmB5iH,UAAU0oD,uBAAyB,WACvC7qC,KAAKzV,OACPsW,mBACLb,KAAKuyF,OAAOtpG,UAAa0gG,EAAG,GAAIC,EAAG,IACnC5pF,KAAKuyF,OAAO7wG,OAASyE,SAASG,cAAc,oDAC5C0Z,KAAKuyF,OAAO7pG,MAAQ,OACpBsX,KAAKuyF,OAAO1mD,SAAU,EACtB7rC,KAAKuyF,OAAOnoD,eAGpB26D,EAAmB5iH,UAAUkqD,cAAgB,SAAU3qD,EAAQa,IACtDoY,UAAQ44C,UAAY7xD,GACrBwO,GAAqBxO,EAAQse,KAAKuyF,OAAQvyF,KAAKzV,QAEnDyV,KAAKyzF,eAAe/xG,EAAQa,GAC5Byd,KAAKzV,OAAOsoB,OvDwKa,0BuDvKrB7S,KAAKzV,OAAOsW,kBACZb,KAAKuyF,OAAO3nG,QAAQvB,MAAMM,KAAO,MACjCqW,KAAKuyF,OAAO3nG,QAAQvB,MAAM6hD,UAAY,QAGtClrC,KAAKuyF,OAAO3nG,QAAQvB,MAAM6hD,UAAYlrC,KAAKkrC,UAE/ClrC,KAAKuyF,OAAOtnD,OACP1oD,EAAOkoB,gBACRzK,KAAK0lG,YAAYnjH,EAAQyd,KAAKuyF,OAAO3nG,QAAQtE,cAAc,IAAM/D,EAAOoJ,IAAM,WAElF,IAAIuD,IACAkT,YvDxCiB,kBuDyCjB8Q,WAAY3wB,EAAOF,MAAO+mG,WAAY7mG,EAAOoB,KAEjD,KAAK4L,cAAcyQ,KAAKzV,OAAO+iC,cAAe,CAE1Cp+B,EAAgB,YAAI8Q,KAExBA,KAAKilG,cAAe,EACfjlG,KAAKklG,aACNllG,KAAKzV,OAAOotB,QAAQuP,GAAuBh4B,IAGnD61G,EAAmB5iH,UAAUsxG,eAAiB,SAAU/xG,EAAQqM,GAC5D,GAAIslG,GAAgBrzF,KAAKuyF,OAAO3nG,QAAQtE,cAAc,oBACtD0Z,MAAKzV,OAAOyoB,IAAI,uBAAyBzwB,OAAQwL,IACjDiS,KAAKu0F,iBAAiBlB,EAAe3xG,EAAQqM,GAC7CiS,KAAKy1F,gBAAgBpC,EAAe3xG,EAAQqM,IAEhDg3G,EAAmB5iH,UAAUoyG,iBAAmB,SAAUlB,EAAe3xG,EAAQa,GAC7Eyd,KAAKqlG,SAAS9Q,iBAAiBlB,EAAe3xG,EAAQa,EAAQyd,KAAKuyF,OAAQvyF,KAAK4jG,UAAU+B,eAE9FZ,EAAmB5iH,UAAUszG,gBAAkB,SAAUpC,EAAe3xG,EAAQa,GAC5E,GAAI2zG,GAAWl2F,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,sBACzD6hG,EAAO3qF,KAAK4jG,SAChBvQ,GAAcvnG,YAAYoqG,EACsCl2F,MAAKqlG,SAAqBrlG,KAAKuyF,MAA/F,IACIqT,GAAqB,GAAI5lG,MAAKmlG,SAAS5iH,EAAOoB,MAAMqc,KAAKzV,OAAQyV,KAAKhR,eAAgBgR,KAAKzV,OAAOoqB,eACtG,IAAIpyB,EAAOkoB,eAAgB,CACvB,GAAIk3F,KAEJA,GAASp/G,EAAOF,OAASs/G,EAAsB,MAAIhX,EAAKpjG,OAAOhF,EAAOF,OAClEE,EAAO+F,kBACPq5G,EAASp/G,EAAO+F,iBAAmBqiG,EAAKpjG,OAAOhF,EAAOF,OACtDs/G,EAASp/G,EAAOF,WAAS0K,GAG7B40G,GAAY,OAAIp/G,CAChB,IAAIg5C,GAAkBv7B,KAAKzV,OAAOkhB,SAA8C,gBAA3BlpB,kBACjDy9C,EAAShgC,KAAKzV,OAAOK,QAAQJ,GAAKjI,EAAOoJ,IAAM,gBACnD,IAAI4vC,EACAh5C,EAAOknB,oBAAoBk4F,EAAU3hG,KAAKzV,OAAQ,iBAAkBy1C,EAAQ,KAAM,KAAMk2D,GACxFl2F,KAAKzV,OAAOihC,sBAEX,CACD,GAAIq6E,GAActjH,EAAOknB,oBAAoBk4F,EAAU3hG,KAAKzV,OAAQ,iBAAkBy1C,EACtFvS,wBAAqBuS,EAAQ,iBAAkBz9C,GAC/CqJ,EAAesqG,EAAU2P,GAEzB7lG,KAAKklG,cACLllG,KAAKslG,eAAepc,KAAOlpF,KAAKuyF,OAAO3nG,QAAQtE,cAAc,4BAC7D0Z,KAAKslG,eAAe5kD,aACpB1gD,KAAKzV,OAAO6lB,GAAG48E,GAAyBhtF,KAAKsM,eAAgBtM,MAC7DA,KAAKslG,eAAe5b,kBAIxB,IAAKlnG,oBAAkBD,EAAO+W,SAAY9W,oBAAkBD,EAAO+W,OAAOwsG,KAClEtjH,oBAAkBD,EAAO+W,OAAOwsG,GAAG9lF,QAWvC4lF,EAAmB5lF,QACfz9B,OAAQA,EAAQb,OAAQw0G,EACxBoN,gBAAiBtjG,KAAKqlG,SAAU9B,aAAcvjG,KAAK8gC,KAAM3wC,UAAW6P,KAAKuyF,aAb7B,CAChD,GAAIrmG,GAAO3J,EAAO+W,OAAOwsG,GAAG9lF,MACR,iBAAT9zB,KACPA,EAAO1D,WAAS0D,EAAMzD,SAE1ByD,GACI3J,OAAQA,EAAQb,OAAQw0G,EACxBoN,gBAAiBtjG,KAAKqlG,SAAUl1G,UAAW6P,KAAKuyF,WAWhEwS,EAAmB5iH,UAAUujH,YAAc,SAAU33G,EAAKg4G,GAKtD,IAAK,GAJDvP,GACA90G,EAASqkH,EAAcz/G,cAAc,sBACrCs/G,EAAqB,GAAI5lG,MAAKmlG,SAASp3G,EAAIpK,MAAMqc,KAAKzV,OAAQyV,KAAKhR,eAAgBgR,KAAKzV,OAAOoqB,gBAE1F9kB,EAAK,EAAGklB,EADH/U,KAAK2U,eAAexxB,QACI0M,EAAKklB,EAAU3xB,OAAQyM,IAAM,CAC/D,GAAItN,GAASwyB,EAAUllB,EACnB9B,GAAIpC,MAAQpJ,EAAOoJ,MACnB6qG,EAAUj0G,EAAOX,OAGzB,GAAKY,oBAAkBuL,EAAIuL,SAAY9W,oBAAkBuL,EAAIuL,OAAOwsG,KAC5DtjH,oBAAkBuL,EAAIuL,OAAOwsG,GAAG7D,OAQpC2D,EAAmB3D,OAAQ1/G,OAAQwL,EAAKrM,OAAQA,EAAQ6I,OAAQyV,KAAKzV,OAAQk5G,cAAejN,QARhD,CAC5C,GAAItqG,GAAO6B,EAAIuL,OAAOwsG,GAAG7D,KACL,iBAAT/1G,KACPA,EAAO1D,WAAS0D,EAAMzD,SAE1ByD,GAAO3J,OAAQwL,EAAKrM,OAAQA,EAAQ6I,OAAQyV,KAAKzV,OAAQk5G,cAAejN,MAMhFuO,EAAmB5iH,UAAUwwG,eAAiB,SAAU5kG,GACpD,GACIi4G,GACAC,EAAOjmG,KAAKuyF,OAAO3nG,QAAQtE,cAAc,2BAC7C0/G,GAAchmG,KAAKqlG,SAAStC,eAC5B,IAAI6C,GAAqB,GAAI5lG,MAAKmlG,SAASp3G,EAAIpK,MAAMqc,KAAKzV,OAAQyV,KAAKhR,eAAgBgR,KAAKzV,OAAOoqB,eACnG,IAAI5mB,EAAI0c,eAAgB,CACpB,GAAI7f,GAAUoV,KAAKsyF,OAAOhsG,cAAc,sBACpC4/G,MAAY,EAChB,IAAIt7G,EAAQiB,SAAS,GAAGjK,MACpBskH,EAAYt7G,EAAQiB,SAAS,GAAGjK,UAGhC,IAAK2N,cAAe/M,oBAAkBoI,EAAQiB,SAAS,GAAGslF,eAGrD,CACD,GAAIg1B,GAAWv7G,EAAQtE,cAAc,aACrC4/G,GAAyB,YAAbn4G,EAAIpK,KAAqBwiH,EAASp1G,QACzCvO,oBAAkB2jH,EAASh1B,eAExBg1B,EAASvkH,MADTukH,EAASh1B,cAAc,GAAGvvF,UANlCskH,GAAYt7G,EAAQtE,cAAc,SAAS6qF,cAAc,GAAGvvF,KAUpEoe,MAAK4jG,UAAU1rB,eAAenqF,EAAI1L,MAAO2jH,EAAaE,OAGtD,IAAK1jH,oBAAkBuL,EAAIuL,SACtB9W,oBAAkBuL,EAAIuL,OAAOwsG,KAAQtjH,oBAAkBuL,EAAIuL,OAAOwsG,GAAGpC,MAQtEkC,EAAmBlC,KAAKuC,EAAMl4G,EAAKi4G,EAAahmG,KAAK4jG,eARwB,CAC7E,GAAI13G,GAAO6B,EAAIuL,OAAOwsG,GAAGpC,IACL,iBAATx3G,KACPA,EAAO1D,WAAS0D,EAAMzD,SAEhByD,GAAOtB,QAASq7G,EAAM1jH,OAAQwL,EAAKwE,SAAUyzG,EAAahB,QAAShlG,KAAK4jG,YAM1F5jG,KAAKuoC,eAETw8D,EAAmB5iH,UAAUyqD,sBAAwB,WACjD5sC,KAAKuoC,eAETw8D,EAAmB5iH,UAAUojH,cAAgB,SAAUhjH,GACnDyd,KAAK4jG,UAAUrrB,0BAA0Bh2F,EAAOF,OAC5CkN,eAAeyQ,KAAKzV,OAAO+iC,eAC3BttB,KAAKzV,OAAOoJ,eAAgBghB,gBAAkBxxB,QAAS6c,KAAK2U,eAAexxB,WAAa,GAE5F6c,KAAKuoC,aACL,IAAI69D,GAAYpmG,KAAKzV,OAAOye,eAAiB,gBAAkB,iBAE3Dq9F,EADMrmG,KAAKzV,OAAOK,QAAQtE,cAAc,kBAAoB/D,EAAOoJ,IAAM,MAAMzC,cAClE5C,cAAc8/G,EAC3BC,IACAA,EAAO57G,UAAU5I,OAAO,eAGhCkjH,EAAmB5iH,UAAU0rB,QAAU,WACnC7N,KAAKuoC,eAKTw8D,EAAmB5iH,UAAUs1F,gBAAkB,WAC3C,OAASp1F,MAAO2d,KAAKjS,IAAI1L,MAAOkQ,SAAUyN,KAAKqlG,SAAStC,kBAE5DgC,EAAmB5iH,UAAUmkH,mBAAqB,WAoB9C,MAnBAtmG,MAAKklG,aAAc,EACnBllG,KAAKslG,eAAe9c,YAAYxoF,KAAKyI,SACrCzI,KAAKslG,eAAe3c,iBAAiB3oF,KAAKyI,SAC1CzI,KAAKuyF,OAAOnoD,UACJx8B,MAAO5N,KAAKslG,eAAejc,SAASh2E,KAAKrT,KAAKslG,gBAC9Chc,aACIxjF,QAAS9F,KAAKslG,eAAehd,kBAAkB,gBAC/CrrE,SAAU,YAAassE,WAAW,KAItC37E,MAAO5N,KAAKslG,eAAejc,SAASh2E,KAAKrT,KAAKslG,gBAC9Chc,aAAersE,SAAU,SAAUnX,QAAS9F,KAAKslG,eAAehd,kBAAkB,kBAE1FtoF,KAAKslG,eAAen1G,UAAY6P,KAAKuyF,OACrCvyF,KAAKslG,eAAeh3G,IAAM0R,KAAKuyF,OAAO3nG,QACtCoV,KAAKslG,eAAeh3G,IAAI7D,UAAUqE,IAAI,kBACtCkR,KAAKslG,eAAeh3G,IAAI7D,UAAU5I,OAAO,oBACzCme,KAAKkrC,UAAY,QACVlrC,KAAKslG,eAAe1c,KAAKriG,WAEpCw+G,EAAmB5iH,UAAUmqB,eAAiB,SAAUpd,GAChD8Q,KAAKklG,aACLllG,KAAKzV,OAAOotB,QAAQuP,GAAuBh4B,IAG5C61G,KCrVPwB,GAAgC,WAKhC,QAASA,GAAeh8G,EAAQoqB,EAAgB3lB,GAC5CgR,KAAKzV,OAASA,EACdyV,KAAKwmG,cAAe,EACpBxmG,KAAKymG,aAAe,GAAItxF,IAAmB5qB,GAC3CyV,KAAKghC,mBAmET,MA5DAulE,GAAepkH,UAAU0rB,QAAU,WAC/B7N,KAAKiuC,sBACLjuC,KAAKymG,aAAal+D,eAEtBg+D,EAAepkH,UAAU4oD,WAAa,SAAUtiC,GAC5CzI,KAAKymG,aAAa17D,WAAWtiC,GAC7BzI,KAAKzV,OAAOyoB,IAAI,uBAAyBzwB,OAAQkmB,EAAQlmB,UAE7DgkH,EAAepkH,UAAUomD,YAAc,WACnCvoC,KAAKiuC,sBACLjuC,KAAKymG,aAAal+D,cACdvoC,KAAKwmG,cACLxmG,KAAKzV,OAAOsoB,OxDmWE,qBwDhWtB0zF,EAAepkH,UAAUyqD,sBAAwB,SAAUjB,GACvD3rC,KAAKymG,aAAal+D,eAMtBg+D,EAAepkH,UAAUguB,cAAgB,WACrC,MAAO,kBAEXo2F,EAAepkH,UAAUkqB,YAAc,SAAUnd,GAC7C8Q,KAAKzV,OAAOotB,QAAQkqB,GAAoB3yC,IAE5Cq3G,EAAepkH,UAAUmqB,eAAiB,SAAUpd,GAChD8Q,KAAKzV,OAAOotB,QAAQuP,GAAuBh4B,IAE/Cq3G,EAAepkH,UAAUukH,cAAgB,SAAUx3G,GAC3Cd,EAAgB4R,KAAKzV,UACrByV,KAAKzV,OAAOsoB,OAAOwlD,GAAqBnpE,GACxCA,EAAK+3B,QAAS,IAGtBs/E,EAAepkH,UAAUuoD,kBAAoB,SAAU38C,GACnDiS,KAAKymG,aAAa1c,YAAYh8F,IAElCw4G,EAAepkH,UAAUwrD,kBAAoB,SAAUz+C,GACnD8Q,KAAKymG,aAAaxc,iBAClBjqF,KAAKymG,aAAal+D,eAEtBg+D,EAAepkH,UAAU6+C,iBAAmB,WACpChhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GxDiTO,oBwDjTkBpQ,KAAKqM,YAAarM,MACvDA,KAAKzV,OAAO6lB,GAAG48E,GAAyBhtF,KAAKsM,eAAgBtM,MAC7DA,KAAKzV,OAAO6lB,GAAG45E,GAAoBhqF,KAAK0mG,cAAe1mG,QAE3DumG,EAAepkH,UAAU8rD,oBAAsB,WACvCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IxDySO,oBwDzSmB7X,KAAKqM,aAC3CrM,KAAKzV,OAAOstB,IAAIm1E,GAAyBhtF,KAAKsM,gBAC9CtM,KAAKzV,OAAOstB,IAAImyE,GAAoBhqF,KAAK0mG,iBAEtCH,KCnFP/mF,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAUnF6mF,GAA6B,SAAU3kF,GAMvC,QAAS2kF,GAAYp8G,EAAQoqB,EAAgB3lB,EAAgB0/F,GACzD,GAAIhmF,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQoqB,EAAgB3lB,IAAmBgR,IAIzE,OAHA0I,GAAMne,OAASA,EACfme,EAAM89F,cAAe,EACrB99F,EAAMk+F,gBAAkB,GAAInY,IAAgBlkG,EAAQmkG,GAC7ChmF,EAyDX,MAnEA8W,IAAUmnF,EAAa3kF,GAiBvB2kF,EAAYxkH,UAAU0rB,QAAU,WAC5B7N,KAAK4mG,gBAAgBr+D,eAEzBo+D,EAAYxkH,UAAU4oD,WAAa,SAAUtiC,GACzCzI,KAAK4mG,gBAAgB77D,WAAWtiC,IAEpCk+F,EAAYxkH,UAAUomD,YAAc,WAChCvoC,KAAK4mG,gBAAgBr+D,cACjBvoC,KAAKwmG,cACLxmG,KAAKzV,OAAOsoB,OzDuVE,qByDpVtB8zF,EAAYxkH,UAAUuoD,kBAAoB,SAAU38C,GAChDiS,KAAK4mG,gBAAgB7c,YAAYh8F,IAErC44G,EAAYxkH,UAAUyqD,sBAAwB,SAAUjB,GAChDA,EACA3rC,KAAK4mG,gBAAgBnU,eAGrBzyF,KAAKuoC,eAGbo+D,EAAYxkH,UAAUwrD,kBAAoB,SAAUz+C,GAC3CA,EAAKy8C,eAKN3rC,KAAK4mG,gBAAgBjU,eAAezjG,EAAKnB,IAAI1L,QAJ7C2d,KAAK4mG,gBAAgB3c,iBACrBjqF,KAAK4mG,gBAAgBr+D,gBAO7Bo+D,EAAYxkH,UAAU+1F,eAAiB,SAAUrzC,EAAWovD,EAAeC,EAAYzuG,EAAW+M,EAAW4hB,EAAc+/E,EAAgBC,GAEvIp0F,KAAK4mG,gBAAgB1uB,eAAerzC,EAAWovD,EAAeC,EAAYzuG,EAAW+M,EAAW4hB,EAAc+/E,EAAgBC,IAKlIuS,EAAYxkH,UAAUs1F,gBAAkB,WACpC,MAAOz3E,MAAK4mG,gBAAgBnvB,mBAMhCkvB,EAAYxkH,UAAUguB,cAAgB,WAClC,MAAO,eAEJw2F,GACTJ,ICvEE3pF,GAAwB,WAKxB,QAASA,GAAOryB,EAAQoqB,EAAgB3lB,GACpCgR,KAAKva,UAAY,MACjBua,KAAK43F,gBAAiB,EACtB53F,KAAK6mG,gBAAiB,EACtB7mG,KAAK0b,SAAU,EACf1b,KAAKzY,UACLyY,KAAKmiG,aACLniG,KAAK8mG,YACL9mG,KAAK+mG,eAAiB,GACtB/mG,KAAKrc,MAASqjH,KAAQjC,GAAoB/N,SAAYuP,GAAgBU,MAASN,IAE/E3mG,KAAKsmE,iBACD57E,SAAU,WAAY67E,SAAU,WAAYC,MAAO,QAASC,YAAa,cAAeC,mBAAoB,qBAC5GC,SAAU,WAAYC,gBAAiB,kBAAmBC,SAAU,WAAYC,WAAY,cAEhG9mE,KAAKknG,gBAAmB7kH,MAAO,GAAIymD,QAAQ,GAE3C9oC,KAAKmnG,iBAAmB,IAAK,IAAK,KAClCnnG,KAAKonG,iBAAmB,IAAK,IAAK,KAClCpnG,KAAKyoF,mBACLzoF,KAAKzV,OAASA,EACdyV,KAAK2U,eAAiBA,EACtB3U,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBACLhhC,KAAK+3F,sBAmoCT,MA5nCAn7E,GAAOz6B,UAAUohB,OAAS,SAAUvgB,GAChC,KAAIP,WAASC,UAAU,gBAAiBM,IAAuC,eAAhCgd,KAAKzV,OAAO8R,iBACvD5Z,WAASC,UAAU,gCAAiCM,IADxD,CAIA,GAAIM,GAAO0c,KAAKzV,MAGhB,IAFAyV,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKqnG,8BACmC,cAApCrnG,KAAKzV,OAAOoqB,eAAehxB,MACvBL,EAAKH,QAAQC,OAAQ,CACrB,GAAIkkH,GAAWtnG,KAAKzV,OAAOK,QAAQtE,cAAc,eAC7CghH,IACAzlH,SAAOylH,EAEX,IAAI1kG,GAAc,GAAIC,IAAY7C,KAAKhR,eAAgBsgB,WAASsN,OAAQt5B,GACpE8B,MAAM,EACO4a,MAAKhR,eAAeI,WAAW,uBACrC22C,gBAAgBz2B,WAASsN,OAAQ,GAAI8kF,IAAmB1hG,KAAKzV,OAAQyV,KAAKhR,iBACrFgR,KAAK6J,eAAiB7J,KAAKhR,eAAeI,WAAW,kBACrDwT,EAAYhY,QAAUoV,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,iBACnE1D,EAAM4a,KAAKie,eACP37B,KAAO0d,KAAKzY,OACa,UAAzBjE,EAAK+Y,gBACO/Y,EAAKitD,uBAAuBjqD,cAAc,SAChDwF,YAAY8W,EAAYhY,SAG9BoV,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,SAASwF,YAAY8W,EAAYhY,QAElF,IAAI28G,GAAUvnG,KAAKzV,OAAOK,QAAQtE,cAAc,mBAChD0Z,MAAKpV,QAAUgY,EAAYW,OAAOne,EAAK9B,EAAK4S,aAAc,KAAM,KAAM0M,EAAYhY,QAClF,IAAI48G,GAASxnG,KAAKpV,QAAQtE,cAAc,sBACpCkhH,KACAA,EAAO1+G,UAAY,gCAEnBy+G,IACAA,EAAQz+G,UAAY,gCAExB,IAAI4wC,MAAYruC,MAAMC,KAAK0U,KAAKpV,QAAQxE,iBAAiB,uBACrDszC,GAAOt2C,QACPs2C,EAAOA,EAAOt2C,OAAS,GAAGqH,UAAUqE,IAAI,0BAE5CkR,KAAK0gD,aACL1gD,KAAKzV,OAAOsoB,OAAOkU,IAAuBC,KAAM,cAS5DpK,EAAOz6B,UAAU8iG,iBAAmB,WAChCjlF,KAAKuuC,yBAAyBhE,qBAAqBvqC,KAAKzd,SAG5Dq6B,EAAOz6B,UAAU2oD,eAAiB,SAAU/8C,GACxC,GAAIpK,GAAOoK,EAAIuL,OAAO3V,MAAQqc,KAAKzV,OAAOoqB,eAAehxB,IACzDqc,MAAKsoC,aAAe,GAAItoC,MAAKrc,KAAKA,GAAMqc,KAAKzV,OAAQyV,KAAKzV,OAAOoqB,eAAgB3U,KAAKhR,eAAgBgR,KAAKwiG,gBAAiBxiG,OAOhI4c,EAAOz6B,UAAU0rB,QAAU,WACvB,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OAC9B,IAAKq2D,IAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,mBAA/F,CAaA,GAVI0Z,KAAKsoC,cACLtoC,KAAKsoC,aAAaz6B,UAGjB7N,KAAKzV,OAAOwuG,aACb/4F,KAAK2U,eAAexxB,YAExB6c,KAAKynG,kBACLznG,KAAKiuC,sBACLjuC,KAAKmhD,eAC4B,cAA7BnhD,KAAK2U,eAAehxB,MAAwBqc,KAAK2U,eAAe68D,sBAEhE,IAAK,GADDk2B,GAAe1nG,KAAKpV,QAAQxE,iBAAiB,wBACxC3C,EAAI,EAAGA,EAAIikH,EAAatkH,OAAQK,IACrCikH,EAAajkH,GAAG0tF,cAAc,GAAGtjE,SAGzC,IAAI7N,KAAKpV,QAAS,CACd/I,SAAOme,KAAKpV,QACZ,IAAI+8G,GAAmB3nG,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,eAChE0Z,MAAKzV,OAAOsL,gBAAkB8xG,GAC9B9lH,SAAO8lH,MAInB/qF,EAAOz6B,UAAU41G,oBAAsB,WAC/B/3F,KAAKhR,gBACLgR,KAAKhR,eAAeq/C,wBAAwBruC,KAAMA,KAAKzV,OAAOsW,iBAAkB4O,yBAAuBo5B,WAG/GjsB,EAAOz6B,UAAU87B,YAAc,SAAUn2B,GACrC,GACI1C,GAAM,GAAIozB,OAEd,OADApzB,GAAIwK,MAAQoQ,KAAK8e,gBACV15B,GAEXw3B,EAAOz6B,UAAU28B,cAAgB,WAE7B,GAAIlvB,KACJ,IAAIoQ,KAAKzV,OAAOwe,cACZ,IAAK,GAAI9gB,GAAI,EAAGlD,EAAMib,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAQ6E,EAAIlD,EAAKkD,IACrE2H,EAAM1L,KAAK8b,KAAKme,gBAAiB7O,WAAS8nB,gBAG9Cp3B,KAAKzV,OAAOyyB,gBAAkBhd,KAAKzV,OAAOmL,YAC1C9F,EAAM1L,KAAK8b,KAAKme,gBAAiB7O,WAAS+nB,eAE1Cr3B,KAAKzV,OAAOyJ,iBAAmD,UAAhCgM,KAAKzV,OAAO8R,iBAC3CzM,EAAM1L,KAAK8b,KAAKme,gBAAiB7O,WAASgoB,cAE9C,KAAK,GAAIznC,GAAK,EAAGkG,EAAKiK,KAAKzV,OAAO2L,aAAcrG,EAAKkG,EAAG3S,OAAQyM,IAAM,CAClE,GAAI0xB,GAAQxrB,EAAGlG,EACfD,GAAM1L,KAAK8b,KAAKme,aAAaoD,IAKjC,MAHoC,UAAhCvhB,KAAKzV,OAAO8R,iBACZzM,EAAM1L,KAAK8b,KAAKme,gBAAiB7O,WAASgoB,eAEvC1nC,GAEXgtB,EAAOz6B,UAAUg8B,aAAe,SAAU57B,EAAQi3B,GAC9C,GAAI5S,IACAje,QAAWpG,EAAOoG,QAClBy2B,YAAc,EACdF,MAAS,GACT38B,OAAUA,EACVi3B,SAAYA,GAAsBlK,WAASsN,OAC3C51B,YAAgBohD,MAAOpoC,KAAK8gC,KAAKvE,YAAY,mBAEjD,OAAO,IAAIvjB,IAAKpS,IAOpBgW,EAAOz6B,UAAUqmG,YAAc,WAC3B,GAAIz6F,GAAMiS,KAAKzV,OAAOiN,iBAAiBwI,KAAK6kC,UAC5C7kC,MAAK4nG,eAAiB5nG,KAAK6nG,4BAA4B95G,GACvDiS,KAAK8nG,iBAAmB9nG,KAAK2U,eAAexxB,QAAQ6c,KAAK4nG,eAEzD,KAAK,GADDG,GAAW37G,MAAM2K,QAAQiJ,KAAKpe,OAASoe,KAAKpe,OAASoe,KAAKpe,OACrD6B,EAAI,EAAGsB,EAAMgjH,EAAS3kH,OAAQK,EAAIsB,EAAKtB,IAAK,CACjD,GAAIpB,GAAQ0L,EAAI2c,kBAAoB3c,EAAIzF,gBAAkB0X,KAAK6kC,SAC/D7kC,MAAKgoG,qBACD3lH,MAAOA,EAAOsJ,IAAKoC,EAAIpC,IAAK8F,aAAc1D,EAAI2c,kBAAmBnY,SAAUyN,KAAKzN,SAChF3Q,MAAOmmH,EAAStkH,GAAIgC,UAAWua,KAAKva,UACpC+M,UAAWwN,KAAKxN,UAAW4hB,aAAcpU,KAAKoU,aAAcikE,qBAAuBC,kBAEvF,IAAIxwF,GAAQkY,KAAK6nG,4BAA4B95G,EACzCjG,IAAS,IAAMsE,MAAM2K,QAAQiJ,KAAKpe,OAClCoe,KAAK2U,eAAexxB,QAAQ2E,GAASkY,KAAKgoG,oBAG1ChoG,KAAK2U,eAAexxB,QAAQe,KAAK8b,KAAKgoG,qBAG9ChoG,KAAK2U,eAAexxB,QAAU6c,KAAK2U,eAAexxB,QAClD6c,KAAKzV,OAAOw6C,YAEhBnoB,EAAOz6B,UAAU0lH,4BAA8B,SAAU95G,GAErD,IAAK,GADDukB,GAAOtS,KAAK2U,eAAexxB,QACtBM,EAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACxC,GAAI6uB,EAAK7uB,GAAGkI,MAAQoC,EAAIpC,KAAQoC,EAAI2c,mBAAqB1K,KAAKzV,OAAOwpC,eAAehmC,EAAIpC,KAAKtJ,QAAU0L,EAAIzF,gBACvG,MAAO7E,EAGf,QAAQ,GAOZm5B,EAAOz6B,UAAU6+D,iBAAmB,SAAUh+D,GACtCuM,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BtqC,EAAEgY,KAAO,KAEb,IAAI9L,GAAQ8Q,KAAKylB,UAObrjB,YAAa,YAAaze,KAAMujC,KANhC8gF,oBAAqBhoG,KAAKgoG,oBAE1BC,uBAAyBzlH,oBAAkBwd,KAAKzd,YAA8BwK,GAApBiT,KAAKzd,OAAOF,MAEtEc,QAAS6c,KAAK2U,eAAexxB,QAASif,YAAa,YAAaze,KAAMujC,GAI1ElnB,MAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,EAAGkM,IACrD8Q,KAAKylB,UAAW,GAEpB7I,EAAOz6B,UAAUu+D,WAAa,WAC1B9W,eAAa96C,IAAIkR,KAAKzV,OAAO+Y,mBAAoB,QAAStD,KAAKkoG,sBAAuBloG,OAE1F4c,EAAOz6B,UAAUg/D,aAAe,WAC5BvX,eAAa/nD,OAAOme,KAAKzV,OAAO+Y,mBAAoB,QAAStD,KAAKkoG,wBAEtEtrF,EAAOz6B,UAAUulC,kBAAoB,SAAU1kC,GACvCA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,SACvCzxB,KAAKzV,OAAO2+B,iBAAiBz+B,UAAUqE,IAAI,gBAC3CkR,KAAKuD,WAGbqZ,EAAOz6B,UAAUgmH,mBAAqB,WACD,cAA7BnoG,KAAK2U,eAAehxB,MAAwBqc,KAAK2U,eAAexxB,QAAQC,SACvE4c,KAAKzV,OAAO8O,wBAAwBjW,QAAU4c,KAAKzV,OAAOgtC,oBAC3Dv3B,KAAKgN,aACLhN,KAAKzV,OAAO0jD,oB1D1KK,kB0D0KuCjuC,KAAKmoG,sBAGrEvrF,EAAOz6B,UAAU6qB,WAAa,WAE1B,GADAhN,KAAKzV,OAAOstB,IAAI+O,GAAqB5mB,KAAKgN,YACtChN,KAAKzV,OAAO2L,aAAa9S,QAAU4c,KAAK2U,eAAexxB,QAAQC,OAAQ,CACvE,GAAIE,GAAO0c,KAAKzV,MAChByV,MAAK43F,gBAAiB,EACtB53F,KAAK+M,aAAc,CACnB,KAAK,GAAIld,GAAK,EAAGkG,EAAKzS,EAAKqxB,eAAexxB,QAAS0M,EAAKkG,EAAG3S,OAAQyM,IAAM,CACrE,GAAI9B,GAAMgI,EAAGlG,EACbmQ,MAAKk4E,eAAenqF,EAAI1L,MAAO0L,EAAIwE,SAAUxE,EAAInM,MAAOmM,EAAItI,UAAWsI,EAAIyE,UAAWzE,EAAIqmB,aAAcrmB,EAAIsqF,kBAAmBtqF,EAAIuqF,gBAEvIt4E,KAAK+M,aAAc,EACnB/M,KAAKynG,kBACLznG,KAAK43F,gBAAiB,IAM9Bh7E,EAAOz6B,UAAU6+C,iBAAmB,WAC5BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,G1DsNa,wB0DtNkBpQ,KAAK+3F,oBAAqB/3F,MACrEA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAK0nB,kBAAmB1nB,MACxDA,KAAKzV,OAAO6lB,G1DlIQ,qB0DkIkBpQ,KAAKghD,iBAAkBhhD,MAC7DA,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKuxD,kBAAmBvxD,MACnEA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKiyD,aAAcjyD,MACrDA,KAAKzV,OAAO6lB,GAAG0kB,GAA8B90B,KAAK+N,sBAAuB/N,MACzEA,KAAKzV,OAAO6lB,GAAGslB,GAAwB11B,KAAKuD,OAAQvD,MACpDA,KAAKzV,OAAO6lB,GAAGwW,GAAqB5mB,KAAKgN,WAAYhN,MACrDA,KAAKzV,OAAO6lB,G1DcS,oB0DdkBpQ,KAAKooG,gBAAiBpoG,MAC7DA,KAAKqoG,gBAAkBroG,KAAKs0D,aAAajhD,KAAKrT,MAC9C4pC,eAAa96C,IAAI3I,SAAU,QAAS6Z,KAAKqoG,gBAAiBroG,MAC1DA,KAAKzV,OAAO6lB,G1DOI,a0DPkBpQ,KAAKsoG,iBAAkBtoG,MACzDA,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKuoG,uBAAwBvoG,MAC1DA,KAAKzV,OAAO6lB,GAAG,uBAAwBpQ,KAAKgN,WAAYhN,MACxDA,KAAKzV,OAAO6lB,G1DoIW,sB0DpIkBpQ,KAAKs0D,aAAct0D,MAC5DA,KAAKzV,OAAOy2C,iB1DlNS,kB0DkNgChhC,KAAKmoG,mBAAmB90F,KAAKrT,SAKtF4c,EAAOz6B,UAAU8rD,oBAAsB,WACnCrE,eAAa/nD,OAAOsE,SAAU,QAAS6Z,KAAKqoG,iBACxCroG,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,I1D6La,wB0D7LmB7X,KAAK+3F,qBACjD/3F,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAK0nB,mBACtC1nB,KAAKzV,OAAOstB,I1D3JQ,qB0D2JmB7X,KAAKghD,kBAC5ChhD,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKuxD,mBACjDvxD,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKiyD,cACxCjyD,KAAKzV,OAAOstB,IAAIid,GAA8B90B,KAAK+N,uBACnD/N,KAAKzV,OAAOstB,IAAI6d,GAAwB11B,KAAKuD,QAC7CvD,KAAKzV,OAAOstB,I1DdI,a0DcmB7X,KAAKsoG,kBACxCtoG,KAAKzV,OAAOstB,I1DXS,oB0DWmB7X,KAAKooG,iBAC7CpoG,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKuoG,wBACnCvoG,KAAKzV,OAAOstB,I1D+GW,sB0D/GmB7X,KAAKs0D,gBAEnD13C,EAAOz6B,UAAUimH,gBAAkB,SAAUl5G,GACzC8Q,KAAKknG,eAAep+D,QAAS,GAejClsB,EAAOz6B,UAAU+1F,eAAiB,SAAUrzC,EAAWszC,EAAgBC,EAAa3yF,EAAW+M,EAAW4hB,EAAcikE,EAAmBC,GACvI,GAEIriC,GAFAvtC,EAAQ1I,KACR1c,EAAO0c,KAAKzV,MAMhB,IAJAyV,KAAKzd,OAASe,EAAK2xB,6BAA6B4vB,GACf,cAA7B7kC,KAAK2U,eAAehxB,MAAwBqc,KAAK2U,eAAe68D,wBAChE2G,EAAiBn4E,KAAKwoG,gBAAgB3jE,IAErC7kC,KAAKzd,OAAV,CAMA,GAHiC,cAA7Byd,KAAK2U,eAAehxB,OACpBsyD,EAAa3yD,EAAKggB,mBAAmBhd,cAAc,QAAW0Z,KAAKzd,OAAOF,MAAQ,sBAEjFG,oBAAkBwd,KAAKzd,OAAOumB,kBAAoB9I,KAAKzd,OAAOumB,eAE/D,WADA9I,MAAKzV,OAAOyoB,IAAI,0BAA4BC,WAAYjT,KAAKmQ,gBAAiB+C,WAAYlT,KAAKzd,OAAO8F,YAG1G,IAAI+F,EAAgB9K,GAKhB,WAJAA,GAAKuvB,OAAOwlD,IACR31D,SAAU1C,KAAMy/B,QAASz/B,KAAKk4E,eAAgB5f,KAAMzzB,EAAWgmD,KAAM1S,EAAgB2S,KAAM1S,EAAa2S,KAAMtlG,EAC9GulG,KAAMx4F,EAAWy4F,KAAM72E,EAAcigF,KAAMhc,EAAmBic,KAAMhc,GAe5E,IAXAt4E,KAAKva,UAAYA,IAAwB2G,MAAM2K,QAAQqhF,GAAe,KAAO,OAC7Ep4E,KAAKpe,MAAQw2F,EACbp4E,KAAKxN,UAAYA,IAAa,EAC9BwN,KAAKoU,aAAepU,KAAKoU,aAAgB5xB,oBAAkB4xB,GAA+BpU,KAAKzV,OAAOoqB,eAAeP,aAA1CA,EAC3EpU,KAAK6kC,UAAYA,EACjB7kC,KAAKzN,SAAW4lF,EAChBC,GAAe51F,oBAAkB41F,IAAgBA,EAAYnoF,WACpC,WAArB+P,KAAKzd,OAAOoB,MAA0C,SAArBqc,KAAKzd,OAAOoB,OAC7Cqc,KAAKxN,WAAY,GAErBlP,EAAKwyF,uBAAuBjxC,GAAW9iD,aAAa,gBAAiB,QACjEk0D,GAA2C,cAA7Bj2C,KAAK2U,eAAehxB,KAAsB,CACxD,GAAIy0F,EAAYh1F,OAAS,IAAO4c,KAAK6mG,gBACjC7mG,KAAKyoG,kBAAkBzoG,KAAKzd,OAAQ61F,GAGpC,MAFAp4E,MAAK0oG,gBAAkBtwB,EAAYh1F,OAAS,EAAI,GAAK4c,KAAK8gC,KAAKvE,YAAY,4BAC3Ev8B,MAAKynG,iBAGLxxD,GAAWr0D,QAAUw2F,IACrBniC,EAAWr0D,MAAQw2F,GAGtB51F,oBAAkBwd,KAAKzd,OAAO+M,QAO/B0Q,KAAKzY,OAAOyY,KAAKzd,OAAOF,OAAS+1F,GANjCp4E,KAAK2oG,kBAAkBvwB,GACnBp4E,KAAK+M,aAA4C,cAA7B/M,KAAK2U,eAAehxB,OACxCsyD,EAAWr0D,MAAQoe,KAAKzY,OAAOyY,KAAKzd,OAAOF,QAMnD,IAAIumH,IACAvmH,MAAO2d,KAAK6kC,UACZp/C,UAAWA,EACX+M,UAAWA,EACX4hB,aAAcA,EACd7hB,SAAUyN,KAAKzN,SACf3Q,MAAOoe,KAAKpe,MACZ+B,KAAMqc,KAAKzd,OAAOoB,KAEHqc,MAAKzV,OAAOoqB,eAAexxB,QAAQmW,OAAO,SAAUuvG,GACnE,MAAQA,GAAQxmH,QAAUqmB,EAAMm8B,YAEnBzhD,OAAS,IAAMZ,oBAAkBwd,KAAKyoF,gBAAgBzoF,KAAK6kC,YACxE7kC,KAAKyoF,gBAAgBzoF,KAAK6kC,WAAW3gD,KAAK0kH,GAG1C5oG,KAAKyoF,gBAAgBzoF,KAAK6kC,YAAc+jE,GAExC5oG,KAAK8oG,wBAAwB9oG,KAAKzd,OAAOF,QAG7C2d,KAAKwoF,gBAET5rE,EAAOz6B,UAAUwmH,kBAAoB,SAAUvwB,GAC3C,GAAI2wB,GAAmC,SAArB/oG,KAAKzd,OAAOoB,MAAwC,aAArBqc,KAAKzd,OAAOoB,KACzD,GAAIwP,MAAKilF,GAAetgF,WAAWsgF,EACvCp4E,MAAKzY,OAAOyY,KAAKzd,OAAOF,OAAS2d,KAAKgpG,qBAAqBD,EAAY/oG,KAAKzd,SAGhFq6B,EAAOz6B,UAAU8mH,QAAU,SAAUl7G,GAGjC,IAAK,GAFDmtF,IAAO,EACPlrB,EAASxoE,OAAOC,QACXhE,EAAI,EAAGA,EAAIusE,EAAO5sE,OAAQK,IAAK,CACpC,GAAImO,GAAMpK,OAAOC,KAAKsG,EAAIiiE,EAAOvsE,IACd,KAAfmO,EAAIxO,QAA2B,QAAXwO,EAAI,KACxBspF,GAAO,GAGf,MAAOA,IAEXt+D,EAAOz6B,UAAUovE,kBAAoB,SAAUvuE,GAC3C,GAAIA,EAAEwuC,SAAWxxB,KAAKmQ,gBAGtB,IAAK,GAAItgB,GAAK,EAAGkG,EAAKvO,OAAOC,KAAKzE,EAAEmI,YAAa0E,EAAKkG,EAAG3S,OAAQyM,IAAM,CACnE,GAAI0lB,GAAOxf,EAAGlG,EACd,QAAQ0lB,GACJ,IAAK,UACD,GACIrmB,IACA84G,oBAAqBhoG,KAAKgoG,oBAAqBC,uBAAwBjoG,KAAKzd,OACxEyd,KAAKzd,OAAOF,UAAQ0K,GAAW8B,OAAQ,SAAU1L,QAAS6c,KAAK2U,eAAexxB,QAClFif,YAAa,YAAaze,KAAMk+C,GAAoB5a,QAAQ,EAEhE,IAAIjnB,KAAK43F,gBAAkB53F,KAAKipG,QAAQjmH,EAAEmI,WAAc,SAAI,CAExD,GADA6U,KAAKzV,OAAOsoB,OAAOozB,GAAqB/2C,GACpCA,EAAK+3B,OAOL,YANIzkC,oBAAkBwd,KAAK8nG,kBACvB9nG,KAAK2U,eAAexxB,QAAQqiB,OAAOxF,KAAK2U,eAAexxB,QAAQC,OAAS,EAAG,GAG3E4c,KAAK2U,eAAexxB,QAAQ6c,KAAK4nG,gBAAkB5nG,KAAK8nG,iBAIhE9nG,MAAKkpG,iBAAiBh6G,EAAK+4G,wBAC3BjoG,KAAKmpG,mBACLnpG,KAAKopG,wBACLppG,KAAKynG,kBACLznG,KAAKqpG,eAET,KACJ,KAAK,sBACGrmH,EAAEmI,WAAWoqB,GACbvV,KAAKynG,kBAEAznG,KAAKzV,OAAO4K,aACjB6K,KAAKzV,OAAOstF,sBAAsB,GAEtC,MACJ,KAAK,wBACL,IAAK,OACD73E,KAAKzV,OAAOonE,gBACZ3xD,KAAKopG,2BAKrBxsF,EAAOz6B,UAAUinH,sBAAwB,WACrC,GAAiC,cAA7BppG,KAAK2U,eAAehxB,KAAsB,CAC1C,IAASF,EAAI,EAAGA,EAAIuc,KAAK2U,eAAexxB,QAAQC,OAAQK,IAAK,CACzDuc,KAAKzd,OAASyd,KAAKzV,OAAOorB,2BAA2B3V,KAAK2U,eAAexxB,QAAQM,GAAGkI,IACpF,IAAIysF,GAAcp4E,KAAK2U,eAAexxB,QAAQM,GAAG7B,KAEjD,IADAw2F,GAAe51F,oBAAkB41F,IAAgBA,EAAYnoF,WACxDzN,oBAAkBwd,KAAKzd,OAAO+M,QAG9B,CACD,GAAIsC,GAAMoO,KAAK2U,eAAexxB,QAAQM,GAAGpB,KACzC2d,MAAKzY,OAAOqK,GAAOoO,KAAK2U,eAAexxB,QAAQM,GAAG7B,UAJlDoe,MAAK2oG,kBAAkBvwB,IAMvBihB,EAAgBr5F,KAAKspG,oBAAoBtpG,KAAKzd,OAAOF,UAEO,KAAxD2d,KAAK8mG,SAAS9mG,KAAK2U,eAAexxB,QAAQM,GAAGpB,QACzCG,oBAAkBwd,KAAK8mG,SAAS9mG,KAAK2U,eAAexxB,QAAQM,GAAGpB,QAInEg3G,EAAcz3G,MAAQoe,KAAK2U,eAAexxB,QAAQM,GAAG7B,MAHrDy3G,EAAcz3G,MAAQoe,KAAK8mG,SAAS9mG,KAAKzd,OAAOF,QAO5D,GAA2C,IAAvC2d,KAAK2U,eAAexxB,QAAQC,OAE5B,IAAK,GADD2K,GAAMiS,KAAKzV,OAAO2L,aACbzS,EAAI,EAAGA,EAAIsK,EAAI3K,OAAQK,IAAK,CACjC,GAAI41G,GAAgBr5F,KAAKspG,oBAAoBv7G,EAAItK,GAAGpB,MAChDg3G,IAAyC,KAAxBA,EAAcz3G,QAC/By3G,EAAcz3G,MAAQ,SACfoe,MAAKzY,OAAOwG,EAAItK,GAAGpB,WAM9Cu6B,EAAOz6B,UAAUgnH,iBAAmB,WAChC,GAA2C,IAAvCnpG,KAAK2U,eAAexxB,QAAQC,QAAgB4c,KAAKzV,OAAOK,QAAQtE,cAAc,eAE9E,IAAK,GADDijH,MAAqBl+G,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQxE,iBAAiB,gBAChE3C,EAAI,EAAGsB,EAAMwkH,EAAgBnmH,OAAQK,EAAIsB,EAAKtB,IACnD8lH,EAAgB9lH,GAAG3B,gBAAgB,iBACnCynH,EAAgB9lH,GAAGgH,UAAU5I,OAAO,eAIhD+6B,EAAOz6B,UAAUmnH,oBAAsB,SAAUv7G,GAC7C,GACIsrG,GADAhvG,EAAW,QAAW0D,EAAM,kBAKhC,OAHI1D,KAAa7H,oBAAkBwd,KAAKpV,WACpCyuG,EAAgBr5F,KAAKpV,QAAQtE,cAAc+D,IAExCgvG,GAKXz8E,EAAOz6B,UAAUowF,cAAgB,WAC7BvyE,KAAKopG,wBACLppG,KAAKynG,mBAMT7qF,EAAOz6B,UAAUsrD,eAAiB,SAAU7iC,GACxC,GAAIlC,GAAQ1I,KACRsS,EAAOtnB,EAAsBgV,KAAK2U,eAAexxB,QACrD,KAAKX,oBAAkBooB,GAMnB,MALA5K,MAAK0b,SAAU,EACf9Q,EAAO6oD,QAAQ,SAAUpxE,GAASqmB,EAAM6vE,0BAA0Bl2F,GAAO,KACzE2d,KAAKzV,OAAOoJ,eAAgBghB,gBAAkBxxB,QAAS6c,KAAK2U,eAAexxB,WAAa,GACxF6c,KAAKzV,OAAO6Q,aAAasgB,eACzB1b,KAAK0b,SAAU,EAGnB,IAAIttB,EAAgB4R,KAAKzV,QAErB,WADAyV,MAAKzV,OAAOsoB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAKytC,gBAG5E,KAAShqD,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAC7B6uB,EAAK7uB,GAAGkI,IAAM2mB,EAAK7uB,GAAGkI,KAAOqU,KAAKzV,OAAOiN,iBAAiB8a,EAAK7uB,GAAGpB,OAAOsJ,GAE7E,IAAIutG,GAAS5mF,EAAKvW,IAAI,SAAU4wF,GAAK,MAAOA,GAAEhhG,MAC1C69G,EAAetQ,EAAO5/F,OAAO,SAAU8hB,EAAMm2E,GAAO,MAAO2H,GAAOxxG,QAAQ0zB,KAAUm2E,GACxFvxF,MAAK0b,SAAU,CACf,KAAK,GAAIj4B,GAAI,EAAGsB,EAAMykH,EAAapmH,OAAQK,EAAIsB,EAAKtB,IAChDuc,KAAKu4E,0BAA0Bv4E,KAAKzV,OAAOwpC,eAAey1E,EAAa/lH,IAAIpB,OAAO,EAStF,IAPIkN,eAAeyQ,KAAKzV,OAAO+iC,eAC3BttB,KAAKzV,OAAOoJ,eAAgBghB,gBAAkBxxB,QAAS6c,KAAK2U,eAAexxB,WAAa,GAE5F6c,KAAK0b,SAAU,EACX8tF,EAAapmH,QACb4c,KAAKzV,OAAO6Q,aAAasgB,UAEqB,IAA9C1b,KAAKzV,OAAOoqB,eAAexxB,QAAQC,QAAgB4c,KAAKzV,OAAOK,QAAQtE,cAAc,eAErF,IAAK,GADDmjH,MAAiBp+G,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQxE,iBAAiB,gBAC5D3C,EAAI,EAAGsB,EAAM0kH,EAAYrmH,OAAQK,EAAIsB,EAAKtB,IAC/CgmH,EAAY,GAAG3nH,gBAAgB,iBAC/B2nH,EAAY,GAAGh/G,UAAU5I,OAAO,aAGxCme,MAAKylB,UAAW,EAChBzlB,KAAK0oG,gBAAkB,GACvB1oG,KAAKynG,mBAET7qF,EAAOz6B,UAAU2mH,wBAA0B,SAAUzmH,GAEjD,IAAK,GAAIwN,GAAK,EAAGklB,EADH/U,KAAK2U,eAAexxB,QACI0M,EAAKklB,EAAU3xB,OAAQyM,IAAM,CAC/D,GAAI9B,GAAMgnB,EAAUllB,EACpB,IAAI9B,EAAI1L,QAAUA,GAAS0L,EAAInM,QAAUoe,KAAKpe,OAC1CmM,EAAIwE,WAAayN,KAAKzN,UAAYxE,EAAItI,YAAcua,KAAKva,UACzD,OAAO,EAGf,OAAO,GAEXm3B,EAAOz6B,UAAUmmH,iBAAmB,SAAUp5G,GAC1C8Q,KAAKzd,OAAS2M,EAAKnB,GACnB,IAAI+F,GAAMuE,UAAQnJ,EAAKxN,OAAQ,IAAMwN,EAAK1E,GACtC0E,GAAKw6G,UAAY51G,EACjBkM,KAAKsoC,aAAaC,cAEbz0C,GACLkM,KAAK2pG,iBAAiB3pG,KAAKzd,OAAQ2M,EAAKxN,SAGhDk7B,EAAOz6B,UAAUwnH,iBAAmB,SAAU57G,EAAKrM,EAAQiI,EAAMD,GACzDsW,KAAKsoC,cACLtoC,KAAKsoC,aAAaC,cAEtBvoC,KAAK8qC,eAAe/8C,GACpBiS,KAAKsoC,aAAayC,WAAW/qC,KAAKgrC,cAAcj9C,EAAKrM,EAAQiI,EAAMD,KAGvEkzB,EAAOz6B,UAAU6oD,cAAgB,SAAUj9C,EAAKrM,EAAQiI,EAAMD,GAC1D,GAAIpG,GAAO0c,KAAKzV,OACZyH,EAAajE,EAAIuL,OAAOtH,YAAc1O,EAAK0O,YAAc,UAAY1O,GAAK0O,WAAa1O,EAAK0O,WAC5F1O,EAAKy1B,gBAAgBzT,YACrB3hB,EAAOoK,EAAIuL,OAAO3V,MAAQqc,KAAKzV,OAAOoqB,eAAehxB,IAezD,QAbIA,KAAMoK,EAAIpK,KAAMtB,MAAO0L,EAAI1L,MAAOmxG,YAAazlG,EAAI1F,WACnD2J,WAAYA,EAAY1C,OAAQvB,EAAIuB,OAAQhC,OAAQ,IAAKnK,QAASG,EAAK4S,aACvE4uC,gBAAiBxhD,EAAKqxB,eAAexxB,QAASzB,OAAQA,EAAQ4jB,YAAahiB,EAAKy1B,gBAAgBzT,YAChGsG,SAAU7d,EAAI4d,eAAgByI,aAAc9wB,EAAKqxB,eAAeP,aAChEtI,SAAU/d,EAAI8d,YAAaha,MAAOvO,EAAKuO,MAAO3L,SAAU6H,EAAIke,wBAC5D48E,eAAermG,oBAAkBuL,EAAIuL,OAAOuvF,gBAAyB96F,EAAIuL,OAAOuvF,cAChFppD,QAASz/B,KAAK4pG,cAAcv2F,KAAKrT,MAAO6pG,iBAAkBvmH,EAAKwwF,qBAC/D7qF,UAAY0gG,EAAGhgG,EAAMigG,EAAGlgG,GAAOnH,OAAQwL,EAAKzF,gBAAiByF,EAAIzF,gBACjEmgG,gBAAiBzoF,KAAKyoF,gBAAiB9/C,UAAWrlD,EAAKqlD,UACvDl1B,SAAUnwB,EAAKy1B,gBAAgBtF,WAAYi1E,mBAAoB1oF,KAAK2U,eAAeqvF,sBACnFva,mBAAoBzpF,KAAKzV,OAAOsW,iBAChCtO,SAAUyN,KAAKyoF,gBAAgB16F,EAAI1L,QAAmB,SAATsB,EAAkBqc,KAAKyoF,gBAAgB16F,EAAI1L,OAAO,GAAGkQ,SAAW,UAWrHqqB,EAAOz6B,UAAUo2F,0BAA4B,SAAUl2F,EAAOm2F,GAC1D,GAAIsxB,GACAx3F,EAAOtS,KAAK2U,eAAexxB,OAC/B,IAAIiL,EAAgB4R,KAAKzV,QAAS,CAC9B,GAAI2E,IAASwT,SAAU1C,KAAMy/B,QAASz/B,KAAKu4E,0BAA2BjgB,KAAMj2E,EAAOwoG,KAAMrS,EAEzF,YADAx4E,MAAKzV,OAAOsoB,OAAOwlD,GAAqBnpE,GA4D5C,IAAK,GAzDDgqG,GAAS5mF,EAAKvW,IAAI,SAAU4wF,GAAK,MAAOA,GAAEhhG,MAC1Co+G,EAAkB7Q,EAAO5/F,OAAO,SAAU8hB,EAAMm2E,GAAO,MAAO2H,GAAOxxG,QAAQ0zB,KAAUm2E,IAuDvF/0E,EAASxc,KACJvc,EAAI,EAAGsB,EAAMglH,EAAgB3mH,OAAQK,EAAIsB,GAE9B,UAzDN,SAAUtB,EAAGsB,GACvButB,EAAK7uB,GAAGkI,IAAM2mB,EAAK7uB,GAAGkI,KAAO6wB,EAAOjyB,OAAOiN,iBAAiB8a,EAAK7uB,GAAGpB,OAAOsJ,GAC3E,IAAI+qC,GAAQpkB,EAAKlvB,OACbb,EAASi6B,EAAOjyB,OAAOorB,2BAA2Bo0F,EAAgBtmH,GACtE,IAAIlB,EAAOF,QAAUA,GAAUE,EAAOF,QAAUE,EAAO+F,iBAAmB/F,EAAOmoB,kBAAoB,CACjG,GAAIs/F,GAAcxtF,EAAO7H,eAAexxB,QAAQmW,OAAO,SAAUtW,GAC7D,MAAOA,GAAE2I,MAAQpJ,EAAOoJ,MACzB,EACH,IAAmC,cAA/B6wB,EAAO7H,eAAehxB,OAAyB60F,EAAkB,CACjE,GAAInuF,GAAW,QAAW9H,EAAOF,MAAQ,oBACzCynH,EAAQttF,EAAOjyB,OAAO+Y,mBAAmBhd,cAAc+D,MAEnDy/G,EAAMloH,MAAQ,SACP46B,GAAOj1B,OAAOlF,IAG7B,KAAOq0C,KACCpkB,EAAKokB,GAAO/qC,MAAQpJ,EAAOoJ,KAC3B2mB,EAAK9M,OAAOkxB,EAAO,EAG3B,IAAI+yE,GAAcjtF,EAAOjyB,OAAOurF,uBAAuBvzF,EAAOF,MAE9D,IADAonH,EAAY3nH,gBAAgB,iBACO,cAA/B06B,EAAO7H,eAAehxB,KAAsB,CAC5C,GAAIyiH,GAAY5pF,EAAOjyB,OAAOye,eAAiB,gBAAkB,gBACjEygG,GAAYnjH,cAAc8/G,GAAW37G,UAAU5I,OAAO,cA0B1D,MAxBA26B,GAAOiJ,UAAW,EACdjJ,EAAOisE,gBAAgBpmG,UAChBm6B,GAAOisE,gBAAgBpmG,GAE9Bm6B,EAAOj1B,OAAOlF,UACPm6B,GAAOj1B,OAAOlF,GAErBm6B,EAAOd,UACHnsB,eAAeitB,EAAOjyB,OAAO+iC,eAC7B9Q,EAAOjyB,OAAOoJ,eAAgBghB,gBAAkBxxB,QAASq5B,EAAO7H,eAAexxB,WAAa,GAC5Fq5B,EAAOjyB,OAAOsoB,OAAOozB,IACjB7jC,YAAa,YAAaze,KAAMk+C,GAAoBmmE,qBAChD3lH,MAAOE,EAAOF,MAAOkQ,SAAUiqB,EAAOjqB,SAAU3Q,MAAO46B,EAAO56B,MAAO6D,UAAW+2B,EAAO/2B,UACvF+M,UAAWgqB,EAAOhqB,UAAW4hB,aAAcoI,EAAOpI,aAAcikE,qBAAuBC,mBACxF2xB,oBAAqB1nH,KAI5Bi6B,EAAOjyB,OAAOsoB,OAAOozB,IACjB7jC,YAAa,YAAaze,KAAMk+C,GAAoBmmE,oBAAqBgC,EACzEC,oBAAqB1nH,EAAQsM,OAAQ,iBAI1C,UAKWpL,GAD6BA,KAKvDuc,KAAKynG,mBAMT7qF,EAAOz6B,UAAUguB,cAAgB,WAC7B,MAAO,UAEXyM,EAAOz6B,UAAU+lH,sBAAwB,SAAUllH,GAC7B,KAAdA,EAAEgrD,SACFhuC,KAAKiyD,aAAajvE,IAG1B45B,EAAOz6B,UAAU8vE,aAAe,SAAUjvE,GACtC,GAAIM,GAAO0c,KAAKzV,OACZ7I,EAASsB,EAAEtB,MACf,IAAIA,GAAU4tF,UAAQ5tF,EAAQ,sBAAuB,CACjD,GAAIwoH,GAAiB7xG,UAAQ3W,EAAQ,qBAErC,IADAse,KAAKzd,OAASe,EAAKywC,eAAem2E,EAAex/E,aAAa,kBACzD1qB,KAAKzd,OACN,MAEJ,IAAiB,iBAAbS,EAAE6L,QAA6BmR,KAAKzV,OAAOoqB,eAAe68D,sBAAuB,CACjF,GAAI24B,GAAoB9xG,UAAQ3W,EAAQ,QAAQ4E,cAAc,uBAC9D6jH,GAAkBh5B,cAAc,GAAGzc,YACnCy1C,EAAkBp2D,QAEY,cAA7B/zC,KAAK2U,eAAelmB,OAAuC,KAAdzL,EAAEgrD,SAC/ChrD,EAAEtB,OAAO+I,UAAUC,SAAS,yBACZ,IAAd1H,EAAEgrD,SAAkBhuC,KAAKzd,OAAOkoB,iBACnCzK,KAAKpe,MAAQF,EAAOE,MAAM4E,OAC1BwZ,KAAKoqG,cAAcpnH,IAG3B,GAAiB,iBAAbA,EAAE6L,QAA0D,cAA7BmR,KAAK2U,eAAehxB,KAAsB,CACzE,GAAIiH,GAAUtH,EAAKu6D,YAAYn4C,YAAY9a,OAC3C,IAAIA,GAAWA,EAAQH,UAAUC,SAAS,gBAAiB,CACvD,GAAInI,GAASe,EAAKywC,eAAenpC,EAAQ+N,kBAAkB+xB,aAAa,gBACxE1qB,MAAKqqG,gBAAgB9nH,EAAOF,OAC5B2d,KAAKzV,OAAOszD,YAAYhI,kBAGf,WAAb7yD,EAAE6L,QAAoD,SAA7BmR,KAAK2U,eAAehxB,MAAmBqc,KAAKsoC,eACrEtoC,KAAKsoC,aAAaC,cAClBjlD,EAAKuvB,O1DzXS,sB0D4XtB+J,EAAOz6B,UAAUmoH,gBAAkB,SAAU1/G,GACrCA,EAAQhJ,MAAMwB,QACdwH,EAAQ67D,mBAAmBh8D,UAAU5I,OAAO,WAGpD+6B,EAAOz6B,UAAUslH,gBAAkB,WAC/B,GAAiC,cAA7BznG,KAAK2U,eAAehxB,KAAsB,CAC1C,GAAIL,GAAO0c,KAAKzV,OACZggH,MAAmB,GACnBpnH,EAAU6c,KAAK2U,eAAexxB,QAE9BZ,GADWyd,KAAKhR,eAAeI,WAAW,sBACjC,GACb,KACK4Q,KAAK2U,eAAe61F,oBACrB,MAEJ,IAAIrnH,EAAQC,OAAS,GAAK4c,KAAK0oG,kBAAoB1oG,KAAK8gC,KAAKvE,YAAY,wBAAyB,CAC9Fv8B,KAAK0oG,gBAAkB,EACvB,KAAK,GAAI5gH,GAAQ,EAAGA,EAAQ3E,EAAQC,OAAQ0E,IAKxC,GAJAvF,EAASe,EAAKqyB,2BAA2BxyB,EAAQ2E,GAAO6D,MAAQrI,EAAK2xB,6BAA6B9xB,EAAQ2E,GAAOzF,OAC7GyF,IACAkY,KAAK0oG,iBAAmB,QAEvBlmH,oBAAkBD,EAAO+M,QAc1B0Q,KAAK0oG,iBAAmBnmH,EAAO8F,WAAa,KAAO2X,KAAKzY,OAAOhF,EAAOF,WAdnC,CACnC,GAAIm0G,GAA2B,SAAhBj0G,EAAOoB,MAAmC,aAAhBpB,EAAOoB,KAC5Cqc,KAAK6J,eAAe/B,SAAS9H,KAAKzY,OAAOhF,EAAOF,OAAQE,EAAOspB,YAAatpB,EAAOoB,MACnFqc,KAAKzY,OAAOhF,EAAOF,MAGnBkoH,GAFkB,SAAhBhoH,EAAOoB,MAAmC,aAAhBpB,EAAOoB,KAClBqc,KAAKhR,eAAeI,WAAW,kBAClB2Y,OAAOyuF,EAASj0G,EAAOspB,aAAa5b,WAG/C+P,KAAKgpG,qBAAqBxS,EAASj0G,GAE1Dyd,KAAK0oG,iBAAmBnmH,EAAO8F,WAAa,KAAOkiH,GAO3DjnH,EAAK6R,aACL7R,EAAKu0F,sBAAsB73E,KAAK0oG,iBAGpC1oG,KAAK0oG,gBAAkB,KAG/B9rF,EAAOz6B,UAAU6mH,qBAAuB,SAAUpnH,EAAOW,GAErD,MADeyd,MAAKhR,eAAeI,WAAW,kBAC9B2Y,OAAOnmB,EAAOW,EAAOopB,gBAAgB1b,YAEzD2sB,EAAOz6B,UAAUsmH,kBAAoB,SAAUlmH,EAAQX,GACnD,GAAI6oH,EACJ,IAAoB,WAAhBloH,EAAOoB,MACHlB,WAASioH,gBAAgB9oH,IAAUoe,KAAKmnG,gBAAgBz/G,QAAQ9F,IAAU,KAC1E6oH,GAAS,OAGZ,IAAoB,WAAhBloH,EAAOoB,KACZ,IAAK,GAAIkM,GAAK,EAAG86G,EAAU/oH,EAAOiO,EAAK86G,EAAQvnH,OAAQyM,IAAM,CACzD,GAAItL,GAAMomH,EAAQ96G,EACdmQ,MAAKonG,gBAAgB1/G,QAAQnD,IAAQ,IACrCkmH,GAAS,GAIrB,MAAOA,IAEX7tF,EAAOz6B,UAAUioH,cAAgB,SAAUpnH,GACvCgd,KAAK4qG,YACL5qG,KAAK6qG,WAAW7nH,IAEpB45B,EAAOz6B,UAAU0oH,WAAa,SAAU7nH,GACpC,GAAI0lB,GAAQ1I,IACZA,MAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAMqiG,eAAgC,KAAd/nH,EAAEgrD,QAAiB,EAAIhuC,KAAK2U,eAAeq2F,qBAErHpuF,EAAOz6B,UAAUyoH,UAAY,WACzBniH,OAAOwiH,cAAcjrG,KAAK+hF,QAE9BnlE,EAAOz6B,UAAU4oH,YAAc,WAC3B,GAAI1gH,GAAW,QAAW2V,KAAKzd,OAAOF,MAAQ,mBAC1Cg3G,EAAgBr5F,KAAKpV,QAAQtE,cAAc+D,IAC1CgvG,GAAiBr5F,KAAKzV,OAAOsL,iBAC9BwjG,EAAgBr5F,KAAKzV,OAAO+Y,mBAAmBhd,cAAc+D,GAEjE,IAAI+tF,EAGJ,IAFAp4E,KAAK8mG,SAAS9mG,KAAKzd,OAAOF,OAASg3G,EAAcz3G,MACjDoe,KAAK4qG,YACApoH,oBAAkBwd,KAAKzd,OAAOq/G,mBAU/BxpB,EAAch+E,KAAKC,MAAMD,KAAK6+D,UAAUogC,EAAcz3G,YAVH,CACnD,GAAIspH,GAAelrG,KAAKzd,OAAOq/G,kBAAkB8B,IACrB,iBAAjBwH,KACPA,EAAe1iH,WAAS0iH,EAAcziH,SAErCjG,oBAAkB0oH,KACnBlrG,KAAKpe,MAAQspH,EAAa5/G,KAAK0U,KAAMq5F,IAM7C,GAAI72G,oBAAkBwd,KAAKpe,QAAyB,KAAfoe,KAAKpe,MAEtC,WADAoe,MAAKu4E,0BAA0Bv4E,KAAKzd,OAAOF,MAG/C2d,MAAKmrG,oBAAoBnrG,KAAKpe,OAC9Boe,KAAK6mG,gBAAiB,EACtB7mG,KAAKk4E,eAAel4E,KAAKzd,OAAOF,MAAO2d,KAAKzN,SAAUyN,KAAKpe,MAAOoe,KAAKva,UAAWua,KAAK2U,eAAeqvF,sBAAuBhkG,KAAKoU,cAClIpU,KAAK6mG,gBAAiB,EACtBxN,EAAcz3G,MAAQw2F,EACtBp4E,KAAKynG,mBAET7qF,EAAOz6B,UAAUgpH,oBAAsB,SAAUvpH,GAC7C,GACIwpH,GACAtjH,CAFOkY,MAAKzV,MAIhB,QADAyV,KAAKxN,UAAYwN,KAAK2U,eAAeqvF,sBAC7BhkG,KAAKzd,OAAOoB,MAChB,IAAK,SACGqc,KAAKzd,OAAO+W,OAAO/G,SACnByN,KAAKzN,SAAWyN,KAAKzd,OAAO+W,OAAO/G,SAGnCyN,KAAKzN,SAAWyN,KAAKsmE,gBAAgBE,MAEzC4kC,GAAa,IAAK,IAAK,IAAK,IAC5B,KAAK,GAAI3nH,GAAI,EAAGA,EAAI7B,EAAMwB,OAAQK,IAC9B,GAAI2nH,EAAU1jH,QAAQ9F,EAAM6B,KAAO,EAAG,CAClCqE,EAAQrE,CACR,OAGRuc,KAAKqrG,YAAYzpH,EAAM0pH,UAAUxjH,IACnB,IAAVA,IACAkY,KAAKpe,MAAQA,EAAM0pH,UAAU,EAAGxjH,IAEjB,KAAfkY,KAAKpe,OAAgBA,EAAMwB,QAAU,IACrC4c,KAAKpe,MAAQoe,KAAK6J,eAAe/B,SAAS9H,KAAKpe,MAAOoe,KAAKzd,OAAOspB,YAAa7L,KAAKzd,OAAOoB,OAE3Fy3C,MAAMp7B,KAAKpe,SACXoe,KAAK0oG,gBAAkB1oG,KAAK8gC,KAAKvE,YAAY,wBAEjD,MACJ,KAAK,OACL,IAAK,WACDv8B,KAAKzN,SAAWyN,KAAKsmE,gBAAgBE,MAClB,KAAfxmE,KAAKpe,OAAkBoe,KAAKpe,gBAAiBuR,QAC7C6M,KAAKqrG,YAAYzpH,GACjBoe,KAAKpe,MAAQoe,KAAK6J,eAAe/B,SAAS9H,KAAKpe,MAAOoe,KAAKzd,OAAOspB,YAAa7L,KAAKzd,OAAOoB,MACvFnB,oBAAkBwd,KAAKpe,SACvBoe,KAAK0oG,gBAAkB1oG,KAAK8gC,KAAKvE,YAAY,yBAGrD,MACJ,KAAK,SACDv8B,KAAKxN,WAAY,EACO,MAApB5Q,EAAM2pH,OAAO,IACbvrG,KAAKpe,MAAQoe,KAAKpe,MAAMyJ,MAAM,GAC9B2U,KAAKzN,SAAWyN,KAAKsmE,gBAAgBQ,YAEG,MAAnCllF,EAAM2pH,OAAO3pH,EAAMwB,OAAS,IACjC4c,KAAKpe,MAAQoe,KAAKpe,MAAMyJ,MAAM,GAAI,GAClC2U,KAAKzN,SAAWyN,KAAKsmE,gBAAgBQ,YAEZ,MAApBllF,EAAM2pH,OAAO,IAClBvrG,KAAKpe,MAAQoe,KAAKpe,MAAMyJ,MAAM,GAC9B2U,KAAKzN,SAAWyN,KAAKsmE,gBAAgBC,UAGjCvmE,KAAKzd,OAAO+W,OAAO/G,SACnByN,KAAKzN,SAAWyN,KAAKzd,OAAO+W,OAAO/G,SAGnCyN,KAAKzN,SAAWyN,KAAKsmE,gBAAgBQ,UAG7C,MACJ,KAAK,UAC2B,SAAxBllF,EAAMuG,eAAsC,MAAVvG,EAClCoe,KAAKpe,OAAQ,EAEgB,UAAxBA,EAAMuG,eAAuC,MAAVvG,EACxCoe,KAAKpe,OAAQ,EAERA,EAAMwB,SACX4c,KAAK0oG,gBAAkB1oG,KAAK8gC,KAAKvE,YAAY,yBAEjDv8B,KAAKzN,SAAWyN,KAAKsmE,gBAAgBE,KACrC,MACJ,SACQxmE,KAAKzd,OAAO+W,OAAO/G,SACnByN,KAAKzN,SAAWyN,KAAKzd,OAAO+W,OAAO/G,SAGnCyN,KAAKzN,SAAWyN,KAAKsmE,gBAAgBE,QAIrD5pD,EAAOz6B,UAAUkpH,YAAc,SAAUzpH,GACrC,GAAI4pH,GAAW5pH,EAAM2pH,OAAO,GACxBE,EAAa7pH,EAAMyJ,MAAM,EAAG,GAC5B82G,EAAYl7G,UAASykH,IAAK1rG,KAAKsmE,gBAAgBE,MAAOmlC,IAAK3rG,KAAKsmE,gBAAgBO,UAAYpkF,WAASioH,kBACrGvI,EAAUj3G,eAAesgH,IAAarJ,EAAUj3G,eAAeugH,MAC/DzrG,KAAKzN,SAAW4vG,EAAUqJ,GAC1BxrG,KAAKpe,MAAQA,EAAM0pH,UAAU,GACxBtrG,KAAKzN,WACNyN,KAAKzN,SAAW4vG,EAAUsJ,GAC1BzrG,KAAKpe,MAAQA,EAAM0pH,UAAU,KAGjCtrG,KAAKzN,WAAayN,KAAKsmE,gBAAgBK,UAAY3mE,KAAKzN,WAAayN,KAAKsmE,gBAAgBG,aAC7D,MAAzBzmE,KAAKpe,MAAM2pH,OAAO,KAClBvrG,KAAKzN,SAAWyN,KAAKzN,SAAW,UAChCyN,KAAKpe,MAAQoe,KAAKpe,MAAM0pH,UAAU,KAI9C1uF,EAAOz6B,UAAU4rB,sBAAwB,SAAU/qB,GAC3Cgd,KAAKzV,OAAOoqB,eAAehxB,MAInCi5B,EAAOz6B,UAAUklH,4BAA8B,WAC3C,GAAIuE,KACEhqH,MAAO,QAASipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,WAC5C36C,MAAO,cAAeipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,iBAClD36C,MAAO,qBAAsBipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,wBACzD36C,MAAO,WAAYipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,cAC/C36C,MAAO,kBAAmBipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,qBACtD36C,MAAO,WAAYipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,aAErDv8B,MAAKwiG,iBACDqJ,iBACMjqH,MAAO,aAAcipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,gBACjD36C,MAAO,WAAYipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,cAC/C36C,MAAO,WAAYipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,cAC/C36C,MAAO,QAASipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,WAC5C36C,MAAO,WAAYipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,cAErDuvE,eAAgBF,EAChBG,aAAcH,EACdI,iBAAkBJ,EAClBK,kBACMrqH,MAAO,QAASipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,WAC5C36C,MAAO,WAAYipB,KAAM7K,KAAK8gC,KAAKvE,YAAY,gBAM7D3f,EAAOz6B,UAAUkoH,gBAAkB,SAAUhoH,GACzC,GAAIiB,GAAO0c,KAAKzV,MAChB,IAAIjH,EAAKud,iBAEL,WADAb,MAAKilF,kBAGT,IAAI1iG,GAASe,EAAKkU,iBAAiBnV,GAE/BX,EADS4B,EAAKwyF,uBAAuBzzF,GACrBiE,cAAc,mBAClC,IAAK5E,EAAL,CAGA,GAAIgiG,GAAUpgG,EAAKsH,QAAQzB,wBACvBw6F,EAAUjiG,EAAOyH,uBACrB6W,MAAK2pG,iBAAiBpnH,EAAQb,EAAQiiG,EAAQ15F,MAAQy5F,EAAQ/5F,KAAMg6F,EAAQ3qC,OAAS0qC,EAAQh6F,OAEjGkzB,EAAOz6B,UAAUomH,uBAAyB,SAAUvlH,GAChD,GAAItB,GAASsB,EAAEtB,MACf,IAAIA,EAAO+I,UAAUC,SAAS,qBAA2D,SAApCsV,KAAKzV,OAAOoqB,eAAehxB,MACxC,aAApCqc,KAAKzV,OAAOoqB,eAAehxB,MAA2D,UAApCqc,KAAKzV,OAAOoqB,eAAehxB,MAAmB,CAChG,GACIoK,GADOiS,KAAKzV,OACDwpC,eAAe5pC,EAAazI,EAAQ,gBAAgBiX,kBAAkB+xB,aAAa,gBAElG,IADA1qB,KAAKzd,OAASwL,EACViS,KAAKknG,eAAe7kH,QAAU0L,EAAI1L,OAAS2d,KAAKknG,eAAep+D,OAC/D,MAEA9oC,MAAKsoC,cACLtoC,KAAKsoC,aAAaC,cAEtBvoC,KAAKknG,gBAAmB7kH,MAAO0L,EAAI1L,MAAOymD,QAAQ,GAClD9oC,KAAKqqG,gBAAgBt8G,EAAI1L,SAGjCu6B,EAAOz6B,UAAUmyE,aAAe,SAAUtxE,GACtC,GAAiC,cAA7Bgd,KAAK2U,eAAehxB,MAAwBqc,KAAK2U,eAAe68D,wBAC5DrnF,EAAanH,EAAEtB,OAAQ,oBACvBsB,EAAEtB,OAAO+I,UAAUC,SAAS,uBAC5B2N,UAAQrV,EAAEtB,OAAQ,OAAO4E,cAAc,wBAAwBytD,QAE/D/wD,EAAEtB,OAAO+I,UAAUC,SAAS,gBAAgB,CAC5C,GAAIwhH,GAAU/lH,SAASG,cAAc,iBAAiBokC,aAAa,MAAM98B,QAAQ,SAAU,KACnD,IAApCs+G,EAAQxkH,QAAQ,gBAChB2Q,UAAQlS,SAAS2nD,eAAeo+D,GAAU,OAAO5lH,cAAc,iBAAiBytD,QAI5F,GAAiC,cAA7B/zC,KAAK2U,eAAelmB,MAA4D,SAApCuR,KAAKzV,OAAOoqB,eAAehxB,MACnC,aAApCqc,KAAKzV,OAAOoqB,eAAehxB,MAA2D,UAApCqc,KAAKzV,OAAOoqB,eAAehxB,KAAkB,CACpFqc,KAAKzV,MAAhB,IACI7I,GAASsB,EAAEtB,OACXyqH,EAAgBzqH,EAAO+I,UAAUC,SAAS,SAC1C0oG,EAASjpG,EAAa6V,KAAKzV,OAAOK,QAAS,YAC3CwhH,GAAY,EACZC,EAAWliH,EAAazI,EAAQ,WAChC4qH,EAAkBtsG,KAAKzV,OAAOK,QAAQtE,cAAc,kBAQxD,IAPI8sG,GAAUiZ,IACVD,EAAYhZ,EAAO5oG,KAAO6hH,EAAS7hH,IAElC8hH,IAAoBniH,EAAazI,EAAQ,sBAC1CyI,EAAazI,EAAQ,wBACrBse,KAAKsoC,aAAaC,YAAY7mD,GAE9ByI,EAAazI,EAAQ,mBAAqBA,EAAO+I,UAAUC,SAAS,mBACpE,MAWJ,KATSsV,KAAKsoC,cAAkBn+C,EAAazI,EAAQ,oBAC5C2W,UAAQ3W,EAAQ,+BAAoCyqH,IACpDC,IAAejiH,EAAazI,EAAQ,oBAChCyI,EAAazI,EAAQ,oBAAyB2qH,GAAYC,KAC/DtsG,KAAKsoC,aAAak+D,aAAer8G,EAAazI,EAAQ,WAClDyI,EAAazI,EAAQ,UAAU8I,KAAOwV,KAAKzV,OAAOK,QAAQJ,GAC9DwV,KAAKsoC,aAAaC,YAAY7mD,IAGL,cAA7Bse,KAAK2U,eAAelmB,MAAwB/M,EAAO+I,UAAUC,SAAS,gBAAiB,CACvF,GAAI6hH,GAAa7qH,EAAO8qH,sBACxBxsG,MAAKu4E,0BAA0Bg0B,EAAW/hH,GAAGa,MAAM,GAAI,QAInEuxB,EAAOz6B,UAAUynH,cAAgB,SAAU16G,GACvC,GAAIu9G,EACJzsG,MAAKyoF,gBAAgBv5F,EAAK7M,OAAS6M,EAAKu5F,eAIxC,KAAK,GAHDnjF,GAAc,GAAIrT,eAAY+N,KAAK2U,eAAexxB,SAClD0O,GAAQ,GAAIC,UAAQO,MAAM,QAAS2N,KAAKsmE,gBAAgBE,MAAOt3E,EAAK7M,OACpEqD,EAAS4f,EAAY7S,aAAaZ,GAC7BpO,EAAI,EAAGA,EAAIiC,EAAOtC,OAAQK,IAAK,CAEpC,IAAK,GADDqE,IAAS,EACJpE,EAAI,EAAGA,EAAIsc,KAAK2U,eAAexxB,QAAQC,OAAQM,IACpD,GAAIgC,EAAOjC,GAAGpB,QAAU2d,KAAK2U,eAAexxB,QAAQO,GAAGrB,MAAO,CAC1DyF,EAAQpE,CACR,QAGO,IAAXoE,GACAkY,KAAK2U,eAAexxB,QAAQqiB,OAAO1d,EAAO,GAG9B,iBAAhBoH,EAAKL,QAA6BU,eAAeyQ,KAAKzV,OAAO+iC,eAC7DttB,KAAKzV,OAAOoJ,eAAgBghB,gBAAkBxxB,QAAS6c,KAAK2U,eAAexxB,WAAa,GAExF6c,KAAKzY,OAAO2H,EAAK7M,cACV2d,MAAKzY,OAAO2H,EAAK7M,MAE5B,IAAI+jH,GAAYpmG,KAAKzV,OAAOye,eAAiB,gBAAkB,gBAC/DyjG,GAAoBzsG,KAAKzV,OAAOurF,uBAAuB5mF,EAAK7M,OAAOiE,cAAc8/G,GAC7D,cAAhBl3G,EAAKL,QACLmR,KAAK2U,eAAexxB,QAAU6c,KAAK2U,eAAexxB,QAAQqT,OAAOtH,EAAK24F,kBAClE7nF,KAAK2U,eAAexxB,QAAQC,QAAUqpH,GACtCA,EAAkBhiH,UAAUqE,IAAI,gBAIhC29G,GACAA,EAAkBhiH,UAAU5I,OAAO,cAEvCqN,EAAKkT,YAAc,YACnBpC,KAAKzV,OAAO6Q,aAAasgB,QAAQxsB,IAErC8Q,KAAKzV,OAAOw6C,YAEhBnoB,EAAOz6B,UAAUknH,aAAe,WAC5B,GAAI/2F,GAAOtS,KAAK2U,eAAexxB,OAC/B6c,MAAKyoF,kBACL,KAAK,GAAIhlG,GAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAK,CAClCuc,KAAKzd,OAASyd,KAAKzV,OAAOiN,iBAAiB8a,EAAK7uB,GAAGpB,QAC/CqQ,GAA2B4f,EAAK7uB,GAAGpB,MAAO2d,KAAKzV,OAAOgN,uBAC1D,IAAIstC,GAAYvyB,EAAK7uB,GAAGpB,KACnB2d,MAAKzV,OAAOiN,iBAAiB8a,EAAK7uB,GAAGpB,SACtCwiD,EAAYnyC,GAA2B4f,EAAK7uB,GAAGpB,MAAO2d,KAAKzV,OAAOgN,wBAAwBlV,OAG9F2d,KAAK0sG,kBAAkB7nE,EAAWvyB,EAAK7uB,GAAG8O,SAAU+f,EAAK7uB,GAAG7B,MAAO0wB,EAAK7uB,GAAGE,KAAM2uB,EAAK7uB,GAAGgC,UAAW6sB,EAAK7uB,GAAG+O,UAAW8f,EAAK7uB,GAAG2wB,aAAc9B,EAAK7uB,GAAGkI,OAI7JixB,EAAOz6B,UAAUuqH,kBAAoB,SAAU7nE,EAAWtyC,EAAU3Q,EAAO+B,EAAM8B,EAAW+M,EAAW4hB,EAAczoB,GACjH,GAAI7F,EACJA,IACIzD,MAAOwiD,EACPp/C,UAAWA,EACX+M,UAAWA,EACX4hB,aAAcA,EACd7hB,SAAUA,EACV3Q,MAAOA,EACP+B,KAAMA,GAEVqc,KAAKyoF,gBAAgB5jD,GAAa7kC,KAAKyoF,gBAAgB5jD,GAAW3gD,KAAK4B,GAAOka,KAAKyoF,gBAAgB5jD,IAAc/+C,EACjH,IAAIzD,GAAQsJ,EAAMqU,KAAKzV,OAAOorB,2BAA2BhqB,GAAKtJ,MAAQwiD,CACtE7kC,MAAKkpG,iBAAiB7mH,IAE1Bu6B,EAAOz6B,UAAU+mH,iBAAmB,SAAUrkE,GAC1C,GAAI4nE,EACAzsG,MAAKzV,OAAOye,eACZyjG,EAAoBzsG,KAAKzV,OAAOurF,uBAAuBjxC,GAAWv+C,cAAc,iBAE3E0Z,KAAKzV,OAAOiN,iBAAiBqtC,KAClC4nE,EAAoBzsG,KAAKzV,OAAOurF,uBAAuBjxC,GAAWv+C,cAAc,mBAEhFmmH,GACAA,EAAkBhiH,UAAUqE,IAAI,eAMxC8tB,EAAOz6B,UAAUs1F,gBAAkB,WAC/B,MAAOz3E,MAAKsoC,aAAetoC,KAAKsoC,aAAamvC,sBAKjD76D,EAAOz6B,UAAUqmH,gBAAkB,SAAUnmH,GACzC,MAAO8D,UAAS2nD,eAAe9tC,KAAKzV,OAAOiN,iBAAiBnV,GAAOsJ,KAAKwlF,cAAc,GAAGvvF,OAM7Fg7B,EAAOz6B,UAAUwqH,2BAA6B,WAC1C,MAAO3sG,MAAKsoC,aAAag+D,sBAEtB1pF,KC5qCAgwF,IACPC,KAAM,aACNC,SAAU,cACVpd,KAAM,UACN/tE,OAAQ,YACRumB,OAAQ,kBACR6kE,OAAQ,aAORC,GAAwB,WAKxB,QAASA,GAAOziH,GACZyV,KAAKitG,QAAS,EACdjtG,KAAKktG,UAAW,EAChBltG,KAAKzV,OAASA,EACVyV,KAAKzV,OAAO2lB,cAGhBlQ,KAAKuE,aAAe,GAAIoqC,IAAmBpkD,GAC3CyV,KAAKghC,oBA+uBT,MAxuBAgsE,GAAO7qH,UAAUu4F,eAAiB,SAAUngE,GACxC,GAAIrH,OAAwBnmB,KAAVwtB,GAAiC,OAAVA,GAAkBA,EAAMn3B,QAAU,EACvE4c,KAAKzV,OAAO2L,aAAa6F,IAAI,SAAUhS,GAAK,MAAOA,GAAE1H,QAA8B,gBAAVk4B,IAAuBA,GAASA,CAC7Gva,MAAKmtG,WAAWj6F,IAEpB85F,EAAO7qH,UAAUknB,QAAU,WACvB,GAAI+jG,GAAWptG,KAAKzV,OAAO2L,aAAaoD,OAAO,SAAUrR,GAAK,OAAqB,IAAdA,EAAEohB,UAClEtN,IAAI,SAAU9T,GAAK,MAAOA,GAAE5F,OAAS4F,EAAEI,YACxC+kH,GAAShqH,OAAS,GAClB4c,KAAK06E,eAAe0yB,GAEgB,SAApCptG,KAAKzV,OAAOioD,eAAe/jD,MAC3BuR,KAAKuE,aAAamrC,mBAI1Bs9D,EAAO7qH,UAAUkrH,aAAe,SAAU9yF,EAAOzyB,EAAO0C,GACpD,GAEIorC,GACA/G,EACAy+E,EAOAC,EACAC,EACAC,EAbAnqH,EAAO0c,KAAKzV,OACZykD,EAAS,EAOTuqC,EAAc,EACd5tF,EAAMnB,GAAUwV,KAAKzV,OAAOyrF,oBAAoBz7D,GAChDS,EAAchb,KAAKzV,OAAOulC,yBAAyBnkC,GAInD+hH,EAAqB1tG,KAAKzV,OAAO0pC,sBAAsB1Z,GACvD5wB,EAAOrG,EAAKwS,oBAAsBxS,EAAK2sC,4BACvCtzB,EAAUrZ,EAAKsZ,wBAInB,IAHKpa,oBAAkBc,EAAKg3E,sBACxBgzC,EAAchqH,EAAK+wF,yBAEnB/wF,EAAKuS,eAAgB,CACrB,GAAI9H,GAAMzK,EAAKkU,iBAAiB+iB,EACC,iBAA7BxsB,EAAImQ,sBACJ03B,EAActyC,EAAK4lC,iBACnB2F,EAAevrC,EAAKwsD,kBACpBy9D,EAAkB33E,EAAYtvC,cAAc,kBAAoBqF,EAAM,MAAMzC,cAAcgL,WAAU,GACpGs5G,EAAmB3+E,EAAazoC,iBAAiB,iBAAmB40B,EAAc,GAAK,KACnFsyF,IACAG,EAAkBH,EAAYlnH,iBAAiB,iBAAmB40B,EAAc,GAAK,OAGvD,YAA7BjtB,EAAImQ,sBACT03B,EAActyC,EAAKggB,mBAAmBhd,cAAc,oBAAoBuF,SAAS,GACjFgjC,EAAevrC,EAAKoV,aAAapS,cAAc,qBAAqBuF,SAAS,GAC7E0hH,EAAkB33E,EAAYtvC,cAAc,kBAAoBqF,EAAM,MAAMzC,cAAcgL,WAAU,GACpGs5G,EAAmB3+E,EAAazoC,iBAAiB,iBAAoB40B,EAAcrxB,EAAQ,GAAK,KAC5F2jH,IAEAG,GADAH,EAAchqH,EAAKg3E,mBAAmBh0E,cAAc,2BAA2BuF,SAAS,IAC1DzF,iBAAiB,iBAAoB40B,EAAcrxB,EAAQ,GAAK,OAGhE,iBAA7BoE,EAAImQ,uBACT03B,EAActyC,EAAKggB,mBAAmBhd,cAAc,0BAA0BuF,SAAS,GACvFgjC,EAAevrC,EAAKoV,aAAapS,cAAc,2BAA2BuF,SAAS,GACnF0hH,EAAkB33E,EAAYtvC,cAAc,kBAAoBqF,EAAM,MAAMzC,cAAcgL,WAAU,GACpGs5G,EAAmB3+E,EAAazoC,iBAAiB,iBAAoB40B,GAAerxB,EAAOgT,GAAY,GAAK,KACxG2wG,IAEAG,GADAH,EAAchqH,EAAKg3E,mBAAmBh0E,cAAc,2BAA2BuF,SAAS,IAC1DzF,iBAAiB,iBAAoB40B,GAAerxB,EAAOgT,GAAY,GAAK,WAKlHi5B,GAActyC,EAAK4lC,iBACnB2F,EAAevrC,EAAKwsD,kBACpBy9D,EAAkB33E,EAAYtvC,cAAc,kBAAoBqF,EAAM,MAAMzC,cAAcgL,WAAU,GACpGs5G,EAAmB3+E,EAAazoC,iBAAiB,iBAAmB40B,EAAc,GAAK,0BACnFsyF,IACAG,EAAkBH,EAAYlnH,iBAAiB,iBAAmB40B,EAAc,GAAK,0BAG7F,IAAI2yF,GAAmB/3E,EAAYtvC,cAAc,MAAMF,iBAAiB,sBACxE,IAAIunH,EAAiBvqH,OAAS,EAC1B,IAASK,EAAI,EAAGA,EAAIkqH,EAAiBvqH,OAAQK,IACzC81F,GAAeo0B,EAAiBlqH,GAAGqG,WAG3C,IAAI8jH,GAAiB/+E,EAAavoC,cAAc,yBAC5CuoC,EAAavoC,cAAc,uBAC1B0Z,KAAKzV,OAAOyyB,gBAAkBhd,KAAKzV,OAAOmL,YAAck4G,IACzDr0B,GAAeq0B,EAAe9jH,YAElC,IAAIzB,IAAcklH,GACdM,KACAC,IACJ,IAAIR,EACA,IAAS7pH,EAAI,EAAGA,EAAIgqH,EAAgBrqH,OAAQK,IACxCqqH,EAAWrqH,GAAKgqH,EAAgBhqH,GAAGyQ,WAAU,EAGrD,KAASzQ,EAAI,EAAGA,EAAI+pH,EAAiBpqH,OAAQK,IACzCoqH,EAAYpqH,GAAK+pH,EAAiB/pH,GAAGyQ,WAAU,EAEnD,IAAI65G,GAAU/tG,KAAK+1B,YAAYH,EAAavtC,EA9EzB,gBA+Ef2lH,EAAWhuG,KAAK+1B,YAAYlH,EAAcg/E,EA9E1B,iBA+EhBI,EAAU,IACVH,GAAW1qH,SACX6qH,EAAUjuG,KAAK+1B,YAAYu3E,EAAaQ,EAhFzB,gBAkFnB,IAAII,GAAgB5qH,EAAK4S,aAAaw3G,GAElChlH,EAAQwlH,EAAcxlH,MAAQsnD,aAAW5iD,KAAK6J,IAAI82G,EAASC,EAAUC,IACrEE,EAAcD,EAAcx8D,UAAY55C,WAAWo2G,EAAcx8D,SAASzhD,WAM9E,IALIm+B,SAAS1lC,EAAO,IAAMylH,IACtBD,EAAcxlH,MAAQylH,GAE1BnuG,KAAKuE,aAAasqC,eAAevrD,EAAK4S,aAAaw3G,KAEpC,IADNpqH,EAAK4S,aAAavD,KAAK,SAAU5I,GAAK,MAAmB,QAAZA,EAAErB,WAA8BqE,KAAZhD,EAAErB,OAAuBqB,EAAErB,MAAMtF,QAAU,IAGjH,IAAK,GADDwH,GAAUtH,EAAK4S,aACVzS,EAAI,EAAGA,EAAImH,EAAQxH,OAAQK,IAC5BmH,EAAQnH,GAAGkF,UACXqmD,GAAkBl3C,WAAWlN,EAAQnH,GAAGiF,OAIpD,IAAI0lH,GAAiBp/D,EAASuqC,CAC1BvqC,GAAS,IAAM1rD,EAAKuS,kBAChBmK,KAAKzV,OAAOyyB,gBAAkBhd,KAAKzV,OAAOmL,YAC1CsK,KAAKuE,aAAasqC,eAAe,GAAI3mD,KAASQ,MAAO,UAEjB,SAApCsX,KAAKzV,OAAOioD,eAAe/jD,OAC3B2/G,EAAiB,QAErBx4E,EAAYvsC,MAAMX,MAAQsnD,aAAWo+D,GACrCv/E,EAAaxlC,MAAMX,MAAQsnD,aAAWo+D,GACjC5rH,oBAAkB8qH,KACnBA,EAAYjkH,MAAMX,MAAQsnD,aAAWo+D,IAG7C,IAAIC,GAAaz4E,EAAY9rC,WACTxG,GAAKoV,aAAyB,YAC/B21G,GACfz4E,EAAYnrC,UAAUqE,IAAI,iBAC1B+/B,EAAapkC,UAAUqE,IAAI,mBAG3B8mC,EAAYnrC,UAAU5I,OAAO,iBAC7BgtC,EAAapkC,UAAU5I,OAAO,kBAE7BW,oBAAkB8qH,IACnBA,EAAY7iH,UAAUqE,IAAI,kBAQlCk+G,EAAO7qH,UAAU0rB,QAAU,WACvB,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OACzBq2D,KAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,qBAG/F0Z,KAAKuE,aAAe,KACpBvE,KAAK+vE,eACL/vE,KAAKiuC,wBAMT++D,EAAO7qH,UAAUguB,cAAgB,WAC7B,MAAO,UAEX68F,EAAO7qH,UAAUgrH,WAAa,SAAU5yF,GACpC,IAAK,GAAI92B,GAAI,EAAGA,EAAI82B,EAAMn3B,OAAQK,IAAK,CACnC,GAAIohD,GAAYtqB,EAAM92B,GAClBu3B,EAAchb,KAAKzV,OAAO0pC,sBAAsB4Q,GAChDtiD,EAASyd,KAAKzV,OAAO2L,aAAa8kB,EAClCA,IAAe,IAAMx4B,oBAAkBD,KAA8B,IAAnBA,EAAOoG,SACzDqX,KAAKqtG,aAAaxoE,EAAW7pB,KAQzCgyF,EAAO7qH,UAAU4zC,YAAc,SAAU9oC,EAAO4d,EAAM2xE,GAClD,GAAIC,GAAaz8E,KAAKzV,OAAOkC,cAAc,MAC3CgwF,GAAW3zF,UAAYkX,KAAKzV,OAAOK,QAAQ9B,UAC3C2zF,EAAWpzF,MAAMqD,QAAU,2DAC3B,IAAIgwF,GAAW18E,KAAKzV,OAAOkC,cAAc,MACzCiwF,GAAS5zF,UAAY0zF,CACrB,IAAIG,GAAU38E,KAAKzV,OAAOkC,cAAc,QACxCkwF,GAAQ7zF,UAAYmE,EAAMnE,UAC1B6zF,EAAQlyF,UAAUqE,IAAI,iBACtB6tF,EAAQtzF,MAAMqD,QAAU,gCAExB,KAAK,GADDkwF,GAAO58E,KAAKzV,OAAOkC,cAAc,MAC5BhJ,EAAI,EAAGA,EAAIonB,EAAKznB,OAAQK,IAAK,CAClC,GAAI+b,GAAKo9E,EAAK1oF,WACdsL,GAAG1W,UAAYmE,EAAM3G,cAAc,MAAMwC,UACzC0W,EAAG1T,YAAY+e,EAAKpnB,IACpBk5F,EAAQ7wF,YAAY0T,GAExBk9E,EAAS5wF,YAAY6wF,GACrBF,EAAW3wF,YAAY4wF,GACvBv2F,SAASwG,KAAKb,YAAY2wF,EAC1B,IAAI6xB,GAAmB3xB,EAAQxzF,wBAAwBT,KAEvD,OADAvC,UAASwG,KAAKE,YAAY4vF,GACnBrvF,KAAKC,KAAKihH,IAKrBtB,EAAO7qH,UAAU6+C,iBAAmB,WAC5BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGslB,GAAwB11B,KAAKuuG,cAAevuG,MAC3DA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAK0gD,WAAY1gD,MACnDA,KAAKzV,OAAO6lB,GAAGwW,GAAqB5mB,KAAKqJ,QAASrJ,MAClDA,KAAKzV,OAAO6lB,GAAGypE,GAAwB75E,KAAKuuG,cAAevuG,QAK/DgtG,EAAO7qH,UAAU8rD,oBAAsB,WAC/BjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAI6d,GAAwB11B,KAAKuuG,eAC7CvuG,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAK0gD,YACxC1gD,KAAKzV,OAAOstB,IAAIgiE,GAAwB75E,KAAKuuG,iBAKjDvB,EAAO7qH,UAAUohB,OAAS,WACtBvD,KAAK+vE,eACL/vE,KAAK0gD,aACL1gD,KAAKwuG,oBAETxB,EAAO7qH,UAAUosH,cAAgB,WAE7B,IAAK,GADD3jH,GAAUoV,KAAKyuG,oBACVhrH,EAAI,EAAGA,EAAImH,EAAQxH,OAAQK,IAC5BmH,EAAQnH,GAAGyF,cAAcO,aAAe,IACxCmB,EAAQnH,GAAG4F,MAAMiE,OAAS1C,EAAQnH,GAAGyF,cAAcO,aAAe,KAG1EuW,MAAKwuG,oBAETxB,EAAO7qH,UAAUu+D,WAAa,WAC1B9W,eAAa96C,IAAIkR,KAAKzV,OAAO+Y,mBAAoB3I,UAAQ+zG,gBAAiB1uG,KAAK2uG,iBAAkB3uG,MACjG4pC,eAAa96C,IAAIkR,KAAKzV,OAAO+Y,mB3DnDf,W2DmDoDtD,KAAK4uG,YAAa5uG,OAExFgtG,EAAO7qH,UAAU4tF,aAAe,WAC5BnmC,eAAa/nD,OAAOme,KAAKzV,OAAO+Y,mBAAoB3I,UAAQ+zG,gBAAiB1uG,KAAK2uG,kBAClF/kE,eAAa/nD,OAAOme,KAAKzV,OAAO+Y,mB3DvDlB,W2DuDuDtD,KAAK4uG,cAE9E5B,EAAO7qH,UAAUssH,kBAAoB,WACjC,MAAOzuG,MAAKzV,OAAOsL,kBACZxK,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,IAAMwmH,GAAgBC,UAC/ExhH,MAAMC,KAAK0U,KAAKzV,OAAO2+B,iBAAiB9iC,iBAAiB,IAAMwmH,GAAgBC,QAE5FG,EAAO7qH,UAAUqsH,iBAAmB,WAEhC,IAAK,GADD5jH,MAAaS,MAAMC,KAAK0U,KAAKzV,OAAO2+B,iBAAiB9iC,iBAAiB,IAAMwmH,GAAgBE,WACvFrpH,EAAI,EAAGA,EAAImH,EAAQxH,OAAQK,IAChCmH,EAAQnH,GAAG4F,MAAMiE,OAAS1C,EAAQnH,GAAGyF,cAAcO,aAAe,MAG1EujH,EAAO7qH,UAAUysH,YAAc,SAAU5rH,GACrC,GAAIA,EAAEtB,OAAO+I,UAAUC,SAAS,cAAe,CAC3C,GAAIqD,GAAMiS,KAAK6uG,gBAAgB7rH,EAC/B,IAAI+K,EAAI5K,QACJ,MAEJ6c,MAAKqtG,aAAat/G,EAAI1L,MAAO2d,KAAKzV,OAAOulC,yBAAyB/hC,EAAIpC,KAAMoC,EAAIpC,KACnE0M,UAAQrV,EAAEtB,OAAQkrH,GAAgB1kE,QACxCz9C,UAAUqE,IAAI,eAG7Bk+G,EAAO7qH,UAAUwsH,iBAAmB,SAAU3rH,GAC1C,IAAK8+F,SAAOC,MAIR,MAHAD,UAAOC,MAAQ9qC,WAAW,WACtB6qC,SAAOC,MAAQ,MAChB,KACI/hF,KAAK8uG,YAAY9rH,EAGxBg/F,cAAaF,SAAOC,OACpBD,SAAOC,MAAQ,KACf/hF,KAAK4uG,YAAY5rH,IAGzBgqH,EAAO7qH,UAAU2sH,YAAc,SAAU9rH,GACrC,GAAI0lB,GAAQ1I,IACZ,IAAIhd,EAAEtB,OAAO+I,UAAUC,SAAS,cAAe,CAC3C,IAAKsV,KAAK2hB,OAAQ,CACd,GAAiC,IAA7B3hB,KAAK1T,oBAA2B,CAChC,GAAI0T,KAAKzV,OAAOwe,cACZ,IAAStlB,EAAI,EAAGA,EAAIuc,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAQK,IAC1Duc,KAAKuE,aAAasqC,eAAe,GAAI3mD,KAASQ,MAAO,SAAWjF,EAGxE,KAAK,GAAIoM,GAAK,EAAGkG,EAAKiK,KAAK+uG,qBAAsBl/G,EAAKkG,EAAG3S,OAAQyM,IAAM,CACnE,GAAI9B,GAAMgI,EAAGlG,EACbmQ,MAAKuE,aAAasqC,eAAe9gD,GAErCiS,KAAKuE,aAAamrC,kBAItB,GAFA1vC,KAAKgvG,4BACLhvG,KAAKpV,QAAU5H,EAAEtB,OACbse,KAAKzV,OAAO+sF,0BAA2B,CACvC,GAAI23B,GAASjvG,KAAKzV,OAAO0U,yBACrBiwG,EAASlvG,KAAKzV,OAAOwqF,4BACrBo6B,EAAUnvG,KAAKzV,OAAO6U,6BACtBklF,KAASj5F,MAAMC,KAAK2jH,EAAO7oH,iBAAiB,OAC5CgpH,KAAS/jH,MAAMC,KAAK4jH,EAAO9oH,iBAAiB,OAC5CsZ,IACgC,gBAAhCM,KAAKzV,OAAO8R,iBAAoC8yG,IAChDzvG,KAAUrU,MAAMC,KAAK6jH,EAAQ/oH,iBAAiB,OAalD,KAAK,GADDo2B,GAASxc,KACJvc,EAAI,EAAGA,EAAI6gG,EAAIlhG,OAAQK,KAXlB,SAAUA,GACpB0Z,GAAkBqf,EAAOjyB,OAAQ,SAAUkS,EAAWrX,GAC9CsjB,EAAMne,OAAOyC,UACb5H,EAAI3B,GAAG4F,MAAMiE,OAASob,EAAMne,OAAOyC,UAAY,KAG/C5H,EAAI3B,GAAG4F,MAAMgmH,eAAe,YAEhCD,EAAK9qB,EAAK5kF,KAINjc,GAGhBuc,KAAKsvG,mBAAqBtvG,KAAKzV,OAAOK,QAAQzB,wBAAwBT,MACtEsX,KAAKuvG,eACLvvG,KAAKzd,OAASyd,KAAK6uG,gBAAgB7rH,GACnCgd,KAAKu7D,MAAQv7D,KAAKwvG,UAAUxsH,GACa,iBAArCgd,KAAKzd,OAAO2b,qBACR8B,KAAKzV,OAAO2X,UACZlC,KAAKyvG,SAAWzvG,KAAKzd,OAAO6sD,SAAWt3C,WAAWkI,KAAKzd,OAAO6sD,SAASn/C,YAAc,GAC/E6H,WAAWtV,oBAAkBwd,KAAKzd,OAAOmG,OAAS,GAAKsX,KAAKzd,OAAOmG,MAAMuH,YAG/E+P,KAAKyvG,QAAU33G,WAAWtV,oBAAkBwd,KAAKzd,OAAOmG,OAAS,GAAKsX,KAAKzd,OAAOmG,MAAMuH,aACjF+P,KAAKzd,OAAO6sD,SAAWt3C,WAAWkI,KAAKzd,OAAO6sD,SAASn/C,YAAc,GAG3E+P,KAAKzV,OAAO2X,UACjBlC,KAAKyvG,QAAU33G,WAAWkI,KAAKzd,OAAOmG,MAAMuH,aACrC+P,KAAKzd,OAAO6sD,SAAWt3C,WAAWkI,KAAKzd,OAAO6sD,SAASn/C,YAAc,GAG5E+P,KAAKyvG,SAAWzvG,KAAKzd,OAAO6sD,SAAWt3C,WAAWkI,KAAKzd,OAAO6sD,SAASn/C,YAAc,GAC/E6H,WAAWtV,oBAAkBwd,KAAKzd,OAAOmG,OAAS,GAAKsX,KAAKzd,OAAOmG,MAAMuH,YAEnF+P,KAAKyvG,SAAWzvG,KAAKu7D,MAEzB,GAAI5gE,UAAQ44C,WAAavzC,KAAK2hB,OAAOl3B,UAAUC,SAASkiH,GAAgBld,MACpE1vF,KAAK2hB,OAAOl3B,UAAUqE,IAAI89G,GAAgBld,MAC1C9lD,eAAa96C,IAAI3I,SAAUwU,UAAQ+zG,gBAAiB1uG,KAAK0vG,aAAc1vG,MACvE4pC,eAAa96C,IAAIkR,KAAK2hB,OAAQhnB,UAAQ+zG,gBAAiB1uG,KAAK8uG,YAAa9uG,UAExE,CACD,GAAI9Q,OAAO,EAEPA,IADCK,cAAcyQ,KAAKzV,OAAO+iC,eAClBtqC,EAAGA,EAAGT,OAAQyd,KAAKzd,SAInBA,OADU0E,YAAW+Y,KAAKzd,SAGvCyd,KAAKzV,OAAOotB,Q3DxTH,c2DwT+BzoB,EAAM,SAAUA,GACpD,GAAIA,EAAK+3B,QAAUve,EAAMne,OAAOuxB,OAE5B,WADApT,GAAMinG,oBAGV/lE,gBAAa96C,IAAI3I,SAAUwU,UAAQi1G,cAAelnG,EAAMmnG,UAAWnnG,GACnEkhC,eAAa96C,IAAI4Z,EAAMne,OAAOK,QAAS+P,UAAQm1G,eAAgBpnG,EAAMqnG,SAAUrnG,GAC/EA,EAAMsnG,aAAa,YAKnChD,EAAO7qH,UAAUwtH,mBAAqB,SAAUM,GACxCA,IACArmE,eAAa/nD,OAAOme,KAAKzV,OAAOK,QAAS+P,UAAQm1G,eAAgB9vG,KAAK+vG,UACtEnmE,eAAa/nD,OAAOsE,SAAUwU,UAAQi1G,cAAe5vG,KAAK6vG,WAC1D7vG,KAAKgwG,aAAa,WAElBr1G,UAAQ44C,WACR3J,eAAa/nD,OAAOsE,SAAUwU,UAAQ+zG,gBAAiB1uG,KAAK0vG,cAC5D9lE,eAAa/nD,OAAOme,KAAK2hB,OAAQhnB,UAAQ+zG,gBAAiB1uG,KAAK8uG,cAEnEtoB,SAAOxmF,KAAK2hB,QACZ3hB,KAAK0b,WAETsxF,EAAO7qH,UAAUqtD,SAAW,SAAU9mD,EAAO0mD,EAAUsC,GACnD,MAAItC,IAAY1mD,EAAQ0mD,EACbA,EAEDsC,GAAYhpD,EAAQgpD,EACnBA,EAGAhpD,GAGfskH,EAAO7qH,UAAU+tH,sBAAwB,WAErC,IAAK,GADDrlH,MAAcQ,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,gBACpE3C,EAAI,EAAGA,EAAIoH,EAASzH,OAAQK,IACjCoH,EAASpH,GAAG4F,MAAMiE,OAAS0S,KAAKpV,QAAQ1B,cAAcO,aAAe,MAG7EujH,EAAO7qH,UAAUguH,WAAa,SAAU5tH,EAAQ6tH,GAC5C,OACI1nH,MAAOoP,WAAWtV,oBAAkBwd,KAAKuE,aAAairC,SAASjtD,KAAmD,SAAvCyd,KAAKuE,aAAairC,SAASjtD,GAAqB,IACrHyd,KAAKuE,aAAairC,SAASjtD,GAAQ0N,YAAcmgH,EACvDhhE,SAAU7sD,EAAO6sD,SAAWt3C,WAAWvV,EAAO6sD,SAASn/C,YAAc,KACrEyhD,SAAUnvD,EAAOmvD,SAAW55C,WAAWvV,EAAOmvD,SAASzhD,YAAc,OAG7E+8G,EAAO7qH,UAAU4tH,SAAW,SAAU/sH,GAClC,IAAIR,oBAAkBwd,KAAKzd,QAA3B,CAGA,GAAIuH,GAAc,CACdtH,qBAAkBwd,KAAKzd,UACvBuH,EAAcK,EAAa6V,KAAKpV,QAAS,MAAMd,aAE/CkW,KAAKzV,OAAOu8B,gBACZ9mB,KAAKkwG,wBACLlwG,KAAKqwG,kBAET,IAAI90C,GAAQv7D,KAAKwvG,UAAUxsH,GACvBotH,EAAYpwG,KAAKzV,OAAO2X,YAAcq5D,EAAQv7D,KAAKu7D,OAAUA,EAAQv7D,KAAKu7D,KACrC,kBAArCv7D,KAAKzd,OAAO2b,uBACZkyG,EAAYpwG,KAAKzV,OAAO2X,UAAaq5D,EAAQv7D,KAAKu7D,MAAUv7D,KAAKu7D,MAAQA,EAE7E,IAAIgxB,GAAUvsF,KAAKmwG,WAAWnwG,KAAKzd,OAAQ6tH,EACtC7jB,GAAQ7jG,QACT6jG,EAAQ7jG,MAAQ2P,UAAQ2H,KAAKpV,QAAS,MAAMd,YAEhD,IAAIpB,GAAQsX,KAAKwvC,SAAS+8C,EAAQ7jG,MAAO6jG,EAAQn9C,SAAUm9C,EAAQ76C,SAenE,IAdA1xC,KAAKzV,OAAOyoB,IAAI,kBAAoBzwB,OAAQyd,KAAKzd,OAAQmG,MAAOA,IACvB,iBAArCsX,KAAKzd,OAAO2b,uBACP8B,KAAKzV,OAAO2X,WAAalC,KAAKyvG,SAAWl0C,IAAYv7D,KAAKzV,OAAO2X,WAAalC,KAAKyvG,SAAWl0C,KAC/F7yE,EAAQsX,KAAKzd,OAAO6sD,SAAWt3C,WAAWkI,KAAKzd,OAAO6sD,SAASn/C,YAAc,GAC7E+P,KAAKu7D,MAAQA,EAAQv7D,KAAKyvG,UAGQ,iBAArCzvG,KAAKzd,OAAO2b,wBACP8B,KAAKzV,OAAO2X,WAAalC,KAAKyvG,SAAWl0C,GAAWv7D,KAAKzV,OAAO2X,WAAalC,KAAKyvG,SAAWl0C,IAC1D,iBAArCv7D,KAAKzd,OAAO2b,uBAA6C8B,KAAKzV,OAAO2X,WAAalC,KAAKyvG,SAAWl0C,IAC7Fv7D,KAAKzV,OAAO2X,WAAalC,KAAKyvG,SAAWl0C,MAClD7yE,EAAQsX,KAAKzd,OAAO6sD,SAAWt3C,WAAWkI,KAAKzd,OAAO6sD,SAASn/C,YAAc,GAC7E+P,KAAKu7D,MAAQA,EAAQv7D,KAAKyvG,SAE1B/mH,IAAUoP,WAAWtV,oBAAkBwd,KAAKzd,OAAOmG,QAAgC,SAAtBsX,KAAKzd,OAAOmG,MACzEoB,EAAYmG,WAAa+P,KAAKzd,OAAOmG,MAAMuH,YAAa,CACxD+P,KAAKu7D,MAAQA,EACbv7D,KAAKzd,OAAOmG,MAAQsnD,aAAWtnD,EAC/B,IAAIwG,IACAlM,EAAGA,EACHT,OAAQyd,KAAKzd,OAGjB,IADAyd,KAAKzV,OAAOotB,Q3DpZF,W2DoZ2BzoB,GACjCA,EAAK+3B,OAEL,WADAjnB,MAAK2vG,oBAAmB,EAG5B,IAAIxsH,IAAW6c,KAAKzd,QAChB+tH,GAAgBtwG,KAAKzd,OACrByd,MAAKzd,OAAOY,UACZA,EAAU6c,KAAKuwG,cAAcvwG,KAAKzd,WAClCY,EAAU6c,KAAKwwG,qBAAqBrtH,GAAS,EAAOitH,GACpDE,EAAetwG,KAAKwwG,qBAAqBrtH,GAAS,EAAMitH,GAE5D,KAAK,GAAIvgH,GAAK,EAAG4gH,EAAiBH,EAAczgH,EAAK4gH,EAAertH,OAAQyM,IAAM,CAC9E,GAAI9B,GAAM0iH,EAAe5gH,EACzBmQ,MAAKuE,aAAasqC,eAAe9gD,EAAK,KAAM,UAEhDiS,KAAK0wG,eAET1wG,KAAKktG,UAAW,IAEpBF,EAAO7qH,UAAUquH,qBAAuB,SAAUrtH,EAASguE,EAAUi/C,GAEjE,IAAK,GADDE,MACKzgH,EAAK,EAAGklB,EAAY5xB,EAAS0M,EAAKklB,EAAU3xB,OAAQyM,IAAM,CAG/D,IAAK,GAFD9B,GAAMgnB,EAAUllB,GAChBk/D,EAAa,EACRtrE,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAChCsrE,GAAcj3D,WAAW3U,EAAQM,GAAGiF,MAAMuH,WAE9C,IAAIs8F,GAAUvsF,KAAKmwG,WAAWpiH,EAAM+J,WAAW/J,EAAIrF,OAAU0nH,EAAYrhD,GACrEiC,EAAWhxD,KAAKwvC,SAAS+8C,EAAQ7jG,MAAO6jG,EAAQn9C,SAAUm9C,EAAQ76C,SACjEsf,KAAal5D,WAAW/J,EAAIrF,MAAMuH,cAC/BkhE,IACApjE,EAAIrF,MAAQsnD,aAAWghB,EAAW,EAAI,EAAIA,IAE9Cs/C,EAAapsH,KAAK6J,IAG1B,MAAOuiH,IAEXtD,EAAO7qH,UAAUouH,cAAgB,SAAUhuH,EAAQouH,GAC/C,IAAK,GAAI9gH,GAAK,EAAGkG,EAAKxT,EAAOY,QAAS0M,EAAKkG,EAAG3S,OAAQyM,IAAM,CACxD,GAAI9B,GAAMgI,EAAGlG,IACO,IAAhB9B,EAAIpF,SAAqBoF,EAAI8a,gBACzB9a,EAAI5K,QACJ6c,KAAKuwG,cAAcxiH,EAAK4iH,GAGxBA,EAAWzsH,KAAK6J,IAI5B,MAAO4iH,IAEX3D,EAAO7qH,UAAU0tH,UAAY,SAAU7sH,GACnC,GAAKgd,KAAK2hB,SAAU3hB,KAAKzV,OAAO2lB,YAAhC,CAGA05B,eAAa/nD,OAAOme,KAAKzV,OAAOK,QAAS+P,UAAQm1G,eAAgB9vG,KAAK+vG,UACtEnmE,eAAa/nD,OAAOsE,SAAUwU,UAAQi1G,cAAe5vG,KAAK6vG,WAC1D7vG,KAAKgwG,aAAa,UAClBxpB,SAAOxmF,KAAK2hB,OACZ,IAAIzyB,EAEAA,IADCK,cAAcyQ,KAAKzV,OAAO+iC,eAClBtqC,EAAGA,EAAGT,OAAQyd,KAAKzd,SAInBA,OADU0E,YAAW+Y,KAAKzd,QAGvC,IAAIujB,GAAU9F,KAAKzV,OAAOmO,aAAapS,cAAc,cACjDsqH,EAAS9qG,EAAQxf,cAAc,qBAAuBwf,EAAQxf,cAAc,qBAAuBwf,CACnG8qG,GAAOxzF,aAAewzF,EAAO13D,eAC7Bl5C,KAAKzV,OAAO+2C,aAAaG,aACzBmvE,EAAOvnH,MAAM+gC,UAAY,UAE7BpqB,KAAKzV,OAAOotB,Q3D7dI,a2D6duBzoB,GACvCmJ,UAAQ2H,KAAKpV,QAAS,iBAAiBH,UAAUqE,IAAI,aACjD3E,EAAa6V,KAAKpV,QAAS,kBAC3BoV,KAAK6wG,oBAAqB,EAG1B7wG,KAAK6wG,oBAAqB,EAE1B7wG,KAAKzV,OAAOsL,gBACZmK,KAAKzV,OAAOsoB,OAAOkU,IAAuBC,KAAM,aAEhDhnB,KAAKzV,OAAOu8B,gBACZ9mB,KAAKkwG,wBACLlwG,KAAKzV,OAAOsoB,O3DjQK,mB2DiQ4BmU,KAAM,cAEvDhnB,KAAK0b,UACL1b,KAAK8wG,eAAe9tH,GACpBgd,KAAKktG,UAAW,IAEpBF,EAAO7qH,UAAUqtH,UAAY,SAAUxsH,GACnC,MAAIA,GAAEs4E,SAAWt4E,EAAEs4E,QAAQl4E,OAChBJ,EAAEs4E,QAAQ,GAAGC,MAGbv4E,EAAEu4E,OAGjByxC,EAAO7qH,UAAU4sH,mBAAqB,WAElC,IAAK,GADD5rH,GAAU6c,KAAKzV,OAAO2L,aACjBrG,EAAK,EAAGkG,KAAQ1K,MAAMg1B,MAAMrgB,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,oBAAqByJ,EAAKkG,EAAG3S,OAAQyM,IAEtH,IAAK,GADDiE,GAAMiC,EAAGlG,GACJilB,EAAK,EAAGyD,EAAYp1B,EAAS2xB,EAAKyD,EAAUn1B,OAAQ0xB,IAAM,CAC/D,GAAIvyB,GAASg2B,EAAUzD,EACvB,IAAIhhB,EAAIxN,cAAc,mBAClBwN,EAAIxN,cAAc,kBAAkBokC,aAAa,kBAAoBnoC,EAAOoJ,KAAOpJ,EAAOoG,QAAS,CACnGpG,EAAOmG,MAAQoL,EAAI3K,wBAAwBT,KAC3C,QAIZ,MAAOvF,IAEX6pH,EAAO7qH,UAAU6sH,0BAA4B,WACzC,IAAK,GAAIn/G,GAAK,EAAGkG,EAAKiK,KAAKzV,OAAOwrF,kBAAkB/1E,KAAKzV,OAAOpH,SAAU0M,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC5F,GAAIgkF,GAAgB99E,EAAGlG,EACvBgkF,GAAcnrF,MAAQsX,KAAK+wG,gBAAgBl9B,EAAe,KAGlEm5B,EAAO7qH,UAAU4uH,gBAAkB,SAAUxuH,EAAQmG,GACjD,IAAK,GAAImH,GAAK,EAAGkG,EAAKxT,EAAOY,QAAS0M,EAAKkG,EAAG3S,OAAQyM,IAAM,CACxD,GAAI9B,GAAMgI,EAAGlG,IACO,IAAhB9B,EAAIpF,UACAoF,EAAI5K,QACJ6c,KAAK+wG,gBAAgBhjH,EAAKrF,GAG1BA,GAASqF,EAAIrF,OAIzB,MAAOA,IAEXskH,EAAO7qH,UAAU0sH,gBAAkB,SAAU7rH,GACzC,GAAIy1B,GAAOpgB,UAAQrV,EAAEtB,OAAQkrH,GAAgB1kE,QAEzCv8C,GADJ8sB,EAAOA,EAAKnyB,cAAc,qBAAuBmyB,EAAKnyB,cAAc,4BACrDokC,aAAa,eAC5B,OAAO1qB,MAAKzV,OAAOwpC,eAAepoC,IAEtCqhH,EAAO7qH,UAAU6tH,aAAe,SAAUnhH,GACtC,GAAI2rF,MAAgBnvF,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,MAC/Eo0F,GAAWt2F,KAAK8b,KAAKzV,OAAOK,QAC5B,KAAK,GAAIiF,GAAK,EAAGmhH,EAAex2B,EAAY3qF,EAAKmhH,EAAa5tH,OAAQyM,IACxDmhH,EAAanhH,GACnBpF,UAAUoE,GAAQ+9G,GAAgBG,SAG9CC,EAAO7qH,UAAUu5B,QAAU,WACvB1b,KAAKzd,OAAS,KACdyd,KAAKu7D,MAAQ,KACbv7D,KAAKpV,QAAU,KACfoV,KAAK2hB,OAAS,MAElBqrF,EAAO7qH,UAAUotH,aAAe,WAC5BvvG,KAAK2hB,OAAS3hB,KAAKzV,OAAOkC,cAAc,OACpC3D,UAAW8jH,GAAgBjrF,SAE/B3hB,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAK2hB,QACrC3hB,KAAKqwG,mBAETrD,EAAO7qH,UAAUkuH,gBAAkB,WAC/B,GAAIz6G,GAAWoK,KAAKzV,OAAOsL,eACvBvI,EAASsI,EAAWoK,KAAKzV,OAAOmO,aAAapS,cAAc,cAAcmD,aACvEuW,KAAKzV,OAAOmO,aAAajP,aAAeuW,KAAK1T,oBAC/Ca,EAAOkL,UAAQ2H,KAAKpV,QAASgiH,GAAgB1kE,QAC7C1oC,KAAQnU,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,OACnE6D,EAAQ+V,KAAKzV,OAAOsS,4BACpBjH,KAEI4J,EADArV,EAAagD,EAAM,sBACX9B,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBF,iBAAiB,OAEhG6D,GAASE,EAAagD,EAAM,4BACzB9B,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,0BAA0BF,iBAAiB,UAGnGiF,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,yBAAyBF,iBAAiB,OAGlH,KAAK,GAAI3C,GAAI+b,EAAG9X,QAAQyF,EAAKjE,eAAgBzF,EAAI+b,EAAGpc,QAAUK,GAAK,EAAGA,IAClE6J,GAAUkS,EAAG/b,GAAGgG,YAEpB,IAAI8nG,GAAMvxF,KAAKixG,QAAQ9jH,EACnBhD,GAAagD,EAAM,yBACnBokG,EAAI5nG,MAASqW,KAAKzV,OAAO2X,UAAY/U,EAAKrD,YAAc,GAAI,EAG5DynG,EAAI5nG,MAASqW,KAAKzV,OAAO2X,WAAY,EAAQ/U,EAAKrD,YAAc,EAEpEkW,KAAK2hB,OAAOt4B,MAAMqD,QAAU,WAAaY,EAAS,YAAcikG,EAAI7nG,IAAM,YAAc0D,KAAK4hE,MAAMuiC,EAAI5nG,MAAQ,MAC3GqW,KAAKzV,OAAO8J,sBACZ2L,KAAK2hB,OAAOl3B,UAAUqE,IAAI,uBAGlCk+G,EAAO7qH,UAAUmK,kBAAoB,SAAUgB,GAC3C,GAAIwG,GAAMkM,KAAKzV,OAAOmO,aAAa4gC,UACnC,OAAQxlC,GAAIspB,aAAetpB,EAAIolD,cAAgB5rD,GAC3CwG,EAAIvH,YAAcuH,EAAIlH,YAAcN,IAAsB,GAElE0gH,EAAO7qH,UAAUutH,aAAe,SAAU1sH,GACtC,GAAIoZ,GAAMpZ,EAAEtB,OAAO+I,SACb2R,GAAI1R,SAASkiH,GAAgBC,OAASzwG,EAAI1R,SAASkiH,GAAgBld,QAAU1vF,KAAK2hB,SACpFioB,eAAa/nD,OAAOsE,SAAUwU,UAAQ+zG,gBAAiB1uG,KAAK0vG,cAC5D9lE,eAAa/nD,OAAOme,KAAK2hB,OAAQhnB,UAAQ+zG,gBAAiB1uG,KAAK8uG,aAC/DtoB,SAAOxmF,KAAK2hB,QACZ3hB,KAAK0b,YAGbsxF,EAAO7qH,UAAUuuH,aAAe,WAC5B,GACI/mH,GADAwD,EAAOkL,UAAQ2H,KAAKpV,QAASgiH,GAAgB1kE,OAYjD,KATIv+C,EADAQ,EAAagD,EAAM,yBACZC,KAAK4hE,MAAMhvD,KAAKixG,QAAQ9jH,GAAMxD,MAAQqW,KAAKzV,OAAO2X,UAAY/U,EAAKrD,YAAc,GAAI,IAGrFsD,KAAK4hE,MAAMhvD,KAAKixG,QAAQ9jH,GAAMxD,MAAQqW,KAAKzV,OAAO2X,WAAY,EAAQ/U,EAAKrD,YAAc,KAGzFkW,KAAKsvG,qBACZ3lH,EAAOqW,KAAKsvG,mBAFE,GAIdtvG,KAAKzV,OAAOsL,eAAgB,CAC5B,GACIq7G,GADQ74G,UAAQlL,EAAM,YACRs+D,UACd9hE,GAAOunH,IACPvnH,EAAOunH,GAGflxG,KAAK2hB,OAAOt4B,MAAMM,KAAOA,EAAO,MAEpCqjH,EAAO7qH,UAAU8uH,QAAU,SAAU7mH,GAQjC,IAPA,GAAIqvF,IACA/vF,IAAK,EACLC,KAAM,GAENwnH,EAAS/mH,EAAKjB,wBACdioH,EAAMhnH,EAAKinH,cACXpkD,EAAe9iE,EAAaC,EAAM,WAAagnH,EAAIr4D,gBAChDkU,IACFA,IAAiBmkD,EAAIzkH,MAAQsgE,IAAiBmkD,EAAIr4D,kBACnB,WAAhCkU,EAAa5jE,MAAMJ,UACnBgkE,EAAeA,EAAa3hC,UAKhC,OAHI2hC,IAAgBA,IAAiB7iE,GAAkC,IAA1B6iE,EAAaqkD,WACtD73B,EAAexsB,EAAa9jE,0BAG5BO,IAAKynH,EAAOznH,IAAM+vF,EAAa/vF,IAC/BC,KAAMwnH,EAAOxnH,KAAO8vF,EAAa9vF,OAGzCqjH,EAAO7qH,UAAU2uH,eAAiB,SAAU9tH,GACxC,GAAI0lB,GAAQ1I,IACRA,MAAK6hF,gBAAkB7hF,KAAKktG,WACvBltG,KAAKitG,QAMNjrB,aAAahiF,KAAKitG,QAClBjtG,KAAK4uG,YAAY5rH,GACjBgd,KAAKitG,OAAS,MAPdjtG,KAAKitG,OAASh2D,WAAW,WACrBvuC,EAAMukG,OAAS,MAChB,OASfD,EAAO7qH,UAAU0/F,aAAe,WAC5B,GAAI9vB,GAAYp3D,UAAQo3D,UAAU5pE,aAClC,OAAO,mBAAmBq0E,KAAKzK,IAEnCi7C,EAAO7qH,UAAUovH,eAAiB,WAC9BvxG,KAAKitG,OAAS,MAEXD,KCvwBPwE,GAAyB,WAKzB,QAASA,GAAQjnH,GACbyV,KAAKzV,OAASA,EACVyV,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGykB,GAAmB70B,KAAKmO,WAAYnO,MACnDA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAK0nB,kBAAmB1nB,MACxDA,KAAKzV,OAAO6lB,GAAGqhG,GAAwBzxG,KAAKghD,iBAAkBhhD,MAC9DA,KAAKzV,OAAO6lB,GAAGskB,GAAmB10B,KAAKjD,KAAMiD,MAC7CA,KAAKzV,OAAO6lB,GAAGgkB,GAAwBp0B,KAAKm0B,UAAWn0B,MACvDA,KAAKzV,OAAO6lB,GAAGwkB,GAAuB50B,KAAK20B,SAAU30B,MACrDA,KAAKzV,OAAO6lB,GAAGykB,GAAmB70B,KAAKmO,WAAYnO,MACnDA,KAAKzV,OAAO6lB,GAAGslB,GAAwB11B,KAAK0xG,qBAAsB1xG,MAClEA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKk9E,gBAAiBl9E,OAsiB5D,MApiBAwxG,GAAQrvH,UAAUwvH,gBAAkB,SAAUC,EAASC,GACnD,GAAI9jH,GAAMiS,KAAKzV,OAAOwpC,eAAe89E,EAASl5G,kBAAkB+xB,aAAa,iBACzEonF,GAAO/jH,IAAOA,EAAIimC,UACtB,QAAS49E,EAAQ1oH,cAAc4B,YAAY+mH,EAAS3oH,gBAAkB8W,KAAKzV,OAAO0c,4BAC1EjH,KAAKzV,OAAOsL,gBACTzJ,MAAMjK,UAAUuF,QAAQ4D,KAAKymH,UAAeH,EAAS,SAAS/lH,SAAU+lH,EAAQ1oH,iBAC3EkD,MAAMjK,UAAUuF,QAAQ4D,KAAKymH,UAAeF,EAAU,SAAShmH,SAAUgmH,EAAS3oH,iBAC3F8W,KAAKgyG,2BAA2BJ,EAASC,IAAa,GAAKC,GAEtEN,EAAQrvH,UAAU8vH,eAAiB,SAAUL,EAASC,GAEvC7xG,KAAKzV,OAAOpH,OAGvB,KAJA,GAAI+uH,GAEAp0C,EAAU99D,KAAK6F,kBAEXqsG,GAAWp0C,EAAQ16E,OAAS,GAEhC8uH,EAAUN,IADD9zC,EAAQ9mC,OACeh3B,KAAKgyG,2BAA2BJ,EAASC,IAAa,CAE1F,OAAOK,IAEXV,EAAQrvH,UAAUgwH,cAAgB,SAAUpkH,EAAKukB,EAAM/nB,GACnDA,EAASA,CACT,KAAK,GAAI9G,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IAAK,CAC7C,GAAIsK,IAAQukB,EAAK7uB,GACb,OAAO,CAEN,IAAI6uB,EAAK7uB,GAAGN,QAAS,CACtB,GAAI02C,GAAMtvC,EAAOnH,MAEjB,IADAmH,EAAOrG,KAAKouB,EAAK7uB,IACZuc,KAAKmyG,cAAcpkH,EAAKukB,EAAK7uB,GAAGN,QAASoH,GAI1C,OAAO,CAHPA,GAAOib,OAAOq0B,EAAKtvC,EAAOnH,OAASy2C,IAO/C,OAAO,GAEX23E,EAAQrvH,UAAUiwH,gBAAkB,SAAU9/F,GAC1C,GAAI1qB,MACAyqH,IAEJ,KADgBryG,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAOsL,eAE1D,MAAOmK,MAAKzV,OAAO2L,YAGnB,KAAK,GAAIzS,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACxCmE,EAAY1D,KAAKouB,EAAK7uB,IAClB6uB,EAAK7uB,GAAGN,UACRkvH,EAAUA,EAAQ77G,OAAO8b,EAAK7uB,GAAGN,SAO7C,OAJQkvH,GAAQjvH,SACRwE,EAAcA,EAAY4O,OAAOwJ,KAAKoyG,gBAAgBC,KAGvDzqH,GAEX4pH,EAAQrvH,UAAUgsB,WAAa,SAAUnrB,GACrC,GAAIM,GAAO0c,KAAKzV,OAEZ+nH,GADctyG,KAAKpV,QAAQtE,cAAc,qBAAuB0Z,KAAKpV,QAAQtE,cAAc,4BACzEokC,aAAa,gBAC/BnoC,EAASe,EAAKywC,eAAeu+E,EACjC,KAAKP,UAAe/uH,EAAEtB,OAAQ,QAAWc,oBAAkBD,MAAaA,EAAO6F,iBAAmB7F,EAAOyxC,YAErG,WADAh0B,MAAKzV,OAAOyoB,IAAI,0BAA4BC,WAAYjT,KAAKmQ,gBAAiB5tB,OAAQA,GAG1F,IAAIsvH,GAAWE,UAAe/uH,EAAEtB,OAAQ,iBAEpC6wH,GADcV,EAASvrH,cAAc,qBAAuBurH,EAASvrH,cAAc,4BACzDokC,aAAa,eAC3C,KAAKloC,oBAAkB+vH,GAAc,CACjC,GAAIC,GAAalvH,EAAKywC,eAAew+E,EACrC,IAAI/vH,oBAAkBgwH,KAAgBA,EAAWpqH,iBAAmBoqH,EAAWx+E,WAE3E,WADAh0B,MAAKzV,OAAOyoB,IAAI,0BAA4BC,WAAYjT,KAAKmQ,gBAAiB5tB,OAAQA,EAAQiwH,WAAYA,IAIlH,GAAIX,GAAe7xG,KAAK2xG,gBAAgB3xG,KAAKpV,QAASinH,IAAc7xG,KAAKiyG,eAAejyG,KAAKpV,QAASinH,GAClG,GAAI7xG,KAAKzV,OAAO0c,2BAA4B,CACxC,GAAI9jB,GAAU6c,KAAKzV,OAAOpH,QACtBsvH,EAAczyG,KAAKpV,QAAQtE,cAAc,oBAAoBokC,aAAa,gBAE1EgoF,EAAkB,KAClBh9F,EAFM1V,KAAKzV,OAAOpH,QAAQmW,OAAO,SAAUvL,GAAO,MAAOA,GAAIpC,MAAQ8mH,IAEtD,GACfE,EAAYd,EAASvrH,cAAc,oBAAoBokC,aAAa,eAC7DvnC,GAAQwP,KAAK,SAAU5E,EAAKjG,GACnC,MAAIiG,GAAIpC,MAAQgnH,IACZD,EAAkB5qH,EACXiG,EAAIpC,MAAQgnH,IAItBnwH,qBAAkBkwH,IACnB1yG,KAAK4yG,YAAYF,EAAiBh9F,OAGrC,CACD,GAAIm9F,GAAW7yG,KAAKgyG,2BAA2BhyG,KAAKpV,QAASinH,GACzDlmH,EAAMqU,KAAKpV,QAAQ+N,kBAAkB+xB,aAAa,eAGtD,IAFA1qB,KAAK8yG,YAAcjB,EACnB7xG,KAAKzV,OAAOsoB,O5D6Uc,mC4D7UgC/e,IAAK+9G,IAC3DlmH,EACAqU,KAAK4yG,YAAYC,EAAU7yG,KAAKzV,OAAOwpC,eAAepoC,QAErD,CACD,GAAImyE,GAAU99D,KAAK6F,iBACfktG,EAASpoH,EAAgBqV,KAAKpV,QAASkzE,GAEvCk1C,GADA7vH,EAAU6c,KAAKoyG,gBAAgBpyG,KAAKzV,OAAOpH,UACxB4vH,EACvB/yG,MAAK4yG,YAAYC,EAAUG,MAK3CxB,EAAQrvH,UAAUiM,gBAAkB,SAAU9K,GAC1C,MAAO8K,GAAgB9K,IAE3BkuH,EAAQrvH,UAAUywH,YAAc,SAAUK,EAAW1wH,EAAQ2wH,EAAiBC,GAC1E,GAAI7vH,GAAO0c,KAAKzV,MAChB,IAAIyV,KAAK5R,gBAAgB9K,GAErB,WADAA,GAAKuvB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAK4yG,YAAat6C,KAAM26C,EAAWpoB,KAAMtoG,GAGzG,IAAIqT,IAAYtS,EAAKwS,oBAAsBxS,EAAKuS,eAC5CtL,EAASyV,KAAKozG,aAAa7wH,EAAQyd,KAAKzV,OAAOpH,SAC/CmvB,EAAO/nB,EAASA,EAAOpH,QAAUyS,EAAWoK,KAAKzV,OAAO2L,aAAe8J,KAAKzV,OAAOpH,QACnFkwH,EAAStoH,EAAQxI,EAAQ+vB,EAC7B,KAAMtS,KAAKzV,OAAOsL,gBAAkBtL,GAAWyV,KAAKzV,OAAOitC,wBAA0B07E,EAAiB,CAClG,IAASzvH,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAC7B,GAAI6uB,EAAK7uB,GAAGpB,QAAUE,EAAOF,MAAO,CAChCgxH,EAAS5vH,CACT,OAGR,GAAIsK,GAAMiS,KAAKzV,OAAOwpC,eAAe/zB,KAAK8yG,YAAYn6G,kBAAkB+xB,aAAa,gBACrF,IAAI38B,GACA,IAAStK,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAC7B,GAAI6uB,EAAK7uB,GAAGpB,QAAU0L,EAAI1L,MAAO,CAC7B4wH,EAAYxvH,CACZ,YAKR,KAAK,GAAIA,GAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IACzB6uB,EAAK7uB,GAAG4E,aAAe2X,KAAK8yG,YAAYh/E,UAAUttC,SAClDysH,EAAYxvH,GAK5B,GAAKH,EAAK8E,iBAAmBirH,IAAWJ,IAAyB,IAAZI,IAAgC,IAAfJ,EAAtE,CAGA3gG,EAAK9M,OAAOytG,EAAW,EAAG3gG,EAAK9M,OAAO6tG,EAAQ,GAAG,GACjD,IAAInkH,IAAS3M,OAAQA,EAAQ0wH,UAAWA,EAAW9vH,QAASmvB,EAAM/nB,OAAQA,EAAQ08B,QAAQ,EAC1F3jC,GAAKuvB,O5DmRqB,yB4DnRe3jB,GACrCA,EAAK+3B,SAGT3jC,EAAK4S,YAAW,GAChB5S,EAAKuvB,OAAOiiB,IAAgCzjB,UAAW4hG,EAAW7hG,QAASiiG,KACpD,IAAnBF,GACA7vH,EAAKuvB,OAAOozB,IACRtiD,KAAMk+C,GAAoBz/B,YAAa,UAAWiP,UAAW4hG,EAAW7hG,QAASiiG,EAAQC,YAAa/wH,EAAOoJ,SAIzH6lH,EAAQrvH,UAAU6vH,2BAA6B,SAAUJ,EAASC,GAC9D,GACIv/F,IADYtS,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAOsL,eACxCmK,KAAKzV,OAAO2L,aAAe8J,KAAKzV,OAAOpH,QACzD26E,EAAU99D,KAAK6F,iBACf0tG,EAAcvzG,KAAKoyG,gBAAgB9/F,GACnC/nB,EAASyV,KAAKozG,aAAaG,EAAY5oH,EAAgBinH,EAAS9zC,IAAWxrD,EAE/E,OADAA,GAAO/nB,EAASA,EAAOpH,QAAUmvB,EAC1BvnB,EAAQwoH,EAAY5oH,EAAgBknH,EAAU/zC,IAAWxrD,IAEpEk/F,EAAQrvH,UAAU0jB,eAAiB,WAC/B,GAAIsX,GAAgBnd,KAAKzV,OAAOuL,kBAChC,IAAIqnB,GAAiBnd,KAAKzV,OAAOitC,qBAAsB,CACnD,GAAIg8E,OAAM,GACNC,MAAM,GACNC,KACAxkF,KAAW7jC,MAAMC,KAAK0U,KAAKzV,OAAO2+B,iBAAiB9iC,iBAAiB,mBACxE,IAAI+2B,EAGA,IAAK,GAFDgS,MAAW9jC,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBACjChd,cAAc,oBAAoBF,iBAAiB,oBAC/C3C,EAAI,EAAGA,EAAIyrC,EAAM9rC,OAAQK,IAAK,CACnC+vH,KAASnoH,MAAMC,KAAK4jC,EAAMzrC,GAAGsd,uBAAuB,iBACpD0yG,KAASpoH,MAAMC,KAAK6jC,EAAM1rC,GAAGsd,uBAAuB,gBAEpD,KAAK,GADDm8D,OAAU,GACLlhE,EAAI,EAAGA,EAAIw3G,EAAIpwH,OAAQ4Y,IAAK,CACjC,IAAStY,EAAI,EAAGA,EAAI+vH,EAAIrwH,OAAQM,IAC5B,GAAI+vH,EAAI/vH,GAAGowC,YAAc0/E,EAAIx3G,GAAG83B,UAAW,CACvCopC,GAAU,CACV,OAGHA,IACDw2C,EAAWA,EAASl9G,QAAQg9G,EAAIx3G,MAGxC,IAAStY,EAAI,EAAGA,EAAI+vH,EAAIrwH,OAAQM,IAC5BgwH,EAASxvH,KAAKuvH,EAAI/vH,QAK1B,KAASD,EAAI,EAAGA,EAAIyrC,EAAM9rC,OAAQK,IAAK,CACnCgwH,KAASpoH,MAAMC,KAAK4jC,EAAMzrC,GAAGsd,uBAAuB,gBACpD,KAAS/E,EAAI,EAAGA,EAAIy3G,EAAIrwH,OAAQ4Y,IAAK,CAEjC,IAAK,GADDkhE,OAAU,GACLx5E,EAAIsY,EAAI,EAAGtY,EAAI+vH,EAAIrwH,OAAQM,IAChC,GAAI+vH,EAAI/vH,GAAGowC,YAAc2/E,EAAIz3G,GAAG83B,UAAW,CACvCopC,GAAU,CACV,OAGHA,IACDw2C,EAAWA,EAASl9G,QAAQi9G,EAAIz3G,OAKhD,MAAO03G,GAGP,SAAUroH,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQmW,uBAAuB,kBAGxEywG,EAAQrvH,UAAUixH,aAAe,SAAU7wH,EAAQY,GAC/C,GAAI4I,KAEJ,OADAiU,MAAKmyG,cAAc5vH,EAAQY,EAAS4I,GAC7BA,EAAQA,EAAQ3I,OAAS,IAEpCouH,EAAQrvH,UAAUwxH,oBAAsB,SAAU55B,EAAWC,GACzD,GAAI6uB,GAAU7oG,KAAKzV,OAAO0c,2BACtBjH,KAAKzV,OAAOpH,QAAQmW,OAAO,SAAUvL,GAAO,MAAOA,GAAI1L,QAAU03F,IAAc,GAC7E/5E,KAAKzV,OAAOiN,iBAAiBuiF,GAC/B65B,EAAW5zG,KAAKzV,OAAO0c,2BACvBjH,KAAKzV,OAAOpH,QAAQmW,OAAO,SAAUvL,GAAO,MAAOA,GAAI1L,QAAU23F,IAAY,GAC3Eh6E,KAAKzV,OAAOiN,iBAAiBwiF,EACnC,KAAMx3F,oBAAkBqmH,MAAcA,EAAQzgH,iBAAmBygH,EAAQ70E,cACnExxC,oBAAkBoxH,MAAeA,EAASxrH,iBAAmBygH,EAAQ70E,YAEvE,WADAh0B,MAAKzV,OAAOyoB,IAAI,0BAA4BC,WAAYjT,KAAKmQ,gBAAiB5tB,OAAQsmH,EAAS2J,WAAYoB,GAG/G,IAAIrxH,GAASqxH,EACTrpH,EAASyV,KAAKozG,aAAa7wH,EAAQyd,KAAKzV,OAAOpH,SAE/C8vH,EAAYloH,EAAQxI,EADVgI,EAASA,EAAOpH,QAAU6c,KAAKzV,OAAOpH,QAEhD8vH,IAAa,GACbjzG,KAAK4yG,YAAYK,EAAWpK,GAAS,IAG7C2I,EAAQrvH,UAAU0xH,uBAAyB,SAAUC,EAAY95B,GAC7D,GAAI5oE,GAAUpR,KAAKzV,OAAO0pC,sBAAsB+lD,GAC5C45B,EAAW5zG,KAAKzV,OAAOiN,iBAAiBwiF,EAC5C,MAAI5oE,EAAU,KAAO5uB,oBAAkBoxH,IAAeA,EAASxrH,kBAAmBwrH,EAAS5/E,YAA3F,CAGA,IAASvwC,EAAI,EAAGA,EAAIqwH,EAAW1wH,OAAQK,IAAK,CACpClB,EAASyd,KAAKzV,OAAOiN,iBAAiBs8G,EAAWrwH,GACrD,KAAKjB,oBAAkBD,MAAaA,EAAO6F,iBAAmB7F,EAAOyxC,YACjE,OAGR,IAAK,GAAIvwC,GAAI,EAAGA,EAAIqwH,EAAW1wH,OAAQK,IAAK,CACxC,GAAIlB,GAASyd,KAAKzV,OAAOotD,iBAAiBvmC,GACtC2iG,EAAW/zG,KAAKozG,aAAa7wH,EAAQyd,KAAKzV,OAAOpH,SAEjD8vH,EAAYloH,EAAQxI,EADVwxH,EAAWA,EAAS5wH,QAAU6c,KAAKzV,OAAOpH,QAEpD8vH,IAAa,GACbjzG,KAAK4yG,YAAYK,EAAWjzG,KAAKzV,OAAOiN,iBAAiBs8G,EAAWrwH,KAAK,IAAQ8L,eAAeyQ,KAAKzV,OAAO+iC,gBAE5GttB,KAAKzV,OAAO0pC,sBAAsB6/E,EAAWrwH,EAAI,KAAOwvH,GACxD7hG,IAGR,GAAI7hB,eAAeyQ,KAAKzV,OAAO+iC,cAAe,CAC1C,GAAI0mF,GAASh0G,KAAKzV,OAAO2L,YACzB8J,MAAKzV,OAAOsoB,OAAOozB,IACfguE,cAAeH,EAAW/3G,IAAI,SAAUlB,GAAQ,MAAOm5G,GAAO16G,OAAO,SAAUvL,GAAO,MAAOA,GAAI1L,QAAUwY,IAAS,GAAGlP,MACvH2nH,YAAaM,EAASjoH,IACtBuoH,mBAAmB,EACnB9xG,YAAa,UACbze,KAAM,mBAIlB6tH,EAAQrvH,UAAUgyH,iBAAmB,SAAU5xH,EAAQ6uB,GAC/CA,GAAW,GACXpR,KAAK4yG,YAAYxhG,EAAS7uB,GAAQ,IAG1CivH,EAAQrvH,UAAUiyH,4BAA8B,SAAUvvE,EAAWzzB,GACjE,GAAI7uB,GAASyd,KAAKzV,OAAOiN,iBAAiBqtC,EAC1C7kC,MAAKm0G,iBAAiB5xH,EAAQ6uB,IAElCogG,EAAQrvH,UAAUkyH,8BAAgC,SAAUxvE,EAAWzzB,GACnE,IAAK,GAAI3tB,GAAI,EAAGA,EAAIohD,EAAUzhD,OAAQK,IAClCuc,KAAKo0G,4BAA4BvvE,EAAUphD,GAAI2tB,IASvDogG,EAAQrvH,UAAU23F,eAAiB,SAAUC,EAAWC,GAC3B,gBAAdD,IACP/5E,KAAK2zG,oBAAoB55B,EAAWC,GACpCh6E,KAAKs0G,QAAUv6B,IAGf/5E,KAAK6zG,uBAAuB95B,EAAWC,GACvCh6E,KAAKs0G,QAAUv6B,EAAU,KASjCy3B,EAAQrvH,UAAU+3F,qBAAuB,SAAU7oE,EAAWD,GAC1D,GAAI7uB,GAASyd,KAAKzV,OAAOotD,iBAAiBtmC,EAC1CrR,MAAKm0G,iBAAiB5xH,EAAQ6uB,IAQlCogG,EAAQrvH,UAAUg4F,2BAA6B,SAAUt1C,EAAWzzB,GAC3C,gBAAdyzB,GAAyB7kC,KAAKo0G,4BAA4BvvE,EAAWzzB,GACxEpR,KAAKq0G,8BAA8BxvE,EAAWzzB,IAEtDogG,EAAQrvH,UAAUulC,kBAAoB,SAAU1kC,GACxCA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,QACvCzxB,KAAK0xG,wBAGbF,EAAQrvH,UAAUuvH,qBAAuB,SAAU1uH,GAC3CA,GAAKA,EAAEkM,KAAKuW,SACZzF,KAAKu0G,WAAW,OAEpB,IAAIrsE,GAASloC,KAAKzV,OAAOK,QAAQtE,cAAc,mBAC/C0Z,MAAKk7C,QAAUhT,EAAOp8C,YAAYkU,KAAKzV,OAClCkC,cAAc,OAAS3D,UAAW,iDAAkDwyB,OAASjyB,MAAO,mBACzG2W,KAAKm7C,UAAYjT,EAAOp8C,YAAYkU,KAAKzV,OACpCkC,cAAc,OAAS3D,UAAW,qDAAsDwyB,OAASjyB,MAAO,oBAOjHmoH,EAAQrvH,UAAU6+D,iBAAmB,SAAUh+D,GACvCuM,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BtqC,EAAEgY,KAAO,MAEbgF,KAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,GAAKW,KAAMujC,KAC7D,IAAIxlC,GAASse,KAAKs0G,SAAWt0G,KAAKzV,OAAOurF,uBAAuB91E,KAAKs0G,QACjE5yH,IACAse,KAAKzV,OAAOszD,YAAYrJ,SAAU9yD,OAAQA,IAAU,IAQ5D8vH,EAAQrvH,UAAU0rB,QAAU,WACxB,GAAIozC,GAAcjhD,KAAKzV,OAAOK,SAC1BoV,KAAKzV,OAAO2lB,aAAgB+wC,IAAiBA,EAAY36D,cAAc,kBACtE26D,EAAY36D,cAAc,qBAG/BzE,SAAOme,KAAKk7C,SACZr5D,SAAOme,KAAKm7C,WACZn7C,KAAKzV,OAAOstB,IAAIgd,GAAmB70B,KAAKmO,YACxCnO,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAK0nB,mBACtC1nB,KAAKzV,OAAOstB,IAAI45F,GAAwBzxG,KAAKghD,kBAC7ChhD,KAAKzV,OAAOstB,IAAI6c,GAAmB10B,KAAKjD,MACxCiD,KAAKzV,OAAOstB,IAAIuc,GAAwBp0B,KAAKm0B,WAC7Cn0B,KAAKzV,OAAOstB,IAAI+c,GAAuB50B,KAAK20B,UAC5C30B,KAAKzV,OAAOstB,IAAI6d,GAAwB11B,KAAK0xG,sBAC7C1xG,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKk9E,mBAG5Cs0B,EAAQrvH,UAAU+6F,gBAAkB,SAAUl6F,GAC1C,GAAIM,GAAO0c,KAAKzV,MAChB,QAAQvH,EAAE6L,QACN,IAAK,gBACL,IAAK,iBACD,GAAIjE,GAAUtH,EAAKu6D,YAAYn4C,YAAY9a,OAC3C,IAAIA,GAAWA,EAAQH,UAAUC,SAAS,gBAAiB,CACvD,GAAInI,GAASe,EAAKywC,eAAenpC,EAAQ+N,kBAAkB+xB,aAAa,iBACpE8pF,EAAclxH,EAAKiX,oBACnBzS,EAAQ0sH,EAAY9sH,QAAQnF,GAC5BkyH,EAAqB,kBAAbzxH,EAAE6L,OAA6B2lH,EAAY1sH,EAAQ,GAAK0sH,EAAY1sH,EAAQ,EACpF2sH,IAASA,EAAMpyH,OAASE,EAAOF,OAC/B2d,KAAK85E,eAAev3F,EAAOF,MAAOoyH,EAAMpyH,UAM5DmvH,EAAQrvH,UAAU4a,KAAO,SAAU/Z,GAC/B,GAAIM,GAAO0c,KAAKzV,OACZ7I,EAASsB,EAAEtB,MACf,IAAKsB,EAAET,OAAO6F,kBAAmBpF,EAAET,OAAOyxC,WAA1C,CAGA,GAAI37B,GAAU05G,UAAerwH,EAAQ,2CACjC+yC,EAAenxC,EAAKsH,QAAQtE,cAAc,sBAC1Cwf,EAAUxiB,EAAKuS,eAAiBvS,EAAK8iC,2BAA6B9iC,EAAKoV,aAAaC,kBACpFiiE,EAAS56D,KAAKjW,EAAIC,EAAYhH,EAAEqxC,OAAOtqC,EAAI+b,EAAQmyB,UACvD7mC,eAAY9N,EAAK4lC,iBAAiB9iC,iBAAiB,uBAAwB,sBAC3E4Z,KAAKu0G,WAAW,QAChBv0G,KAAK4qG,YACLngH,YAAUgqC,GAAe,iBAAkB,oBAC3Cz0B,KAAK00G,oBAAoB1xH,EAAEqxC,OACvBh8B,IAAYA,EAAQvN,YAAYkV,KAAKpV,WACrClJ,EAAS2W,EAEF2H,KAAK2xG,gBAAgB3xG,KAAKpV,QAASlJ,IAAYse,KAAKiyG,eAAejyG,KAAKpV,QAASlJ,IACpFse,KAAK20G,oBAAoBjzH,EAAQk5E,GACjCnwE,YAAU/I,GAAS,cAAe,0BAE3B4B,EAAKylB,eAAiB5e,EAAanH,EAAEtB,OAAQ,oBACpD+I,YAAUgqC,GAAe,oBAAqB,kBAGtDnxC,EAAKq0B,QAAQ+c,IAAqBhzC,OAAQA,EAAQkzH,cAAe,aAAcryH,OAAQS,EAAET,WAE7FivH,EAAQrvH,UAAUuyH,oBAAsB,SAAU1xH,GAC9C,GAAI0lB,GAAQ1I,KACRjW,EAAIC,EAAYhH,GAAG+G,EACnB8qH,EAAU70G,KAAKzV,OAAOK,QAAQzB,wBAC9B2rH,EAAmBD,EAAQ5qH,KAC/B,IAAI+V,KAAKzV,OAAOsL,eACZmK,KAAK+0G,2BAA2BhrH,EAAG8qH,OAElC,CACD,GAAIG,GAAkBH,EAAQlrH,KAC1BsrH,EAAej1G,KAAKzV,OAAOmO,aAAaC,iBACxC5O,GAAIirH,GAAmBjrH,EAAIirH,EAAkB,GAC7Ch1G,KAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAM6xD,cAAc06C,GAAc,IAAU,IAErFlrH,EAAI+qH,GAAoB/qH,EAAI+qH,EAAmB,KACpD90G,KAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAM6xD,cAAc06C,GAAc,IAAW,OAIvGzD,EAAQrvH,UAAU4yH,2BAA6B,SAAUhrH,EAAG8qH,GACxD,GAAInsG,GAAQ1I,KACRk1G,EAAal1G,KAAKzV,OAAOmO,aAAapS,cAAc,qBACpD6uH,EAAcn1G,KAAKzV,OAAOK,QAAQtE,cAAc,oBAAoB6C,wBACpEQ,EAAOqW,KAAKzV,OAAOmS,qBAEnBo4G,EADQ90G,KAAKzV,OAAOsS,6BACOs4G,EAAYlrH,MAAQ4qH,EAAQ5qH,MACvD+qH,EAAkBrrH,EAAOwrH,EAAYxrH,KAAOkrH,EAAQlrH,IACpDI,GAAIirH,GAAmBjrH,EAAIirH,EAAkB,GAC7Ch1G,KAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAM6xD,cAAc26C,GAAY,IAAU,IAEnFnrH,EAAI+qH,GAAoB/qH,EAAI+qH,EAAmB,KACpD90G,KAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAM6xD,cAAc26C,GAAY,IAAW,MAGjG1D,EAAQrvH,UAAUo4E,cAAgB,SAAU26C,EAAYt6C,GACpD,GAAI3iC,GAAai9E,EAAWj9E,UAC5Bi9E,GAAWj9E,WAAai9E,EAAWj9E,YAAc2iC,GAAU,EAAI,GAC3D3iC,IAAei9E,EAAWj9E,YAC1Bj4B,KAAKu0G,WAAW,SAGxB/C,EAAQrvH,UAAUyoH,UAAY,WAC1BniH,OAAOwiH,cAAcjrG,KAAK+hF,QAE9ByvB,EAAQrvH,UAAUwyH,oBAAsB,SAAUjzH,EAAQk5E,GACtD,GAAIi6C,GAAUnzH,EAAOyH,wBACjBisH,EAAcp1G,KAAKzV,OAAOK,QAAQzB,uBACtC,MAAKyxE,GAAUi6C,EAAQlrH,KAAOyrH,EAAYzrH,OAAWixE,GAAUi6C,EAAQ5qH,MAAQmrH,EAAYnrH,OAA3F,CAGA,GAAI+V,KAAKzV,OAAOsL,gBAAkBnU,EAAO+I,UAAUC,SAAS,gBAAiB,CACzE,GAAIf,GAAOqW,KAAKzV,OAAOmS,qBACnBzS,EAAQ+V,KAAKzV,OAAOsS,6BACpBw4G,EAAUr1G,KAAKpV,QAAQtE,cAAc,oBACrCgvH,EAAUD,EAAUr1G,KAAKzV,OAAOwpC,eAAeshF,EAAQ3qF,aAAa,aAAe,KACnF38B,EAAMiS,KAAKzV,OAAOwpC,eAAeryC,EAAOiX,kBAAkB+xB,aAAa,iBACvE6qF,EAAYnoH,KAAK2+B,MAAM/rB,KAAKzV,OAAO0b,yBAAyB9c,wBAAwBc,OACpFurH,EAAYpoH,KAAK2+B,MAAM/rB,KAAKzV,OAAOwb,0BAA0B5c,wBAAwBc,MACzF,IAAI8D,EAAK,CACL,GAAIpE,IAASM,GAAS+V,KAAKzV,OAAOulC,yBAAyB/hC,EAAIpC,MAAQhC,IAC9DixE,GAAUxtE,KAAK2+B,MAAM8oF,EAAQlrH,MAAQ4rH,IAAgB36C,GAAU46C,EAAYX,EAAQ5qH,OACxF,MAEJ,KAAKN,GAAQM,GAASqrH,GAAWA,EAAQp3G,uBAAyBnQ,EAAImQ,uBAC7D08D,GAAUxtE,KAAK2+B,MAAM8oF,EAAQ5qH,OAASsrH,EAC3C,QAIZv1G,KAAKk7C,QAAQ7xD,MAAMK,IAAMmrH,EAAQnrH,IAAMmrH,EAAQvnH,OAAS8nH,EAAY1rH,IAAM,KAC1EsW,KAAKm7C,UAAU9xD,MAAMK,IAAMmrH,EAAQnrH,IAAM0rH,EAAY1rH,IAAM,EAAI,KAC/DsW,KAAKk7C,QAAQ7xD,MAAMM,KAAOqW,KAAKm7C,UAAU9xD,MAAMM,MAAQixE,EAASi6C,EAAQlrH,KAAOkrH,EAAQ5qH,OAASmrH,EAAYzrH,KAAO,EAAI,KACvHqW,KAAKu0G,WAAW,MAEpB/C,EAAQrvH,UAAUgyC,UAAY,SAAUnxC,GACpC,GAAIM,GAAO0c,KAAKzV,OACZ7I,EAASsB,EAAEtB,MAGf,IAFAse,KAAKpV,QAAUlJ,EAAO+I,UAAUC,SAAS,gBAAkBhJ,EACvDyI,EAAazI,EAAQ,gBACpBsB,EAAET,OAAO6F,kBAAmBpF,EAAET,OAAOyxC,WAA1C,CAGA,GAAIluB,GAAUxiB,EAAKuS,eAAiBvS,EAAK8iC,2BAA6B9iC,EAAKoV,aAAaC,iBACxFqH,MAAKjW,EAAIC,EAAYhH,EAAEqxC,OAAOtqC,EAAI+b,EAAQmyB,WAC1C30C,EAAKq0B,QAAQyc,IACT1yC,OAAQA,EAAQkzH,cAAe,aAAcryH,OAAQS,EAAET,WAG/DivH,EAAQrvH,UAAUwyC,SAAW,SAAU3xC,GACnC,GAAIM,GAAO0c,KAAKzV,MAChByV,MAAKu0G,WAAW,QAChBv0G,KAAK4qG,YACA5nH,EAAEikC,QACH3jC,EAAKq0B,QAAQ2N,IAAqB5jC,OAAQsB,EAAEtB,OAAQkzH,cAAe,aAAcryH,OAAQS,EAAET,SAE/F6O,cAAY9N,EAAK4lC,iBAAiB9iC,iBAAiB,uBAAwB,uBAE/EorH,EAAQrvH,UAAUoyH,WAAa,SAAUjrH,GACrC0W,KAAKk7C,QAAQ7xD,MAAMC,QAAUA,EAC7B0W,KAAKm7C,UAAU9xD,MAAMC,QAAUA,GAMnCkoH,EAAQrvH,UAAUguB,cAAgB,WAC9B,MAAO,WAEJqhG,KCnjBPiE,GAAuB,WAKvB,QAASA,GAAMlrH,GACX,GAAIme,GAAQ1I,IACZA,MAAK+kD,gBACL/kD,KAAK01G,kBAAmB,EACxB11G,KAAK21G,oBACL31G,KAAKyzE,WAAY,EACjBzzE,KAAKuzB,kBAAmB,EACxBvzB,KAAK41G,cAAe,EAGpB51G,KAAK2hB,OAAS,SAAU3+B,GACpB,GAAIM,GAAOolB,EAAMne,OACb7I,EAASgnB,EAAM8qB,UAAUC,mBACzBE,EAAgBjrB,EAAMne,OAAOkC,cAAc,OAC3C3D,UAAW,qDACXoE,OAAQ,mCAAqC5J,EAAKsH,QAAQd,cAE1DmD,EAAQyb,EAAMne,OAAOkC,cAAc,SAAWS,OAAQ,SAAW5J,EAAKsH,QAAQd,cAC9E+U,EAAQ6J,EAAMne,OAAOkC,cAAc,QACvC,IAAItG,SAAS4a,uBAAuB,kBAAkB3d,QACjDE,EAAK2yF,gBAAgBC,YAAex0F,EAAO+I,UAAUC,SAAS,0BACxB,WAAhCpH,EAAKylC,kBAAkBplC,OAAuBwG,EAAazI,EAAQ,gBACxE4B,EAAK2yF,gBAAgBC,WAAa/rF,EAAazI,EAAQ,iBACzD,OAAO,CAEP4B,GAAK2yF,gBAAgBC,UACW,QAAhC5yF,EAAKylC,kBAAkBt6B,MAAkD,WAAhCnL,EAAKylC,kBAAkBplC,MAChEL,EAAKinC,UAAU6D,SAAS1lB,EAAM8qB,UAAUC,mBAAmBvqC,cAAcwhC,aAAa,iBAAkB,KAE5GhiB,EAAMmtG,WAAa9D,UAAerwH,EAAQ,MAAMwS,WAAU,EAC1D,IAAIH,GAAU2U,EAAMne,OAAOsL,cAC3B,IAAI9B,EAAS,CACT,GAAIkK,GAAWmwB,SAAS2jF,UAAerwH,EAAQ,MAAMgpC,aAAa,iBAAkB,GACpFhiB,GAAMmtG,WAAWtvH,UAAY,GAC7BmiB,EAAMmtG,WAAWtvH,WAAajD,EAAK6tC,cAAclzB,GAAU1X,UAC3DmiB,EAAMmtG,WAAWtvH,WAAajD,EAAKiuC,qBAAqBtzB,GAAU1X,UACrC,eAAzBjD,EAAK+Y,kBACLqM,EAAMmtG,WAAWtvH,WAAajD,EAAKq+D,yBAAyB1jD,GAAU1X,WAG9EmiB,EAAMotG,YAAYp0H,EAClB,IAAIwN,IACAgzD,YAAax5C,EAAM1N,KAAM+6G,YAAar0H,EACtC+yC,aAAcd,EAAe1M,QAAQ,EAAO3kC,KAAMomB,EAAM3G,SAExDgjD,EAAezhE,EAAKozF,iBACxBpzF,GAAKq0B,QAAQq+F,GAA2B9mH,EAExC,IACIA,EAAW,OACX,OAAO,CAEX9D,GAAcsd,EAAMmtG,WAAY,iBAChCzqH,EAAcsd,EAAMmtG,WAAY,wBAChCzqH,EAAcsd,EAAMmtG,WAAY,sBAChCntG,EAAMutG,WAAWvtG,EAAMmtG,WAAY,eACnC,IAAIK,GAAM,GAAIla,QAAO,WAAY,IAGjC,IAFAtzF,EAAMmtG,WAAWtvH,UAAYmiB,EAAMmtG,WAAWtvH,UAAUqH,QAAQsoH,EAAK,IACrEr3G,EAAM/S,YAAY4c,EAAMmtG,YACpBvyH,EAAK44B,wBAAwB94B,OAAS,GAAKslB,EAAMmtG,WAAWlzD,aAAa,iBAAkB,CAC3F,GAAI76D,GAAiC,eAAzBxE,EAAK+Y,gBAAmC,EAAI,EACpD85G,EAAeztG,EAAMne,OAAOkC,cAAc,QAC1C3D,UAAW,mBAAoBvC,UAAWwN,EAAU,GAAKgxD,EAAa3hE,OAAS0E,EAAQ,GAAKi9D,EAAa3hE,QAE7GuwC,GAAc7nC,YAAYqqH,GAE9B,GAAIriH,GAAMi+G,UAAerwH,EAAQ,MAAM4E,cAAc,sBAOrD,OANIwN,IACAA,EAAIrJ,UAAUqE,IAAI,kBAEtB7B,EAAMnB,YAAY+S,GAClB80B,EAAc7nC,YAAYmB,GAC1B3J,EAAKsH,QAAQkB,YAAY6nC,GAClBA,GAEX3zB,KAAKm0B,UAAY,SAAUnxC,GACvB,GAAIM,GAAOolB,EAAMne,MACjB,KAAIpE,SAAS4a,uBAAuB,kBAAkB3d,OAAtD,CAGA,GAAI1B,GAASsB,EAAEtB,OACX00H,EAAa1tG,EAAMne,OAAOK,QAAQtE,cAAc,oBAChDoiB,GAAMne,OAAOw3C,qBAAqB3+C,OAAS,GAAKgzH,IAChDA,EAAW/sH,MAAMM,KAAO+e,EAAMne,OAAOK,QAAQtE,cAAc,4BACtDwD,YAAc,EAAI,MAE3B4e,EAAMotG,YAAYp0H,GAClB4B,EAAKq0B,QAAQ0+F,IACTr7G,KAAOzL,aAAc,KAAOmZ,EAAM1N,KAAMtZ,OAAS6N,aAAc,KAAOvM,EAAEtB,OACxEkzH,cAAe,OAAQvjG,UAAW+c,SAAS1lB,EAAM1N,KAAK,GAAG0vB,aAAa,iBAAkB,IACxFpoC,KAAOkF,OAAOC,KAAKihB,EAAM3G,QAAQ,IAAI3e,OAAS,EAAKslB,EAAM3G,QAAU2G,EAAM0gB,oBAEzE75B,cACAvM,EAAEsxC,WAAWtxC,EAAEuxC,aAEnB7rB,EAAM4tG,cAAgB5tG,EAAM3G,OAC5B,IAAIw0G,GAAWpwH,SAAS2nD,eAAexqD,EAAK2yF,gBAAgBC,SACxD5yF,GAAK2yF,gBAAgBC,UAAYqgC,GAAYA,EAASplC,eACR,SAA9ColC,EAASplC,cAAc,GAAGhhE,iBAC1BomG,EAASplC,cAAc,GAAGz4E,aAAajO,UAAUqE,IAAI,oBAG7DkR,KAAKjD,KAAO,SAAU/Z,GAClB,GAAIM,GAAOolB,EAAMne,MAGjB,IAFAme,EAAM8tG,WAAa9tG,EAAMne,OACzBme,EAAMktG,cAAe,EACjBltG,EAAMne,OAAO0rF,gBAAgBC,SAAU,CACvC,GAAIugC,GAActwH,SAAS2nD,eAAexqD,EAAK2yF,gBAAgBC,SAC/DxtE,GAAM8tG,WAAaC,EAAYtlC,cAAc,GACzChnF,EAAanH,EAAEtB,OAAQ,YACvBgnB,EAAMktG,aAAeltG,EAAMne,OAAO0rF,gBAAgBC,WAAa/rF,EAAanH,EAAEtB,OAAQ,UAAU8I,IAGxG,GAAIiqC,GAAe/rB,EAAMne,OAAOK,QAAQtE,cAAc,sBAClD5E,EAASgnB,EAAMguG,uBAAuBjiF,EAAczxC,EAAEqxC,MAC1D5pC,aAAUgqC,GAAe,iBAAkB,kBAAmB,cAC9D/rB,EAAMgtG,kBAAmB,EACzBhtG,EAAMiuG,WAAarzH,EAAKosF,WACxB,IAAIhmD,GAAYv/B,EAAazI,EAAQ,UAAYqwH,UAAe/uH,EAAEtB,OAAQ,MAAQ,IAElF,IADA4B,EAAKosF,aAAc,EACd1sF,EAAEtB,OAAP,CAGAgnB,EAAMotG,YAAYp0H,EAClB,IAAIwN,IACA8L,KAAM0N,EAAM1N,KAAMtZ,OAAQA,EAAQkzH,cAAe,OACjDtyH,KAAMomB,EAAM3G,QAAS60G,cAAe5zH,EAAGikC,QAAQ,EAInD,IAFA3jC,EAAKq0B,QAAQk/F,GAAgB3nH,GAC7BwZ,EAAMkiG,aACF17G,EAAK+3B,OAAT,CAMA,GAHA3jC,EAAKsH,QAAQH,UAAUqE,IAAI,aAC3B4Z,EAAMsxB,WAAatQ,GAAav/B,EAAazI,EAAQ,UAAU8I,KAAOiqC,EAAavrC,cAAcsB,GAC7F4jC,SAAS1E,EAAUgB,aAAa,iBAAkB,IAAM0D,SAAS1lB,EAAMmtG,WAAWnrF,aAAa,iBAAkB,IACjHpnC,EAAK2yF,gBAAgBC,SAChB/rF,EAAazI,EAAQ,WACtByI,EAAasqC,EAAavrC,cAAe,UAAUsB,KAAOL,EAAazI,EAAQ,UAAU8I,GAIzFC,YAAUgqC,GAAe,iBAAkB,oBAH3ChqC,YAAUgqC,GAAe,oBAAqB,qBAMjD,CACD,GAAIrqC,GAAOD,EAAazI,EAAQ,SAC5B0I,IAAQA,EAAKI,KAAOiqC,EAAavrC,cAAcsB,GAC/CC,YAAUgqC,GAAe,cAAe,iBAGxChqC,YAAUgqC,GAAe,oBAAqB,cAGtD,GAAItqC,EAAaue,EAAM8tG,WAAW5rH,QAAS,UAAW,CAClD,KAAM8d,EAAM8tG,WAAW9xH,cAAcvB,QAAQC,QAAUJ,EAAEtB,OAAO+I,UAAUC,SAAS,4BAC9Ege,EAAM8tG,WAAW5rH,QAAQtE,cAAc,eAIxC,GAHI6D,EAAazI,EAAQ,WAAayI,EAAazI,EAAQ,UAAU8I,KAAOke,EAAM8tG,WAAW5rH,QAAQJ,IACjGke,EAAMgsG,oBAAoB1xH,EAAEqxC,MAAO3yC,IAEjCgnB,EAAMgtG,kBAAoBhtG,EAAMne,OAAOuU,WAAa4J,EAAMsxB,cAC3D5L,SAAS1lB,EAAMmtG,WAAWnrF,aAAa,iBAAkB,MAAQhiB,EAAMsxB,YAActxB,EAAMktG,eACxFltG,EAAMktG,cAAgBlsF,GAAahhB,EAAM8tG,WAAWrlF,cAAczoB,EAAM8tG,WAAWn9G,wBAAwBjW,OAAS,GACpHsnC,aAAa,cAAgBhB,EAAUgB,aAAa,YACxDhiB,EAAMouG,aAAa9zH,EAAG0lB,EAAMmtG,WAAYnsF,OAEvC,CACD,GAAIqtF,OAAiB,EACrB,IAAIruG,EAAMne,OAAO8J,qBACb0iH,EAAiBrtF,GAAa0E,SAAS1E,EAAUgB,aAAa,iBAAkB,MAC5EhiB,EAAMne,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KAAK9O,OAAS,MAEvE,CACD,GAAI4zH,GAAatuG,EAAMne,OAAO4mC,cAAczoB,EAAMne,OAAO8O,wBAAwBjW,OAAS,GACtFsnC,aAAa,WACjBqsF,GAAiBrtF,GAAastF,IAAettF,EAAUgB,aAAa,aAAessF,IAC/EtuG,EAAMmtG,WAAWnrF,aAAa,YAEtC,GAAIqsF,IAAmBruG,EAAMne,OAAO0rF,gBAAgBC,SAAU,CAC1D,GAAI+gC,GAAevuG,EAAMne,OAAOkC,cAAc,OAAS3D,UAAW,yBAC9DouH,EAAiBxuG,EAAMne,OAAOmO,YAClCu+G,GAAa5tH,MAAMX,MAAQggB,EAAMne,OAAOK,QAAQd,YAAc4e,EAAMyuG,iBAAmB,KAClFD,EAAe9wH,iBAAiB,yBAAyBhD,SAC1D8zH,EAAezsH,UAAUqE,IAAI,mBAC7BooH,EAAeprH,YAAYmrH,GAC3BA,EAAa5tH,MAAM2vD,OAAStwC,EAAMyuG,iBAAmB,MAG7DzuG,EAAM0uG,aAAa1tF,GAG3B,GAAIhoC,GAAUA,EAAO+I,UAAUC,SAAS,eAChCge,EAAM8tG,WAAW5rH,QAAQtE,cAAc,gBAAkBoiB,EAAMktG,aAAc,CACjFltG,EAAM0uG,aAAa1tF,EACnB,IAAIzrB,GAAWyK,EAAM8tG,WAAWn9G,wBAAwBjW,OAAS,EAC7DiH,EAAW,iDACXgtH,IACJA,MAAgBhsH,MAAMC,KAAKod,EAAM8tG,WAAWrlF,cAAclzB,GAAU7X,iBAAiBiE,IACjFqe,EAAM8tG,WAAW3gH,iBACjBwhH,EAAa3uG,EAAM4uG,iBAAiBr5G,EAAU5T,IAE9CgtH,EAAWj0H,OAAS,GACpBuM,EAAuB0nH,GAAY,EAAM,qBAKzDr3G,KAAK20B,SAAW,SAAU3xC,GAClBoL,EAAgBsa,EAAMne,QACtBme,EAAMne,OAAOsoB,OAAOwlD,IAChB31D,SAAUgG,EAAO+2B,QAAS/2B,EAAM6uG,gBAAiBj/C,KAAMt1E,IAI3D0lB,EAAM6uG,gBAAgBv0H,IAG9Bgd,KAAKu3G,gBAAkB,SAAUv0H,GAC7B,GAAIM,GAAOolB,EAAMne,MACjB,KAAIme,EAAMne,OAAO2lB,YAAjB,CAGA,GAAIsnG,GAAY9uG,EAAMguG,uBAAuB1zH,EAAE2+B,OAAQ3+B,EAAEqxC,OACrD3yC,EAAS81H,IAAcA,EAAU/sH,UAAUC,SAAS,iBACpD8sH,EAAYx0H,EAAEtB,MACCgnB,GAAMne,OAAOK,QAAQtE,cAAc,qBACtDhD,GAAKsH,QAAQH,UAAU5I,OAAO,YAC9B,IAAI40H,GAActwH,SAAS2nD,eAAexqD,EAAK2yF,gBAAgBC,SAK/D,IAJI5yF,EAAK2yF,gBAAgBC,UAAYugC,GAAeA,EAAYtlC,eACX,SAAjDslC,EAAYtlC,cAAc,GAAGhhE,iBAC7BsmG,EAAYtlC,cAAc,GAAGz4E,aAAajO,UAAU5I,OAAO,kBAE3DsI,EAAaue,EAAM8tG,WAAW5rH,QAAS,UAAW,CAClD8d,EAAMkiG,YACNliG,EAAM8tG,WAAW9mC,YAAchnE,EAAMiuG,WACrCjuG,EAAM8tG,WAAW99G,aAAajO,UAAU5I,OAAO,mBAC/C6mB,EAAM0uG,aAAaI,EACnB,IAAIC,GAAQ/uG,EAAM8tG,WAAW5rH,QAAQtE,cAAc,kBAC/CmxH,IACAA,EAAMhtH,UAAU5I,OAAO,kBAI/B,GADA6mB,EAAMotG,YAAYp0H,GACdgnB,EAAMne,OAAO8J,sBAAwB7R,oBAAkBkmB,EAAM1N,KAAK,IAGlE,MAFA0N,GAAMsxB,WAAa,SACnBn4C,UAAOmB,EAAE2+B,OAGb,IAAIzyB,IACAxN,OAAS6N,aAAc,KAAO7N,EAAQkzH,cAAe,OACrD3tF,QAAQ,EACR5V,UAAW+c,SAAS1lB,EAAM1N,KAAK,GAAG0vB,aAAa,iBAAkB,IACjEgtF,UAAWhvG,EAAMsxB,WAAYh/B,KAAOzL,aAAc,KAAOmZ,EAAM1N,KAC/D1Y,KAAOkF,OAAOC,KAAKihB,EAAM4tG,cAAc,IAAIlzH,OAAS,EAAKslB,EAAM4tG,cAAgB5tG,EAAM0gB,kBAEzF9lC,GAAKq0B,QAAQggG,GAAgBzoH,EAAM,WAC/B,KAAM/E,EAAazI,EAAQ,UAAYyI,EAAazI,EAAQ,eACrDyI,EAAazI,EAAQ,mBAAqBwN,EAAK+3B,OAGlD,MAFAve,GAAMsxB,WAAa,SACnBn4C,UAAOmB,EAAE2+B,OAGbjZ,GAAM+qE,WAAY,CAClB,IAAI3e,GAAkBpsD,EAAMne,OAAO2xB,uBACnC,IAAI54B,EAAK0Q,gBAAiB,CACtB,GAAKzE,aAUA,CACD,GAAIqoH,GAAclvG,EAAMne,OAAOw3C,qBAAqB3+C,OAChDslB,EAAMne,OAAOw3C,qBAAuBr5B,EAAM0gB,kBAC1CyuF,GACAzhG,gBACAC,eAAgBuhG,EAChBthG,mBAEAwhG,EAAQpvG,EAAMsxB,WAAatxB,EAAMsxB,WAAa9qC,EAAKwoH,UAEnD7lH,EAAQ,GAAIC,QAChBD,GAA8B,yBAAIimH,EAClCpvG,EAAMqvG,WAAWF,EAAehmH,GAChCgmH,EAAcxhG,kBACdwhG,EAAczhG,aAAewhG,EAC7BlvG,EAAMqvG,WAAWF,EAAehmH,QAxB3B6W,EAAMne,OAAO0rF,gBAAgBC,UAC9BxtE,EAAMmtG,WAAWvvH,cAAc,6BAA+BwuE,EAAgB1xE,OAAS,GACvF0xE,EAAgB1xE,SAAWslB,EAAMne,OAAO8O,wBAAwBjW,OAChEslB,EAAM8H,YAAYskD,EAAiB5lE,EAAKwoH,WAGxChvG,EAAM8H,aAAa4d,SAAS1lB,EAAMmtG,WAAWnrF,aAAa,iBAAkB,KAAMhiB,EAAMsxB,WAoBhGtxB,GAAMsxB,WAAa,KACd12C,EAAK2yF,gBAAgBC,WACtBr0F,SAAOmB,EAAE2+B,QACLr+B,EAAKwb,YAAcxb,EAAK+Q,qBACxB/Q,EAAKo4B,UAGLhT,EAAMsvG,SAAS9oH,IAI3BwZ,EAAM+qE,WAAY,MAG1BzzE,KAAKi2G,WAAa,SAAUgC,EAAWnvH,GACnC,SAAUuC,MAAMC,KAAK2sH,EAAU7xH,iBAAiB,OAAOkT,OAAO,SAAUmf,GAChEA,EAAKhuB,UAAUC,SAAS5B,IACxBmvH,EAAUC,WAAWz/F,EAAKsjB,cAItC/7B,KAAKzV,OAASA,EACVyV,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKm4G,eAAgBn4G,MACvDA,KAAKzV,OAAO6lB,GAAGkV,GAAmBtlB,KAAK0M,WAAY1M,MACnDA,KAAKo4G,cAAgBp4G,KAAKgzD,YAAY3/C,KAAKrT,MAC3CA,KAAKzV,OAAOy2C,iBAAiBna,GAAkB7mB,KAAKo4G,eACpDp4G,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAK0nB,kBAAmB1nB,OA4rB5D,MA1rBAy1G,GAAMtzH,UAAUs5B,WAAa,SAAUvsB,EAAM2P,EAAOowG,EAAQ1vG,EAAS7d,EAAQ22H,EAASC,GAClF,GAGIC,GACAC,EACAloE,EACA+uC,EANA/7F,EAAO0c,KAAKzV,OACZwJ,EAAUzQ,EAAKuS,eACf4iH,EAAuC,eAAzBn1H,EAAK+Y,gBAKnBq8G,EAAep1H,EAAKwsD,kBAAkBxpD,cAAc,SACpDqyH,EAAcr1H,EAAK4lC,iBAAiB5iC,cAAc,QAClDyN,KACAwkH,EAAqBj1H,EAAK0b,wBAC1Bw5G,EAAsBl1H,EAAK2b,yBACvBw5G,IACAnoE,EAAQhtD,EAAK6b,4BACbkgF,EAAQ/7F,EAAK8b,8BAIrB,KAAK,GADDtX,GAAiC,eAAzBxE,EAAK+Y,gBAAmC,EAAI,EAC/C5Y,EAAI,EAAGsB,EAAMmK,EAAK8L,KAAK5X,OAAQK,EAAIsB,EAAKtB,IACzCsQ,EACItQ,EAAIqE,GAAU,EACd+W,EAAM06B,aAAarqC,EAAK8L,KAAKvX,GAAI/B,GAE5B+B,EAAIqE,GAAU,EACnBmnH,EAAO11E,aAAarqC,EAAK8L,KAAKvX,GAAI40H,GAGlC94G,EAAQg6B,aAAarqC,EAAK8L,KAAKvX,GAAI60H,GAIvCz5G,EAAM06B,aAAarqC,EAAK8L,KAAKvX,GAAI/B,EAGzC,IACI4iG,GACA5kF,EAFAF,KAAQnU,MAAMC,KAAKuT,EAAMzY,iBAAiB,UAe9C,IAZI2N,IACAuwF,KAASj5F,MAAMC,KAAK2jH,EAAO7oH,iBAAiB,WACxCqyH,IACA/4G,KAAUrU,MAAMC,KAAKiU,EAAQnZ,iBAAiB,aAGlD4Z,KAAKzV,OAAO8J,qBACZ2L,KAAK44G,mBAAmBp5G,EAAI8kF,EAAK5kF,GAGjCM,KAAK64G,YAAYr5G,EAAI8kF,EAAK5kF,GAE1BM,KAAKzV,OAAOuU,WAcZ,IAAK,GADD0d,GAASxc,KACJvc,EAAI,EAAGsB,EAAMya,EAAGpc,OAAQK,EAAIsB,EAAKtB,KAb5B,SAAUA,EAAGsB,GACnBtB,EAAI+4B,EAAOjyB,OAAOuU,WAClBO,GAAes5G,EAAaJ,EAAoBjoE,EAAO9wC,EAAI8kF,EAAK5kF,EAAM,SAAUb,EAAO7D,GACnF6D,EAAM/S,YAAYkP,EAAKvX,MAI3B4b,GAAeq5G,EAAcF,EAAqBn5B,EAAO7/E,EAAI8kF,EAAK5kF,EAAM,SAAUb,EAAO7D,GACrF6D,EAAM/S,YAAYkP,EAAKvX,OAMvBA,IAIpBgyH,EAAMtzH,UAAU22H,uBAAyB,SAAU5pH,GAC/C,GACI6pH,GACAC,EACAC,EACAC,EAJA51H,EAAO0c,KAAKzV,OAKZwJ,EAAUiM,KAAKzV,OAAOsL,eACtB4iH,EAAuC,eAAzBn1H,EAAK+Y,gBACnB88G,EAAS71H,EAAKwsD,kBAAkBxpD,cAAc,SAC9C8yH,EAAS91H,EAAK4lC,iBAAiB5iC,cAAc,QAC7CyN,KACAglH,EAAYz1H,EAAK0b,wBACjBg6G,EAAY11H,EAAK2b,yBACbw5G,IACAQ,EAAW31H,EAAK6b,4BAChB+5G,EAAW51H,EAAK8b,8BAGxB,IACIklF,GACA5kF,EAFAF,KAAQnU,MAAMC,KAAK8tH,EAAOhzH,iBAAiB,WAAWoQ,UAAUnL,MAAMC,KAAK6tH,EAAO/yH,iBAAiB,WAGnG2N,KACAuwF,KAASj5F,MAAMC,KAAKytH,EAAU3yH,iBAAiB,WAAWoQ,UAAUnL,MAAMC,KAAK0tH,EAAU5yH,iBAAiB,YACtGqyH,IACA/4G,KAAUrU,MAAMC,KAAK2tH,EAAS7yH,iBAAiB,WAAWoQ,UAAUnL,MAAMC,KAAK4tH,EAAS9yH,iBAAiB,aAGjH,IAAIyY,GAAQvb,EAAKmJ,cAAc,SAC3BwiH,EAAS3rH,EAAKmJ,cAAc,SAC5B8S,EAAUjc,EAAKmJ,cAAc,QACjCuT,MAAKzV,OAAOoY,gBAEZ,KAAK,GADD02G,GAAar5G,KAAKs5G,iBAAiBpqH,GAC9BzL,EAAI,EAAGsB,EAAMya,EAAGpc,OAAQK,EAAIsB,EAAKtB,IACtCob,EAAM/S,YAAY0T,EAAG/b,IACjBsQ,IACAk7G,EAAOnjH,YAAYw4F,EAAI7gG,IACnBg1H,GACAl5G,EAAQzT,YAAY4T,EAAKjc,IAIrCuc,MAAKyb,WAAWvsB,EAAM2P,EAAOowG,EAAQ1vG,EAAS85G,EAAW33H,OAAQ23H,EAAWhB,QAASgB,EAAWf,WAEpG7C,EAAMtzH,UAAUm3H,iBAAmB,SAAUpqH,GACzC,GACIsQ,GACAC,EACAC,EAHApc,EAAO0c,KAAKzV,OAIZgvH,EAAYnrF,SAASl/B,EAAKxN,OAAOwH,cAAcwhC,aAAa,iBAAkB,GAclF,QAbIx7B,EAAKmiB,UAAYniB,EAAKwoH,WAAaxoH,EAAKmiB,YAAcniB,EAAKwoH,aAC3D6B,GAAwB,GAE5B/5G,EAAKlc,EAAK6tC,cAAcooF,GACpBj2H,EAAKuS,iBACL4J,EAAMnc,EAAKiuC,qBAAqBgoF,GACH,eAAzBj2H,EAAK+Y,kBACLqD,EAAOpc,EAAKq+D,yBAAyB43D,MAIzC73H,OAAQ8d,EAAI64G,QAAS54G,EAAK64G,SAAU54G,IAK5C+1G,EAAMtzH,UAAUq3H,0BAA4B,SAAUtqH,GAClD,GACI+/G,GACA1vG,EAFAjc,EAAO0c,KAAKzV,OAGZwJ,EAAUiM,KAAKzV,OAAOsL,eACtBgJ,EAAQvb,EAAKwsD,kBAAkBxpD,cAAc,QAC7CyN,KACAk7G,EAAS3rH,EAAK2b,yBACe,eAAzB3b,EAAK+Y,kBACLkD,EAAUjc,EAAK8b,+BAGvBY,KAAKzV,OAAOoY,gBACZ,IAAI02G,GAAar5G,KAAKs5G,iBAAiBpqH,EACvC8Q,MAAKyb,WAAWvsB,EAAM2P,EAAOowG,EAAQ1vG,EAAS85G,EAAW33H,OAAQ23H,EAAWhB,QAASgB,EAAWf,WAEpG7C,EAAMtzH,UAAUy2H,mBAAqB,SAAUp5G,EAAI8kF,EAAK5kF,GAKpD,IAAK,GAJD+5G,MACArwF,EAAkBppB,KAAKzV,OAAO8O,wBAC9Bw8G,EAAa71G,KAAKzV,OAAOsL,eAAiBmK,KAAKzV,OAAOwkC,iBAAiB,GAAK/uB,KAAKzV,OAAOkgC,UAAU,GAClG1xB,EAAaq1B,SAASynF,EAAWnrF,aAAa,iBAAkB,IAC3DjnC,EAAI,EAAGsB,EAAMya,EAAGpc,OAAQK,EAAIsB,EAAKtB,IAAK,CAC3C,GAAIqE,GAAQsmC,SAAS5uB,EAAG/b,GAAGinC,aAAa,iBAAkB,GAC1D1qB,MAAKzV,OAAOsoB,O7DUgB,kC6DV4B6mG,SAAU5xH,EAAOiW,IAAKta,IAAM+b,EAAGpc,OAAS,EAAG2V,WAAYA,IAC/GjR,GAAgBiR,EAChB0gH,EAAUh2H,GAAK2lC,EAAgBthC,GAEnC,GACI6xH,GACAC,EAFAC,EAAW75G,KAAKzV,OAAOkgC,SAGvBzqB,MAAKzV,OAAOsL,iBACZ8jH,EAAU35G,KAAKzV,OAAOwkC,iBAClBrvB,IACAk6G,EAAa55G,KAAKzV,OAAO+8D,sBAGjC,KAAK,GAAI7jE,GAAI,EAAGsB,EAAMya,EAAGpc,OAAQK,EAAIsB,EAAKtB,IACtC+b,EAAG/b,GAAG1B,aAAa,iBAAkB0B,EAAIsV,GAAY9I,YACrD4pH,EAASp2H,GAAK+b,EAAG/b,GACjB2lC,EAAgB3lC,GAAKg2H,EAAUh2H,GAC3Buc,KAAKzV,OAAOsL,iBACZyuF,EAAI7gG,GAAG1B,aAAa,iBAAkB0B,EAAIsV,GAAY9I,YACtD0pH,EAAQl2H,GAAK6gG,EAAI7gG,GACbic,IACAA,EAAKjc,GAAG1B,aAAa,iBAAkB0B,EAAIsV,GAAY9I,YACvD2pH,EAAWn2H,GAAKic,EAAKjc,MAMrCgyH,EAAMtzH,UAAU02H,YAAc,SAAUr5G,EAAI8kF,EAAK5kF,GAS7C,IAAK,GARDrC,MACAy8G,KACAC,KACAN,KACAlkC,EAAav1E,KAAKzV,OAAO0K,gBACzB+kH,EAAah6G,KAAKzV,OAAOgT,uBACzB08G,EAAgBj6G,KAAKzV,OAAOiT,2BAC5B4rB,EAAkBppB,KAAKzV,OAAO8O,wBACzB5V,EAAI,EAAGsB,EAAMya,EAAGpc,OAAQK,EAAIsB,EAAKtB,IAAK,CAC3C,GAAIqE,GAAQsmC,SAAS5uB,EAAG/b,GAAGinC,aAAa,iBAAkB,GAC1DrtB,GAAO5Z,GAAK8xF,EAAWztF,GACvB2xH,EAAUh2H,GAAK2lC,EAAgBthC,GAC3BkY,KAAKzV,OAAOsL,iBACZikH,EAAOr2H,GAAKu2H,EAAWlyH,GACnB4X,IACAq6G,EAAMt2H,GAAKw2H,EAAcnyH,KAIrC,GACIoyH,GACAC,EAFAn/G,EAAOgF,KAAKzV,OAAOkgC,SAGnBzqB,MAAKzV,OAAOsL,iBACZqkH,EAAWl6G,KAAKzV,OAAOwkC,iBACnBrvB,IACAy6G,EAAcn6G,KAAKzV,OAAO+8D,sBAGlC,KAAK,GAAI7jE,GAAI,EAAGsB,EAAMya,EAAGpc,OAAQK,EAAIsB,EAAKtB,IACtCuX,EAAKvX,GAAK+b,EAAG/b,GACb8xF,EAAW9xF,GAAK4Z,EAAO5Z,GACvB2lC,EAAgB3lC,GAAKg2H,EAAUh2H,GAC3Buc,KAAKzV,OAAOsL,iBACZqkH,EAASz2H,GAAK6gG,EAAI7gG,GAClBu2H,EAAWv2H,GAAKq2H,EAAOr2H,GACnBic,IACAy6G,EAAY12H,GAAKic,EAAKjc,GACtBw2H,EAAcx2H,GAAKs2H,EAAMt2H,IAIrCsX,IAAciF,KAAKzV,OAAQgrF,EAAY/1E,GACnCQ,KAAKzV,OAAOsL,iBACZkF,GAAciF,KAAKzV,OAAQyvH,EAAY11B,GACnC5kF,GACA3E,GAAciF,KAAKzV,OAAQ0vH,EAAev6G,KAItD+1G,EAAMtzH,UAAU61H,SAAW,SAAU9oH,GACjC,GAAIA,EAAKwoH,YAAcxoH,EAAKmiB,YAAa+pB,MAAMlsC,EAAKwoH,WAApD,CAGA,GAAI13G,KAAKzV,OAAOmL,UAAW,CACvBsK,KAAKzV,OAAOs2F,mBACZ,IAAI7lF,MAAU3P,MAAMC,KAAK0U,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,SAASuF,UAC1E0pF,EAAav1E,KAAKzV,OAAO0K,eAC7B+F,GAAK1B,OAAO,SAAUlU,GACdA,EAAIqF,UAAUC,SAAS,gBACvBtF,EAAIvD,UAGZ,KAAK,GAAI4B,GAAI,EAAGsB,EAAMwwF,EAAWnyF,OAAQK,EAAIsB,GACpCwwF,EAAW9xF,GAD8BA,IAI1C8xF,EAAW9xF,GAAGyR,cACd8K,KAAKzV,OAAO0K,gBAAgBuQ,OAAO/hB,EAAG,GACtCA,KAaZ,GATIyL,EAAKxN,OAAO+I,UAAUC,SAAS,mBAC/BwE,EAAKxN,OAASwN,EAAKxN,OAAOwH,eAE1B8W,KAAKzV,OAAOuU,WACZkB,KAAK84G,uBAAuB5pH,GAG5B8Q,KAAKw5G,0BAA0BtqH,GAE/B8Q,KAAK21G,iBAAiBvyH,OAAS,EAAG,CAClC4c,KAAKzV,OAAOo6D,WAAW3kD,KAAK21G,iBAC5B,IAAI/xF,KACJ,IAAI5jB,KAAKzV,OAAOoqB,eAAexxB,QAAQC,QAAU4c,KAAKzV,OAAO+oB,aAAanwB,QAAQC,OAAQ,CACtF,IAAK,GAAIK,GAAI,EAAGsB,EAAMmK,EAAK8L,KAAK5X,OAAQK,EAAIsB,EAAKtB,IAC7CmgC,EAAQ1/B,KAAKkqC,SAASl/B,EAAK8L,KAAKvX,GAAGinC,aAAa,iBAAkB,IAEtE1qB,MAAK21G,iBAAmB/xF,EAE5B5jB,KAAK21G,uBAGbF,EAAMtzH,UAAUinC,gBAAkB,WAI9B,IAAK,GAHD0rC,GAAkB90D,KAAKzV,OAAO2xB,wBAC9Bk+F,KACAC,EAAUjsF,SAASpuB,KAAK61G,WAAWnrF,aAAa,iBAAkB,IAC7DjnC,EAAI,EAAGq7D,EAAIgW,EAAgB1xE,OAAQK,EAAIq7D,EAAGr7D,IAAK,CAEpD22H,EAAa32H,GAAKuc,KAAKzV,OAAe,gBAAEuqE,EAAgBrxE,IAK5D,MAHKuc,MAAKzV,OAAO0rF,gBAAgBC,UAAuC,IAA3BphB,EAAgB1xE,SACzDg3H,EAAa,GAAKp6G,KAAKzV,OAAO6+B,gBAAgBixF,IAE3CD,GAEX3E,EAAMtzH,UAAU41H,WAAa,SAAUF,EAAehmH,GAClD,GAAI6W,GAAQ1I,IACZA,MAAKzV,OAAOwuB,gBAAgBxC,YAAYshG,EAAe73G,KAAKzV,OAAO6O,0BAA0B,MAAQvH,GAChG6kB,KAAK,WACNhO,EAAMne,OAAOsoB,OAAOozB,IAChBtiD,KAAMk+C,GAAoBz/B,YAAa,qBAE5CuU,MAAM,SAAU3zB,GAGVR,oBAAkBQ,EAAO,QAAOR,oBAAkBQ,EAAO,MAAS,WACnEA,EAAO,MAAIA,EAAO,MAAS,SAE/B0lB,EAAMne,OAAOotB,Q7DrnBE,gB6DqnB4B30B,MAGnDyyH,EAAMtzH,UAAUquB,YAAc,SAAU4pE,EAAahpE,GASjD,IAAK,GARD0jD,GAAkB90D,KAAKzV,OAAO2xB,wBAC9B+iC,KACAq7D,KACAlxF,EAAkBppB,KAAKzV,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KACvE6X,EAAO/J,KAAKzV,OAAO4K,YAClB6K,KAAKzV,OAAO8K,aAAaC,YAAc0K,KAAKzV,OAAO8K,aAAaE,SAAYyK,KAAKzV,OAAO8K,aAAaE,SAAW,EACjHglH,EAAUnpG,EAAUrH,EACpBywG,EAAYpgC,EAAY,GAAKrwE,EACxBtmB,EAAI,EAAGsB,EAAMq1F,EAAYh3F,OAAQK,EAAIsB,EAAKtB,IAC/C62H,EAAe72H,GAAK2lC,EAAgBgxD,EAAY32F,GAAKsmB,EAEzD,KAAK,GAAItmB,GAAI,EAAGsB,EAAM+vE,EAAgB1xE,OAAQK,EAAIsB,EAAKtB,IACnDw7D,EAAgBx7D,GAAK2lC,EAAgB0rC,EAAgBrxE,GAAKsmB,EAE9D,KAAK,GAAItmB,GAAI,EAAGsB,EAAMu1H,EAAel3H,OAAQK,EAAIsB,EAAKtB,IAAK,CACvD,GAAU,IAANA,EAAS,CACT,IAAK,GAAIC,GAAI,EAAG+2H,EAAOrxF,EAAgBhmC,OAAQM,EAAI+2H,EAAM/2H,IACrD,GAAI0W,KAAK6+D,UAAUj5D,KAAKzV,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KAAKxO,MACzE0W,KAAK6+D,UAAUqhD,EAAe72H,IAAK,CACnC+2H,EAAY92H,CACZ,OAGR,IAAK,GAAIA,GAAI,EAAG+2H,EAAOrxF,EAAgBhmC,OAAQM,EAAI+2H,EAAM/2H,IACrD,GAAI0W,KAAK6+D,UAAUj5D,KAAKzV,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KAAKxO,MAAQ0W,KAAK6+D,UAAUqhD,EAAe72H,EAAI,IAAK,CACpH+2H,EAAY92H,IACZ62H,EAAU72H,EAAI,EAElB,QAIZsc,KAAK06G,WAAWF,EAAYzwG,EAAMwwG,EAAUxwG,GAE5C/J,KAAKyzE,WACLzzE,KAAKzV,OAAOsoB,OAAOozB,IACftiD,KAAMk+C,GAAoBz/B,YAAa,kBAG/C,KAAK,GAAI3e,GAAI,EAAGsB,EAAMk6D,EAAgB77D,OAAQK,EAAIsB,EAAKtB,IACnD,IAAK,GAAIC,GAAI,EAAG+2H,EAAOrxF,EAAgBhmC,OAAQM,EAAI+2H,EAAM/2H,IACrD,GAAI0W,KAAK6+D,UAAUj5D,KAAKzV,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KAAKxO,MAAQ0W,KAAK6+D,UAAUha,EAAgBx7D,IAAK,CACrHqxE,EAAgBrxE,GAAKC,EAAIqmB,CACzB,OAIZ/J,KAAK21G,iBAAmB7gD,GAE5B2gD,EAAMtzH,UAAUyoH,UAAY,WACxBniH,OAAOwiH,cAAcjrG,KAAK+hF,QAE9B0zB,EAAMtzH,UAAUg2H,eAAiB,WAC7B,GAAI70H,GAAO0c,KAAKzV,MAChByV,MAAKwzB,UAAY,GAAIuG,aAAUz2C,EAAKsH,SAChCovC,WAAY,6CACZC,SAAU,EACVtY,OAAQ3hB,KAAK2hB,OACbwS,UAAWn0B,KAAKm0B,UAChBp3B,KAAMiD,KAAKjD,KACX43B,SAAU30B,KAAK20B,SACfpB,iBAAkBvzB,KAAKuzB,oBAG/BkiF,EAAMtzH,UAAUuyH,oBAAsB,SAAU1xH,EAAGtB,GAC/C,GAAIgnB,GAAQ1I,KACRxU,EAAIxB,EAAYhH,GAAGwI,EACnBqpH,EAAU70G,KAAKw2G,WAAW99G,aAAavP,wBACvC6D,EAAYgT,KAAKw2G,WAAW1pH,eAAiB,GAC7CooH,EAAal1G,KAAKw2G,WAAW99G,aAAaC,iBAC9C,IAAIk8G,EAAQnrH,KAAO8B,EAAG,CAClB,GAAImvH,IAAkB36G,KAAKw2G,WAAW1pH,cACtCkT,MAAK01G,kBAAmB,EACxB11G,KAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAMkyG,cAAc1F,EAAYyF,GAAe,IAAU,SAEtG,IAAI9F,EAAQnrH,IAAMsW,KAAKw2G,WAAW99G,aAAawgD,aAAelsD,EAAY,IAAMxB,EAAG,CACpF,GAAIqvH,GAAiB76G,KAAKw2G,WAAW1pH,cACrCkT,MAAK01G,kBAAmB,EACxB11G,KAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAcpiG,EAAMkyG,cAAc1F,EAAY2F,GAAe,IAAU,OAG/GpF,EAAMtzH,UAAUy4H,cAAgB,SAAU1F,EAAY4F,EAAalgD,GAC/Ds6C,EAAWl8G,UAAYk8G,EAAWl8G,UAAY8hH,GAElDrF,EAAMtzH,UAAU20H,aAAe,SAAU9zH,EAAG6yH,EAAYoC,GACpD,GAAIxjF,GAAez0B,KAAKzV,OAAOK,QAAQtE,cAAc,sBACjDsE,EAAUmnH,UAAe/uH,EAAEtB,OAAQ,KACvC,IAAIyI,EAAaS,EAAS,YACrBT,EAAasqC,EAAavrC,cAAe,UAAUsB,KAAOL,EAAaS,EAAS,UAAUJ,IAAMwV,KAAK41G,cAAe,CACrH,GAAImF,GAAgBnwH,GACNoV,KAAK61G,UACnB71G,MAAKg7G,UAAUD,EAAe/3H,EAAEqxC,MAAOwhF,EAAYoC,KAG3DxC,EAAMtzH,UAAU64H,UAAY,SAAUpwH,EAASypC,EAAOwhF,EAAYoC,GAC9D,GAAIvxH,GAAOsZ,KAAKzV,OAAOK,OACnBoV,MAAK41G,eACLlvH,EAAOsZ,KAAKw2G,WAAW5rH,QAE3B,IAAI6pC,GAAez0B,KAAKzV,OAAOK,QAAQtE,cAAc,qBAGrD,IAFA0Z,KAAKi7G,qBAAqBrwH,GAC1BoV,KAAKk7G,oBAAoBtwH,GACrBT,EAAaS,EAAS,YAAeoV,KAAKzV,OAAO0rF,gBAAgBC,UAAYtrF,EAAQH,UAAUC,SAAS,UACxGP,EAAasqC,EAAavrC,cAAe,UAAUsB,KAAOL,EAAaS,EAAS,UAAUJ,IAAOwV,KAAK41G,aAAc,CACpHxkH,cAAY1K,EAAKN,iBAAiB,mDAAoD,gBACtF,IAAIixH,MACA8D,EAAiB/sF,SAAS6pF,EAAUvtF,aAAa,iBAAkB,GACvE,IAAIutF,GAAgC,IAAnBkD,EAAsB,CACnC,GAAIjqH,GAAM8O,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,0BACpDsyH,EAAgBp7G,KAAKw2G,WAAWlzG,kBACpC83G,GAAc3wH,UAAUqE,IAAI,mBAC5BoC,EAAI7H,MAAMX,MAAQhC,EAAKoD,YAAckW,KAAKm3G,iBAAmB,KACxDiE,EAAch1H,iBAAiB,0BAA0BhD,QAC1Dg4H,EAActvH,YAAYoF,OAGzB8O,MAAKzV,OAAO0rF,gBAAgBC,UAAY+hC,GAC7CrtH,EAAUoV,KAAKw2G,WAAWrlF,cAAcgqF,EAAiB,GACzD9D,KAAgBhsH,MAAMC,KAAKV,EAAQxE,iBAAiB,oDAE/C6xH,GAAa7pF,SAASynF,EAAWnrF,aAAa,iBAAkB,IAAMywF,GAC3EvwH,EAAUoV,KAAKzV,OAAO4mC,cAAcgqF,EAAiB,GACrD9D,KAAgBhsH,MAAMC,KAAKV,EAAQxE,iBAAiB,oDAGpDixH,KAAgBhsH,MAAMC,KAAKV,EAAQxE,iBAAiB,kDAExD,IAAI2N,GAAUiM,KAAKzV,OAAOsL,cAC1B,IAAIoiH,GAAgC,IAAnBkD,GAAwBpnH,EAAS,CAC9C,GAAIkK,GAAWmwB,SAASxjC,EAAQ8/B,aAAa,iBAAkB,GAE/D2sF,GAAar3G,KAAKs3G,iBAAiBr5G,EADpB,kDAGfo5G,EAAWj0H,OAAS,GACpBuM,EAAuB0nH,GAAY,EAAM,kBAIrD5B,EAAMtzH,UAAUm1H,iBAAmB,SAAUr5G,EAAU5T,GACnD,GAAIqzD,KAMJ,OALAA,MAAaryD,MAAMC,KAAK0U,KAAKw2G,WAAWrlF,cAAclzB,GAAU7X,iBAAiBiE,IAC7EmM,UAAUnL,MAAMC,KAAK0U,KAAKw2G,WAAWjlF,qBAAqBtzB,GAAU7X,iBAAiBiE,KACjD,eAApC2V,KAAKw2G,WAAWn6G,kBAChBqhD,EAAUA,EAAQlnD,UAAUnL,MAAMC,KAAK0U,KAAKw2G,WAAW70D,yBAAyB1jD,GAAU7X,iBAAiBiE,MAExGqzD,GAEX+3D,EAAMtzH,UAAUg1H,eAAiB,WAC7B,GAAIjC,GAAal1G,KAAKzV,OAAOmO,aAAaC,iBAC1C,OAAOu8G,GAAW3oH,YAAc2oH,EAAWprH,YAAcwvE,GAAOhtE,oBAAsB,GAE1FmpH,EAAMtzH,UAAU84H,qBAAuB,SAAUrwH,GACzCoV,KAAKw2G,WAAW5rH,QAAQmW,uBAAuB,yBAAyB3d,OAAS,GAAKwH,GACjE,IAArBA,EAAQqT,UACRpc,SAAOme,KAAKw2G,WAAW5rH,QAAQmW,uBAAuB,yBAAyB,KAGvF00G,EAAMtzH,UAAU+4H,oBAAsB,SAAUtwH,GAC5C,GAAImsH,EAEAA,GADA/2G,KAAKzV,OAAO8J,qBACKzJ,GAAWwjC,SAASxjC,EAAQ8/B,aAAa,iBAAkB,MACxE1qB,KAAKzV,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KAAK9O,OAAS,EAGtDwH,GACboV,KAAKzV,OAAO4mC,cAAcnxB,KAAKzV,OAAO8O,wBAAwBjW,OAAS,GAAGsnC,aAAa,cACnF9/B,EAAQ8/B,aAAa,YAE7B1qB,KAAKzV,OAAOK,QAAQmW,uBAAuB,wBAAwB3d,OAAS,GAAKwH,GAAWmsH,GAC5Fl1H,SAAOme,KAAKzV,OAAOK,QAAQmW,uBAAuB,wBAAwB,KAGlF00G,EAAMtzH,UAAUi1H,aAAe,SAAUxsH,GAQrC,GAPAoV,KAAKi7G,qBAAqBrwH,GACrBoV,KAAKzV,OAAO0rF,gBAAgBC,UAC7Bl2E,KAAKk7G,oBAAoBtwH,GAE7BA,GAAWoV,KAAKw2G,WAAW3gH,eAAiBmK,KAAKw2G,WAAWznF,iBAAmB/uB,KAAKw2G,WAAW/rF,WAAWnxB,OAAO,SAAUlU,GACvH,MAAOA,GAAIkB,cAAc,qBAC1B,GACU,CACT,GAAI+wH,MAAgBhsH,MAAMC,KAAKV,EAAQxE,iBAAiB,iBACxD,IAAI4Z,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAIoI,GAAWmwB,SAASxjC,EAAQ8/B,aAAa,iBAAkB,GAE/D2sF,GAAar3G,KAAKs3G,iBAAiBr5G,EADpB,iBAGnBtO,EAAuB0nH,GAAY,EAAO,kBAGlD5B,EAAMtzH,UAAUu0H,uBAAyB,SAAU9rH,EAASypC,GACxD,GAAI3yC,GACAuH,EAAWe,EAAYqqC,EAI3B,OAHAzpC,GAAQvB,MAAMC,QAAU,OACxB5H,EAASyE,SAASqlE,iBAAiBviE,EAASc,EAAGd,EAASuC,GACxDZ,EAAQvB,MAAMC,QAAU,GACjB5H,GAEX+zH,EAAMtzH,UAAU6wE,YAAc,SAAUhwE,GAChCgd,KAAK21G,iBAAiBvyH,OAAS,IAC/B4c,KAAKzV,OAAOo6D,WAAW3kD,KAAK21G,kBAC5B31G,KAAK21G,sBAGbF,EAAMtzH,UAAUk5H,aAAe,SAAUpD,GACrC,MAAOA,GAAY7pF,SAAS6pF,EAAUvtF,aAAa,iBAAkB,IAAM,GAE/E+qF,EAAMtzH,UAAUm5H,cAAgB,SAAUt4H,GACtC,GACI+9D,GACAw6D,EAFAtD,EAAYlG,UAAe/uH,EAAEtB,OAAQ,KAGzC65H,GAAav4H,EAAEuiC,eAAer8B,cAAcioF,cAAc,GAC1DpwB,EAAek3D,EAAYA,EAAUh6G,SAAWs9G,EAAWnyF,gBAAgBhmC,OAAS,EACpF4c,KAAK06G,WAAW16G,KAAKw7G,gBAAiBz6D,IAE1C00D,EAAMtzH,UAAUuqB,WAAa,SAAU1pB,GACnC,GAAIM,GAAO0c,KAAKzV,MACDvH,GAAEuiC,eAAer8B,cAAcioF,cAAc,EAC5D,IAAgD,aAA5CnuF,EAAEuiC,eAAemF,aAAa,YAC7BvgC,EAAanH,EAAEtB,OAAQ,UAAYyI,EAAanH,EAAEtB,OAAQ,eAAiByI,EAAanH,EAAEtB,OAAQ,kBAAmB,CACtH,GACI+5H,GADAxD,EAAYlG,UAAe/uH,EAAEtB,OAAQ,MAErCq/D,MAAe,EACnB,IAA6E,SAAxE/9D,EAAEuiC,eAAej/B,cAAc,MAAMokC,aAAa,mBACnD1nC,EAAEuiC,eAAer8B,cAAcsB,KAAOlH,EAAKsH,QAAQJ,IACyB,SAAxExH,EAAEuiC,eAAej/B,cAAc,MAAMokC,aAAa,mBAClD1nC,EAAEuiC,eAAer8B,cAAcsB,KAAOlH,EAAKsH,QAAQJ,GACvD,MAEJ,IAAIxH,EAAEuiC,eAAer8B,cAAcsB,KAAOlH,EAAKsH,QAAQJ,GACnDixH,EAAez4H,EAAEuiC,eAAer8B,cAAcioF,cAAc,OAE3D,IAAInxE,KAAK07G,qBAA+F,SAAxE14H,EAAEuiC,eAAej/B,cAAc,MAAMokC,aAAa,kBAEnF,WADA1qB,MAAKs7G,cAAct4H,EAGvB,IAAIy4H,EAAa7wH,QAAQJ,KAAOlH,EAAKsH,QAAQJ,IAAMixH,EAAaxlC,gBAAgBC,WAAa5yF,EAAKsH,QAAQJ,GACtG,MAEJ,IAAIotB,GAAU6jG,EAAa15E,qBACvB45E,EAAc56D,EAAe/gD,KAAKq7G,aAAapD,EASnD,IAPI78E,MAAMugF,KACNA,EAAc56D,EAAe,GAE7Bz9D,EAAK6R,cACLwmH,EAAcA,EAAer4H,EAAK+R,aAAaC,YAAchS,EAAK+R,aAAaE,SAAYjS,EAAK+R,aAAaE,UAG5GhG,aAiBA,CAGD,IAAK,GAFD6qH,MACA/3D,EAAgBo5D,EAAav/F,wBACxBz4B,EAAI,EAAGA,EAAI4+D,EAAcj/D,OAAQK,IACtC22H,EAAa32H,GAAKg4H,EAAaryF,gBAAgBi5B,EAAc5+D,GAGjE,IAAI+X,IACA4a,aAFJwB,EAAUwiG,EAGN/jG,kBACAC,mBAGAzkB,EAAQ,GAAIC,QAChBD,GAA8B,yBAAI8pH,EAClCr4H,EAAKy1B,gBAAgBxC,YAAY/a,EAASlY,EAAK8V,0BAA0B,MAAQvH,GAC5E6kB,KAAK,WACNpzB,EAAKuvB,OAAOozB,IACRtiD,KAAMk+C,GAAoBz/B,YAAa,qBAE5CuU,MAAM,SAAU3zB,GAGVR,oBAAkBQ,EAAO,QAAOR,oBAAkBQ,EAAO,MAAS,WACnEA,EAAO,MAAIA,EAAO,MAAS,SAE/BM,EAAKq0B,Q7D75BE,gB6D65B4B30B,KAEvCwY,EAAQ6a,eAAiBuB,EACzBpc,EAAQ4a,gBACRqlG,EAAa1iG,gBAAgBxC,YAAY/a,EAASigH,EAAariH,0BAA0B,MAAQvH,GAC5F6kB,KAAK,WACN+kG,EAAa5oG,OAAOozB,IAChBtiD,KAAMk+C,GAAoBz/B,YAAa,qBAE5CuU,MAAM,SAAU3zB,GAGVR,oBAAkBQ,EAAO,QAAOR,oBAAkBQ,EAAO,MAAK,WAC/DA,EAAO,MAAIA,EAAO,MAAK,SAE3By4H,EAAa9jG,Q7D56BN,gB6D46BoC30B,SA1DlC,CACbM,EAAKuvB,OAAOxC,IAAoBe,QAASuqG,EAAa/jG,QAASA,IAC/Dt0B,EAAKuvB,OAAOozB,IACRtiD,KAAMk+C,GAAoBz/B,YAAa,kBAE3C,IAAI2iD,GAAe02D,EAAav/F,wBAC5BnS,EAAO0xG,EAAatmH,YACnBsmH,EAAapmH,aAAaC,YAAcmmH,EAAapmH,aAAaE,SAAYkmH,EAAapmH,aAAaE,SAAW,CACxHyK,MAAK+kD,eACL,KAAK,GAAIthE,GAAI,EAAGsB,EAAM6yB,EAAQx0B,OAAQK,EAAIsB,EAAKtB,IAC3Cuc,KAAK+kD,aAAa7gE,KAAK6lB,EAAOg7C,EAAathE,GAE/Cg4H,GAAa5oG,OAAOpC,IAAsBmT,QAAS5jB,KAAK+kD,aAAcntC,QAASA,IAC/E6jG,EAAa5oG,OAAOozB,IAChBtiD,KAAMk+C,GAAoBz/B,YAAa,sBAiDvDqzG,EAAMtzH,UAAUu4H,WAAa,SAAUtgC,EAAahpE,GAChD,GAAI9tB,GAAO0c,KAAKzV,MAChB,KAAKjH,EAAKgwB,aAAanwB,QAAQC,SAAWE,EAAKoB,cAAcvB,QAAQC,SAAWE,EAAKqxB,eAAexxB,QAAQC,OAAQ,CAEhH,GAAI2mB,GAAOzmB,EAAK6R,YACX7R,EAAK+R,aAAaC,YAAchS,EAAK+R,aAAaE,SAAYjS,EAAK+R,aAAaE,SAAW,CAChG6b,IACoBrH,EACpB/J,KAAK+kD,aAAezhE,EAAK44B,wBACzB54B,EAAKuvB,OAAOtC,IACRc,UAAW+oE,EAAcrwE,EACzBqH,QAASA,MAIrBqkG,EAAMtzH,UAAUulC,kBAAoB,SAAU1kC,GACtCA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,QACvCzxB,KAAKm4G,kBAQb1C,EAAMtzH,UAAU0rB,QAAU,WACtB,GAAIozC,GAAcjhD,KAAKzV,OAAOK,SAC1BoV,KAAKzV,OAAO2lB,aAAgB+wC,IAAiBA,EAAY36D,cAAc,kBACtE26D,EAAY36D,cAAc,qBAG/B0Z,KAAKwzB,UAAU3lB,UACf7N,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKm4G,gBACxCn4G,KAAKzV,OAAOstB,IAAIyN,GAAmBtlB,KAAK0M,YACxC1M,KAAKzV,OAAO0jD,oBAAoBpnB,GAAkB7mB,KAAKo4G,eACvDp4G,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAK0nB,qBAO1C+tF,EAAMtzH,UAAUguB,cAAgB,WAC5B,MAAO,kBAEXslG,EAAMtzH,UAAU2zH,YAAc,SAAUp0H,GACpC,GAAI4B,GAAO0c,KAAKzV,OACZqxH,EAAUxtF,SAASpuB,KAAK61G,WAAWnrF,aAAa,iBAAkB,GACtE,IAAKpnC,EAAKy+C,qBAAqB3+C,OAAS,IAA8E,IAAzE4c,KAAK61G,WAAWjmH,MAAM,GAAGnF,UAAUC,SAAS,0BAC7C,IAArCpH,EAAKy+C,qBAAqB3+C,OAC7B4c,KAAKhF,MAAQgF,KAAKzV,OAAO4mC,cAAcyqF,IACnCt4H,EAAKuS,iBACLmK,KAAKhF,MAAQ1X,EAAK6tC,cAAcyqF,GAAUt4H,EAAKiuC,qBAAqBqqF,IACvC,eAAzBt4H,EAAK+Y,kBACL2D,KAAKhF,MAAQ1X,EAAK6tC,cAAcyqF,GAAUt4H,EAAKiuC,qBAAqBqqF,GAAUt4H,EAAKq+D,yBAAyBi6D,MAGpH57G,KAAK+B,SAAW/B,KAAKzV,OAAOoqF,WAAY30E,gBAAiB1Z,cAAc,eAAeyb,aAKtF,IAFA/B,KAAKhF,KAAO1X,EAAKozF,kBACjB12E,KAAK+B,QAAUze,EAAKy+C,qBAChB/hC,KAAKzV,OAAO8J,qBAAsB,CAClC2L,KAAKhF,OAEL,KAAK,GADD6gH,GAAWv4H,EAAK44B,wBACXz4B,EAAI,EAAGsB,EAAM82H,EAASz4H,OAAQK,EAAIsB,EAAKtB,IAC5Cuc,KAAKhF,KAAK9W,KAAKZ,EAAK6tC,cAAc0qF,EAASp4H,KACvCH,EAAKuS,iBACLmK,KAAKhF,KAAK9W,KAAKZ,EAAKiuC,qBAAqBsqF,EAASp4H,KACrB,eAAzBH,EAAK+Y,iBACL2D,KAAKhF,KAAK9W,KAAKZ,EAAKq+D,yBAAyBk6D,EAASp4H,QAOvEgyH,KCngCPtrC,GAAuB,WAKvB,QAASA,GAAM5/E,EAAQ7F,EAAe6gF,EAAev2E,GACjD,GAAI0Z,GAAQ1I,IAEZA,MAAK87G,cAAe,EACpB97G,KAAK+7G,gBAAiB,EACtB/7G,KAAKg8G,kBAAmB,EACxBh8G,KAAKi8G,qBACLj8G,KAAK2zB,cAAgBlnC,gBAAc,OAC/B3D,UAAW,0CACXoE,OAAQ,mBAAoBouB,OAASzsB,OAAQ,cAEjDmR,KAAK2hB,OAAS,SAAU3+B,GACpB,GAAIM,GAAOolB,EAAMne,OACb7I,EAASsB,EAAEk5H,OAAOx6H,OAClBkJ,EAAUlJ,EAAO+I,UAAUC,SAAS,qBAAuBhJ,EAC3DyI,EAAazI,EAAQ,oBACzB,UAAKkJ,IAAalJ,EAAO+I,UAAUC,SAAS,WAAage,EAAMhkB,cAAc0D,mBAG7EsgB,EAAMnmB,OAASe,EAAKkU,iBAAiB5M,EAAQ+N,kBAAkB+xB,aAAa,mBAC5EhiB,EAAMirB,cAAcuW,YAAct/C,EAAQs/C,YAC1CxhC,EAAMirB,cAActqC,MAAMX,MAAQkC,EAAQd,YAAc,EAAI,KAC5D4e,EAAMirB,cAActqC,MAAMiE,OAAS1C,EAAQnB,aAAe,EAAI,KAC9Dif,EAAMirB,cAAc5xC,aAAa,eAAgB2mB,EAAMnmB,OAAOoJ,KAC9DrI,EAAKsH,QAAQkB,YAAY4c,EAAMirB,eACxBjrB,EAAMirB,gBAEjB3zB,KAAKm0B,UAAY,SAAUnxC,GACvB0lB,EAAMne,OAAOK,QAAQH,UAAUqE,IAAI,iBAC/BS,cACAvM,EAAEsxC,WAAWtxC,EAAEuxC,cAGvBv0B,KAAKjD,KAAO,SAAU/Z,GACd0lB,EAAMhkB,cAAc0D,iBACpBsgB,EAAMyzG,eAAen5H,EAEzB,IAAItB,GAASsB,EAAEtB,OACX+yC,EAAe/rB,EAAMne,OAAOK,QAAQtE,cAAc,qBACtDoiB,GAAMne,OAAOotB,QAAQ+c,IAAqBhzC,OAAQA,EAAQkzH,cAAe,aAAcryH,OAAQmmB,EAAMnmB,SAChGmmB,EAAMhkB,cAAc0D,kBACrBqC,YAAUgqC,GAAe,iBAAkB,oBACrCtqC,EAAazI,EAAQ,kBAAoByI,EAAazI,EAAQ,iBAChE+I,YAAUgqC,GAAe,oBAAqB,mBAI1Dz0B,KAAK20B,SAAW,SAAU3xC,GACtB0lB,EAAMne,OAAOK,QAAQH,UAAU5I,OAAO,gBACtC,IAAIu6H,KAAgBjyH,EAAanH,EAAEtB,OAAQ,kBAAoByI,EAAanH,EAAEtB,OAAQ,gBACtF,IAAIgnB,EAAMhkB,cAAc0D,iBAAmBg0H,GAEvC,GADAv6H,SAAOmB,EAAE2+B,QACLx3B,EAAanH,EAAEtB,OAAQ,mBACvBgnB,EAAM2zG,eAAer5H,OAEpB,KAAMmH,EAAanH,EAAEtB,OAAQ,UAAY,CAC1C,GAAIW,GAAQqmB,EAAMne,OAAOwpC,eAAe/wC,EAAE2+B,OAAO+I,aAAa,iBAAiBroC,OAC3B,IAAhDqmB,EAAMhkB,cAAcvB,QAAQuE,QAAQrF,IACpCqmB,EAAMi4E,cAAct+F,QAK3B,IAAI+5H,EAEL,WADAv6H,UAAOmB,EAAE2+B,SAIjB3hB,KAAKm8G,eAAiB,SAAUn5H,GAC5B,GAAI2I,GAAM+c,EAAMne,OAAOK,QAAQtE,cAAc,sBAAsBokC,aAAa,gBAC5E4xF,EAAY5zG,EAAMne,OAAOwpC,eAAepoC,GAAKtJ,MAC7CkI,EAASJ,EAAanH,EAAEtB,OAAQ,mBAChC66H,EAAapyH,EAAanH,EAAEtB,OAAQ,oBAEpC86H,KAAanxH,MAAMC,KAAKod,EAAM9d,QAAQxE,iBAAiB,uBACtD2V,IAAI,SAAU/Y,GAAK,MAAOA,GAAEsD,cAAc,OAAOokC,aAAa,oBAC/DpY,EAAOlY,KAAKC,MAAMD,KAAK6+D,UAAUujD,GACrC,IAAID,GAAchyH,EAAQ,CACtB,GAAIgyH,EAAY,CACZ,GAAIE,GAAYF,EAAWj2H,cAAc,uBAAuBokC,aAAa,kBACzEgtF,GAAc6E,EAAW7xF,aAAa,QAC1C,IAAI+xF,IAAcH,EAAW,CACzB,GAAII,GAAYpqG,EAAK5qB,QAAQ40H,IACV,IAAfI,GACApqG,EAAK9M,OAAOk3G,EAAW,EAE3B,IAAIxhC,IAAsB,IAAfw8B,GAAoBgF,IAAchF,CAC7CplG,GAAK9M,OAAOkyG,GAAax8B,EAAO,EAAI,GAAI,EAAGohC,QAG1C/xH,KAAuC,IAA7B+nB,EAAK5qB,QAAQ40H,IAC5BhqG,EAAKpuB,KAAKo4H,EAEd5zG,GAAM9d,QAAQrE,UAAY,GACtB+rB,EAAKlvB,SAAWslB,EAAM9d,QAAQH,UAAUC,SAAS,cACjDge,EAAM9d,QAAQH,UAAUqE,IAAI,aAEhC4Z,EAAMuzG,kBAAoB3pG,CAC1B,KAAK,GAAIrqB,GAAI,EAAGA,EAAIqqB,EAAKlvB,OAAQ6E,IAC7BygB,EAAMi0G,kBAAkBrqG,EAAKrqB,QAIjCygB,GAAMk0G,WACNl0G,EAAMm0G,uBAAuBP,IAGrCt8G,KAAKqlB,KAAO,SAAUriC,GAClB,GAAIM,GAAOolB,EAAMne,OACbhI,EAASe,EAAKywC,eAAe/wC,EAAEuiC,eAAemF,aAAa,gBAK/D,IAJAhiB,EAAM9d,QAAQH,UAAU5I,OAAO,WAC/BA,SAAOmB,EAAEuiC,gBACT7c,EAAMm2D,KAAK5gC,cAAcv1B,EAAMne,OAAOK,QAAQtE,cAAc,qBAAqB,GACjFoiB,EAAMm2D,KAAK/gC,WAAWp1B,EAAMne,OAAO2+B,iBAAiB5iC,cAAc,wBAAwB,GACtF9D,oBAAkBD,KAAoC,IAAzBA,EAAOwmB,eACpC5e,EAAa7G,EAAK6yE,qBAAqB5zE,EAAOoJ,KAAM,UAAU++B,aAAa,QACvEpnC,EAAKsH,QAAQ8/B,aAAa,MAE9B,WADAhiB,GAAMne,OAAOyoB,IAAI,0BAA4BC,WAAYvK,EAAMyH,gBAAiB+C,WAAY3wB,EAAO8F,YAGvGqgB,GAAM03E,YAAY79F,EAAOF,QAE7B2d,KAAK43F,gBAAiB,EACtB53F,KAAK6+D,KAAO,GAAIxhC,IAChBr9B,KAAKzV,OAASA,EACdyV,KAAKtb,cAAgBA,EACrBsb,KAAKhR,eAAiBA,EACtBgR,KAAKulE,cAAgBA,EACrBvlE,KAAK+zC,MAAQ/kD,EAAeI,WAAW,SACvC4Q,KAAKghC,mBACLhhC,KAAK88G,eAAiB,GAAIp6F,IAAoB1iB,KAAKzV,QA87BvD,MA57BA4/E,GAAMhoF,UAAUy6H,SAAW,WACvB,IAAK58G,KAAKpV,QAAQxE,iBAAiB,qBAAqBhD,OAAQ,CAC5D,GAAI25H,GAAY/8G,KAAK8gC,KAAKvE,YAAY,gBACtCv8B,MAAKpV,QAAQrE,UAAYw2H,EACzB/8G,KAAKpV,QAAQH,UAAU5I,OAAO,eAGtCsoF,EAAMhoF,UAAUk6H,eAAiB,SAAUr5H,GACvCgd,KAAK87G,cAAe,EACpB97G,KAAKwoF,eAETre,EAAMhoF,UAAUsqB,WAAa,SAAUzpB,GAC/Bgd,KAAKtb,cAAc0D,iBACnB4X,KAAKm8G,eAAen5H,EAEbgd,MAAKzV,MAAhB,IACIkqC,GAAez0B,KAAKzV,OAAOK,QAAQtE,cAAc,qBACrDmE,aAAUgqC,GAAe,iBAAkB,oBACtCtqC,EAAanH,EAAEtB,OAAQ,oBACtBse,KAAKzV,OAAOnC,iBAAmB+B,EAAanH,EAAEtB,OAAQ,iBACxD+I,YAAUgqC,GAAe,oBAAqB,iBAElDzxC,EAAEtB,OAAO+I,UAAUC,SAAS,mBAAqBsV,KAAKpV,QAAQH,UAAUqE,IAAI,WAAakR,KAAKpV,QAAQH,UAAU5I,OAAO,YAE3HsoF,EAAMhoF,UAAUqqB,gBAAkB,SAAUxpB,GACxC,IAAIA,EAAEtB,OAAO+I,UAAUC,SAAS,uBAAhC,CAGWsV,KAAKzV,MAAhB,IACIyyH,GAAWh9G,KAAKzV,OAAOK,QAAQtE,cAAc,mBACjD0Z,MAAK6+D,KAAK5gC,cAAc++E,EAAUh6H,EAAET,OAAOwmB,cAC3C,IAAIne,GAAU5H,EAAEtB,OAAO+I,UAAUC,SAAS,gBAAkB1H,EAAEtB,OAASyI,EAAanH,EAAEtB,OAAQ,eAC9Fse,MAAK6+D,KAAK/gC,WAAWlzC,GAAS,GAAO5H,EAAET,OAAOwmB,iBAElDohE,EAAMhoF,UAAUuqB,WAAa,SAAU1pB,GACnC,GAAIM,GAAO0c,KAAKzV,MAChB,IAAgD,aAA5CvH,EAAEuiC,eAAemF,aAAa,UAA0B,CACxD,GAAInoC,GAASe,EAAKywC,eAAe/wC,EAAEuiC,eAAemF,aAAa,gBAC/D,IAAIloC,oBAAkBD,KAAoC,IAAzBA,EAAOwmB,eACpC5e,EAAa7G,EAAK6yE,qBAAqB5zE,EAAOoJ,KAAM,UAAU++B,aAAa,QACvEpnC,EAAKsH,QAAQ8/B,aAAa,MAC9B,MAEJ1qB,MAAK2gF,cAAcp+F,EAAOF,SAMlC8nF,EAAMhoF,UAAU6+C,iBAAmB,WAC3BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAK0nB,kBAAmB1nB,MACxDA,KAAKzV,OAAO6lB,G9DvBO,oB8DuBkBpQ,KAAKghD,iBAAkBhhD,MAC5DA,KAAKzV,OAAO6lB,G9DpBS,sB8DoBkBpQ,KAAKghD,iBAAkBhhD,MAC9DA,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKuxD,kBAAmBvxD,MACnEA,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKs0D,aAAct0D,MAChDA,KAAKzV,OAAO6lB,GAAGskB,GAAmB10B,KAAKyM,WAAYzM,MACnDA,KAAKzV,OAAO6lB,GAAGgkB,GAAwBp0B,KAAKwM,gBAAiBxM,MAC7DA,KAAKzV,OAAO6lB,GAAGykB,GAAmB70B,KAAK0M,WAAY1M,MACnDA,KAAKzV,OAAO6lB,GAAGkV,GAAmBtlB,KAAK0M,WAAY1M,MACnDA,KAAKzV,OAAO6lB,GAAGslB,GAAwB11B,KAAK84F,iBAAkB94F,MAC9DA,KAAKzV,OAAO6lB,G9DpDM,mB8DoDkBpQ,KAAK84F,iBAAkB94F,MAC3DA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKk9E,gBAAiBl9E,MACxDA,KAAKzV,OAAO6lB,GAAGwW,GAAqB5mB,KAAKgN,WAAYhN,MACrDA,KAAKzV,OAAO6lB,GAAG6zB,GAAgBjkC,KAAKgN,WAAYhN,MAChDA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKuD,OAAQvD,MAC/CA,KAAKzV,OAAO6lB,G9D/BS,mB8D+BkBpQ,KAAKi9G,kBAAmBj9G,MAC/DA,KAAKzV,OAAO6lB,GAAG,sBAAuBpQ,KAAKk9G,kBAAmBl9G,MAC9DA,KAAKzV,OAAO6lB,GAAG,wBAAyBpQ,KAAKm9G,aAAcn9G,MAC3DA,KAAKzV,OAAO6lB,GAAG,uBAAwBpQ,KAAKgN,WAAYhN,QAK5DmqE,EAAMhoF,UAAU8rD,oBAAsB,WAC9BjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKuD,QACxCvD,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAK0nB,mBACtC1nB,KAAKzV,OAAOstB,I9DnDO,oB8DmDmB7X,KAAKghD,kBAC3ChhD,KAAKzV,OAAOstB,I9DhDS,sB8DgDmB7X,KAAKghD,kBAC7ChhD,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKuxD,mBACjDvxD,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKs0D,cACnCt0D,KAAKzV,OAAOstB,IAAI6c,GAAmB10B,KAAKyM,YACxCzM,KAAKzV,OAAOstB,IAAIuc,GAAwBp0B,KAAKwM,iBAC7CxM,KAAKzV,OAAOstB,IAAIyN,GAAmBtlB,KAAK0M,YACxC1M,KAAKzV,OAAOstB,IAAIgd,GAAmB70B,KAAK0M,YACxC1M,KAAKzV,OAAOstB,IAAI6d,GAAwB11B,KAAK84F,kBAC7C94F,KAAKzV,OAAOstB,I9DhFM,mB8DgFmB7X,KAAK84F,kBAC1C94F,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKk9E,iBACxCl9E,KAAKzV,OAAOstB,I9DxDS,mB8DwDmB7X,KAAKi9G,mBAC7Cj9G,KAAKzV,OAAOstB,IAAI,sBAAuB7X,KAAKk9G,mBAC5Cl9G,KAAKzV,OAAOstB,IAAI,wBAAyB7X,KAAKm9G,gBAElDhzC,EAAMhoF,UAAU+6H,kBAAoB,WAC5Bl9G,KAAKzV,OAAOwe,gBAAkB/I,KAAKzV,OAAOw4B,0BAC1C/iB,KAAKugF,aAGbpW,EAAMhoF,UAAU6qB,WAAa,WACzB,GAAI1pB,GAAO0c,KAAKzV,MAGhB,IAFAyV,KAAKzV,OAAOstB,IAAI+O,GAAqB5mB,KAAKgN,YAC1ChN,KAAKzV,OAAOstB,IAAIosB,GAAgBjkC,KAAKgN,YACjCzd,cAAcjM,EAAK2L,iBAAkB,CACrC,IAAK,GAAIxL,GAAI,EAAGA,EAAIH,EAAKH,QAAQC,OAAQK,IACrCuc,KAAK68G,uBAAuBv5H,EAAKH,QAAQM,GAAGpB,MAEhD2d,MAAKo9G,sBAET,GAAIp9G,KAAKzV,OAAO2L,aAAa9S,QAAU4c,KAAKtb,cAAcvB,QAAQC,OAAQ,CACtE4c,KAAK43F,gBAAiB,CACtB,KAAK,GAAI/nG,GAAK,EAAGkG,EAAKzS,EAAKoB,cAAcvB,QAAS0M,EAAKkG,EAAG3S,OAAQyM,IAAM,CACpE,GAAI9B,GAAMgI,EAAGlG,EACbmQ,MAAKogF,YAAYryF,GAErBiS,KAAK43F,gBAAiB,IAG9BztB,EAAMhoF,UAAU+6F,gBAAkB,SAAUl6F,GACxC,GAAIM,GAAO0c,KAAKzV,MAChB,IAAiB,cAAbvH,EAAE6L,QAA4BmR,KAAKtb,cAAcvB,QAAQC,SACsC,KAA9F,eAAgB,aAAc,gBAAiB,cAAe,SAASsE,QAAQ1E,EAAE6L,QAItF,OADA7L,EAAE8yD,iBACM9yD,EAAE6L,QACN,IAAK,eACL,IAAK,aACD,GAAIuvC,GAAW96C,EAAKi6D,eAAiBj6D,EAAK44B,0BAC1C,IAAIkiB,EAASh7C,OAAQ,CAIjB,IAAK,GAHD4X,GAAO1X,EAAKwsD,kBAAkBxpD,cAAc,SAASuF,SAErDwxH,MAAS,GACJ55H,EAFKH,EAAK+a,cAAc+/B,EAASA,EAASh7C,OAAS,IAEvC6a,SAAUxa,GAAK,EAAGA,IACnC,IAAKuX,EAAKvX,GAAGgH,UAAUC,SAAS,WAAasQ,EAAKvX,GAAGgH,UAAUC,SAAS,eAAgB,CACpF2yH,EAASriH,EAAKvX,EACd,OAGRuc,KAAKs9G,mBAAmBD,EAAO/2H,cAA2B,eAAbtD,EAAE6L,OAC3C,sBAAwB,0BAEhC,KACJ,KAAK,gBACDmR,KAAKugF,WACL,MACJ,KAAK,cACDvgF,KAAKygF,aACL,MACJ,KAAK,QACD,GAAIzgF,KAAKzV,OAAOuxB,QAA8E,OAAnEzjB,UAAQrV,EAAEtB,OAAQ,IAAMse,KAAKzV,OAAOK,QAAQJ,GAAK,cACxE,MAEJ,IAAII,GAAUoV,KAAK+zC,MAAM4C,oBACrBvxD,EAAMwF,EAAUA,EAAQ1B,cAAc5C,cAAc,uBAAyB,IACjF,KAAKlB,EACD,KAEJ4a,MAAKs9G,mBAAmBl4H,EACxB,MACJ,KAAK,YACD,GAAIgF,GAAO9G,EAAKu6D,YAAYn4C,YAAY9a,OACxC,IAAIR,GAAQA,EAAKK,UAAUC,SAAS,gBAAiB,CACjD,GAAInI,GAASe,EAAKywC,eAAe3pC,EAAKuO,kBAAkB+xB,aAAa,gBACrEnoC,GAAOF,OAASiB,EAAKoB,cAAcvB,QAAQuE,QAAQnF,EAAOF,OAAS,EAC/D2d,KAAKogF,YAAY79F,EAAOF,OAAS2d,KAAK2gF,cAAcp+F,EAAOF,UAK/E8nF,EAAMhoF,UAAUmyE,aAAe,SAAUtxE,GACrCgd,KAAKs9G,mBAAmBt6H,EAAEtB,QAC1Bse,KAAKu9G,oBAAoBv6H,EAAEtB,QAC3Bse,KAAKw9G,kBAAkBx6H,EAAEtB,QACzBse,KAAKy9G,sBAAsBz6H,EAAEtB,SAEjCyoF,EAAMhoF,UAAUq7H,kBAAoB,SAAU97H,GACtCA,EAAO+I,UAAUC,SAAS,oBAC1BsV,KAAK2gF,cAAcj/F,EAAOwH,cAAcwhC,aAAa,oBAG7Dy/C,EAAMhoF,UAAUs7H,sBAAwB,SAAU/7H,GAC1Cse,KAAKtb,cAAcg5H,mBACfh8H,EAAO+I,UAAUC,SAAS,kBACtBhJ,EAAO+I,UAAUC,SAAS,mBAC1BsV,KAAK2gF,cAAc3gF,KAAKzV,OAAOwpC,eAAeryC,EAAOwH,cAAcwhC,aAAa,iBAAiBroC,OAGjG2d,KAAKogF,YAAYpgF,KAAKzV,OAAOwpC,eAAeryC,EAAOwH,cAAcwhC,aAAa,iBAAiBroC,OAI/FX,EAAO+I,UAAUC,SAAS,oBAC1BsV,KAAK2gF,cAAcj/F,EAAOwH,cAAcwhC,aAAa,qBAKrEy/C,EAAMhoF,UAAUo7H,oBAAsB,SAAU77H,GAC5C,GAAI4B,GAAO0c,KAAKzV,OACZozH,EAAUtlH,UAAQ3W,EAAQ,qBAC9B,IAAI4B,EAAKslB,cAAgB+0G,IAAYj8H,EAAO+I,UAAUC,SAAS,qBAC1DhJ,EAAO+I,UAAUC,SAAS,mBAAoB,CAC/C,GAAIrI,GAAQs7H,EAAQhlH,kBAAkB+xB,aAAa,iBAC/CpnC,GAAKwyF,uBAAuBzzF,GAAO+D,iBAAiB,gBAAgBhD,OACpEE,EAAKypD,WAAW1qD,EAAO,cAAc,GAGrCiB,EAAKypD,WAAW1qD,EAAO,aAAa,KAShD8nF,EAAMhoF,UAAUm7H,mBAAqB,SAAU57H,GAC3C,GAAIk8H,GAAOzzH,EAAazI,EAAQ,uBAC5ByI,EAAazI,EAAQ,uBACzB,IAAIk8H,EAAM,CACN,GAAI3tD,GAAU2tD,EAAK7hF,UACf8hF,EAASD,EAAK10H,cAAc+U,SAC5B6/G,EAAW99G,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,SAASuF,SAChEmP,KAAU3P,MAAMC,KAAKwyH,GAAUzyH,MAAMwyH,EAAS,EAAGC,EAAS16H,QAC1D26H,MAAS,GACTC,MAAa,GAGbC,KACA36H,EAAO0c,KAAKzV,OACZzF,EAAS84H,EAAK10H,cAAc9C,iBAAiB,iBAAiBhD,OAC9Dq6C,GAAS,CACb,IAAIluC,cAAcyQ,KAAKzV,OAAOw4B,yBAK1B,WAJA/iB,MAAKzV,OAAOsoB,OAAO,yBACflnB,IAAKiyH,EAAK10H,cAAcwhC,aAAa,YACrCvmC,SAAUy5H,EAAKnzH,UAAUC,SAAS,yBA6B1C,IAzBIkzH,EAAKnzH,UAAUC,SAAS,yBACxB3D,YAAU62H,GAAO,sBACjBxsH,eAAawsH,GAAO,wBACpBA,EAAKjlH,kBAAkB7P,UAAY,4CACnC20C,GAAS,EACLrpC,GAAgB9Q,IAChB0c,KAAKk+G,kBAAkB56H,EAAM5B,EAAQ+7C,MAlBjC,OADM,IAqBVz9B,KAAKzV,OAAO7F,cAAcouB,mBAC1B9S,KAAKzV,OAAO2R,cAAciiH,cAAcP,EAAK10H,iBAIjD60H,GAAS,EACT3sH,eAAawsH,GAAO,sBACpB72H,YAAU62H,GAAO,wBACjBA,EAAKjlH,kBAAkB7P,UAAY,4CAC/BsL,GAAgB9Q,IAChB0c,KAAKk+G,kBAAkB56H,EAAM5B,GAASq8H,MA9BlC,OADM,IAiCV/9G,KAAKzV,OAAO7F,cAAcouB,mBAC1B9S,KAAKzV,OAAO2R,cAAckiH,gBAAgBR,EAAK10H,gBAGvD8W,KAAK6+D,KAAKrhC,UAAUogF,EAAMngF,IACrBrpC,GAAgB9Q,KAAU0c,KAAKzV,OAAO7F,cAAcouB,kBAAmB,CACxE,IAAK,GAAIrvB,GAAI,EAAGsB,EAAMiW,EAAK5X,OAAQK,EAAIsB,IAC/BiW,EAAKvX,GAAG2C,iBAAiB,MAAM6pE,IAC/Bj1D,EAAKvX,GAAG2C,iBAAiB,MAAM6pE,GAASxlE,UAAUC,SAAS,iBAAmBsQ,GAF1CvX,IAGhCs6H,EACA/iH,EAAKvX,GAAG4F,MAAMC,QAAU,OAGpB0R,EAAKvX,GAAG2C,iBAAiB,iBAAiBhD,SAAW0B,EAAS,IAC9DkW,EAAKvX,GAAG4F,MAAMC,QAAU,IACxB00H,EAAahjH,EAAKvX,GAAG6C,cAAc,yBAE/B23H,EAAS/5H,KAAK85H,GAEdhjH,EAAKvX,GAAGgH,UAAUC,SAAS,gBACvBsQ,EAAKvX,EAAI,GAAG2C,iBAAiB,wBAAwBhD,SACrD4X,EAAKvX,GAAG4F,MAAMC,QAAU,QAUhD0W,MAAKq+G,kCACLr+G,KAAKzV,OAAOsoB,O9DkEU,+B8DlEgC7X,KAAMgF,KAAKzV,OAAO0K,kBAE5E,IAAK,GAAIxR,GAAI,EAAGsB,EAAMk5H,EAAS76H,OAAQK,EAAIsB,EAAKtB,IAC5C2N,eAAa6sH,EAASx6H,IAAK,sBAC3BsD,YAAUk3H,EAASx6H,IAAK,wBACxBw6H,EAASx6H,GAAGkV,kBAAkB7P,UAAY,4CAC1CkX,KAAKs9G,mBAAmBW,EAASx6H,MAI7C0mF,EAAMhoF,UAAUk8H,gCAAkC,WAE9C,IAAK,GADDrjH,GAAOgF,KAAKzV,OAAO0K,gBACdxR,EAAI,EAAGsB,EAAMiW,EAAK5X,OAAQK,EAAIsB,EAAKtB,IACpCuX,EAAKvX,GAAGQ,WAA2E,SAA9D+b,KAAKzV,OAAOsgC,mBAAmB7vB,EAAKvX,GAAGkI,KAAKtC,MAAMC,UACvE0R,EAAKvX,GAAGkF,SAAU,IAI9BwhF,EAAMhoF,UAAU+7H,kBAAoB,SAAU56H,EAAM5B,EAAQyC,EAAU0N,EAAOyT,GACzE,GAAIg5G,GAAOh7H,EAAKsnC,oBAAoBlpC,EAAO2W,QAAQ,MAAMqyB,aAAa,YACtE4zF,GAAKn6H,SAAWA,EAChBP,EAAeN,GACf0c,KAAKzV,OAAOsoB,O9DkDe,gC8DjD3BhhB,EAAQvO,EAAKy1B,gBAAgBvH,eAAc,IACrCiB,QAAUnvB,EAAKy1B,gBAAgB/G,eAAe1uB,EAAKouB,WAAWC,SAASc,OAC7E,IAAIvjB,IAASkT,YAAa,gBAAiB6pB,UAAWqyF,EACxCh7H,GAAKy1B,gBAAgB/H,QAAQ9hB,EAAM2C,EAAM2kB,iBAC3CE,KAAK,SAAU1zB,GAAK,MAAOM,GAAK8X,aAAagoC,mBAAmBpgD,EAAGkM,MAEnFi7E,EAAMhoF,UAAUo8H,eAAiB,SAAUp6H,GACvC,GAAIoL,cAAcyQ,KAAKzV,OAAOw4B,yBAE1B,WADA/iB,MAAKzV,OAAOsoB,OAAO,yBAA2B1uB,SAAUA,GAGvDA,IACD6b,KAAKzV,OAAOsoB,O9D7CK,mB8D6C0B1uB,EAI/C,KAAK,GADDiB,GADA04H,EAAW99G,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,SAASuF,SAE3DpI,EAAI,EAAGsB,EAAM+4H,EAAS16H,OAAQK,EAAIsB,EAAKtB,IACxCq6H,EAASr6H,GAAG2C,iBAAiB,8CAA8ChD,SAC3EgC,EAAM04H,EAASr6H,GAAG6C,cAAcnC,EAAW,wBAA0B,0BAEjEiB,EAAI0D,UAAY3E,EAAW,qBAAuB,uBAClDiB,EAAIuT,kBAAkB7P,UAAY3E,EAAW,4CACzC,6CAEF25H,EAASr6H,GAAGkV,kBAAkBlO,UAAUC,SAAS,uBACnDozH,EAASr6H,GAAGkV,kBAAkBlO,UAAUC,SAAS,0BACjDozH,EAASr6H,GAAG4F,MAAMC,QAAUnF,EAAW,GAAK,SAIhD25H,EAASr6H,GAAG4F,MAAMC,QAAUnF,EAAW,GAAK,MAGpD6b,MAAKq+G,kCACLr+G,KAAKzV,OAAOsoB,O9DSkB,+B8DTwB7X,KAAMgF,KAAKzV,OAAO0K,mBAM5Ek1E,EAAMhoF,UAAUo+F,UAAY,WACxBvgF,KAAKu+G,gBAAe,IAMxBp0C,EAAMhoF,UAAUs+F,YAAc,WAC1BzgF,KAAKu+G,gBAAe,IAOxBp0C,EAAMhoF,UAAUohB,OAAS,WACrBvD,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKw+G,sBACLx+G,KAAKy+G,kBACLz+G,KAAK0+G,oBAETv0C,EAAMhoF,UAAUq8H,oBAAsB,WAClC,GAAIG,GAAY3+G,KAAKzV,OAAOK,QAAQtE,cAAc,mBAC9Cq4H,IACA98H,SAAO88H,GAEX3+G,KAAKpV,QAAUoV,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,kBAAmBwyB,OAAS2f,SAAY,QACjGj7B,KAAKtb,cAAc0D,iBACnB4X,KAAKpV,QAAQH,UAAUqE,IAAI,mBAE/BkR,KAAKo9G,sBACLp9G,KAAKzV,OAAOK,QAAQ2uC,aAAav5B,KAAKpV,QAASoV,KAAKzV,OAAOK,QAAQ0uC,YAC9Dt5B,KAAKtb,cAAco1C,eACpB95B,KAAKpV,QAAQvB,MAAMC,QAAU,SAGrC6gF,EAAMhoF,UAAUi7H,oBAAsB,SAAUztE,GAC5C,GAAI3vC,KAAKtb,cAAco1C,eAAiB95B,KAAKtb,cAAcvB,QAAQC,OAAQ,CACvE,GAAI25H,GAAY/8G,KAAK8gC,KAAKvE,YAAY,gBACtCv8B,MAAKpV,QAAQrE,UAAYw2H,EACzB/8G,KAAKpV,QAAQH,UAAU5I,OAAO,kBAGzBme,KAAKpV,QAAQrE,YAAcyZ,KAAK8gC,KAAKvE,YAAY,mBAA2D,IAAtCv8B,KAAKtb,cAAcvB,QAAQC,SAC9F4c,KAAK+7G,iBAAmB/7G,KAAKg8G,mBAAsBrsE,KACvD3vC,KAAKpV,QAAQrE,UAAY,IAE7ByZ,KAAKpV,QAAQH,UAAUqE,IAAI,cAGnCq7E,EAAMhoF,UAAUs8H,gBAAkB,WAC9Bz+G,KAAK4+G,wBACL5+G,KAAK6+G,yBAET10C,EAAMhoF,UAAU08H,sBAAwB,WACzB,GAAI9kF,aAAU/5B,KAAKpV,SAC1BovC,WAAYh6B,KAAKtb,cAAc0D,gBAAkB,UAAY,qBAC7D6xC,SAAUj6B,KAAKtb,cAAc0D,iBAAmB,GAAK,EACrDu5B,OAAQ3hB,KAAK2hB,OACbwS,UAAWn0B,KAAKm0B,UAChBp3B,KAAMiD,KAAKjD,KACX43B,SAAU30B,KAAK20B,YAGvBw1C,EAAMhoF,UAAUy8H,sBAAwB,WACzB5+G,KAAKzV,OACL,GAAIumC,aAAU9wB,KAAKpV,SAC1BmmC,OAAQ,eACR1L,KAAMrlB,KAAKqlB,QAQnB8kD,EAAMhoF,UAAUi+F,YAAc,SAAUltE,GACpC,GAAI5vB,GAAO0c,KAAKzV,OACZhI,EAASe,EAAKkU,iBAAiB0b,EACnC,OAAI1wB,qBAAkBD,KAAoC,IAAzBA,EAAOwmB,eACnC/I,KAAK43F,gBAAkB53F,KAAKtb,cAAcvB,QAAQuE,QAAQwrB,IAAe,MAC1ElT,MAAKzV,OAAOyoB,IAAI,0BAA4BC,WAAYjT,KAAKmQ,gBAAiB+C,WAAY3wB,EAAO8F,aAGjG+F,EAAgB9K,OAChBA,GAAKuvB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAKogF,YAAa9nB,KAAMplD,KAGxF3wB,EAAOoG,QAAUrF,EAAKoB,cAAcoW,kBACpCkF,KAAK8+G,QAAU5rG,EACflT,KAAK+7G,gBAAiB,EAClB/7G,KAAK43F,eACL53F,KAAKwoF,cAGLxoF,KAAK28G,kBAAkBzpG,GAE3BlT,KAAKo9G,2BACLp9G,KAAK+7G,gBAAiB,KAO1B5xC,EAAMhoF,UAAUw+F,cAAgB,SAAUztE,GACtC,GAAI5vB,GAAO0c,KAAKzV,OACZhI,EAASyd,KAAKzV,OAAO0c,2BACrBjH,KAAKzV,OAAOpH,QAAQmW,OAAO,SAAUrR,GAAK,MAAOA,GAAE5F,QAAU6wB,IAAe,GAAK5vB,EAAKkU,iBAAiB0b,EAC3G,MAAI1wB,oBAAkBD,KAAoC,IAAzBA,EAAOwmB,eAA2B/I,KAAKtb,cAAcvB,QAAQuE,QAAQwrB,GAAc,GAApH,CAGA,GAAI9kB,EAAgB9K,GAEhB,WADAA,GAAKuvB,OAAOwlD,IAAuB31D,SAAU1C,KAAMy/B,QAASz/B,KAAK2gF,cAAeroB,KAAMplD,GAI1F,IADA3wB,EAAOoG,SAAU,EACb4G,cAAcjM,EAAK2L,iBAAkB,CACrC,GAAIs4B,KACJA,GAAW,GAAKhlC,EAChByd,KAAKzV,OAAOsoB,OAAO,gBAAiB0U,GAExCvnB,KAAK8+G,QAAUv8H,EAAOF,KACtB,IAAIc,GAAUiX,KAAKC,MAAMD,KAAK6+D,UAAUj5D,KAAKtb,cAAcvB,SAE3D,IADAA,EAAQqiB,OAAOriB,EAAQuE,QAAQsY,KAAK8+G,SAAU,GAC1C9+G,KAAKulE,cAAc79E,QAAQwrB,GAAc,EACzC,IAAK,GAAIzvB,GAAI,EAAGsB,EAAMzB,EAAKgwB,aAAanwB,QAAQC,OAAQK,EAAIsB,EAAKtB,IAC7D,GAAIyvB,IAAe5vB,EAAKgwB,aAAanwB,QAAQM,GAAGpB,MAAO,CACnDiB,EAAKgwB,aAAanwB,QAAQqiB,OAAO/hB,EAAG,EACpC,OAKR8L,cAAcyQ,KAAKzV,OAAuB,mBAC1CjH,EAAKgwB,aAAanwB,QAAUG,EAAKgwB,aAAanwB,SAE9C6c,KAAKtb,cAAc0D,kBACnB4X,KAAKi8G,kBAAoB94H,GAE7B6c,KAAKtb,cAAcvB,QAAUA,EACzBG,EAAKylB,gBACL/I,KAAKg8G,kBAAmB,EACxBh8G,KAAKzV,OAAOw6C,cAQpBolC,EAAMhoF,UAAUqmG,YAAc,WACfxoF,KAAKzV,MAAhB,IAEIpH,GAAUiX,KAAKC,MAAMD,KAAK6+D,UAAUj5D,KAAKtb,cAAcvB,SAC3DA,GAAU6c,KAAKi8G,kBAAkB74H,OAASgX,KAAKC,MAAMD,KAAK6+D,UAAUj5D,KAAKi8G,oBAAsB94H,EAC3F6c,KAAK87G,gBACkC,IAAnC34H,EAAQuE,QAAQsY,KAAK8+G,UACrB37H,EAAQe,KAAK8b,KAAK8+G,SAEtB9+G,KAAK++G,qBAAqB/+G,KAAK8+G,UAEnC9+G,KAAK87G,cAAe,EACpB97G,KAAKzV,OAAO7F,cAAcvB,QAAUA,EACpC6c,KAAKzV,OAAOw6C,YAOhBolC,EAAMhoF,UAAU6+D,iBAAmB,SAAUh+D,GACrCuM,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BtqC,EAAEgY,KAAO,KAEFgF,MAAKzV,MACM,cAAlBvH,EAAEof,YACFpC,KAAK28G,kBAAkB38G,KAAK8+G,SAG5B9+G,KAAK68G,uBAAuB78G,KAAK8+G,QAErC,IAAI5vH,GAAO8Q,KAAKtb,cAAcvB,QAAQuE,QAAQsY,KAAK8+G,UAAY,GAC3D5rG,WAAYlT,KAAK8+G,QAAS18G,YAAa,WAAYze,KAAMujC,KACvD9kB,YAAa,aAAcze,KAAMujC,GACvClnB,MAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,EAAGkM,IACrD8Q,KAAK8+G,QAAU,MAEnB30C,EAAMhoF,UAAU48H,qBAAuB,SAAUD,GAE7C,IADA,GAAIr7H,GAAI,EACDA,EAAIuc,KAAKzV,OAAO+oB,aAAanwB,QAAQC,QACpC4c,KAAKzV,OAAO+oB,aAAanwB,QAAQM,GAAGpB,QAAUy8H,GAGlDr7H,GAEJ,IAAIuc,KAAKzV,OAAO+oB,aAAanwB,QAAQC,SAAWK,EAAG,CAC/Cuc,KAAKzV,OAAO+oB,aAAanwB,QAAQe,MAAO7B,MAAOy8H,EAASvzG,UAAW,YAAa+vE,aAAa,GAEzF/rF,eAAcyQ,KAAKzV,OAAuB,mBAC1CyV,KAAKzV,OAAO+oB,aAAanwB,QAAU6c,KAAKzV,OAAO+oB,aAAanwB,aAG1D6c,MAAKzV,OAAOqe,eAClB5I,KAAKzV,OAAO+oB,aAAanwB,QAAQM,GAAG8nB,UAAY,cAGxD4+D,EAAMhoF,UAAUsK,cAAgB,SAAUpK,GACtC,GAAIiB,GAAO0c,KAAKzV,OACZghB,EAAY,YACZyzG,EAAWh/G,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,iCACzDm2H,EAAgBj/G,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,kCAC9Do2H,EAAWl/G,KAAKzV,OAAOkC,cAAc,OAAS6uB,OAAS6jG,iBAAkB98H,KACzEE,EAASyd,KAAKzV,OAAOiN,iBAAiBnV,GAEtCk0E,EAAajzE,EAAK6yE,qBAAqB5zE,EAAOoJ,IAS9CqU,MAAKtb,cAAc0D,iBACnB82H,EAASpzH,YAAYkU,KAAKzV,OAAOkC,cAAc,QAC3C3D,UAAW,6BAA8BvC,UAAW,SACpD+0B,OAAS8sB,MAAO,OAAQnN,SAAU,KAAMoiC,aAAc,8BAG9D6hD,EAASpzH,YAAYkU,KAAKzV,OAAOkC,cAAc,QAC3C3D,UAAW,cAAevC,UAAWhE,EAAO8F,WAC5CizB,OAAS2f,SAAU,KAAMoiC,aAAc,8BAGvCr9D,KAAKtb,cAAcg5H,kBACnBwB,EAASpzH,YAAYkU,KAAKzV,OAAOkC,cAAc,QAC3C3D,UAAW,6DAA8DvC,UAAW,SACpF+0B,OAAS2f,SAAU,KAAMoiC,aAAc,qBAG3C9G,EAAWnwE,iBAAiB,8BAA8BhD,SAC1DmoB,EAAYgrD,EAAWjwE,cAAc,gBAAkB,YAAc,cAEzE44H,EAASpzH,YAAYkU,KAAKzV,OAAOkC,cAAc,QAC3C3D,UAAW,yBACCyiB,EAAUpjB,cAAgB,WAAaojB,EAAUpjB,cAAgB5B,UAAW,SACxF+0B,OAAS2f,SAAU,KAAMoiC,aAAc,8BAE3C6hD,EAASpzH,YAAYkU,KAAKzV,OAAOkC,cAAc,QAC3C3D,UAAW,sCAAuCvC,UAAW,SAC7D+0B,OAAS8sB,MAAO74C,aAAayQ,KAAK8gC,KAAKvE,YAAY,iBAAmBv8B,KAAK8gC,KAAKvE,YAAY,WACxFtB,SAAU,KAAMoiC,aAAc,8BAClCnwE,OAAQ8S,KAAKtb,cAAc06H,kBAAoB,GAAK,kBAExDH,EAAcnzH,YAAYozH,EACdl/G,MAAKtb,cAAcvB,QAAQuE,QAAQrF,EAM/C,OALI2d,MAAKtb,cAAc0D,kBACnB42H,EAASlzH,YAAYmzH,GACrBD,EAASlzH,YAAYkU,KAAKq/G,mBAC1BJ,EAAgBD,GAEbC,GAEX90C,EAAMhoF,UAAUw6H,kBAAoB,SAAUt6H,GAC1C,IAAI2d,KAAKtb,cAAc0D,kBAChB4X,KAAKzV,OAAOK,QAAQtE,cAAc,uCAAyCjE,EAAQ,KAD1F,CAIA,GAAIE,GAASyd,KAAKzV,OAAOiN,iBAAiBnV,EAC1C,KAAIG,oBAAkBD,GAAtB,CAGA,GAAI08H,GAAgBj/G,KAAKvT,cAAcpK,EACvC,IAAI2d,KAAKtb,cAAc0D,gBAAiB,CACpC,GAAIN,GAAQkY,KAAKpV,QAAQxE,iBAAiB,qBAAqBhD,MAC/D67H,GAAcl9H,aAAa,QAAS+F,EAAMmI,YAE9C+P,KAAKpV,QAAQkB,YAAYmzH,MAG7B90C,EAAMhoF,UAAUk9H,gBAAkB,WAC9B,MAAOr/G,MAAKzV,OAAOkC,cAAc,QAC7B3D,UAAW,kCAAmCvC,UAAW,SACzD+0B,OAAS2f,SAAU,KAAMoiC,aAAc,qCACvCnwE,OAAQ8S,KAAKtb,cAAc06H,kBAAoB,GAAK,kBAG5Dj1C,EAAMhoF,UAAUu8H,iBAAmB,SAAUj5F,GACzC,GAAIzlB,KAAKtb,cAAcg5H,iBAEnB,IAAK,GADD5/C,MAAazyE,MAAMC,KAAK0U,KAAKzV,OAAO2+B,iBAAiBnoB,uBAAuB,oBACvEtd,EAAI,EAAGsB,EAAM+4E,EAAQ16E,OAAQK,EAAIsB,EAAKtB,IAC3C,IAAOq6E,EAAQr6E,GAAGgH,UAAUC,SAAS,iBAAoBozE,EAAQr6E,GAAGgH,UAAUC,SAAS,sBAAyB,CAC5G,GAAInI,GAASyd,KAAKzV,OAAOwpC,eAAe+pC,EAAQr6E,GAAGinC,aAAa,mBAC3D1qB,KAAKzV,OAAOye,gBAAmBhJ,KAAKzV,OAAOye,iBAAmBzmB,EAAOymB,kBAClE80D,EAAQr6E,GAAG2C,iBAAiB,mBAAmBhD,QAC/CvB,SAAOi8E,EAAQr6E,GAAG2C,iBAAiB,mBAAmB,IAErDq/B,GACDq4C,EAAQr6E,GAAGqI,YAAYkU,KAAKzV,OAAOkC,cAAc,QAC7C3D,UAAW,2BACNkX,KAAKtb,cAAcvB,QAAQuE,QAAQnF,EAAOF,QAAU,EAAI,iCACnD,8BAA+Bi5B,OAAS2f,SAAU,KAAMoiC,aAAc,sBAQ5G8M,EAAMhoF,UAAU06H,uBAAyB,SAAUx6H,GAC/C,IAAKG,oBAAkBwd,KAAKs/G,eAAej9H,IAAS,CAChD,GAAI+H,GAAO4V,KAAKs/G,eAAej9H,EAC/B,IAAI2d,KAAKtb,cAAc0D,gBAAiB,CACpC,GAAI2rH,GAAW5pH,EAAaC,EAAM,mBAClCvI,UAAOkyH,OAGPlyH,UAAOuI,EAEX4V,MAAKo9G,sBAETp9G,KAAKg8G,kBAAmB,GAE5B7xC,EAAMhoF,UAAUovE,kBAAoB,SAAUvuE,GAC1C,GAAIA,EAAEwuC,SAAWxxB,KAAKmQ,gBAGtB,IAAK,GAAItgB,GAAK,EAAGkG,EAAKvO,OAAOC,KAAKzE,EAAEmI,YAAa0E,EAAKkG,EAAG3S,OAAQyM,IAAM,CACnE,GAAI0lB,GAAOxf,EAAGlG,EACd,QAAQ0lB,GACJ,IAAK,UACD,GAAIrmB,OAAO,EACX,IAAI8Q,KAAK43F,eAAgB,CACrB,GAAK53F,KAAKg8G,iBAyBN9sH,GAASgkB,WAAYlT,KAAK8+G,QAAS18G,YAAa,aAAcze,KAAMk+C,QAzB5C,CACxB,IAAK7hC,KAAK+7G,eAAgB,CACtB/7G,KAAKo9G,qBAAoB,EACzB,KAAK,GAAI15H,GAAI,EAAGA,EAAIsc,KAAKzV,OAAO+oB,aAAanwB,QAAQC,OAAQM,IACrDsc,KAAKzV,OAAO+oB,aAAanwB,QAAQO,GAAG43F,cACpCt7E,KAAKzV,OAAO+oB,aAAanwB,QAAQqiB,OAAO9hB,EAAG,GAC3CA,IAGR,KAASD,EAAI,EAAGA,EAAIuc,KAAKtb,cAAcvB,QAAQC,OAAQK,IACnDuc,KAAK8+G,QAAU9+G,KAAKtb,cAAcvB,QAAQM,GAChCuc,KAAKzV,OAAOiN,iBAAiBwI,KAAK8+G,SACxCn2H,QAAUqX,KAAKzV,OAAO7F,cAAcoW,kBACxCkF,KAAK++G,qBAAqB/+G,KAAK8+G,SAC3Br7H,EAAIuc,KAAKtb,cAAcvB,QAAQC,OAAS,GACxC4c,KAAK28G,kBAAkB38G,KAAKtb,cAAcvB,QAAQM,IAI9DyL,GACIgkB,WAAYlT,KAAK8+G,QAAS18G,YAAapf,EAAEmI,WAAWoqB,GAAMnyB,OAAS,WAAa,aAChFO,KAAMk+C,IAMd,IAAK7hC,KAAKtb,cAAcoW,kBAEpB,IAAK,GADD3X,GAAUH,EAAE+tF,cAAcx7D,GACrB9xB,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,KACgB,IAA5CT,EAAEmI,WAAWoqB,GAAM7tB,QAAQvE,EAAQM,MACnCuc,KAAKzV,OAAOiN,iBAAiBrU,EAAQM,IAAIkF,SAAU,EAK3D4G,eAAcyQ,KAAKzV,OAAO0E,kBAAoB+Q,KAAKzV,OAAOw4B,0BACpC,aAAtB7zB,EAAgB,aAChB8Q,KAAKzV,OAAOonE,gBAEhB3xD,KAAKzV,OAAOsoB,OAAOozB,GAAqB/2C,GAE5C,KACJ,KAAK,eACD8Q,KAAKo9G,sBACLp9G,KAAKtb,cAAco1C,aAAe95B,KAAKpV,QAAQvB,MAAMC,QAAU,GAAK0W,KAAKpV,QAAQvB,MAAMC,QAAU,MACjG,MACJ,KAAK,oBACD0W,KAAKu/G,oBAAoBv/G,KAAKtb,cAAcoW,mBAC5CkF,KAAKzV,OAAOsoB,OAAOozB,IAAuB7jC,YAAa,WACvD,MACJ,KAAK,oBACDpC,KAAKw/G,uBAAuBx/G,KAAKtb,cAAc06H,kBAAmB,kBAClE,MACJ,KAAK,mBACDp/G,KAAKw/G,uBAAuBx/G,KAAKtb,cAAcg5H,iBAAkB,wBACjE19G,KAAKzV,OAAOonE,eACZ,MACJ,KAAK,oBACD3xD,KAAKzV,OAAOkmF,mBAK5BtG,EAAMhoF,UAAUo9H,oBAAsB,SAAUE,GAC5C,IAAK,GAAIh8H,GAAI,EAAGA,EAAIuc,KAAKtb,cAAcvB,QAAQC,OAAQK,IACnDuc,KAAKzV,OAAOiN,iBAAiBwI,KAAKtb,cAAcvB,QAAQM,IAAIkF,QAAU82H,GAG9Et1C,EAAMhoF,UAAUq9H,uBAAyB,SAAUC,EAAW32H,GAE1D,IAAK,GADD60H,MAAatyH,MAAMC,KAAK0U,KAAKpV,QAAQxE,iBAAiB,IAAM0C,IACvDrF,EAAI,EAAGA,EAAIk6H,EAAQv6H,OAAQK,IAChCk6H,EAAQl6H,GAAG4F,MAAMC,QAAUm2H,EAAY,GAAK,QAGpDt1C,EAAMhoF,UAAUulC,kBAAoB,SAAU1kC,GACtCA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,QACvCzxB,KAAKuD,UAQb4mE,EAAMhoF,UAAU0rB,QAAU,WACtB,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OACzBq2D,KAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,qBAI1F0Z,KAAKzV,OAAO2lB,aAAgBlQ,KAAKzV,OAAOwuG,YACzC/4F,KAAK0gF,gBAET1gF,KAAKiuC,sBACLjuC,KAAK0+G,kBAAiB,GACtB78H,SAAOme,KAAKpV,WAOhBu/E,EAAMhoF,UAAUu+F,cAAgB,WAC5B,GAAIpuE,GAAOlY,KAAKC,MAAMD,KAAK6+D,UAAUj5D,KAAKtb,cAAcvB,SACxD6c,MAAK43F,gBAAiB,CACtB,KAAK,GAAIn0G,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IACpCA,IAAOsB,EAAM,IACbib,KAAK43F,gBAAiB,GAE1B53F,KAAK2gF,cAAcruE,EAAK7uB,GAE5Buc,MAAK43F,gBAAiB,GAM1BztB,EAAMhoF,UAAUguB,cAAgB,WAC5B,MAAO,SAEXg6D,EAAMhoF,UAAU22G,iBAAmB,SAAU91G,GACzC,GACIklD,GADA5kD,EAAO0c,KAAKzV,OAEZ+nB,EAAOhvB,EAAKgwB,aAAanwB,QACzBg4F,EAAQ73F,EAAKoB,cAAcvB,QAC3Bw3F,EAAa36E,KAAKzV,OAAO2L,aAAa6F,IAAI,SAAU9T,GAAK,MAAOA,GAAE5F,OACtE2d,MAAK0+G,kBACL,KAAK,GAAIj7H,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,KACG,IAAvCk3F,EAAWjzF,QAAQ4qB,EAAK7uB,GAAGpB,SAG/B6lD,EAAS5kD,EAAKwyF,uBAAuBxjE,EAAK7uB,GAAGpB,QACxCiB,EAAKslB,eAAiB5I,KAAKulE,cAAc79E,QAAQ4qB,EAAK7uB,GAAGpB,QAAU,GACpE2d,KAAKtb,cAAcvB,QAAQuE,QAAQ4qB,EAAK7uB,GAAGpB,QAAU,IACrDoI,YAAUy9C,EAAO5hD,cAAc,qBAAsB,cAAe,wBAChEgsB,EAAKlvB,OAAS,GACd8kD,EAAO5hD,cAAc,oBAAoBwF,YAAYkU,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,eAAgBvC,WAAY9C,EAAI,GAAGwM,eAGtI+P,KAAKs/G,eAAehtG,EAAK7uB,GAAGpB,QAAU2d,KAAKs/G,eAAehtG,EAAK7uB,GAAGpB,OAAO+D,iBAAiB,gBAAgBhD,SACrF,cAAtBkvB,EAAK7uB,GAAG8nB,UACR9gB,YAAUuV,KAAKs/G,eAAehtG,EAAK7uB,GAAGpB,OAAOiE,cAAc,iBAAkB,cAAe,qBAAsB,eAAgB,sBAGlImE,YAAUuV,KAAKs/G,eAAehtG,EAAK7uB,GAAGpB,OAAOiE,cAAc,iBAAkB,eAAgB,sBAAuB,cAAe,sBAI/I,KAAK,GAAI7C,GAAI,EAAGsB,EAAMo2F,EAAM/3F,OAAQK,EAAIsB,EAAKtB,KACH,IAAlCk3F,EAAWjzF,QAAQyzF,EAAM13F,KAG7BH,EAAKwyF,uBAAuBqF,EAAM13F,IAAI1B,aAAa,eAAgB,SAG3EooF,EAAMhoF,UAAUm9H,eAAiB,SAAUj9H,GACvC,MAAI2d,MAAKpV,SAAWoV,KAAKpV,QAAQtE,cAAc,oBAAsBjE,EAAQ,MAClE2d,KAAKpV,QAAQtE,cAAc,oBAAsBjE,EAAQ,MAAM6G,cAEnE,MAEXihF,EAAMhoF,UAAU86H,kBAAoB,SAAUyC,GAC1C,GAAIrzH,GAAa2T,KAAK2/G,uBAAuBD,GACzC39G,EAAU/B,KAAK88G,eAAeh6G,aAAazW,MAC3Cm1B,EAAcxhB,KAAKzV,OAAO0K,gBAAgBqE,OAAO,SAAUlU,GAAO,OAAQA,EAAInB,YAC9E27H,EAAoB79G,EAAQzI,OAAO,SAAUhX,GAAQ,OAAQA,EAAK2B,WAClE+b,MAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOghC,iBAAiB,sBAAuB,uBAAwB,kBAEhF,KAAK,GAAI9nC,GAAI,EAAGA,EAAIm8H,EAAkBx8H,OAAQK,IAAK,CAC/C,GAAI2B,GAAMw6H,EAAkBn8H,GAExByL,GAASU,MADDxK,EAAIwK,MAAM0J,OAAO,SAAUmf,GAAQ,MAAOA,GAAK2G,aAChC98B,KAAM8C,EAAI9C,KAAMu9H,QAASr+F,EAAY/9B,GAAK+9B,EAAY/9B,GAAGkI,IAAM,GAC1FqU,MAAKzV,OAAOsoB,O9DzzBU,yB8DyzB0B3jB,KAGxDi7E,EAAMhoF,UAAUw9H,uBAAyB,SAAUD,GAC/C,GAAII,GAAcJ,YAAsBtzH,OAAQszH,KAC5C1kH,EAAOgF,KAAKzV,OAAO0K,gBACnB8qH,EAAW//G,KAAKzV,OAAO8O,wBACvB2mH,KACAC,EAAWjlH,EAAKe,IAAI,SAAU3W,GAI9B,MAHiB,WAAbA,EAAI+jB,MACJ62G,EAAY97H,KAAKkB,EAAI9C,MAElB8C,EAAIoW,kBAAmBhU,QAASpC,EAAIoW,QAAUpW,EAAI9C,OAEzDD,EAAQ2d,KAAKzV,OAAO6O,0BAA0B,EAClD6mH,GAAkC,IAAvBH,EAAY18H,OAAe68H,EAAWH,CACjD,IAAII,GAAYH,EAAShkH,IAAI,SAAUqf,GACnC,GACIx5B,GADAu+H,EAAU19H,WAASC,UAAUL,EAAO+4B,EAMxC,OAJa6kG,GAASttH,KAAK,SAAUytH,GAEjC,MADAx+H,GAAQw+H,EACDD,IAAY19H,WAASC,UAAUL,EAAO+9H,KAEjCx+H,EAAQw5B,IAExBilG,EAAQX,CACZ,MAAMW,EAAM18H,MAAuB,WAAf08H,EAAM18H,OAAsBq8H,EAAY58H,OAAS,EACjE,IAAK,GAAIK,GAAI,EAAGA,EAAIu8H,EAAY58H,OAAQK,IAAK,CACzC,GAAIqE,GAAQo4H,EAAUx4H,QAAQs4H,EAAYv8H,GAC1Cy8H,GAAU16G,OAAO1d,EAAO,GAKhC,IAAK,GAFDuE,MACAi0H,EAAgBtgH,KAAKzV,OAAO8B,WACvB3I,EAAI,EAAGA,EAAI48H,EAAcl9H,OAAQM,IAEtC,IAAK,GADD0B,GAAMk7H,EAAc58H,GACfsY,EAAI,EAAGA,EAAI5W,EAAIjC,QAAQC,OAAQ4Y,IAAK,CACzC,GAAIkkE,KAEJA,IAASv8E,KADEyB,EAAIjC,QAAQ6Y,GAAGrY,KAAKsM,WACX9H,cAAe9F,MAAO+C,EAAIjC,QAAQ6Y,GAAG3Z,OACzDgK,EAAWnI,KAAKg8E,GAMxB,IAAK,GAHDx6E,GACAy6E,EACAC,EAAcpgE,KAAKzV,OAAO7F,cAAcvB,QACnC6jD,EAAI,EAAGA,EAAIo5B,EAAYh9E,OAAQ4jD,IACpCm5B,EAASz6E,GAAkBw6H,EAC3Bx6H,EAASjD,WAASstB,MAAMowD,EAAQC,EAAYp5B,GAAI36C,EAAY,KAAM,KAEtE,OAAO3G,IAEXykF,EAAMhoF,UAAUg7H,aAAe,SAAUjuH,GAIrC,IAAK,GAHDvD,GAAMuD,EAAKvD,IACXxH,EAAW+K,EAAK/K,SAChB6W,EAAOgF,KAAKzV,OAAO0K,gBACdxR,EAAI,EAAGA,EAAIuX,EAAK5X,OAAQK,IAAK,CAClC,GAAI2B,GAAM4V,EAAKvX,EACf,IAAI2B,EAAIuG,MAAQA,GAAOnJ,oBAAkBmJ,GAAM,CAC3CvG,EAAIjB,SAAWA,CAsBf,KAAK,GAAIT,GAAID,EAAI,EAAGC,EAAIsX,EAAK5X,QAET,UAvBN,SAAUM,GACpB,GAAIohC,GAAW9pB,EAAKtX,GAChB68H,MAAgB,EAepB,IAdIz7F,EAASvG,YAAcn5B,EAAIuG,MAC3B40H,EAAgBvlH,EAAK1B,OAAO,SAAUvP,GAAK,MAAOA,GAAE4B,MAAQm5B,EAASvG,YAAc,IAEnFuG,EAASvG,YAAcn5B,EAAIuG,IAC3Bm5B,EAASn8B,QAAUvD,EAAIjB,SAEjB3B,oBAAkB+9H,IAAkBz7F,EAASvG,YAAcgiG,EAAc50H,MAC3E40H,EAAcp8H,WAAsC,IAA1Bo8H,EAAc53H,QACxCm8B,EAASn8B,SAAU,EAEd43H,EAAcp8H,WAAsC,IAA1Bo8H,EAAc53H,UAC7Cm8B,EAASn8B,SAAU,IAGvBnG,oBAAkBmJ,GAClB,MAAO,SAIWjI,GADWA,OAO7Csc,KAAKzV,OAAOsoB,OAAO+T,IAAuB5rB,KAAMA,EAAM9L,MAAQ0G,UAAU,EAAOoF,KAAMA,MAElFmvE,KCrkCPq2C,GAA2B,WAK3B,QAASA,GAAUj2H,EAAQiY,GAEvBxC,KAAK6+D,KAAO,GAAIxhC,IAChBr9B,KAAKzV,OAASA,EACVyV,KAAKzV,OAAO2lB,cAGhBlQ,KAAK+zC,MAAQvxC,EAAQpT,WAAW,SAChC4Q,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKs0D,aAAct0D,MAChDA,KAAKzV,OAAO6lB,GAAGQ,GAAgB5Q,KAAK6N,QAAS7N,MAC7CA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKk9E,gBAAiBl9E,MACxDA,KAAKzV,OAAO6lB,GAAG6c,GAAwBjtB,KAAKy9B,OAAQz9B,MACpDA,KAAKzV,OAAO6lB,GAAGkX,GAAgCtnB,KAAKygH,eAAgBzgH,OAgSxE,MA9RAwgH,GAAUr+H,UAAUmyE,aAAe,SAAUtxE,GACzCgd,KAAK0gH,qBAAqBroH,UAAQrV,EAAEtB,OAAQ,QAGhD8+H,EAAUr+H,UAAUu+H,qBAAuB,SAAUh/H,GACjD,GAKIgU,GALApS,EAAO0c,KAAKzV,OACZ0C,EAAQ+S,KAAKzV,OAAOulD,kBACpB6wE,EAAa3gH,KAAKzV,OAAO8O,wBAAwBjW,OAAS,EAI1Dw9H,EAAal/H,GAAUA,EAAO+I,UAAUC,SAAS,sBACrD,IAAMhJ,IAAWA,EAAO+I,UAAUC,SAAS,wBAA0BhJ,EAAO+I,UAAUC,SAAS,sBAA/F,CAGA,GAAI6E,cAAcyQ,KAAKzV,OAAuB,iBAE1C,WADAyV,MAAKzV,OAAOsoB,OAAO,cAAenxB,EAGtC,IAAI8d,GAAK9d,EAAOwH,cACZyC,EAAM6T,EAAGkrB,aAAa,YACtBrtB,EAAS/Z,EAAKsnC,oBAAoBj/B,GAClCk1H,EAAU7gH,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,SAASuF,SAAS2T,EAAGvB,SAAW,EAC1F,IAAIvc,EAAO+I,UAAUC,SAAS,uBAAwB,CAClD,GAAIpI,GAAO+a,EAAO/a,IAClB,IAAI0d,KAAK9K,YAAY2rH,GACjBA,EAAQx3H,MAAMC,QAAU,GACxBhG,EAAKuvB,O/D8UU,uB+D9UyBvwB,KAAMA,EAC1CoT,UAAWpS,EAAKoS,UAAWorH,cAAep/H,EAAQk/H,WAAYA,QAEjE,IAAIt9H,EAAK+yF,qBAAuB/yF,EAAKoS,UAAW,CACjD,GAAIwpB,GAAQzzB,EAAO,YACfs1H,EAAY/gH,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,cAAewyB,OAAS0lG,WAAY9hG,KAC7F+hG,EAAajhH,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,iBAC1D2wB,EAAUzZ,KAAKzV,OAAOgQ,oBAAoBnX,MAC1C4c,MAAKzV,OAAO0mE,qBACZx3C,IAEJwnG,EAAWl/H,aAAa,UAAW03B,EAAQxpB,WAQ3C,KAAK,GAPD7K,GAAM,GAAIozB,KACVv0B,WAAW,EACXE,UAAU,EACVwH,IAAKuzB,EACLhqB,aAAa,EACbtF,OAAQ,GAAIopB,KAAOQ,SAAUlK,WAAS4R,SAAW,GAAIlI,KAAOoG,YAAY,EAAMz2B,SAAS,OAElFlF,EAAI,EAAGsB,EAAMzB,EAAKoB,cAAcvB,QAAQC,OAAQK,EAAIsB,EAAKtB,IAC9Ds9H,EAAUj1H,YAAYkU,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,kBACnE1D,EAAIwK,MAAMg1B,QAAQ,GAAI5L,KAAOQ,SAAUlK,WAAS4R,SAKpD,IAHA6/F,EAAUj1H,YAAYkU,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,wBACnEi4H,EAAUj1H,YAAYm1H,GACtBzhH,EAAG8rB,WAAWiO,aAAawnF,EAAWvhH,EAAG0hH,aACrC59H,EAAK05B,eAAgB,CACrB,GAAIue,GAAkBv7B,KAAKzV,OAAOkhB,SAA4C,gBAAzBnoB,kBACjDm/C,EAAmBn/C,EAAKsH,QAAQJ,GAAK,gBACrC+wC,IACAj4C,EAAK+yF,oBAAoB/zF,EAAMgB,EAAM,iBAAkBm/C,EAAkB,KAAM,KAAMw+E,GACrFjhH,KAAKzV,OAAOihC,mBAGZ5/B,EAAeq1H,EAAY39H,EAAK+yF,oBAAoB/zF,EAAMgB,EAAM,iBAAkBm/C,IAElFlzC,cACAk+B,uBAAqBgV,EAAkB,iBAAkBn/C,GAAM,OAGlE,EACDoS,EAAY,GAAIwtE,IAAKljE,KAAKmhH,aAAa79H,EAAM+Z,EAAQ/Z,EAAK8R,aAC5CvD,QACV6D,EAAU7D,MAAQ6D,EAAU7D,MAAM8f,SAEtCjc,EAAgB,eACZ4uB,SAAUhhC,EAAKsH,QAAQJ,GACvB42H,kBAAmB99H,EAAK8V,0BACxBioH,eAAgB/9H,EAAKoS,UAAU+lF,YAC/BD,oBAAqBl5F,EAAKgB,EAAKoS,UAAU+lF,aACzC6lC,cAAeh/H,GAEnBoT,EAAU6rH,iBAAmBj+H,EAAKmoB,SAC3BnoB,EAAKi+H,iBACRj+H,EAAKq5B,aACLjnB,EAAUinB,YAAa,EACvBjnB,EAAU0a,GAAGwW,GAAqB5mB,KAAKwhH,eAAe9rH,GAAYsK,MAClEtK,EAAU0a,GAAG6zB,GAAgBjkC,KAAKwhH,eAAe9rH,GAAYsK,OAEjE3C,EAAO3H,UAAYA,CACnB,IAAIyvE,GAAUzvE,EAAUwrF,qBACpBoF,EAAiBhjG,EAAK49F,oBACrB/b,IAAWA,EAAQ/hF,SAAWkjG,EAAeljG,QAC9CsS,EAAUupF,mBAAmBqH,EAEjC,IAAIm7B,GAAWzhH,KAAKzV,OAAOkC,cAAc,OACrCjC,GAAI,QAAUuB,EAAQyT,EAAI,UAAUpc,OAChC,QAAUoc,EAAGvB,SAAWxS,EAAO,KAEvCw1H,GAAWn1H,YAAY21H,GACvB/rH,EAAU+kC,SAASgnF,GAEvBV,EAAUj1H,YAAYm1H,GAClBzhH,EAAG0hH,YACH1hH,EAAG8rB,WAAWiO,aAAawnF,EAAWvhH,EAAG0hH,aAGzC1hH,EAAG8rB,WAAWx/B,YAAYi1H,GAE9Bz9H,EAAKmnC,UAAUjlB,OAAOhG,EAAGvB,SAAW,EAAG,EAAG8iH,GAC1Cz9H,EAAK2R,gBAAgBuQ,OAAOnI,EAAOvV,MAAQ,EAAG,EAAG1C,GACjD9B,EAAKq0B,Q/D5EQ,mB+D4E0BmpG,cAAeG,EAAY3+H,KAAMA,EAAMoT,UAAWA,IACzFpS,EAAKuvB,O/D7EQ,mB+D6EyB7X,KAAM1X,EAAK2R,kBAKrD,GAHAxK,YAAU/I,GAAS,sBAAuB,wBAC1C+I,YAAU/I,EAAOiX,mBAAoB,mBAAoB,sBAAuB,oBAAqB,uBACrG0E,EAAOlZ,UAAW,EACdzC,EAAO+I,UAAUC,SAAS,kBAAoBsV,KAAKzV,OAAOmO,aAAawgD,aAAejsD,EAAMmwB,aAAc,CAC1GhsB,cAAY1P,EAAOwH,cAAc9C,iBAAiB,MAAO,gBACzD,IAAIs7H,GAAez0H,EAAM3G,cAAc,SAASF,iBAAiB,gBAAgBhD,OAAS,CAC1F2D,YAASkG,EAAM3G,cAAc,SAASF,iBAAiB,gBAAgBs7H,GAAcvxF,YAAa,kBAClGnwB,KAAK2hH,aAAc,EAEvB3hH,KAAK6+D,KAAKrhC,UAAU97C,GAAQ,OAGxBse,MAAK9K,YAAY2rH,KACjBA,EAAQx3H,MAAMC,QAAU,OACxBhG,EAAKuvB,O/D4OU,uB+D5OyBvwB,KAAM+a,EAAO/a,KACjDoT,UAAWpS,EAAKoS,UAAWorH,cAAep/H,EAAQk/H,WAAYA,KAEtEn2H,YAAU/I,GAAS,wBAAyB,sBAC5C+I,YAAU/I,EAAOiX,mBAAoB,oBAAqB,uBAAwB,mBAAoB,sBAClGy1B,SAAS5uB,EAAGkrB,aAAa,iBAAkB,MAAQi2F,GAAc3gH,KAAK2hH,cACtE56H,WAASrF,EAAOwH,cAAc9C,iBAAiB,MAAO,iBACtD4Z,KAAK2hH,aAAc,GAEvBtkH,EAAOlZ,UAAW,EAClB6b,KAAK6+D,KAAKrhC,UAAU97C,GAAQ,KAQpC8+H,EAAUr+H,UAAUg/H,aAAe,SAAU79H,EAAM+Z,EAAQjI,GACvD,GAAII,EAeJ,OAdIlS,GAAKq5B,YAActf,EAAOlZ,UAAYb,EAAK6S,cAC3C7S,EAAK6S,aAAakH,EAAOvV,QAAUxE,EAAK6S,aAAakH,EAAOvV,OAAO0N,WACnElS,EAAK6S,aAAakH,EAAOvV,OAAO0N,UAAUT,mBAAqBzR,EAAKoS,UAAUX,mBAC9ES,EAAYlS,EAAK6S,aAAakH,EAAOvV,OAAO0N,WAGxClS,EAAKq5B,YAAcr5B,EAAKoS,UAAUP,aAClC7R,EAAKoS,UAAUP,YAA4B,gBAAdC,EAC7BI,EAAYlS,EAAKoS,WAGjBF,EAAYlS,EAAKoS,UAGlBF,GAEXgrH,EAAUr+H,UAAUq/H,eAAiB,SAAU39H,GAC3C,GAAI6kB,GAAQ1I,IACZ,OAAO,YACHnc,EAAKg0B,IAAI+O,GAAqBle,EAAM84G,gBACpC39H,EAAKg0B,IAAIosB,GAAgBv7B,EAAM84G,gBAC/B39H,EAAKgvB,OAAO2yE,SAGpBg7B,EAAUr+H,UAAU+S,YAAc,SAAU9P,GACxC,MAAOA,IAAOA,EAAIqF,UAAUC,SAAS,gBAEzC81H,EAAUr+H,UAAU0rB,QAAU,WAC1B,GAAIozC,GAAcjhD,KAAKzV,OAAOK,SAC1BoV,KAAKzV,OAAO2lB,aAAgB+wC,IAAiBA,EAAY36D,cAAc,kBACtE26D,EAAY36D,cAAc,qBAG/B0Z,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKs0D,cACnCt0D,KAAKzV,OAAOstB,IAAIjH,GAAgB5Q,KAAK6N,SACrC7N,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKk9E,iBACxCl9E,KAAKzV,OAAOstB,IAAIoV,GAAwBjtB,KAAKy9B,QAC7Cz9B,KAAKzV,OAAOstB,IAAIyP,GAAgCtnB,KAAKygH,kBAEzDD,EAAUr+H,UAAUy/H,eAAiB,SAAU95H,EAAOgB,GAClD,GAAI0W,GAAKQ,KAAKzV,OAAO8T,cAAcvW,EACnC,OAAI0X,IAAMA,EAAGlZ,cAAcwC,GAChB0W,EAAGlZ,cAAcwC,GAErB,MAOX03H,EAAUr+H,UAAUs7C,OAAS,SAAU/7C,GAC9B05C,MAAM15C,KACPA,EAASse,KAAK4hH,eAAelgI,EAAQ,yBAErCA,GAAUA,EAAO+I,UAAUC,SAAS,wBACpCsV,KAAK0gH,qBAAqBh/H,IAQlC8+H,EAAUr+H,UAAU68F,SAAW,SAAUt9F,GAChC05C,MAAM15C,KACPA,EAASse,KAAK4hH,eAAelgI,EAAQ,uBAErCA,GAAUA,EAAO+I,UAAUC,SAAS,sBACpCsV,KAAK0gH,qBAAqBh/H,IAOlC8+H,EAAUr+H,UAAUo+F,UAAY,WAC5BvgF,KAAKu+G,gBAAe,GACpBv+G,KAAKzV,OAAOotB,QAAQuP,IAAyB9kB,YAAa,oBAAqBze,KAAMujC,GAAuB26F,UAAW7hH,QAM3HwgH,EAAUr+H,UAAUs+F,YAAc,WAC9BzgF,KAAKu+G,gBAAe,GACpBv+G,KAAKzV,OAAOotB,QAAQuP,IAAyB9kB,YAAa,sBAAuBze,KAAMujC,GAAuB26F,UAAW7hH,QAE7HwgH,EAAUr+H,UAAUo8H,eAAiB,SAAUp6H,GAG3C,IAAK,GAFDsd,GACAzG,EAAOgF,KAAKzV,OAAO8T,cACd5a,EAAI,EAAGsB,EAAMiW,EAAK5X,OAAQK,EAAIsB,EAAKtB,IACxCge,EAAKzG,EAAKvX,GAAG6C,cAAc,4CAC3BnC,EAAW6b,KAAKy9B,OAAOh8B,GAAMzB,KAAKg/E,SAASv9E,IAGnD++G,EAAUr+H,UAAU+6F,gBAAkB,SAAUl6F,GAC5C,GAAIM,GAAO0c,KAAKzV,MAChB,QAAQvH,EAAE6L,QACN,IAAK,gBACDmR,KAAKugF,WACL,MACJ,KAAK,cACDvgF,KAAKygF,aACL,MACJ,KAAK,aACL,IAAK,eACD,GAAIriD,GAAW96C,EAAKi6D,eAAiBj6D,EAAK44B,0BAC1C,IAAIkiB,EAASh7C,OAAQ,CACjB,GACIqe,GADUne,EAAK+a,cAAc+/B,EAASA,EAASh7C,OAAS,IAC3CkD,cAAc,2CAClB,kBAAbtD,EAAE6L,OAA4BmR,KAAKy9B,OAAOh8B,GAAMzB,KAAKg/E,SAASv9E,GAElE,KACJ,KAAK,QACD,GAAIzB,KAAKzV,OAAOuxB,OACZ,MAEJ,IAAIlxB,GAAUoV,KAAK+zC,MAAM4C,mBACzB,KAAK3zD,EAAEtB,OAAO+I,UAAUC,SAAS,yBAC5B1H,EAAEtB,OAAO+I,UAAUC,SAAS,qBAC7B,KAEJsV,MAAK0gH,qBAAqB91H,KAItC41H,EAAUr+H,UAAUs+H,eAAiB,WAGjC,IAAK,GAFDqB,GAAa9hH,KAAKzV,OAAO2R,cAAc2sB,WAAWziC,iBAAiB,kBACnEqzB,EAAUzZ,KAAKzV,OAAOgQ,oBAAoBnX,OACrCK,EAAI,EAAGA,EAAIq+H,EAAW1+H,OAAQK,IACnCq+H,EAAWr+H,GAAG6C,cAAc,iBAAiBvE,aAAa,UAAW03B,EAAU,KAOvF+mG,EAAUr+H,UAAUguB,cAAgB,WAChC,MAAO,aAEJqwG,KClTPuB,GAAyB,WACzB,QAASA,GAAQx3H,EAAQyE,GACrBgR,KAAKgiH,mBACLhiH,KAAKrb,OAAS,MAAO,OAAQ,SAAU,SAAU,SAAU,QAAS,SAChE,gBAAiB,YAAa,cAAe,YAAa,cAC9Dqb,KAAKzV,OAASA,EACdyV,KAAKiiH,OAAS13H,EAAOK,QAAQJ,GAC7BwV,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBAkeT,MAheA+gF,GAAQ5/H,UAAUohB,OAAS,WACvBvD,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,eAG3C,KAAK,GAAIS,GAAK,EAAGqyH,GAFD,MAAO,OAAQ,SAAU,SAAU,SAAU,QACzD,YAAa,cAAe,aAAc,aACNryH,EAAKqyH,EAAW9+H,OAAQyM,IAAM,CAClE,GAAIurB,GAAO8mG,EAAWryH,GAClBsyH,EAAU/mG,EAAKjzB,cACfi6H,EAAaD,EAAQ,GAAGE,cAAgBF,EAAQ92H,MAAM,EAC1D2U,MAAKgiH,gBAAgB5mG,IACjB5wB,GAAIwV,KAAKiiH,OAAS,IAAME,EAASG,WAAY,KAAOH,EACpDt3G,KAAM7K,KAAKzV,OAAOsW,iBAAmB,GAAKb,KAAK8gC,KAAKvE,YAAY6lF,GAAaG,YAAaviH,KAAK8gC,KAAKvE,YAAY6lF,IAGxHpiH,KAAKgiH,gBAAgB7pD,QACjB3tE,GAAIwV,KAAKiiH,OAAS,UAClBM,YAAaviH,KAAK8gC,KAAKvE,YAAY,UAAWimF,MAAO,QAASvlG,SAAU,mBACxEt5B,KAAM,SAEVqc,KAAKgiH,gBAAgBS,eACjBj4H,GAAIwV,KAAKiiH,OAAS,iBAAuBhlG,SAAU,4BAA6BylG,WAAY,sBAC5F73G,KAAM7K,KAAK8gC,KAAKvE,YAAY,iBAAkBgmF,YAAaviH,KAAK8gC,KAAKvE,YAAY,iBAAkBimF,MAAO,SAEzE,aAAjCxiH,KAAKzV,OAAO2qC,mBACRl1B,KAAKzV,OAAOue,gBAAsD,cAApC9I,KAAKzV,OAAOoqB,eAAehxB,OACzDqc,KAAKgiH,gBAAgBW,kBACjBn4H,GAAIwV,KAAKiiH,OAAS,oBAA0BhlG,SAAU,gCACtDylG,WAAY,mBAAyBH,YAAaviH,KAAK8gC,KAAKvE,YAAY,kBAG5Ev8B,KAAKzV,OAAOqe,eACZ5I,KAAKgiH,gBAAgBY,gBACjBp4H,GAAIwV,KAAKiiH,OAAS,kBAAwBhlG,SAAU,gCACpDylG,WAAY,iBAAuBH,YAAaviH,KAAK8gC,KAAKvE,YAAY,WAI9Ev8B,KAAKzV,OAAOsW,kBAAoBb,KAAKzV,OAAO4vC,QAAQzyC,QAAQ,WAAa,IACzEsY,KAAKgiH,gBAAgBa,gBACjBr4H,GAAIwV,KAAKiiH,OAAS,kBAAwBhlG,SAAU,gCACpDylG,WAAY,mBAGpB1iH,KAAK8iH,iBAOTf,EAAQ5/H,UAAUivF,WAAa,WAC3B,MAAOpxE,MAAKm6B,QAAQvvC,SAOxBm3H,EAAQ5/H,UAAU0rB,QAAU,WACpB7N,KAAKm6B,UAAYn6B,KAAKm6B,QAAQjqB,cACzBlQ,KAAKm6B,QAAQvvC,SAOdoV,KAAKm6B,QAAQtiB,IAAI,gCAAiC7X,KAAK+iH,wBACvD/iH,KAAKm6B,QAAQtsB,YAPb7N,KAAKzV,OAAOghC,iBAAiB,oBACzBvrB,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOihC,mBAOpBxrB,KAAKu+C,cACLv+C,KAAKiuC,sBACLpsD,SAAOme,KAAKpV,WAGpBm3H,EAAQ5/H,UAAU6gI,iBAAmB,WACjChjH,KAAKijH,cAAgB10H,SAAO,IAAMyR,KAAKiiH,OAAS,aAAcjiH,KAAKpV,SACnEoV,KAAKs+C,YACLt+C,KAAKkjH,sBACDljH,KAAKzV,OAAOupB,gBACZ9T,KAAKmjH,mBAGbpB,EAAQ5/H,UAAUihI,eAAiB,SAAUC,GACrCrjH,KAAKpV,QAAQtE,cAAc,wBACtB0Z,KAAKzV,OAAOsW,kBAAoBwiH,EACjCrjH,KAAKpV,QAAQtE,cAAc,qBAAqBC,UAAY,oFACzCyZ,KAAKiiH,OAAS,4FACVjiH,KAAK8gC,KAAKvE,YAAY,UAAY,oCACvCv8B,KAAKiiH,OAAS,4GACHjiH,KAAK8gC,KAAKvE,YAAY,UAAY,4DAI/Dv8B,KAAKpV,QAAQtE,cAAc,qBAAqBC,UAAY,aAAeyZ,KAAKiiH,OAC1E,4GACuBjiH,KAAK8gC,KAAKvE,YAAY,UAAY,6DAIvEv8B,KAAKgjH,oBAETjB,EAAQ5/H,UAAU2gI,cAAgB,WAC9B,GAAIn+H,GAAQqb,KAAKsjH,0BAA0BtjH,KAAKujH,WAChDvjH,MAAKm6B,QAAU,GAAIqpF,YACf7+H,MAAOA,EACP8+H,QAASzjH,KAAK0jH,oBAAoBrwG,KAAKrT,MACvCu3B,kBAAmBv3B,KAAKzV,OAAOgtC,kBAC/Br1B,UAAWlC,KAAKzV,OAAO2X,UACvBkqC,QAASpsC,KAAKojH,eAAe/vG,KAAKrT,QAEtCA,KAAKm6B,QAAQ1uB,QAAUzL,KAAKzV,OAAOkhB,QACnCzL,KAAKm6B,QAAQ/pB,GAAG,gCAAiCpQ,KAAK+iH,uBAAwB/iH,KAE9EA,MAAKm6B,QAAwB,kBAAI,CACjC,IAAIwpF,GAAU,kBAWd,IATI3jH,KAAKzV,OAAOo5H,KACZ3jH,KAAKm6B,QAAoB,sBACzBn6B,KAAKm6B,QAAQwpF,GAAW3jH,KAAKzV,OAAOo5H,IAExC3jH,KAAKpV,QAAUoV,KAAKzV,OAAOkC,cAAc,OAASjC,GAAIwV,KAAKiiH,OAAS,kBAChEjiH,KAAKzV,OAAOsW,mBACZb,KAAKm6B,QAAQypF,aAAe,QAC5B5jH,KAAKpV,QAAQH,UAAUqE,IAAI,kBAE3BkR,KAAKzV,OAAOq4C,gBACZ,GAAKrzC,cAAuD,gBAAjCyQ,MAAKzV,uBAK5B,GAAIgF,aAAY,CACZ,GAAIywC,GAAShgC,KAAKzV,OAAOK,QAAQJ,GAAK,kBAClC4wB,EAAOxvB,EAAeoU,KAAKpV,QAAS3E,EAAiB+Z,KAAKzV,OAAOq4C,oBAAqB5iC,KAAKzV,OAAQ,kBAAmBy1C,IACtH6jF,EAAU7jH,KAAK8jH,QAAQ1oG,EAC3Bpb,MAAKm6B,QAAQx1C,MAAMT,KAAK2/H,GACxB7jH,KAAKm6B,QAAQM,SAASz6B,KAAKpV,SAC3B6iC,uBAAqBztB,KAAKzV,OAAOK,QAAQJ,GAAK,kBAAmB,kBAAmBwV,KAAKzV,YAExF,CACD,GAAIgxC,GAAkBv7B,KAAKzV,OAAOkhB,SAAoD,gBAAjCzL,MAAKzV,uBACtDw5H,EAAK/jH,KAAKzV,OAAOK,QAAQJ,GAAK,iBAC9B+wC,IACAt1C,EAAiB+Z,KAAKzV,OAAOq4C,oBAAqB5iC,KAAKzV,OAAQ,kBAAmBw5H,EAAI,KAAM,KAAM/jH,KAAKpV,SACvGoV,KAAKzV,OAAOihC,mBAGZ5/B,EAAeoU,KAAKpV,QAAS3E,EAAiB+Z,KAAKzV,OAAOq4C,oBAAqB5iC,KAAKzV,OAAQ,wBApBpGyV,MAAKm6B,QAAQM,SAASz6B,KAAKzV,OAAOq4C,iBAClC5iC,KAAKpV,QAAUoV,KAAKm6B,QAAQvvC,YAyBhCoV,MAAKm6B,QAAQM,SAASz6B,KAAKpV,QAE/BoV,MAAKzV,OAAOK,QAAQ2uC,aAAav5B,KAAKpV,QAASoV,KAAKzV,OAAO+Y,qBAE/Dy+G,EAAQ5/H,UAAU4gI,uBAAyB,SAAU7zH,GAC7C8Q,KAAKzV,OAAOkhB,SAAWvc,IACvB8Q,KAAKzV,OAAOy5H,QAAUhkH,KAAKzV,OAAOy5H,QAAQxtH,OAAOtH,GACjD8Q,KAAKzV,OAAOihC,oBAGpBu2F,EAAQ5/H,UAAU8hI,uBAAyB,SAAUC,GACjD,GAAIA,EACAlkH,KAAKojH,gBAAe,GACpBpjH,KAAKmkH,8BAA8Bz0G,0BAAwB00G,UAC3DpkH,KAAKijH,cAAgB10H,SAAO,IAAMyR,KAAKiiH,OAAS,aAAcjiH,KAAKpV,UAC/DX,EAAQE,EAAa6V,KAAKijH,cAAe,oBACvCx4H,UAAUqE,IAAI,sBAChBkR,KAAKzV,OAAOupB,gBACZ9T,KAAKmjH,kBAETnjH,KAAKqkH,aAAajmE,aAAc18D,OAAQse,KAAKijH,gBAC7CjjH,KAAKijH,cAAclvE,YAElB,CACD,GAAI9pD,GAAQE,EAAa6V,KAAKijH,cAAe,kBAC7Ch5H,GAAMQ,UAAU5I,OAAO,sBACvBme,KAAKmkH,8BAA8Bz0G,0BAAwBy2D,WAC3DnmE,KAAKojH,gBAAe,GACpBpjH,KAAKu+C,cACLv+C,KAAKijH,kBAAgBl2H,KAG7Bg1H,EAAQ5/H,UAAUmhI,0BAA4B,SAAU3+H,GACpD,GAAIqb,KAAKzV,OAAOsW,iBACZ,IAAK,GAAIpd,GAAI,EAAGA,EAAIkB,EAAMvB,OAAQK,IAC9BkB,EAAMlB,GAAGkF,QAAWhE,EAAMlB,GAAG+G,KAAOwV,KAAKzV,OAAOK,QAAQJ,GAAK,QACtD7F,EAAMlB,GAAG+G,KAAOwV,KAAKzV,OAAOK,QAAQJ,GAAK,WAAa7F,EAAMlB,GAAG+G,KAAOwV,KAAKzV,OAAOK,QAAQJ,GAAK,mBAC/F7F,EAAMlB,GAAG+G,KAAOwV,KAAKzV,OAAOK,QAAQJ,GAAK,mBAGxD,OAAO7F,IAEXo9H,EAAQ5/H,UAAUgiI,8BAAgC,SAAUt1H,GACxD,GAAIlK,GAAQqb,KAAKm6B,QAAQx1C,MACrB2/H,GAAW,MAAO,SAAU,iBAAkB,mBAC9CtkH,MAAKzV,OAAO2xB,wBAAwB94B,SACpCkhI,EAAQpgI,KAAK,OAAQ,UACgB,aAAjC8b,KAAKzV,OAAO2qC,kBACZovF,EAAQpgI,KAAK,SAAU,UAK/B,KAAK,GAFDowB,IAAU,iBAAkB,UAC5B81B,EAAUv7C,IAAW6gB,0BAAwBy2D,UAAYm+C,EAAUhwG,EAC9D7wB,EAAI,EAAGA,EAAIkB,EAAMvB,OAAQK,IAAK,CACnC,GAAIyuF,GAAQvtF,EAAMlB,GAAG+G,GAAGkD,MAAM,KAC1BoG,EAAMkM,KAAKpV,QAAQtE,cAAc,IAAM3B,EAAMlB,GAAG+G,GACpD,IAAIsJ,EAAK,CACL,GAAIigH,GAAW5pH,EAAa2J,EAAK,iBAC7Bs2C,GAAQ1iD,QAAQwqF,EAAM,KAAO,EAC7B6hC,EAAStpH,UAAU5I,OAAO,YAG1BkyH,EAAStpH,UAAUqE,IAAI,aAInC,MAAOnK,IAEXo9H,EAAQ5/H,UAAU+gI,oBAAsB,SAAUh0H,GAC9C,GAAI5L,GAAO0c,KAAKzV,OACZ6uF,KACAmrC,KACAp7G,EAAO7lB,EAAKkL,aACZg2H,EAAUlhI,EAAK8lC,iBAAmB9lC,EAAK8lC,gBAAgBhmC,MAC3D+lB,GAAKu8D,YAAc0T,EAAYl1F,KAAK8b,KAAKiiH,OAAS,QAAUsC,EAAargI,KAAK8b,KAAKiiH,OAAS,QAC5F94G,EAAKhb,cAAgBq2H,EAAUprC,EAAYl1F,KAAK8b,KAAKiiH,OAAS,SAAWsC,EAAargI,KAAK8b,KAAKiiH,OAAS,SACzG94G,EAAKw8D,eAAiB6+C,EAAUprC,EAAYl1F,KAAK8b,KAAKiiH,OAAS,WAAasC,EAAargI,KAAK8b,KAAKiiH,OAAS,WAC7E,UAA3B3+H,EAAKkL,aAAaC,KACdnL,EAAKsH,QAAQxE,iBAAiB,gBAAgBhD,SAAW+lB,EAAKu8D,aAAev8D,EAAKhb,eAClFirF,EAAYl1F,KAAK8b,KAAKiiH,OAAS,WAC/B7oC,EAAYl1F,KAAK8b,KAAKiiH,OAAS,aAG/BsC,EAAargI,KAAK8b,KAAKiiH,OAAS,WAChCsC,EAAargI,KAAK8b,KAAKiiH,OAAS,YAIhC3+H,EAAKw4B,SAAW3S,EAAKu8D,aAAev8D,EAAKhb,eACzCirF,GAAep5E,KAAKiiH,OAAS,UAAWjiH,KAAKiiH,OAAS,WACtDsC,GAAgBvkH,KAAKiiH,OAAS,OAAQjiH,KAAKiiH,OAAS,QAASjiH,KAAKiiH,OAAS,aAG3EsC,EAAargI,KAAK8b,KAAKiiH,OAAS,WAChCsC,EAAargI,KAAK8b,KAAKiiH,OAAS,YAGxCjiH,KAAKo5E,YAAYA,GAAa,GAC9Bp5E,KAAKo5E,YAAYmrC,GAAc,IAEnCxC,EAAQ5/H,UAAUohI,SAAW,WACzB,GAAI5+H,MACAy1C,EAAep6B,KAAKzV,OAAO4vC,WAC/B,IAAqC,gBAAzBn6B,MAAKzV,eACb,QAEJ,KAAK,GAAIsF,GAAK,EAAG40H,EAAiBrqF,EAAcvqC,EAAK40H,EAAerhI,OAAQyM,IAAM,CAC9E,GAAIurB,GAAOqpG,EAAe50H,EAC1B,cAAeurB,IACX,IAAK,SACDz2B,EAAMT,KAAK8b,KAAK0kH,cAAc1kH,KAAKrb,MAAMy2B,IACzC,MACJ,KAAK,SACDz2B,EAAMT,KAAK8b,KAAK0kH,cAActpG,GAC9B,MACJ,SACIz2B,EAAMT,KAAK8b,KAAK8jH,QAAQ1oG,KAcpC,MAXqC,aAAjCpb,KAAKzV,OAAO2qC,mBACRl1B,KAAKzV,OAAOue,gBAAsD,cAApC9I,KAAKzV,OAAOoqB,eAAehxB,MACzDgB,EAAMT,KAAK8b,KAAK0kH,cAAc,qBAE9B1kH,KAAKzV,OAAOqe,cACZjkB,EAAMT,KAAK8b,KAAK0kH,cAAc,oBAGlC1kH,KAAKzV,OAAOsW,kBACZlc,EAAMT,KAAK8b,KAAK0kH,cAAc,mBAE3B//H,GAEXo9H,EAAQ5/H,UAAU2hI,QAAU,SAAUa,GAClC,GAAIvpG,GAAOpb,KAAKgiH,gBAAgB2C,EAAW95G,KAC3C,OAAOuQ,GAAOn0B,SAAOm0B,EAAMA,EAAMupG,GAAcA,GAEnD5C,EAAQ5/H,UAAUuiI,cAAgB,SAAUE,GACxC,MAAO5kH,MAAKgiH,gBAAgB4C,KAAe/5G,KAAM+5G,EAAUp6H,GAAIwV,KAAKiiH,OAAS,IAAM2C,IASvF7C,EAAQ5/H,UAAUi3F,YAAc,SAAUz0F,EAAOw0F,GAC7C,IAAK,GAAItpF,GAAK,EAAGg1H,EAAUlgI,EAAOkL,EAAKg1H,EAAQzhI,OAAQyM,IAAM,CACzD,GAAIurB,GAAOypG,EAAQh1H,GACfjF,EAAU2D,SAAO,IAAM6sB,EAAMpb,KAAKpV,QAClCA,IACAoV,KAAKm6B,QAAQi/C,YAAYxuF,EAAQ1B,cAAeiwF,KAI5D4oC,EAAQ5/H,UAAUuhI,oBAAsB,SAAUx0H,GAC9C,GAAIwZ,GAAQ1I,KACR1c,EAAO0c,KAAKzV,OACZu6H,EAAM9kH,KAAKiiH,MACfh7H,UAAOiI,GAAQ+3B,QAAQ,GACvB,IAAI89F,IAAWx1H,cAAcyQ,KAAKzV,OAAO+iC,cAAgBp+B,GAASksB,KAAMlsB,EAAKksB,KAAM6L,OAAQ/3B,EAAK+3B,OAAQpsB,KAAM3L,EAAK2L,MAC/G+7G,EAAgB1nH,EAAK0nH,aACzBtzH,GAAKq0B,QhE/Qa,egE+QgBotG,EAAS,SAAUC,GAEjD,GADAA,EAAYpO,cAAgBoO,EAAYpO,cAAgBoO,EAAYpO,cAAgBA,GAC/EoO,EAAY/9F,OACb,QAASzkC,oBAAkBwiI,EAAY5pG,OAAS4pG,EAAY5pG,KAAK5wB,IAC7D,IAAKs6H,GAAM,SACPxhI,EAAKm1F,OACL,MACJ,KAAKqsC,GAAM,QACPxhI,EAAKs1F,WACL,MACJ,KAAKksC,GAAM,UACPxhI,EAAKm0B,SACL,MACJ,KAAKqtG,GAAM,UACPxhI,EAAKu1F,WACL,MACJ,KAAKisC,GAAM,OACPxhI,EAAKw1F,WACL,MACJ,KAAKgsC,GAAM,UACPxhI,EAAKo1F,cACL,MACJ,KAAKosC,GAAM,UACHE,EAAYpO,cAAcl1H,OAAO8I,KAAOs6H,EAAM,iBAAmBp8G,EAAMu6G,cACvEv6G,EAAM4L,UAEDhxB,EAAKud,kBAAqB6H,EAAMu6G,gBACjC+B,EAAYpO,cAAcl1H,OAAO+I,UAAUC,SAAS,qBACjDs6H,EAAYpO,cAAcl1H,OAAO8I,KAAOs6H,EAAM,iBACrDp8G,EAAMu7G,wBAAuB,EAEjC,MACJ,KAAKa,GAAM,iBACP,GAAIG,GAAav8G,EAAMne,OAAOK,QAAQtE,cAAc,YAChDkF,EAAIy5H,EAAW97H,wBAAwBO,IACvCK,EAAIk7H,EAAW97H,wBAAwBQ,KACvC6tH,EAAYwN,EAAYpO,cAAcl1H,MAC1C8J,GAAIy5H,EAAW97H,wBAAwBO,IAAMu7H,EAAWp2D,UACxDvrE,EAAKu3F,oBAAoB9wF,EAAGyB,EAAGgsH,EAC/B,MACJ,KAAK,OACGjoH,cACAjM,EAAKg6E,MAET,MACJ,KAAK,aACL,IAAK,aACG/tE,cACAjM,EAAKg6E,MAAK,EAEd,MACJ,KAAKwnD,GAAM,oBACPxhI,EAAKs3C,4BACL,MACJ,KAAKkqF,GAAM,kBACPxhI,EAAKq3C,0BACL,MACJ,KAAKmqF,GAAM,kBACPp8G,EAAMu7G,wBAAuB,OAMjDlC,EAAQ5/H,UAAUmrB,aAAe,SAAUtqB,GACtB,SAAbA,EAAEwuC,QACFxxB,KAAKkjH,uBAGbnB,EAAQ5/H,UAAUovE,kBAAoB,SAAUvuE,GACxCA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAoBnQ,KAAKzV,OAAO4vC,UAGlDn6B,KAAKpV,SACL/I,SAAOme,KAAKpV,SAEhBoV,KAAKuD,WAETw+G,EAAQ5/H,UAAU8vE,aAAe,SAAUjvE,GACrB,KAAdA,EAAEgrD,SACFhuC,KAAKsU,UAGbytG,EAAQ5/H,UAAUmyB,OAAS,WACvBtU,KAAKzV,OAAO+pB,OAAOtU,KAAKijH,cAAcrhI,QAE1CmgI,EAAQ5/H,UAAUghI,gBAAkB,WAC5BnjH,KAAKijH,gBACLjjH,KAAKijH,cAAcrhI,MAAQoe,KAAKzV,OAAOupB,eAAeliB,MAG9DmwH,EAAQ5/H,UAAUm8D,UAAY,WACtBt+C,KAAKijH,gBACLjjH,KAAKqkH,aAAe,GAAInmE,IAAUl+C,KAAKijH,eACvCr5E,eAAa96C,IAAIkR,KAAKijH,cAAe,QAASjjH,KAAKiyD,aAAcjyD,MACjEA,KAAKqkH,aAAa/lE,cAG1ByjE,EAAQ5/H,UAAUo8D,YAAc,WACxBv+C,KAAKijH,gBACLr5E,eAAa/nD,OAAOme,KAAKijH,cAAe,QAASjjH,KAAKiyD,cACtDjyD,KAAKqkH,aAAa9lE,gBAG1BwjE,EAAQ5/H,UAAU+iI,gBAAkB,WAC5BllH,KAAKpV,SACL/I,SAAOme,KAAKpV,SAEhBoV,KAAKuD,UAETw+G,EAAQ5/H,UAAU6+C,iBAAmB,WAC7BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GhEwDa,wBgExDkBpQ,KAAKklH,gBAAiBllH,MACjEA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKuD,OAAQvD,MAC/CA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAKuxD,kBAAmBvxD,MACxDA,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKmjH,gBAAgB9vG,KAAKrT,OACrEA,KAAKzV,OAAO6lB,GAAG61B,GAAqBjmC,KAAKkjH,oBAAqBljH,MAC9DA,KAAKzV,OAAO6lB,GAAGi1B,GAAuBrlC,KAAKkjH,oBAAqBljH,MAChEA,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKsN,aAActN,MAC9DA,KAAKzV,OAAO6lB,GAAGyW,GAAkB7mB,KAAKkjH,oBAAqBljH,MAC3DA,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKmlH,uBAAwBnlH,MAC1DA,KAAKzV,OAAO6lB,GhEqDO,kBgErDkBpQ,KAAKklH,gBAAiBllH,MAC3DA,KAAKolH,oBAAsBplH,KAAKqlH,YAAYhyG,KAAKrT,MACjDA,KAAKslH,sBAAwBtlH,KAAKqlH,YAAYhyG,KAAKrT,MACnDA,KAAKzV,OAAOy2C,iBhEvbK,cgEubgChhC,KAAKolH,qBACtDplH,KAAKzV,OAAOy2C,iBhEpbO,gBgEobgChhC,KAAKslH,yBAE5DvD,EAAQ5/H,UAAU8rD,oBAAsB,WAChCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IhEqCa,wBgErCmB7X,KAAKklH,iBACjDllH,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKuD,QACxCvD,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAKuxD,mBACtCvxD,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKmjH,iBACjDnjH,KAAKzV,OAAOstB,IAAIouB,GAAqBjmC,KAAKkjH,qBAC1CljH,KAAKzV,OAAOstB,IAAIwtB,GAAuBrlC,KAAKkjH,qBAC5CljH,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKsN,cACjDtN,KAAKzV,OAAOstB,IAAIgP,GAAkB7mB,KAAKkjH,qBACvCljH,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKmlH,wBACnCnlH,KAAKzV,OAAOstB,IhEkCO,kBgElCmB7X,KAAKklH,iBAC3CllH,KAAKzV,OAAO0jD,oBhExcK,cgEwcmCjuC,KAAKolH,qBACzDplH,KAAKzV,OAAO0jD,oBhErcO,gBgEqcmCjuC,KAAKslH,yBAE/DvD,EAAQ5/H,UAAUgjI,uBAAyB,SAAUniI,GACjD,GAAItB,GAASsB,EAAEtB,OACX0iI,EAAW1iI,EAAO+I,UAAUC,SAAS,kBAAoBhJ,EAAO+I,UAAUC,SAAS,mBACnFsV,MAAKzV,OAAOsW,mBAAqBujH,GAAYpkH,KAAKijH,gBAC9C94H,EAAanH,EAAEtB,OAAQ,kBAC3Bse,KAAKikH,wBAAuB,IAGpClC,EAAQ5/H,UAAUkjI,YAAc,WACxBrlH,KAAKzV,OAAOsW,kBACZb,KAAKmkH,8BAA8Bz0G,0BAAwBy2D,YAMnE47C,EAAQ5/H,UAAUguB,cAAgB,WAC9B,MAAO,WAEJ4xG,KCrfPviG,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAgBnFylG,GAAgC,SAAUvjG,GAE1C,QAASujG,GAAeC,EAAYx2H,GAChC,GAAI0Z,GAAQsZ,EAAO12B,KAAK0U,KAAMwlH,EAAYx2H,IAAmBgR,IAM7D,OALA0I,GAAMrc,cACNqc,EAAMne,OAASi7H,EACf98G,EAAMlG,QAAUxT,EAChB0Z,EAAM+8G,eAAiB,GAAIxlG,IAAsBvX,EAAMne,QACvDme,EAAMs4B,mBACCt4B,EAuTX,MA/TA8W,IAAU+lG,EAAgBvjG,GAa1BujG,EAAepjI,UAAU+lC,YAAc,WACnC,GAAIh3B,GAAM8O,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,iBACpDw/B,EAAWtoB,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,qBACzDkoD,EAAiB1oB,CACrB,IAAItoB,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAI6vH,GAAO1lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,sDACrD68H,EAAO3lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,2BACrD88H,EAAQ5lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,wDACtDkX,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,+BAC9C3H,EAASx8B,YAAY45H,GACrB1lH,KAAK6lH,cAAgBH,GAEzBp9F,EAASx8B,YAAY65H,GACrB3lH,KAAKgxC,eAAiB20E,EACtB30E,EAAiB20E,EACb3lH,KAAKzV,OAAOsS,+BACZyrB,EAASx8B,YAAY85H,GACrB5lH,KAAK8lH,mBAAqBF,GAG9BjrH,UAAQ44C,WACRvC,EAAe3nD,MAAMo9F,UAAY,UAErCv1F,EAAIpF,YAAYw8B,GAChBtoB,KAAKqoB,SAASn3B,GACgB,MAA1B8O,KAAKzV,OAAO+pF,WACZt0E,KAAKzV,OAAOK,QAAQ2uC,aAAaroC,EAAK8O,KAAKzV,OAAO+pF,YAGlDt0E,KAAKzV,OAAOK,QAAQkB,YAAYoF,IAMxCq0H,EAAepjI,UAAUomC,YAAc,WACnC,GAAIx0B,GAAUiM,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,4BAExDhjC,EADW+S,KAAK2oB,mBAAmB,iBAClBriC,cAAc,YAC/By/H,EAAQ/lH,KAAKzV,OAAOkC,cAAc,QAEtC,IADAQ,EAAMnB,YAAYi6H,GACd/lH,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAI2V,GAAcve,EAAMiH,WAAU,GAC9B8xH,EAAU/4H,EAAMiH,WAAU,EAK9B,IAJIH,IACAiM,KAAK6lH,cAAc/5H,YAAY0f,GAC/BxL,KAAKwL,YAAcA,GAEnBxL,KAAKzV,OAAOsS,6BAA8B,CAC1Chb,SAAOmkI,EAAQ1/H,cAAc,YAC7B,IACI2/H,GADMjmH,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,0BACtCA,cAAc,YAAY4N,WAAU,EACrD8xH,GAAQzsF,aAAa0sF,EAAOD,EAAQ1/H,cAAc,UAClD0Z,KAAK8lH,mBAAmBh6H,YAAYk6H,GACpChmH,KAAKgmH,QAAUA,EAEnBhmH,KAAKgxC,eAAellD,YAAYmB,GAChCpL,SAAOoL,EAAM3G,cAAc,YAC3B,IAAI8f,GAAapG,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBA,cAAc,YAAa4N,WAAU,EACvHjH,GAAMssC,aAAanzB,EAAUnZ,EAAM3G,cAAc,UACjD0Z,KAAKmG,YAAYC,GAErBpG,KAAK4oB,SAAS37B,IAElBs4H,EAAepjI,UAAU+jI,qBAAuB,SAAUljI,EAAGiK,EAAOk5H,EAAQC,GACxE,GAAIv1H,GAAQmP,KAAKzV,OAAOyH,qBAAsB5F,OAAQ4T,KAAKzV,OAAOyH,WAAagO,KAAKzV,OAAO6+B,gBACvFi9F,EAAYrmH,KAAKylH,eAAez0G,UAChCgO,EAAUx8B,oBAAkB2jI,GAAUnmH,KAAKylH,eAAevvH,aAC1D8J,KAAKylH,eAAevvH,WAAWiwH,EAAQC,GACvCprH,EAAOxY,oBAAkB2jI,GAAUnmH,KAAKylH,eAAe3iH,aAAajS,EAAO7N,GAAKgd,KAAK3T,YACrF2T,KAAKylH,eAAe3iH,aAAajS,EAAO7N,GAAKgd,KAAK3T,WAAY85H,EAAQC,GACtEE,EAAWngI,SAASojC,yBACpBg9F,EAAc,GAAI1jH,IAAY7C,KAAKwC,QAAS,KAAMxC,KAAKzV,OAC3Dg8H,GAAY37H,QAAUoV,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,gBACnE,KAAK,GAAI09H,GAAO,EAAGzhI,EAAMshI,EAAUjjI,OAAQojI,EAAOzhI,EAAKyhI,IAAQ,CAC3D,GAAIphI,GAAM4V,EAAKwrH,EACf,IAAKphI,EAAL,CAGA,GAAIoa,GAAK+mH,EAAYhjH,OAAOne,EAAK45B,EACjCsnG,GAASx6H,YAAY0T,IAEzBvS,EAAM84H,MAAMj6H,YAAYw6H,GACxBtmH,KAAK3T,WAAc7J,oBAAkBQ,GAASgd,KAAK3T,WAATrJ,GAE9CuiI,EAAepjI,UAAUu5B,QAAU,SAAU14B,GACzC,GAAI+Q,GAAUiM,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,4BACxDtzB,EAAUqD,KAAKzV,OAAOqS,yBACtB3S,EAAQ+V,KAAKzV,OAAOsS,4BAYxB,IAXImD,KAAKzV,OAAOsL,iBACZhU,SAAOme,KAAK2mB,YACZ3mB,KAAKkoB,cACLloB,KAAKuoB,cACDx0B,IACAiM,KAAKwL,YAAYu6G,MAAMx/H,UAAY,GACnCyZ,KAAKkmH,qBAAqBljI,EAAGgd,KAAKwL,YAAa,EAAGzX,KAG1DiM,KAAK6oB,WAAWk9F,MAAMx/H,UAAY,GAClCyZ,KAAKkmH,qBAAqBljI,EAAGgd,KAAK6oB,WAAY90B,EAAS9J,EAAQ8J,EAAU4I,MAAU5P,IAC/EiT,KAAKzV,OAAOsS,6BAA8B,CAC1CmD,KAAKgmH,QAAQD,MAAMx/H,UAAY,GAC/ByZ,KAAKkmH,qBAAqBljI,EAAGgd,KAAKgmH,QAASjyH,EAAU4I,EAAS5I,EAAU4I,EAAU1S,EAClF,IAAIw8H,MAAqBp7H,MAAMC,KAAK0U,KAAK6oB,WAAWziC,iBAAiB,sBACrE,IAAIqgI,EAAgBrjI,OAChB,IAAK,GAAIK,GAAI,EAAGA,EAAIgjI,EAAgBrjI,OAAQK,IACxCgjI,EAAgBhjI,GAAG4F,MAAMq9H,YAAc,MAKnD,GAAI1mH,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAI8wH,MAAgBt7H,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQtE,cAAc,2BAC5DF,iBAAiB,kBAClBwgI,MAAY,EAChB,IAAI7yH,EAAS,CACT6yH,KAAev7H,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQtE,cAAc,gCACvDF,iBAAiB,kBACtB4Z,KAAKuuG,cAAcqY,EAAWD,EAC9B,IAAIE,GAAY7mH,KAAK6lH,aAChBgB,GAAUp9H,eACXo9H,EAAUx9H,MAAMiE,OAAS0S,KAAK6oB,WAAWp/B,aAAe,MAGhE,GAAIQ,EAAO,CACP,GAAIo1F,MAAWh0F,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQtE,cAAc,iCACvDF,iBAAiB,iBACtB4Z,MAAKuuG,cAAclvB,EAAOsnC,GACtBC,GACA5mH,KAAKuuG,cAAclvB,EAAOunC,EAE9B,IAAIhB,GAAQ5lH,KAAKgmH,OACZJ,GAAMn8H,eACPm8H,EAAMv8H,MAAMiE,OAAS0S,KAAK6oB,WAAWp/B,aAAe,MAGxDuW,KAAKzV,OAAOse,eACZ7I,KAAK8mH,uBAAuB9mH,KAAK6oB,YAGzC7oB,KAAK+mH,YAETxB,EAAepjI,UAAUosH,cAAgB,SAAUqY,EAAWD,GAC1D,IAAK,GAAIljI,GAAI,EAAGA,EAAImjI,EAAUxjI,OAAQK,IAAK,CACvC,GAAIujI,GAAeJ,EAAUnjI,GAAG0F,wBAAwBmE,OACpD25H,EAAgBN,EAAWljI,GAAG0F,wBAAwBmE,MACtD05H,GAAeC,GACfL,EAAUnjI,GAAGgH,UAAU5I,OAAO,UAC9B+kI,EAAUnjI,GAAG4F,MAAMiE,OAAS25H,EAAgB,MAEvCD,EAAeC,IACpBN,EAAWljI,GAAGgH,UAAU5I,OAAO,UAC/B8kI,EAAWljI,GAAG4F,MAAMiE,OAAS05H,EAAe,QAIxDzB,EAAepjI,UAAU+kI,WAAa,WAElC,GAAIC,GACAC,EAAaD,EAAannH,KAAKzV,OAAOK,QAAQtE,cAAc,iBAAiBA,cAAc,YAAY4N,WAAU,EACjH8L,MAAKzV,OAAOuL,qBACEkK,KAAKzV,OAAO0c,4BAA8BjH,KAAKzV,OAAO2R,cAAcuJ,UAE9E0hH,EAAannH,KAAKzV,OAAOwb,0BAA0Bzf,cAAc,YAAY4N,WAAU,IAGvFizH,EAAatzH,GAAcuzH,EAAYpnH,KAAKzV,OAAOuL,mBAAoBkK,KAAKzV,QAC5EyV,KAAKwL,YAAYolB,aAAaw2F,EAAYpnH,KAAKwL,YAAYllB,cAAc,eAGjF0Z,KAAK6oB,WAAW+H,aAAau2F,EAAYnnH,KAAKmpB,eAC9CnpB,KAAKmG,YAAYghH,IAErB5B,EAAepjI,UAAUklI,cAAgB,SAAUn4H,GAC/C8Q,KAAKsnH,gBAAgBp4H,EAAKpH,OAAOuB,MAAMX,MAAQsnD,aAAW9gD,EAAKxG,OAC3DsX,KAAKzV,OAAOse,eAAiC,WAAhB3Z,EAAKsiC,QAClCxxB,KAAK8mH,uBAAuB9mH,KAAK6oB,aAGzC08F,EAAepjI,UAAU4kI,SAAW,SAAU/jI,OAChC,KAANA,IAAgBA,GAChB2G,KAAMqW,KAAKzV,OAAOsL,eAAiBmK,KAAKzV,OAAOmO,aAAapS,cAAc,qBAAqB2xC,WAC3Fj4B,KAAKzV,OAAOmO,aAAa4gC,WAAWrB,aAE5Cj4B,KAAK6oB,WAAW3/B,cAAc+uC,WAAaj1C,EAAE2G,MAEjD47H,EAAepjI,UAAUmlI,gBAAkB,SAAUx/H,GACjD,GAAIy/H,GAAOvnH,KAAKzV,OAAOuL,kBAEvB,OADAyxH,GAAOA,GAAQvnH,KAAKzV,OAAOyJ,gBAAkBuzH,EAAO,EAAIA,EACpDA,GAAQA,EAAOz/H,EACRkY,KAAKwL,YAAYllB,cAAc,YAAYuF,SAAS/D,GAExDkY,KAAKmpB,cAAct9B,SAAS/D,EAAQy/H,IAE/ChC,EAAepjI,UAAU2rB,wBAA0B,WAC/C9N,KAAK0b,WAET6pG,EAAepjI,UAAU6+C,iBAAmB,WACxChhC,KAAKzV,OAAO6lB,GAAG7C,GAAiBvN,KAAKknH,WAAYlnH,MACjDA,KAAKzV,OAAO6lB,GjEnBY,uBiEmBWpQ,KAAKqnH,cAAernH,MACvDA,KAAKzV,OAAO6lB,GjEtBA,SiEsBWpQ,KAAK+mH,SAAU/mH,MACtCA,KAAKzV,OAAO6lB,GAAGtC,GAAyB9N,KAAK8N,wBAAyB9N,MACtEA,KAAKzV,OAAO6lB,GjEtDe,0BiEsDWpQ,KAAKwnH,sBAAuBxnH,OAEtEulH,EAAepjI,UAAU8rD,oBAAsB,WAC3CjuC,KAAKzV,OAAOstB,IAAItK,GAAiBvN,KAAKknH,YACtClnH,KAAKzV,OAAOstB,IjE1BY,uBiE0BY7X,KAAKqnH,eACzCrnH,KAAKzV,OAAOstB,IjE7BA,SiE6BY7X,KAAK+mH,UAC7B/mH,KAAKzV,OAAOstB,IAAI/J,GAAyB9N,KAAK8N,yBAC9C9N,KAAKzV,OAAOstB,IjE7De,0BiE6DY7X,KAAKwnH,wBAEhDjC,EAAepjI,UAAU2kI,uBAAyB,SAAUf,GACxD,GAAIlwF,GAAQ71B,KAAKzV,OAAO2+B,gBACpB2M,IAASkwF,IACTA,EAAM18H,MAAMX,MAAQmtC,EAAMxsC,MAAMX,QAGxC68H,EAAepjI,UAAUqlI,sBAAwB,SAAU9H,GACvD,GAAIrzH,GAAa2T,KAAKynH,aAAa/H,EACnC1/G,MAAK0b,QAAQrvB,IAEjBk5H,EAAepjI,UAAUulI,cAAgB,SAAUplI,EAAMqlI,GAErD,IAAK,GADD/1H,GAAMoO,KAAKzV,OAAO6O,0BAA0B,GACvC3V,EAAI,EAAGA,EAAIkkI,EAAGvkI,OAAQK,IAC3B,GAAIkkI,EAAGlkI,GAAGmO,KAAStP,EAAKsP,GACpB,MAAOnO,EAGf,QAAQ,GAEZ8hI,EAAepjI,UAAUslI,aAAe,SAAU/H,GAC9CA,EAAaA,YAAsBtzH,OAAQszH,IAC3C,IAAIr9H,GAAQ2d,KAAKzV,OAAO6O,0BAA0B,GAC9CpH,KACA41H,GAAa,EACbnnD,KAKAr3C,EAAkBppB,KAAKzV,OAAOyH,qBAAsB5F,OACpD4T,KAAKzV,OAAOyH,WAAagO,KAAKzV,OAAOyH,WAAmB,WAAEE,KAAK9O,OAC7D4c,KAAKzV,OAAOyH,WAAmB,WAAEE,KAAO8N,KAAKzV,OAAO8O,uBAI1D,IAHI2G,KAAKzV,OAAOmpD,aACZ+sB,EAAezgE,KAAKzV,OAAOmpD,WAAW3gB,mBAEtCvrC,OAAOC,KAAKg5E,GAAcr9E,OAAQ,CAClC,IAASK,EAAI,EAAGA,EAAI2lC,EAAgBhmC,OAAQK,IACxCmkI,GAAa,EACTnnD,EAA2B,eAAEr9E,QAAU4c,KAAK0nH,cAAct+F,EAAgB3lC,GAAIg9E,EAA2B,iBAAM,IAC/GmnD,GAAa,EACb51H,EAAW9N,KAAKu8E,EAA2B,eAAEzgE,KAAK0nH,cAAct+F,EAAgB3lC,GAAIg9E,EAA2B,mBAE/GA,EAA2B,eAAEr9E,QAAU4c,KAAK0nH,cAAct+F,EAAgB3lC,GAAIg9E,EAA2B,iBAAM,EAC/GmnD,GAAa,EAEPA,GACN51H,EAAW9N,KAAKklC,EAAgB3lC,GAGxC,IAAIg9E,EAAyB,aAAEr9E,OAC3B,IAASK,EAAI,EAAGA,EAAIg9E,EAAyB,aAAEr9E,OAAQK,IACnDuO,EAAW9N,KAAKu8E,EAAyB,aAAEh9E,QAO/CuO,GAFA0tH,EAAWt8H,OACAwC,EAAcwjC,GACPrtB,IAAI,SAAUqf,GAC5B,GACIx5B,GADAimI,EAAQplI,WAASC,UAAUL,EAAO+4B,EAMtC,OAJaskG,GAAW/sH,KAAK,SAAUytH,GAEnC,MADAx+H,GAAQw+H,EACDyH,IAAUplI,WAASC,UAAUL,EAAO+9H,KAE/Bx+H,EAAQw5B,IAIfgO,CAGrB,IAAIi3F,GAAQX,CACPW,GAAM18H,MAAuB,WAAf08H,EAAM18H,OACrBqO,EAAao3B,EAKjB,KAAK,GAFD0+F,GADAt1G,KAEA8tG,EAAgBtgH,KAAKzV,OAAO8B,WACvB5I,EAAI,EAAGA,EAAI68H,EAAcl9H,OAAQK,IACtC,IAAK,GAAIC,GAAI,EAAGA,EAAI48H,EAAc78H,GAAGN,QAAQC,OAAQM,IAAK,CACtD,GACIC,GAAO28H,EAAc78H,GAAGN,QAAQO,GAAGC,KAAKsM,UAE5C63H,GAAS97H,EAAmBrI,EADrBqO,EACiCsuH,EAAc78H,GAAGN,QAAQO,GAAIsc,KAAKzV,QAC1EioB,EAAU8tG,EAAc78H,GAAGN,QAAQO,GAAGrB,MAAQ,MAAQsB,EAAKwE,eAAiB2/H,EAQpF,OAJIpiI,OAAQsM,EACRxN,MAAOwN,EAAW5O,OAClBiJ,WAAYmmB,IAIb+yG,GACTxgG,IC3VEvF,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAWnFioG,GAAqC,SAAU/lG,GAE/C,QAAS+lG,KACL,GAAIr/G,GAAmB,OAAXsZ,GAAmBA,EAAO3B,MAAMrgB,KAAMlQ,YAAckQ,IAGhE,OAFA0I,GAAM9d,QAAU8d,EAAMne,OACjBkC,cAAc,MAAQ3D,UAAW,gBAAiBwyB,OAASC,KAAM,WAAY0f,SAAU,QACrFvyB,EAyEX,MA9EA8W,IAAUuoG,EAAqB/lG,GAO/B+lG,EAAoB5lI,UAAUqG,SAAW,SAAUnG,EAAOC,EAAMC,GAC5D,GAAIqP,EAGJ,OAFAA,GAAOpP,oBAAkBD,EAAOoB,MACgEpB,EAAO2wB,WAAnG3wB,EAAOF,MAAQ,OAAgC,gBAAhBE,GAAOoB,KAAoBpB,EAAOoB,KAAKwE,cAAgB,IACnF7F,EAAKC,EAAO2wB,YAAc5wB,EAAKC,EAAO2wB,YAAYthB,GAAO,IAEpEm2H,EAAoB5lI,UAAUk5C,SAAW,SAAU30C,EAAM+xB,EAAMn2B,EAAM0E,GACjE,GAAIzE,GAASk2B,EAAKl2B,MAElB,IADAyd,KAAKzV,OAAO6lB,GlEyJc,yBkEzJWpQ,KAAKgoH,qBAAqBthI,EAAM+xB,GAAOzY,QACtEzd,EAAO86B,gBAAkB96B,EAAO29B,qBAAuB39B,EAAO49B,sBAIhE,MAHqC,aAAjCngB,KAAKzV,OAAO2qC,mBACZxuC,EAAK2C,MAAMC,QAAU,SAElB,CAG8B,cAAjC0W,KAAKzV,OAAO2qC,kBACZxuC,EAAK+D,UAAUqE,IAAI,oBAG3B,IAAIm5H,GAAU1lI,EAAOu5E,YAAYrjD,EAAKe,UAClCwmB,EAAS,GACTkoF,EAAUloH,KAAKzV,OAAOiN,iBAAiBlV,EAAKC,EAAO2wB,YAAY7wB,MACnE,KAAKG,oBAAkB0lI,KACnB5lI,EAAKC,EAAO2wB,YAAY7qB,WAAa6/H,EAAQ7/H,WACzC6/H,EAAQx9G,mBAAmB,CAC3B,GAAI4wB,GAAQ4sF,EAAQ/1H,WAAWmH,OAAO,SAAUtW,GAC5C,MAAOA,GAAEklI,EAAQ3/H,mBAAqBjG,EAAKC,EAAO2wB,YAAYthB,MAC/D,EACC0pC,KACAh5C,EAAKC,EAAO2wB,YAAYswB,WAAalI,EAAM4sF,EAAQ5/H,kBAI/D,GAAIiH,aAAY,CAEZywC,EAAShgC,KAAKzV,OAAOK,QAAQJ,GAAKjI,EAAW,KAAI0lI,EAAQlrF,SAK7D,GAHsB/8B,KAAKzV,OAAOkhB,UAAYlpB,EAAO86B,eACd,gBAA3B96B,kBAAsCA,EAAO29B,oBAA8D,gBAAhC39B,yBACjFA,EAAO49B,sBAAgE,gBAAjC59B,yBACvB,CACjB,GAAIgzB,GAAOjzB,EAAKC,EAAO2wB,WACvB,IAAyB,yBAArB+0G,EAAQlrF,UAA4D,wBAArBkrF,EAAQlrF,SAAoC,CAG3FxnB,EAAa,SAAIA,EAAQ,IAE7B0yG,EAAQz0G,GAAG+B,EAAMvV,KAAKzV,OAAQ09H,EAAQlrF,SAAUiD,EAAQ,KAAM,KAAMt5C,GACpEsZ,KAAKzV,OAAOihC,sBAGZ5/B,GAAelF,EAAMuhI,EAAQz0G,GAAGlxB,EAAKC,EAAO2wB,YAAalT,KAAKzV,OAAQ09H,EAAQlrF,SAAUiD,GAE5F,QAAO,GAEX+nF,EAAoB5lI,UAAU6lI,qBAAuB,SAAUthI,EAAM+xB,GACjE,GAAI/P,GAAQ1I,KACRmoH,EAAW1vG,CACf,OAAO,UAAUvpB,GACb,GAAIupB,GAAO0vG,EACP9lI,EAAQo2B,EAAKl2B,OAAO2wB,WAAauF,EAAKl2B,OAAO2wB,WAAa,KAC1Dk1G,EAAY5lI,oBAAkBH,GAE1B,KAFmC6M,EAAKU,MAAM0J,OAAO,SAAUmf,GACnE,MAAOA,GAAKl2B,OAAO2wB,aAAe7wB,IACnC,EACCqE,GAAKwC,eAAiBxC,EAAKwC,cAAcwhC,aAAa,cAAgBx7B,EAAK2wH,SAAWx9H,GACtFA,IAAU+lI,EAAQ7lI,OAAO2wB,YACzBxK,EAAMozB,UAAUp1C,EAAM0hI,EAASl5H,EAAK5M,QAIzCylI,GACTjtF,IvE1FEutF,GAA2B,WAC3B,QAASA,GAAU99H,EAAQiY,GACvBxC,KAAKzV,OAASA,EACdyV,KAAKwC,QAAUA,EACfxC,KAAKghC,mBA0GT,MAxGAqnF,GAAUlmI,UAAUguB,cAAgB,WAChC,MAAO,aAEXk4G,EAAUlmI,UAAUmmI,eAAiB,WAKjC,IAAK,GAJD5/G,GAAQ1I,KACRuoH,EAAUvoH,KAAKwC,QAAQpT,WAAW,uBAClCsT,EAAW,GAAIqlH,IAAoB/nH,KAAKzV,OAAQyV,KAAKwC,SACrD7e,GAAQ2rB,WAASwS,QAASxS,WAASmT,eAAgBnT,WAAS6S,cACvD1+B,EAAI,EAAGA,EAAIE,EAAKP,OAAQK,IAC7B8kI,EAAQxiF,gBAAgBpiD,EAAKF,GAAIif,EAErC1C,MAAKwoH,eAAiB,GAAIjD,IAAevlH,KAAKzV,OAAQyV,KAAKwC,SAC3DxC,KAAKwoH,eAAetgG,cACpBloB,KAAKwoH,eAAejgG,aACpB,IAAIknD,GAAgBzvE,KAAKwoH,eAAe7hG,UACpC3mB,MAAKzV,OAAOK,QAAQwyB,cAAgBpd,KAAKzV,OAAOu6F,UAAU9kF,KAAKzV,OAAO+C,SACnEmiF,GACH1oF,YAAU0oF,IAAiB,oBAE/BzvE,KAAKwC,QAAQ4rC,SAAS,iBAAkBpuC,KAAKwoH,eAC7C,IAAIh1G,GAAK,WACL9K,EAAM+/G,qBACN//G,EAAMne,OAAOstB,IAAI5K,GAAWuG,GAEhCxT,MAAKzV,OAAO6lB,GAAGnD,GAAWuG,EAAIxT,MAC9BA,KAAKzV,OAAO6lB,GAAGnD,GAAWjN,KAAKwoH,eAAe9sG,QAAS1b,KAAKwoH,iBAKhEH,EAAUlmI,UAAUsmI,mBAAqB,WACrC,GAAI//G,GAAQ1I,IAkBZ,IAjBA0B,GAAgB1B,KAAKzV,OAAO8B,WAAY,SAAU9J,GAC7BmmB,EAAMne,OAAOiN,iBAAiBjV,EAAOF,MAMtD,IAHKG,oBAAkBD,EAAc,eACjCA,EAAOw5E,qBAAsBzsE,OAAQ/M,EAAc,eAExB,gBAAnBA,UAA6B,CACrC,GAAIsnB,GAAiB,GAAIrC,GACzBjlB,GAAOwM,aAAa8a,EAAera,kBAAkBvI,YAAW1E,EAAO+M,cAEtE,IAA+B,gBAAnB/M,UAA6B,CAC1C,GAAI4M,GAAOuZ,EAAMlG,QAAQpT,WAAW,iBACpC7M,GAAOwM,aAAaI,EAAKK,mBAAoBF,OAAQ/M,EAAO+M,UAEhE/M,EAAOw5E,qBAAsB7oD,WAAY3wB,EAAO2wB,YAAc3wB,EAAOF,UAErEkN,cAAcyQ,KAAKzV,OAAO0E,iBAI1B,IAAK,GADDsmB,GAAO/tB,OAAOC,KAAKuY,KAAKzV,OAAkB,aACrC9G,EAAI,EAAGA,EAAI8xB,EAAKnyB,OAAQK,IACzB8xB,EAAK9xB,GAAGqjF,WAHC,qBAIF9mE,MAAKzV,OAAkB,YAAEgrB,EAAK9xB,KAKrD4kI,EAAUlmI,UAAUovE,kBAAoB,SAAUvuE,GAC9C,GAAIA,EAAEwuC,SAAWxxB,KAAKmQ,gBAAtB,CAGI3tB,oBAAkBwd,KAAKwoH,iBACvBxoH,KAAKsoH,iBAETtoH,KAAKyoH,qBACLzoH,KAAKwoH,eAAe9sG,SACpB,IAAIgtG,GAAS,GAAItmG,IAA6BpiB,KAAKzV,OAEnB,KADnB,GAAIw3B,IAA2B/hB,KAAKzV,QACtCymB,UAAU5tB,QAAiBslI,EAAOlmG,WACzCxiB,KAAKzV,OAAOsoB,OAAOvF,SAG3B+6G,EAAUlmI,UAAU6+C,iBAAmB,WAC/BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGpD,GAAYhN,KAAKsoH,eAAgBtoH,MAChDA,KAAKzV,OAAO6lB,GAAGjD,GAAUnN,KAAKuxD,kBAAmBvxD,MACjDA,KAAKzV,OAAO6lB,GK8FW,qBL9FWpQ,KAAK0b,QAAS1b,QAEpDqoH,EAAUlmI,UAAU8rD,oBAAsB,WAClCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKwoH,eAAev6E,sBACpBjuC,KAAKzV,OAAOstB,IAAI7K,GAAYhN,KAAKsoH,gBACjCtoH,KAAKzV,OAAOstB,IAAI5K,GAAWjN,KAAKwoH,eAAe9sG,SAC/C1b,KAAKzV,OAAOstB,IAAI1K,GAAUnN,KAAKuxD,mBAC/BvxD,KAAKzV,OAAOstB,IKoFW,qBLpFY7X,KAAK0b,WAE5C2sG,EAAUlmI,UAAU0rB,QAAU,WAC1B7N,KAAKiuC,sBACLpsD,SAAOme,KAAKzV,OAAOK,QAAQtE,cAAc,mBAE7C+hI,EAAUlmI,UAAUu5B,QAAU,SAAUp5B,GACpC,GAAIo9H,GAAap9H,YAAgB8J,OAAQ9J,GAAQA,EACjD0d,MAAKzV,OAAOsoB,OKwEe,0BLxEe6sG,GACtC1/G,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAS,GAC3C4c,KAAKzV,OAAOsoB,OKoEK,mBLpEmB6sG,IAGrC2I,KwEnHPjhH,GAAsC,WACtC,QAASA,GAAqBxc,EAAS6d,EAASkgH,GAC5C,GAAIjgH,GAAQ1I,IACZA,MAAK4oH,WAAY,EACjB5oH,KAAK6oH,WAAY,EACjB7oH,KAAKyI,WACLzI,KAAK2F,cACDmjH,IACI5+B,MAAO,SAAU/8F,EAAMyN,GACnB,GAAIlR,GAAMyD,EAAKzD,IAAMgf,EAAMqgH,cAAcr/H,GAEzC,OADAkR,GAAKouH,QAAUt/H,GAAO,EACfA,EAAOgf,EAAMD,QAAQ3B,WAAa,GAAM,GAEnDlB,KAAM,KAEVqjH,MACI/+B,MAAO,SAAU/8F,EAAMyN,GACL8N,EAAMD,QAAQ5B,UAAUqyC,YAAtC,IACIxvD,GAAMyD,EAAK6rD,MAEf,OADAp+C,GAAKouH,QAAU77H,EAAK6rD,QAAUtwC,EAAMqgH,cAAc/vE,OAC3CtvD,EAAOgf,EAAMD,QAAQ3B,WAAa,GAAM4B,EAAMD,QAAQ3B,WAAa,GAC3ElB,KAAM,KAEb3b,OACIigG,MAAO,SAAU/8F,EAAMyN,GACnB,GAAI3Q,GAAQkD,EAAKlD,KACjB,OAAIye,GAAMigH,YACN/tH,EAAKouH,QAAU/+H,EAAQye,EAAMwgH,qBAAqBj/H,MAC3CA,EAAQye,EAAMwgH,qBAAqBxgI,OAASggB,EAAMwgH,qBAAqBj/H,QAElF2Q,EAAKouH,QAAU/+H,EAAQye,EAAMqgH,cAAc9+H,MACpCA,EAAQye,EAAMqgH,cAAcrgI,OAASggB,EAAMqgH,cAAc9+H,QACjE2b,KAAM,KAEbjc,MACIugG,MAAO,SAAU/8F,EAAMyN,GACnB,GAAIjR,GAAOwD,EAAKxD,IAEhB,OADAiR,GAAKouH,QAAUr/H,EAAO,EAClB+e,EAAMigH,WACCh/H,EAAO+e,EAAMwgH,qBAAqBxgI,OAASggB,EAAMwgH,qBAAqBv/H,KAE1EA,EAAO+e,EAAMqgH,cAAcrgI,OAASggB,EAAMqgH,cAAcp/H,MAChEic,KAAM,MAGjB5F,KAAKpV,QAAUA,EACfoV,KAAKyI,QAAUA,EACfzI,KAAK2oH,WAAaA,EA6DtB,MA3DAvhH,GAAqBjlB,UAAUgnI,QAAU,SAAUxnH,EAAUynH,GACzD,GAAI1gH,GAAQ1I,IACZA,MAAK+oH,cAAgB/oH,KAAKyI,QAAQ5B,UAAU1d,wBAC5CygD,eAAa96C,IAAIkR,KAAKyI,QAAQ5B,UAAW,QAAS,WAAc,MAAO6B,GAAMkgH,WAAY,GAAS5oH,MAClG4pC,eAAa96C,IAAIkR,KAAKyI,QAAQ5B,UAAW,SAAU7G,KAAKqpH,qBAAqB1nH,EAAUynH,GAAkBppH,MACrGA,KAAKyI,QAAQvB,mBACblH,KAAKkpH,qBAAuBlpH,KAAKyI,QAAQvB,iBAAiB/d,wBAC1DygD,eAAa96C,IAAIkR,KAAKyI,QAAQjC,UAAW,QAAS,WAAc,MAAOkC,GAAMkgH,WAAY,GAAS5oH,MAClG4pC,eAAa96C,IAAIkR,KAAKyI,QAAQjC,UAAW,SAAUxG,KAAKqpH,qBAAqB1nH,EAAUynH,GAAkBppH,QAGjHoH,EAAqBjlB,UAAU+nG,MAAQ,SAAU3+E,GAC7C,GAAI3Q,GAAOoF,KAAK2F,aAAa4F,EAC7B,QAAIvL,KAAKkpH,sBAAuC,SAAd39G,GAAsC,UAAdA,EAGnD3Q,EAAKsvF,MAAMlqF,KAAKpV,QAAQzB,wBAAyByR,GAF7CA,EAAKsvF,MAAMlqF,KAAK2oH,WAAWx/H,wBAAyByR,IAInEwM,EAAqBjlB,UAAUknI,qBAAuB,SAAU1nH,EAAUynH,GACtE,GAAI1gH,GAAQ1I,KACRspH,EAA8B,WAAtB3uH,UAAQC,KAAKC,KAAoB,IAAM,IAC/C0uH,EAAe/hC,WAAS7lF,EAAU2nH,GAClCE,EAAchiC,WAAS7lF,EAAU,GAErC,OADA3B,MAAKyI,QAAQghH,QAAUzpH,KAAKyI,QAAQihH,SAAW,EACxC,SAAU1mI,GACb,GAAI0G,GAAMgf,EAAMD,QAAQvB,iBAAmBwB,EAAMD,QAAQ5B,UAAU7N,UAAYhW,EAAEtB,OAAOsX,UACpFrP,EAAO+e,EAAMD,QAAQvB,iBAAmBwB,EAAMD,QAAQjC,UAAUyxB,WAAaj1C,EAAEtB,OAAOu2C,WACtF1sB,EAAY7C,EAAMD,QAAQghH,QAAU//H,EAAM,OAAS,IACvD6hB,GAAY7C,EAAMD,QAAQihH,WAAa//H,EAAO4hB,EAAY7C,EAAMD,QAAQihH,SAAW//H,EAAO,QAAU,OACpG+e,EAAMD,QAAQghH,QAAU//H,EACxBgf,EAAMD,QAAQihH,SAAW//H,CACzB,IAAIg9C,GAAUj+B,EAAM/C,aAAa4F,EACjC,KAAkD,IAA9C7C,EAAMD,QAAQzB,KAAKtf,QAAQi/C,EAAQ/gC,MAAvC,CAGA,GAAIskF,GAAQxhF,EAAMwhF,MAAM3+E,EASxB,IARIo7B,EAAQqiF,WACJtgH,EAAMigH,YAA6B,UAAdp9G,GAAuC,SAAdA,EAI9C69G,EAAgB1gH,EAAM9d,QAAS+7C,EAASp7B,GAAa7hB,IAAKA,EAAKC,KAAMA,GAAQ+e,EAAMkgH,UAAW1+B,GAH9Fk/B,EAAgB1gH,EAAMigH,WAAYhiF,EAASp7B,GAAa7hB,IAAKA,EAAKC,KAAMA,GAAQ+e,EAAMkgH,UAAW1+B,IAMrGA,EAAO,CACP,GAAI12E,GAAK+1G,CAEY,OAAjB5iF,EAAQ/gC,OACR4N,EAAKg2G,GAETh2G,GAAKjI,UAAWA,EAAWo+G,SAAUhjF,EAASwqE,QAAUznH,IAAKA,EAAKC,KAAMA,GACpE+uD,aAAcvyD,SAAS6vD,gBAE/BttC,EAAMkgH,WAAY,KAG1BxhH,EAAqBjlB,UAAUynI,cAAgB,SAAUhoI,GACrDoe,KAAKyI,QAAQ3B,WAAallB,GAEvBwlB,KC1GPyiH,GAA0C,WAC1C,QAASA,GAAyBt/H,GAC9ByV,KAAK8pH,YACL9pH,KAAKoD,SACLpD,KAAKiD,gBACLjD,KAAKmD,oBACLnD,KAAKwzD,YACLxzD,KAAK1d,QACL0d,KAAKsmC,UACLtmC,KAAKzV,OAASA,EACdyV,KAAKgvF,MAAQhvF,KAAKzV,OAAO8K,aACzB2K,KAAKuC,kBAAoBvC,KAAKzV,OAAOwe,cAAgB,GAAI2Z,IAAoB1iB,KAAKzV,QAAU,GAAIwzB,IAAkB/d,KAAKzV,QA+S3H,MA5SAs/H,GAAyB1nI,UAAU2gB,aAAe,SAAUxgB,EAAMU,GAC9D,GAAI4S,GAAWoK,KAAKzV,OAAOsL,eACvB+E,EAAO5X,EAAEgiB,YAAchiB,EAAEgiB,aAAehF,KAAKgR,UAC7C+4G,EAAQnvH,EAAK+K,cAA2C,MAA3B/K,EAAK+K,aAAaC,KAC/CR,EAAQ2kH,IAASnvH,EAAKovH,UAAapvH,EAAKqvH,SAAgCrvH,EAAKwK,KAA1BxK,EAAKsvH,SAAS9kH,KACjE1f,KAEAk+B,GADY5jB,KAAKgvF,MAAMz5F,SACbyK,KAAKmqH,gBAAgB/kH,IAC/BglH,IAKJ,KAJKx0H,GAA6C,eAAhCoK,KAAKzV,OAAO8R,kBAAqCrZ,EAAE+f,sBAC9B,eAAhC/C,KAAKzV,OAAO8R,kBAAqCrZ,EAAE+f,uBAAyB/f,EAAEkgB,2BAA8BtN,IAC/GoK,KAAKqqH,mBAAmBrnI,EAAEof,aAE1BhO,GAAgB4L,KAAKzV,SAAWyV,KAAKzV,OAAOjG,OAAOlB,OACnD,MAAOsC,GAASsa,KAAKzV,OAAOjG,MAEhC,IAAI0b,KAAKzV,OAAO0c,2BACZ,IAASxjB,EAAI,EAAGA,EAAImX,EAAKqK,aAAa7hB,OAAQK,IACtCuc,KAAKsqH,iBAAiB1vH,EAAKqK,aAAaxhB,MACxCuc,KAAKoD,MAAMxI,EAAKqK,aAAaxhB,IAAMuc,KAAKuC,kBAAkBgd,YAAYvf,KAAKoD,MAAMxI,EAAKqK,aAAaxhB,OAElGT,EAAE+f,sBAAwB/C,KAAKuqH,wBAAwB3vH,EAAKqK,aAAaxhB,KACtET,EAAEkgB,0BAA4BlD,KAAKwqH,4BAA4B5vH,EAAKqK,aAAaxhB,QACjF2f,EAAQpgB,EAAE+f,qBACR/C,KAAKiD,aAAejD,KAAKmD,kBACzBvI,EAAKqK,aAAaxhB,IAAMuc,KAAKuC,kBAAkBgd,YAAYnc,EAAMxI,EAAKqK,aAAaxhB,KAIrG,IAAI8L,cAAcyQ,KAAKzV,OAAO0E,iBAAkB,CAI5C,GAAKjM,EAAiB,mBAA2C,IAAtCwE,OAAOC,KAAKuY,KAAKwzD,UAAUpwE,QAYjD,GAAIJ,EAAiB,kBAAG,CAGzB,IAAK,GAFDynI,GAAoBznI,EAAY,WAChC0nI,KACKjnI,EAAI,EAAGA,EAAI+D,OAAOC,KAAKuY,KAAKwzD,UAAUpwE,OAAQK,IACnDinI,EAAWxmI,KAAKk2B,OAAO5yB,OAAOC,KAAKuY,KAAKwzD,UAAU/vE,IAEtD,KAASA,EAAI,EAAGA,EAAInB,EAAKc,OAAQK,IAAK,CAClC,GAAIyL,MACAg7F,EAAQwgC,EAAWhjI,QAAQ+iI,EAC/Bv7H,GAAKhL,KAAK5B,EAAKmB,KACA,IAAXymG,IACAlqF,KAAKwzD,SAASi3D,GAAqBzqH,KAAKuC,kBAAkBO,aAAa5T,GAAQ6J,WAAY0xH,IAAqB,IAEpHA,UAzB4D,CAChE,IAAShnI,EAAI,EAAGA,EAAInB,EAAKc,OAAQK,KACzByL,MACChL,KAAK5B,EAAKmB,IACfuc,KAAKwzD,SAAS/vE,GAAKuc,KAAKuC,kBAAkBO,aAAa5T,GAAQ6J,WAAYtV,IAAK,EAGpF,KAAK,GADDC,GAAI,EACCD,EAAI,EAAGA,EAAIuc,KAAKzV,OAAO8K,aAAaE,SAAU9R,IACnDiC,EAAOhC,GAAKsc,KAAKwzD,SAAS/vE,GAC1BC,IAmBR,IAAKlB,oBAAkBQ,EAAiB,mBAEpC,IAAK,GADDU,GAAI,EACCD,EAAIT,EAAY,WAAGS,EAAIT,EAAU,SAAGS,IACzCiC,EAAOhC,GAAKsc,KAAKwzD,SAAS/vE,GAC1BC,QAIP,CAED,IAAK,GADD6D,GAASqT,EAAKqK,aACTxhB,EAAI,EAAGA,EAAI8D,EAAOnE,OAAQK,IAAK,CACpC,IAAKuc,KAAKsqH,iBAAiB/iI,EAAO9D,IAAK,CAC/BuX,EAAOgF,KAAKuC,kBAAkBO,aAAaxgB,GAC3C0iB,YAAapK,EAAM7B,WAAYiH,KAAK2qH,cAAcpjI,EAAO9D,GAAInB,IAE7D8R,IAAgB4L,KAAKzV,UAAYyV,KAAKzV,OAAOjG,OAAOlB,SACpD4c,KAAKzV,OAAOvG,MAAQgX,EACpBgF,KAAKzV,OAAOjG,OAAS0W,EACrBgF,KAAKzV,OAAOsoB,OpE+ZD,+BoE7ZX+3G,OAAS,EACTx2H,IAAgB4L,KAAKzV,SACrBqgI,EAAS5qH,KAAKgvF,MAAMz5F,SAAW,EAC1ByK,KAAKsqH,iBAAiB1mG,EAAQ,MAC/B5jB,KAAKoD,MAAMwgB,EAAQ,IAAM5oB,EAAK3P,MAAM,EAAGu/H,IAEtC5qH,KAAKsqH,iBAAiB1mG,EAAQ,MAC/B5jB,KAAKoD,MAAMwgB,EAAQ,IAAM5oB,EAAK3P,MAAMu/H,EAAQ5qH,KAAKgvF,MAAMz5F,aAI3Dq1H,IAAWx9H,KAAK6J,IAAI+D,EAAK5X,OAAQ4c,KAAKgvF,MAAMz5F,UAAY,EACnDyK,KAAKsqH,iBAAiB1mG,EAAQ,MAC/B5jB,KAAKoD,MAAMwgB,EAAQ,IAAM5oB,EAAK3P,MAAM,EAAGu/H,IAEtC5qH,KAAKsqH,iBAAiB1mG,EAAQ,MAC/B5jB,KAAKoD,MAAMwgB,EAAQ,IAAM5oB,EAAK3P,MAAMu/H,KAOhD,GAHI5qH,KAAKzV,OAAO7F,cAAcvB,QAAQC,SAAW2mI,GAAS/pH,KAAKoD,MAAM7b,EAAO9D,MACxEuc,KAAKoD,MAAM7b,EAAO9D,IAAMuc,KAAK6qH,eAAe7qH,KAAKoD,MAAM7b,EAAO9D,IAAK8D,EAAO9D,KAEzET,EAAE+f,uBAAyB/C,KAAKuqH,wBAAwBhjI,EAAO9D,KAC5DT,EAAEkgB,2BAA6BlD,KAAKwqH,4BAA4BjjI,EAAO9D,IAAM,CACjF,GAAI2f,GAAQpgB,EAAE+f,qBACR/C,KAAKiD,aAAejD,KAAKmD,iBAC3BnI,EAAOgF,KAAKuC,kBAAkBO,aAAaxgB,GAC3C0iB,YAAapK,EAAM7B,WAAYiH,KAAK2qH,cAAcpjI,EAAO9D,GAAInB,KAE7DsoI,IAAWx9H,KAAK6J,IAAI+D,EAAK5X,OAAQ4c,KAAKgvF,MAAMz5F,UAAY,GACvDvS,EAAEkgB,2BAA6BlD,KAAKwqH,4BAA4B5mG,EAAQ,KACrE5gC,EAAE+f,uBAAyB/C,KAAKuqH,wBAAwB3mG,EAAQ,OACpExgB,EAAMwgB,EAAQ,IAAM5oB,EAAK3P,MAAM,EAAGu/H,KAEjC5nI,EAAEkgB,2BAA6BlD,KAAKwqH,4BAA4B5mG,EAAQ,KACrE5gC,EAAE+f,uBAAyB/C,KAAKuqH,wBAAwB3mG,EAAQ,OACpExgB,EAAMwgB,EAAQ,IAAM5oB,EAAK3P,MAAMu/H,IAGlC5nI,EAAE+f,sBAAyB/f,EAAEkgB,2BAA4BlD,KAAKoD,MAAM7b,EAAO9D,KAIxE2f,EAAQpgB,EAAE+f,qBACR/C,KAAKiD,aAAejD,KAAKmD,kBACrB5b,EAAO9D,KACbiC,EAAOxB,KAAKm8B,MAAM36B,EAAQ0d,EAAM7b,EAAO9D,KAN3CiC,EAAOxB,KAAKm8B,MAAM36B,EAAQsa,KAAKoD,MAAM7b,EAAO9D,KAS5Cuc,KAAKsqH,iBAAiB/iI,EAAO9D,KAC7B2mI,EAAalmI,KAAKqD,EAAO9D,IAGjCmX,EAAKqK,aAAemlH,EAExB,IAAK76H,cAAeA,eAAeyQ,KAAKzV,OAAO0E,iBAAmB,CAE1D+Q,KAAKzV,OAAOwe,cACZ/I,KAAKzV,OAAO6+B,gBAAwB,QAAI1jC,EAAOqW,IAAI,SAAU+vB,GAAK,MAAOA,GAAExpC,OAEtEsT,GACA5S,EAAE+f,uBAAyD,SAAhC/C,KAAKzV,OAAO8R,iBACL,UAAhC2D,KAAKzV,OAAO8R,iBAA+B2D,KAAKzV,OAAOuL,qBAAwB9S,EAAEkgB,4BACpFlD,KAAKzV,OAAO6+B,gBAAkB1jC,EAAOqW,IAAI,SAAU+vB,GAAK,MAAOA,GAAExpC,QAIrE0d,KAAKzV,OAAO6+B,gBAAkB1jC,EAAOqW,IAAI,SAAU+vB,GAAK,MAAOA,GAAExpC,OAGzE,MAAOoD,IAEXmkI,EAAyB1nI,UAAUgoI,gBAAkB,SAAU/kH,GAC3D,OAAQA,GAAQA,EAAO,GAAW,EAAPA,IAE/BykH,EAAyB1nI,UAAU2oI,QAAU,SAAUC,GACnD,MAAOA,GAAQ,GAAM,EAAIA,EAAQ,GAAKA,EAAQ,GAAK,GAEvDlB,EAAyB1nI,UAAUmoI,iBAAmB,SAAU1oI,GAC5D,MAAOA,KAASoe,MAAKoD,OAEzBymH,EAAyB1nI,UAAUooI,wBAA0B,SAAU3oI,GACnE,MAAOA,KAASoe,MAAKiD,cAEzB4mH,EAAyB1nI,UAAUqoI,4BAA8B,SAAU5oI,GACvE,MAAOA,KAASoe,MAAKmD,kBAEzB0mH,EAAyB1nI,UAAU6uB,QAAU,WACzC,OACI5L,KAAMpF,KAAKgvF,MAAM15F,YACjB2P,aAAcjF,KAAKmqH,gBAAgBnqH,KAAKgvF,MAAM15F,aAC9CiW,UAAW,OACXpG,cAAenF,KAAKzV,OAAO4wB,2BAGnC0uG,EAAyB1nI,UAAUwoI,cAAgB,SAAUK,EAAK1oI,EAAM2oI,OACvD,KAATA,IAAmBA,GAAO,EAC9B,IACIC,GAAOF,EAAM,GAAM,EACnBljI,GAFOkY,KAAK8qH,QAAQE,GAEJ,GAAKhrH,KAAKgvF,MAAMz5F,QACpC,OAAO01H,KAASC,EAAOpjI,EAAQA,KAAWkY,KAAKgvF,MAAMz5F,SAAW,IAEpEs0H,EAAyB1nI,UAAUgpI,iBAAmB,SAAUrlH,GAC5D,GAAI4C,GAAQ1I,SACI,KAAZ8F,IAAsBA,EAAU9F,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,qBAC7E0Z,KAAKzV,OAAOsL,iBACZiQ,EAAUA,EAAQxf,cAAc,oBAEpC,IAAIs9B,MACAgrC,EAA6B,EAArB9oD,EAAQmyB,WAChBxwC,EAAOD,OAAOC,KAAKuY,KAAK8pH,UACxBv6E,EAASzpC,EAAQ3c,wBAAwBT,KAC7CkmE,GAAQxhE,KAAKyrD,IAAI74C,KAAK8pH,SAASriI,EAAKrE,OAAS,GAAKmsD,EAAQqf,EAC1D,IAAIw8D,GAAWzwH,UAAQ44C,SAAW,EAAIhE,EAASA,EAAS,EACpD5lD,EAAOilE,EAAQrf,GAAoB,IAAVqf,EAAcw8D,EAAW,EAetD,OAdA3jI,GAAKkL,KAAK,SAAUw+G,EAAQjvF,EAAMrxB,GAC9B,GAAIw6H,GAAUjxG,OAAO+2F,GACjBma,EAAY5iH,EAAMohH,SAAS3Y,EAK/B,OAJaviD,GAAQw8D,GAAYE,GAAa3hI,EAAOyhI,GAAYE,GAE7D1nG,EAAQ1/B,KAAKmnI,GAEV1hI,EAAOyhI,EAAWE,IAEzB/7H,cAAcyQ,KAAKzV,OAAO0E,mBAC1B+Q,KAAKzV,OAAO2R,cAAcilE,cAAgBv9C,EAAQ,GAClD5jB,KAAKzV,OAAO2R,cAAcklE,YAAcx9C,EAAQA,EAAQxgC,OAAS,IAErE4c,KAAKurH,eAAe3nG,GACbA,GAEXimG,EAAyB1nI,UAAUopI,eAAiB,SAAU3nG,GAC1D,GAAI5jB,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0c,4BAA6C,IAAf2c,EAAQ,GACpF,IAAK,GAAIngC,GAAI,EAAGA,EAAIuc,KAAKzV,OAAOuL,mBAAoBrS,IAChDmgC,EAAQ1/B,KAAK0/B,EAAQA,EAAQxgC,OAAS,GAAK,IAIvDymI,EAAyB1nI,UAAUkoI,mBAAqB,SAAUx7H,GAC9D,GAAIqkD,IAAW,SAAU,UAAW,UAAW,YAAa,YAAa,WAAY,aAAc,UAC/F,OAAQ,SACRlzC,MAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAOuU,YAAckB,KAAKzV,OAAO0c,4BAAyC,YAAXpY,GACtGqkD,EAAQ1tC,OAAO0tC,EAAQxrD,QAAQmH,GAAS,EAE5C,IAAI8gD,GAAQuD,EAAQvgD,KAAK,SAAU/Q,GAAS,MAAOiN,KAAWjN,GAQ9D,OAPI+tD,KACA3vC,KAAKoD,SACLpD,KAAK1d,QACL0d,KAAKsmC,UACLtmC,KAAKiD,gBACLjD,KAAKmD,qBAEFwsC,GAEXk6E,EAAyB1nI,UAAUqpI,kBAAoB,WACnD,GAAI9iH,GAAQ1I,KACRjS,EAAM,CACViS,MAAK8pH,WAOL,KAAK,GANDrlI,GAAOub,KAAKzV,OAAO7F,cAAcvB,QAAQC,OACzCkvB,EAAOtS,KAAKzV,OAAOpH,QACnB0nE,EAAOv4C,EAAKlvB,OAGZ6E,EAAI+X,KAAKzV,OAAO7F,cAAcvB,QACzBM,EAAI,EAAGA,EAAIwE,EAAE7E,OAAQK,IAC1Buc,KAAK8pH,SAASrmI,GAAkC,IAAL,EAAvBuc,KAAK8pH,SAASrmI,EAAI,GAG1C,KAAK,GADDgoI,GAASr/H,MAAMi0B,MAAM,KAAMj0B,MAAMy+D,IAAO9uD,IAAI,WAAc,MAAOhO,OAC5DrK,EAAI,EAAGA,EAAI+nI,EAAOroI,OAAQM,IAC/B+nI,EAAO/nI,GAAK+nI,EAAO/nI,GAAKe,EACxBub,KAAK8pH,SAAS2B,EAAO/nI,KAAsC,EAA/Bsc,KAAK8pH,SAAS2B,EAAO/nI,GAAK,KAT1C,SAAUnB,GAAU,MAAOA,GAAOoG,UAC5C+f,EAAMne,OAAO7F,cAAcoW,kBAAmFvY,EAAOoG,QAAtE+f,EAAMne,OAAO7F,cAAcvB,QAAQuE,QAAQnF,EAAOF,OAAS,IAQjCiwB,EAAK5uB,IAAM0qC,SAAS9b,EAAK5uB,GAAGgF,MAAO,IAAM,IAG5HmhI,EAAyB1nI,UAAU0oI,eAAiB,SAAUlkF,EAASokF,GAInE,IAAK,GAHDW,GAAe/kF,EAAQ,GACvB3rC,KACAvT,EAAOD,OAAOC,KAAKuY,KAAKoD,OACnB3f,EAAI,EAAGA,EAAIgE,EAAKrE,OAAQK,IACzB22B,OAAO3yB,EAAKhE,IAAMsnI,IAClB/vH,EAAOA,EAAKxE,OAAOwJ,KAAKoD,MAAM3b,EAAKhE,KAG3C,OAAKioI,IAAgBA,EAAaznI,WAAc8mI,EAAQ,GAAM,EACnDpkF,EAEJ3mC,KAAK2rH,aAAahlF,EAAS3rC,IAEtC6uH,EAAyB1nI,UAAUwpI,aAAe,SAAUhlF,EAAS3rC,GACjE,GAAI0wH,GAAe/kF,EAAQ,GACvBwqE,EAAS,CACb,OAAIua,IAAgBA,EAAaznI,UACtB0iD,GAEKA,EAAQh0C,KAAK,SAAUvN,GACnC,MAAO4V,GAAKrI,KAAK,SAAUi5H,EAAM9jI,GAC7B,GAAIkI,GAAM47H,OAA4B7+H,KAApB6+H,EAAKtpI,KAAKD,OAAuBupI,EAAKtpI,KAAKD,QAAU+C,EAAI9C,KAAKD,OAC5EupI,EAAKtpI,KAAKsP,MAAQxM,EAAI9C,KAAKsP,GAI/B,OAHI5B,KACAmhH,EAASrpH,GAENkI,QAIX22C,EAAQ1P,QACR0P,EAAU3mC,KAAK2rH,aAAahlF,EAAS3rC,EAAK3P,MAAM8lH,KAE7CxqE,IAEXkjF,EAAyB1nI,UAAUsoC,QAAU,WAIzC,IAAK,GAHDzvB,MACA6wH,KAAyBt8H,eAAcyQ,KAAKzV,OAAO0E,kBACnDxH,EAAOokI,EAAyBrkI,OAAOC,KAAKuY,KAAKwzD,UAAYhsE,OAAOC,KAAKuY,KAAKoD,OACzE3f,EAAI,EAAGA,EAAIgE,EAAKrE,OAAQK,IAC7BuX,EAAO6wH,EAAyB7wH,EAAKxE,OAAOwJ,KAAKwzD,SAAS/rE,EAAKhE,KAAOuX,EAAKxE,OAAOwJ,KAAKoD,MAAM3b,EAAKhE,IAEtG,OAAOuX,IAEJ6uH,KClUPrqG,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAmBnFgsG,GAAwC,SAAU9pG,GAElD,QAAS8pG,GAAuBvhI,EAAQiY,GACpC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAkClD,OAjCA0I,GAAMqjH,WAAa,EAEnBrjH,EAAM3P,WAAa,EACnB2P,EAAMsjH,cAAgB,EACtBtjH,EAAMujH,cAAe,EACrBvjH,EAAMwqC,SAAW,YAAa,YAAa,WAAY,cAEvDxqC,EAAMgjB,WACNhjB,EAAMwjH,cAENxjH,EAAMrB,WAAa,GAAI8kH,IACvBzjH,EAAM0jH,cACN1jH,EAAM6uC,WAAY,EAClB7uC,EAAM2jH,aAAc,EACpB3jH,EAAM4jH,UAAW,EACjB5jH,EAAM6jH,UAAY,EAClB7jH,EAAM+tC,UAAQ1pD,GACd2b,EAAM2tC,UAAW,EACjB3tC,EAAM8jH,cAAgB,YAAa,SAAU,SAAU,MAAO,QAC9D9jH,EAAM+jH,aAAkD,WAAnC/jH,EAAMne,OAAOiE,aAAaC,KAE/Cia,EAAM0tC,eACN1tC,EAAMgkH,gBACNhkH,EAAMikH,cACNjkH,EAAM0qB,OAAS,EACf1qB,EAAMkkH,eACNlkH,EAAMmkH,kBACNnkH,EAAMokH,iBACNpkH,EAAMs4E,mBAAoB,EAC1Bt4E,EAAMlG,QAAUA,EAChBkG,EAAMqkH,cAAc,MACpBrkH,EAAMne,OAAO6lB,GAAGkX,GAAgC5e,EAAM6e,WAAY7e,GAClEA,EAAM1F,WAAa0F,EAAM0e,UAClB1e,EAwjCX,MA5lCA8W,IAAUssG,EAAwB9pG,GAsClC8pG,EAAuB3pI,UAAUomC,YAAc,WAC3CvoB,KAAKkoC,OAASloC,KAAKwC,QAAQpT,WAAW,mBAAmB8xC,YAAY3xB,aAAWknB,QAChFzU,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAClCA,KAAKqH,WAAWpa,MAAQ+S,KAAK6oB,WAC7B7oB,KAAKqH,WAAWvB,QAAU9F,KAAK8F,QAAU9F,KAAK2mB,WAAWrgC,cAAc,cACvE0Z,KAAKqH,WAAW2lH,cAAchtH,KAAKzV,OAAO+C,QAC1C0S,KAAKqH,WAAW4lH,oBAChBjtH,KAAKqH,WAAWC,QAAQje,MAAMJ,SAAW,UACzC,IAAIyd,GAAiB1G,KAAKzV,OAAOyH,qBAAsBC,iBAAgB+N,KAAKzV,OAAOyH,WAAWA,WAAW2U,QACrGC,GACAC,UAAW7G,KAAK8F,QAASgB,WAAoC,EAAxB9G,KAAK+G,iBAAsBL,cAAeA,EAC/EM,KAAMhH,KAAKzV,OAAO0c,4BAA8B,IAAK,MAAQ,KAEjEjH,MAAKmH,SAAW,GAAIC,IAAqBpH,KAAKqH,WAAWC,QAASV,IAEtEklH,EAAuB3pI,UAAU8uC,YAAc,SAAUpyB,GACrDmB,KAAK6oB,WAAW/8B,YAAY+S,GAC5BmB,KAAKqH,WAAWi6D,YAAY,EAAG,IAEnCwqD,EAAuB3pI,UAAU0iB,uBAAyB,SAAU3V,GAChE,GAAIg+H,GAAah+H,EAAK8V,YAAYC,aAC9BkoH,EAAYj+H,EAAK8V,YAAYG,cAC7BC,EAAOlW,EAAK8V,YAAYI,IAC5BlW,GAAK8V,YAAYC,cAAgB,EAAG,GACpC/V,EAAK8V,YAAYI,KAAO,EACnBlW,EAAK6T,uBACN7T,EAAK8V,YAAYG,iBAErB,IAAIioH,GAAgBptH,KAAKzV,OAAO8O,wBAAwBjW,OACpDiqI,EAAertH,KAAKzV,OAAO6Q,aAAa9Y,KAAKgjB,YAAYtT,WAAWE,KAAK7G,MAAM,EAAG+hI,GAClFE,EAActtH,KAAKgD,WAAWF,aAAauqH,EAAcn+H,EAI7D,OAHAA,GAAK8V,YAAYC,aAAeioH,EAChCh+H,EAAK8V,YAAYG,cAAgBgoH,EACjCj+H,EAAK8V,YAAYI,KAAOA,EACjBkoH,EAAY9nH,OAAO,EAAGxF,KAAKzV,OAAOuU,aAE7CgtH,EAAuB3pI,UAAUorI,eAAiB,SAAUC,GAKxD,GAJAxtH,KAAKytH,kBACDztH,KAAKzV,OAAOgtC,oBACZv3B,KAAKzV,OAAOs6E,eAAiB2oD,EAAWrc,QAExCnxG,KAAKisH,cAAgBjsH,KAAKzV,OAAO2lB,YAEjC,YADAlQ,KAAKisH,cAAe,EAGpBzpI,qBAAkB2D,SAAS6vD,eAC3Bh2C,KAAKu3C,WAAY,EAGjBv3C,KAAKu3C,UAAYv3C,KAAK8F,UAAYzN,UAAQlS,SAAS6vD,cAAe,eAAiBh2C,KAAK8F,UAAY3f,SAAS6vD,aAEjH,IAAIp7C,GAAO4yH,EAAW7D,SAClB+D,EAAc1tH,KAAKgsH,cACnB2B,EAAqB3tH,KAAKzV,OAAO4wB,yBACjCyyG,EAAW5tH,KAAK0F,YAAc1F,KAAK6tH,gBAAgBL,EAAWjiH,UAAW3Q,EAAM4yH,EAAWrc,OAC9F,IAAI5hH,cAAcyQ,KAAKzV,OAAO0E,kBAAoB+Q,KAAKzV,OAAO0c,4BACzD7M,KAAK6+D,UAAU00D,KAAwBvzH,KAAK6+D,UAAU20D,EAASzoH,eAAiB,CACjFnF,KAAKzV,OAAOonE,eACZ,IAAIsP,GAAajhE,KAAKkhE,gBAAgBlhE,KAAKmhE,cAAgB,GACvDz4E,EAAQsX,KAAKkhE,gBAAgBlhE,KAAKohE,YAAc,GAAKH,EAAa,EACtEjhE,MAAKzV,OAAOsoB,OAAO,2BAA6BzQ,YAAa,gBAAiB0rH,iBAAkBF,EAASzoH,cAAc,GACnH4oH,eAAgBH,EAASzoH,cAAcyoH,EAASzoH,cAAc/hB,OAAS,GAAIwiB,KAAM,IACjFooH,YAAatlI,EAAOu4E,WAAYjhE,KAAKkhE,gBAAgB0sD,EAASzoH,cAAc,GAAK,KACrFnF,KAAKzV,OAAOsoB,OAAO,sBAEvB,MAAIze,IAAgB4L,KAAKzV,UAAYgF,aACd,MAAdqL,EAAKgL,MAAgBgoH,EAAS3oH,cAAgBjF,KAAKiqB,SAAShlB,aAAahV,aAAe29H,EAAS3oH,aAAahV,YACnF,OAAzBu9H,EAAWjiH,WAAkF,IAA5DqiH,EAAS3oH,aAAa2oH,EAAS3oH,aAAa7hB,OAAS,OACzF,IAGAwqI,EAASv5F,MAAQ,wBACZ7xC,oBAAkBorI,EAASliG,WAC5BkiG,EAASliG,QAAQhiC,IAAMsW,KAAK8F,QAAQ9M,eAExCgH,MAAKzV,OAAOsoB,OAAO+6G,EAASv5F,OAASjyB,YAAa,gBAAiB4C,YAAa4oH,EAAUl1E,aAAc80E,EAAW90E,kBAItHnpD,cAAeA,eAAeyQ,KAAKzV,OAAO0E,mBACvC+Q,KAAKiqB,WAA4B,MAAdrvB,EAAKgL,MAAgB5F,KAAKiqB,SAAShlB,aAAahV,aAAe29H,EAAS3oH,aAAahV,YACtF,MAAd2K,EAAKgL,MAAgB5F,KAAKiqB,SAAS9kB,cAAclV,aAAe29H,EAASzoH,cAAclV,aACvF0K,UAAQ+2F,MACR1xF,KAAKzV,OAAO48B,cAEhBnnB,KAAKoC,YAAmC,kBAArBpC,KAAKoC,YAAkCpC,KAAKy2C,MAAQz2C,KAAKoC,gBAC5EpC,MAAKiuH,gBAIbjuH,KAAKzV,OAAOwpF,uBAAuB/zE,KAAKzV,OAAO0c,2BAA6B2mH,EAASzoH,mBAChF5V,cAAeA,eAAeyQ,KAAKzV,OAAO0E,iBAC3C+Q,KAAKzV,OAAO8K,aAAaC,YAAcs4H,EAAS5D,WAAa4D,EAAS3D,SAAW2D,EAAS1D,SAAS9kH,KAAOwoH,EAASxoH,KAE9G7V,cAAcyQ,KAAKzV,OAAO0E,kBAAoB+Q,KAAKgsH,gBAAkB0B,GAC1E1tH,KAAKzV,OAAO8K,aAAaC,cAAgBs4H,EAASt4H,aAClD0K,KAAKzV,OAAOsoB,OAAO,2BAA6BzQ,YAAa,gBAAiBqoH,kBAAmBmD,EAAS70H,WACtGm1H,gBAAiBN,EAASlpE,SAAU9+C,KAAM,IAAKuoH,QAASnuH,KAAKzV,OAAOuC,uBAEvEyC,cAAeA,eAAeyQ,KAAKzV,OAAO0E,kBAC3C+Q,KAAKoC,YAAc,gBACnBpC,KAAKzV,OAAOsoB,OAAO+6G,EAASv5F,OAASjyB,YAAa,gBAAiB4C,YAAa4oH,EAC5El1E,aAAc80E,EAAW90E,gBAExB14C,KAAKgsH,gBAAkB0B,GAAe1tH,KAAKzV,OAAO8K,aAAaC,cAAgBs4H,EAASt4H,cAC7F0K,KAAKzV,OAAO8K,aAAaC,YAAcs4H,EAASt4H,YAChD0K,KAAKzV,OAAOsoB,OAAO+6G,EAASv5F,OAASjyB,YAAa,gBAAiBqoH,kBAAmBmD,EAAS70H,WAC3Fm1H,gBAAiBN,EAASlpE,SAAU9+C,KAAM,IAAKuoH,QAASnuH,KAAKzV,OAAOuC,qBAGhFg/H,EAAuB3pI,UAAU4oI,MAAQ,SAAUC,GAC/C,MAAOhrH,MAAKgD,WAAWsnH,iBAAiBU,IAE5Cc,EAAuB3pI,UAAU0rI,gBAAkB,SAAUtiH,EAAW3Q,EAAM5X,GAC1E,GAAIorI,IAAe,EACfC,KACAC,GAAa/iH,UAAWA,EAAW5F,aAAc/K,EAAM8wB,QAAS1oC,EAChE+V,WAAYiH,KAAKgsH,cAAetnE,SAAU1kD,KAAKuuH,aAC/CC,EAAUxuH,KAAKzV,OAAO+C,OAAO2C,WAAWvI,QAAQ,KAAO,EAAIsY,KAAK8F,QAAQ3c,wBAAwBmE,OAChG0S,KAAKzV,OAAOK,QAAQzB,wBAAwBmE,MAChDghI,GAASlpH,KAAOpF,KAAKyuH,eAAezrI,EAAE0G,IAAK4kI,GAC3CA,EAASrpH,aAAeopH,EAAaruH,KAAKgD,WAAWmnH,gBAAgBmE,EAASlpH,MAC9EkpH,EAASrE,UAAYjqH,KAAKgD,WAAWsnH,iBAAiB+D,EAAWC,EAASvD,OAC1E,IAAIU,GAASzrH,KAAK0uH,aAAaJ,EAC/B,IAAuB,YAAnBtuH,KAAKi1C,WAA2Bq5E,EAASrpH,aAAahV,aAAew7H,EAAOx7H,WAAY,CAExF,GAAI0+H,GAAWlD,EAAOA,EAAOroI,OAAS,IACW,IAA7CkrI,EAASrpH,aAAavd,QAAQinI,KAC9BP,GAAe,GAWvB,GARAE,EAASrpH,aAAewmH,EACxB6C,EAAStE,UAAYyB,EAAOnyH,OAAO,SAAU/U,GAAO,OAAoC,IAA7B8pI,EAAW3mI,QAAQnD,KACzEqqI,MAAM5uH,KAAK+qH,MAAM13G,KAAKrT,OAC3BsuH,EAASj6F,MAASi6F,EAAStE,UAAYsE,EAASrE,SAAY38G,GAAee,GAC3EigH,EAASpE,SAAWoE,EAAStE,UAAa5kH,KAAMhY,KAAK6J,IAAI,EAAGq3H,EAASlpH,MAAsB,SAAdmG,EAAuB,GAAK,QACrG6iH,IACAE,EAASrpH,cAAgBqpH,EAASrpH,aAAa,GAAK,EAAGqpH,EAASrpH,aAAa,GAAIqpH,EAASrpH,aAAa,GAAK,IAEzF,cAAnBjF,KAAKi1C,UAA2B,CAChC,GAAI45E,GAAazhI,KAAKC,KAAK2S,KAAK/B,SAAW+B,KAAK8uH,eAC7B,KAAfD,IAAqBP,EAASrpH,aAAa,KAAO4pH,GAAcP,EAASrpH,aAAa7hB,OAAS,KAC/FkrI,EAASrpH,cAAgB4pH,EAAa,EAAGA,EAAYA,EAAa,IAO1E,GAJAP,EAASnpH,cAA8B,MAAdvK,EAAKgL,KAAe5F,KAAKgD,WAAWmoH,mBAAqBnrH,KAAKzV,OAAO4wB,yBAC1Fnb,KAAKzV,OAAO0c,4BAA4C,MAAdrM,EAAKgL,OAC/C0oH,EAASj6F,MAAQhmB,IAEjB9e,cAAcyQ,KAAKzV,OAAO0E,iBAAkB,CAC5C,GAAIjC,GAAYgT,KAAKzV,OAAOuC,eACxBiiI,EAAgB/rI,EAAE0G,IAAMsD,EACxBgiI,EAAoBR,EAAUxhI,EAC9BiiI,EAAgBF,EAAgBC,EAChCE,EAAclvH,KAAKzV,OAAO8K,aAAaE,SAAW,CACtD,IAA2B,SAAvB+4H,EAAS/iH,UAAsB,CAC3B4jH,EAAS/hI,KAAK2+B,MAAMkjG,GAAiB7hI,KAAK2+B,QAC9C,IAAIvpC,oBAAkB8rI,EAASv1H,aAAgBk2H,EAC1CX,EAASv1H,WAAa3L,KAAK2+B,MAAO/rB,KAAKzV,OAAO8K,aAAaE,SAAW,EAAI25H,IACxEZ,EAAS5pE,WAAa1kD,KAAKxb,MAAQ,CACtC8pI,EAASv1H,WAAao2H,GAAU,EAAI/hI,KAAK2+B,MAAMojG,GAAU,EACzDb,EAASv1H,WAAau1H,EAASv1H,WAAag2H,EAAgB3hI,KAAK4hE,MAAM+/D,GAAiBT,EAASv1H,UAC7Fq2H,GAASd,EAASv1H,WAAaiH,KAAKzV,OAAO8K,aAAaE,QAC5D+4H,GAASv1H,WAAaq2H,EAASH,EAAiB7hI,KAAKC,KAAK4hI,GAAiBjvH,KAAKzV,OAAO8K,aAAaE,SAC9F+4H,EAASv1H,WACfu1H,EAAS5pE,SAAW0qE,EAASpvH,KAAKxb,MAAQ4qI,EAASpvH,KAAKxb,MACxD8pI,EAASv1H,WAAaq2H,GAAUpvH,KAAKxb,MACjC8pI,EAAS5pE,SAAW1kD,KAAKzV,OAAO8K,aAAaE,SAAW+4H,EAASv1H,WACrEu1H,EAASh5H,YAAclI,KAAKC,KAAKihI,EAAS5pE,SAAW1kD,KAAKzV,OAAO8K,aAAaE,UAC9EyK,KAAKqvH,2BAGR,IAA2B,OAAvBf,EAAS/iH,WACV+iH,EAASv1H,YAAcu1H,EAAS5pE,UAE5BqqE,EADc3hI,KAAK2+B,OAAQuiG,EAASv1H,WAAa/L,EAAckiI,EAAcliI,GAAcA,GAC9D,CAC7B,GAAIsiI,GAAqB,EAAgBN,EAAoBE,EACxDF,EAAoBA,EAAoB,EACzCI,EAAShiI,KAAK2+B,MAAMgjG,EAAgBO,EACxChB,GAAS5pE,SAAW0qE,EAASpvH,KAAKxb,MAAQ4qI,EAASpvH,KAAKxb,KACxD,IAAI2qI,GAASb,EAAS5pE,SAAW1kD,KAAKzV,OAAO8K,aAAaE,QAC1D+4H,GAASv1H,WAAao2H,EAAS,EAAIA,EAAS,EAC5Cb,EAAS5pE,SAAWyqE,EAAS,EAAInvH,KAAKzV,OAAO8K,aAAaE,SAAW+4H,EAAS5pE,SAC9E4pE,EAASh5H,YAAclI,KAAKC,KAAKihI,EAASv1H,WAAaiH,KAAKzV,OAAO8K,aAAaE,UAChFyK,KAAKqvH,sBAIjBrvH,KAAKgsH,cAAgBhsH,KAAKjH,WAAau1H,EAASv1H,WAChDiH,KAAKuuH,YAAcD,EAAS5pE,SAC5B4pE,EAASj6F,MAASi6F,EAASh5H,cAAgB0K,KAAKzV,OAAO8K,aAAaC,YAAegY,GAAee,GAEtG,MAAOigH,IAEXxC,EAAuB3pI,UAAUktI,oBAAsB,WACnDrvH,KAAK8/D,gBAAiB,EACC,cAAnB9/D,KAAKi1C,WAAgD,YAAnBj1C,KAAKi1C,YACvCj1C,KAAK6/D,YAAiC,cAAnB7/D,KAAKi1C,UAA4Bj1C,KAAK/B,SAAW,EAAI+B,KAAK/B,SAAW,EACxF9X,SAAS6vD,cAAcuoB,SAG/ButD,EAAuB3pI,UAAUusI,aAAe,SAAU9zH,GACtD,GAEI20H,GAFA7mH,EAAQ1I,KACRlY,EAAQ8S,EAAKqK,aAAarK,EAAKmwH,OAE/Bn4F,EAAM9qC,EACNmP,EAAM7J,KAAK6J,IACX2sB,EAA6B,SAAnBhpB,EAAK2Q,WAAwBtU,EAAInP,EAAO,KAAMA,IAASA,IAAUmP,EAAInP,EAAQ,EAAG,GAAIA,EAAOA,EAAQ,EAQjH,OAPIkY,MAAKzV,OAAO0c,4BAA8BjH,KAAKzV,OAAOsL,iBAEvB,MAA3B+E,EAAK+K,aAAaC,MAA4C,MAA3BhL,EAAK+K,aAAaC,MAAiBhL,EAAKwK,OAASpF,KAAKiqB,SAAS7kB,QAClGwe,EAAU5jB,KAAKiqB,SAAShlB,cAGhC2e,EAAUA,EAAQtqB,OAAO,SAAU/U,EAAKsD,GAAO,MAAO+7B,GAAQl8B,QAAQnD,KAASsD,IAC3EmY,KAAKiqB,SAAShlB,aAAahV,aAAe2zB,EAAQ3zB,WAC3C2zB,IAEPhpB,EAAKqvH,UAAgC,SAAnBrvH,EAAK2Q,WAAwBvL,KAAKwvH,WAAW58F,MAC/DhP,EAAU5jB,KAAKgD,WAAWmnH,gBAAgBvvH,EAAKwK,OAEnDwe,EAAQjxB,KAAK,SAAUpO,EAAKsD,GACxB,GAAInC,GAASnB,KAAS6P,GAAgBsU,EAAMne,QAAUme,EAAM+mH,wBAA0B/mH,EAAMgnH,iBAI5F,OAHIhqI,KACA6pI,EAAO1nI,GAEJnC,QAEEqH,KAATwiI,IACA3rG,EAAUA,EAAQv4B,MAAM,EAAGkkI,EAAO,GACf,IAAf30H,EAAKmwH,OAAkC,IAAnBnnG,EAAQxgC,QAAgB4c,KAAKgD,WAAWsnH,iBAAiB1mG,EAAQ,GAAK,KAC1FA,GAAWA,EAAQ,GAAK,EAAGA,EAAQ,MAGpCA,IAGXkoG,EAAuB3pI,UAAUmiB,cAAgB,SAAU5iB,EAAQ8iB,EAAUxhB,GACzE,GAAI0lB,GAAQ1I,KAERpK,EAAWoK,KAAKzV,OAAOsL,eACvB9B,EAAUiM,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,4BACxD0/F,EAAa3vH,KAAKzV,OAAO0c,4BAA8BrR,CAC3DoK,MAAK4vH,0BAA0B5sI,EAC/B,IAAI4X,GAAO5X,EAAEgiB,YAAYW,cAAoD,MAApC3iB,EAAEgiB,YAAYW,aAAaC,MAAgB5F,KAAK0F,YAAYN,MACjGpF,KAAK0F,YAAYN,OAASpiB,EAAEgiB,YAAYI,KAAOpF,KAAK0F,YAAc1iB,EAAEgiB,WACxEhF,MAAKiqB,SAAWjqB,KAAKiqB,UAAYjnC,EAAEgiB,WACnC,IAAI6qH,GAAUj1H,EAAKuK,cAAc,GAAM,CACnCwqH,IAAc/0H,EAAKuK,cAAc,KAAOpR,IACxC87H,EAAUj1H,EAAKuK,cAAc,GAAKpR,EAAW,EAEjD,IACIrL,GADAonI,EAAU9vH,KAAKkhE,gBAAgB2uD,GAE/BpE,EAAS7wH,EAAKqK,YACdjF,MAAKzV,OAAO7F,cAAcvB,QAAQC,QAClC4c,KAAKyhE,iBAEkB,SAAvBzhE,KAAKzV,OAAO+C,SACZ0S,KAAKzV,OAAOK,QAAQvB,MAAMiE,OAAS,OAEvC,IAAIkhI,GAAUxuH,KAAKzV,OAAO+C,OAAO2C,WAAWvI,QAAQ,KAAO,EAAIsY,KAAK8F,QAAQ3c,wBAAwBmE,OAChG0S,KAAKzV,OAAOK,QAAQzB,wBAAwBmE,MAChD,KAAK0S,KAAKwsH,aAAa75H,KAAK,SAAU/Q,GAAS,MAAOA,KAAU8mB,EAAMtG,cAAiB,CACnF,GAAI2tH,GAAY/vH,KAAKgwH,cAAchwH,KAAK8F,QAAQ9M,UAAWw1H,EAAS5zH,EACpEoF,MAAKqH,WAAWi6D,YAAYquD,EAAa,EAAIG,EAASC,GAClDJ,GACA3vH,KAAKqH,WAAW4oH,mBAAmBH,EAAS,GASpD,GANI9vH,KAAKzV,OAAO0c,6BACZjH,KAAKkoC,OAAO7gC,WAAWi6D,YAAYquD,EAAa,EAAIG,EAAS,GACzDH,GACA3vH,KAAKkoC,OAAO7gC,WAAW4oH,mBAAmBH,EAAS,IAGvD9vH,KAAKzV,OAAO0c,2BAA4B,CACxC,GAAIi2C,GAAStiD,EAAKuK,aAClBzc,GAAQsX,KAAKkhE,gBAAgBhkB,EAAOA,EAAO95D,OAAS,IAAM4c,KAAKkhE,gBAAgBhkB,EAAO,GAAK,GAAK,GAC5FyyE,EACA3vH,KAAKkoC,OAAO7gC,WAAW6oH,uBAAuBxnI,GAG9CsX,KAAKkoC,OAAO7gC,WAAWg6D,gBAAgB34E,GAG3CinI,EACA3vH,KAAKqH,WAAW6oH,uBAAuBxnI,EAAOiS,UAAQ+2F,MAA8B,SAAtB/2F,UAAQC,KAAKC,MAG3EmF,KAAKqH,WAAWg6D,gBAAgB34E,EAAOiS,UAAQ+2F,MAA8B,SAAtB/2F,UAAQC,KAAKC,MAEnErY,oBAAkBd,EAAO4pC,aAC1BzpC,SAAOH,EAEX,IAAImd,EA2BJ,IA1BIjJ,EACI5S,EAAEkgB,yBACFrE,EAAQmB,KAAKzV,OAAOmO,aAAapS,cAAc,2BAA2BA,cAAc,SAElFtD,EAAE+f,qBAGH/f,EAAE+f,uBACPlE,EAAQmB,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,UAH7DuY,EAAQmB,KAAKzV,OAAO+7B,0BAA0BhgC,cAAc,SAOhEuY,EAAQmB,KAAKzV,OAAOK,QAAQtE,cAAc,cAAcA,cAAc,SAEtEuY,IACAhd,SAAOgd,GACPnd,EAAS,MAECse,KAAKzV,OAAOkhB,UAAYjpB,oBAAkBwd,KAAKzV,OAAOixB,aAMhE95B,EAAS8iB,GAJT9iB,EAASse,KAAKzV,OAAOkC,cAAc,UAC5BX,YAAY0Y,GAKnBxE,KAAKzV,OAAOuU,YAAgC,kBAAlB9b,EAAEof,aAA4E,IAAzCpC,KAAKzV,OAAO8K,aAAaC,YACxF,IAAK,GAAI7R,GAAI,EAAGA,EAAIuc,KAAKzV,OAAOuU,WAAYrb,IACxC/B,EAAOmK,SAAS,GAAGhK,QA0B3B,IAvBI+T,GACI5S,EAAEkgB,0BACFlD,KAAKzV,OAAOmO,aAAapS,cAAc,2BAA2BA,cAAc,YAAYwF,YAAYpK,GACxGse,KAAKoC,YAAmC,kBAArBpC,KAAKoC,YAAkCpC,KAAKy2C,MAAQz2C,KAAKoC,aAEtEpf,EAAE+f,qBAGH/f,EAAE+f,uBACP/C,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,YAAYwF,YAAYpK,GACzC,eAAhCse,KAAKzV,OAAO8R,kBACZ2D,KAAKoC,YAAmC,kBAArBpC,KAAKoC,YAAkCpC,KAAKy2C,MAAQz2C,KAAKoC,cALhFpC,KAAKzV,OAAO+7B,0BAA0BhgC,cAAc,YAAYwF,YAAYpK,GAQ5Ese,KAAK2sH,WAAWvpI,SAChBJ,EAAEgiB,YAAYG,cAAgBvK,EAAKuK,cAAgBle,YAAW+Y,KAAK2sH,YACnE3sH,KAAK2sH,WAAa3pI,EAAE+f,wBAA4B/C,KAAK2sH,cAIzD3sH,KAAK6oB,WAAW/8B,YAAYpK,GAC5Bse,KAAKoC,YAAmC,kBAArBpC,KAAKoC,YAAkCpC,KAAKy2C,MAAQz2C,KAAKoC,aAE5EpC,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAQ,CAC1C,IAAKgR,GAAgB4L,KAAKzV,SAA8B,OAAnBqQ,EAAK2Q,UAAoB,CAC1D,GAAIy/G,GAAMhrH,KAAK0rB,QAAQ1rB,KAAK0vH,kBAAoB1vH,KAAK+rH,UACrD/rH,MAAKisH,cAAe,CACpB,IAAIt9D,GAAO3uD,KAAK8F,QAAQ9M,SACxBgH,MAAK8F,QAAQ9M,UAAY21D,EAAOq8D,EAEpChrH,KAAK2gE,mBACL3gE,KAAKmH,SAASyiH,cAAc5pH,KAAKmwH,UAAU1E,EAAOA,EAAOroI,OAAS,IAAM4c,KAAKmwH,UAAU1E,EAAO,GAAK,IAEvGzrH,KAAKiqB,SAAWrvB,EACZoF,KAAKu3C,WAAgC,cAAnBv3C,KAAKi1C,WAAgD,YAAnBj1C,KAAKi1C,WACzDj1C,KAAK8F,QAAQiuC,OAEjB,IAAIunD,GAAWluG,KAAKC,KAAK2S,KAAK0vH,iBAAmB,EAC7C1vH,MAAKssH,WACLtsH,KAAKssH,UAAW,EAChBtsH,KAAKzV,OAAOmO,aAAaC,kBAAkBK,UAAYgH,KAAK0rB,QAAQ1rB,KAAKosH,WAAWhpI,OAAS,IAE5F4c,KAAKzV,OAAO8K,aAAaC,cAAgBgmG,GAA+B,IAAlBmwB,EAAOroI,SAC9D4c,KAAKssH,UAAW,EAChBtsH,KAAKzV,OAAOmO,aAAaC,kBAAkBK,UAAYgH,KAAK0rB,QAAQ1rB,KAAKosH,WAAWhpI,OAAS,IAE3E,kBAAlBJ,EAAEof,aAAuE,MAApCpf,EAAEgiB,YAAYW,aAAaC,MAChE5F,KAAKzV,OAAOsoB,OAAO5B,OAEvBjR,KAAKowH,UAAUptI,GACfgd,KAAKiuH,YAAYjrI,GACjBgd,KAAKqwH,WAAWrtI,GACXgd,KAAKswH,gBACNtwH,KAAKswH,cAAgBtwH,KAAKzV,OAAO4mC,cAAc,GAAGhoC,wBAAwBO,MAGlFoiI,EAAuB3pI,UAAUytI,0BAA4B,SAAU5sI,GACnE,GAAIgd,KAAKzV,OAAO0c,4BAA8BjH,KAAKzV,OAAOsL,gBAAqD,IAAnC7S,EAAEgiB,YAAYG,cAAc,GAAU,CAC9G,GAAIye,MACAmK,EAAa/tB,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,2BAC/D,KAAKjtC,EAAE+f,sBAAwB/f,EAAEgiB,YAAYG,cAAc/hB,OAAS2qC,EAAY,CAC5E/tB,KAAK2sH,WAAa3pI,EAAEgiB,YAAYG,aAChC,KAAK,GAAI1hB,GAAI,EAAGA,EAAIsqC,EAAYtqC,IAC5BmgC,EAAQ1/B,KAAKT,EAEjBT,GAAEgiB,YAAYG,cAAgBye,MAEzB5gC,GAAE+f,uBACF/C,KAAK2sH,WAAWvpI,SACjB4c,KAAK2sH,WAAa1lI,YAAWjE,EAAEgiB,YAAYG,gBAE/CniB,EAAEgiB,YAAYG,cAAgBle,YAAW+Y,KAAK2sH,YAC9C3pI,EAAEgiB,YAAYG,cAAcK,OAAO,EAAGuoB,MAIlD+9F,EAAuB3pI,UAAUiuI,UAAY,SAAUptI,GACnD,GAAuB,YAAnBgd,KAAKi1C,WAA8C,cAAnBj1C,KAAKi1C,UAAzC,CAGA,GAAI7vD,GAAM4a,KAAKzV,OAAO4mC,cAAcnxB,KAAK/B,SAE9B7Y,GAAIwK,MAAMoQ,KAAK+7B,WACrBgY,OAAQ2C,eAAe,IAC5B12C,KAAKzV,OAAOggC,UAAU6D,SAAShpC,EAAIslC,aAAa,iBAAkB,KAClE1qB,KAAKi1C,UAAYj1C,KAAKy2C,QAE1Bq1E,EAAuB3pI,UAAU8rI,YAAc,SAAUjrI,GACrD,GAAIgd,KAAKysH,aAAc,CACnB,GAAI9iI,GAAOqW,KAAKzV,OAAOuL,mBACnBF,EAAW5S,GAAKgd,KAAKzV,OAAOsL,eAC5B5I,EAAQ+S,KAAKzV,OAAO8R,gBACpBsb,EAAU30B,IAAM2G,GAAkB,SAAVsD,GAA8B,UAAVA,EAAoBjK,EAAE+f,qBAChE/f,EAAEkgB,yBACR,MAAMtN,GAAaA,GAAY+hB,IAAa3X,KAAKzV,OAAOiE,aAAaL,cAC9D6R,KAAKzV,OAAOmpD,aAAelxD,oBAAkBwd,KAAKuwH,gBAAiB,CACtE,GAAInrI,GAAM4a,KAAKmxB,cAAcnxB,KAAKuwH,eAClC,IAAI/oI,OAAOC,KAAKuY,KAAKo2C,aAAahzD,QAAUgC,IAAQ4a,KAAK8F,QAAQxf,cAAc,gBAAiB,CAC5F,GAAIklD,GAAQpmD,EAAI+D,wBAAwBO,GACpC8hD,GAAQxrC,KAAK8F,QAAQrc,cAAgB+hD,EAAQxrC,KAAKzV,OAAOuC,iBACzDkT,KAAKzV,OAAOuxB,QAAS,EACrB9b,KAAKzV,OAAOmpD,WAAWklC,UAAUxzF,IAGzC,GAAIA,GAAO4a,KAAK8F,QAAQxf,cAAc,kBAAoBkB,OAAOC,KAAKuY,KAAKo2C,aAAahzD,OAAQ,CAC5F,GAAI2e,GAAU9a,YAAW+Y,KAAKuiD,oBAAoBviD,KAAKuwH,gBACvDvwH,MAAKo2C,YAAcp2C,KAAKwwH,qBAAqBzuH,IAGrD/B,KAAKqwH,WAAWrtI,KAGxB8oI,EAAuB3pI,UAAUquI,qBAAuB,SAAUzuH,GAC9D,GAAI0uH,MAAeplI,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQxE,iBAAiB,gBAC/DwP,EAAWoK,KAAKzV,OAAOsL,eACvBvT,EAAO0d,KAAKzV,OAAOmpD,WAAWg9E,qBAAqBD,EAAU,GAAI1uH,EAUrE,OATInM,KACoC,eAAhCoK,KAAKzV,OAAO8R,gBACZ/Z,EAAO0d,KAAKzV,OAAOmpD,WAAWg9E,qBAAqBD,EAAU,GAAI1uH,IAGjEzf,EAAO0d,KAAKzV,OAAOmpD,WAAWg9E,qBAAqBD,EAAU,GAAI1uH,GACjEzf,EAAO0d,KAAKzV,OAAOmpD,WAAWg9E,qBAAqBD,EAAU,GAAI1uH,KAGlEzf,GAEXwpI,EAAuB3pI,UAAUkuI,WAAa,SAAUrtI,GACpD,GAAI2G,GAAOqW,KAAKzV,OAAOuL,mBACnBF,EAAW5S,GAAKgd,KAAKzV,OAAOsL,eAC5B5I,EAAQ+S,KAAKzV,OAAO8R,gBACpBsb,EAAU30B,IAAM2G,GAAkB,SAAVsD,GAA8B,UAAVA,EAAoBjK,EAAE+f,qBAAuB/f,EAAEkgB,yBAC/F,MAAMtN,GAAaA,GAAY+hB,IAAa3X,KAAKysH,cAAgBzsH,KAAKktC,QAAUltC,KAAKzV,OAAOK,QAAQtE,cAAc,eAAgB,CAC9H,GAAIqqI,GAAoD,QAA5C3wH,KAAKzV,OAAOiE,aAAauQ,gBAA4BiB,KAAK8F,QAAQ9M,UAAYgH,KAAKzV,OAAOuC,eAClGw/H,EAAuD,WAA5CtsH,KAAKzV,OAAOiE,aAAauQ,gBACjCiB,KAAKzV,OAAO8K,aAAaC,cAAgB0K,KAAK4wH,SACjDD,GAASrE,KACTtsH,KAAKzV,OAAOuxB,QAAS,EACrB9b,KAAKzV,OAAOuuF,eAIxBgzC,EAAuB3pI,UAAU0uI,YAAc,SAAU7tI,GAChDR,oBAAkBQ,EAAEwB,SACrBwb,KAAKxb,MAAQxB,EAAEwB,MACfwb,KAAK4wH,QAAUxjI,KAAKC,KAAKrK,EAAEwB,MAAQwb,KAAKzV,OAAO8K,aAAaE,WAEhEyK,KAAKgD,WAAWqnH,mBAAmBrnI,EAAEof,cAChC,UAAW,YAAa,YAAa,WAAY,aAAc,cAAWrV,IAC1E4F,KAAK,SAAU/Q,GAAS,MAAOoB,GAAEof,cAAgBxgB,KAClDoe,KAAKyhE,iBAETzhE,KAAK2gE,mBACL3gE,KAAK8wH,oBAAoB9tI,EAAEof,cAG/B0pH,EAAuB3pI,UAAUw+E,iBAAmB,SAAUrzE,GAC1D,GAAI5E,GAAQsX,KAAKzV,OAAO0c,2BACpBjH,KAAKkhE,gBAAgBlhE,KAAKzV,OAAOpH,QAAQC,OAAS4c,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAS,GAAK,KAAO,MAC7G,IAAI4c,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAIk7H,GAA8D,IAAzC/wH,KAAKzV,OAAO8K,aAAaC,aAAqB9N,OAAOC,KAAKuY,KAAK0rB,SAAStoC,QAAU,EACvG4c,KAAK0rB,QAAQ,GAAK1rB,KAAK0rB,QAAQ1rB,KAAK0vH,iBAAmB,EAE3DqB,GAAoBA,EADU/wH,KAAK8F,QAAQozC,aACuB63E,EAAoB,EAEtF/wH,KAAKqH,WAAWs5D,iBAAiBowD,EAAmBroI,OAEnD,CACD,GAAIo2E,GAAiBvvE,cAAcyQ,KAAKzV,OAAO0E,kBAAoB+Q,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAAUkK,EACzGA,EAAU0S,KAAK0rB,QAAQt3B,GAAgB4L,KAAKzV,QAAUyV,KAAKyvH,wBAA0BzvH,KAAK0vH,iBAChG1vH,MAAKqH,WAAWs5D,iBAAiB7B,EAAep2E,GAEhDsX,KAAKzV,OAAO0c,6BACZjH,KAAKkoC,OAAO7gC,WAAWs5D,iBAAiB,EAAGj4E,GACvCsX,KAAKzV,OAAOsL,iBACZmK,KAAKqH,WAAW2pH,wBAAwB,EAAGtoI,GAC3CsX,KAAKkoC,OAAO7gC,WAAW2pH,wBAAwB,EAAGtoI,MAI9DojI,EAAuB3pI,UAAUssI,eAAiB,SAAU9/D,EAAM/zD,GAC9D,GAAI8N,GAAQ1I,KACRixH,EAAS78H,GAAgB4L,KAAKzV,QAAWyV,KAAKyvH,wBAA0BzvH,KAAK0vH,iBAC7EtqH,EAAO,CACCpF,MAAK0rB,QAAQulG,GAASjxH,KAAK+rH,UAcvC,OAbA/rH,MAAKosH,WAAWz5H,KAAK,SAAUw+G,GAC3B,GAAIka,GAAUjxG,OAAO+2F,GACjBvkD,EAAS+B,GAAQjmD,EAAMgjB,QAAQylF,IAAYka,IAAY4F,GAAStiE,EAAOjmD,EAAMgjB,QAAQylF,EASzF,OARIvkD,KACIlkD,EAAM0jH,WAAWhpI,OAAS,GAAM,GAAKioI,EAAQp7H,aAAeyY,EAAM0jH,WAAW1jH,EAAM0jH,WAAWhpI,OAAS,IACpGurE,GAAQjmD,EAAMgjB,QAAQhjB,EAAM0jH,WAAWhpI,OAAS,KACnDioI,GAAoB,GAExBzwH,EAAKmwH,MAAQM,EAAU,GAAM,EAAI,EAAI,EACrCjmH,EAAOhY,KAAK6J,IAAI,EAAG7J,KAAKyrD,IAAInwC,EAAM1F,WAAW8nH,QAAQO,GAAU3iH,EAAMkoH,WAElEhkE,IAEJxnD,GAEX0mH,EAAuB3pI,UAAU6tI,cAAgB,SAAUrhE,EAAMuiE,EAASt2H,EAAMu2H,OAC/DpkI,KAAT6N,KACAA,GAASwK,KAAMpF,KAAKyuH,eAAe9/D,QAC9B1pD,aAAejF,KAAKgD,WAAWmnH,gBAAgBvvH,EAAKwK,MAE7D,IAAI2lH,IAASnwH,EAAKqK,aAAa,IAAM,GAAK,EACtC8qH,EAAY/vH,KAAKmwH,UAAUpF,GAC3BqG,EAAepxH,KAAKmwH,UAAUv1H,EAAKqK,aAAarK,EAAKqK,aAAa7hB,OAAS,GAC3E+tI,KACAv2H,EAAOoF,KAAKiqB,SAEhB,IAAIvkC,GAASqqI,EAAYphE,EACrB3uD,KAAKmwH,UAAUpF,EAAQ,GAAKqG,EAAgBziE,EAAOuiE,EAAWlxH,KAAKmwH,UAAUpF,EAAQ,GAAKgF,EAC1FsB,EAAcrxH,KAAK0rB,QAAQ9wB,EAAKqK,aAAarK,EAAKqK,aAAa7hB,OAAS,IACxE4c,KAAKksH,WAAWtxH,EAAKqK,aAAa,IAClCqsH,EAAcl9H,GAAgB4L,KAAKzV,QAAUyV,KAAKyvH,wBAA0BzvH,KAAK0vH,gBAIrF,OAHIhqI,GAAS2rI,EAAcrxH,KAAK0rB,QAAQ4lG,KACpC5rI,GAAWA,EAAS2rI,EAAerxH,KAAK0rB,QAAQ4lG,IAE7C5rI,GAEXomI,EAAuB3pI,UAAUguI,UAAY,SAAUpF,GACnD,MAAO39H,MAAKyrD,IAA0B,EAAtB74C,KAAK0rB,QAAQq/F,GAA0C,EAA9B/qH,KAAK0rB,QAAQ1rB,KAAKuxH,YAE/DzF,EAAuB3pI,UAAUqvI,UAAY,WACzC,GAAI9oH,GAAQ1I,IACZ,OAAO,UAAUpV,EAAS+7C,EAASp7B,EAAWvoB,EAAGyuI,EAASvnC,GAClDvvF,UAAQ+2F,OAAS+/B,GAAWvnC,IAAUxhF,EAAMujH,cAC5CvjH,EAAMne,OAAO+3C,aAEjB,IAAIqtF,GAAajnH,EAAMne,OAAO0c,4BAA8ByB,EAAMne,OAAOsL,eACrEk0H,EAAyB,MAAjBpjF,EAAQ/gC,KAChBlc,EAAMgf,EAAMuhB,SAASyB,QAAUhjB,EAAMuhB,SAASyB,QAAQhiC,IAAM,KAC5D4D,EAASob,EAAM5C,QAAQ3c,wBAAwBmE,OAC/CvD,EAAI2e,EAAMw4D,gBAAgB6oD,EAAQrhH,EAAM1F,WAAWmoH,mBAAmB,GAAK,EAAIziH,EAAMuhB,SAAS9kB,cAAc,GAAK,GACjH3Z,EAAIkd,EAAMsnH,cAAchtI,EAAE0G,IAAK4D,EAAQy8H,GAASrgI,IAAQ1G,EAAE0G,IAAMgf,EAAMuhB,aAAWl9B,IAAW,EAC5FwC,eAAcmZ,EAAMne,OAAO0E,kBAAoByZ,EAAMhD,aAAegD,EAAMhD,YAAY3M,YAAcgxH,IACpGv+H,EAAIkd,EAAMhD,YAAY3M,WAAa2P,EAAMne,OAAOuC,gBAEpD4b,EAAMrB,WAAWi6D,YAAYquD,EAAa,EAAI5lI,EAAGqD,KAAKyrD,IAAIrtD,EAAGkd,EAAMgjB,QAAQhjB,EAAM6oH,YAC7E5B,GACAjnH,EAAMrB,WAAW4oH,mBAAmBlmI,EAAG,GAEvCwF,cAAcmZ,EAAMne,OAAO0E,kBAAoB86H,GAC/CrhH,EAAMne,OAAOsoB,OAAO,mBAAqB6I,SAAS,IAElDhT,EAAMne,OAAO0c,8BAAgC1X,cAAeA,eAAemZ,EAAMne,OAAO0E,oBACxFyZ,EAAMw/B,OAAO7gC,WAAWi6D,YAAYquD,EAAa,EAAI5lI,EAAG,GACpD4lI,GACAjnH,EAAMw/B,OAAO7gC,WAAW4oH,mBAAmBlmI,EAAG,MAK9D+hI,EAAuB3pI,UAAUoqB,UAAY,WACzCvM,KAAKzV,OAAOsoB,OrEzLoB,oCqE0L5B7S,KAAKqsH,aAAkC,YAAnBrsH,KAAKi1C,WAA8C,cAAnBj1C,KAAKi1C,UACzDj1C,KAAKzV,OAAOggC,UAAUvqB,KAAKw2C,kBAErBjnD,eACNyQ,KAAKi1C,UAAYj1C,KAAKy2C,QAG9Bq1E,EAAuB3pI,UAAUkjI,YAAc,SAAUn2H,GACrD,GAAI8Q,KAAKqsH,cAAgBrsH,KAAK0xH,eAAexiI,EAAK+O,UAAW,CACzD,GAAIujE,GAAY/pE,GAAmBuI,KAAK8F,QAAQnN,mBAC5CE,EAAS3J,EAAK9J,IAAI+D,wBAAwBO,IAC1C4D,EAAS0S,KAAK8F,QAAQ3c,wBAAwBmE,OAC9Cg/H,EAAWh/H,EAASuL,EACpB84H,EAAerF,EAAWzzH,EAASvL,EAAS0S,KAAKswH,cAAgBz3H,EACjE+4H,EAAatF,EAAW9qD,EAAUl0E,OAASqkI,EAAenwD,EAAUl0E,OAASqkI,CACjF3xH,MAAKqH,WAAWi6D,YAAYE,EAAU94E,MAAOkpI,GAEjD5xH,KAAKqsH,aAAc,GAEvBP,EAAuB3pI,UAAUuvI,eAAiB,SAAU5pI,GACxD,GAAI+pI,GAAY7xH,KAAKzV,OAAOmO,aAAaC,kBACrCm5H,EAAkB1kI,KAAK4hE,MAAM6iE,EAAUpoI,aAAeuW,KAAKzV,OAAOuC,gBAAkB,CAExF,OAAOhF,IADSkY,KAAK4wH,QAAU5wH,KAAKzV,OAAO8K,aAAaE,SAAYu8H,GAGxEhG,EAAuB3pI,UAAU4vI,2BAA6B,SAAU7iI,GACpE,GAAI8iI,GAAYhyH,KAAK8uH,eACjBmD,EAAa7kI,KAAKC,MAAM6B,EAAKwqH,SAAW,GAAKsY,GAC7CE,EAAchjI,EAAKwqH,SAAWxqH,EAAK6J,YAAci5H,EAAYA,EAAY,EACzEG,EAAajjI,EAAKwqH,SAAWxqH,EAAK6J,YAAei5H,EAAYA,EAAaA,EAAY,CAQ1F,IAPAhyH,KAAK4sH,YAAY1oI,KAAK8b,KAAKgD,WAAWI,MAAM6uH,GAAY/iI,EAAKwqH,SAAWxqH,EAAK6J,WAAam5H,EAAcC,IACpGnyH,KAAKzV,OAAOsL,iBACZmK,KAAK6sH,eAAe3oI,KAAK8b,KAAKgD,WAAWC,aAAagvH,GAAY/iI,EAAKwqH,SAAWxqH,EAAK6J,WAAam5H,EAAcC,IAC9E,eAAhCnyH,KAAKzV,OAAO8R,iBACZ2D,KAAK8sH,cAAc5oI,KAAK8b,KAAKgD,WAAWG,iBAAiB8uH,GAAY/iI,EAAKwqH,SAAWxqH,EAAK6J,WAAam5H,EAAcC,MAG5G,IAAbjjI,EAAK6O,IAAc,CACnB,GAAIq0H,GAAgBpyH,KAAK0F,YAAYT,YAChCmtH,KACDA,GAAiB,EAAG,IAExB92H,GAAoB0E,KAAKzV,OAAQyV,KAAK4sH,YAAa19H,EAAK6J,YACpDiH,KAAKzV,OAAOsL,iBACZyF,GAAoB0E,KAAKzV,OAAQyV,KAAK6sH,eAAgB39H,EAAK6J,YACvB,eAAhCiH,KAAKzV,OAAO8R,iBACZf,GAAoB0E,KAAKzV,OAAQyV,KAAK8sH,cAAe59H,EAAK6J,YAGlE,KAAK,GAAItV,GAAI,EAAGA,EAAI2uI,EAAchvI,OAAQK,IACtCuc,KAAKgD,WAAWI,MAAMgvH,EAAc3uI,IAAMuc,KAAK4sH,YAAYpnH,OAAO,EAAGwsH,GACjEhyH,KAAKzV,OAAOsL,iBACZmK,KAAKgD,WAAWC,aAAamvH,EAAc3uI,IAAMuc,KAAK6sH,eAAernH,OAAO,EAAGwsH,GAC3C,eAAhChyH,KAAKzV,OAAO8R,kBACZ2D,KAAKgD,WAAWG,iBAAiBivH,EAAc3uI,IAAMuc,KAAK8sH,cAActnH,OAAO,EAAGwsH,IAI9FhyH,MAAK4sH,eACL5sH,KAAK4sH,eACL5sH,KAAK6sH,oBAGbf,EAAuB3pI,UAAUkwI,eAAiB,WAC1CryH,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAAU4c,KAAKzV,OAAOjG,OAAOlB,SAC/D4c,KAAK4wH,QAAUxjI,KAAKC,KAAK2S,KAAKzV,OAAOjG,OAAOlB,OAAS4c,KAAKzV,OAAO8K,aAAaE,YAGtFu2H,EAAuB3pI,UAAU4qI,cAAgB,SAAUl+H,GACvD,GAAI6Z,GAAQ1I,IACZA,MAAKzV,OAAOsE,GAAQoe,GAAWjN,KAAK6wH,YAAa7wH,MACjDA,KAAKzV,OAAOy2C,iBAAiBna,GAAkB7mB,KAAKuM,UAAU8G,KAAKrT,OACnEA,KAAKzV,OAAOy2C,iBAAiBa,GAAoB7hC,KAAKqM,YAAYgH,KAAKrT,OACvEA,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAKsM,eAAe+G,KAAKrT,OAC7EA,KAAKzV,OAAOy2C,iBrE7rBK,cqE6rBgChhC,KAAKqlH,YAAYhyG,KAAKrT,OACvEA,KAAKzV,OAAOsE,GAAQwf,GAAqBrO,KAAK4nB,mBAAoB5nB,MAClEA,KAAKzV,OAAOsE,GrElWU,qBqEkWuBmR,KAAKsyH,iBAAkBtyH,MACpEA,KAAKzV,OAAOsE,GrEzUU,qBqEyUuBmR,KAAKuyH,iBAAkBvyH,MACpEA,KAAKzV,OAAOsE,GrExUsB,mCqEwUuBmR,KAAKwyH,gBAAiBxyH,MAC/EA,KAAKzV,OAAOsE,GrE7TqB,kCqE6TuBmR,KAAKyyH,eAAgBzyH,MAC7EA,KAAKzV,OAAOsE,GrEpUW,sBqEoUuBmR,KAAKiuH,YAAajuH,MAChEA,KAAKzV,OAAOsE,GrEzUkB,8BqEyUuBmR,KAAKi/D,YAAaj/D,MACvEA,KAAKzV,OAAOsE,GrEpUa,wBqEoUuBmR,KAAK0yH,aAAc1yH,MACnEA,KAAKzV,OAAOsE,GrEnUG,aqEmUuBmR,KAAK2yH,YAAa3yH,MACxDA,KAAKzV,OAAOsE,GAAQ+jI,GAAuB5yH,KAAKmP,eAAgBnP,MAChEA,KAAKzV,OAAOsE,GrE3UiB,6BqE2UuBmR,KAAK6yH,WAAY7yH,MACrEA,KAAKzV,OAAOsE,GrEpOoB,iCqEoOuBmR,KAAK+xH,2BAA4B/xH,MACxFA,KAAKzV,OAAOsE,GrE7Ne,2BqE6NuBmR,KAAKqyH,eAAgBryH,MACvEA,KAAKzV,OAAOsE,GrE5NgB,6BqE4NuBmR,KAAK8yH,uBAAwB9yH,KAEhF,KAAK,GADDq0B,GAAQr0B,KAAKkzC,QACRzvD,EAAI,EAAGA,EAAI4wC,EAAMjxC,OAAQK,IAC9Buc,KAAKzV,OAAOsE,GAAQwlC,EAAM5wC,GAAK,SAAUuc,KAAK4gD,cAAe5gD,KAEjE,IAAIwT,GAAK,WACL9K,EAAMvB,SAASgiH,QAAQ,SAAUqE,GAAc,MAAO9kH,GAAM6kH,eAAeC,IAAgB9kH,EAAM8oH,YACjG,IAAIluI,GAAOolB,EAAMne,MACjB,IAAIjH,EAAKi0C,mBAAqBj0C,EAAKuhF,eAAgB,CAC/Cn8D,EAAM5C,QAAQ9M,UAAY1V,EAAKuhF,eAAen7E,GAC9C,IAAIqpI,IAAiBxnH,UAAW,OAAQo+G,SAAUjhH,EAAMvB,SAASxB,aAAasjH,KAC1E9X,OAAQ7tH,EAAKuhF,eAAgBnsB,aAAcp1D,EAAKsH,QACpD8d,GAAM6kH,eAAewF,GACjBzvI,EAAK2jB,6BACLyB,EAAM5C,QAAQmyB,WAAa30C,EAAKuhF,eAAel7E,MAGvD+e,EAAMne,OAAOstB,IAAI3K,GAAcsG,GAEnCxT,MAAKzV,OAAO6lB,GAAGlD,GAAcsG,EAAIxT,OAGrC8rH,EAAuB3pI,UAAUgtB,eAAiB,SAAU7sB,GACxDA,EAAK8zD,YAAcp2C,KAAKo2C,YACxB9zD,EAAK4qD,MAAQltC,KAAKktC,MAClB5qD,EAAK+zD,SAAWr2C,KAAKq2C,UAEzBy1E,EAAuB3pI,UAAU2wI,uBAAyB,SAAU5jI,GAChE8Q,KAAKghF,kBAAoB9xF,EAAK45C,QAElCgjF,EAAuB3pI,UAAU0wI,WAAa,SAAU3jI,GACpD,GAAIgK,GAAYD,GAAmB+G,KAAKzV,OAAQ2E,EAAK5M,KAChDE,qBAAkB0W,KACnBhK,EAAK5M,KAAO0d,KAAKzV,OAAO8O,wBAAwBH,KAGxD4yH,EAAuB3pI,UAAU88E,YAAc,SAAU/vE,GACjD8Q,KAAKysH,gBACAzsH,KAAKktC,OAASh+C,EAAK5M,MACpB0d,KAAKgzH,sBAAsB9jI,EAAK5M,MAEpC0d,KAAKktC,OAAQ,IAGrB4+E,EAAuB3pI,UAAU6wI,sBAAwB,SAAU1wI,GAC/D,GAAI4W,GAAYD,GAAmB+G,KAAKzV,OAAQjI,EAC3CE,qBAAkB0W,KACnB8G,KAAKzV,OAAO8O,wBAAwBH,GAAa5W,IAGzDwpI,EAAuB3pI,UAAUkqB,YAAc,SAAUnd,GAC5B,kBAArBA,EAAKkT,cACLpC,KAAKoC,YAAclT,EAAKkT,aAEvBlT,EAAK+3B,QACNjnB,KAAKzV,OAAOsoB,OrE7Tc,6BqE6T0B3jB,IAG5D48H,EAAuB3pI,UAAUowI,iBAAmB,SAAUvvI,GAE1D,GAAI8Q,GAAM3N,SAAS6vD,aACnB,IAAIliD,EAAIrJ,UAAUC,SAAS,cACpB1H,IAAmB,YAAbA,EAAE6L,QAAqC,cAAb7L,EAAE6L,QAAyB,CAC9D,GAAIoP,GAAWmwB,SAASt6B,EAAI5K,cAAcwhC,aAAa,iBAAkB,GACzE,IAAI1nC,IAAmB,cAAbA,EAAE6L,QAAuC,YAAb7L,EAAE6L,QAAuB,CAC3D,GAAIgjI,GAAY7xH,KAAKzV,OAAOmO,aAAaC,iBAC5B,eAAb3V,EAAE6L,OAAyBoP,GAAY,EAAIA,GAAY,EACvD+B,KAAK/B,SAAWA,EAChB+B,KAAK+7B,UAAY3N,SAASt6B,EAAI42B,aAAa,iBAAkB,GAC7D,IAAItlC,GAAM4a,KAAKzV,OAAO4mC,cAAclzB,GAChCmH,EAAOpF,KAAKzV,OAAO8K,aAAaC,YAChCw8H,EAAkB1kI,KAAK4hE,MAAM6iE,EAAUpoI,aAAeuW,KAAKzV,OAAOuC,gBAAkB,EACpFuO,GAAW,CACX7Y,qBAAkB4C,KAClBiW,GAAW,GACO,cAAbrY,EAAE6L,QAA0BuW,IAASpF,KAAK4wH,QAAU,GAAoB,YAAb5tI,EAAE6L,QAAiC,IAATuW,KACtF/J,GAAW,IAGfA,GAAa9C,GAAcnT,EAAK4a,KAAKzV,SAAwB,cAAbvH,EAAE6L,QAC9C+J,GAAexT,EAAkC,EAA7B4a,KAAKzV,OAAOuC,iBAAoC,YAAb9J,EAAE6L,QAC7DmR,KAAKi1C,UAAYjyD,EAAE6L,OACnBgjI,EAAU74H,UAAyB,cAAbhW,EAAE6L,QACnBoP,EAAW6zH,GAAmB9xH,KAAKzV,OAAOuC,eAAiBmR,EAAW+B,KAAKzV,OAAOuC,gBAGvFkT,KAAKi1C,UAAYj1C,KAAKy2C,QAErBlnD,cAAeA,eAAeyQ,KAAK8/D,iBACpC9/D,KAAKzV,OAAOggC,UAAUtsB,MAKtC6tH,EAAuB3pI,UAAUqwI,gBAAkB,SAAUxvI,GACzDgd,KAAKuwH,eAAiBvtI,EAAE8E,KACxB,IAAIia,GAAU9a,YAAW+Y,KAAKuiD,oBAAoBv/D,EAAE8E,OACpD9E,GAAEV,KAAOkF,OAAOC,KAAKuY,KAAKo2C,aAAahzD,OAAS4c,KAAKo2C,YAAcr0C,GAEvE+pH,EAAuB3pI,UAAUuwI,aAAe,SAAUpwI,GACtD,GAAIyoI,GAAQ39H,KAAKC,MAAM2S,KAAKuwH,eAAiB,GAAKvwH,KAAK8uH,gBACnDhnI,EAAQkY,KAAKuwH,gBAAmBxF,EAAQ,GAAK/qH,KAAK8uH,cACtD9uH,MAAKgD,WAAWI,MAAM2nH,GAAOjjI,GAAOxF,KAAOA,EACvC0d,KAAKgD,WAAWC,aAAa8nH,KAC7B/qH,KAAKgD,WAAWC,aAAa8nH,GAAOjjI,GAAOxF,KAAOA,GAElD0d,KAAKgD,WAAWG,iBAAiB4nH,KACjC/qH,KAAKgD,WAAWG,iBAAiB4nH,GAAOjjI,GAAOxF,KAAOA,IAG9DwpI,EAAuB3pI,UAAUmqB,eAAiB,SAAUpd,GAC/B,WAArBA,EAAKkT,aAAiD,SAArBlT,EAAKkT,aAA+C,WAArBlT,EAAKkT,cACrEpC,KAAKyhE,iBACLzhE,KAAK0hE,wBACD1hE,KAAKysH,eACoB,WAArBv9H,EAAKkT,cACLpC,KAAKq2C,UAAW,GAEpBr2C,KAAKktC,OAAQ,EACbltC,KAAKuwH,eAAiBvwH,KAAKy2C,MAC3Bz2C,KAAKo2C,eACLp2C,KAAKzV,OAAOmpD,WAAWu/E,yBAG3BjzH,KAAKzV,OAAO0c,4BAAmD,oBAArB/X,EAAKkT,aAC5CpC,KAAK0F,YAAYP,eAAiBnF,KAAK0F,YAAYP,cAAc,GAAK,GACzEnF,KAAKzV,OAAOi5F,uBAAuBt0F,EAAKgkB,aAGhD44G,EAAuB3pI,UAAUwwI,YAAc,WACvC3yH,KAAKzV,OAAO8J,sBAAwB2L,KAAKysH,eACpCzsH,KAAKzV,OAAOiE,aAAaL,cAAgB3G,OAAOC,KAAKuY,KAAKo2C,aAAahzD,QACpE4c,KAAKzV,OAAOiE,aAAak3E,aAAe1lE,KAAKktC,SACjDltC,KAAKzV,OAAOuxB,QAAS,IAIjCgwG,EAAuB3pI,UAAUsrI,gBAAkB,WAC/C,GAAIztH,KAAKzV,OAAOmpD,YAAc1zC,KAAKzV,OAAOiE,aAAaL,cAAgB6R,KAAKysH,cACpEzsH,KAAKzV,OAAOK,QAAQtE,cAAc,eAAgB,CAClD,GAAI8sE,GAAWpzD,KAAKzV,OAAOK,QAAQtE,cAAc,gBAC7C4sI,EAAUlzH,KAAKzV,OAAOK,QAAQtE,cAAc,cAChD,IAAI8sE,GAAY8/D,EAAS,CACrB,GAAInxH,GAAUqxD,EAAWnsE,YAAW+Y,KAAKuiD,oBAAoBviD,KAAKuwH,iBAC5DtpI,YAAW+Y,KAAK0sH,aACtB1sH,MAAKo2C,YAAcp2C,KAAKwwH,qBAAqBzuH,MAK7D+pH,EAAuB3pI,UAAUgxI,mBAAqB,WAClD,GAAIzqH,GAAQ1I,IACZA,MAAKzV,OAAO2L,aAAaoD,OAAO,SAAUtW,GACtC0lB,EAAMgkH,aAAa1pI,EAAEX,OAASqmB,EAAM+tC,SAG5Cq1E,EAAuB3pI,UAAUswI,eAAiB,SAAUvjI,GACxD,GAAI8Q,KAAKysH,aAAc,CACdjlI,OAAOC,KAAKuY,KAAK0sH,cAActpI,QAChC4c,KAAKmzH,qBAETnzH,KAAKktC,OAAQ,CACb,IAAI9nC,GAAOpF,KAAKzV,OAAO8K,aAAaC,WAChC8P,GAAO,GAAiD,QAA5CpF,KAAKzV,OAAOiE,aAAauQ,iBACrCiB,KAAKktC,OAAQ,EACbltC,KAAK4gD,gBACL1xD,EAAK0pF,WAAY,EACjB54E,KAAK8F,QAAQ9M,UAAY,GAEzBoM,EAAOpF,KAAK4wH,QAAU,GAAiD,WAA5C5wH,KAAKzV,OAAOiE,aAAauQ,iBACpDiB,KAAKktC,OAAQ,EACbltC,KAAKzV,OAAOoJ,eAAgB0B,cAAgBC,YAAa0K,KAAK4wH,QAAU,KAAO,GAC/E1hI,EAAK0pF,WAAY,EACjB54E,KAAK8F,QAAQ9M,UAAYgH,KAAK0rB,QAAQ1rB,KAAKosH,WAAWhpI,WAKlE0oI,EAAuB3pI,UAAUogE,oBAAsB,SAAUz6D,GAE7D,MADWkY,MAAKozH,iBAAiBtrI,GAAO,GAAO,IAGnDgkI,EAAuB3pI,UAAU2sI,aAAe,WAC5C,MAAO9uH,MAAKzV,OAAO8K,aAAaE,UAAY,GAEhDu2H,EAAuB3pI,UAAU4kB,eAAiB,WAC9C,MAAO/G,MAAK8uH,eAAiB9uH,KAAKzV,OAAOuC,gBAE7Cg/H,EAAuB3pI,UAAUqtI,WAAa,SAAU1nI,GACpD,GAAIwpI,GAActxH,KAAK0vH,gBACvB,OAAO5nI,IAASwpI,GAAexpI,IAAUwpI,EAAc,GAE3DxF,EAAuB3pI,UAAUstI,sBAAwB,WACrD,GAAIz0H,GAAOgF,KAAKzV,OAAOjG,MACvB,OAAO8I,MAAK4hE,MAAOh0D,EAAK5X,OAAS4c,KAAK8uH,eAAkB,EAAI,EAAI9zH,EAAK5X,OAAS4c,KAAK8uH,iBAEvFhD,EAAuB3pI,UAAUutI,eAAiB,WAC9C,MAAOtiI,MAAKC,KAAK2S,KAAKxb,MAAQwb,KAAK8uH,iBAEvChD,EAAuB3pI,UAAU++E,gBAAkB,SAAU6pD,GACzD,MAAyC,GAAlC/qH,KAAKgD,WAAW8mH,SAASiB,IAEpCe,EAAuB3pI,UAAUklC,kBAAoB,WACjD,MAAO,IAAIwiG,IAAyB7pH,KAAKzV,SAE7CuhI,EAAuB3pI,UAAU2uI,oBAAsB,SAAUjiI,GACzDmR,KAAKkzC,QAAQvgD,KAAK,SAAU/Q,GAAS,MAAOA,KAAUiN,MACtDmR,KAAKisH,aAA0C,IAA3BjsH,KAAK8F,QAAQ9M,UACjCgH,KAAK8F,QAAQ9M,UAAY,GAEd,kBAAXnK,IACAmR,KAAKktC,OAAQ,IAGrB4+E,EAAuB3pI,UAAUy+D,cAAgB,SAAU59D,GAEvDgd,KAAKzV,OAAOoJ,eAAgB0B,cAAgBC,YAAa,KAAO,IAEpEw2H,EAAuB3pI,UAAUsoC,QAAU,WACvC,MAAOzqB,MAAKgD,WAAWynB,WAE3BqhG,EAAuB3pI,UAAUgvC,cAAgB,SAAUrpC,GACvD,MAAIsM,IAAgB4L,KAAKzV,QACdyV,KAAKzV,OAAO8T,cAAcvW,GAE9BkY,KAAKozH,iBAAiBtrI,GAAO,IAExCgkI,EAAuB3pI,UAAUkxI,4BAA8B,SAAUvrI,GACrE,MAAOkY,MAAKozH,iBAAiBtrI,GAAO,IAExCgkI,EAAuB3pI,UAAUmxI,gCAAkC,SAAUxrI,GACzE,MAAOkY,MAAKozH,iBAAiBtrI,GAAO,GAAO,GAAO,IAEtDgkI,EAAuB3pI,UAAUixI,iBAAmB,SAAUtrI,EAAO+vC,EAAW07F,EAAa9+E,GACzF,GAAInyB,GAAOtiB,KAAKiqB,SAAShlB,aACrBuuH,GAAajkI,cAAeA,eAAeyQ,KAAKzV,OAAO0E,kBACtDqzB,EAAK,GAAK,GAAKtiB,KAAK8uH,eAAiB9uH,KAAKjH,WAC3C06H,EAAgB57F,EAAY73B,KAAKzV,OAAO4T,qBAAuB6B,KAAKzV,OAAO8T,aAC/Eo1H,GAAgBh/E,EAAgBz0C,KAAKzV,OAAO6T,yBAA2Bq1H,CACvE,IACIvxE,IADaqxE,EAAcvzH,KAAKzV,OAAO8O,wBAA0Bo6H,GACxC3rI,EAAQ0rI,EAUrC,OATIxzH,MAAKzV,OAAOuU,YAAckB,KAAKzV,OAAO8K,aAAaC,YAAc,IAM7D4sD,EALCqxE,EAKazrI,GAASkY,KAAKzV,OAAOuU,WAAakB,KAAKzV,OAAO0K,gBAAgBnN,GAAOxF,KAAO4/D,EAJ5Ep6D,GAASkY,KAAKzV,OAAOuU,WAAa20H,EAAc3rI,GACxD2rI,EAAe3rI,EAAQ0rI,EAAYxzH,KAAKzV,OAAOuU,aAMtDojD,GAEX4pE,EAAuB3pI,UAAUmvC,mBAAqB,SAAUxpC,GAG5D,OAFWkY,KAAKiqB,SAAShlB,aACJ,GAAK,GAAKjF,KAAK8uH,eAClBhnI,GAGtBgkI,EAAuB3pI,UAAUs/E,eAAiB,WAC9C,GAAIn+E,GAAO0c,KAAKzV,OACZnF,EAAM,EACNymC,EAAQ7rB,KAAK8uH,eACbmC,EAAQ78H,GAAgB4L,KAAKzV,QAAUyV,KAAKyvH,wBAA0BzvH,KAAK0vH,gBAC/E1vH,MAAK+rH,WAAa/rH,KAAK0rB,QAAQulG,GAC/BjxH,KAAKuxH,SAAWN,EAAQ,GAAM,EAAIA,EAAQ,EAAIA,EAAQ,EACtDjxH,KAAK0rB,UAGL,KAAK,GADD+/F,GAASr/H,MAAMi0B,MAAM,KAAMj0B,MAAM6kI,IAAQl1H,IAAI,WAAc,QAAS3W,IAC/D3B,EAAI,EAAGA,EAAIgoI,EAAOroI,OAAQK,IAAK,CACpC,GAAIw7B,IAAOjf,KAAKgD,WAAWI,MAAMqoH,EAAOhoI,SAAWL,OAC/CswI,EAAOt/H,GAAgB4L,KAAKzV,QAAgCjH,EAAKgB,OAAOlB,OAASyoC,EAA3C7rB,KAAKxb,MAAQqnC,EACnD8nG,GAAQv/H,GAAgB4L,KAAKzV,SAAWkhI,EAAOhoI,IAAMuc,MAAKgD,WAAWI,MACrE6b,EAAMjf,KAAKzV,OAAOuC,eAAiB4mI,GAAOjI,EAAOhoI,KAAOwtI,EAAQyC,EAAM1zH,KAAKzV,OAAOuC,eAClFkT,KAAK+G,gBAGT/G,MAAK0rB,QAAQ+/F,EAAOhoI,KAAqC,EAA9Buc,KAAK0rB,QAAQ+/F,EAAOhoI,GAAK,IAAUkwI,EAC9D3zH,KAAKksH,WAAWT,EAAOhoI,IAAoC,EAA9Buc,KAAK0rB,QAAQ+/F,EAAOhoI,GAAK,GAE1Duc,KAAKosH,WAAa5kI,OAAOC,KAAKuY,KAAK0rB,SAC/Bt3B,GAAgB4L,KAAKzV,UACrByV,KAAKzV,OAAOqhC,cAAgB5rB,KAAK0rB,SAGjC1rB,KAAKzV,OAAO0c,4BACZjH,KAAKgD,WAAWwoH,qBAGxBM,EAAuB3pI,UAAUu/E,sBAAwB,WACrD1hE,KAAKgD,WAAWwoH,oBAChBxrH,KAAK2gE,oBAETmrD,EAAuB3pI,UAAUolC,WAAa,SAAUpkC,GACpD,GAEIywI,GACAC,EAHAvwI,EAAO0c,KAAKzV,OACZwjC,EAAa/tB,KAAKzV,OAAOuL,kBAGzBi4B,KACA6lG,KAAgBvoI,MAAMC,KAAK0U,KAAKzV,OAAO+7B,0BAA0BlgC,iBAAiB,QAClFytI,KAAgBxoI,MAAMC,KAAK0U,KAAKzV,OAAO67B,2BAA2BhgC,iBAAiB,SAEnFmJ,cAAcjM,EAAK2L,kBACnB+Q,KAAKzV,OAAOsoB,OAAO,gBAAiB1vB,EAExC,IAEIqsC,GAFAx0B,MACJA,EAAOgF,KAAKyqB,WAEP93B,KAAK,SAAUiJ,GAElB,MAF2BA,GAAE3X,YAC3BurC,EAAU5zB,GACLA,EAAE3X,WACX,IAAIwrC,IAAkB,GACjBnsC,EAAKoB,cAAcvB,QAAQC,QAAUosC,IACtCC,GAAkB,EAGtB,KAAK,GADDjwB,GAAKlc,EAAK+a,cACLpW,EAAI,EAAG4nC,EAAO1sC,EAAQC,OAAQ6E,EAAI4nC,EAAM5nC,IAAK,CAClD,GAAI1F,GAASY,EAAQ8E,GACjBoZ,EAAM/d,EAAKwsC,yBAAyBvtC,EAAOoJ,KAC3C2V,GAAgC,IAAnB/e,EAAOoG,QAAmB,GAAK,OAC5C42F,MAAS,EAiBb,IAhBIq0C,GAAcC,EACVxyH,GAAO0sB,GACPwxD,EAASs0C,EACTr0H,EAAKQ,KAAKzV,OAAOwkC,iBACjB1tB,GAAY0sB,GAGZwxD,EAASq0C,EAIbr0C,EAASv/E,KAAKmpB,cAAct9B,UAEnB,IAATwV,GAAcmuB,GAAWnuB,EAAMmuB,EAAQ5/B,MAAMxM,QAC7C0D,oBAAkBy4F,EAAOl+E,IAAQ/X,QAAWgY,KAE3CmuB,EAAiB,CACd/mC,MAAQ,IAERA,EADAnG,EAAOoG,QACCqX,KAAKqH,WAAWC,QAAQxd,YAAcskC,SAAS7rC,EAAOmG,MAAMuH,WAAY,IAGxE+P,KAAKqH,WAAWC,QAAQxd,YAAcskC,SAAS7rC,EAAOmG,MAAMuH,WAAY,KAExE3M,EAAKoF,OACbsX,KAAKuwB,eAAe/wB,EAAI6B,EAAKC,EAAYtG,GACrCgF,KAAKzV,OAAO0c,4BACZjH,KAAKqH,WAAWg6D,gBAAgB34E,EAAQ,IAE5CsX,KAAK0hE,yBAGLjyC,GAAkB,GAGrBzvB,KAAKzV,OAAOimC,kBAAoBjuC,EAAOkuC,aACxCzwB,KAAKzV,OAAOmmC,mBAAmBnuC,GAEnCyd,KAAKzV,OAAOimC,kBAAmB,EAEnC,GAAIjhC,cAAcyQ,KAAKzV,OAAO0E,kBAAoBwgC,EAAiB,CAC/D,GAAIqkG,GAAY9zH,KAAKzV,OAAOquC,cACxBqoC,EAAajhE,KAAKkhE,gBAAgB4yD,EAAU,GAAK,GACjDprI,EAAQsX,KAAKkhE,gBAAgB4yD,EAAUA,EAAU1wI,OAAS,IAAM69E,EAAa,EACjFjhE,MAAKzV,OAAOsoB,OAAO,2BAA6BzQ,YAAa,uBACzD0rH,iBAAkBgG,EAAU,GAAI/F,eAAgB+F,EAAUA,EAAU1wI,OAAS,GAAIwiB,KAAM,IACvFooH,YAAatlI,EAAOu4E,WAAYA,IACpCjhE,KAAKzV,OAAOsoB,OAAO,sBAEnB4c,GAAmB1B,EACnB/tB,KAAK4nB,oBAAqBxlB,YAAa,YAGvCpC,KAAKzV,OAAOsoB,OrEvuBI,mBqEuuB4B7X,KAAMA,EAAM9L,MAAQ0G,UAAU,EAAOoF,KAAMA,MAG/F8wH,EAAuB3pI,UAAUmwI,iBAAmB,SAAUpjI,GAC1D,GAAIwZ,GAAQ1I,IACZ,KAAKA,KAAKghF,mBAAwC,YAAnBhhF,KAAKi1C,WAA8C,cAAnBj1C,KAAKi1C,YAC5Dj1C,KAAKwsH,aAAa75H,KAAK,SAAU/Q,GAAS,MAAOA,KAAU8mB,EAAMtG,gBAAoBpC,KAAKzV,OAAOm0B,gBAAgB0kC,aAAc,CACnI,GAAIlB,GAAcliD,KAAKzV,OAAO4mC,cAAcjiC,EAAKmzD,eAC7Cr1D,EAAYgT,KAAKzV,OAAOuC,cAC5B,KAAKo1D,IAAgBliD,KAAK+zH,YAAY7xE,GAAc,CAChDliD,KAAKqsH,aAAc,EACnBrsH,KAAKw2C,iBAAmBtnD,EAAKmzD,aAC7B,IAAIrpD,IAAa9J,EAAKmzD,cAAgB,GAAKr1D,CACtCxK,qBAAkBwW,KACnBgH,KAAK8F,QAAQ9M,UAAYA,IAIjCgH,KAAKzV,OAAOsL,gBAAkBmK,KAAKoC,YAC/BpC,KAAKzV,OAAOooF,mBAAqB3yE,KAAKozB,QACtCpzB,KAAKoC,YAAcpC,KAAKy2C,MACxBz2C,KAAKozB,OAAS,GAGdpzB,KAAKozB,SAITpzB,KAAKoC,YAAcpC,KAAKy2C,OAGhCq1E,EAAuB3pI,UAAU4xI,YAAc,SAAU3uI,GACrD,GAAIsE,GAAMtE,EAAI+D,wBAAwBO,GACtC,OAAQA,IAAOsW,KAAKswH,eAAiB5mI,GAAOsW,KAAK8F,QAAQrc,cAEtDqiI,GACT/mG,IAKEivG,GAAuC,SAAUhyG,GAEjD,QAASgyG,GAAsBzpI,EAAQiY,GACnC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAMlD,OALA0I,GAAMrB,WAAa,GAAI8kH,IACvBzjH,EAAMmvB,WAAY,EAClBnvB,EAAMurH,IAAM,GAAIpK,IAAyBnhH,EAAMne,QAC/Cme,EAAMne,OAAO6lB,GAAGkX,GAAgC5e,EAAM6e,WAAY7e,GAClEA,EAAMne,OAAO6lB,GAAG/B,GAAqB,SAAUrrB,GAAK,MAA2C,MAApCA,EAAEgiB,YAAYW,aAAaC,KAAe8C,EAAMywB,YAAc,MAASzwB,GAC3HA,EAsHX,MA9HA8W,IAAUw0G,EAAuBhyG,GAUjCgyG,EAAsB7xI,UAAUomC,YAAc,WAC1CvoB,KAAKi0H,IAAIzI,oBACTxrH,KAAKzV,OAAOwpF,uBAAuB/zE,KAAKi0H,IAAI9I,iBAAiBnrH,KAAK2mB,WAAWrgC,cAAc,sBACvFiJ,cAAcyQ,KAAKzV,OAAO0E,kBAC1B+Q,KAAKzV,OAAOsoB,OAAO,2BACfi7G,iBAAkB9tH,KAAKzV,OAAO2R,cAAcilE,cAC5C4sD,eAAgB/tH,KAAKzV,OAAO2R,cAAcklE,YAAax7D,KAAM,MAGrEoc,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAClCA,KAAKqH,WAAWpa,MAAQ+S,KAAK6oB,WAC7B7oB,KAAKqH,WAAWvB,QAAU9F,KAAK2mB,WAAWrgC,cAAc,oBACxD0Z,KAAKqH,WAAWvB,QAAQzc,MAAMJ,SAAW,WACzC+W,KAAKqH,WAAW2lH,gBAChBhtH,KAAKqH,WAAW4lH,kBAAkB,aAEtC+G,EAAsB7xI,UAAUmiB,cAAgB,SAAUrX,GACjD+S,KAAK63B,WAIN73B,KAAKqH,WAAWE,eAAezb,YAAYmB,GAC3C+S,KAAK63B,WAAY,GAJjB73B,KAAKqH,WAAWC,QAAQxb,YAAYmB,IAO5C+mI,EAAsB7xI,UAAUg3C,UAAY,WACxCn5B,KAAK63B,UAAY73B,KAAKzV,OAAOsL,eAC7BmK,KAAKq5B,eAAer5B,KAAKzV,OAAO67B,4BAChCpmB,KAAKi0H,IAAIzI,oBACTxrH,KAAKzV,OAAOwpF,uBAAuB/zE,KAAKi0H,IAAI9I,iBAAiBnrH,KAAK2mB,WAAWrgC,cAAc,sBAC3F07B,EAAO7/B,UAAUg3C,UAAU7tC,KAAK0U,MAChCA,KAAKq5B,eAAer5B,KAAKzV,OAAO+7B,4BAEpC0tG,EAAsB7xI,UAAUolC,WAAa,SAAUpkC,GACnD,GACIme,GACAD,EACAouB,EAEAykG,EACAC,EANA7wI,EAAO0c,KAAKzV,OAIZwjC,EAAa/tB,KAAKzV,OAAOuL,kBAGzBi4B,KACAmmG,KAAgB7oI,MAAMC,KAAK0U,KAAKzV,OAAO0b,yBAAyB7f,iBAAiB,QACjF+tI,KAAgB9oI,MAAMC,KAAK0U,KAAKzV,OAAOwb,0BAA0B3f,iBAAiB,QAEtF,KAAK,GAAI6B,GAAI,EAAG4nC,EAAO1sC,EAAQC,OAAQ6E,EAAI4nC,EAAM5nC,IAAK,CAClD,GAAI1F,GAASY,EAAQ8E,EACrBoZ,GAAM/d,EAAKwsC,yBAAyBvtC,EAAOoJ,KAC3C2V,EAAa/e,EAAOoG,QAAU,GAAK,MACnC,IAAI42F,OAAS,EAcb,IAbI20C,GAAcC,EACV9yH,GAAO0sB,GACPwxD,EAAS40C,EACT9yH,GAAY0sB,GAGZwxD,EAAS20C,EAIb30C,EAASv/E,KAAKmpB,cAAct9B,SAEhC/E,oBAAkBy4F,EAAOl+E,IAAQ/X,QAAWgY,IACxChe,EAAK2jB,6BAA+B3jB,EAAKoB,cAAcvB,QAAQC,OAAQ,CACvE,GAAIgxI,OAAa,IAEbA,EADA7xI,EAAOoG,QACMqX,KAAKqH,WAAWC,QAAQxd,YAAcskC,SAAS7rC,EAAOmG,MAAMuH,WAAY,IAGxE+P,KAAKqH,WAAWC,QAAQxd,YAAcskC,SAAS7rC,EAAOmG,MAAMuH,WAAY,KAExE3M,EAAKoF,OAClBsX,KAAKuwB,eAAehuC,EAAQ+e,GAC5BtB,KAAKqH,WAAWg6D,gBAAgB+yD,EAAa,IAC7Cp0H,KAAKi0H,IAAIzI,qBAGT/7F,GAAkB,MAItBA,IAAkB,CAElBA,KAAoB1B,GACpB/tB,KAAKm5B,YAGTpL,GACA/tB,KAAKzV,OAAOsoB,OAAOiiB,QAG3Bk/F,EAAsB7xI,UAAUk3C,eAAiB,SAAUvzB,GACnD9F,KAAKzV,OAAOsL,gBAAkBmK,KAAKzV,OAAO0c,4BACvCjH,KAAKzV,OAAO2R,cAAcuJ,WAC7BzF,KAAKzV,OAAO2R,cACP0sB,SAAS9iB,EAAQxf,cAAc,cAG5C0tI,EAAsB7xI,UAAUouC,eAAiB,SAAUxiC,EAAKuT,GAC5D,GAAIysB,GAAa/tB,KAAKzV,OAAOsL,eACzB5I,EAAQ+S,KAAK6oB,UACbkF,IAA2C,YAA7BhgC,EAAImQ,uBAClBjR,EAAQ+S,KAAKzV,OAAOwb,0BAA0Bzf,cAAc,YAEhE,KAAK,GAAIuJ,GAAK,EAAGkG,KAAQ1K,MAAMg1B,MAAMpzB,EAAM7G,iBAAiB,oBAAqByJ,EAAKkG,EAAG3S,OAAQyM,IAAM,CACnG,GAAIiE,GAAMiC,EAAGlG,EACb,IAAIiE,EAAIxN,cAAc,mBAClBwN,EAAIxN,cAAc,kBAAkBokC,aAAa,kBAAoB38B,EAAIpC,IAAK,CAC9E7E,oBAAkBgN,GAAOxK,QAAWgY,IACjB,KAAfA,GACAlQ,eAAa0C,GAAM,SAEvB,UAILkgI,GACT7gG,IAKEg5F,GAAuC,WACvC,QAASA,MAiET,MA/DAA,GAAsBhqI,UAAU6qI,cAAgB,SAAU1/H,GAClDiC,cACAyQ,KAAKsH,QAAUtH,KAAK8F,QAAQxf,cAAc,mBAAqB0Z,KAAK8F,QAAQxf,cAAc,mBACtFmG,gBAAc,OAAS3D,UAAW,mBACtCkX,KAAKsH,QAAQvlB,aAAa,SAAU,cAAgBiuD,aAAW1iD,KAG/D0S,KAAKsH,QAAU7a,gBAAc,OAAS3D,UAAW,iBAAkBoE,OAAQ,cAAgB8iD,aAAW1iD,KAE1G0S,KAAKsH,QAAQxb,YAAYkU,KAAK/S,OAC9B+S,KAAK8F,QAAQha,YAAYkU,KAAKsH,UAElC6kH,EAAsBhqI,UAAU8qI,kBAAoB,SAAUhkI,OACzC,KAAbA,IAAuBA,EAAW,YAClCsG,cACAyQ,KAAKiC,YAAcjC,KAAK8F,QAAQxf,cAAc,mBAAqB0Z,KAAK8F,QAAQxf,cAAc,mBAC1FmG,gBAAc,OAAS3D,UAAW,mBACtCkX,KAAKiC,YAAYlgB,aAAa,SAAU,YAAckH,IAGtD+W,KAAKiC,YAAcxV,gBAAc,OAAS3D,UAAW,iBAAkBoE,OAAQ,YAAcjE,IAEjG+W,KAAK8F,QAAQha,YAAYkU,KAAKiC,cAElCkqH,EAAsBhqI,UAAUkyI,oBAAsB,SAAU/mI,GAC5D0S,KAAKsH,QAAU7a,gBAAc,OAAS3D,UAAW,iBAAkBoE,OAAQ,cAAgB8iD,aAAW1iD,GAAU,oBAChH0S,KAAK8F,QAAQha,YAAYkU,KAAKsH,UAElC6kH,EAAsBhqI,UAAUmyI,wBAA0B,WACtDt0H,KAAKiC,YAAcxV,gBAAc,OAAS3D,UAAW,mBACrDkX,KAAK8F,QAAQha,YAAYkU,KAAKiC,cAElCkqH,EAAsBhqI,UAAUoyI,qBAAuB,SAAUjnI,GAC7D0S,KAAKuH,eAAiB9a,gBAAc,OAAS3D,UAAW,iBAAkBoE,OAAQ,cAAgB8iD,aAAW1iD,KAC7G0S,KAAKgxC,eAAellD,YAAYkU,KAAKuH,iBAEzC4kH,EAAsBhqI,UAAUqyI,yBAA2B,WACvDx0H,KAAKy0H,mBAAqBhoI,gBAAc,OAAS3D,UAAW,mBAC5DkX,KAAKgxC,eAAellD,YAAYkU,KAAKy0H,qBAEzCtI,EAAsBhqI,UAAUm/E,YAAc,SAAUozD,EAAQC,GAC5D30H,KAAKsH,QAAQje,MAAMm4E,UAAY,aAAekzD,EAAS,OAASC,EAAS,OAE7ExI,EAAsBhqI,UAAU8tI,mBAAqB,SAAUyE,EAAQC,GACnE30H,KAAKuH,eAAele,MAAMm4E,UAAY,aAAekzD,EAAS,OAASC,EAAS,OAEpFxI,EAAsBhqI,UAAU+tI,uBAAyB,SAAUxnI,EAAOuiI,GACtEjrH,KAAKuH,eAAele,MAAMX,MAAQA,EAAQA,EAAQ,KAAOuiI,EAAO,OAAS,IAE7EkB,EAAsBhqI,UAAU6uI,wBAA0B,SAAU1jI,EAAQ5E,GACxEsX,KAAKy0H,mBAAmBprI,MAAMiE,OAASA,EAAS,KAChD0S,KAAKy0H,mBAAmBprI,MAAMX,MAAQA,GAE1CyjI,EAAsBhqI,UAAUk/E,gBAAkB,SAAU34E,EAAOuiI,GAC/DjrH,KAAKsH,QAAQje,MAAMX,MAAQA,EAAQA,EAAQ,KAAOuiI,EAAO,OAAS,IAEtEkB,EAAsBhqI,UAAUw+E,iBAAmB,SAAUrzE,EAAQ5E,GACjEsX,KAAKiC,YAAY5Y,MAAMiE,OAASA,EAAS,KACzC0S,KAAKiC,YAAY5Y,MAAMX,MAAQA,GAEnCyjI,EAAsBhqI,UAAUyyI,sBAAwB,SAAUttH,EAAS5e,EAAOuiI,GAC9E3jH,EAAQje,MAAMX,MAAQA,EAAQA,EAAQ,KAAOuiI,EAAO,OAAS,IAE1DkB,KC/zCP0I,GAA+B,WAC/B,QAASA,GAActqI,EAAQiY,GAC3BxC,KAAKzV,OAASA,EACdyV,KAAKwC,QAAUA,EACfxC,KAAKghC,mBAmDT,MAjDA6zF,GAAc1yI,UAAUguB,cAAgB,WACpC,MAAO,iBAEX0kH,EAAc1yI,UAAUyjD,oBAAsB,WAC1C5lC,KAAKzV,OAAOyoB,KAAK,aAAc,kBAAmB,iBAClD,IAAI+tB,GAAW/gC,KAAKwC,QAAQpT,WAAW,kBAClC4Q,MAAKzV,OAAOsL,iBACTmK,KAAKzV,OAAO0c,4BACZ85B,EAAS8E,YAAYt2B,aAAWknB,OAAQ,GAAIu9F,IAAsBh0H,KAAKzV,OAAQyV,KAAKwC,UAExFu+B,EAAS8E,YAAYt2B,aAAW6xB,QAAS,GAAI0qF,IAAuB9rH,KAAKzV,OAAQyV,KAAKwC,WAE1FxC,KAAK80H,kBAETD,EAAc1yI,UAAU2yI,eAAiB,WACrC,GAAI9nI,GAAYgT,KAAKzV,OAAOuC,eACxB0hI,EAAUxuH,KAAKzV,OAAO+C,OAAO2C,WAAWvI,QAAQ,KAAO,EAAIsY,KAAKzV,OAAO+C,OACvE0S,KAAKzV,OAAOK,QAAQzB,wBAAwBmE,MAChD0S,MAAKgyH,aAAexD,EAAUxhI,EAC9B,IAAIM,GAA0B,EAAjB0S,KAAKgyH,UACd2B,EAAO3zH,KAAKzV,OAAO8K,aAAaE,QACpCyK,MAAKzV,OAAOoJ,eAAgB0B,cAAgBE,SAAUo+H,EAAOrmI,EAASA,EAASqmI,KAAU,GACrFpkI,cAAcyQ,KAAKzV,OAAO0E,kBAC1B+Q,KAAKzV,OAAOsoB,OAAO,+BAG3BgiH,EAAc1yI,UAAU6+C,iBAAmB,WACnChhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGrD,GAAa/M,KAAK4lC,oBAAqB5lC,MACtDA,KAAKzV,OAAO6lB,GtE+KY,uBsE/KkBpQ,KAAK0hE,sBAAuB1hE,QAE1E60H,EAAc1yI,UAAU8rD,oBAAsB,WACtCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAI9K,GAAa/M,KAAK4lC,qBAClC5lC,KAAKzV,OAAOstB,ItEwKY,uBsExKmB7X,KAAK0hE,yBAEpDmzD,EAAc1yI,UAAUu/E,sBAAwB,SAAUxyE,GAClD8Q,KAAKzV,OAAO0c,4BAA8C,WAAhB/X,EAAKsiC,QAChCxxB,KAAKwC,QAAQpT,WAAW,mBAC9B8xC,YAAY3xB,aAAW6xB,SAASsgC,yBAGjDmzD,EAAc1yI,UAAU0rB,QAAU,WAC9B7N,KAAKiuC,uBAEF4mF,KCxDPE,GAAkC,WAIlC,QAASA,GAAiBxqI,GACtByV,KAAKzV,OAASA,EA2WlB,MAzWAwqI,GAAiB5yI,UAAU6yI,OAAS,SAAUnqI,EAAUqE,GACpD8Q,KAAK8b,QAAS,CACd,IAAIjd,GACAS,EAASV,GAAgBoB,KAAKzV,QAC9BgV,EAAUL,GAAoBc,KAAKzV,OAQvC,IANIsU,EADAmB,KAAKzV,OAAOuU,YAA0D,QAA5CkB,KAAKzV,OAAOiE,aAAauQ,eAC3CiB,KAAKzV,OAAO2+B,iBAAiB5iC,cAAc,SAG3C0Z,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,SAExD4I,EAAK9J,IAAM4a,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,qBACpD+V,EAAMvY,cAAc,eAAgB,CACpC,GAAI+U,GAAWwD,EAAMvY,cAAc,cAEnC,IADA+U,EAASiwB,WAAWz+B,YAAYwO,GAC5B2E,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAIgvF,GAAY7kF,KAAKzV,OAAOmO,aAAapS,cAAc,qBAAqBA,cAAc,QAE1F,IADCu+F,oBAA6Bv5D,WAAWz+B,YAAYg4F,EAAUlsF,mBAC3B,eAAhCqH,KAAKzV,OAAO8R,gBAAkC,CAC9C,GAAI44H,GAAYj1H,KAAKzV,OAAOmO,aAAapS,cAAc,2BAA2BA,cAAc,QAC/F2uI,qBAA6B3pG,WAAWz+B,YAAYooI,EAAUt8H,qBAO3E,GAH4C,QAA5CqH,KAAKzV,OAAOiE,aAAauQ,eAA2BF,EAAM06B,aAAarqC,EAAK9J,IAAKyZ,EAAMy6B,YAAcz6B,EAAM/S,YAAYoD,EAAK9J,KAC5H8J,EAAK9J,IAAI0G,YAAYkU,KAAKk1H,eAAerqI,GAAU,MAAOkC,GAAWmC,GAAM,IAC3E8Q,KAAKzV,OAAOmpD,WAAWyhF,aAAajmI,EAAK9J,IAAK8J,GAC1C8Q,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAI5B,GAAO+L,KAAKo1H,kBAAkBlmI,EAAK9J,IAAK8J,EAI5C,IAH4C,QAA5C8Q,KAAKzV,OAAOiE,aAAauQ,eAA2BO,EAAOi6B,aAAatlC,EAAMqL,EAAOg6B,YAAch6B,EAAOxT,YAAYmI,GACtH/E,EAAK9J,IAAIkB,cAAc,iBAAiBvE,aAAa,UAAWie,KAAKzV,OAAO+sF,0BAA4B,IACxGrjF,EAAKlS,aAAa,UAAW,IAAMie,KAAKzV,OAAOgQ,oBAAoBnX,OAAS4c,KAAKzV,OAAO+sF,4BACpF/3E,EAAS,CACT,GAAI81H,GAAQr1H,KAAKs1H,sBAAsBpmI,EAAK9J,IAAK8J,EACL,SAA5C8Q,KAAKzV,OAAOiE,aAAauQ,eAA2BQ,EAAQg6B,aAAa87F,EAAO91H,EAAQ+5B,YAClF/5B,EAAQzT,YAAYupI,EAC1B,IAAI57G,GAAUzZ,KAAKzV,OAAO+sF,0BAA4Bt3E,KAAKzV,OAAOsS,4BAClE3N,GAAK9J,IAAIkB,cAAc,iBAAiBvE,aAAa,UAAW03B,EAAU,IAC1E47G,EAAM/uI,cAAc,iBAAiBvE,aAAa,UAAW,GAAKie,KAAKzV,OAAOsS,8BAEvD,SAAvBmD,KAAKzV,OAAO+C,QACZ0S,KAAKzV,OAAOsoB,OvEyRF,qBuErRtBkiH,EAAiB5yI,UAAUmzI,sBAAwB,SAAUxhI,EAAK5E,GAC9D,GAAImmI,GAAQvhI,EAAII,WAAU,GACtB+uF,EAAO/zF,EAAKqmI,gBAAkBF,EAAM/uI,cAAc,OACtD,OAAI0Z,MAAKzV,OAAOiE,aAAatI,UACzB+8F,EAAK18F,UAAY,GACjByZ,KAAKpU,eAAeq3F,EAAM/zF,EAAK6S,SAAS,GACjCszH,IAEXr1H,KAAKw1H,kBAAkB1hI,EAAKuhI,GAC5BA,EAAM/uI,cAAc,YAAYC,UAAYyZ,KAAKzV,OAAO+Y,mBACnDhd,cAAc,0BAA0BA,cAAc,YAAYC,UAChE8uI,IAEXN,EAAiB5yI,UAAUizI,kBAAoB,SAAUthI,EAAK5E,GAC1D,GAAI+E,GAAOH,EAAII,WAAU,GACrB+uF,EAAO/zF,EAAKumI,YAAcxhI,EAAK3N,cAAc,OACjD,OAAI0Z,MAAKzV,OAAOiE,aAAatI,UACzB+8F,EAAK18F,UAAY,GACjByZ,KAAKpU,eAAeq3F,EAAM/zF,EAAK6S,SAAS,GACjC9N,IAEX+L,KAAKnM,cAAcC,EAAKG,GACxBA,EAAK3N,cAAc,YAAYC,UAAYyZ,KAAKzV,OAAO+Y,mBAClDhd,cAAc,oBAAoBA,cAAc,YAAYC,UAC1D0N,IAEX8gI,EAAiB5yI,UAAUuzI,iBAAmB,SAAUtwI,EAAKqc,GAKzD,MAJAA,GAAKA,EAAGjL,UAAUnL,MAAMC,KAAK0U,KAAK21H,aAAavwI,GAAKgB,iBAAiB,kBACjC,eAAhC4Z,KAAKzV,OAAO8R,kBACZoF,EAAKA,EAAGjL,UAAUnL,MAAMC,KAAK0U,KAAK41H,kBAAkBxwI,GAAKgB,iBAAiB,mBAEvEqb,GAEXszH,EAAiB5yI,UAAUyzI,kBAAoB,SAAUxwI,GACrD,GAAIic,GAAM+sB,SAAShpC,EAAIslC,aAAa,iBAAkB,IAClDb,EAAQ7pB,KAAKzV,OAAOwqF,4BACpBvuD,EAAOxmB,KAAKzV,OAAOy6F,uBACnB10C,EAAQtwC,KAAKzV,OAAO4U,4BACpBuuB,EAAS1tB,KAAKzV,OAAO6U,4BACzB,OAAIyqB,GAAMn/B,SAAStF,IAAQohC,EAAK97B,SAAStF,GAC9B4a,KAAKzV,OAAOo3D,yBAAyBtgD,GAEvCqsB,EAAOhjC,SAAStF,IAAQkrD,EAAM5lD,SAAStF,GACrC4a,KAAKzV,OAAO4mC,cAAc9vB,GAE9Bjc,GAEX2vI,EAAiB5yI,UAAUwzI,aAAe,SAAUvwI,GAChD,GAAI4a,KAAKzV,OAAOsL,eAAgB,CAC5B,GAAIwL,GAAM+sB,SAAShpC,EAAIslC,aAAa,iBAAkB,IAClDb,EAAQ7pB,KAAKzV,OAAOwqF,4BACpBtuE,EAAQzG,KAAKzV,OAAO0U,yBACpBunB,EAAOxmB,KAAKzV,OAAOy6F,uBACnBz+D,EAAOvmB,KAAKzV,OAAOyU,uBACvB,IAAI6qB,EAAMn/B,SAAStF,IAAQohC,EAAK97B,SAAStF,GACrC,MAAO4a,MAAKzV,OAAOgnC,qBAAqBlwB,EAEvC,IAAIoF,EAAM/b,SAAStF,IAAQmhC,EAAK77B,SAAStF,GAC1C,MAAO4a,MAAKzV,OAAO4mC,cAAc9vB,GAGzC,MAAOjc,IAEX2vI,EAAiB5yI,UAAUk1B,OAAS,SAAUxsB,EAAUqE,GACpD8Q,KAAK8b,QAAS,CAWd,KATIzjB,UAAQnJ,EAAK9J,IAAK,sBAAwBiT,UAAQnJ,EAAK9J,IAAK,uBAC5D8J,EAAK9J,IAAM4a,KAAK21H,aAAazmI,EAAK9J,KAC9BmK,cAAcyQ,KAAKzV,OAAO0E,mBAC1BC,EAAa,SAAIA,EAAK9J,IAAI8O,WAAU,MAGxCmE,UAAQnJ,EAAK9J,IAAK,4BAA8BiT,UAAQnJ,EAAK9J,IAAK,6BAClE8J,EAAK9J,IAAM4a,KAAK41H,kBAAkB1mI,EAAK9J,MAEvCmK,cAAcyQ,KAAKzV,OAAO0E,iBAAkB,CAC5CC,EAAK9J,IAAIkmC,WAAWiO,aAAarqC,EAAa,SAAGA,EAAK9J,KACtD8J,EAAK9J,IAAIqF,UAAUqE,IAAI,cACnB+mI,MAAexqI,MAAMC,KAAK4D,EAAa,SAAE9I,iBAAiB,gBAC9D8I,GAAa,SAAE3I,UAAY,GAC3BsvI,EAAY71H,KAAK01H,iBAAiBxmI,EAAa,SAAG2mI,GAClD3mI,EAAa,SAAEpD,YAAYkU,KAAKk1H,eAAerqI,GAAU,EAAMgrI,EAAW3mI,GAAM,IAChFA,EAAa,SAAEzE,UAAUqE,IAAI,eAC7BkR,KAAK81H,kBAAkB5mI,EAAa,SAAGA,OAEtC,CACD,GAAI2mI,MAAexqI,MAAMC,KAAK4D,EAAK9J,IAAIgB,iBAAiB,gBACxD8I,GAAK9J,IAAImB,UAAY,GACrBsvI,EAAY71H,KAAK01H,iBAAiBxmI,EAAK9J,IAAKywI,GAC5C3mI,EAAK9J,IAAI0G,YAAYkU,KAAKk1H,eAAerqI,GAAU,EAAMgrI,EAAW3mI,GAAM,IAC1EA,EAAK9J,IAAIqF,UAAUqE,IAAI,eACvBkR,KAAKzV,OAAOmpD,WAAWyhF,aAAajmI,EAAK9J,IAAK8J,GAC9C8Q,KAAK81H,kBAAkB5mI,EAAK9J,IAAK8J,KAGzC6lI,EAAiB5yI,UAAU2zI,kBAAoB,SAAU1wI,EAAK8J,GAC1D,GAAIuS,GAAKrc,EAAIk0C,UACTt5B,MAAKzV,OAAO+sF,2BAA6Bt3E,KAAKzV,OAAOiE,aAAatI,WAClEub,EAAGnb,cAAc,YAAYC,UAAYyZ,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,mBAClFA,cAAc,YAAYC,UAElC,IAAIwvI,GACAjsG,EAGAzoB,EAAM+sB,SAAShpC,EAAIslC,aAAa,iBAAkB,GACtD,IAAI1qB,KAAKzV,OAAOsL,eAAgB,CACxBwL,EAAMrB,KAAKzV,OAAOuU,YAClBgrB,EAAO9pB,KAAKzV,OAAO+Y,mBACnByyH,EAAO,oBAGPjsG,EAAO9pB,KAAKzV,OAAOmO,aACnBq9H,EAAO,mBAEX,IAAIC,GAAMv0H,EAAGvN,WAAU,GACnB+hI,EAAOx0H,EAAGvN,WAAU,GACpB+uF,EAAO/zF,EAAKumI,YAAcO,EAAI1vI,cAAc,OAC5C0Z,MAAKzV,OAAOiE,aAAatI,UACzB8Z,KAAKk2H,gBAAgBjzC,EAAM/zF,EAAK6S,QAEpC,IAAImtB,OAAQ,GACRxrB,MAAS,EACTomB,GAAKxjC,cAAcyvI,GAAMrrI,SAAStF,IAClC8pC,EAAQlvB,KAAKzV,OAAOgnC,qBAAqBlwB,GACrC9R,cAAcyQ,KAAKzV,OAAO0E,kBAC1BC,EAAW,OAAIggC,EACfhgC,EAAgB,YAAIggC,EAAMh7B,WAAU,GACpCg7B,EAAMzkC,UAAUqE,IAAI,eACpBogC,EAAM5D,WAAWiO,aAAarqC,EAAgB,YAAGggC,GACjDlvB,KAAKm2H,iBAAiBjnI,EAAgB,YAAGuS,EAAIu0H,KAG7Ch2H,KAAKm2H,iBAAiBjnG,EAAOztB,EAAIu0H,GACG,eAAhCh2H,KAAKzV,OAAO8R,kBACZnN,EAAKqmI,gBAAkBU,EAAK3vI,cAAc,QAC1C0Z,KAAKk2H,gBAAgBhnI,EAAKqmI,gBAAiBrmI,EAAK6S,SAChD2B,EAAS1D,KAAKzV,OAAOo3D,yBAAyBtgD,GAC9CrB,KAAKo2H,sBAAsB1yH,EAAQjC,EAAIw0H,OAK/C/mG,EAAQlvB,KAAKzV,OAAO4mC,cAAc9vB,GAC9B9R,cAAcyQ,KAAKzV,OAAO0E,kBAC1BC,EAAW,OAAIggC,EACfhgC,EAAgB,YAAIggC,EAAMh7B,WAAU,GACpCg7B,EAAM5D,WAAWiO,aAAarqC,EAAgB,YAAGggC,GACjDA,EAAMzkC,UAAUqE,IAAI,eACpBkR,KAAKm2H,iBAAiBjnI,EAAgB,YAAG8mI,EAAKv0H,KAG9CzB,KAAKm2H,iBAAiBjnG,EAAO8mG,EAAKv0H,GACE,eAAhCzB,KAAKzV,OAAO8R,kBACZnN,EAAKqmI,gBAAkBU,EAAK3vI,cAAc,QAC1C0Z,KAAKk2H,gBAAgBhnI,EAAKqmI,gBAAiBrmI,EAAK6S,SAChD2B,EAAS1D,KAAKzV,OAAOo3D,yBAAyBtgD,GAC9CrB,KAAKo2H,sBAAsB1yH,EAAQuyH,EAAMx0H,MAIjDlS,cAAcyQ,KAAKzV,OAAO0E,kBAC1BC,EAAgB,YAAEpD,YAAYkqI,GAC9B9mI,EAAgB,YAAEzE,UAAUqE,IAAI,iBAGhCogC,EAAMpjC,YAAYkqI,GAClB9mG,EAAMzkC,UAAUqE,IAAI,eACgB,eAAhCkR,KAAKzV,OAAO8R,kBACZqH,EAAO5X,YAAYmqI,GACnBvyH,EAAOjZ,UAAUqE,IAAI,eACrBmJ,GAAoB/I,EAAKqmI,gBAAgBjvI,cAAc,mBAAoB4I,EAAK+zF,KAAK38F,cAAc,sBAG3G2R,GAAoB/I,EAAKumI,YAAYnvI,cAAc,mBAAoB4I,EAAK+zF,KAAK38F,cAAc,sBAGvGyuI,EAAiB5yI,UAAU+zI,gBAAkB,SAAUjzC,EAAM3gG,GACrD0d,KAAKzV,OAAOiE,aAAatI,WACzB+8F,EAAK18F,UAAY,GACjByZ,KAAKpU,eAAeq3F,EAAM3gG,GAAM,KAGxCyyI,EAAiB5yI,UAAUi0I,sBAAwB,SAAUhxI,EAAK0O,EAAKuhI,GACnEjwI,EAAImB,UAAY,GAChByZ,KAAKw1H,kBAAkB1hI,EAAKuhI,GAC5BA,EAAM/uI,cAAc,YAAYC,UAAYyZ,KAAKzV,OAAO+Y,mBACnDhd,cAAc,0BAA0BA,cAAc,YAAYC,UACvEuN,EAAI/R,aAAa,UAAWie,KAAKzV,OAAO+sF,0BAA4Bt3E,KAAKzV,OAAOsS,6BAA+B,IAC/Gw4H,EAAMtzI,aAAa,UAAWie,KAAKzV,OAAOsS,6BAA+B,KAE7Ek4H,EAAiB5yI,UAAUg0I,iBAAmB,SAAU/wI,EAAK0O,EAAKG,GAC9D7O,EAAImB,UAAY,GAChByZ,KAAKnM,cAAcC,EAAKG,GACxBA,EAAK3N,cAAc,YAAYC,UAAYyZ,KAAKzV,OAAO+Y,mBAClDhd,cAAc,oBAAoBA,cAAc,YAAYC,UACjEuN,EAAI/R,aAAa,UAAWie,KAAKzV,OAAO+sF,0BAA4B,IACpErjF,EAAKlS,aAAa,UAAWie,KAAKzV,OAAOgQ,oBAAoBnX,OAAS4c,KAAKzV,OAAO+sF,0BAA4B,KAElHy9C,EAAiB5yI,UAAUqzI,kBAAoB,SAAU1hI,EAAKuhI,GAC1DA,EAAM/uI,cAAc,MAAMC,UAAY,EAGtC,KAAK,GAFD+rB,GAAOtS,KAAKzV,OAAO2L,aACnB8F,EAAI,EACCvY,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAKuY,IAClC,GAAqC,iBAAjCsW,EAAK7uB,GAAGya,qBAAyC,CACjD,GAAIpW,GAAQkU,EAAIgE,KAAKzV,OAAOqS,wBAC5By4H,GAAM/uI,cAAc,MAAMwF,YAAYgI,EAAIxN,cAAc,MAAMuG,YAAYiH,EAAIxN,cAAc,MAAMuF,SAAS/D,KAC3GkU,MAIZ+4H,EAAiB5yI,UAAU0R,cAAgB,SAAUC,EAAKG,GACtDA,EAAK3N,cAAc,MAAMC,UAAY,EAGrC,KAAK,GAFD+rB,GAAOtS,KAAKzV,OAAO2L,aACnB8F,EAAI,EACCvY,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAKuY,IACG,YAAjCsW,EAAK7uB,GAAGya,uBACRjK,EAAK3N,cAAc,MAAMwF,YAAYgI,EAAIxN,cAAc,MAAMuG,YAAYiH,EAAIxN,cAAc,MAAMuF,SAASmQ,KAC1GA,MAIZ+4H,EAAiB5yI,UAAU+yI,eAAiB,SAAUrqI,EAAUixB,EAAQ+5G,EAAW3mI,EAAM0G,GACrF,GAAItS,GAAO0c,KAAKzV,OACZ9F,EAAO,EACP+gF,EAAYhjF,oBAAkBc,EAAK05B,iBAAoBx6B,oBAAkBc,EAAKoS,WAAiB,EAAJ,CAC3FpS,GAAKylB,gBACLtkB,EAAOnB,EAAKoB,cAAcvB,QAAQC,OAEtC,IAAIqe,GAAKzB,KAAKzV,OAAOkC,cAAc,MAC/B3D,UAAW,0BACXwyB,OAAS0oB,SAAU1gD,EAAKiX,oBAAoBnX,OAASE,EAAKg0F,0BAA4Bt3E,KAAKzV,OAAO+1B,kBAAkBrwB,cAEpHgzF,EAAO/zF,EAAK+zF,KACZjjF,KAAKzV,OAAOkC,cAAc,QAAUjC,GAAIlH,EAAKsH,QAAQJ,GAAK,WAAY1B,UAAW,cACrF,IAAIkX,KAAKzV,OAAOiE,aAAatI,SAGzB,MAFA8Z,MAAKpU,eAAeq3F,EAAM/zF,EAAK6S,QAASnM,GACxC6L,EAAG3V,YAAYm3F,GACRxhF,CAEX,IAAIxU,GAAQ+S,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,wBAAyBwyB,OAAS2N,YAAa,SAC3Gh8B,GAAMnB,YAAYxI,EAAKwsD,kBAAkBxpD,cAAc,YAAY4N,WAAU,GAC7E,IAAI2K,GAAQmB,KAAKzV,OAAOkC,cAAc,SAClC+S,EAAKQ,KAAKzV,OAAOkC,cAAc,MAC/BhJ,EAAI,CAOR,KANI+hF,GACAhmE,EAAG+5B,aAAav5B,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,wBAA0B0W,EAAG85B,YAE1Fh2C,EAAK0Q,iBACLwL,EAAG1T,YAAYkU,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,sBAEzDrF,EAAIgB,GACP+a,EAAG1T,YAAYkU,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,kBAC5DrF,GAEJ,IAAIqoC,GAAI,CAER,KADAroC,EAAI,EACIq4B,GAAUgQ,EAAI+pG,EAAUzyI,QAAUK,EAAIH,EAAK4S,aAAa9S,QAAWK,EAAIH,EAAK4S,aAAa9S,QAAQ,CACrG,GAAIwN,GAAOkrB,EAAS+5G,EAAU/pG,GAAGpB,aAAa,WAAa,KACvD38B,EAAMzK,EAAK4S,aAAazS,GACxB4yI,EAAOr2H,KAAKzV,OAAOkC,cAAc,MACjC3D,UAAW,YAAawyB,OAASjyB,MAAO,eAAiB0E,EAAIkc,UAAYlc,EAAIkc,UAAY,IAAK+5B,QAAWpzC,GAAc,KAEvH7C,GAAIpF,SACJ0tI,EAAKvqI,YAAYjB,EAASkD,EAAIpC,MACO,aAAjCqU,KAAKzV,OAAO2qC,mBACZzuC,EAAsB4vI,GAAQp5F,YAAalvC,EAAI1F,aACrC,IAAN5E,GACA4yI,EAAK5rI,UAAUqE,IAAI,0BAGN,gBAAjBf,EAAI6b,SACJysH,EAAK5rI,UAAUqE,IAAI,eAEdf,EAAIic,UAAYjc,EAAImc,mBACzBnjB,YAAUsvI,GAAO,kBAIrBA,EAAK5rI,UAAUqE,IAAI,UAEvB0Q,EAAG1T,YAAYuqI,GACf5yI,EAAImN,EAAOnN,EAAI2qC,SAASx9B,EAAM,IAAMnN,EAAI,EACxCqoC,IAMJ,MAJAjtB,GAAM/S,YAAY0T,GAClBvS,EAAMnB,YAAY+S,GAClBokF,EAAKn3F,YAAYmB,GACjBwU,EAAG3V,YAAYm3F,GACRxhF,GAEXszH,EAAiB5yI,UAAU8rD,oBAAsB,aAGjD8mF,EAAiB5yI,UAAUyJ,eAAiB,SAAUq3F,EAAM3gG,EAAMsT,GAC9D,GAAI8S,GAAQ1I,KACRw7B,EAAYv0C,YAAW3E,GAAQ4qD,OAAQltC,KAAK8b,OAAQlmB,SAAUA,IAAY,GAC1E0gI,EAAiBt2H,KAAKzV,OAAOK,QAAQJ,GAAK,sBAC1CwV,MAAKzV,OAAOkhB,SAA0D,gBAAvCzL,MAAKzV,OAAOiE,uBAC3CwR,KAAKzV,OAAOgf,kBAAkBiyB,EAAWx7B,KAAKzV,OAAQ,uBAAwB+rI,EAAgB,KAAM,KAAMrzC,GAC1GjjF,KAAKzV,OAAOihC,mBAGZ5/B,EAAeq3F,EAAMjjF,KAAKzV,OAAOgf,kBAAkBiyB,EAAWx7B,KAAKzV,OAAQ,uBAAwB+rI,GAEvG,IAAIC,GAAW,WAEX,IAAK,GADDjkH,GAAO5J,EAAMne,OAAO2L,aACfzS,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IACzB6uB,EAAK7uB,GAAGkb,kBACR+J,EAAMne,OAAOmpD,WAAW4N,QAAQ9iD,MAAM8T,EAAK7uB,GAAGpB,OAC1CiwB,EAAK7uB,GAAGkb,iBAIxB8uB,wBAAqB6oG,EAAgB,WAAYt2H,KAAKzV,OAAOiE,cAAc,EAAM+nI,IAE9ExB,KClXPyB,GAAiC,WAIjC,QAASA,GAAgBjsI,GACrByV,KAAKzV,OAASA,EA2ClB,MAzCAisI,GAAgBr0I,UAAUk1B,OAAS,SAAUxsB,EAAUqE,GACnD,GAAIK,cAAcyQ,KAAKzV,OAAO0E,iBAAkB,CAE5CC,EAAc,UAAE3I,UAAY,GAC5B2I,EAAc,UAAEpD,YAAYkU,KAAKk1H,eAAerqI,EAAUqE,IAC1DA,EAAc,UAAEzE,UAAU5I,OAAO,qBACjCqN,EAAc,UAAEzE,UAAUqE,IAAI,qBAC9BrE,YAAUyE,EAAK9J,KAAM,cAAe,sBAEnC,CACD,GAAI4a,KAAKzV,OAAOkhB,SAAWvc,EAAKunI,cAAgBvnI,EAAKunI,aAAavwI,SAAU,CACxE,GAAI81C,GAAY9sC,EAAKupB,KAAKvvB,cACtBwtI,EAAQxnI,EAAKupB,KAAKvkB,WAAU,EAChC8nC,GAAUzC,aAAam9F,EAAO16F,EAAUnwC,SAASuiC,SAASl/B,EAAKupB,KAAKiS,aAAa,iBAAkB,MACnGgsG,EAAM3iF,QACN7kD,EAAKupB,KAAK52B,SACVqN,EAAKupB,KAAOi+G,EAEhBxnI,EAAKupB,KAAKlyB,UAAY,GACtB2I,EAAKupB,KAAK3sB,YAAYkU,KAAKk1H,eAAerqI,EAAUqE,IACpDA,EAAKupB,KAAKhuB,UAAU5I,OAAO,qBAC3BqN,EAAKupB,KAAKhuB,UAAUqE,IAAI,qBACxBrE,YAAUyE,EAAK9J,KAAM,cAAe,oBAG5CoxI,EAAgBr0I,UAAU+yI,eAAiB,SAAUrqI,EAAUqE,GAC3D,GAAI5L,GAAO0c,KAAKzV,OACZ04F,EAAOjjF,KAAKzV,OACXkC,cAAc,QAAUjC,GAAIlH,EAAKsH,QAAQJ,GAAK,WAAY1B,UAAW,cAQ1E,OAPAm6F,GAAKn3F,YAAYjB,EAASqE,EAAKunI,aAAa9qI,MACT,gBAA/BuD,EAAKunI,aAAa7sH,UAClB1a,EAAKupB,KAAKhuB,UAAUqE,IAAI,cAEvBI,EAAKunI,aAAa7sH,UACnB1a,EAAKupB,KAAKhuB,UAAUqE,IAAI,cAErBm0F,GAEXuzC,EAAgBr0I,UAAU8rD,oBAAsB,aAGzCuoF,KC3CPG,GAAkC,WAIlC,QAASA,GAAiBpsI,EAAQyE,GAC9BgR,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EAClBgR,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGwmH,GAAsB52H,KAAK6N,QAAS7N,MACnDA,KAAKzV,OAAO6lB,GAAGQ,GAAgB5Q,KAAK6N,QAAS7N,OAkMjD,MAhMA22H,GAAiBx0I,UAAU00I,aAAe,WACtC72H,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,iBAE/CunI,EAAiBx0I,UAAU6yI,OAAS,SAAUnqI,EAAUqE,GACpD8Q,KAAK8b,QAAS,EACd9b,KAAK82H,aAAajsI,EAAUqE,IAEhCynI,EAAiBx0I,UAAUk1B,OAAS,SAAUxsB,EAAUqE,GACpD8Q,KAAK8b,QAAS,EACd9b,KAAK82H,aAAajsI,EAAUqE,IAEhCynI,EAAiBx0I,UAAU40I,mBAAqB,SAAU7nI,GACtD,GAAI5L,GAAO0c,KAAKzV,MAEhB,IAAIyV,KAAKzV,OAAOsW,iBAAkB,CAC9B,GAAIm2H,GAAwB,GAAI3vF,IAAyBrnC,KAAKzV,OAAQyV,KAAKhR,eAE3E,OADAgoI,GAAsBnoI,OAASmR,KAAK8b,OAASrM,yBAAuBqM,OAASrM,yBAAuBy9B,MAC7F8pF,EAAsBtqF,uBAAuBx9C,GAaxD,MAVQ5L,GAAKkL,aAAa4b,eACTpK,KAAKi3H,6BAA6B,iBAAkB/nI,GAExD8Q,KAAK8b,OACD9b,KAAK8gC,KAAKvE,YAAY,iBAAmBrtC,EAAK+9C,gBAAgB,GAG9DjtC,KAAK8gC,KAAKvE,YAAY,iBAK3Co6F,EAAiBx0I,UAAU20I,aAAe,SAAUjsI,EAAUqE,GAC1D,GAAI5L,GAAO0c,KAAKzV,MAChByV,MAAKozF,OAASpzF,KAAKzV,OAAOkC,cAAc,OAASjC,GAAIlH,EAAKsH,QAAQJ,GAAK,sBAAuB0C,OAAQ,gBAClG5J,EAAKud,kBACLb,KAAKozF,OAAO3oG,UAAUqE,IAAI,uBAE9BkR,KAAKozF,OAAOrxG,aAAa,aAAc,eACvCuB,EAAKsH,QAAQkB,YAAYkU,KAAKozF,QAC9BpzF,KAAK62H,eAGL72H,KAAK7P,UAAY,GAAIy7C,UAAO3kD,UACxBihD,OAAQloC,KAAK+2H,mBAAmB7nI,GAAO28C,SAAS,EAAMljD,SAAS,EAAMs0B,SAAU,gBAC/EnX,QAAS9F,KAAKk1H,eAAerqI,EAAUqE,GACvC48C,eAAe,EACforF,eAAe,EAEf5qF,MAAOtsC,KAAKm3H,YAAY9jH,KAAKrT,MAC7BosC,QAASpsC,KAAKqsC,cAAch5B,KAAKrT,MACjC+rC,eAAe,EAAMrjD,MAAOpF,EAAKkL,aAAatI,SAAW,OAAS,QAClExE,OAAQwN,EAAKxN,OAASwN,EAAKxN,OAASyE,SAASwG,KAAM6/C,mBAAqBC,OAAQ,QAChFpvB,eAAgB/5B,EAAKkL,aAAa6uB,eAAiBrd,KAAKi3H,6BAA6B,iBAAkB/nI,GAAQ,KAC/Gk7C,UACQx8B,MAAO5N,KAAKqpF,SAASh2E,KAAKrT,MAC1BspF,aAAexjF,QAAS9F,KAAK8gC,KAAKvE,YAAY,cAAetf,SAAU,YAAassE,WAAW,KAEjG37E,MAAO5N,KAAKqpF,SAASh2E,KAAKrT,MAAOspF,aAAersE,SAAU,SAAUnX,QAAS9F,KAAK8gC,KAAKvE,YAAY,oBAC1Gj5C,EAAKkL,aAAa4kG,OAAU9vG,EAAKkL,aAAa4kG,OAAOzoF,gBACnDpb,aAIDyQ,KAAK7P,UAAU67C,OAAShsC,KAAKzV,OAAOyhD,OAHpC98C,EAAKkkG,OAASpzF,KAAK7P,SAMvB6P,MAAK7P,UAA0B,kBAAI,EACnC6P,KAAK6qC,yBACL7qC,KAAK7P,UAAUsqC,SAASz6B,KAAKozF,QAC7Br7F,GAAiBiI,KAAKzV,OAAOK,QAASoV,KAAK7P,UAAUvF,QAAQ1B,eACzD5F,EAAKud,kBACLb,KAAK7P,UAAU86C,MAAK,IAG5B0rF,EAAiBx0I,UAAUkqD,cAAgB,WACvCzrC,GAAgBZ,KAAKzV,SAEzBosI,EAAiBx0I,UAAU0oD,uBAAyB,WAChD,GAAIniC,GAAQ1I,IACRA,MAAKzV,OAAOsW,mBACRb,KAAKzV,OAAO0hD,oBACZjsC,KAAK7P,UAAUzO,OAASse,KAAKzV,OAAO0hD,mBAExCjsC,KAAK7P,UAAUi6C,aACfpqC,KAAK7P,UAAU27C,eAAgB,EAC/B9rC,KAAK7P,UAAUxH,SAAU,EACzBqX,KAAK7P,UAAUzH,MAAQ,OACvBsX,KAAK7P,UAAU+7C,KAAO,WAClBxjC,EAAMvY,UAAUvF,QAAQvB,MAAM6hD,UAAY,UAItDyrF,EAAiBx0I,UAAUknG,SAAW,SAAUrmG,GACxCgd,KAAK8gC,KAAKvE,YAAY,gBAAgBp0C,gBAAkBnF,EAAEtB,OAAOoyC,UAAUttC,OAAO2B,cAClF6X,KAAKm3H,cAGLn3H,KAAKzV,OAAOktB,WAGpBk/G,EAAiBx0I,UAAUg1I,YAAc,WACrCn3H,KAAKzV,OAAOsuF,aAEhB89C,EAAiBx0I,UAAU0rB,QAAU,SAAU3e,GAE3C,IAAK,GADDkoI,IAAuB,WAAY,iBAAkB,kBAChD3zI,EAAI,EAAGA,EAAI2zI,EAAoBh0I,OAAQK,IAC5C,GAAIuc,KAAKzV,OAAOiE,aAAa4oI,EAAoB3zI,IAAK,CAClD,GAAI4zI,GAAeD,EAAoB3zI,GAAG8nH,OAAO,GAAG8W,cAAgB+U,EAAoB3zI,GAAG4H,MAAM,GAC7FirI,EAAiBt2H,KAAKzV,OAAOK,QAAQJ,GAAK,eAAiB6sI,CAC/D5pG,wBAAqB6oG,EAAgBe,EAAcr3H,KAAKzV,OAAOiE,cAGvEwR,KAAKzV,OAAOsoB,OzE0IK,mByEzIjB7S,KAAKzV,OAAOuxB,QAAS,EACrB9b,KAAKzV,OAAOsoB,OAAOwyB,OACfrlC,KAAKozF,SAAWpzF,KAAK7P,UAAU+f,cAC/BlQ,KAAK7P,UAAU0d,UACfhsB,SAAOme,KAAKozF,UAGpBujC,EAAiBx0I,UAAU80I,6BAA+B,SAAUK,EAAYpoI,GAC5E,GAAIqoI,GAAUv3H,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,WAAawuI,IACrE97F,EAAYv0C,YAAWiI,EAAK6S,SAAWmrC,OAAQltC,KAAK8b,SAAU,GAC9D2f,EAAaz7B,KAAKzV,OAAOK,QAAQJ,GAAK,eAAiB8sI,CAI3D,OAHA1rI,GAAe2rI,GAAyB,mBAAfD,EAAkCt3H,KAAKzV,OAAO+rF,wBACnEt2E,KAAKzV,OAAOisF,yBAAyBh7C,EAAWx7B,KAAKzV,OAAQ,eAAiB+sI,EAAY77F,IAC9FhO,uBAAqBgO,EAAY67F,EAAYt3H,KAAKzV,OAAOiE,cAClD+oI,GAEXZ,EAAiBx0I,UAAU+yI,eAAiB,SAAUrqI,EAAUqE,GAC5D,GAAIwZ,GAAQ1I,KACR1c,EAAO0c,KAAKzV,OACZ2G,EAAM8O,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAWkX,KAAK8b,OAAS,cAAgB,kBAClFmnE,EAAO/zF,EAAK+zF,KACZjjF,KAAKzV,OAAOkC,cAAc,QAAUjC,GAAIlH,EAAKsH,QAAQJ,GAAK,WAAY1B,UAAW,cACrF,IAAIkX,KAAKzV,OAAOiE,aAAatI,SAAU,CACnC,GAAIowI,GAAiBt2H,KAAKzV,OAAOK,QAAQJ,GAAK,uBAC1CgxC,EAAYv0C,YAAWiI,EAAK6S,SAAWmrC,OAAQltC,KAAK8b,SAAU,EAC5C9b,MAAKzV,OAAOkhB,SAA0D,gBAAvCzL,MAAKzV,OAAOiE,uBAE7DwR,KAAKzV,OAAOgf,kBAAkBiyB,EAAWx7B,KAAKzV,OAAQ,uBAAwB+rI,EAAgB,KAAM,KAAMrzC,GAC1GjjF,KAAKzV,OAAOihC,mBAGZ5/B,EAAeq3F,EAAMjjF,KAAKzV,OAAOgf,kBAAkBiyB,EAAWx7B,KAAKzV,OAAQ,uBAAwB+rI,GAEvG,IAAIC,GAAW,WAEX,IAAK,GADDpzI,GAAUulB,EAAMne,OAAO2L,aAClBzS,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAC5BN,EAAQM,GAAGkb,kBACX+J,EAAMne,OAAOmpD,WAAW4N,QAAQ9iD,MAAMrb,EAAQM,GAAGpB,OAC7Cc,EAAQM,GAAGkb,iBAM3B,OAFA8uB,wBAAqB6oG,EAAgB,WAAYt2H,KAAKzV,OAAOiE,cAAc,EAAM+nI,GACjFrlI,EAAIpF,YAAYm3F,GACT/xF,EAKX,IAAK,GAHDjE,GAAQ+S,KAAKzV,OAAOkC,cAAc,SAAW3D,UAAW,UAAWwyB,OAAS2N,YAAa,SACzFpqB,EAAQmB,KAAKzV,OAAOkC,cAAc,SAClC6lB,EAAOhvB,EAAK4S,aACPzS,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAC7B,KAAIuc,KAAKzV,OAAOmpD,WAAW8jF,qBAAqBllH,EAAK7uB,KAAO6uB,EAAK7uB,GAAGumB,UAAYsI,EAAK7uB,GAAGymB,kBACnE,aAAjBoI,EAAK7uB,GAAGE,MADZ,CAIA,GAAI6b,GAAKQ,KAAKzV,OAAOkC,cAAc,MAC/BgrI,EAAWz3H,KAAKzV,OAAOkC,cAAc,MACrC3D,UAAW,YAAawyB,OACpBjyB,MAAO,eAAiB2W,KAAKzV,OAAO2X,UAAY,QAAU,QAAU,iBAGhElC,MAAKzV,OAAOkC,cAAc,SAAWlG,UAAW+rB,EAAK7uB,GAAGpB,OACpEwI,GAASynB,EAAK7uB,GAAGkI,KAAKlB,UAAU5I,OAAO,WACvC41I,EAAS3rI,YAAYjB,EAASynB,EAAK7uB,GAAGkI,MACtC6T,EAAG1T,YAAY2rI,GACf54H,EAAM/S,YAAY0T,GAKtB,MAHAvS,GAAMnB,YAAY+S,GAClBokF,EAAKn3F,YAAYmB,GACjBiE,EAAIpF,YAAYm3F,GACT/xF,GAEXylI,EAAiBx0I,UAAU8rD,oBAAsB,WACzCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAI++G,GAAsB52H,KAAK6N,SAC3C7N,KAAKzV,OAAOstB,IAAIjH,GAAgB5Q,KAAK6N,WAElC8oH,KC1MPe,GAA4B,WAI5B,QAASA,GAAWntI,EAAQyE,GAExBgR,KAAK4J,UACD+tH,OAAU5C,GACV6C,OAAU7C,GAAkB8C,MAASrB,GAAiB5qF,OAAU+qF,IAEpE32H,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAK+gC,SAAW,GAAI/gC,MAAK4J,SAAS5J,KAAKzV,OAAOiE,aAAaC,MAAMlE,EAAQyE,GACzEgR,KAAK+zC,MAAQ/kD,EAAeI,WAAW,SA8N3C,MA5NAsoI,GAAWv1I,UAAU6yI,OAAS,SAAU9lI,GACpC8Q,KAAK+gC,SAASi0F,OAAOh1H,KAAK83H,gBAAgB5oI,GAAOA,GACjD8Q,KAAK+3H,cAAc7oI,IAEvBwoI,EAAWv1I,UAAUk1B,OAAS,SAAUnoB,GACpC8Q,KAAK+gC,SAAS1pB,OAAOrX,KAAK83H,gBAAgB5oI,GAAOA,GACjD8Q,KAAKzV,OAAOsoB,O1EwUS,Y0ExUsB3jB,GAC3C8Q,KAAK+3H,cAAc7oI,IAEvBwoI,EAAWv1I,UAAU41I,cAAgB,SAAU7oI,GAC3C,GACIqoD,GACA9+B,EAEAu/G,EACAC,EALA30I,EAAO0c,KAAKzV,OAMZwJ,EAAUzQ,EAAKuS,eACf/N,EAAiC,UAAzBxE,EAAK+Y,iBAA0D,WAA3B/Y,EAAKkL,aAAaC,KAAoB,EAAI,EACtFw0F,EAAkC,WAA3B3/F,EAAKkL,aAAaC,KACzBF,SAAO,IAAMjL,EAAKsH,QAAQJ,GAAK,kCAAmCrE,UAClE7C,EAAKsH,QAAQxE,iBAAiB,eAAe0B,EACjD,IAAIiM,GAAsC,WAA3BzQ,EAAKkL,aAAaC,KAAmB,CAChD,GAAIwP,GAAWmwB,SAASl/B,EAAK9J,IAAIslC,aAAa,iBAAkB,GAC5DpnC,GAAKwb,aAAqC,QAArB5P,EAAKkT,aAA8D,QAArC9e,EAAKkL,aAAauQ,gBAClEd,EAAW3a,EAAKwb,aACnBk5H,EAAQ10I,EAAKsH,QAAQtE,cAAc,oBAAoBA,cAAc,eACjC,eAAhC0Z,KAAKzV,OAAO8R,kBACZ47H,EAAS/oI,EAAKqmI,mBAIlByC,EAAQ10I,EAAKsH,QAAQtE,cAAc,qBAAqBA,cAAc,eAClC,eAAhC0Z,KAAKzV,OAAO8R,kBACZ47H,EAAS/oI,EAAKqmI,kBAK1B,IAAK,GAAI1lI,GAAK,EAAGmkH,EADqB,UAA3B1wH,EAAKkL,aAAaC,KAAmBnL,EAAK4S,cAAgB5S,EAAKkU,iBAAiBtI,EAAKgkB,aAChErjB,EAAKmkH,EAAO5wH,OAAQyM,IAAM,CACtD,GAAI9B,GAAMimH,EAAOnkH,EACjB,KAAImQ,KAAKzV,OAAOiE,aAAatI,UAAa1D,oBAAkBuL,EAAI1L,QAchE,IAAI2d,KAAKzV,OAAOmpD,WAAW8jF,qBAAqBzpI,KAAQA,EAAIic,SAA5D,CAGSjc,EAAI3L,cAAc2L,EAAI1L,MAAO6M,EAAK6S,QAAShU,GAEhD0qB,EAD6B,YAA7B1qB,EAAImQ,sBAAiE,WAA3B5a,EAAKkL,aAAaC,KACrDupI,EAAM1xI,cAAc,iBAAmByH,EAAIpC,IAAM,KAEnDssI,GAAuC,iBAA7BlqI,EAAImQ,sBAAsE,WAA3B5a,EAAKkL,aAAaC,KACzEwpI,EAAO3xI,cAAc,iBAAmByH,EAAIpC,IAAM,KAGlDs3F,EAAK38F,cAAc,iBAAmByH,EAAIpC,IAAM,IAE3D,IAAIO,GAAO6B,EAAIob,KAAK84F,KACfz/G,qBAAkBi2B,KACC,gBAATvsB,IACPA,EAAOxJ,GAAUwJ,EAAMzD,UAEnBsZ,QAAS7S,EAAK6S,QAASnX,QAAS6tB,EAAMl2B,OAAQwL,EAAKqU,YAAalT,EAAKkT,YAAahd,IAAK8J,EAAK9J,IAC5FoM,eAAgBzD,EAAI2c,mBAAqBhoB,GAAUqL,EAAI1L,MAAO6M,EAAKsC,kBAIvEzD,EAAIob,KAAK84F,OACLlgG,QAAS7S,EAAK6S,QAASnX,QAAS6tB,EAAMl2B,OAAQwL,EAAKqU,YAAalT,EAAKkT,YAAahd,IAAK8J,EAAK9J,IAC5FoM,eAAgBzD,EAAI2c,mBAAqBhoB,GAAUqL,EAAI1L,MAAO6M,EAAKsC,kBAGtE+lD,GAAc9+B,EAAKiS,aAAa,cACjC1qB,KAAK04C,aAAajgC,EAAMvpB,EAAKvL,MAC7B4zD,GAAY,SA5CpB,CACI,GAAIn+B,GAAWnyB,YAAWiI,EAC1BkqB,GAASxuB,QAAUq4F,EAAK38F,cAAc,SAAWqH,EAAkBI,EAAI1L,OAAS,KAC5EG,oBAAkB42B,EAASxuB,UAAYmJ,IACvCqlB,EAASxuB,QAAUotI,EAAM1xI,cAAc,SAAWqH,EAAkBI,EAAI1L,OAAS,MAEvD,gBAAnB0L,GAAIob,KAAK84F,MAChBv/G,GAAUqL,EAAIob,KAAK84F,MAAOx5G,QAAQ2wB,GAGlCrrB,EAAIob,KAAK84F,MAAM7oF,IAsC3B,GAAIrlB,IAAYiM,KAAKzV,OAAOu8B,gBAAwC,QAArB53B,EAAKkT,aAA+C,cAArBlT,EAAKkT,cAC1C,WAAlCpC,KAAKzV,OAAOiE,aAAaC,OAAsBjM,oBAAkBygG,KAAUzgG,oBAAkBw1I,GAAQ,CACxG,GAAIE,GAAcF,EAAM1xI,cAAc,MAAMuF,SAAS,GACjDssI,EAAcl1C,EAAK38F,cAAc,MAAMuF,SAAS,EACpD,IAAIssI,EAAW1uI,aAAeyuI,EAAWzuI,aACrCyuI,EAAW7uI,MAAMiE,OAAS6qI,EAAW1uI,aAAe,KAChDwuI,KACIG,EAAcJ,EAAM1xI,cAAc,MAAMuF,SAAS,IACzCxC,MAAMiE,OAAS6qI,EAAW1uI,aAAe,UAKzD,IADA0uI,EAAW9uI,MAAMiE,OAAS4qI,EAAWzuI,aAAe,KAChDwuI,EAAQ,CACR,GAAIG,GAAcJ,EAAM1xI,cAAc,MAAMuF,SAAS,EACrDusI,GAAY/uI,MAAMiE,OAAS4qI,EAAWzuI,aAAe,QAKrEiuI,EAAWv1I,UAAUu2D,aAAe,SAAUtuD,EAAMzG,GAChD,GAAI6iE,GAASxmD,KAAKzV,OAAOK,QAAQtE,cAAc,sBAC1C9D,qBAAkBgkE,IACnBA,EAAOC,mBAAmBh8D,UAAUqE,IAAI,WAEN,UAAlCkR,KAAKzV,OAAOiE,aAAaC,KACzBuR,KAAK+zC,MAAMS,SAAU9yD,OAAQ2W,UAAQjO,EAAM,QAAS,IAGtC4V,KAAKzV,OAAO8J,sBAA0D,WAAlC2L,KAAKzV,OAAOiE,aAAaC,MAC3DuR,KAAKzV,OAAO8J,sBAAoE,WAA5C2L,KAAKzV,OAAOiE,aAAauQ,gBACtE5U,EAAaC,EAAM,cACtBA,EAAK2pD,QAIL3pD,EAAK2pD,OAAQ2C,eAAe,IAGhCtsD,EAAKK,UAAUC,SAAS,kBACxBN,EAAK8zE,kBAAkB9zE,EAAKxI,MAAMwB,OAAQgH,EAAKxI,MAAMwB,SAG7Ds0I,EAAWv1I,UAAU21I,gBAAkB,SAAU5oI,GAC7C,GAAIwZ,GAAQ1I,KACR1c,EAAO0c,KAAKzV,OACZM,KACAynB,EAAkC,UAA3BhvB,EAAKkL,aAAaC,KAAmBnL,EAAK4S,cAAgB5S,EAAKkU,iBAAiBtI,EAAKgkB,YAChG,IAAIlT,KAAKzV,OAAOiE,aAAatI,SACzB,QAEJ,KAAK,GAAIzC,GAAI,EAAGsB,EAAMutB,EAAKlvB,OAAQK,EAAIsB,EAAKtB,IAAK,CAC7C,GAAIsK,GAAMukB,EAAK7uB,EACf,KAAIuc,KAAKzV,OAAOmpD,WAAW8jF,qBAAqBzpI,GAGhD,GAAIA,EAAIic,UAAYjc,EAAImc,iBAAxB,CACI,GAAIta,OAAQ,GACR2sB,EAAmBvc,KAAKhR,eAAeI,WAAW,uBAClD4/F,EAAQ,GAAIjxE,IAAkB/d,KAAKzV,QACnC+uB,EAAeiD,EAAiBhD,gBAAgBjK,WAASuN,eAEzDpE,GADJ7oB,EAAQo/F,EAAMlsF,aAAa5T,EAAK6S,SAAS,GAAGnS,OAC3B0J,OAAO,SAAUmf,GAAQ,MAAOA,GAAK6G,QAClD7d,EAAK6X,EAAa/V,OAAOkV,EAAKh1B,GAAIyL,EAAK6S,SAAWja,MAASoH,EAAK9J,IAAM8J,EAAK9J,IAAIslC,aAAa,iBAAmB,KAC/Gx5B,EAAMuQ,EAAG9I,mBACT5W,aAAa,YAAa0f,EAAGipB,aAAa,cAC9C7/B,EAASkD,EAAIpC,KAAOuF,MAVxB,CAaA,GACImnI,IAAU91I,OAAQwL,EAAKnM,MADdmM,EAAI3L,cAAc2L,EAAI1L,MAAO6M,EAAK6S,QAAShU,GACfpK,KAAMuL,EAAKkT,YAAa9f,KAAM4M,EAAK6S,SACxE7V,EAAO6B,EAAIob,KAAK6W,OAChBnvB,MAAQ,EACZ,IAAI9C,EAAIyc,aAAc,CAClB3Z,EAAQmP,KAAKzV,OAAOkC,cAAc,QAAU6uB,OAASgG,eAAgBvzB,EAAIpC,MACzE,IAAIq0C,GAAShgC,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAM,eAC5C2sI,EAAWliI,MAAoBlH,EAAK6S,SAAWxf,OAAQwL,GAU3D,IATsBiS,KAAKzV,OAAOkhB,SAAyC,gBAAtB1d,iBAEjDA,EAAIwb,kBAAkBtiB,UAASa,MAASoH,EAAK+O,UAAYq6H,GAAWt4H,KAAKzV,OAAQ,eAAgBy1C,EAAQ,KAAM,KAAMnvC,GACrHmP,KAAKzV,OAAOihC,mBAIZ5/B,EAAeiF,EADA9C,EAAIwb,kBAAkBtiB,UAASa,MAASoH,EAAK+O,UAAYq6H,GAAWt4H,KAAKzV,OAAQ,eAAgBy1C,IAGhHzwC,aAAY,CAQZk+B,uBAAqBuS,EAAQ,eAAgBjyC,GAAK,EAPnC,SAAUwqI,GACrB,GAAIh2I,GAASg2I,CAIb,OAHW,YACP7vH,EAAMne,OAAOmpD,WAAW4N,QAAQ9iD,MAAMjc,EAAOF,OAASE,EAAOoc,kBAIJ5Q,SAGpE,CAQD,GAAqB,iBALjB8C,EAFgB,gBAAT3E,IACPA,EAAOxJ,GAAUwJ,EAAMzD,SACV4vI,GAGLtqI,EAAIob,KAAK6W,OAAOq4G,IAEG,CAC3B,GAAInnI,GAAM8O,KAAKzV,OAAOkC,cAAc,MACpCyE,GAAI3K,UAAYsK,EAChBA,EAAQK,EAAIooC,WAEhB,GAAIk/F,GAA4B,UAAlB3nI,EAAM67B,SAAuB77B,EAAMzK,iBAAiB,SAAShD,OACvEgvG,EAAmBzkG,EAAkBI,EAAI1L,MAC7C2E,cAAWwxI,EAAU3nI,EAAMvK,cAAc,SAAWuK,GAChDgK,KAAMu3F,EAAkB9wE,eAAgBvzB,EAAIpC,IAC5CnB,GAAIlH,EAAKsH,QAAQJ,GAAK4nG,IAE1B3nG,YAAUoG,GAAQ,UAAW,eACP,UAAlB9C,EAAIkc,WACJpZ,EAAMpG,UAAUqE,IAAI,cAEnBf,EAAIG,cAAgBH,EAAIE,aAAoC,cAArBiB,EAAKkT,aAC5CrU,EAAIE,YAAmC,QAArBiB,EAAKkT,cACxBvR,EAAM9O,aAAa,WAAY,IAGvC8I,EAASkD,EAAIpC,KAAOkF,GAExB,MAAOhG,IAEX6sI,EAAWv1I,UAAU0rB,QAAU,WAC3B7N,KAAK+gC,SAASkN,uBAEXypF,KChPPe,GAAiC,WACjC,QAASA,GAAgBluI,GACrByV,KAAK04H,eAAiB,wBAAyB,YAC/C14H,KAAKzV,OAASA,EAoElB,MAlEAkuI,GAAgBt2I,UAAU69B,OAAS,SAAU9wB,GACzC,GAAInB,GAAMmB,EAAK3M,OACXo2I,EAAa,oBACA,cAAb5qI,EAAIpK,OACJg1I,EAAa,wCAEjB,IAAIvmC,GAAmBzkG,EAAkBuB,EAAK3M,OAAOF,MACrD,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW6vI,EAAYr9G,OACnB33B,KAAM,WAAY/B,MAAOsN,EAAKtN,MAAO0/B,eAAgBvzB,EAAIpC,IACzDnB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK4nG,EAC7Bv3F,KAAMu3F,MAIlBqmC,EAAgBt2I,UAAUuhH,KAAO,SAAU94G,GACvC,MAAOA,GAAQmG,SAEnB0nI,EAAgBt2I,UAAU8/G,MAAQ,SAAU/yG,GACxC,GAAI0pI,GACAzyE,CACgC,SAArBj3D,EAAKkT,aAAyBlT,EAAK9J,IAAIqF,UAAUC,SAAS,aAOzE,IANKlI,oBAAkB0M,EAAK9J,OACxBwzI,EAAe1pI,EAAK9J,IAAIkB,cAAc,wBAEtC5D,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,WAClCokD,EAAW/rD,KAAKC,MAAM3X,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,SAAS9R,WAAW9H,iBAE3E3F,oBAAkBo2I,IAAsC,aAArB1pI,EAAK3M,OAAOoB,KAAqB,CAGrE,GAFAqc,KAAK4J,SAAW5J,KAAKzV,OAAOiE,aAAaC,KACzCuR,KAAK64H,QAAU3pI,EAAK9J,IACK,QAArB8J,EAAKkT,YAAuB,CAC5B,GAAIhd,GAAM4a,KAAKzV,OAAOqgC,oBAAoB17B,EAAK9J,IAAIslC,aAAa,YAChEy7B,KAAW/gE,GAAMA,EAAIoe,WAEzB7T,EAAuB0wB,UAAM,OAAYh1B,MAAMC,KAAK4D,EAAK9J,IAAIgB,iBAAiB,eAAgB+/D,GAAU3vD,OAAOwJ,KAAK04H,gBAExH14H,KAAKla,IAAM,GAAIkxG,YAAS/vG,UACpB41C,MAAyC,WAAlC78B,KAAKzV,OAAOiE,aAAaC,KAAoB,IAAMS,EAAK3M,OAAO8F,WACtE0I,QAASo1D,EACT1d,UAAW36C,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,SAAUsX,UAAWlC,KAAKzV,OAAO2X,UAC3FkzF,OAAQp1F,KAAK84H,eAAezlH,KAAKrT,OAClC9Q,EAAK3M,OAAO4mB,KAAKwB,SAChBpb,eACAyQ,KAAKla,IAAIkmD,OAAShsC,KAAKzV,OAAOyhD,QAElChsC,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3B6tI,EAAgBt2I,UAAU22I,eAAiB,SAAU5pI,GACjD,GAAI8Q,KAAK64H,SAA6B,WAAlB74H,KAAK4J,SAAuB,CAC5C,GAAI9a,IAAM,CACLI,GAAK6B,SAINjC,GAAM,EACNkR,KAAK64H,QAAQ92I,aAAa,gBAAiB+M,EAAImB,aAJ/C+P,KAAK64H,QAAQ/2I,gBAAgB,iBAMjC6N,EAAuB0wB,UAAM,OAAYh1B,MAAMC,KAAK0U,KAAK64H,QAAQzyI,iBAAiB,eAAgB0I,GAAK0H,OAAOwJ,KAAK04H,kBAG3HD,EAAgBt2I,UAAU0rB,QAAU,WAC5B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGV4qH,KCtEPM,GAAkC,WAClC,QAASA,GAAiBxuI,GAEtByV,KAAKzV,OAASA,EACdyV,KAAKk7E,MAAO,EAkEhB,MAhEA69C,GAAiB52I,UAAU69B,OAAS,SAAU9wB,GAE1C,GAAIkjG,GAAmBzkG,EAAkBuB,EAAK3M,OAAOF,MACrD,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK4nG,EAC7Bv3F,KAAMu3F,EAAkBzuG,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAI9EotI,EAAiB52I,UAAU8/G,MAAQ,SAAU/yG,GACzC8Q,KAAKzd,OAAS2M,EAAK3M,MACnB,IAAIuf,GAA6C,WAAlC9B,KAAKzV,OAAOiE,aAAaC,KACpC9I,EAAO,GAAIuN,aAAUhE,EAAK3M,OAAOF,MAAO,WAAY,MAAM,GAAM,EACpE2d,MAAKla,IAAM,GAAIovG,gBAAajuG,UACxB+K,WAAYgO,KAAKzV,OAAOyH,qBAAsBC,eAC1C+N,KAAKzV,OAAOyH,WAAa,GAAIC,eAAY+N,KAAKzV,OAAOyH,YACzDH,OAAO,GAAIC,UAAQO,MAAM1M,GAAM4I,OAAOW,EAAK3M,OAAOF,OAAQ8f,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,SAClHggB,QAAUhpB,MAAOsN,EAAK3M,OAAOF,OAC7BT,MAAOc,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,SACzCG,UAAWlC,KAAKzV,OAAO2X,UAAWoK,eAAgBtM,KAAKg5H,iBAAiB3lH,KAAKrT,MAC7EosC,QAASpsC,KAAKi5H,gBAAgB5lH,KAAKrT,MACnCiC,YAAaH,EAAW,GAAK5S,EAAK3M,OAAO8F,WAAY+5G,YAAa,QAClEpgG,eAAgBF,EAAW,QAAU,SAAUoqC,KAAMlsC,KAAKm1F,aAAa9hF,KAAKrT,MAC5Ey3F,UAAW,aACZvoG,EAAK3M,OAAO4mB,KAAKwB,SACpB3K,KAAKla,IAAI+L,MAAM8Y,OAAS3K,KAAKzV,OAAOsH,MAAM8Y,OACtCpb,eACAyQ,KAAKla,IAAIkmD,OAAShsC,KAAKzV,OAAOyhD,QAElChsC,KAAKla,IAAI20C,SAASvrC,EAAKtE,SAEvBsE,EAAKtE,QAAQ7I,aAAa,OAAQ4L,EAAkBuB,EAAK3M,OAAOF,SAEpE02I,EAAiB52I,UAAUuhH,KAAO,SAAU94G,GACxC,MAAOA,GAAQumF,cAAc,GAAGvvF,OAEpCm3I,EAAiB52I,UAAU82I,gBAAkB,SAAUj2I,GACnDgd,KAAKk7E,MAAO,GAEhB69C,EAAiB52I,UAAU62I,iBAAmB,SAAUh2I,GACpDA,EAAE0C,OAASjD,WAAS0pG,SAASnpG,EAAE0C,OAAQsa,KAAKla,IAAI8kB,OAAOhpB,OAAO,GAC1Doe,KAAKk7E,MAAQl7E,KAAKzd,OAAOyP,aACrB,UAAYgO,MAAKzd,OAAOyP,WACxBgO,KAAKzd,OAAOyP,WAAWtM,OAAS1C,EAAE0C,OAE7Bsa,KAAKzd,OAAOyP,qBAAsBC,iBACvC+N,KAAKzd,OAAOyP,WAAWA,WAAWE,KAAOlP,EAAE0C,SAGnDsa,KAAKk7E,MAAO,GAEhB69C,EAAiB52I,UAAUgzG,aAAe,SAAUjmG,GAChD,GAAIgqI,GAAa/uI,EAAa6V,KAAKla,IAAI8E,QAAS,WAChD,IAAsC,WAAlCoV,KAAKzV,OAAOiE,aAAaC,OAAsBjM,oBAAkB02I,GAAa,CAC9E,GAAI3mC,GAAShkG,SAAO,IAAM2qI,EAAW1uI,GAAIrE,UAAUgrF,cAAc,EACjEjiF,GAAKrF,MAAMe,QAAQvB,MAAMqH,QAAU6hG,EAAO7hG,OAAS,GAAGT,aAG9D8oI,EAAiB52I,UAAU0rB,QAAU,WAC7B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGVkrH,KCxEPI,GAAiC,WACjC,QAASA,GAAgB5uI,GACrByV,KAAKzV,OAASA,EA4ClB,MA1CA4uI,GAAgBh3I,UAAU+hH,gBAAkB,SAAUh1G,GAClD,GAAqB,KAAjBA,EAAK8+C,SAAmC,IAAjB9+C,EAAK8+C,QAAe,CAC3C,GAAIm2D,GAAMh+G,SAASi+G,YAAY,aAC/BD,GAAIE,UAAU,UAAU,GAAO,GAE/BrkG,KAAKskG,cAAcH,KAG3Bg1B,EAAgBh3I,UAAU69B,OAAS,SAAU9wB,GACzC,GAAIkjG,GAAmBzkG,EAAkBuB,EAAK3M,OAAOF,MAErD,OADA2d,MAAKo5H,UAAY,GAAIxkI,wBAAqBoL,KAAKzV,OAAOyhD,QAC/ChsC,KAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK4nG,EAC7Bv3F,KAAMu3F,EAAkB9wE,eAAgBpyB,EAAK3M,OAAOoJ,QAIhEwtI,EAAgBh3I,UAAUuhH,KAAO,SAAU94G,GACvC,MAAOoV,MAAKla,IAAIlE,OAEpBu3I,EAAgBh3I,UAAU8/G,MAAQ,SAAU/yG,GACxC,GAAInB,GAAMmB,EAAK3M,OACXuf,EAA6C,WAAlC9B,KAAKzV,OAAOiE,aAAaC,IACxCuR,MAAKla,IAAM,GAAIwxG,kBAAerwG,UAC1BrF,MAAOkW,WAAWpV,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,UACpDG,UAAWlC,KAAKzV,OAAO2X,UACvBD,YAAaH,EAAW,GAAK5S,EAAK3M,OAAO8F,WACzC8Z,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,SACxDoX,eAAkD,WAAlChC,KAAKzV,OAAOiE,aAAaC,KAAoB,QAAU,SACvEu9C,OAAQhsC,KAAKzV,OAAOyhD,QACrBj+C,EAAIob,KAAKwB,SACZzb,EAAKtE,QAAQ7I,aAAa,OAAQ4L,EAAkBuB,EAAK3M,OAAOF,QAChE2d,KAAKla,IAAI20C,SAASvrC,EAAKtE,SACvBoV,KAAKla,IAAI8E,QAAQo2C,iBAAiB,UAAWhhC,KAAKkkG,kBAEtDi1B,EAAgBh3I,UAAU0rB,QAAU,WAC5B7N,KAAKla,MAAQka,KAAKla,IAAIoqB,cACtBlQ,KAAKla,IAAI8E,QAAQqjD,oBAAoB,UAAWjuC,KAAKkkG,iBACrDlkG,KAAKla,IAAI+nB,YAGVsrH,KC9CPE,GAAiC,WACjC,QAASA,GAAgB9uI,GACrByV,KAAKzV,OAASA,EA+BlB,MA7BA8uI,GAAgBl3I,UAAU69B,OAAS,SAAU9wB,GACzC,GAAInB,GAAMmB,EAAK3M,MAQf,OAPYyd,MAAKzV,OAAOkC,cAAc,SAClC3D,UAAW,gCAAiCwyB,OACxC33B,KAAM,OAAQ/B,MAAQY,oBAAkB0M,EAAKtN,OAAsB,GAAbsN,EAAKtN,MAAY0/B,eAAgBvzB,EAAIpC,IAC3FnB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAKmD,EAAkBI,EAAI1L,OAAQwY,KAAMlN,EAAkBI,EAAI1L,OACvFgH,MAAO,cAAgB0E,EAAIkc,cAKvCovH,EAAgBl3I,UAAUuhH,KAAO,SAAU94G,GACvC,MAAOA,GAAQhJ,OAEnBy3I,EAAgBl3I,UAAU8/G,MAAQ,SAAU/yG,GACxC,GAAInB,GAAMmB,EAAK3M,OACXuf,EAA6C,WAAlC9B,KAAKzV,OAAOiE,aAAaC,IACxCuR,MAAKla,IAAM,GAAIwzI,WAAQryI,UACnB2D,QAASsE,EAAKtE,QAASoX,eAAkD,WAAlChC,KAAKzV,OAAOiE,aAAaC,KAAoB,QAAU,SAC9FyT,UAAWlC,KAAKzV,OAAO2X,UAAWC,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,SAC1FqX,YAAaH,EAAW,GAAK5S,EAAK3M,OAAO8F,YAC1C0F,EAAIob,KAAKwB,SACZ3K,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3ByuI,EAAgBl3I,UAAU0rB,QAAU,WAC5B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGVwrH,KC9BPE,GAA4B,WAC5B,QAASA,GAAWhvI,EAAQyE,EAAgB+xC,GACxC/gC,KAAK9Q,QACL8Q,KAAKw5H,sBACLx5H,KAAKzV,OAASA,EACdyV,KAAK+gC,SAAWA,EAChB/gC,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBAkmBT,MAhmBAu4F,GAAWp3I,UAAUmyE,aAAe,SAAUtxE,GAC1C,GAAItB,GAASsB,EAAEtB,OACX4B,EAAO0c,KAAKzV,QACTJ,EAAazI,EAAQ,kBACxByI,EAAaA,EAAazI,EAAQ,iBAAkB,UAAU8I,KAAOlH,EAAKsH,QAAQJ,IAASlH,EAAKwb,YAC7F3U,EAAazI,EAAQ,sBAAyByI,EAAazI,EAAQ,sBACtEse,KAAK/B,SAAW9T,EAAazI,EAAQ,aAAe0sC,SAAS1sC,EAAOwH,cAAcwhC,aAAa,iBAAkB,KAAO,EACpHpnC,EAAKw4B,QACLx4B,EAAKowD,WAAWj8B,YAI5B8hH,EAAWp3I,UAAU86F,gBAAkB,SAAUj6F,GACzCmH,EAAanH,EAAEtB,OAAQ,cAAgBse,KAAKzV,OAAOiE,aAAairI,qBAChEz5H,KAAKzV,OAAOmpD,WAAWklC,UAAUzuF,EAAanH,EAAEtB,OAAQ,WAQhE63I,EAAWp3I,UAAUu3I,aAAe,SAAU12I,GAC1Cgd,KAAKzV,OAAOuxB,QAAS,CAKrB,QAHIvsB,eAAeyQ,KAAKzV,OAAO+iC,gBAC3BtqC,EAAEgY,KAAO,MAELhY,EAAEof,aACN,IAAK,QACKpC,KAAKzV,OAAO4xB,qBAA8D,aAAvCnc,KAAKzV,OAAOw+B,kBAAkBplC,OAC9Dqc,KAAKzV,OAAO+/B,oBACC,SAAdtnC,EAAQ,QACRgd,KAAKzV,OAAOggC,UAAU,GAG9BvqB,KAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,GAC9Cof,YAAa,OACbze,KAAMujC,KAEV,MACJ,KAAK,SACD,GAAI33B,eAAeyQ,KAAKzV,OAAO+iC,cAAe,CAC1C,GAAIllB,GAAI,MACRplB,GAAEolB,GAAKplB,EAAEolB,GAAG,GAEhBpI,KAAKzV,OAAOotB,QAAQuP,GAAuBjgC,SAAOjE,GAC9Cof,YAAa,SACbze,KAAMujC,MAELlnB,KAAKzV,OAAO4xB,qBACbnc,KAAKzV,OAAOggC,UAAUvqB,KAAK25H,gBAK3CJ,EAAWp3I,UAAUy2F,UAAY,SAAUp5E,GACvC,GAAIkJ,GAAQ1I,KACR1c,EAAO0c,KAAKzV,OACZqvI,EAAct2I,EAAK8V,0BACnBygI,IAEJ,IADA75H,KAAK/B,SAAW+B,KAAK25H,aAAevrG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAC3EpnC,EAAK+Q,sBAAwB/Q,EAAKovB,wBAAyB,CAC3D,GAAIroB,GAAW,yBAA2B2V,KAAK/B,SAAW,IAE1D,KADiB+B,KAAKzV,OAAOK,QAAQtE,cAAc+D,GAE/C,OAGR,GAAIkF,aAEA,IAAK,GADD+iB,GAAOtS,KAAKzV,OAAO2L,aACdzS,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAK,CAClC,GAAIsK,GAAMukB,EAAK7uB,EACXsK,GAAI7H,UACJy8C,sBAAoBr/C,EAAKsH,QAAQJ,GAAKuD,EAAIpC,IAAK,WAAYqU,KAAK/B,UAI5E,GAAI7J,GAAgB9Q,GAAO,CACvB,GAAIg7H,GAAOh7H,EAAKsnC,oBAAoBprB,EAAGkrB,aAAa,YACpD1qB,MAAKsX,aAAegnG,EAAKh8H,SAExB,IAAI0d,KAAKzV,OAAO8J,sBAAwB2L,KAAKzV,OAAOmoB,wBAAyB,CAC9E,GAAI1vB,IAAMV,KAAM0d,KAAKsX,aAAcxvB,MAAOkY,KAAK/B,SAC/C+B,MAAKzV,OAAOsoB,O/EySkB,mC+EzS0B7vB,GACxDgd,KAAKsX,aAAet0B,EAAEV,SAGtB0d,MAAKsX,aAAerwB,eAAe3D,EAAK+V,wBAAwB2G,KAAK/B,WAAW,EAEpF,KAASxa,EAAI,EAAGA,EAAIm2I,EAAYx2I,OAAQK,IACpCo2I,EAAiB31I,KAAKxB,GAAUk3I,EAAYn2I,GAAIuc,KAAKsX,cAEzDtX,MAAKrU,IAAM6T,EAAGkrB,aAAa,WAC3B,IAAIrtB,GAAS/Z,EAAKsnC,oBAAoB5qB,KAAKrU,KACvCuD,GACA4jC,WAAY8mG,EAAa3sF,gBAAiB4sF,EAAkBz3H,YAAa,YACzEL,QAAS/B,KAAKsX,aAAcrZ,SAAU+B,KAAK/B,SAAUta,KAAM,OAAQsjC,QAAQ,EAC3Ez1B,eAAgB6L,GAAUA,EAAO7L,eAAgB9P,WAAQqL,GAExDwC,gBAAcyQ,KAAKzV,OAAO+iC,gBAC3Bp+B,EAAK9J,IAAMoa,GAEflc,EAAKq0B,Q/E3CU,Y+E2CgBzoB,EAAM,SAAU4qI,GAC3CA,EAAcn2I,KAAO,cACrBL,EAAKq0B,QAAQkqB,GAAoBi4F,EAAe,SAAUC,GACtD,IAAKA,EAAS9yG,OAAQ,CAIlB3jC,EAAKw4B,QAAS,EACdi+G,EAAS30I,IAAM20I,EAAS30I,IAAM20I,EAAS30I,IAAMoa,EACzCjQ,cAAcjM,EAAK2L,mBACnByZ,EAAMsxH,YAAcD,EAAS30I,IAC7BsjB,EAAMuxH,SAAWF,EAAS30I,IAAI8O,WAAU,GACxC6lI,EAAiB,SAAIrxH,EAAMuxH,UAEA,WAA3B32I,EAAKkL,aAAaC,MAClBnL,EAAKqf,iBAEsB,WAA3Brf,EAAKkL,aAAaC,MAAqBnL,EAAKo7B,kBAC5Cp7B,EAAKo7B,gBAAgBwgC,cAAe,EACpC66E,EAAS30I,IAAIqF,UAAUqE,IAAI,iBAE/B4Z,EAAMq4B,SAAS1pB,OAAO0iH,GAClBxqI,eACAwqI,EAAS92C,KAAO,KAChBv6E,EAAMwxH,YAAcH,EAAoB,YACxCrxH,EAAMyxH,OAASJ,EAAe,OAC9BrxH,EAAMuxH,SAAWF,EAAiB,SAClCrxH,EAAMsxH,YAAcD,EAAS30I,KAEjCsjB,EAAM/c,IAAM6T,EAAGkrB,aAAa,YAC5BpnC,EAAKowD,WAAW0mF,sBAChBL,EAASp2I,KAAO,iBAChBL,EAAKq0B,QAAQuP,GAAuB6yG,GACpCrxH,EAAMxZ,KAAO6qI,EACTrxH,EAAMne,OAAOu8B,eACbpe,EAAMne,OAAOsoB,OAAOkU,IAAuBC,KAAM,aAEjDz3B,eACAmZ,EAAMne,OAAOsoB,OAAOwyB,OACpB/hD,EAAKsH,QAAQtE,cAAc,gBAAgB+C,MAAMC,QAAU,OAC3Dof,EAAMne,OAAOsoB,OAAO,wBAMxC0mH,EAAWp3I,UAAUg2D,UAAY,SAAUrwD,EAAOxF,GAC9C,GAAIomB,GAAQ1I,KACR1c,EAAO0c,KAAKzV,MAChByV,MAAK25H,aAAe7xI,CACpB,IAAIoH,IACAkT,YAAa,OAAQvT,OAAQ,OAAQlL,KAAMk+C,GAAoBv/C,KAAMA,EAAM2kC,QAAQ,EACnF3P,aAAch0B,EAAK+V,wBAAwBvR,GAC3C1C,IAAK9B,EAAK6tC,cAAcrpC,GAE5BxE,GAAKg/C,cACLh/C,EAAKuvB,OAAOhC,GAAmB3hB,GAC3BA,EAAK+mB,QACL/mB,EAAK+mB,QAAQS,KAAK,WAAc,MAAOpzB,GAAKo4B,YAAc/E,MAAM,SAAU3zB,GAAK,MAAO0lB,GAAM2xH,OAAOr3I,KAGnGM,EAAKo4B,WAGb69G,EAAWp3I,UAAU87F,iBAAmB,WACpC,GAAI36F,GAAO0c,KAAKzV,OACZ+vI,EAAQh3I,EAAKowD,WAAW4N,QAAQC,WAChCg5E,GAAQj3I,EAAKowD,WAAW8mF,UAAWl3I,EAAKowD,WAAW8mF,SAASj5E,WAC5Dk5E,GAAQn3I,EAAKowD,WAAWgnF,WAAYp3I,EAAKowD,WAAWgnF,UAAUn5E,UAClE,OAAQ+4E,IAASC,GAASE,GAE9BlB,EAAWp3I,UAAUs1B,QAAU,WAC3B,GAAIn0B,GAAO0c,KAAKzV,MAChB,IAAKyV,KAAKzV,OAAOuxB,QAAW9b,KAAKi+E,mBAAjC,CAGA,GAAIyhC,GAAaz4H,eAAe+Y,KAAKsX,cAAc,GAC/CpoB,EAAOjI,SAAO+Y,KAAK9Q,MACnBkT,YAAa,OAAQze,KAAMk+C,GAAoBv/C,KAAMo9H,EAAYz4F,QAAQ,EACzE3P,aAActX,KAAKsX,aAAc4qC,YAAa5+D,EAAKkzD,iBAAkBhlD,oBAErE1J,EAAiC,UAAzBxE,EAAK+Y,gBAA8B,EAAI,EAC/Cs+H,EAAmC,WAA3Br3I,EAAKkL,aAAaC,KAC1BmsI,EAAarsI,SAAO,IAAMjL,EAAKsH,QAAQJ,GAAK,sBAAuBrE,UACnE00I,EAAUF,EAAQC,EAAWt0I,cAAc,eAAiBhD,EAAKsH,QAAQxE,iBAAiB,eAAe0B,GACzGxF,GAAS8zD,eAAiBlJ,OAAO,EAWrC,IAVAltC,KAAKzV,OAAOsoB,OAAO+/G,GAAuBtwI,IACrC0d,KAAKzV,OAAO8J,uBAAwB2L,KAAKzV,OAAOmoB,yBACZ,WAAlC1S,KAAKzV,OAAOiE,aAAaC,MAAsBosI,EAMlDnb,EAAap8H,EAAKowD,WAAWg9E,qBAAqBmK,EAASnb,GALvD1/G,KAAKzV,OAAOuxB,SACZ9b,KAAKw5H,mBAAqB9Z,EAAaxwH,EAAK5M,KAAOA,EAAK8zD,aAM5D9yD,EAAKuS,gBAA6C,WAA3BvS,EAAKkL,aAAaC,KAAmB,CAC5D,GAAIqsI,GAAUx3I,EAAKyiB,0BAA0Bzf,cAAc,eACvDy0I,EAAUz3I,EAAK8iC,2BAA2B9/B,cAAc,eACxD00I,GAAWF,GAAWC,GACtBE,MAAW,GACXC,MAAW,GACX7F,IACyB,gBAAzB/xI,EAAK+Y,kBACL4+H,EAAW33I,EAAKitD,uBAAuBjqD,cAAc,eACrD40I,EAAW53I,EAAKo+D,wBAAwBp7D,cAAc,eACtD+uI,GAAS4F,GAAYC,IAEzB/9H,GAAkB6C,KAAKzV,OAAQ,SAAUkS,EAAW5R,GAChD,IAAK,GAAIgF,GAAK,EAAGssC,EAAatxC,EAAUgF,EAAKssC,EAAW/4C,OAAQyM,IAAM,CAClE,GAAIiE,GAAMqoC,EAAWtsC,EACjBiE,KACA4rH,EAAap8H,EAAKowD,WAAWg9E,qBAAqB58H,EAAK4rH,UAG3Dsb,EAAS3F,IAErB,GAAI9lI,aAAY,CAGZL,EAAS,KAAI,KACbA,EAAgB,YAAI,KACpBA,EAAK9J,OAET,GAAI+1I,MAAe9vI,MAAMC,KAAKhI,EAAKsH,QAAQxE,iBAAiB,iBAAiBhD,MAI7E,IAHKd,EAAK4qD,QAAS1lD,OAAOC,KAAKuY,KAAKw5H,oBAAoBp2I,QAAW+3I,IAC/DA,EAAY,GAEZR,EAAQC,EAAWx0I,iBAAiB,gBAAgBhD,OAAS+3I,EAC7DjsI,EAAKL,OAAS,OACdvL,EAAKq0B,QAAQkqB,GAAoB3yC,EAAM,SAAUksI,GACzCA,EAAYn0G,SAGhB3jC,EAAKg/C,cACLh/C,EAAKuvB,OAAOhC,GAAmBuqH,UAUnC,IANAlsI,EAAKL,OAAS,MACdK,EAAKgzD,YAAc,EACnBhzD,EAAKpH,MAAQkY,KAAKq7H,cAClB/3I,EAAKuvB,O/E0IqB,kC+EzI1BvvB,EAAKuvB,OAAOozB,GAAqB/2C,GACjC8Q,KAAKq7H,cAAgB,KACjBnsI,EAAK+3B,OACL,SAIZsyG,EAAWp3I,UAAUm5I,gBAAkB,WACnC,GAAIh4I,GAAO0c,KAAKzV,MAChBjH,GAAKowD,WAAW6nF,iBAChBj4I,EAAKowD,WAAW8nF,cAChBx7H,KAAKzV,OAAOsoB,OAAO+jH,QAEvB2C,EAAWp3I,UAAUs5I,YAAc,SAAUvsI,GACzC,GAAIwZ,GAAQ1I,IACR9Q,GAAK+mB,QACL/mB,EAAK+mB,QAAQS,KAAK,SAAU1zB,GAAK,MAAO0lB,GAAMgzH,OAAO14I,EAAGkM,KAAUynB,MAAM,SAAU3zB,GAAK,MAAO0lB,GAAM2xH,OAAOr3I,KAG3Ggd,KAAKi/D,YAAY/vE,EAAK5M,KAAM4M,IAGpCqqI,EAAWp3I,UAAUu5I,OAAS,SAAU14I,EAAGkM,GACvC8Q,KAAKi/D,YAAYj8E,EAAGkM,IAExBqqI,EAAWp3I,UAAUk4I,OAAS,SAAUr3I,GACpC,GAAIuM,cAAcyQ,KAAKzV,OAAO0E,iBAAkB,CAGvCzM,oBAAkBQ,EAAO,QAAOR,oBAAkBQ,EAAO,MAAS,WACnEA,EAAO,MAAIA,EAAO,MAAS,SAGnCgd,KAAK27H,YAAY34I,IAErBu2I,EAAWp3I,UAAU6wI,sBAAwB,SAAU1wI,GAC9C0d,KAAKzV,OAAO8J,sBAAyB2L,KAAKzV,OAAOmoB,0BAClD1S,KAAKzV,OAAO8O,wBAAwB2G,KAAK25H,cAAgBr3I,IAGjEi3I,EAAWp3I,UAAUy5I,eAAiB,SAAU1sI,GACxC8Q,KAAKzV,OAAOmpD,WAAW4N,UAAYthD,KAAKzV,OAAOmpD,WAAW4N,QAAQpxC,cAClElQ,KAAKs7H,kBACLt7H,KAAK67H,iBACiC,WAAlC77H,KAAKzV,OAAOiE,aAAaC,MAAqC,QAAhBS,EAAKL,QACnDmR,KAAKzV,OAAOm0B,iBACZ1e,KAAKzV,OAAOK,QAAQtE,cAAc,iBAAiBmE,UAAU5I,OAAO,kBAIhF03I,EAAWp3I,UAAU88E,YAAc,SAAUj8E,EAAGkM,GAC5C,KAAK1M,oBAAkBQ,IAAQA,YAAaoJ,QAAQ,CAEhD8C,EAAK5M,KAAO2E,YAAWA,YAAWiI,EAAY,QAAGA,EAAK5M,MAAOU,GAEjE,GAAIy8E,EAKJ,IAJAz/D,KAAK47H,eAAe1sI,GACpB8Q,KAAKzV,OAAOotB,Q/EjOS,kB+EiOuBzoB,GAC5CA,EAAKvL,KAAOujC,GACZlnB,KAAKzV,OAAOuxB,QAAS,EACjBvsB,cAAcyQ,KAAKzV,OAAO0E,iBAAkB,CAC5C+Q,KAAK87H,WACL,IAAI79H,GAAW,UAGfwhE,IAAar9D,YAAalT,EAAKkT,YAC3BnE,SAAU/O,EAAK+O,GAAWpP,OAAQK,EAAW,OAAG5M,KAAM4M,EAAS,MACnE8Q,KAAKzV,OAAOsoB,OAAO,cAAe4sD,OAGlCz/D,MAAKyb,WAAWvsB,EAAK5M,KAEzB0d,MAAKzV,OAAOsoB,O/EiEkB,8B+EjEsB3jB,GACpD8Q,KAAKzV,OAAOmpD,WAAWyhF,aAAajmI,EAAK9J,KACzC4a,KAAKzV,OAAOmpD,WAAW8Y,WAAY,EACnCxsD,KAAKgzH,sBAAsB9jI,EAAK5M,MAChC0d,KAAK09E,iBACCnuF,cAAcyQ,KAAKzV,OAAO0E,mBAC5B+Q,KAAK25H,aAAe,KACpB35H,KAAKzV,OAAOotB,QAAQuP,GAAuBh4B,IAE3CK,cACAyQ,KAAKzV,OAAOsoB,OAAOwyB,SAEjBrlC,KAAKzV,OAAO4xB,qBAA8D,aAAvCnc,KAAKzV,OAAOw+B,kBAAkBplC,OAC9Dqc,KAAKzV,OAAO+/B,qBAAwBtqB,KAAKzV,OAAOw+B,kBAAkBu8B,eACjC,WAAlCtlD,KAAKzV,OAAOiE,aAAaC,OACrBc,cAAcyQ,KAAKzV,OAAO0E,iBAE1BwwE,EADIxhE,EAAW,gBACM+B,KAAK/B,UAAY,EAAI+B,KAAK/B,SAAW+B,KAAK25H,aAG/D35H,KAAKzV,OAAOggC,UAAUvqB,KAAK/B,UAAY,EAAI+B,KAAK/B,SAAW+B,KAAK25H,eAI5E35H,KAAKzV,OAAO48B,eAEhBoyG,EAAWp3I,UAAU25I,UAAY,YACxB97H,KAAKi6H,UAAYj6H,KAAKzV,OAAOuxB,QAC9B9b,KAAK67H,iBAEL77H,KAAKi6H,WACLj6H,KAAKi6H,SAASp4I,SACdme,KAAKi6H,SAAW,KAChBj6H,KAAKg6H,YAAYvvI,UAAU5I,OAAO,gBAElCme,KAAKzV,OAAOsL,gBAAkBmK,KAAKk6H,cACnCl6H,KAAKk6H,YAAYr4I,SACjBme,KAAKm6H,OAAO1vI,UAAU5I,OAAO,iBAGrC03I,EAAWp3I,UAAUu7F,eAAiB,WAClC,GAAIprE,GAAOtS,KAAKzV,OAAO2L,YACnB8J,MAAKzV,OAAOiE,aAAatI,UAA8C,WAAlC8Z,KAAKzV,OAAOiE,aAAaC,MAC9Dg/B,uBAAqBztB,KAAKzV,OAAOK,QAAQJ,GAAK,uBAAwB,WAAYwV,KAAKzV,OAAOiE,aAElG,KAAK,GAAI/K,GAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAK,CAClC,GAAIsK,GAAMukB,EAAK7uB,EACXsK,GAAI7H,UACJunC,uBAAqBztB,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAK,WAAYoC,GAAK,GAExEA,EAAIyc,cACJijB,uBAAqBztB,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAM,eAAgB,eAAgBoC,KAIpGwrI,EAAWp3I,UAAUw5I,YAAc,SAAU34I,GACzCgd,KAAKzV,OAAOotB,Q/ExXO,gB+EwXyBpoB,cAAcvM,YAAaoJ,OAASpJ,EAAE,IAAOkd,MAAOld,IAChGgd,KAAKzV,OAAO48B,cACZnnB,KAAKzV,OAAOyoB,IAAI,iBAAmB9S,MAAOld,KAE9Cu2I,EAAWp3I,UAAU45I,YAAc,WAC/B,GAAIrgH,IAAU,EACVsgH,EAAYh8H,KAAKzV,OAAOK,QAAQtE,cAAc,cAKlD,QAJK0Z,KAAKzV,OAAO8J,uBAAwB2L,KAAKzV,OAAOsjC,uBAAuBC,aACnC,WAAlC9tB,KAAKzV,OAAOiE,aAAaC,MAAsButI,IAClDtgH,GAAU,GAEPA,GAEX69G,EAAWp3I,UAAUs5B,WAAa,SAAUn5B,GACxC,GAAIyR,GAAUiM,KAAKzV,OAAOsL,eACtBzQ,EAAM,GAAIyd,IAAY7C,KAAKhR,eAAgB,KAAMgR,KAAKzV,QACtD8S,EAAS2C,KAAKzV,OAAOqgC,oBAAoB5qB,KAAKrU,IAClD,IAAI0R,EAAQ,CACRA,EAAO7B,QAAUlZ,EACjB0d,KAAKzV,OAAOsoB,O/EJS,wB+EI0BvwB,GAC/C+O,GAAmBgM,EAAQ2C,KAAKzV,OAAOgN,uBAAwB8F,EAAO7B,SAClEwE,KAAK+7H,eACL32I,EAAIs2B,QAAQre,EAAQ2C,KAAKzV,OAAO2L,cAAc,EAElD,IAAIsJ,MAAQnU,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQxE,iBAAiB,mBAAqBiX,EAAOvV,MAAQ,MAChG,IAAIiM,GAAWyL,EAAGpc,OACd,IAAK,GAAIK,GAAI,EAAGA,EAAI+b,EAAGpc,OAAQK,IAAK,CAChC,GAAIygF,GAAS1kE,EAAG/b,GAAGinC,aAAa,WAC5Bw5C,KAAWlkE,KAAKrU,OAChB0R,EAAS2C,KAAKzV,OAAOqgC,oBAAoBs5C,IAClC1oE,QAAUlZ,EACjB8C,EAAIs2B,QAAQre,EAAQ2C,KAAKzV,OAAO2L,cAAc,GAC9C8J,KAAKzV,OAAOmpD,WAAWyhF,aAAa31H,EAAG/b,QAM3D81I,EAAWp3I,UAAU02F,UAAY,WAC7B,GAAInwE,GAAQ1I,IACZ,IAAKA,KAAKzV,OAAOuxB,OAAjB,CAGA,GAAIx4B,GAAO0c,KAAKzV,OACZ2E,EAAOjI,SAAO+Y,KAAK9Q,MACnBkT,YAAa,SAAUze,KAAMk+C,GAAoB5a,QAAQ,EAAO3kC,KAAM0d,KAAKsX,aAAc4qC,YAAa5+D,EAAKkzD,kBAI/G,IAFAlzD,EAAKuvB,O/EpCwB,6B+EoCe3jB,GAC5C8Q,KAAK09E,iBACDnuF,aAAY,CAEZL,EAAS,KAAI,KAEjB5L,EAAKq0B,QAAQkqB,GAAoB3yC,EAAM,SAAU+sI,GAC7C,IAAIA,EAAch1G,OAAlB,CAGuC,WAAnCve,EAAMne,OAAOiE,aAAaC,MAC1Bia,EAAMne,OAAOsoB,OAAO+jH,OAExBtzI,EAAKw4B,QAAS,EACdpT,EAAMmzH,iBACNI,EAAct4I,KAAOujC,GACU,WAA3B5jC,EAAKkL,aAAaC,OACdc,cAAcjM,EAAK2L,iBACnByZ,EAAMozH,YAGNpzH,EAAM+S,WAAWwgH,EAAc35I,MAGvC,IAAI45I,GAAa54I,EAAKoB,cAAcouB,mBAAqBxvB,EAAKoB,cAAcvB,QAAQC,SAC5EE,EAAKwsD,kBAAkBxpD,cAAc,gBACxChD,GAAKwsD,kBAAkBxpD,cAAc,kBACrChD,EAAKwsD,kBAAkBxpD,cAAc,aAAgB41I,GACtD54I,EAAK8X,aAAaC,WAES,WAA3B/X,EAAKkL,aAAaC,MAClBnL,EAAKinC,UAAU7hB,EAAMzK,UAEzB3a,EAAKq0B,QAAQuP,GAAuB+0G,GAChC1sI,eACAmZ,EAAMne,OAAOsoB,OAAOwyB,OACpB38B,EAAMne,OAAOsoB,OAAO,uBAIhC0mH,EAAWp3I,UAAU22F,UAAY,SAAUx2F,EAAMwF,GAC7C,GAAI4gB,GAAQ1I,KACR1c,EAAO0c,KAAKzV,MAEhB,IADAyV,KAAKq7H,cAAgBvzI,EAAStF,oBAAkBsF,GAAiB,EAARA,EACrDxF,EAIA,WAHAgB,GAAKuvB,OAAOozB,IACR7jC,YAAa,OAAQze,KAAMk+C,GAAoBv/C,KAAMA,EAAM4/D,YAAa,EAAGrzD,OAAQ,MAAO/G,MAAOA,GAIzG,KAAIxE,EAAKw4B,OAAT,CAGA9b,KAAKsX,gBACLtX,KAAKrU,IAAM,EAEX,KAAK,GADD2mB,GAAQhvB,EAAiB,YACpBG,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IACzB6uB,EAAK7uB,GAAGpB,OACRI,WAAS6O,SAASghB,EAAK7uB,GAAGpB,MAAOiwB,EAAK7uB,GAAGw8G,aAAcjgG,KAAKsX,aAGpE,IAAIpoB,IACA+3B,QAAQ,EAAOz1B,kBACf4Q,YAAa,MAAO9f,KAAM0d,KAAKsX,aAAc3zB,KAAMk+C,GAAoB/5C,MAAOA,EAC9Eia,QAAS/B,KAAKsX,aAAc51B,WAAQqL,IAEpCgV,GAAYq0C,eAMhB,IALAp2C,KAAKzV,OAAOsoB,OAAO+/G,GAAuB7wH,IACrC/B,KAAKzV,OAAO8J,sBAAwB2L,KAAKzV,OAAOsjC,uBAAuBC,cACrEtmC,OAAOC,KAAKsa,EAAQq0C,aAAahzD,SACpC8L,EAAK5M,KAAO4M,EAAK6S,QAAUA,EAAQq0C,aAEnC7mD,aAAY,CAEZL,EAAS,KAAI,KAEjB5L,EAAKq0B,QAAQkqB,GAAoB3yC,EAAM,SAAUitI,GACzCA,EAAQl1G,SAGZ3jC,EAAKw4B,QAAS,EACiB,WAA3Bx4B,EAAKkL,aAAaC,MAClBnL,EAAKqf,iBAET+F,EAAMq4B,SAASi0F,OAAOmH,GACtB74I,EAAKowD,WAAW0mF,sBAChB+B,EAAQx4I,KAAOujC,GACfi1G,EAAQ/2I,IAAM9B,EAAKsH,QAAQtE,cAAc,eACzChD,EAAKq0B,QAAQuP,GAAuBi1G,GAChC5sI,eACAmZ,EAAMne,OAAOsoB,OAAOwyB,OACpB38B,EAAMne,OAAOsoB,OAAO,iBAExBnK,EAAMxZ,KAAOitI,OAGrB5C,EAAWp3I,UAAUu2F,aAAe,SAAUC,EAAWr2F,GAErD,GADA0d,KAAK25H,aAAe35H,KAAKzV,OAAOisD,iBAC5Bl0D,EAAM,CACNA,EAAQA,YAAgB8J,OAAS9J,GAAQA,EACzC,IAAIgB,GAAO0c,KAAKzV,OAEZ6xI,EAAU50I,OAAOC,KAAKnF,GAAMc,MAChCu1F,GAAYA,GAAa34E,KAAKzV,OAAO6O,0BAA0B,EAU/D,KAAK,GAAI3V,GAAI,EAAGA,EAAI24I,EAAS34I,KATf,SAAUA,GACpB,GAAIsS,GACAsmI,EACAC,EAAYh5I,EAAK8lC,gBAAgBz2B,KAAK,SAAUyxC,GAEhD,MADAi4F,GAAYj4F,EACL9hD,EAAKmB,KAAOf,GAAUi2F,EAAWv0C,IAAW9hD,EAAKmB,KAAO2gD,GAEnE9hD,GAAKmB,GAAK64I,EAAYD,EAAY/5I,EAAKmB,GAAGk1F,GAAar2F,EAAKmB,IAAMsS,KAASA,EAAG4iF,GAAar2F,EAAKmB,GAAIsS,IAG5FtS,GAGhB,GAAIyL,IACAkT,YAAa,SAAUze,KAAMk+C,GAAoBrwC,kBACjDlP,KAAMA,GAAc0d,KAAKzV,OAAOw3C,qBAAsBviC,GAAIQ,KAAKzV,OAAOmsF,kBAAmBzvD,QAAQ,EAMrG,IAJKzkC,oBAAkBwd,KAAKzV,OAAOu3C,mBAC/B5yC,EAAK5M,KAAK,GACN0d,KAAKzV,OAAOqgC,oBAAoB5qB,KAAKzV,OAAO4mC,cAAcnxB,KAAKzV,OAAOu3C,iBAAiBpX,aAAa,aAAapoC,MAErH0d,KAAKzV,OAAO8J,sBAAwBnF,EAAK5M,KAAKc,OAAS,EAAG,CAC1D,GAAIuI,GAAMqU,KAAKzV,OAAOmsF,kBAAkB,GAAGhsD,aAAa,WACxDx7B,GAAK5M,MAAQ0d,KAAKzV,OAAOqgC,oBAAoBj/B,GAAKrJ,MAGlDiN,eAAeyQ,KAAKzV,OAAO+iC,gBAC3Bp+B,EAAiB,KAAIA,EAAiB,KAAE,IAE5C8Q,KAAKzV,OAAOsoB,OAAOozB,GAAqB/2C,IAE5CqqI,EAAWp3I,UAAU05I,eAAiB,WAIlC,IAAK,GAHDv4I,GAAO0c,KAAKzV,OACZgyI,KAAiBlxI,MAAMC,KAAKhI,EAAKsH,QAAQxE,iBAAiB,gBAC1Do2I,KAAkBnxI,MAAMC,KAAKhI,EAAKsH,QAAQxE,iBAAiB,iBACtD3C,EAAI,EAAGA,EAAI84I,EAAYn5I,OAAQK,IACpC5B,SAAO06I,EAAY94I,GAEvB,KAASA,EAAI,EAAGA,EAAI+4I,EAAap5I,OAAQK,IACrC+4I,EAAa/4I,GAAGgH,UAAU5I,OAAO,gBAMzC03I,EAAWp3I,UAAU6+C,iBAAmB,WAChChhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,G/EnUI,c+EmUkBpQ,KAAKy7H,YAAaz7H,MACpDA,KAAKzV,OAAO6lB,G/E9TG,a+E8TkBpQ,KAAKi9E,gBAAiBj9E,MACvDA,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKs0D,aAAct0D,MAChDA,KAAKzV,OAAO6lB,G/EhQK,c+EgQkBpQ,KAAK47H,eAAgB57H,MACxDA,KAAKzV,OAAO6lB,G/ErWE,W+EqWkBpQ,KAAKi9E,gBAAiBj9E,MACtDA,KAAKzV,OAAO6lB,G/E9UQ,kB+E8UkBpQ,KAAK05H,aAAc15H,MACzDA,KAAKzV,OAAO6lB,G/EnVM,gB+EmVkBpQ,KAAK05H,aAAc15H,MACvDA,KAAKzV,OAAO6lB,G/ExFO,kB+EwFkBpQ,KAAK64E,UAAW74E,MACrDA,KAAKzV,OAAO6lB,GAAG,cAAepQ,KAAK87H,UAAW97H,QAKlDu5H,EAAWp3I,UAAU8rD,oBAAsB,WACnCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,I/EpVI,c+EoVmB7X,KAAKy7H,aACxCz7H,KAAKzV,OAAOstB,I/E/UG,a+E+UmB7X,KAAKi9E,iBACvCj9E,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKs0D,cACnCt0D,KAAKzV,OAAOstB,I/EjRK,c+EiRmB7X,KAAK47H,gBACzC57H,KAAKzV,OAAOstB,I/EtXE,W+EsXmB7X,KAAKi9E,iBACtCj9E,KAAKzV,OAAOstB,I/E/VQ,kB+E+VmB7X,KAAK05H,cAC5C15H,KAAKzV,OAAOstB,I/EpWM,gB+EoWmB7X,KAAK05H,cAC1C15H,KAAKzV,OAAOstB,I/EzGO,kB+EyGmB7X,KAAK64E,WAC3C74E,KAAKzV,OAAOstB,IAAI,cAAe7X,KAAK87H,aAKxCvC,EAAWp3I,UAAU0rB,QAAU,WAC3B7N,KAAKiuC,sBACLjuC,KAAK+gC,SAASlzB,WAEX0rH,KCnnBP/5G,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAQnF28G,GAA4B,SAAUz6G,GAEtC,QAASy6G,GAAWlyI,EAAQyE,EAAgB+xC,GACxC,GAAIr4B,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQyE,IAAmBgR,IAIzD,OAHA0I,GAAMne,OAASA,EACfme,EAAM1Z,eAAiBA,EACvB0Z,EAAMq4B,SAAWA,EACVr4B,EAoBX,MA1BA8W,IAAUi9G,EAAYz6G,GAQtBy6G,EAAWt6I,UAAU02F,UAAY,WAC7B72D,EAAO7/B,UAAU02F,UAAUvtF,KAAK0U,OAEpCy8H,EAAWt6I,UAAU22F,UAAY,SAAUx2F,EAAMwF,GAC7Ck6B,EAAO7/B,UAAU22F,UAAUxtF,KAAK0U,KAAM1d,EAAMwF,IAEhD20I,EAAWt6I,UAAUs1B,QAAU,WAC3BuK,EAAO7/B,UAAUs1B,QAAQnsB,KAAK0U,OAElCy8H,EAAWt6I,UAAUg2D,UAAY,SAAUrwD,EAAOxF,GAC9C0/B,EAAO7/B,UAAUg2D,UAAU7sD,KAAK0U,KAAMlY,EAAOxF,IAEjDm6I,EAAWt6I,UAAUu2F,aAAe,SAAUC,EAAWr2F,GACrD0/B,EAAO7/B,UAAUu2F,aAAaptF,KAAK0U,KAAM24E,EAAWr2F,IAExDm6I,EAAWt6I,UAAUy2F,UAAY,SAAUp5E,GACvCwiB,EAAO7/B,UAAUy2F,UAAUttF,KAAK0U,KAAMR,IAEnCi9H,GACTlD,IC3BEmD,GAA2B,WAC3B,QAASA,GAAUnyI,EAAQyE,EAAgB+xC,GACvC/gC,KAAK28H,eACL38H,KAAK48H,gBACL58H,KAAK68H,aACL78H,KAAK88H,UAAW,EAChB98H,KAAK+8H,iBAAkB,EACvB/8H,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAK+gC,SAAWA,EAChB/gC,KAAK+zC,MAAQ/kD,EAAeI,WAAW,SACvC4Q,KAAKghC,mBA+qCT,MA1qCA07F,GAAUv6I,UAAU6+C,iBAAmB,WAC/BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKs0D,aAAct0D,MAChDA,KAAKzV,OAAO6lB,GjFwME,WiFxMkBpQ,KAAKi9E,gBAAiBj9E,MACtDA,KAAKzV,OAAO6lB,GAAGyX,GAA0B7nB,KAAKg9H,oBAAqBh9H,MACnEA,KAAKzV,OAAO6lB,GjFsKK,ciFtKkBpQ,KAAKwxD,cAAexxD,MACvDA,KAAKy9E,kBAAoBz9E,KAAKuM,UAAU8G,KAAKrT,MAC7CA,KAAKi9H,oBAAsBj9H,KAAKk9H,YAAY7pH,KAAKrT,MACjDA,KAAKzV,OAAOy2C,iBAAiBna,GAAkB7mB,KAAKy9E,mBACpDz9E,KAAKzV,OAAOy2C,iBjFuBK,ciFvBgChhC,KAAKi9H,qBACtDj9H,KAAKzV,OAAO6lB,GjFqOG,aiFrOkBpQ,KAAKi9E,gBAAiBj9E,MACvDA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKgyD,eAAgBhyD,MACvDA,KAAKzV,OAAO6lB,GjFuSS,kBiFvSkBpQ,KAAKm9H,gBAAiBn9H,MAC7DA,KAAKzV,OAAO6lB,GAAG,aAAcpQ,KAAK87H,UAAW97H,QAKjD08H,EAAUv6I,UAAU8rD,oBAAsB,WAClCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKs0D,cACnCt0D,KAAKzV,OAAOstB,IjFoLE,WiFpLmB7X,KAAKi9E,iBACtCj9E,KAAKzV,OAAOstB,IAAIgQ,GAA0B7nB,KAAKg9H,qBAC/Ch9H,KAAKzV,OAAOstB,IjFkJK,ciFlJmB7X,KAAKwxD,eACzCxxD,KAAKzV,OAAO0jD,oBAAoBpnB,GAAkB7mB,KAAKy9E,mBACvDz9E,KAAKzV,OAAO0jD,oBjFKK,ciFLmCjuC,KAAKi9H,qBACzDj9H,KAAKzV,OAAOstB,IjFmNG,aiFnNmB7X,KAAKi9E,iBACvCj9E,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKgyD,gBACxChyD,KAAKzV,OAAOstB,IjFqRS,kBiFrRmB7X,KAAKm9H,iBAC7Cn9H,KAAKzV,OAAOstB,IAAI,aAAc7X,KAAK87H,aAEvCY,EAAUv6I,UAAU+6I,YAAc,SAAUhuI,GACxC8Q,KAAKzV,OAAOszD,YAAYrE,gBAE5BkjF,EAAUv6I,UAAUoqB,UAAY,WAC5BvM,KAAKzV,OAAOsoB,OAAOwyB,QAKvBq3F,EAAUv6I,UAAU0rB,QAAU,WAC1B7N,KAAKiuC,uBAETyuF,EAAUv6I,UAAUmyE,aAAe,SAAUtxE,GACpCmH,EAAanH,EAAEtB,OAAQse,KAAKzV,OAAOK,QAAQJ,GAAK,QAAQ,KACrDwV,KAAKzV,OAAOuxB,QAAUzjB,UAAQ2H,KAAKijF,KAAM,QAAU5qF,UAAQrV,EAAEtB,OAAQ,QACrEse,KAAKi5E,WACLj5E,KAAKm9H,mBAELhzI,EAAanH,EAAEtB,OAAQ,eAAiBse,KAAKzV,OAAOuxB,QACpD9b,KAAKo9H,WAAWp6I,EAAEtB,UAI9Bg7I,EAAUv6I,UAAU86F,gBAAkB,SAAUj6F,GAC5C,GAAItB,GAASyI,EAAanH,EAAEtB,OAAQ,aAChC8d,EAAKrV,EAAanH,EAAEtB,OAAQ,QAC5BA,IAAU8d,IAAO47B,MAAMhN,SAAS1sC,EAAOgpC,aAAa,iBAAkB,OAClEhpC,EAAOwH,cAAcuB,UAAUC,SAAS,gBAC5CsV,KAAKg5E,SAAS5qD,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAAK1qB,KAAKzV,OAAO2L,aAAak4B,SAAS1sC,EAAOgpC,aAAa,iBAAkB,KAAKroC,MAAO2d,KAAKq9H,SAASjvG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,OAGnNgyG,EAAUv6I,UAAU66I,oBAAsB,SAAUh6I,GAC5Cgd,KAAKzV,OAAOuxB,QAAU9b,KAAKs9H,oBAC1Bt6I,EAAE4xD,UAAa,MAAO,WAAY,QAAS,cAAcltD,QAAQ1E,EAAEglC,QAAQn5B,SAAW,KACvF7L,EAAEikC,QAAS,EACPjkC,EAAE4xD,QACF5xD,EAAE6xD,UAAUiB,iBAGZ9yD,EAAEglC,QAAQ8tB,mBAItB4mF,EAAUv6I,UAAUqvE,cAAgB,SAAUxuE,GAC1C,GAAI+Q,GAAUiM,KAAKzV,OAAOmS,qBACtB6gI,EAAev9H,KAAKzV,OAAOsS,6BAC3B4J,EAAQzG,KAAKzV,OAAOmO,aAAapS,cAAc,qBAC/CigC,EAAOvmB,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBACpDqpD,IAAU3sD,EAAE6jB,UAAUtF,WAAcve,EAAE6jB,UAAUuY,YAAiBpf,KAAKzV,OAAOuU,YAAc9b,EAAE6jB,UAAU2lB,SAC3G,KAAKxpC,EAAE+kC,OAAS4nB,EAIZ,YAHI3vC,KAAKzV,OAAOuxB,QAAU6zB,GACtB3vC,KAAKi5E,WAIb,IAAIljF,GAAK/S,EAAE6jB,UAAU+c,QAAS3lB,EAAWlI,EAAG,GAAIgmC,EAAYhmC,EAAG,EAI/D,IAHIhC,IAAY0S,EAAM/b,SAAS1H,EAAE4H,UAAaoV,KAAKzV,OAAOuU,YAAcynB,EAAK77B,SAAS1H,EAAE4H,YACpFmxC,GAAahoC,GAEbwpI,EAAc,CACd,GAAIjtF,GAAQtwC,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,2BAC5C0Z,KAAKzV,OAAOmO,aAAapS,cAAc,2BACzCoE,SAAS1H,EAAE4H,UAAaoV,KAAKzV,OAAOuU,YAAcwxC,EAAM5lD,SAAS1H,EAAE4H,YAC1EmxC,GAAchoC,EAAUiM,KAAKzV,OAAOqS,0BAGxCoD,KAAKzV,OAAOuU,YAAc9b,EAAE6jB,UAAUtF,YACtCtD,GAAY+B,KAAKzV,OAAOuU,WAE5B,IAAIgd,GAAS9b,KAAKzV,OAAOuxB,MACzB,KAAK9b,KAAKzV,OAAOK,QAAQxE,iBAAiB,iBAAiBhD,OAEvD,OADA04B,EAASA,IAAW9b,KAAKs9H,kBACjBt6I,EAAEglC,QAAQn5B,QACd,IAAK,MACL,IAAK,WACD,GAAId,GAAMiS,KAAKzV,OAAO2L,aAAalT,EAAE4gC,QAAQ,GACzC71B,KAAQiS,KAAKzV,OAAOuxB,QACpB9b,KAAKg5E,SAASh2F,EAAE4gC,QAAQ,GAAI71B,EAAI1L,QAEhCy5B,GAAU9b,KAAKzV,OAAOuxD,uBACtB97C,KAAKw9H,kBAAkBv/H,EAAU89B,EAErC,MACJ,KAAK,QACL,IAAK,aACD/4C,EAAEglC,QAAQ8tB,gBACV,IAAI5mD,IAAS+3B,QAAQ,EAAOe,QAAShlC,EAAEglC,QACvChoB,MAAKzV,OAAOsoB,OAAO,sBAAuB3jB,IACrCA,EAAK+3B,QAAUnL,GAChB9b,KAAKg5E,SAAS/6E,EAAU+B,KAAK28H,YAAYp6I,OAAOF,MAEpD,MACJ,KAAK,KACD2d,KAAKw9H,kBAAkBv/H,EAAU89B,GACjC/7B,KAAK+zC,MAAMA,UAK3B2oF,EAAUv6I,UAAUk7I,SAAW,SAAUv1I,GACrC,MAAOkY,MAAKzV,OAAO8T,cAAcvW,GAAO2C,UAAUC,SAAS,kBAE/DgyI,EAAUv6I,UAAUq7I,kBAAoB,SAAU3f,EAAQ5tD,GACtDjwD,KAAK28H,YAAY1+H,SAAW4/G,EAC5B79G,KAAK28H,YAAY5gG,UAAYk0B,EAC7BjwD,KAAKg5E,SAAS6kC,EAAQ79G,KAAKzV,OAAO2L,aAAa+5D,GAAS5tE,MAAO2d,KAAKq9H,SAASxf,KAGjF6e,EAAUv6I,UAAU02F,UAAY,WAC5B,GAAInwE,GAAQ1I,KACR1c,EAAO0c,KAAKzV,OACZyQ,EAAOgF,KAAKzV,OAAO0K,gBACnBwwG,GAAax+E,QAAQ,EAAOw5C,aAAczgE,KAAK+yB,kBAEnD,IADAzvC,EAAKuvB,OjFqLkB,sBiFrLe4yF,IAClCA,EAASx+E,OAAb,CAGA,GAAI3U,GAAOtS,KAAKzV,OAAO2L,YACvB,IAAI3G,aACA,IAAS9L,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAK,CAClC,GAAIsK,GAAMukB,EAAK7uB,EACXsK,GAAI7H,UACJunC,uBAAqBztB,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAK,WAAYoC,GAAK,GAIhFzK,EAAKw4B,QACL9b,KAAKi5E,UAAS,GAElBj5E,KAAKy9H,SAAU,EACfn6I,EAAKqf,gBAiBL,KAAK,GADc4hF,GAffm5C,EAAUpgI,GAAkB0C,KAAKzV,QAejCiyB,EAASxc,KACJvc,EAAI,EAAGA,EAAIuX,EAAK5X,OAAQK,KAfnB,SAAUA,GACpB,GAAIk6I,IAAW,EACX3qG,EAAUh4B,EAAKvX,GAAGuvC,OACtB71B,IAAkBqf,EAAOjyB,OAAQ,SAAUkS,EAAWzB,IAClD2iI,EAAWj1H,EAAMk1H,0BAA0B5iI,EAAKvX,GAAIuvC,KAEhDh4B,EAAKwK,OAAO/hB,EAAG,IAEpBi6I,GACCC,GACAl6I,IAEJ8gG,EAAU9gG,GAIFA,GACRA,EAAI8gG,CAEJh1F,eAAcjM,EAAK2L,kBACnB3L,EAAKinC,UAAUjnC,EAAKo7B,gBAAgBukC,cAEnC3/D,EAAKwsD,kBAAkBxpD,cAAc,aACtChD,EAAK8X,aAAayoC,gBAEtB,IAAI30C,IACAkT,YAAa,cAAepH,KAAMgF,KAAKzV,OAAO0K,gBAElD3R,GAAKuvB,OjFjKY,eiFkKb7X,KAAMgF,KAAKzV,OAAO0K,gBAAgB7R,OAAS4c,KAAKzV,OAAO0K,iBAClD,GAAIujB,KAAMv0B,WAAW,EAAM2L,OAAQ,GAAIopB,KAAOoG,YAAY,EAAMz2B,SAAS,UAElFrF,EAAKinC,UAAUvqB,KAAK28H,YAAY1+H,UAChC+B,KAAK69H,gBACLv6I,EAAKuvB,OAAOwyB,OACZrlC,KAAKzV,OAAOsoB,OjFWQ,sBiFVpB3jB,GAASkT,YAAa,cAAepH,KAAMgF,KAAKzV,OAAO0K,iBACvD3R,EAAKq0B,QjF1KY,ciF0KgBzoB,KAErCwtI,EAAUv6I,UAAUy7I,0BAA4B,SAAUx4I,EAAK4tC,GAC3D,GAAI1vC,GAAO0c,KAAKzV,OACZqY,EAAc,GAAIC,IAAY7C,KAAKhR,eAAgB,KAAMgR,KAAKzV,QAC9DuzI,GAAqB,CACzB,IAAI9qG,EAAS,CACT5tC,EAAI4tC,QAAUA,CACd,IAAIxzB,GAAKlc,EAAKunC,mBAAmBzlC,EAAIuG,IACrC,IAAI6T,IACIA,EAAG/U,UAAUC,SAAS,kBACtB7I,SAAO2d,GACPs+H,GAAqB,IAGrBzsI,GAAmBjM,EAAK4a,KAAKzV,OAAOgN,uBAAwBnS,EAAI9C,YACzD8C,GAAIoW,cACJpW,GAAI+jB,KACX/jB,EAAI4tC,SAAU,EACVzjC,cAAcjM,EAAK2L,kBACnB+Q,KAAK+9H,uBAAuBv+H,GAC5BQ,KAAK87H,cAGLrxI,YAAU+U,MAAS,cAAe,gBAClCoD,EAAY8Y,QAAQt2B,EAAK9B,EAAK4S,cAAc,KAGhD8J,KAAKzV,OAAO8B,WAAWjJ,OAAS,GAAG,CACnC,GACIwmB,KACJA,GAAa,KAAI,SACjB5J,KAAKzV,OAAOsoB,OjFnFG,0BiFmFkCjJ,GAC7C5J,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAS,GAC3C4c,KAAKzV,OAAOsoB,OjFvFP,mBiFuFsCjJ,IAK3D,MAAOk0H,IAEXpB,EAAUv6I,UAAU47I,uBAAyB,SAAUv+H,GACnD,GAAIA,EAAG/U,UAAUC,SAAS,eAAgB,CACtC8U,EAAG1d,gBAAgB,gBAEnB,KAAK,GADDk8I,MAAgB3yI,MAAMC,KAAKkU,EAAGpZ,iBAAiB,2BAC1C3C,EAAI,EAAGA,EAAIu6I,EAAW56I,OAAQK,IACnC2N,eAAa4sI,EAAWv6I,KAAM,wBAAyB,aAG/DgH,YAAU+U,MAAS,cAAe,iBAEtCk9H,EAAUv6I,UAAUu2F,aAAe,SAAUC,EAAWr2F,GACpD0d,KAAKi5E,WACDj5E,KAAKs9H,mBACLt9H,KAAKi5E,UAAS,GAElBj5E,KAAKy9H,SAAU,EACfz9H,KAAKi+H,WAAWtlD,EAAWr2F,GACvB0d,KAAKzV,OAAO8B,WAAWjJ,OAAS,IAChC4c,KAAKzV,OAAOsoB,OjF9GW,8BiF+GnB7S,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAS,GAC3C4c,KAAKzV,OAAOsoB,OjFlHC,yBiFsHzB6pH,EAAUv6I,UAAU22F,UAAY,SAAUx2F,GACtC0d,KAAKk+H,WAAW57I,IAEpBo6I,EAAUv6I,UAAUs1B,QAAU,SAAUn1B,GAChC0d,KAAKzV,OAAOuxB,QAAU9b,KAAKs9H,mBAG/Bt9H,KAAKm+H,aAETzB,EAAUv6I,UAAU25I,UAAY,WAC5B,IAAK,GAAIr4I,GAAI,EAAGA,EAAI+D,OAAOC,KAAKuY,KAAK48H,cAAcx5I,OAAQK,IACvD,IAAK,GAAIC,GAAI,EAAGA,EAAI8D,OAAOC,KAAKuY,KAAK68H,WAAWz5I,OAAQM,IAChD8D,OAAOC,KAAKuY,KAAK48H,cAAcn5I,KAAO+D,OAAOC,KAAKuY,KAAK68H,WAAWn5I,KAClEsc,KAAK68H,UAAUr1I,OAAOC,KAAKuY,KAAK68H,WAAWn5I,IAAI06I,YAAYp+H,KAAK48H,aAAap1I,OAAOC,KAAKuY,KAAK48H,cAAcn5I,KACxGuc,KAAK48H,aAAap1I,OAAOC,KAAKuY,KAAK48H,cAAcn5I,IAAIgH,UAAUC,SAAS,0BACxEsV,KAAK48H,aAAap1I,OAAOC,KAAKuY,KAAK48H,cAAcn5I,IAC5CgH,UAAU5I,OAAO,wBAAyB,4BAA6B,YAK5Fme,MAAK68H,aACL78H,KAAK48H,iBAETF,EAAUv6I,UAAUm7I,gBAAkB,WAClC,MAAOt9H,MAAKzV,OAAOmpD,WAAW4N,UAAYthD,KAAKzV,OAAOmpD,WAAW4N,QAAQC,YAE7Em7E,EAAUv6I,UAAUg8I,UAAY,WAC5B,GAAIz1H,GAAQ1I,KACR1c,EAAO0c,KAAKzV,MAEhB,IAAIjH,EAAK64B,oBAAqB,CAC1B,GAAI67C,GAAc10E,EAAKsH,QAAQtE,cAAc,qBAAqB4C,aAC9D8uE,GAAYvtE,UAAUC,SAAS,wBAC/BpH,EAAK+R,aAAa6sC,kBAAoB5+C,EAAK8lC,gBAAgBhmC,QAC3DgO,eAAa4mE,IAAe,wBAGpC,GAAI1lD,GAAOtS,KAAKzV,OAAO2L,YACvB,IAAI3G,aACA,IAAK,GAAI9L,GAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAAK,CAClC,GAAIsK,GAAMukB,EAAK7uB,EACXsK,GAAI7H,WACJw8C,kBAAgB1iC,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,QAC7Cg3C,sBAAoB3iC,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAK,aAKlE,GADAqU,KAAKi5E,aACD31F,EAAKw4B,QAAU9b,KAAKm9H,mBAAqB75I,EAAKw4B,QAAlD,CAGA,GAAItgB,GAAUwE,KAAK+yB,iBACwB,cAAvC/yB,KAAKzV,OAAOw+B,kBAAkBplC,MAAuB6X,EAAsB,eAAEpY,QAC7E4c,KAAKzV,OAAOw+B,kBAAkB2T,mBAC9BlhC,EAAsB,eAAIwE,KAAKq+H,mBAC/Br+H,KAAKq+H,sBAET,IAAI9mH,IACAjB,eAAgBtW,KAAKzV,OAAO0K,gBACvBqE,OAAO,SAAUlU,GAAO,MAAOA,GAAI4tC,UAAoD,KAAxC,MAAO,UAAUtrC,QAAQtC,EAAI+jB,QAC5EpN,IAAI,SAAU3W,GAAO,MAAOA,GAAI9C,QAErC4M,GAASuxE,aAAcjlE,EAASyrB,QAAQ,EAC5C3jC,GAAKq0B,QjFnSgB,kBiFmSgBzoB,EAAM,SAAUovI,GACjD,IAAIA,EAAoBr3G,OAAxB,CAGA,GAAI13B,cAAcmZ,EAAMne,OAAO0E,iBAAkB,CAC7C,GAAI6W,GAAU4C,EAAMne,OAAOmO,YAG3B,IAFAgQ,EAAMozH,YACN1qI,cAAY0U,EAAQ1f,iBAAiB,iBAAkB,gBACnD0f,EAAQxf,cAAc,gCAAiC,CACvD8K,cAAY0U,EAAQ1f,iBAAiB,iBAAkB,eAEvD,KAAK,GADDm4I,MAAiBlzI,MAAMC,KAAKwa,EAAQ1f,iBAAiB,mBAChD3C,EAAI,EAAGA,EAAI86I,EAAYn7I,OAAQK,IACpC86I,EAAY96I,GAAG5B,SAGvB6mB,EAAMm1H,gBAEVv6I,EAAKg/C,cACLh/C,EAAKuvB,OjF9IK,aiF8IqBrX,QAASA,EAAS+b,SAAUA,SAGnEmlH,EAAUv6I,UAAU4wC,gBAAkB,WAOlC,IAAK,GANDv3B,IACA4a,gBACAC,kBACAC,mBAGKzmB,EAAK,EAAGmF,EADNgL,KAAKzV,OAAO0K,gBACSpF,EAAKmF,EAAO5R,OAAQyM,IAAM,CACtD,GAAIzK,GAAM4P,EAAOnF,EACjB,IAAIzK,EAAI4tC,QACJ,OAAQ5tC,EAAI+jB,MACR,IAAK,MACD3N,EAAQ4a,aAAalyB,KAAKkB,EAAIoW,QAC9B,MACJ,KAAK,SACDA,EAAQ6a,eAAenyB,KAAKkB,EAAI9C,KAChC,MACJ,SACIkZ,EAAQ8a,eAAepyB,KAAKkB,EAAIoW,UAIhD,MAAOA,IAKXkhI,EAAUv6I,UAAUq8I,uBAAyB,SAAU7yI,GAGnD,IAAK,GAFDqP,GAAOgF,KAAKzV,OAAO0K,gBACnBxR,EAAI,EACCsB,EAAMiW,EAAK5X,OAAQK,EAAIsB,GACxBiW,EAAKvX,GAAGkI,MAAQA,EADalI,KAKrC0Z,GAAkB6C,KAAKzV,OAAQ,SAAUkS,EAAWzB,GAChDA,EAAKwK,OAAO/hB,EAAG,IAChB6Z,GAAkB0C,KAAKzV,UAK9BmyI,EAAUv6I,UAAUyiG,aAAe,SAAUx/F,GACzC,GAAI9B,GAAO0c,KAAKzV,OACZomI,EAA6C,QAArCrtI,EAAKkL,aAAauQ,cAC9B5B,IAAkB6C,KAAKzV,OAAQ,SAAUkS,EAAWzB,GAChD,GAAIyjI,GAAWr5I,EAAIusB,OACnB8sH,GAAS7uI,MAAQ4M,GAA0BlZ,EAAMm7I,EAAS7uI,MAAO6M,GACjEk0H,EAAQ31H,EAAK4pB,QAAQ65G,GAAYzjI,EAAK9W,KAAKu6I,IAC5CnhI,GAAkB0C,KAAKzV,SAAS,IAGvCmyI,EAAUv6I,UAAU87I,WAAa,SAAUtlD,EAAWr2F,GAClD,GAAIomB,GAAQ1I,IACZA,MAAKq+H,qBACL,IAAI/6I,GAAO0c,KAAKzV,OACZzC,EAAQxE,EAAKkzD,iBACbuO,EAAezhE,EAAKozF,kBACpBxnF,GACA4jC,WAAY9yB,KAAKzV,OAAO6O,0BACxB6E,SAAUnW,EACVia,QAASzf,GAAcgB,EAAKy+C,qBAAqB,GACjD9a,QAAQ,IAEP13B,eAAcyQ,KAAKzV,OAAO+iC,gBAEvBp+B,EAAK9J,IADL9C,EACWgB,EAAKowD,WAAWgrF,aAAep7I,EAAKunC,mBAAmBvnC,EAAKowD,WAAWgrF,cAC5Ep7I,EAAKmnC,UAAUnnC,EAAK+V,wBAAwB3R,QAAQpF,IAG/CA,EAAOgB,EAAKmnC,UAAU3iC,GAASi9D,EAAa,GAEtD71D,EAAK9J,OAKd9B,EAAKq0B,QjFvYkB,oBiFuYgBzoB,EAAM,SAAUyvI,GACnD,IAAIA,EAAsB13G,OAA1B,CAOA,GAJAve,EAAM21H,mBAAqB/6I,EAAKy+C,qBAChCz+C,EAAKqf,iBACLg8H,EAAsBv5I,IAAMu5I,EAAsBv5I,IAC9Cu5I,EAAsBv5I,IAAM9C,EAAOgB,EAAKmnC,UAAU3iC,GAASi9D,EAAa,GACxEr8C,EAAMne,OAAOsL,eAAgB,CACzBvT,IACAwF,EAAQsmC,SAASuwG,EAAsBv5I,IAAIslC,aAAa,iBAAkB,KAC1Eq6B,MACa7gE,KAAKZ,EAAK6tC,cAAcrpC,IACrCi9D,EAAa7gE,KAAKZ,EAAKiuC,qBAAqBzpC,IACf,eAAzBxE,EAAK+Y,iBACL0oD,EAAa7gE,KAAKZ,EAAKq+D,yBAAyB75D,IAGxD,KAASrE,EAAI,EAAGA,EAAIshE,EAAa3hE,OAAQK,IAAK,CACtCkI,EAAMo5D,EAAathE,GAAGinC,aAAa,WACnCq6B,GAAathE,GAAGgH,UAAUC,SAAS,kBACnCge,EAAM81H,uBAAuB7yI,GAC7B9J,SAAOkjE,EAAathE,OAGhB4Z,EAAS/Z,EAAKsnC,oBAAoBj/B,IAC/BqnC,SAAU,EACjB31B,EAAO8L,KAAO,SACd1e,YAAUs6D,EAAathE,IAAK,cAAe,mBACvCH,EAAKwb,YAAchX,EAAQxE,EAAKwb,YAAcxb,EAAK6a,qBAAqB/a,QAAUE,EAAKwb,aACvFxb,EAAK0b,wBAAwBlT,YAAYxI,EAAKiuC,qBAAqBjuC,EAAKwb,WAAa,IACrFxb,EAAK0hG,uBAAuBl5F,YAAYxI,EAAK6tC,cAAc7tC,EAAKwb,WAAa,IAChD,eAAzBxb,EAAK+Y,iBACL/Y,EAAK6b,4BAA4BrT,YAAYxI,EAAKq+D,yBAAyBr+D,EAAKwb,WAAa,KAGjGxb,EAAKwb,YAAchX,EAAQxE,EAAKwb,YAAcxb,EAAK+a,cAAcjb,QAAUE,EAAKwb,YAChFxb,EAAK4lC,iBAAiB5iC,cAAc,SAASwF,YAAYxI,EAAK6tC,cAAc7tC,EAAKwb,WAAa,WAG/FimD,GAAathE,QAGvB,IAAKilB,EAAMne,OAAOsL,gBAA2C,IAAxBkvD,EAAa3hE,SAAgBd,EAgBnE,IAAK,GAAImB,GAAI,EAAGA,EAAIshE,EAAa3hE,OAAQK,IAAK,CAC1C,GAAIm7I,GAAW75E,EAAathE,GAAGinC,aAAa,WAC5C,IAAIq6B,EAAathE,GAAGgH,UAAUC,SAAS,iBACnCge,EAAM81H,uBAAuBI,GAC7B/8I,SAAOkjE,EAAathE,QAEnB,CACDgH,YAAUs6D,EAAathE,IAAK,cAAe,kBAC3C,IAAIy+D,GAAc5+D,EAAKsnC,oBAAoBg0G,EAC3C18E,GAAYlvB,SAAU,EACtBkvB,EAAY/4C,KAAO,eACZ47C,GAAathE,QA3B8C,CAC1E,GAAIkI,GAAMgzI,EAAsBv5I,IAAIslC,aAAa,WAEjD,IADA/+B,EAAMrJ,GAAQomB,EAAMne,OAAOmpD,WAAWgrF,aAAe/yI,EAAM+c,EAAMne,OAAOmpD,WAAWgrF,aAAe/yI,EAC9FgzI,EAAsBv5I,IAAIqF,UAAUC,SAAS,iBAC7Cge,EAAM81H,uBAAuB7yI,GAC7B9J,SAAO88I,EAAsBv5I,SAE5B,CACD,GAAIiY,GAAS/Z,EAAKsnC,oBAAoBj/B,EACtC0R,GAAO21B,SAAU,EACjB31B,EAAO8L,KAAO,SACd1e,YAAUk0I,EAAsBv5I,KAAM,cAAe,yBAElDu5I,GAAsBv5I,IAkBjCsjB,EAAMm1H,gBACFv7I,IACAgB,EAAKowD,WAAWgrF,iBAAe3xI,GAC3BzJ,EAAKozF,kBAAkBtzF,SACvB0E,EAAQsmC,SAAS9qC,EAAKozF,kBAAkB,GAAGhsD,aAAa,iBAAkB,MAG7EpnC,EAAK64B,qBACN74B,EAAKinC,UAAUziC,GAEnBxE,EAAKq0B,QjF/dQ,ciF+doBgnH,GACjCr7I,EAAKuvB,OjFheQ,eiFgeqB7X,KAAM0N,EAAMne,OAAO0K,kBACrD3R,EAAKuvB,OAAOwyB,WAGpBq3F,EAAUv6I,UAAU07I,cAAgB,WAsBhC,IAAK,GADcgB,GAnBf7jI,EADOgF,KAAKzV,OACAmT,gBAAe,GAC3By/D,EAAW1/D,GAAmBuC,KAAKzV,QACnCu0I,EAAcxhI,GAAkB0C,KAAKzV,QAiBrCm0F,EAAS1+E,KACJvc,EAAI,EAAGC,EAAI,EAAGqB,EAAMiW,EAAK5X,OAAQK,EAAIsB,EAAKtB,KAjBrC,SAAUA,EAAGC,EAAGqB,GACtBiW,EAAKvX,GAAGgH,UAAUC,SAAS,WAAasQ,EAAKvX,GAAGgH,UAAUC,SAAS,gBACnEyS,GAAkBuhF,EAAOn0F,OAAQ,SAAUkS,EAAWN,EAAao5E,GAC/Dp5E,EAAY1Y,GAAG1B,aAAa,gBAAiB2B,EAAEuM,YAC/CslF,EAAW9xF,GAAGqE,MAAQpE,GACvBy5E,EAAU,KAAM2hE,GACnBp7I,KAGAyZ,GAAkBuhF,EAAOn0F,OAAQ,SAAUkS,EAAWN,EAAao5E,GAC/Dp5E,EAAY1Y,GAAG3B,gBAAgB,iBAC/ByzF,EAAW9xF,GAAGqE,OAAS,GACxBq1E,EAAU,KAAM2hE,GAEvBD,EAAUn7I,GAIFD,EAAGC,GACXA,EAAIm7I,GAGZnC,EAAUv6I,UAAU48I,iBAAmB,SAAUz8I,GAC7C,MAAOyI,GAAQzI,EAAM0d,KAAKzV,OAAO8O,0BAGrCqjI,EAAUv6I,UAAU+7I,WAAa,SAAU57I,GACvC,GAAIomB,GAAQ1I,KACR1c,EAAO0c,KAAKzV,MAChB,IAAKjH,EAAKkL,aAAak3E,cAGnBpiF,EAAKw4B,SACL9b,KAAKi5E,WACLj5E,KAAKzV,OAAOsoB,OjF1PK,wBiF4PjBvvB,EAAKw4B,QAAT,CAGA9b,KAAKzV,OAAOK,QAAQH,UAAUqE,IAAI,YAClC,IACII,IACA8vI,YAFc18I,GAAc0d,KAAKi/H,iBAGjCnsG,WAAYxvC,EAAK8V,0BACjB6tB,QAAQ,EAEZ3jC,GAAKq0B,QjFrhBe,iBiFqhBgBzoB,EAAM,SAAUgwI,GAChD,IAAIA,EAAmBj4G,OAAvB,CAGAve,EAAM+0H,SAAU,EAChBn6I,EAAKqf,gBASL,KAAK,GARDlD,GACAC,EAKA3R,EACAjG,EALA1C,EAAM,GAAIyd,IAAY6F,EAAM1Z,eAAgB,KAAM0Z,EAAMne,QAExDy/B,EADQ,GAAIjM,IAAkBrV,EAAMne,QAClBuY,cAAco8H,EAAmBF,cACnDx/H,EAAKpa,EAAIme,OAAOymB,EAAU,GAAI1mC,EAAK4S,cAG9BzS,EAAI,EAAGA,EAAIilB,EAAMne,OAAO7F,cAAcvB,QAAQC,OAAQK,IAC3D+b,EAAG+5B,aAAa7wB,EAAMne,OAAOkC,cAAc,MAAQ3D,UAAW,iBAAmB0W,EAAG85B,YACpFtP,EAAU,GAAGp6B,MAAMg1B,QAAQ,GAAI5L,KAAOQ,SAAUlK,WAAS4R,SAE7D,IAAIriB,GAAQvb,EAAKwsD,kBAAkBxpD,cAAc,QAEjD,IADAkZ,EAAG/U,UAAUqE,IAAI,iBACb+P,EAAMvY,cAAc,eAAgB,CACpC,GAAI+U,GAAWwD,EAAMvY,cAAc,cACnC+U,GAASiwB,WAAWz+B,YAAYwO,GAChCqN,EAAMy2H,oBAEN77I,EAAKuS,iBACL6J,EAAOF,EAAGtL,WAAU,GACpBuL,EAAMiJ,EAAM7U,cAAc2L,EAAIE,GAC9BF,EAA8B,UAAzBlc,EAAK+Y,gBAA8BqD,EAAOF,EAC/CkJ,EAAM02H,mBAAmB5/H,EAAIC,EAAKC,IAGlCb,EADAvb,EAAKwb,YAAmD,QAArCxb,EAAKkL,aAAauQ,eAC7Bzb,EAAK4lC,iBAAiB5iC,cAAc,SAGpChD,EAAKwsD,kBAAkBxpD,cAAc,SAEJ,QAA7CoiB,EAAMne,OAAOiE,aAAauQ,eAA2BF,EAAM06B,aAAa/5B,EAAIX,EAAMy6B,YAAcz6B,EAAM/S,YAAY0T,GAClHzY,WAASyY,EAAGpZ,iBAAiB,eAAgB,gBAC7C4jC,EAAU,GAAGgJ,SAAU,EACvBhJ,EAAU,GAAGxuB,QAAUvU,eAAe+iC,EAAU,GAAG1nC,MAAM,GACzD0nC,EAAU,GAAG7gB,KAAO,MACpBT,EAAMk8E,aAAa56D,EAAU,IAC7BthB,EAAMm1H,gBACNn1H,EAAMqrC,MAAMiG,iBACZ12D,EAAKuvB,OjFxkBK,YiFwkBqB7X,KAAM0N,EAAMne,OAAO0K,gBAAiB/F,MAAQ0G,SAAU8S,EAAMne,OAAOsL,iBAClG,IAAI2F,GAAUkN,EAAMqqB,kBAGhBssG,EAAS32H,EAAMne,OAAO8O,wBAAwBjW,OAASoY,EAAoB,aAAEpY,OAASoY,EAAgB,eAAEpY,OAAS,CACxE,SAA7CslB,EAAMne,OAAOiE,aAAauQ,eAA2Bzb,EAAKinC,UAAU,GAAKjnC,EAAKinC,UAAU80G,GACnF/8I,IACDwF,EAAQ4gB,EAAM42H,qBAAqB,GAAG,GACtCvxI,EAAMzK,EAAK4S,aAAapO,GACqB,QAA7C4gB,EAAMne,OAAOiE,aAAauQ,eAA2B2J,EAAMswE,SAAS,EAAGjrF,EAAI1L,OAAO,GAC9EqmB,EAAMswE,SAASqmD,EAAQtxI,EAAI1L,OAAO,IAEtCqmB,EAAMne,OAAO8B,WAAWjJ,OAAS,IAAMd,GAAQkZ,EAAoB,aAAEpY,SACrEslB,EAAMne,OAAOsoB,OjF5dM,6BiF8dvB,IAAI65E,IACAsyC,YAAaE,EAAmBF,YAAa55I,IAAKoa,EAClDi3H,aAAc1oI,EAAKitB,YAAalzB,EAAOgrC,WAAYosG,EAAmBpsG,WAAYra,KAAMjZ,EAAG5P,MAAM9H,GAErGxE,GAAKq0B,QjF3lBK,WiF2lBoB+0E,GAC1BppG,EAAKuS,gBACLoC,GAAoBwH,EAAInZ,cAAc,mBAAoBkZ,EAAGlZ,cAAc,oBAE3EiJ,eACAmZ,EAAMne,OAAOsoB,OAAOwyB,OACpB38B,EAAMne,OAAOsoB,OAAO,sBAIhC6pH,EAAUv6I,UAAUi9I,mBAAqB,SAAU5/H,EAAIC,EAAKC,GACxD,GAAIpc,GAAO0c,KAAKzV,OACZ+U,EAASV,GAAgBoB,KAAKzV,QAC9BgV,EAAUL,GAAoBc,KAAKzV,OACF,SAArCjH,EAAKkL,aAAauQ,eAA2BO,EAAOi6B,aAAa95B,EAAKH,EAAOg6B,YAAch6B,EAAOxT,YAAY2T,GAC9G1Y,WAAS0Y,EAAIrZ,iBAAiB,eAAgB,gBAC1CmZ,GAAWG,IAC0B,QAArCpc,EAAKkL,aAAauQ,eAA2BQ,EAAQg6B,aAAa75B,EAAMH,EAAQ+5B,YAC1E/5B,EAAQzT,YAAY4T,GAC1B3Y,WAAS2Y,EAAKtZ,iBAAiB,eAAgB,gBAC/C6R,GAAoByH,EAAKpZ,cAAc,mBAAoBkZ,EAAGlZ,cAAc,qBAE5D,SAAhBhD,EAAKgK,QACLhK,EAAKuvB,OjFrWS,oBiFwWtB6pH,EAAUv6I,UAAUg9I,kBAAoB,WACpC,GAAI77I,GAAO0c,KAAKzV,MAChB,IAAIjH,EAAKuS,eAAgB,CACrB,GAAIgvF,GAAYvhG,EAAKoV,aAAapS,cAAc,qBAAqBA,cAAc,QAEnF,IADCu+F,oBAA6Bv5D,WAAWz+B,YAAYg4F,EAAUlsF,mBAClC,eAAzBrV,EAAK+Y,gBAAkC,CACvC,GAAIkD,GAAUjc,EAAKoV,aAAapS,cAAc,2BAA2BA,cAAc,QACtFiZ,qBAA2B+rB,WAAWz+B,YAAY0S,EAAQ5G,sBAIvE+jI,EAAUv6I,UAAU0R,cAAgB,SAAUC,EAAKsxD,GAC/C,GAAInxD,GAAOH,EAAII,WAAU,GACrByI,EAAUqD,KAAKzV,OAAOqS,yBACtBjT,EAAOqW,KAAKzV,OAAOmS,qBACnBzS,EAAQ+V,KAAKzV,OAAOsS,4BAIxB,OAHAgB,IAAc/J,EAAK,EAAGnK,GACtBkU,GAAc5J,EAAMtK,EAAMM,EAAQgK,EAAKpI,SAASzI,OAAS6G,EAAQgK,EAAKpI,SAASzI,QAC/Eya,GAAcunD,EAAUz7D,EAAOgT,EAASyoD,EAASv5D,SAASzI,QACnD6Q,GAEXyoI,EAAUv6I,UAAUm9I,qBAAuB,SAAUtkH,EAAakyB,EAAOqyF,GAIrE,IAAK,GADDC,GAFAltH,EAAOtS,KAAKzV,OAAO2L,aACnBwuD,EAAWpyC,EAAKlvB,OAEXK,EAAIu3B,EAAav3B,EAAIihE,EAAUjhE,IAAK,CAEzC,GADA+7I,IAAaD,GAAY/8I,oBAAkB8vB,EAAK7uB,GAAGkb,kBAC9CuuC,GAASltC,KAAKy/H,YAAYntH,EAAK7uB,IAChC,MAAOA,EAEN,IAAIypD,IAAU56B,EAAK7uB,GAAGyC,UAAYosB,EAAK7uB,GAAGkF,SAAW2pB,EAAK7uB,GAAG0K,gBAC5DmkB,EAAK7uB,GAAGwK,aAAcqkB,EAAK7uB,GAAGyK,gBAAkBsxI,EAClD,MAAO/7I,GAGf,OAAQ,GAEZi5I,EAAUv6I,UAAUs9I,YAAc,SAAU1xI,GACxC,OAAQA,EAAI7H,UAAY6H,EAAIpF,UAAYoF,EAAIG,eAAiBH,EAAIE,YAAcF,EAAII,cAEvFuuI,EAAUv6I,UAAU88I,eAAiB,WAIjC,IAAK,GAFD38I,MACAo9I,GAAY7wC,OAAU,EAAGC,OAAU,KAAMsW,SAAW,EAAOpuF,KAAQ,KAAM+3E,SAAY,MAChFl/F,EAAK,EAAGkG,EAHNiK,KAAKzV,OAGwB,YAAEsF,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC5D,GAAI9B,GAAMgI,EAAGlG,EACT9B,GAAI1L,OACJiP,WAASvD,EAAI1L,MAAO0L,EAAIkyG,aAAelyG,EAAIkyG,aAAey/B,EAAQ3xI,EAAIpK,MAAOrB,GAGrF,MAAOA,IAEXo6I,EAAUv6I,UAAUi7I,WAAa,SAAU17I,GACvC,GAAI+C,GAAO,CACPub,MAAKzV,OAAOwe,gBACZtkB,EAAOub,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAE7C4c,KAAK28H,YAAY5gG,UAAYr6C,EAAOq6C,UAAYt3C,EAChDub,KAAK28H,YAAY1+H,SAAWmwB,SAAS1sC,EAAOgpC,aAAa,SAAU,KAEvEgyG,EAAUv6I,UAAU62F,SAAW,SAAUlxF,EAAOzF,EAAO6qD,GACnD,GAAI5pD,GAAO0c,KAAKzV,OACZwD,EAAMzK,EAAKkU,iBAAiBnV,EAChC2d,MAAKlY,MAAQA,EACbkY,KAAK3d,MAAQA,EACb2d,KAAKktC,MAAQA,CACb,IAAI0wC,GAAYt6F,EAAKw4B,UAAY9b,KAAK28H,YAAYp6I,OAAOF,QAAUA,GAC3D2d,KAAK28H,YAAY1+H,WAAanW,GAASkY,KAAKzV,OAAO8T,cAAcjb,OAAS,IAAM0E,EACpFyH,eAAcxB,EAAI7H,WAAagnD,GAC/BvK,sBAAoB3iC,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAK,WAAY7D,GAElExE,EAAKkL,aAAaL,gBACbyvF,GAAa7vF,EAAII,aAClB6R,KAAK2/H,eAAe73I,EAAOzF,EAAO6qD,GAE7B0wC,IACL59E,KAAK88H,UAAW,EAChB98H,KAAKi5E,cAIjByjD,EAAUv6I,UAAUw9I,eAAiB,SAAU73I,EAAOzF,EAAO6qD,GACzD,GAAIxkC,GAAQ1I,KACR1c,EAAO0c,KAAKzV,OACZwD,EAAMzK,EAAKkU,iBAAiBnV,GAC5BoF,EAAOnE,EAAK8V,yBAChB,KAAI9V,EAAKw4B,OAAT,CAGA,GAAI12B,GACAw6I,EACA79H,EAAU9a,eAAe+Y,KAAK6/H,eAAe/3I,IAAQ,EAUzD,IATiC,YAA7BiG,EAAImQ,sBAAmE,iBAA7BnQ,EAAImQ,sBAC9C9Y,EAAmC,YAA7B2I,EAAImQ,qBAAqC5a,EAAK6a,qBAAqBrW,GAASxE,EAAK8a,yBAAyBtW,GAChH83I,EAAW5/H,KAAKzV,OAAOqgC,oBAAoBxlC,EAAIslC,aAAa,aAC5D3oB,EAAU69H,EAASpkI,QAAUvU,eAAe24I,EAASpkI,SAAS,GAAQuG,IAGtE3c,EAAM9B,EAAK+a,cAAcvW,GACzBia,EAAU9a,eAAe+Y,KAAK6/H,eAAe/3I,IAAQ,IAEpDL,EAAK,KAAOsG,EAAI1L,QAAU+C,EAAIqF,UAAUC,SAAS,kBAAqBqD,EAAI5K,SAC1E4K,EAAIG,cAAgBH,EAAIE,WAEzB,YADA+R,KAAKzV,OAAOuxD,sBAAuB,EAGvC97C,MAAKzV,OAAOuxD,sBAAuB,EACnC97C,KAAKzV,OAAOK,QAAQH,UAAUqE,IAAI,YAClC,IAAIuO,GAAS/Z,EAAKsnC,oBAAoBxlC,EAAIslC,aAAa,aACnD96B,KAAWvE,MAAMg1B,MAAMj7B,EAAIwK,OAC3BV,GACAgkB,WAAYnlB,EAAI1L,MAAOoP,cAAejP,oBAAkBuL,EAAIzF,iBAC5DwqC,WAAYrrC,EAAMsa,QAASA,EAC3BpD,gBAAiB1X,YAAW8G,EAAI4Q,gBAAkB5Q,EAAI4Q,oBACtD/c,MAAOc,GAAUqL,EAAI1L,MAAO0f,GAC5Bpe,KAAOupD,EAAiB,MAAT,OAAgBjmB,QAAQ,EACvCz1B,eAAgB6L,GAAUA,EAAO7L,iBAEhCjC,eAAcyQ,KAAKzV,OAAO+iC,gBAC3Bp+B,EAAKupB,KAAO7oB,EAAMoQ,KAAKkoD,YAAYt4D,EAAOoQ,KAAK8/H,WAAW/xI,EAAIpC,OAC9DuD,EAAK9J,IAAMA,EACX8J,EAAKunI,aAAe1oI,EACfmB,EAAKupB,QAIdn1B,EAAKq0B,QjFruBS,WiFquBgBzoB,EAAM,SAAU6wI,GAC1C,IAAIA,EAAa94G,OAAjB,CAgBA,GAbA84G,EAAatnH,KAAOsnH,EAAatnH,KAAOsnH,EAAatnH,KAAO7oB,EAAM8Y,EAAMw/C,YAAYt4D,EAAO8Y,EAAMo3H,WAAW/xI,EAAIpC,OAChHo0I,EAAa36I,IAAM26I,EAAa36I,IAAM26I,EAAa36I,IAAMA,EACzD26I,EAAatJ,aAAesJ,EAAatJ,aAAesJ,EAAatJ,aAAe1oI,EACpFgyI,EAAatJ,aAAa3uI,MAAQtF,oBAAkBu9I,EAAatJ,aAAa3uI,OAAS,EAAIi4I,EAAatJ,aAAa3uI,MACrH4gB,EAAMi0H,aACF56H,QAASA,EAASxf,OAAQwL,EAAKnM,MAAOm+I,EAAan+I,MAAO6P,aAAcsuI,EAAatuI,aAAcwM,SAAUnW,EAC7Gi0C,UAAW3N,SAAS2xG,EAAatnH,KAAKiS,aAAa,iBAAkB,IACrEl5B,eAAgBuuI,EAAavuI,gBAE7BuuI,EAAatnH,KAAKhuB,UAAUC,SAAS,iBACrCge,EAAMs3H,WAAY,EAClBD,EAAatnH,KAAKhuB,UAAU5I,OAAO,gBAEnC0N,cAAcjM,EAAK2L,iBAAkB,CACrC,GAEInK,GAASi7I,EAAa36I,IAAIgB,iBAAiB,2EAA2EhD,MAC1HslB,GAAMm0H,UAAU,GAAKn0H,EAAMi0H,YAAY1+H,SAAW8hI,EAAatJ,aAAa3uI,OACxEi4I,EAAsB,UAAIA,EAAatnH,KAAKvkB,WAAU,GACrD/J,EAAa41I,EAAatnH,KAAM,oBAAsBtuB,EAAa41I,EAAatnH,KAAM,qBACvFsnH,EAAa36I,IAAI66I,WAAWF,EAAatJ,aAAa3uI,MAAQxE,EAAKwS,oBACnEiqI,EAAa36I,IAAIwrC,aAAamvG,EAAsB,UAAGA,EAAa36I,IAAQ,MAAE26I,EAAatJ,aAAa3uI,MAAQxE,EAAKwS,uBAGrHiqI,EAAa36I,IAAI66I,WAAWF,EAAatJ,aAAa3uI,MAAQhD,GAC9Di7I,EAAa36I,IAAIwrC,aAAamvG,EAAsB,UAAGA,EAAa36I,IAAQ,MAAE26I,EAAatJ,aAAa3uI,MAAQhD,KAEpH4jB,EAAMk0H,aAAa,GAAKl0H,EAAMi0H,YAAY1+H,SAAW8hI,EAAatJ,aAAa3uI,OAC3Ei4I,EAAatnH,KAAKvvB,cAAc2D,YAAYkzI,EAAatnH,MAC7DrnB,eAAasX,EAAMm0H,UAAU,GAAKn0H,EAAMi0H,YAAY1+H,SAAW8hI,EAAatJ,aAAa3uI,SAAU,UAAW,cAElHxE,EAAKw4B,QAAS,EACdx4B,EAAKqf,iBACArf,EAAK64B,qBAAwB74B,EAAKgnC,oBACnChnC,EAAKinC,UAAU7hB,EAAMi0H,YAAY1+H,UAAU,GAE/CyK,EAAMq4B,SAAS1pB,OAAO0oH,GACtBr3H,EAAMne,OAAOsoB,OjFjfU,yBiFif2BktH,GAClDr3H,EAAMu6E,KAAO10F,SAAO,IAAMjL,EAAKsH,QAAQJ,GAAK,WAAYlH,EAAKsH,SAC7DtH,EAAKowD,WAAW0mF,qBAAqBrsI,IACrC2a,EAAMne,OAAOK,QAAQtE,cAAc,gBAAgB+C,MAAMC,QAAU,YAG3EozI,EAAUv6I,UAAUstE,WAAa,SAAUxxD,EAAU5b,EAAOT,GACxD,GAAI0B,GAAO0c,KAAKzV,OACZwD,EAAMzK,EAAKkU,iBAAiBnV,GAC5ByF,EAAQxE,EAAK2wC,sBAAsB5xC,EACvC,IAAI0L,IAAQA,EAAIG,aAAc,CAC1B,GAAIuT,GAAKnD,GAAwB0B,KAAKzV,OAAQwD,EAAKkQ,EAAUnW,GACzDuV,EAAsC,YAA7BtP,EAAImQ,qBAAqC8B,KAAKzV,OAAOgT,uBAAuBU,GACxD,iBAA7BlQ,EAAImQ,qBAA0C5a,EAAKka,2BAA2BS,GACxE3a,EAAKsnC,oBAAoBnpB,EAAGvY,cAAcwhC,aAAa,YACjE1qB,MAAK87B,UAAUr6B,EAAI1T,EAAKsP,EAAQzb,GAChCoe,KAAKzV,OAAOotB,QjFt2BG,iBiFu2BXc,KAAMhX,EAAIlf,OAAQwL,EAAKzL,KAAM+a,EAAO7B,YAIhDkhI,EAAUv6I,UAAU+9I,WAAa,SAAU7iI,EAAQhb,EAAOT,EAAO6f,GAC7D,GAAI0+H,EACJ,IAAKngI,KAAKzV,OAAOsL,eAWZ,CACD,GAAIq9B,GAASlzB,KAAKzV,OAAOsgC,mBAAmBxtB,EAAO1R,KAC/CsS,EAAWmwB,SAAS8E,EAAOxI,aAAa,iBAAkB,KAC9Dy1G,EAAgBngI,KAAKzV,OAAO0K,gBAAgBgJ,IACzBzC,UACf2kI,EAAc3kI,QAAUvU,eAAeoW,EAAO/a,MAAM,IAEnDE,oBAAkBH,IACnBiP,WAASjP,EAAOT,EAAOu+I,EAAc3kI,QAEzC,IAAI4kI,OAAmB,EACvB,IAAI7wI,cAAcyQ,KAAKzV,OAAO0E,mBAAqB9E,EAAasX,EAAI,oBAChEtX,EAAasX,EAAI,qBAAsB,CACvC,GAAI4+H,GAAYrgI,KAAKzV,OAAOgnC,qBAAqBvxB,KAAK28H,YAAY1+H,UAC9DqiI,EAAclyG,SAASiyG,EAAU31G,aAAa,iBAAkB,GACpE01G,GAAmBpgI,KAAKzV,OAAOgT,uBAAuB+iI,OAGtDF,GAAmBpgI,KAAKzV,OAAOgT,uBAAuBU,EAO1D,IALAmiI,EAAiB5kI,QAAUvU,eAAek5I,EAAc3kI,SAAS,GAC7D6B,EAAO/a,KAAKD,KAAWT,IACvBw+I,EAAiBptG,SAAU,EAC3BmtG,EAAcntG,SAAU,GAEQ,eAAhChzB,KAAKzV,OAAO8R,gBAAkC,CAC9C,GAAIkkI,GAAcvgI,KAAKzV,OAAOiT,2BAA2BS,EACzDsiI,GAAY/kI,QAAUvU,eAAek5I,EAAc3kI,SAAS,GACxD6B,EAAO/a,KAAKD,KAAWT,IACvB2+I,EAAYvtG,SAAU,QAvCzB31B,GAAO7B,UACR6B,EAAO7B,QAAUvU,eAAeoW,EAAO/a,MAAM,IAE5CE,oBAAkBH,IACnBI,WAAS6O,SAASjP,EAAOT,EAAOyb,EAAO7B,SAEvC6B,EAAO/a,KAAKD,KAAWT,IACvByb,EAAO21B,SAAU,IAqC7B0pG,EAAUv6I,UAAUg2D,UAAY,SAAUrwD,EAAOxF,GAE7C,IAAK,GAAIuN,GAAK,EAAGyuF,EADN92F,OAAOC,KAAKnF,GACSuN,EAAKyuF,EAAOl7F,OAAQyM,IAAM,CACtD,GAAI9B,GAAMuwF,EAAOzuF,EACjBmQ,MAAKyvD,WAAW3nE,EAAOiG,EAAKzL,EAAKyL,MAGzC2uI,EAAUv6I,UAAU29I,WAAa,SAAUn0I,GACvC,GAAIy9D,GAAOppD,KAAKzV,OAAOylC,oBAAoBrkC,GAAOqU,KAAKzV,OAAO7F,cAAcvB,QAAQC,MAOpF,OANKZ,qBAAkBwd,KAAKzV,OAAOyyB,iBAAoBx6B,oBAAkBwd,KAAKzV,OAAOmL,YACjF0zD,IAEAppD,KAAKzV,OAAOyJ,iBACZo1D,IAEGA,GAEXszE,EAAUv6I,UAAU25C,UAAY,SAAUr6B,EAAIlf,EAAQ8a,EAAQzb,GAC1D,GACI4+I,GADA/nH,EAAO,GAAIqiB,IAAa96B,KAAKzV,OAAQyV,KAAKhR,eAE9CpN,GAAwB,WAAhBW,EAAOoB,MAAsBnB,oBAAkBZ,GAA6BA,EAApBkW,WAAWlW,GAC3Eoe,KAAKkgI,WAAW7iI,EAAQ9a,EAAOF,MAAOT,EAAO6f,EAC7C,IAAI1N,GAAUiM,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,6BACrDjwB,KAAKzV,OAAOsS,4BACnB9I,GAAUA,GAAWiM,KAAKzV,OAAOyJ,gBAAkBD,EAAU,EAAIA,EACjE1C,GAAmBgM,EAAQ2C,KAAKzV,OAAOgN,uBAAwB8F,EAAO7B,SAElEglI,EADAzsI,GAA2C,YAAhCxR,EAAO2b,sBAAsC8B,KAAKzV,OAAO2L,aAAa9S,SAAWia,EAAOzN,MAAMxM,OAC/Fia,EAAOzN,MAAMvE,MAAM0I,EAASsJ,EAAOzN,MAAMxM,QAGzCia,EAAOzN,KAErB,IAAI1G,GACA6yC,CACA/7B,MAAKzV,OAAOkhB,UACZviB,EAAgBuY,EAAGvY,cACnB6yC,EAAYt6B,EAAGs6B,UAEnB,IAAIj0C,GAAQ,CACRiM,KACAjM,EAAwC,YAAhCvF,EAAO2b,sBAAsE,UAAhC8B,KAAKzV,OAAO8R,gBAC3DtI,EAA0C,iBAAhCxR,EAAO2b,qBACjB8B,KAAKzV,OAAO0lC,4BAA8BjwB,KAAKzV,OAAOqS,yBAA2B9U,GAE3F2wB,EAAKqjB,UAAUr6B,EAAI++H,EAAQxgI,KAAK8/H,WAAWv9I,EAAOoJ,KAAO7D,GAAQuV,EAAO7B,SAAW1T,MAASkY,KAAK8/H,WAAWv9I,EAAOoJ,OAC/GqU,KAAKzV,OAAOkhB,SACZzL,KAAKygI,WAAav3I,EAAc0G,MAAMmsC,GACtC7yC,EAAc0G,MAAMmsC,GAAWtxC,UAAUqE,IAAI,gBAG7C2S,EAAGhX,UAAUqE,IAAI,eAErB2S,EAAGhX,UAAUqE,IAAI,eACjBkR,KAAKzV,OAAOsoB,OAAOwyB,QAEvBq3F,EAAUv6I,UAAU+lE,YAAc,SAAUt4D,EAAO9H,GAC/C,GAAIshE,GAAO,CACPppD,MAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO7F,cAAcvB,UACvDimE,EAAOppD,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAExCZ,oBAAkBwd,KAAKzV,OAAOyyB,iBAAoBx6B,oBAAkBwd,KAAKzV,OAAOmL,YACjF0zD,IAEAppD,KAAKzV,OAAOyJ,iBACZo1D,GAEJ,KAAK,GAAIt9B,GAAI,EAAGA,EAAIl8B,EAAMxM,OAAQ0oC,IAE9B,GADesC,SAASx+B,EAAMk8B,GAAGpB,aAAa,iBAAkB,MAC/C5iC,EAAQshE,EACrB,MAAOt9B,EAGf,QAAQ,GAEZ4wG,EAAUv6I,UAAUg7I,gBAAkB,WAClC,GAAI75I,GAAO0c,KAAKzV,OACZiR,EAAUwE,KAAK+yB,kBAGfssG,EAAUr/H,KAAKzV,OAAO8O,wBAAwBjW,OAASoY,EAAoB,aAAEpY,OAASoY,EAAgB,eAAEpY,OAAU,CACtH,IAAI4c,KAAKy9H,UAAYn6I,EAAKw4B,OAAQ,CAC9B,IAAK,GAAIr4B,GAAIuc,KAAK28H,YAAY5gG,UAAWt4C,EAAIH,EAAK4S,aAAa9S,OAAQK,IAAK,CACxE,GAAIH,EAAKw4B,OACL,MAEJ,IAAIh0B,GAAQkY,KAAKs/H,qBAAqBt/H,KAAK28H,YAAY5gG,UAAY,GAAG,GAAM,GACxEhuC,EAAMzK,EAAK4S,aAAapO,EAC5B,IAAIiG,EAAK,CACL,GAAgD,WAA5CiS,KAAKzV,OAAOiE,aAAauQ,eACzBiB,KAAKg5E,SAASqmD,EAAQtxI,EAAI1L,OAAO,OAEhC,CACD,GAAI6M,IAASpH,MAAO,EAAGvF,OAAQwL,EAC/BiS,MAAKzV,OAAOsoB,OjF1hBT,kBiF0hBsC3jB,GACzC8Q,KAAKg5E,SAAS9pF,EAAKpH,MAAOiG,EAAI1L,OAAO,GAEzC2d,KAAKi5E,YAGR31F,EAAKw4B,SACN9b,KAAKy9H,SAAU,KAI3Bf,EAAUv6I,UAAUu+I,eAAiB,WACjC,GAAIxxI,GAAO8Q,KAAK2gI,kBAChBzxI,GAAKtN,MAAQsN,EAAK0xI,cAClB5gI,KAAKyoD,gBAAgBv5D,EAAMA,EAAKupB,KAAKvvB,cAAegG,EAAK3M,QAAQ,GAAM2M,IAE3EwtI,EAAUv6I,UAAUw+I,iBAAmB,WACnC,GAAIr9I,GAAO0c,KAAKzV,MAChByV,MAAKzV,OAAOK,QAAQH,UAAU5I,OAAO,YACrC,IAAIU,GAASyd,KAAK28H,YAAYp6I,OAC1BuD,IACJA,GAAIvD,EAAOF,OAASK,GAAUH,EAAOF,MAAO2d,KAAK28H,YAAY56H,QAC7D,IAAI29G,GAAap8H,EAAKowD,WAAWg9E,qBAAqB1wH,KAAKijF,KAAMn9F,GAC7D+6I,EAAkB55I,YAAWy4H,EACjCA,GAAaz4H,YAAWy4H,EAAY1/G,KAAK28H,YAAY56H,QACrD,IAAIngB,GAAQc,GAAUH,EAAOF,MAAOw+I,EAC/Br+I,qBAAkBD,EAAOF,QAAWqY,cAAY9Y,IACjD0P,WAAS/O,EAAOF,MAAOT,EAAO89H,EAElC,IAAIxwH,IACAgkB,WAAY3wB,EAAOF,MACnBT,MAAOc,GAAUH,EAAOF,MAAOq9H,GAC/B39G,QAAS/B,KAAK28H,YAAY56H,QAC1Bxf,OAAQA,EACRq+I,cAAe5gI,KAAK28H,YAAY/6I,MAChC6P,aAAcuO,KAAK28H,YAAYlrI,aAC/Bw1B,QAAQ,EAMZ,OAJK13B,gBAAcyQ,KAAKzV,OAAO+iC,gBAC3Bp+B,EAAKupB,KAAOzY,KAAKijF,KAAK/5F,cACtBgG,EAAKunI,aAAel0I,GAEjB2M,GAEXwtI,EAAUv6I,UAAU82F,SAAW,SAAU6nD,GACrC,IAAI9gI,KAAK+8H,iBAAoB/8H,KAAKijF,KAAlC,CAGA,GAAI3/F,GAAO0c,KAAKzV,MAChB,IAAKu2I,GAAiBx9I,EAAKw4B,SAAU9b,KAAKs9H,kBAA1C,CAGAt9H,KAAK+8H,iBAAkB,CACvB,IAAI7tI,GAAO8Q,KAAK2gI,mBACZnhI,EAAKjQ,aAAapF,EAAa6V,KAAKijF,KAAM,SAAW/zF,EAAKupB,KAAKvvB,cAC/D6E,EAAMwB,aAAayQ,KAAK28H,YAAYp6I,OAAS2M,EAAK3M,MAClDgN,qBACOL,GAAK3M,OAEXu+I,EAKD9gI,KAAKyoD,gBAAgBv5D,EAAMsQ,EAAIzR,GAAKmB,IAJpC5L,EAAKq0B,QjFz+BK,WiFy+BoBzoB,EAAM8Q,KAAKyoD,gBAAgBv5D,EAAMsQ,EAAIzR,IACnEzK,EAAKuvB,OjFrtBM,kBiFqtBqByuC,QAASthD,KAAKijF,WAMtDy5C,EAAUv6I,UAAUsmE,gBAAkB,SAAUs4E,EAAcvhI,EAAIjd,EAAQy+I,GACtE,GAAIt4H,GAAQ1I,IACZ,OAAO,UAAU+gI,GACb,GAAIz9I,GAAOolB,EAAMne,MAIjB,IAHAw2I,EAAatoH,KAAOsoH,EAAatoH,KAAOsoH,EAAatoH,KAAO/P,EAAMu6E,KAAK/5F,cACvE63I,EAAatK,aAAesK,EAAatK,aAAesK,EAAatK,aAAel0I,EACpFw+I,EAAatK,aAAa3uI,MAAQtF,oBAAkBu+I,EAAatK,aAAa3uI,OAAS,EAAIi5I,EAAatK,aAAa3uI,MACjHi5I,EAAa95G,QAEb,GADAve,EAAMq0H,iBAAkB,EACpBr0H,EAAMo0H,SAAU,CAEhB,GADAp0H,EAAMo0H,UAAW,EACbp0H,EAAMi0H,YAAY1+H,WAAayK,EAAM5gB,OAAS4gB,EAAMi0H,YAAYp6I,OAAOF,QAAUqmB,EAAMrmB,MACvF,MAEJqmB,GAAMi3H,eAAej3H,EAAM5gB,MAAO4gB,EAAMrmB,MAAOqmB,EAAMwkC,YAP7D,CAkBA,GAPA5pD,EAAKowD,WAAW6nF,gBAAgBh5I,IAChCe,EAAKw4B,QAAS,EACdx4B,EAAKowD,WAAW8nF,cACZjsI,cAAchN,EAAO2D,WAAa66I,EAAatoH,KAAKvvB,cAAcuB,UAAUC,SAAS,kBACrF+iC,uBAAqBnqC,EAAKsH,QAAQJ,GAAKjI,EAAOoJ,IAAK,WAAYpJ,GAAQ,GAE3EmmB,EAAMne,OAAOsoB,OjFn2BG,sBiFo2BZtjB,cAAcjM,EAAK2L,mBAAqB9E,EAAa42I,EAAatoH,KAAM,oBACxEtuB,EAAa42I,EAAatoH,KAAM,qBAChC/P,EAAMozB,UAAUilG,EAAatoH,KAAMl2B,EAAQe,EAAKia,uBAAuBmL,EAAMi0H,YAAY1+H,UAAW8iI,EAAan/I,WAEhH,CACD,GAAIyb,GAASlT,EAAa42I,EAAatoH,KAAM,qBACtCtuB,EAAa42I,EAAatoH,KAAM,mBAAqBn1B,EAAKsnC,oBAAoBprB,EAAGkrB,aAAa,aAAa,GAC5GpnC,EAAKsnC,oBAAoBprB,EAAGkrB,aAAa,YAClB,gBAAzBpnC,EAAK+Y,kBAAqClS,EAAa42I,EAAatoH,KAAM,0BACvEtuB,EAAa42I,EAAatoH,KAAM,6BACnCpb,EAAS/Z,EAAKsnC,oBAAoBprB,EAAGkrB,aAAa,aAAa,GAAO,IAE1EhiB,EAAMozB,UAAUilG,EAAatoH,KAAMl2B,EAAQ8a,EAAQ0jI,EAAan/I,OAC5D8mB,EAAMne,OAAOkhB,UACbs1H,EAAatoH,KAAO/P,EAAM+3H,YAsClC,GAnCArvI,eAAaoO,IAAM,cAAe,eAClCpO,eAAa2vI,EAAatoH,OAAQ,oBAAqB,iBAClDj2B,oBAAkBu+I,EAAan/I,QAAUm/I,EAAan/I,MAAMqO,cAC3DzN,oBAAkBkmB,EAAMi0H,YAAY/6I,OAAmC,GAA1B8mB,EAAMi0H,YAAY/6I,OAAYqO,aAAeyY,EAAMs3H,WAC9Fx9I,oBAAkBu+I,EAAan/I,QAAUY,oBAAkBkmB,EAAMi0H,YAAY/6I,SAC5Em/I,EAAatoH,KAAKvvB,cAAcuB,UAAUC,SAAS,oBACxDq2I,EAAatoH,KAAKhuB,UAAU5I,OAAO,eAC/B0N,cAAcjM,EAAK2L,mBAAsBzM,oBAAkBu+I,EAAan/I,OAA8B,GAArBm/I,EAAan/I,OAAYqO,cACxGzN,oBAAkBkmB,EAAMi0H,YAAY/6I,OAAmC,GAA1B8mB,EAAMi0H,YAAY/6I,OAAYqO,aACzEyY,EAAMm0H,UAAU,GAAKzuG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAAMq2G,EAAatK,aAAa3uI,OAChG2C,UAAUC,SAAS,yBACnBge,EAAMk0H,aAAa,GAAKxuG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAAMq2G,EAAatK,aAAa3uI,OAC/F2C,UAAUqE,IAAI,wBAAyB,YAG3C4Z,EAAMk0H,aAAa,GAAKxuG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAAMq2G,EAAatK,aAAa3uI,OAC/F2C,UAAU5I,OAAO,wBAAyB,YAElD6mB,EAAMm0H,UAAU,GAAKzuG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAAMq2G,EAAatK,aAAa3uI,OAC3Fs2I,YAAY11H,EAAMk0H,aAAa,GAAKxuG,SAAS5uB,EAAGkrB,aAAa,iBAAkB,IAAMq2G,EACrFtK,aAAa3uI,UAGtBtF,oBAAkBw+I,IAClB19I,EAAKq0B,QjFhjCE,YiFgjCwBopH,GAEnCz9I,EAAKuvB,OAAOwyB,OACZ38B,EAAMs3H,WAAY,EACdt3H,EAAMne,OAAO8B,WAAWjJ,OAAS,IACjCslB,EAAMne,OAAOsoB,OjF98BM,8BiF+8BfnK,EAAMne,OAAO7F,cAAcvB,QAAQC,OAAS,IAAMslB,EAAM20H,SAAS30H,EAAMi0H,YAAY1+H,WACnFyK,EAAMne,OAAOsoB,OjFl9BJ,wBiFq9BjBnK,EAAMq0H,iBAAkB,EACpBr0H,EAAMo0H,SAAU,CAEhB,GADAp0H,EAAMo0H,UAAW,EACbp0H,EAAMi0H,YAAY1+H,WAAayK,EAAM5gB,OAAS4gB,EAAMi0H,YAAYp6I,OAAOF,QAAUqmB,EAAMrmB,MACvF,MAEJ,IAAI0L,GAAMzK,EAAKkU,iBAAiBkR,EAAMrmB,MAClC0L,IAAOA,EAAII,cACXua,EAAMi3H,eAAej3H,EAAM5gB,MAAO4gB,EAAMrmB,MAAOqmB,EAAMwkC,OAGzD8zF,GACA19I,EAAKuvB,OjFrxBK,uBiFyxBtB6pH,EAAUv6I,UAAU09I,eAAiB,SAAU/3I,GAC3C,GAAI1C,GAAM4a,KAAKzV,OAAOqgC,oBAAoB5qB,KAAKzV,OAAO8T,cAAcvW,GAAO4iC,aAAa,YACxF,OAAOtlC,GAAIoW,QAAUpW,EAAIoW,QAAUpW,EAAI9C,MAE3Co6I,EAAUv6I,UAAU6vE,eAAiB,SAAUhvE,GAC3C,IAAkB,QAAbA,EAAE6L,QAAiC,aAAb7L,EAAE6L,SAA0BmR,KAAKzV,OAAOuxB,OAAQ,CACvE,GAAIx4B,GAAO0c,KAAKzV,OACZiR,EAAUwE,KAAK+yB,kBAGfssG,EAAUr/H,KAAKzV,OAAO8O,wBAAwBjW,OAASoY,EAAoB,aAAEpY,OAASoY,EAAgB,eAAEpY,OAAU,EAClHo9I,EAAUr2I,EAAanH,EAAEtB,OAAQ,YACrC,IAAI8+I,EAAS,CACT,GAAI/nH,GAAO+nH,EAAQl6I,cAAc,WACjC,IAAImyB,EAAM,CACN,GAAIwoH,GAAiBjhI,KAAKzV,OAAOgQ,mBAE7B0mI,GAD2B,QAAbj+I,EAAE6L,OAAmBoyI,EAAe79I,OAAS,EAAI,GACnCf,QAAUo2B,EAAKiS,aAAa,MAAMr/B,MAAM2U,KAAKzV,OAAOK,QAAQJ,GAAGpH,UACvF4c,KAAK28H,YAAY1+H,WAAaohI,GAAuB,QAAbr8I,EAAE6L,OACD,QAArCvL,EAAKkL,aAAauQ,gBAClBzb,EAAKkL,aAAauQ,eAAiB,SACnCiB,KAAK84E,YACLx1F,EAAKkL,aAAauQ,eAAiB,OAGnCiB,KAAK84E,YAIT94E,KAAKi5E,gBAU7ByjD,EAAUv6I,UAAU++I,qBAAuB,WACnClhI,KAAKs9H,oBACLt9H,KAAKzV,OAAOsoB,OjFt7BC,mBiFu7Bb7S,KAAKzV,OAAOuxB,QAAS,EACrB9b,KAAKggI,WAAY,IAGlBtD,KC7sCPl9G,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAQnFqhH,GAA4B,SAAUn/G,GAEtC,QAASm/G,GAAW52I,EAAQyE,EAAgB+xC,GACxC,GAAIr4B,GAEJsZ,EAAO12B,KAAK0U,KAAMzV,EAAQyE,IAAmBgR,IAI7C,OAHA0I,GAAMne,OAASA,EACfme,EAAM1Z,eAAiBA,EACvB0Z,EAAMq4B,SAAWA,EACVr4B,EAwBX,MAhCA8W,IAAU2hH,EAAYn/G,GAUtBm/G,EAAWh/I,UAAU02F,UAAY,WAE7B72D,EAAO7/B,UAAU02F,UAAUvtF,KAAK0U,OAEpCmhI,EAAWh/I,UAAU22F,UAAY,SAAUx2F,EAAMwF,GAE7Ck6B,EAAO7/B,UAAU22F,UAAUxtF,KAAK0U,KAAM1d,EAAMwF,IAEhDq5I,EAAWh/I,UAAUs1B,QAAU,WAE3BuK,EAAO7/B,UAAUs1B,QAAQnsB,KAAK0U,OAElCmhI,EAAWh/I,UAAUg2D,UAAY,SAAUrwD,EAAOxF,GAC9C0/B,EAAO7/B,UAAUg2D,UAAU7sD,KAAK0U,KAAMlY,EAAOxF,IAEjD6+I,EAAWh/I,UAAUu2F,aAAe,SAAUC,EAAWr2F,GAErD0/B,EAAO7/B,UAAUu2F,aAAaptF,KAAK0U,KAAM24E,EAAWr2F,IAExD6+I,EAAWh/I,UAAUy2F,UAAY,SAAUp5E,GACvCwiB,EAAO7/B,UAAUy2F,UAAUttF,KAAK0U,KAAMR,IAEnC2hI,GACT5H,ItF7CE6H,GAAoC,WACpC,QAASA,GAAmB72I,GACxByV,KAAKzV,OAASA,EAgClB,MA9BA62I,GAAmBj/I,UAAU69B,OAAS,SAAU9wB,GAE5C,GAAIkjG,GAAmBzkG,EAAkBuB,EAAK3M,OAAOF,MACrD,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK4nG,EAC7Bv3F,KAAMu3F,EAAkBzuG,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAI9Ey1I,EAAmBj/I,UAAUuhH,KAAO,SAAU94G,GAC1C,MAAOA,GAAQumF,cAAc,GAAGvvF,OAEpCw/I,EAAmBj/I,UAAU8/G,MAAQ,SAAU/yG,GACd,mBAAzBA,EAAK3M,OAAOqnB,SACZ5J,KAAKla,IAAM,GAAIqxG,cAAWlwG,SAAO2a,GAAsB1S,EAAM8Q,KAAKzV,OAAOiE,aAAaC,KAAMuR,KAAKzV,OAAO2X,WAAYhT,EAAK3M,OAAO4mB,KAAKwB,SAEvG,uBAAzBzb,EAAK3M,OAAOqnB,WACjB5J,KAAKla,IAAM,GAAIsxG,kBAAenwG,SAAO2a,GAAsB1S,EAAM8Q,KAAKzV,OAAOiE,aAAaC,KAAMuR,KAAKzV,OAAO2X,WAAYhT,EAAK3M,OAAO4mB,KAAKwB,UAEzIpb,eACAyQ,KAAKla,IAAIkmD,OAAShsC,KAAKzV,OAAOyhD,QAElChsC,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3Bw2I,EAAmBj/I,UAAU0rB,QAAU,WAC/B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGVuzH,KuFrCPC,GAAkC,WAClC,QAASA,GAAiB92I,GACtByV,KAAKzV,OAASA,EAWlB,MATA82I,GAAiBl/I,UAAUuhH,KAAO,SAAU94G,EAAShJ,GACjD,MAAOA,IAEXy/I,EAAiBl/I,UAAU8/G,MAAQ,aAGnCo/B,EAAiBl/I,UAAU0rB,QAAU,aAG9BwzH,KCMP15D,GAAsB,WAKtB,QAASA,GAAKp9E,EAAQyE,GAClBgR,KAAK4J,UAAa+tH,OAAU8E,GAAY7E,OAAU6E,GAAY5E,MAAS6E,GAAW9wF,OAAUu1F,IAC5FnhI,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKghC,mBACLhhC,KAAKshI,gBACLthI,KAAKuhI,iBACLvhI,KAAKwhI,mBAw6BT,MAt6BA75D,GAAKxlF,UAAUs/I,iBAAmB,WAE9B,IAAK,GADDnvH,GAAOtS,KAAKzV,OAAO3C,YACdnE,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAC7B,GAAIuc,KAAKzV,OAAOiE,aAAatI,UAAYosB,EAAK7uB,GAAG+mB,aAAc,CAE3D8H,EAAK7uB,GAAG0lB,KAAOliB,SAAO,GAAI0gF,GAAK+5D,aAAwB,aAAE1hI,KAAKzV,QAAS+nB,EAAK7uB,GAAG0lB,cAG/EmJ,GAAK7uB,GAAG0lB,KAAOliB,SAAO,GAAI0gF,GAAK+5D,aAAapvH,EAAK7uB,GAAGmmB,UAAY+9D,EAAK+5D,aAAapvH,EAAK7uB,GAAGmmB,UACtF0I,EAAK7uB,GAAGmmB,SAAW,eAAe5J,KAAKzV,OAAQyV,KAAKhR,gBAAiBsjB,EAAK7uB,GAAG0lB,SAGzFnJ,MAAKzV,OAAOyoB,IAAI,2BAMpB20D,EAAKxlF,UAAUguB,cAAgB,WAC3B,MAAO,QAKXw3D,EAAKxlF,UAAUovE,kBAAoB,SAAUvuE,GACzC,GAAIA,EAAEwuC,SAAWxxB,KAAKmQ,gBAKtB,IAAK,GAFD7sB,GAAO0c,KAAKzV,OAEPsF,GADK7M,EAAEmI,WACF,GAAG4K,EAAKvO,OAAOC,KAAKzE,EAAEmI,YAAa0E,EAAKkG,EAAG3S,OAAQyM,IAE7D,OADWkG,EAAGlG,IAEV,IAAK,cACL,IAAK,gBACL,IAAK,gBACGvM,EAAKkL,aAAak3E,aAAepiF,EAAKkL,aAAaL,cAAgB7K,EAAKkL,aAAam3E,gBACrF3lE,KAAKgN,YAET,MACJ,KAAK,OACDhN,KAAKshI,gBACLh+I,EAAKw4B,QAAS,EACdx4B,EAAKo4B,YAKrBisD,EAAKxlF,UAAUm/I,cAAgB,WACvBthI,KAAK0zC,YACL1zC,KAAK0zC,WAAW7lC,UAEpB7N,KAAK+gC,SAAW,GAAI22F,IAAW13H,KAAKzV,OAAQyV,KAAKhR,gBACjDgR,KAAK0zC,WAAa,GAAI1zC,MAAK4J,SAAS5J,KAAKzV,OAAOiE,aAAaC,MAAMuR,KAAKzV,OAAQyV,KAAKhR,eAAgBgR,KAAK+gC,WAE9G4mC,EAAKxlF,UAAU6qB,WAAa,WACxBhN,KAAKyhI,oBAMT95D,EAAKxlF,UAAUy2F,UAAY,SAAUp5E,GACjC,GAAIlc,GAAO0c,KAAKzV,MAChB,IAAKjH,EAAKkL,aAAaL,eAAgB7K,EAAKw4B,QAAqC,UAA3Bx4B,EAAKkL,aAAaC,KAAxE,CAIA,GADAuR,KAAKzV,OAAOK,QAAQH,UAAUqE,IAAI,aAC7BxL,EAAKozF,kBAAkBtzF,OAMlBoc,IACNA,EAAKlc,EAAKozF,kBAAkB,QAN5B,KAAKl3E,EAED,WADAQ,MAAKmpF,WAAW,qBAAsBnpF,KAAK2hI,UAOnD3hI,MAAKwsD,UAAYhtD,EAAGvB,WAAa+B,KAAKzV,OAAOmO,aAAapS,cAAc,iBAAiB2X,SAChE,SAArBuB,EAAGnW,MAAMC,UAGb0W,KAAK0zC,WAAWklC,UAAUp5E,GACrBjQ,eACDyQ,KAAK4hI,iBACLt+I,EAAKsH,QAAQtE,cAAc,gBAAgB+C,MAAMC,QAAU,OAC3D0W,KAAKzV,OAAOsoB,OAAO,qBAM3B80D,EAAKxlF,UAAUgzI,aAAe,SAAU31H,EAAItQ,GACxC,GAAIimI,GAAen1H,KAAKwsD,SACG,UAAvBxsD,KAAKzV,OAAO+C,QAAiE,WAA5C0S,KAAKzV,OAAOiE,aAAauQ,gBAA+B7P,GACpE,QAArBA,EAAKkT,aAAyBpC,KAAKzV,OAAO+C,OAAS0S,KAAKzV,OAAOulD,kBAAkB1yB,aACjFr2B,WAASyY,EAAGpZ,iBAAiB,cAAe,kBAEvC+uI,GAAgB31H,GAAMA,EAAG/U,WAC9B1D,WAASyY,EAAGpZ,iBAAiB,cAAe,kBAMpDuhF,EAAKxlF,UAAU02F,UAAY,WACvB,GAAsC,UAAlC74E,KAAKzV,OAAOiE,aAAaC,MAAoBuR,KAAKzV,OAAOiE,aAAaG,mBACnEqR,KAAKzV,OAAOK,QAAQxE,iBAAiB,gBAAgBhD,OAExD,WADA4c,MAAKmpF,WAAW,aAAcnpF,KAAK7P,UAGvC6P,MAAKzV,OAAOK,QAAQH,UAAU5I,OAAO,aACrCme,KAAK0zC,WAAWmlC,YACXtpF,eACDyQ,KAAK4hI,iBACL5hI,KAAKzV,OAAOsoB,OAAO,mBAG3B80D,EAAKxlF,UAAUy/I,eAAiB,WAC5B5hI,KAAKzV,OAAOsoB,OAAOwyB,QAQvBsiC,EAAKxlF,UAAU22F,UAAY,SAAUx2F,EAAMwF,GACvC,GAAKkY,KAAKzV,OAAOiE,aAAak3E,YAA9B,CAGA,GAAIx2E,IAAS0pF,WAAW,EACnBt2F,IACD0d,KAAKzV,OAAOsoB,OpFkPiB,kCoFlP0B3jB,GAEvDA,EAAK0pF,YACL54E,KAAKzV,OAAOK,QAAQH,UAAUqE,IAAI,aAClCkR,KAAK0zC,WAAWolC,UAAUx2F,EAAMwF,GAC3ByH,eACDyQ,KAAK4hI,iBACL5hI,KAAKzV,OAAOsoB,OAAO,oBAU/B80D,EAAKxlF,UAAUu2F,aAAe,SAAUC,EAAWr2F,GAC/C,GAAIgB,GAAO0c,KAAKzV,MAChB,IAAKjH,EAAKkL,aAAam3E,cAGvB,MAAKrjF,IACIgB,EAAKy+C,qBAAqB3+C,SAAUZ,oBAAkBc,EAAKw+C,iBAKhEx+C,EAAKkL,aAAaqzI,4BAClB7hI,MAAKmpF,WAAW,gBAAiBnpF,KAAK7P,eAG1C6P,MAAK0zC,WAAWglC,aAAaC,EAAWr2F,OARhC0d,MAAKmpF,WAAW,uBAAwBnpF,KAAK2hI,YAczDh6D,EAAKxlF,UAAU42F,UAAY,SAAUv5E,GACjCQ,KAAK0+H,aAAel/H,EAAGkrB,aAAa,WACpC,IAAIrtB,GAAS2C,KAAKzV,OAAOqgC,oBAAoB5qB,KAAK0+H,aAC7Cl8I,qBAAkB6a,IACnB2C,KAAK04E,aAAa,KAAMr7E,EAAO/a,OAMvCqlF,EAAKxlF,UAAUs1B,QAAU,WACrB,GAAsC,UAAlCzX,KAAKzV,OAAOiE,aAAaC,MAAoBuR,KAAKzV,OAAOiE,aAAaG,oBACrEnM,oBAAkBwd,KAAKshD,UAAYthD,KAAKshD,QAAQC,cACjDvhD,KAAKzV,OAAOmpD,WAAWulC,WACvBj5E,KAAKzV,OAAOsoB,OpF0HK,sBoFzHbrwB,oBAAkBwd,KAAKshD,UAAYthD,KAAKshD,QAAQC,YAEhD,WADAvhD,MAAKmpF,WAAW,mBAAoBnpF,KAAK7P,UAIjD6P,MAAK8hI,cAQTn6D,EAAKxlF,UAAUstE,WAAa,SAAUxxD,EAAU5b,EAAOT,GACnDoe,KAAK0zC,WAAW+b,WAAWxxD,EAAU5b,EAAOT,IAOhD+lF,EAAKxlF,UAAUg2D,UAAY,SAAUrwD,EAAOxF,GACxC0d,KAAK0zC,WAAWyE,UAAUrwD,EAAOxF,IAKrCqlF,EAAKxlF,UAAU+6I,YAAc,WACzBl9H,KAAK64E,aAKTlR,EAAKxlF,UAAUg8I,UAAY,WACvBn+H,KAAKyX,WAOTkwD,EAAKxlF,UAAU62F,SAAW,SAAUlxF,EAAOzF,GACvC2d,KAAK0zC,WAAWslC,SAASlxF,EAAOzF,IAMpCslF,EAAKxlF,UAAU87F,iBAAmB,WAC9B,QAAIj+E,KAAKshD,SACEthD,KAAKshD,QAAQC,YAQ5BomB,EAAKxlF,UAAU4wC,gBAAkB,WAC7B,MAAO/yB,MAAK0zC,WAAW3gB,gBAAkB/yB,KAAK0zC,WAAW3gB,sBAK7D40C,EAAKxlF,UAAU4/I,uBAAyB,WACpC,GAAIj8I,GAAMka,KAAK0wH,qBAAqB1wH,KAAKshD,QAAQ12D,WACjD,OAAO9E,GAAI0B,OAAOC,KAAK3B,GAAK,KAKhC6hF,EAAKxlF,UAAU82F,SAAW,WACtBj5E,KAAK0zC,WAAWulC,YAEpBtR,EAAKxlF,UAAU2/I,WAAa,WACxB9hI,KAAKzV,OAAOK,QAAQH,UAAU5I,OAAO,aACrCme,KAAK0zC,WAAWj8B,UAChBzX,KAAK4hI,kBAETj6D,EAAKxlF,UAAUgnG,WAAa,SAAUrjF,EAAShgB,GAC3CA,EAAIggB,QAAU,QAAU9F,KAAK8gC,KAAKvE,YAAYz2B,GAAW,SACzDhgB,EAAIi/C,WACJj/C,EAAImlD,QAER08B,EAAKxlF,UAAU6/I,iBAAmB,SAAUj0I,EAAKnM,GAC7C,GAAI2C,GAAM3C,CACV,QAAQmM,EAAIpK,MACR,IAAK,SACDY,EAAO62C,MAAMtjC,WAAWlW,IAA8B,KAApBkW,WAAWlW,EAC7C,MACJ,KAAK,UACoB,gBAAjBmM,EAAI6b,WACJrlB,EAAM3C,IAAUoe,KAAK8gC,KAAKvE,YAAY,UAAqB,IAAV36C,EAErD,MACJ,KAAK,OACL,IAAK,WACoB,mBAAjBmM,EAAI6b,UAAkD,uBAAjB7b,EAAI6b,UACtChoB,GAASA,EAAMwB,OAClBmB,EAAM,GAAI4O,MAAKvR,GAEA,KAAVA,IACL2C,EAAM,MAIlB,MAAOA,IAEXojF,EAAKxlF,UAAU8/I,eAAiB,WAE5B,IAAK,GAAIpyI,GAAK,EAAGssC,KADC9wC,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQxE,iBAAiB,iBAC1ByJ,EAAKssC,EAAW/4C,OAAQyM,IAAM,CAClE,GAAIzF,GAAO+xC,EAAWtsC,EACtBhO,UAAOuI,GAEX4V,KAAKzV,OAAOmO,aAAaC,kBAAkBtP,MAAMJ,SAAW,YAEhE0+E,EAAKxlF,UAAUq/I,iBAAmB,WAC9BxhI,KAAK7P,UAAY6P,KAAKkiI,YAEdt0H,MAAO5N,KAAKmiI,MAAM9uH,KAAKrT,MACvBspF,aAAexjF,QAAS9F,KAAK8gC,KAAKvE,YAAY,YAAatf,SAAU,YAAassE,WAAW,KAG7F37E,MAAO5N,KAAKoiI,UAAU/uH,KAAKrT,MAC3BspF,aAAersE,SAAU,SAAUnX,QAAS9F,KAAK8gC,KAAKvE,YAAY,mBAEvE,gBAEPorC,EAAKxlF,UAAUo/I,eAAiB,WAC5BvhI,KAAK2hI,UAAY3hI,KAAKkiI,YAEdt0H,MAAO5N,KAAKqiI,WAAWhvH,KAAKrT,MAAOspF,aAAexjF,QAAS9F,KAAK8gC,KAAKvE,YAAY,YAAatf,SAAU,SAAUssE,WAAW,KAElI,cAEP5hB,EAAKxlF,UAAUkgJ,WAAa,WACxBriI,KAAK2hI,UAAU9oE,QAEnB8O,EAAKxlF,UAAU+/I,UAAY,SAAUI,EAAYznI,GAC7C,GAAI3J,GAAM8O,KAAKzV,OAAOkC,cAAc,OAASjC,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAKqQ,GAC1EmF,MAAKzV,OAAOK,QAAQkB,YAAYoF,EAChC,IAAIuX,IACAqjC,eAAe,EACfD,SAAS,EACTljD,SAAS,EACTojD,eAAe,EACfrqD,OAAQse,KAAKzV,OAAOK,QACpBlC,MAAO,QACP8jD,mBAAqBC,OAAQ,QAEjChkC,GAAQ2hC,QAAUk4F,CAClB,IAAIx8I,GAAM,GAAI8lD,UAAOnjC,EAIrB,OAFA3iB,GAAoB,kBAAI,EACxBA,EAAI20C,SAASvpC,GACNpL,GAEX6hF,EAAKxlF,UAAUigJ,UAAY,WACvBpiI,KAAKzV,OAAOszD,YAAYhI,iBACxB71C,KAAKzV,OAAOszD,YAAYrE,eACxBx5C,KAAK7P,UAAU0oE,QAEnB8O,EAAKxlF,UAAUggJ,MAAQ,SAAUn/I,GAC7B,OAAQgd,KAAK7P,UAAUvF,QAAQtE,cAAc,kBAAkBqS,kBAAkBm7B,WAC7E,IAAK9zB,MAAK8gC,KAAKvE,YAAY,iBACvBv8B,KAAK0zC,WAAWglC,cAChB,MACJ,KAAK14E,MAAK8gC,KAAKvE,YAAY,cACvBv8B,KAAK0zC,WAAWmlC,WAChB,MACJ,KAAK74E,MAAK8gC,KAAKvE,YAAY,oBACvBv8B,KAAK8hI,YACL,MACJ,KAAK9hI,MAAK8gC,KAAKvE,YAAY,wBACe,UAAlCv8B,KAAKzV,OAAOiE,aAAaC,OACzBuR,KAAK0zC,WAAWwtF,uBACZ3xI,cAAcyQ,KAAKzV,OAAO0E,kBAC1B+Q,KAAK0zC,WAAWmlC,aAGxB74E,KAAKuiI,gBAGbviI,KAAKoiI,aAKTz6D,EAAKxlF,UAAU6+C,iBAAmB,WAC1BhhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGkhD,GAA4BtxD,KAAKuxD,kBAAmBvxD,MACnEA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKgN,WAAYhN,MACnDA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKk9E,gBAAiBl9E,MACxDA,KAAKzV,OAAO6lB,GAAGa,GAAgBjR,KAAKyhI,iBAAkBzhI,MACtDA,KAAKzV,OAAO6lB,GpF3KQ,kBoF2KkBpQ,KAAKiiI,eAAgBjiI,MAC3DA,KAAKzV,OAAO6lB,GAAGioD,GAAqBr4D,KAAKyO,aAAczO,MACvDA,KAAKzV,OAAO6lB,GpFnJK,eoFmJkBpQ,KAAKw7H,YAAax7H,MACrDA,KAAKyxD,oBAAsBzxD,KAAK4gD,cAAcvtC,KAAKrT,MACnDA,KAAK0xD,uBAAyB1xD,KAAKsM,eAAe+G,KAAKrT,MACvDA,KAAKzV,OAAOy2C,iBAAiBa,GAAoB7hC,KAAKyxD,qBACtDzxD,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAK0xD,0BAK7DiW,EAAKxlF,UAAU8rD,oBAAsB,WAC7BjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAIy5C,GAA4BtxD,KAAKuxD,mBACjDvxD,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKgN,YACxChN,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKk9E,iBACxCl9E,KAAKzV,OAAOstB,IAAI5G,GAAgBjR,KAAKyhI,kBACrCzhI,KAAKzV,OAAOstB,IpF9LQ,kBoF8LmB7X,KAAKiiI,gBAC5CjiI,KAAKzV,OAAOstB,IAAIwgD,GAAqBr4D,KAAKyO,cAC1CzO,KAAKzV,OAAOstB,IpFtKK,eoFsKmB7X,KAAKw7H,aACzCx7H,KAAKzV,OAAO0jD,oBAAoB/mB,GAAuBlnB,KAAK0xD,wBAC5D1xD,KAAKzV,OAAO0jD,oBAAoBpM,GAAoB7hC,KAAKyxD,uBAE7DkW,EAAKxlF,UAAUmqB,eAAiB,SAAUtpB,IACvB,MAAO,YAAa,OAAQ,SAAU,UACzC0E,QAAQ1E,EAAEof,aAAe,IACjCpC,KAAKzV,OAAOuxB,QAAS,GAEH,cAAlB94B,EAAEof,aACFpC,KAAKzV,OAAOszD,YAAYrE,eAE5Bx5C,KAAK4hI,kBAKTj6D,EAAKxlF,UAAUuuI,qBAAuB,SAAUztC,EAAMy8B,GAClD,GAAIp8H,GAAO0c,KAAKzV,MAChB,IAAIjH,EAAKkL,aAAatI,SAAU,CAE5B,IAAK,GADD2E,MAAcQ,MAAMC,KAAK23F,EAAKp4F,UACzBmR,EAAI,EAAGA,EAAInR,EAASzH,OAAQ4Y,IACjC,GAAKnR,EAASmR,GAAG2mD,aAAa,SAAsC,mBAA1B93D,EAASmR,GAAGlT,WAClD+B,EAASmR,GAAGvR,UAAUC,SAAS,iBAAkB,CACjD,GAAIrI,GAA6CwL,EAApChD,EAASmR,GAAG2mD,aAAa,QAA6B93D,EAASmR,GAAG0uB,aAAa,QACtE7/B,EAASmR,GAAG0uB,aAAa,OAC3CnoC,EAASe,EAAKkU,iBAAiBnV,KAAYA,MAAOA,EAAOsB,KAAMkH,EAASmR,GAAG0uB,aAAa,SACxF9oC,MAAQ,EACQ,cAAhBW,EAAOoB,MAAuC,YAAhBpB,EAAOoB,KACrC/B,EAAQiJ,EAASmR,GAAGjL,QAEflG,EAASmR,GAAGpa,OACjBA,EAAQiJ,EAASmR,GAAGpa,MAChBiJ,EAASmR,GAAGm1E,eACZtmF,EAASmR,GAAGm1E,cAAc/tF,SACzBZ,oBAAkBqI,EAASmR,GAAGm1E,cAAc,GAAGvvF,SAChDiJ,EAASmR,GAAGuiE,OACZ38E,EAAQiJ,EAASmR,GAAGm1E,cAAc,GAAGvvF,MAChB,SAAhBW,EAAOoB,MAAmC,aAAhBpB,EAAOoB,MAAuC,aAAhBpB,EAAOoB,OAC/DkH,EAASmR,GAAGm1E,cAAc,GAAoB,mBAC/CvvF,EAAQiJ,EAASmR,GAAGpa,SAIvBiJ,EAASmR,GAAGm1E,gBACjBvvF,EAAQiJ,EAASmR,GAAGm1E,cAAc,GAAGvvF,OAErCW,EAAO4mB,MAAoC,gBAArB5mB,GAAO4mB,KAAKu6F,KAClC9hH,EAAQ4G,WAASjG,EAAO4mB,KAAKu6F,KAAMj7G,QAAQoC,EAASmR,GAAIpa,GAEnDW,EAAO4mB,MAAQ5mB,EAAO4mB,KAAKu6F,OAChC9hH,EAAQW,EAAO4mB,KAAKu6F,KAAK74G,EAASmR,GAAIpa,IAE1CA,EAAQ0B,EAAKowD,WAAWsuF,iBAAiBz/I,EAAQX,GACxB,UAArBiJ,EAASmR,GAAGrY,KACRkH,EAASmR,GAAGjL,SACZtO,WAAS6O,SAAS/O,EAAOF,MAAOT,EAAO89H,GAI3Cj9H,WAAS6O,SAAS/O,EAAOF,MAAOT,EAAO89H,GAInD,MAAOA,GAGX,IAAK,GADD3xH,GAAMzK,EAAKsE,YAAY0R,OAAO,SAAUvL,GAAO,MAAOA,GAAIyc,eACrD9mB,EAAI,EAAGA,EAAIqK,EAAI3K,OAAQM,IAC5B,GAAIu/F,EAAKt1F,EAAkBI,EAAIrK,GAAGrB,QAAS,CACvC,GAAImgJ,MAAmBn3I,MAAMC,KAAK23F,EAAKt1F,EAAkBI,EAAIrK,GAAGrB,SAE5D6J,GADJs2I,EAAgBA,EAAcp/I,OAASo/I,GAAiBv/C,EAAKt1F,EAAkBI,EAAIrK,GAAGrB,UAC7DiX,OAAO,SAAUtW,GACtC,OAAQR,oBAAmBQ,kBAEX,KAAhBkJ,EAAK9I,SACL8I,EAAOs2I,EAAclpI,OAAO,SAAUtW,GAAK,MAAOA,GAAE2/D,aAAa,UAErE,KAAS3mD,EAAI,EAAGA,EAAI9P,EAAK9I,OAAQ4Y,IAAK,CAC9Bpa,EAAQoe,KAAKxX,SAASuF,EAAIrK,GAAIwI,EAAK8P,GAAI0jH,EAC3Cj9H,YAAS6O,SAASvD,EAAIrK,GAAGrB,MAAOT,EAAO89H,IAKnD,IAAK,GADD+iB,MAAYp3I,MAAMC,KAAK23F,EAAK78F,iBAAiB,aACxC3C,EAAI,EAAGsB,EAAM09I,EAAOr/I,OAAQK,EAAIsB,EAAKtB,IAAK,CAC/C,GAAIi/I,GAAQp/I,EAAKywC,eAAe0uG,EAAOh/I,GAAGinC,aAAa,gBACvD,IAAIg4G,GAASA,EAAMrgJ,MAAO,CAClBT,EAAQoe,KAAKxX,SAASk6I,EAAOD,EAAOh/I,GAAIi8H,EAC5Cj9H,YAAS6O,SAASoxI,EAAMrgJ,MAAOT,EAAO89H,IAG9C,MAAOA,IAEX/3C,EAAKxlF,UAAUqG,SAAW,SAAUuF,EAAK8C,EAAO6uH,GAC5C,GAAI99H,IAAQiP,EAAMsgF,eACZ5hF,cAAcsB,EAAMsgF,cAAc,GAAGliF,mBAClB,SAAblB,EAAIpK,MAAgC,aAAboK,EAAIpK,MACJkN,EAAMjP,MAArCiP,EAAMsgF,cAAc,GAAGvvF,MACvB0B,EAAO0c,KAAKzV,OACZ2B,EAAO6B,EAAIob,KAAKu6F,IAcpB,OAbiB,aAAb31G,EAAIpK,MAAoC,YAAboK,EAAIpK,OAC/B/B,EAAQiP,EAAME,SAEE,gBAAT7E,IACPA,EAAO1D,WAAS0D,EAAMzD,QACtB7G,EAAQ0B,EAAKowD,WAAWsuF,iBAAiBj0I,EAAK,EAAO8C,EAAOjP,KAG5DA,EAAQ0B,EAAKowD,WAAWsuF,iBAAiBj0I,EAAKA,EAAIob,KAAKu6F,KAAK7yG,EAAOjP,IAEnEY,oBAAkBk9H,EAAW3xH,EAAI1L,SAAqB,KAAVT,IAC5CA,EAAQ89H,EAAW3xH,EAAI1L,QAEpBT,GAKX+lF,EAAKxlF,UAAUy+D,cAAgB,SAAU59D,GACrC,GAAsB,gBAAlBA,EAAEof,aAAiCpC,KAAKzV,OAAOuxB,QACV,UAAlC9b,KAAKzV,OAAOiE,aAAaC,KAC5BuR,KAAK64E,gBAEJ,CACD,GAAIggD,GAAU74H,KAAKzV,OAAOK,QAAQtE,cAAc,eAChD,IAAIuyI,GAAW74H,KAAKzV,OAAOuU,YAAgC,kBAAlB9b,EAAEof,aACpCgsB,SAASjkC,EAAa0uI,EAAS,SAASnuG,aAAa,iBAAkB,IAAM1qB,KAAKzV,OAAOuU,WAC5F,MAEJ,IAAI6jI,IAA0B,kBAAmB,mBAAoB,sBAAuB,OAAQ,iBAC9D,WAAlC3iI,KAAKzV,OAAOiE,aAAaC,OAAoBuR,KAAKshD,SAAYthD,KAAKshD,QAAQpxC,cACrB,IAAnDyyH,EAAuBj7I,QAAQ1E,EAAEof,cAAwBpf,EAAEikC,SAC9DjnB,KAAKu7H,iBACLv7H,KAAKw7H,iBAOjB7zD,EAAKxlF,UAAUo5I,eAAiB,SAAUjpH,GAC3BtS,KAAKzV,OACPiE,aAAatI,WAClB8Z,KAAKzV,OAAOghC,iBAAiB,yBACzBvrB,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOihC,oBAGpBlZ,EAAOA,GAActS,KAAKzV,OAAOgQ,qBACxB5H,KAAK,SAAUpQ,GAAU,OAAQC,oBAAkBD,EAAOioB,kBAC/DxK,KAAKzV,OAAOghC,iBAAiB,iBACzBvrB,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOihC,kBAGpB,KAAK,GAAI37B,GAAK,EAAGmkH,EAAS1hG,EAAMziB,EAAKmkH,EAAO5wH,OAAQyM,IAAM,CACtD,GAAI9B,GAAMimH,EAAOnkH,GACb3D,EAAO6B,EAAIob,KAAK0E,OAChBte,eAAcxB,EAAIyc,eAClBm4B,sBAAoB3iC,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAM,eAAgB,gBACvE8hC,uBAAqBztB,KAAKzV,OAAOK,QAAQJ,GAAKuD,EAAIpC,IAAM,eAAgB,eAAgBoC,GAAK,IAE7FA,EAAIob,KAAK0E,UACW,gBAAT3hB,IACPA,EAAO1D,WAAS0D,EAAMzD,WAItBsF,EAAIob,KAAK0E,WAKrB,IAAK,GADDhjB,MAAcQ,MAAMC,KAAK0U,KAAKshD,QAAQ12D,QAAQC,UACzCpH,EAAI,EAAGA,EAAIoH,EAASzH,OAAQK,IAC7BoH,EAASpH,GAAGk/D,aAAa,SACrB93D,EAASpH,GAAG0tF,eACZtmF,EAASpH,GAAG0tF,cAAc/tF,SACzByH,EAASpH,GAAG0tF,cAAc,GAAGjhE,aAC9BrlB,EAASpH,GAAG0tF,cAAc,GAAGtjE,WAQ7C85D,EAAKxlF,UAAUq5I,YAAc,WACzBx7H,KAAKiiI,iBACDjiI,KAAKshD,UAAYthD,KAAKshD,QAAQpxC,aAC9BlQ,KAAKshD,QAAQzzC,UAEjB7N,KAAKiiI,kBAOTt6D,EAAKxlF,UAAU0rB,QAAU,WACrB,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OAC9B,IAAKq2D,EAAL,CAGA,GAAI6uB,MAAe7uB,EAAY36D,cAAc,mBACzC26D,EAAY36D,cAAc,kBAC1BwpF,IACA9vE,KAAKw7H,cAETx7H,KAAKiuC,qBACL,IAAI7jD,GAAO4V,KAAK7P,UAAUvF,OACtBR,GAAK+J,kBAAoB,IACzB6L,KAAK7P,UAAU0d,UACfhsB,SAAOuI,KAEXA,EAAO4V,KAAK2hI,UAAU/2I,SACbuJ,kBAAoB,IACzB6L,KAAK2hI,UAAU9zH,UACfhsB,SAAOuI,IAEN0lF,GAGD9vE,KAAK0zC,YACL1zC,KAAK0zC,WAAW7lC,YAGxB85D,EAAKxlF,UAAU+6F,gBAAkB,SAAUl6F,GACvC,OAAQA,EAAE6L,QACN,IAAK,SACDmR,KAAK84E,WACL,MACJ,KAAK,SACyB,UAArB91F,EAAEtB,OAAOgrC,UAAuB1pC,EAAEtB,OAAO+I,UAAUC,SAAS,kBACzDvE,SAASG,cAAc,kBAC3B0Z,KAAK04E,cAET,MACJ,KAAK,KACD14E,KAAK44E,WACL,MACJ,KAAK,QACIzuF,EAAanH,EAAEtB,OAAQ,qBAAyD,UAAlCse,KAAKzV,OAAOiE,aAAaC,QACvEtE,EAAanH,EAAEtB,OAAQ,kBAAqBse,KAAKzV,OAAOuU,YAClD3U,EAAanH,EAAEtB,OAAQ,qBAC1ByE,SAASC,iBAAiB,iBAAiBhD,SAC/CJ,EAAE8yD,iBACF91C,KAAKyX,UAET,MACJ,KAAK,SACGzX,KAAKzV,OAAOuxB,SAC0B,UAAlC9b,KAAKzV,OAAOiE,aAAaC,KACzBuR,KAAK0zC,WAAWgtF,iBAGhB1gI,KAAK64E,eAMzBlR,EAAKxlF,UAAUssB,aAAe,SAAUvf,GACpC8Q,KAAK4iI,WAAa1zI,EAClB8Q,KAAKmpF,WAAW,uBAAwBnpF,KAAK7P,YAEjDw3E,EAAKxlF,UAAUogJ,cAAgB,WAC3BviI,KAAK4iI,WAAWnjG,QAAQn0C,KAAK0U,KAAK4iI,WAAWlgI,SAAU1C,KAAK4iI,WAAWtqE,KAAMt4D,KAAK4iI,WAAW/3C,KAAM7qF,KAAK4iI,WAAW93C,KAAM9qF,KAAK4iI,WAAW73C,KAAM/qF,KAAK4iI,WAAW53C,KAAMhrF,KAAK4iI,WAAW33C,KAAMjrF,KAAK4iI,WAAWvuC,KAAMr0F,KAAK4iI,WAAWtuC,OAKrO3sB,EAAKxlF,UAAUi4I,oBAAsB,SAAU9nH,GAC3C,GAAIhvB,GAAO0c,KAAKzV,OACZwJ,EAAUzQ,EAAKuS,eACfiM,EAA6C,WAAlC9B,KAAKzV,OAAOiE,aAAaC,KACpC4S,EAAsC,UAAhCrB,KAAKzV,OAAO8R,iBAA+ByF,EAAW,EAAI,EAChEmhF,EAAyC,WAAlCjjF,KAAKzV,OAAOiE,aAAaC,KAChCnL,EAAKsH,QAAQxE,iBAAiB,eAAeib,GAC7C9S,SAAO,IAAMjL,EAAKsH,QAAQJ,GAAK,kCAAmCrE,UAClE2B,EAAwC,UAAhCkY,KAAKzV,OAAO8R,iBAA+ByF,EAAW,EAAI,EAClE+gI,EAAQv/I,EAAKsH,QAAQxE,iBAAiB,eAAe0B,GACrD0W,KACAC,KACAC,IACJ4T,GAAOA,GAAchvB,EAAK4S,YAC1B,KAAK,GAAIzS,GAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IACxB6uB,EAAK7uB,GAAGkF,UAGT4G,cAAc+iB,EAAK7uB,GAAG+mB,cAGtB8H,EAAK7uB,GAAGkb,iBACRJ,GAAmB+T,EAAK7uB,GAAIqE,EAAO0W,EAAOC,EAAQC,EAAS4T,EAAKlvB,QAGxE,IAAI2Q,GAA6C,WAAlCiM,KAAKzV,OAAOiE,aAAaC,MAEpC,GADAuR,KAAKzV,OAAOmpD,WAAW8mF,SAAWx6H,KAAK8iI,cAAcD,EAAOpkI,GACxB,eAAhCuB,KAAKzV,OAAO8R,gBAAkC,CAC9C,GAAI47H,GAAS30I,EAAKsH,QAAQxE,iBAAiB,eAAe,EAC1D4Z,MAAKzV,OAAOmpD,WAAWgnF,UAAY16H,KAAK8iI,cAAc7K,EAAQv5H,QAIlEF,GAAQvX,SAAOuX,EAAOC,EAAQC,EAE9BnP,eAAcyQ,KAAKzV,OAAOiE,aAAatI,SACvC8Z,KAAKzV,OAAOmpD,WAAW4N,QAAUthD,KAAK8iI,cAAc7/C,MAGpDjjF,KAAKzV,OAAOmpD,WAAW4N,QAAUthD,KAAK8iI,cAAc7/C,EAAMzkF,IAGlEmpE,EAAKxlF,UAAU2gJ,cAAgB,SAAU7/C,EAAMzkF,GAC3C,GAAIkK,GAAQ1I,IACZ,OAAO,IAAI+iI,iBAAc9/C,GACrBzkF,MAAOA,EACPwtC,OAAQhsC,KAAKzV,OAAOyhD,OACpBg3F,mBAAoB,SAAU9zI,GAC1BwZ,EAAMs6H,mBAAmB9zI,IAE7B+zI,gBAAiB,SAAUC,EAAchjI,GACrC,GAAIvU,GAAMu3I,EAAax4G,aAAa,gBAChCx7B,GACA3M,OAAQmmB,EAAMne,OAAOwpC,eAAepoC,GACpCuU,MAAOA,EACPgjI,aAAcA,EACdthJ,MAAOshJ,EAAathJ,MAExB8mB,GAAMy6H,kBAAkBD,EAAchjI,GACtCwI,EAAMne,OAAOsoB,OpFlYG,8BoFkY+B3jB,OAI3Dy4E,EAAKxlF,UAAUghJ,kBAAoB,SAAUD,EAAchjI,GACvD,GAAIF,KAAKzV,OAAOuxB,OAAQ,CACpB,GAAItxB,GAAK0V,EAAMwqB,aAAa,OACxBtgC,EAAO4V,KAAKojI,aAAaF,GAAc58I,cAAc,IAAMkE,EAAK,SAC/DJ,GAIDA,EAAK9D,cAAc,kBAAkBC,UAAY2Z,EAAMmjI,UAHvDrjI,KAAK67E,cAAcqnD,EAAchjI,EAAO1V,EAAI,MAOxDm9E,EAAKxlF,UAAUihJ,aAAe,SAAUF,GACpC,GAAII,EAKJ,OAJsC,WAAlCtjI,KAAKzV,OAAOiE,aAAaC,OACzB60I,EAAUtjI,KAAKzV,OAAOuU,YAAckB,KAAKzV,OAAOuU,YACzCsvB,SAAS/1B,UAAQ6qI,EAAc,UAAUx4G,aAAa,iBAAkB,KAAO,IAEjD,WAAlC1qB,KAAKzV,OAAOiE,aAAaC,KAAoB60I,EAAStjI,KAAKzV,OAAO2+B,iBAAmBlpB,KAAKzV,OAAOulD,kBACpGvhD,SAAO,IAAMyR,KAAKzV,OAAOK,QAAQJ,GAAK,sBAAuBrE,WAErEwhF,EAAKxlF,UAAUohJ,kBAAoB,SAAUn5I,EAAM8E,GAC/C,GAAIuS,GAAKtX,EAAa+E,EAAKtE,QAAS,YACpC,IAAI6W,EAAI,CACJ,GAAI+hI,GAAU/hI,EAAGtY,wBAAwBc,MACrCw5I,EAAYr5I,EAAKjB,wBAAwBc,KAC7C,IAAIw5I,EAAYD,EAAS,CACrB,GAAIE,GAASD,EAAYD,CACzBp5I,GAAKf,MAAMM,KAAQS,EAAKqhE,WAAai4E,EAAU,QAI3D/7D,EAAKxlF,UAAU6gJ,mBAAqB,SAAU9zI,GAC1C,GAAI8Q,KAAKzV,OAAOuxB,OAAQ,CACpB,GAAI1xB,GAAO4V,KAAKojI,aAAal0I,EAAKtE,SAAStE,cAAc,IAAM4I,EAAKy0I,UAAY,SAC5Ev5I,KACoB,YAAhB8E,EAAK2uE,QACLzzE,EAAKf,MAAMC,QAAU,GACrB0W,KAAKujI,kBAAkBn5I,EAAM8E,IAG7B9E,EAAKf,MAAMC,QAAU,UAMrCq+E,EAAKxlF,UAAU05F,cAAgB,SAAUjxF,EAASsV,EAAOrF,EAAMvR,GAC3D,GAAI/G,GAASyd,KAAKzV,OAAOiN,iBAAiBqD,GACtCymD,EAA0C,eAAhCthD,KAAKzV,OAAO8R,iBAAsE,WAAlC2D,KAAKzV,OAAOiE,aAAaC,MAChD,iBAAhClM,EAAO2b,qBAA0C8B,KAAK06H,UAAU9vI,QAAUoV,KAAKshD,QAAQ12D,QAC1Fg5I,EAAW5jI,KAAKzV,OAAOmO,aAAaC,kBACpC5E,EAAUiM,KAAKzV,OAAOuL,oBAAsBkK,KAAKzV,OAAO0lC,6BACrDjwB,KAAKzV,OAAOsS,4BACf9I,KACA6vI,EAAW5jI,KAAKzV,OAAO67B,2BAE3B,IAKIk9G,GAEAO,EAPAC,EAAWF,EAASxmH,aAAewmH,EAAS1qF,cAAgB0qF,EAASr3I,YAAcq3I,EAASh3I,YAC5FkV,EAA6C,WAAlC9B,KAAKzV,OAAOiE,aAAaC,KACpCgT,EAAKpJ,UAAQzN,EAAS,cACtBxF,EAAMiT,UAAQzN,EAAS,UACvBi/B,EAAQ7pB,KAAKzV,OAAOmO,aAAapS,cAAc,oBAE/Cy9I,GAAgB,EAEhBC,GAAqB,EACrBC,EAAmB72I,KAAK2+B,MAAM/rB,KAAKzV,OAAOmO,aAAawgD,aAAel5C,KAAKzV,OAAOuC,gBAAkB,EACpGkO,EAAQ6uB,KACHx+B,MAAMC,KAAK0U,KAAKzV,OAAO+7B,0BAA0BlgC,iBAAiB,cADpDiF,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,UAQ5E,IANsC,UAAlC4Z,KAAKzV,OAAOiE,aAAaC,MACrBw1I,EAAmB,GAAKjpI,EAAK5X,QAAU6gJ,GACpCjpI,EAAKA,EAAK5X,OAAS,GAAGsnC,aAAa,mBAAqBtlC,EAAIslC,aAAa,mBAC5Es5G,GAAqB,GAGzBliI,EAAU,CACV,GAAI9B,KAAKzV,OAAOuU,WAAY,CACxB,GAAIolI,GAAenwI,EAAUiM,KAAKzV,OAAO0b,yBAAyB3f,cAAc,SAASuF,SACnFmU,KAAKzV,OAAO2+B,iBAAiB5iC,cAAc,SAASuF,QAE1Dk4I,IADAT,EAASY,EAAa9gJ,QAAUgrC,SAAShpC,EAAIslC,aAAa,iBAAkB,KAAO,KACzD0D,SAAShpC,EAAIslC,aAAa,iBAAkB,MAAQw5G,EAAa9gJ,OAAS,GAEpG2gJ,GAAkBE,EAAmB,GAAKjpI,EAAK5X,QAAU6gJ,IACR,WAA5CjkI,KAAKzV,OAAOiE,aAAauQ,gBAAgCiB,KAAK0zC,WAAWxkD,MAClC,QAArC8Q,KAAK0zC,WAAWxkD,KAAKkT,aAA4BX,EAAGhX,UAAUC,SAAS,mBACtEtF,EAAIqF,UAAUC,SAAS,gBAAoBs5I,KACnDH,GAA4B,GAGpC,GAAI52I,GAAQ6U,EACPwhI,EAAStjI,KAAKzV,OAAO2+B,iBAAmBlpB,KAAKzV,OAAOulD,kBACrDvhD,SAAO,IAAMyR,KAAKzV,OAAOK,QAAQJ,GAAK,qCAAsCrE,UAC5EmrG,EAASrkG,EAAM9D,wBACfQ,EAAOmY,EACP9B,KAAKzV,OAAOK,QAAQzB,wBAAwBQ,KAAO2nG,EAAO3nG,KAC1DkH,EAAQwH,UAAQzN,EAAS,MACzBu5I,EAActzI,EAAQA,EAAM1H,wBAA0ByB,EAAQ1B,cAAcC,wBAC5E+H,EAAM8O,KAAKzV,OAAOkC,cAAc,OAChC3D,UAAW,qDACX0B,GAAIqQ,EAAO,SACX3N,OAAQ,WAAa5D,EAAU,UACzBg6I,EAASa,EAAYz6I,IAAMy6I,EAAY72I,OAAS62I,EAAYnrF,OAASs4C,EAAO5nG,KACvEqK,EAAU81B,EAAM7wB,UAAY,IAAM/L,EAAM+L,UAAY,GAAK,YAC/DmrI,EAAYx6I,KAAOA,EAAOsD,EAAMgrC,WAAaksG,EAAYz7I,MAAQ,GAAK,gBACxDy7I,EAAYz7I,MAAQ,yBAEvCoZ,IAAYwvF,EAAO3nG,KAAOA,IAC1BuH,EAAI7H,MAAMM,KAAOykC,SAASl9B,EAAI7H,MAAMM,KAAM,IAAM2nG,EAAO3nG,KAAOA,EAAO,KAEzE,IAAImc,GAAU9F,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,iBAC5Dgd,GAAQha,YAAYoU,EACpB,IAAIkkI,EACAP,KACAO,EAAQpkI,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,8BAChDgD,YAAYkU,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,oCAChEs7I,EAAMt4I,YAAYkU,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,uCAGhEs7I,EAAQpkI,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,2BAChDgD,YAAYkU,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,iCAChEs7I,EAAMt4I,YAAYkU,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,kCAEpEoI,EAAIpF,YAAYga,GAChB5U,EAAIpF,YAAYs4I,IACXrwI,GAAWiM,KAAKzV,OAAOuU,aAAiD,WAAlCkB,KAAKzV,OAAOiE,aAAaC,OACZ,WAAlCuR,KAAKzV,OAAOiE,aAAaC,KACvC4J,UAAQzN,EAAS,eAAiByN,UAAQzN,EAAS,aAC3CvB,MAAMJ,SAAW,WAC7BiI,EAAI7H,MAAMJ,SAAW,WACiB,UAAlC+W,KAAKzV,OAAOiE,aAAaC,MACxB4J,UAAQzN,EAAS,qBAAuByN,UAAQzN,EAAS,oBACtDoV,KAAKzV,OAAOuU,aAAe/K,EAC/ButD,EAAQx1D,YAAYoF,GAGpB8O,KAAKw6H,SAAS5vI,QAAQkB,YAAYoF,IAItC8O,KAAKshD,QAAQ12D,QAAQkB,YAAYoF,IAEhC2yI,GAA6B/hI,GAAY8hI,EAASz6I,wBAAwB6vD,OAASmrF,EAAYnrF,OAASmrF,EAAY72I,SACrHs2I,EAAS5qI,UAAY4qI,EAAS5qI,UAAY9H,EAAIzH,aAAe26I,EAAMhnH,aAEvE,IAAI8W,GAAa9F,SAASjoC,SAASwR,YAAYC,iBAAiB1G,EAAK,MAAM2G,iBAAiB,aAAc,GAW1G,IAVI3G,EAAI/H,wBAAwBT,MAAQy7I,EAAYz7I,OAChDwI,EAAI5K,cAAc,SAAS6C,wBAAwBmE,QAAuB,IAAb4mC,IAAqB,IAClFhjC,EAAI7H,MAAMX,MAAQwI,EAAI7H,MAAMqoD,WAE3B39C,GAAWiM,KAAKzV,OAAOuU,aAAiD,WAAlCkB,KAAKzV,OAAOiE,aAAaC,KAChEyC,EAAI7H,MAAMM,KAAOkH,EAAM46D,YAAc56D,EAAM/G,YAAc,EAAIoH,EAAIpH,YAAc,GAAK,KAGpFoH,EAAI7H,MAAMM,KAAQykC,SAASl9B,EAAI7H,MAAMM,KAAM,IAAMuH,EAAIpH,YAAc,EAAK,KAExEgY,IAAagiI,IAAa9jI,KAAKzV,OAAO4K,aAAepB,GAAWiM,KAAKzV,OAAOuU,WAAY,CACxF8kI,EAASv6I,MAAMJ,SAAW,QAC1B,IAAIsoG,GAAMhhG,iCAA+BM,EAAOK,EAChDA,GAAI7H,MAAMK,IAAM6nG,EAAI7nG,IAAMy6I,EAAY72I,OAAS,EAAI,KAEvD,GAAIu2I,EAA2B,CAC3B,IAAIC,GAAa/vI,GAAkC,SAAvBiM,KAAKzV,OAAO+C,QAAsB0S,KAAKzV,OAAOuU,YAClEkB,KAAKzV,OAAO8J,qBAMhBnD,EAAI7H,MAAM2vD,OAASmrF,EAAY72I,OAAS,EAAI,SANN,CACtC,GAAIf,GAAcq3I,EAASr3I,YAAcq3I,EAAS95I,YAAcwC,IAAsB,CACtF4E,GAAI7H,MAAM2vD,OAAUh5C,KAAKzV,OAAO+C,OAASs2I,EAASt9I,cAAc,SAASmD,aACnE8C,EAAe43I,EAAY72I,OAAS,EAAI,KAKlD,GAAI0N,EAAK5X,OAAS6gJ,GAAgE,WAA5CjkI,KAAKzV,OAAOiE,aAAauQ,gBAAgCiB,KAAK0zC,WAAWxkD,MACnE,QAArC8Q,KAAK0zC,WAAWxkD,KAAKkT,YAAwB,CAChD,GACIiiI,IADYrkI,KAAKzV,OAAOuU,WAAakB,KAAKzV,OAAOuU,YAAc9D,EAAK5X,OAAS,GAAK4X,EAAK5X,OAAS,GACvE4c,KAAKzV,OAAOuC,eACrC7D,EAAW+W,KAAKzV,OAAOmO,aAAawgD,aAAemrF,CACvDnzI,GAAI7H,MAAM2vD,OAAS/vD,EAAW,EAAI,KAEtCiI,EAAI7H,MAAMK,IAAM,OAMxBi+E,EAAKxlF,UAAUq1I,qBAAuB,SAAUzpI,GAC5C,QAAQA,EAAIpF,SAAaqX,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQqG,EAAI1L,QAAU,IAKrFslF,EAAK28D,WAAa,SAAUC,GACxB58D,EAAK+5D,aAAez6I,SAAO0gF,EAAK+5D,aAAc6C,IAElD58D,EAAK+5D,cACD8C,aAAgBzL,GAAkB0L,YAAetL,GACjDuL,eAAkBtD,GAAoBuD,mBAAsBvD,GAC5DwD,YAAenM,GAAiBoM,YAAexL,GAC/CyL,aAAgBzD,IAEb15D,KCj8BP86C,GAA+B,WAK/B,QAASA,GAAcl4H,EAAQyE,GAC3BgR,KAAK+kI,cACL/kI,KAAKglI,cACLhlI,KAAKilI,kBACLjlI,KAAKklI,oBACLllI,KAAKmlI,WAAY,EACjBnlI,KAAKolI,SAAU,EACfplI,KAAKqlI,gBAAiB,EACtBrlI,KAAKslI,sBACLtlI,KAAKg5D,uBACLh5D,KAAKulI,eAAgB,EACrBvlI,KAAKwlI,mBAAoB,EACzBxlI,KAAKylI,eAAiB,aACtBzlI,KAAK0lI,kBACL1lI,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBACLhhC,KAAKonF,SAAWxqD,iBAAe58B,KAAKzV,OAAOkC,eAAe,GAAQsE,SAAS,EAAM8rC,MAAO,MACxF78B,KAAKqnF,UAAYzqD,iBAAe58B,KAAKzV,OAAOkC,eAAe,GAAQsE,SAAS,EAAO8rC,MAAO,MAC1F78B,KAAKonF,SAAS7tD,aAAav5B,KAAKzV,OAAOkC,cAAc,SACjD3D,UAAW,+BAAgCwyB,OAAS33B,KAAM,cAC1Dqc,KAAKonF,SAAS9tD,YAClBt5B,KAAKqnF,UAAU9tD,aAAav5B,KAAKzV,OAAOkC,cAAc,SAClD3D,UAAW,+BAAgCwyB,OAAS33B,KAAQ,cAC5Dqc,KAAKqnF,UAAU/tD,YACnBt5B,KAAKqnF,UAAU/gG,cAAc,YAAYmE,UAAUqE,IAAI,aACnDkR,KAAKzV,OAAO2X,WACZnb,YAAUiZ,KAAKonF,SAAUpnF,KAAKqnF,YAAa,UAiqBnD,MA9pBAo7B,GAActgI,UAAU0rB,QAAU,WAC9B,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OACzBq2D,KAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,qBAG/F0Z,KAAKiuC,sBACLjuC,KAAKmhD,eACA3+D,oBAAkBwd,KAAKuyF,UAAWvyF,KAAKuyF,OAAO3nG,SAAYoV,KAAKuyF,OAAOriF,aACvElQ,KAAKuyF,OAAO1kF,YAGpB40G,EAActgI,UAAUwjJ,UAAY,WAC5B3lI,KAAKzV,OAAO2X,UACZnb,WAASiZ,KAAKsoB,SAASliC,iBAAiB,wBAAyB,UAGjEgL,cAAY4O,KAAKsoB,SAASliC,iBAAiB,wBAAyB,WAM5Eq8H,EAActgI,UAAU6+C,iBAAmB,WACnChhC,KAAKzV,OAAO2lB,cAGhB05B,eAAa96C,IAAI3I,SAAU,QAAS6Z,KAAKs0D,aAAct0D,MACvDA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAK4lI,qBAAsB5lI,MAC3DA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKuD,OAAQvD,MAC/CA,KAAKzV,OAAOy2C,iBAAiBna,GAAkB7mB,KAAK6lI,WAAWxyH,KAAKrT,OACpEA,KAAKzV,OAAO6lB,GAAGQ,GAAgB5Q,KAAK6N,QAAS7N,MAC7CA,KAAKzV,OAAO6lB,GrF+PI,cqF/PkBpQ,KAAK2lI,UAAW3lI,MAClDA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKiyD,aAAcjyD,MACrDA,KAAKzV,OAAO6lB,GrF6WM,gBqF7WkBpQ,KAAK8lI,eAAgB9lI,QAK7DyiH,EAActgI,UAAU8rD,oBAAsB,WACtCjuC,KAAKzV,OAAO2lB,cAGhB05B,eAAa/nD,OAAOsE,SAAU,QAAS6Z,KAAKs0D,cAC5Ct0D,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKuD,QACxCvD,KAAKzV,OAAOstB,IAAIjH,GAAgB5Q,KAAK6N,SACrC7N,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAK4lI,sBACtC5lI,KAAKzV,OAAOstB,IrFgPI,cqFhPmB7X,KAAK2lI,WACxC3lI,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKiyD,aAAcjyD,MACrDA,KAAKzV,OAAOstB,IrF8VM,gBqF9VmB7X,KAAK8lI,kBAE9CrjB,EAActgI,UAAUohB,OAAS,WAC7BvD,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKwlG,mBACLxlG,KAAKivE,mBAAqBjvE,KAAKhR,eAAeI,WAAW,oBAE7DqzH,EAActgI,UAAUmyE,aAAe,SAAUtxE,GAC7C,GAAI+3H,GAAgB/3H,EAAEtB,MACtB,KAAKse,KAAKwlI,kBAAmB,CACzB,GAAKhjJ,oBAAkB6V,UAAQ0iH,EAAe,WAAcv4H,oBAAkB6V,UAAQ0iH,EAAe,kBAe5Fv4H,oBAAkBwd,KAAKuyF,UAAWvyF,KAAKuyF,OAAO5pG,SAAYoyH,EAActwH,UAAUC,SAAS,qBAC5FsV,KAAKuyF,OAAO15B,OACZ74D,KAAK+lI,eACL/lI,KAAKgmI,uBAELhmI,KAAKmlI,WAAY,OAnBrB,IAAIpqB,EAActwH,UAAUC,SAAS,wBAA0BqwH,EAActwH,UAAUC,SAAS,iBAC5F,GAAKsV,KAAKqlI,gBAAkBrlI,KAAKuyF,OAAO5pG,UAAaqX,KAAKmlI,UAEtD,YADAnlI,KAAKmlI,WAAY,OAIhBpqB,GAActwH,UAAUC,SAAS,iBACtCqwH,EAAc7xH,cAAc5C,cAAc,eAAe1E,MAAQ,GACjEoe,KAAKimI,oBAAoB,IACzBjmI,KAAKkmI,mBACLlmI,KAAKmmI,0BAYTnmI,KAAKzV,OAAOyyB,gBAAkBhd,KAAKzV,OAAOmL,aAC1CsK,KAAKomI,UAAYpjJ,EAAEtB,QAGvBse,KAAKwlI,mBAAqBxiJ,EAAEtB,OAAO+I,UAAUC,SAAS,gBACtDsV,KAAKgmI,uBAEThmI,KAAK2lI,aAETljB,EAActgI,UAAU0jJ,WAAa,YAC5BrjJ,oBAAkBwd,KAAKuyF,SAAWvyF,KAAKuyF,OAAO5pG,UAC/CqX,KAAKuyF,OAAO15B,OAEZ74D,KAAKmlI,WAAY,IAQzB1iB,EAActgI,UAAU44F,oBAAsB,SAAUhxF,EAAGyB,EAAG9J,GAI1D,GAHKse,KAAKuyF,OAAO5pG,UAAYqX,KAAKzV,OAAOyyB,iBAAkBhd,KAAKzV,OAAOmL,WACnEsK,KAAKqmI,mBAEJrmI,KAAKuyF,OAAO5pG,QAyCbqX,KAAK6lI,aACL7lI,KAAKsmI,gBACLtmI,KAAK+lI,eACL/lI,KAAKgmI,2BA5CiB,CAGtB,GADWhmI,KAAKumI,+BACPt/G,OACL,MAEAvlC,KACAse,KAAKomI,UAAY1kJ,GAErBse,KAAKgmI,uBACLhmI,KAAKuyF,OAAOxtD,WACZ/kC,KAAKuyF,OAAO3nG,QAAQvB,MAAM6hD,UAAY,OACtC,IAAI96C,GAAiB4P,KAAKuyF,OAAO3nG,QAAQvB,MAAMC,OAC/C0W,MAAKuyF,OAAO3nG,QAAQvB,MAAMC,QAAU,OACpC,IAAI+G,GAASE,iCAA+B8H,UAAQ3W,EAAQ,mBAAoBse,KAAKuyF,OAAO3nG,QAC5FoV,MAAKuyF,OAAO3nG,QAAQvB,MAAMC,QAAU8G,EACpC4P,KAAKuyF,OAAO3nG,QAAQvB,MAAMK,IAAM2G,EAAO3G,IAAM2O,UAAQ3W,EAAQ,iBAAiByH,wBAAwBmE,OAAS,IAE1G9K,qBAAkB6V,UAAQ3W,EAAQ,gBACnCse,KAAKuyF,OAAO7pG,MAAQ,KAEpBiS,UAAQ44C,UACRvzC,KAAKuyF,OAAO7wG,OAASyE,SAASwG,KAC9BqT,KAAKuyF,OAAOtpG,UAAa0gG,EAAG,SAAUC,EAAG,UACzC5pF,KAAKuyF,OAAOi0C,kBACZxmI,KAAKuyF,OAAOrmD,KAAOlsC,KAAKymI,SAASpzH,KAAKrT,OAGlCA,KAAKzV,OAAO2X,UACZlC,KAAKuyF,OAAO3nG,QAAQvB,MAAMM,KAAOjI,EAAO+pE,WAAa,KAGrDzrD,KAAKuyF,OAAO3nG,QAAQvB,MAAMM,KAAS0G,EAAO1G,KAfnC,IAesD0O,UAAQ3W,EAAQ,iBAAiBkL,YAAe,EAAI,KAGzHoT,KAAKkmI,mBACLlmI,KAAKuyF,OAAOtnD,OACZjrC,KAAKzV,OAAOsoB,OrFyKS,uBqFzK4BugF,OAAQpzF,KAAKuyF,SASlEvyF,KAAK2lI,aAQTljB,EAActgI,UAAUy+F,kBAAoB,SAAU+I,EAAGC,GAErD,GADA5pF,KAAKwlI,mBAAoB,EACrBxlI,KAAKuyF,OAAO5pG,QAEZ,WADAqX,MAAK6lI,YAGE7lI,MAAKumI,+BACPt/G,SAGJjnB,KAAKulI,cAKNvlI,KAAKgmI,wBAJLhmI,KAAKuyF,OAAOzsF,QAAU9F,KAAK0mI,oBAC3B1mI,KAAK2mI,yBAKT3mI,KAAKuyF,OAAOxtD,WACZ/kC,KAAKuyF,OAAOtpG,UAAa0gG,EAAG,SAAUC,EAAG,UACrCpnG,oBAAkBmnG,IAClB3pF,KAAKuyF,OAAOtpG,UAAa0gG,EAAG,SAAUC,EAAG,UACzC5pF,KAAKuyF,OAAOi0C,oBAGZxmI,KAAKuyF,OAAO3nG,QAAQvB,MAAMK,IAAM,GAChCsW,KAAKuyF,OAAO3nG,QAAQvB,MAAMM,KAAO,GACjCqW,KAAKuyF,OAAO3nG,QAAQvB,MAAMK,IAAMkgG,EAAI,KACpC5pF,KAAKuyF,OAAO3nG,QAAQvB,MAAMM,KAAOggG,EAAI,MAEzC3pF,KAAKuyF,OAAOgQ,WAAaviG,KAAK4mI,iBAAiBvzH,KAAKrT,MACpDA,KAAKuyF,OAAOtnD,OACZjrC,KAAKulI,eAAgB,EACrBvlI,KAAKuyF,OAAOpB,YAAcnxF,KAAK6mI,kBAAkBxzH,KAAKrT,QAE1DyiH,EAActgI,UAAUyjJ,qBAAuB,SAAU5iJ,GACjDA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,QACvCzxB,KAAKuD,UAGbk/G,EAActgI,UAAU8vE,aAAe,SAAUjvE,GAC5B,WAAbA,EAAE6L,QACFmR,KAAK6lI,cAGbpjB,EAActgI,UAAUykJ,iBAAmB,WACvC,GAAI3jB,GAAgBjjH,KAAKuyF,OAAOzsF,QAAQxf,cAAc,mBACtDsjD,gBAAa96C,IAAIm0H,EAAe,QAASjjH,KAAK8mI,0BAA2B9mI,OAE7EyiH,EAActgI,UAAU0kJ,kBAAoB,WACxC,GAAI5jB,GAAgBjjH,KAAKuyF,OAAOzsF,QAAQxf,cAAc,mBACtDsjD,gBAAa/nD,OAAOohI,EAAe,QAASjjH,KAAK8mI,4BAErDrkB,EAActgI,UAAU+T,WAAa,WAGjC,MAFc8J,MAAKzV,OAAO2L,aAAaoD,OAAO,SAAU/W,GAAU,MAAwB,aAAhBA,EAAOoB,OAC3C,IAA/BpB,EAAO2mB,qBAAkD,aAAhB3mB,EAAOoB,UAAwCoJ,KAAjBxK,EAAOF,SAGzFogI,EAActgI,UAAUqjH,iBAAmB,WAEvCxlG,KAAKsyF,OAAStyF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,eAAgB0B,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK,WACzGwV,KAAKsyF,OAAOvwG,aAAa,aAAcie,KAAK8gC,KAAKvE,YAAY,4BAC7Dv8B,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKsyF,OAC1BtyF,MAAKzV,OAAOK,QAAQzB,wBAAwBT,MACxCsX,KAAKzV,OAAO2X,SAD3B,IAEI+iH,GAAajlH,KAAKzV,OAAOK,QAAQtE,cAAc,WAC9C9D,qBAAkByiI,IACfA,EAAW97H,wBAAwBO,IAE3CsW,KACKuyF,OAAS,GAAI3mD,WACd1D,OAAQloC,KAAK8gC,KAAKvE,YAAY,iBAC9BuP,eAAe,EACfC,eAAe,EACfC,OAAQhsC,KAAKzV,OAAOyhD,OACpBrjD,SAAS,EACTuZ,UAAWlC,KAAKzV,OAAO2X,UACvBxgB,OAAQyE,SAAS2nD,eAAe9tC,KAAKzV,OAAOK,QAAQJ,IACpD4/C,UACQx8B,MAAO5N,KAAK+mI,mBAAmB1zH,KAAKrT,MACpCspF,aACIxjF,QAAS9F,KAAK8gC,KAAKvE,YAAY,YAAagtD,WAAW,EACvDtsE,SAAU,qBAIdrP,MAAO5N,KAAKulG,cAAclyF,KAAKrT,MAC/BspF,aAAersE,SAAU,yBAA0BnX,QAAS9F,KAAK8gC,KAAKvE,YAAY,mBAE1Fz2B,QAAS9F,KAAK0mI,oBACdh+I,MAAO,IACPu0B,SAAU,OACVuvB,mBAAqBC,OAAQ,SAGjCzsC,MAAKuyF,OAAuB,kBAAI,EAChCvyF,KAAKuyF,OAAO93D,SAASz6B,KAAKsyF,QAC1BtyF,KAAK0gD,cAET+hE,EAActgI,UAAUukJ,kBAAoB,WACxC1mI,KAAKqyF,QAAUryF,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,mBAC7D,IAAIk+I,GAAYhnI,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,sCAC1Dm+I,EAAcjnI,KAAKzV,OAAOkC,cAAc,SACxC3D,UAAW,0BACXwyB,OAASrZ,YAAajC,KAAK8gC,KAAKvE,YAAY,aAE5C2qG,EAAelnI,KAAKzV,OAAOkC,cAAc,QACzC3D,UAAW,kDACXwyB,OAAS8sB,MAAOpoC,KAAK8gC,KAAKvE,YAAY,aAEtC4qG,EAASnnI,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,mBAC3DkX,MAAKsoB,SAAWtoB,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,oBAC9Dk+I,EAAUl7I,YAAYm7I,GACtBD,EAAUl7I,YAAYo7I,GACtBlnI,KAAKqkH,aAAe,GAAInmE,IAAU+oF,EAClC,IAAIG,GAAkBpnI,KAAKqnI,oBAAoBrnI,KAAKzV,OAAO2L,aAK3D,OAJA8J,MAAKsoB,SAASx8B,YAAYs7I,GAC1BD,EAAOr7I,YAAYkU,KAAKsoB,UACxBtoB,KAAKqyF,QAAQvmG,YAAYk7I,GACzBhnI,KAAKqyF,QAAQvmG,YAAYq7I,GAClBnnI,KAAKqyF,SAEhBowB,EAActgI,UAAU4kJ,mBAAqB,SAAU73I,GACnD8Q,KAAKslI,sBACLtlI,KAAKg5D,uBACLh5D,KAAKilI,eAAkBjlI,KAAKilI,eAAe7hJ,OAAS,EAAK4c,KAAKilI,eAAiBjlI,KAAKklI,iBACpFllI,KAAKsnI,mBAAmBtnI,KAAKilI,eAC7B,IAAIsC,GAAkBvnI,KAAKwnI,UAAUlhJ,cAAc,eAC/C0Z,KAAKwnI,UAAUphJ,iBAAiB,gCAAgChD,MAC/DZ,qBAAkB0M,IACfq4I,EAAkBvnI,KAAKzV,OAAO2L,aAAa9S,SACvC4c,KAAKglI,WAAW5hJ,QAChB4c,KAAKynI,kBAAkBznI,KAAKglI,YAAY,GAExChlI,KAAK+kI,WAAW3hJ,QAChB4c,KAAKynI,kBAAkBznI,KAAK+kI,YAAY,GAE5C/kI,KAAKivE,mBAAmB1nD,WAAWvnB,KAAKslI,mBAAoBtlI,KAAKg5D,qBACjEh5D,KAAK+lI,eACL/lI,KAAKzV,OAAOsoB,OrFhGA,mBqFgGgC2e,OAAQ,SACD,IAA/CxxB,KAAKzV,OAAO8O,wBAAwBjW,QACjB4c,KAAKzV,OAAOK,QAAQtE,cAAc,eAAeA,cAAc,MACrEvE,aAAa,UAAWie,KAAKzV,OAAOgQ,oBAAoBnX,OAAO6M,cAK5FwyH,EAActgI,UAAU2jJ,eAAiB,SAAU9iJ,GAC/C,GAAsB,gBAAlBA,EAAEof,YAIF,MAHApC,MAAK+kI,cACL/kI,KAAKglI,kBACLhlI,MAAK6lI,cAIbpjB,EAActgI,UAAUulJ,iBAAmB,WACvC1nI,KAAK+kI,cACL/kI,KAAKglI,cACLhlI,KAAK6lI,cAETpjB,EAActgI,UAAUmlJ,mBAAqB,SAAUrC,GACnD,IAAK,GAAIn9I,GAAQ,EAAGA,EAAQm9I,EAAe7hJ,OAAQ0E,IAAS,CACxD,GAAIoxG,GAAS+rC,EAAen9I,GACxB6/I,EAAa3nI,KAAKzV,OAAOwpC,eAAemlE,EAC5C3pG,cAAayQ,KAAKg5D,oBAAoB90E,KAAKkW,KAAKC,MAAMD,KAAK6+D,UAAU0uE,KAAgB3nI,KAAKg5D,oBAAoB90E,KAAKyjJ,KAG3HllB,EAActgI,UAAUslJ,kBAAoB,SAAUG,EAAcpuI,GAChE,IAAK,GAAI1R,GAAQ,EAAGA,EAAQ8/I,EAAaxkJ,OAAQ0E,IAAS,CACtD,GAAIoxG,GAAS0uC,EAAa9/I,GACtB6/I,EAAa3nI,KAAKzV,OAAOwpC,eAAemlE,EACpB,cAApByuC,EAAWhkJ,OACXgkJ,EAAWh/I,QAAU6Q,GAEzBjK,aAAayQ,KAAKslI,mBAAmBphJ,KAAKkW,KAAKC,MAAMD,KAAK6+D,UAAU0uE,KAAgB3nI,KAAKslI,mBAAmBphJ,KAAKyjJ,KAGzHllB,EAActgI,UAAU4jJ,aAAe,WACnC/lI,KAAKglI,cACLhlI,KAAK+kI,cAEL/kI,KAAK6lI,aACL7lI,KAAKsmI,iBAET7jB,EAActgI,UAAUojH,cAAgB,WACpCvlG,KAAK+lI,eACL/lI,KAAKzV,OAAOsoB,OrFiDqB,+BqFjDwBugF,OAAQpzF,KAAKuyF,UAE1EkwB,EAActgI,UAAU0lJ,iBAAmB,SAAUC,EAAWC,EAAQr5I,OAClD,KAAdA,IAAwBA,GAAY,GACpCo5I,IACyC,IAArC9nI,KAAKglI,WAAWt9I,QAAQqgJ,IACxB/nI,KAAKglI,WAAWx/H,OAAOxF,KAAKglI,WAAWt9I,QAAQqgJ,GAAS,IAEnB,IAArC/nI,KAAK+kI,WAAWr9I,QAAQqgJ,IACxB/nI,KAAK+kI,WAAW7gJ,KAAK6jJ,MAIgB,IAArC/nI,KAAK+kI,WAAWr9I,QAAQqgJ,IACxB/nI,KAAK+kI,WAAWv/H,OAAOxF,KAAK+kI,WAAWr9I,QAAQqgJ,GAAS,IAEnB,IAArC/nI,KAAKglI,WAAWt9I,QAAQqgJ,IACxB/nI,KAAKglI,WAAW9gJ,KAAK6jJ,IAGzBr5I,EACKo5I,EAID9nI,KAAKklI,iBAAiBhhJ,KAAK6jJ,GAH3B/nI,KAAKilI,eAAe/gJ,KAAK6jJ,IAMiB,IAAzC/nI,KAAKilI,eAAev9I,QAAQqgJ,GACjC/nI,KAAKilI,eAAez/H,OAAOxF,KAAKilI,eAAev9I,QAAQqgJ,GAAS,GAGhE/nI,KAAKilI,eAAe/gJ,KAAK6jJ,IAGjCtlB,EAActgI,UAAU8jJ,oBAAsB,SAAU+B,GACpD,GACIC,GACAC,EAFAC,GAAc,EAGdC,EAAYpoI,KAAKsyF,OAAOhsG,cAAc,qBACtC+hJ,EAAeroI,KAAKwnI,UAAUlhJ,cAAc,aAC5C0Z,KAAKwnI,UAAUphJ,iBAAiB,8BAA8BhD,MAclE,IAbA4c,KAAKulI,eAAgB,EACjB6C,IACAF,EAAWE,EAAU9hJ,cAAc,UAAU6qF,cAAc,IAE7C,KAAd62D,GACAhoI,KAAKkmI,mBACL+B,EAAUjoI,KAAK9J,aACfiyI,GAAc,GAGdF,EAAU,GAAIh2I,eAAY+N,KAAK9J,cAAczD,cAAa,GAAIX,UACzDO,MAAM,aAAc2N,KAAKylI,eAAgBuC,GAAW,EAAMhoI,KAAKzV,OAAO+9I,sBAAsBl0H,eAEjG6zH,EAAQ7kJ,OACR4c,KAAKsoB,SAAS/hC,UAAY,IAC1ByZ,KAAKsoB,SAAS79B,UAAU5I,OAAO,aAC/Bme,KAAKsoB,SAASx8B,YAAYkU,KAAKqnI,oBAAoBY,EAASD,IACvDG,EAKGD,GAAYG,IACZH,EAASz/F,UAAW,IALxBzoC,KAAKsmI,gBACLtmI,KAAKmmI,6BAQR,CACD,GAAIoC,GAAYvoI,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,iBAC/Dy/I,GAAUhiJ,UAAYyZ,KAAK8gC,KAAKvE,YAAY,UAC5Cv8B,KAAKsoB,SAAS/hC,UAAY,IAC1ByZ,KAAKsoB,SAASx8B,YAAYy8I,GAC1BvoI,KAAKsoB,SAAS79B,UAAUqE,IAAI,aACxBo5I,IACAA,EAASz/F,UAAW,GAG5BzoC,KAAKk7E,MAAO,EACZl7E,KAAK4qG,aAET6X,EAActgI,UAAUu+D,WAAa,WACjC9W,eAAa96C,IAAIkR,KAAKuyF,OAAO3nG,QAAS,QAASoV,KAAKwoI,qBAAsBxoI,MAC1E4pC,eAAa96C,IAAIkR,KAAKqkH,aAAalmE,UAAW,QAASn+C,KAAK8mI,0BAA2B9mI,MACvFA,KAAKqkH,aAAa/lE,aAEtBmkE,EAActgI,UAAUg/D,aAAe,WAC/BnhD,KAAKzV,OAAO2lB,cAGZlQ,KAAKuyF,OAAO3nG,SACZg/C,eAAa/nD,OAAOme,KAAKuyF,OAAO3nG,QAAS,QAASoV,KAAKwoI,sBAE3D5+F,eAAa/nD,OAAOme,KAAKqkH,aAAalmE,UAAW,QAASn+C,KAAK8mI,2BAC/D9mI,KAAKqkH,aAAa9lE,gBAEtBkkE,EAActgI,UAAUqmJ,qBAAuB,SAAUxlJ,GACrD,GAAIylJ,GACAr+I,EAAOD,EAAanH,EAAEtB,OAAQ,qBAClC,IAAI0I,EAAM,CASN,GARgBA,EAAK9D,cAAc,gBAE/B0Z,KAAK0oI,iBAAiBt+I,EAAK9D,cAAc,aAGzCqK,GAAevG,EAAKlB,eAExBkB,EAAK9D,cAAc,iBAAiBytD,QAChC3pD,EAAK9D,cAAc,YACnBmiJ,GAAa,MAEZ,CAAA,IAAIr+I,EAAK9D,cAAc,cAIxB,MAHAmiJ,IAAa,EAKjBzoI,KAAK2mI,uBACL,IAAIlxD,GAAYtrF,EAAaC,EAAM,YAAYsgC,aAAa,OACxDnoC,EAASyd,KAAKzV,OAAO2L,YACzB,IAAkB,mBAAdu/E,EAAgC,CAChCz1E,KAAKilI,kBACLjlI,KAAKklI,mBACL,KAAK,GAAIzhJ,GAAI,EAAGA,EAAIlB,EAAOa,OAAQK,IAC3BlB,EAAOkB,GAAGylB,qBACVlJ,KAAK6nI,iBAAiBY,EAAYlmJ,EAAOkB,GAAGkI,KAAK,OAKzDqU,MAAK6nI,iBAAiBY,EAAYhzD,EAEtCz1E,MAAKmmI,0BAGb1jB,EAActgI,UAAUwkJ,sBAAwB,WAC5C,GAAI9sG,GAAM75B,KAAKwnI,UAAU37I,SAASzI,OAAS,EACvC0F,KACAsB,EAAO4V,KAAKwnI,UAAU37I,SAAS,GAAGvF,cAAc,YAChD83C,EAAWp+B,KAAKwnI,UAAUphJ,iBAAiB,8BAA8BhD,OACzEsqG,EAAM1tF,KAAKuyF,OAAO5E,OAAO,EAC7BD,GAAIjlD,UAAW,EACX5O,IAAQuE,EACRt1C,GAAa,WAERs1C,EACLt1C,GAAa,WAGbA,GAAa,aACb4kG,EAAIjlD,UAAW,GAEnBilD,EAAI3oD,WACJ3zC,eAAahH,IAAQ,UAAW,SAAU,cAC1CrD,YAAUqD,GAAOtB,IAErB25H,EAActgI,UAAUumJ,gBAAkB,SAAU33I,GAEhD,IAAK,GAAIlB,GAAK,EAAG29F,KADDniG,MAAMC,KAAK0U,KAAKwnI,UAAUphJ,iBAAiB,aACvByJ,EAAK29F,EAASpqG,OAAQyM,IAEtDsB,GADWq8F,EAAS39F,GACOkB,IAGnC0xH,EAActgI,UAAUgkJ,sBAAwB,WAC1BnmI,KAAKuyF,OAAO3nG,QAAQtE,cAAc,iBAAiB1E,KAErE,KAAK,GADD4yH,GAAcx0G,KAAKzV,OAAOgQ,oBACrB9W,EAAI,EAAGA,EAAI+wH,EAAYpxH,OAAQK,IAAK,CACrCklJ,EAAYn0B,EAAY/wH,GAAGkI,KACiB,IAA5CqU,KAAK0lI,eAAeh+I,QAAQihJ,IAC5B3oI,KAAK0lI,eAAexhJ,KAAKykJ,GAIjC,IAAK,GADDvqG,GACK36C,EAAI,EAAGA,EAAIuc,KAAKglI,WAAW5hJ,OAAQK,IAAK,CAC7C,GAAIqE,GAAQkY,KAAK0lI,eAAeh+I,QAAQsY,KAAKglI,WAAWvhJ,KACzC,IAAXqE,GACAkY,KAAK0lI,eAAelgI,OAAO1d,EAAO,GAG1Cs2C,EAAsC,IAA3Bp+B,KAAK+kI,WAAW3hJ,OAAe,EAAI4c,KAAK0lI,eAAetiJ,MAClE,IAAIsqG,GAAM1tF,KAAKsyF,OAAOhsG,cAAc,qBAAqBA,cAAc,UAAU6qF,cAAc,EAC/Fuc,GAAIjlD,UAAW,CAGf,KAAK,GAFDmgG,MACAC,EAAa7oI,KAAKzV,OAAOK,QAAQxE,iBAAiB,eAC7C3C,EAAI,EAAGqlJ,EAAWD,EAAWzlJ,OAAQK,EAAIqlJ,EAAUrlJ,IAAK,CAC7D,GACIklJ,GAAYx+I,EADF0+I,EAAWplJ,GACa,YAAYinC,aAAa,MAC/Dk+G,GAAa1kJ,KAAKykJ,GAEtB,GAAII,GAAW/oI,KAAK+kI,WAAWzrI,OAAO,SAAU/W,GAAU,OAAyC,IAAlCqmJ,EAAalhJ,QAAQnF,IACrE,KAAb67C,GAAsC,IAApB2qG,EAAS3lJ,SAC3BsqG,EAAIjlD,UAAW,GAEnBilD,EAAI3oD,YAER09E,EAActgI,UAAUklJ,oBAAsB,SAAU2B,EAAOhB,GAC3DhoI,KAAKwnI,UAAYxnI,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,mBAC9D,IAAIglG,GAAiB9tF,KAAK8gC,KAAKvE,YAAY,aACvC0sG,EAASjpI,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,iCACtD4F,EAAYsR,KAAK48B,eAAekxD,GAAgB,EAAO,iBACvDk7C,GAAM5lJ,SACNsL,EAAUpI,cAAc,uBAAuBqS,kBAAkBlO,UAAUqE,IAAI,eAC/EJ,EAAUpI,cAAc,YAAYmE,UAAUqE,IAAI,eAClDkR,KAAK8yD,WAAWpkE,EAAUpI,cAAc,aAAa,GACrD2iJ,EAAOn9I,YAAY4C,GACnBsR,KAAKwnI,UAAU17I,YAAYm9I,GAE/B,KAAK,GAAIxlJ,GAAI,EAAGA,EAAIulJ,EAAM5lJ,OAAQK,IAAK,CACnC,GAAIN,GAAU6lJ,EAAMvlJ,EACpBuc,MAAKkpI,eAAe/lJ,GAExB,MAAO6c,MAAKwnI,WAEhB/kB,EAActgI,UAAU6jJ,qBAAuB,WAC3ChmI,KAAKuyF,OAAO3nG,QAAQtE,cAAc,iBAAiB1E,MAAQ,GAC3Doe,KAAKimI,oBAAoB,GAGzB,KAAK,GAFDkD,GAAanpI,KAAKzV,OAClB6+I,EAAuBppI,KAAKuyF,OAAO3nG,QAAQxE,iBAAiB,iCACvD3C,EAAI,EAAG4lJ,EAAUD,EAAqBhmJ,OAAQK,EAAI4lJ,EAAS5lJ,IAAK,CACrE,GAAImH,GAAUw+I,EAAqB3lJ,GAC/BklJ,MAAY,EAEZA,GADA3oI,KAAKzV,OAAOmL,WAAasK,KAAKzV,OAAOyyB,eACzB7yB,EAAa6V,KAAKuyF,OAAO3nG,QAAQxE,iBAAiB,iCAAiC3C,GAAI,YAAYinC,aAAa,OAGhHvgC,EAAaS,EAAS,YAAY8/B,aAAa,MAE/D,IAAInoC,GAAS4mJ,EAAWp1G,eAAe40G,GACnCW,EAAU1+I,EAAQ1B,cAAc9C,iBAAiB,aACjD7D,GAAOoG,UAAY2gJ,EAAQlmJ,QAC3BwH,EAAQmG,SAAU,EAClBiP,KAAK8yD,WAAWloE,EAAQ1B,cAAc5C,cAAc,aAAa,KAGjEsE,EAAQmG,SAAU,EAClBiP,KAAK8yD,WAAWloE,EAAQ1B,cAAc5C,cAAc,aAAa,MAI7Em8H,EAActgI,UAAU2wE,WAAa,SAAUloE,EAAS4O,GACpDA,EAAQ/O,YAAUG,GAAU,YAAa,cAAgBH,YAAUG,GAAU,cAAe,aAEhG63H,EAActgI,UAAUy6C,eAAiB,SAAUC,EAAO9rC,EAASpF,GAC/D,GAAI49I,GAAOx4I,EAAUiP,KAAKonF,SAASlzF,WAAU,GAAQ8L,KAAKqnF,UAAUnzF,WAAU,EAE9E,OADAq1I,GAAKjjJ,cAAc,YAAYC,UAAYs2C,EACpC5rC,GAAmBtF,EAAK49I,EAAM,aAEzC9mB,EAActgI,UAAU+mJ,eAAiB,SAAU3mJ,GAC/C,GAAI0mJ,GACAO,EACAC,CACJ,IACIlnJ,EAAO2mB,oBAAqB,CAC5B+/H,EAASjpI,KAAKzV,OAAOkC,cAAc,MAAQ3D,UAAW,gBAAiBoE,OAAQ,kBAAmB1C,GAAI,UAAYjI,EAAOoJ,MACzH69I,GAAwD,IAAzCxpI,KAAKglI,WAAWt9I,QAAQnF,EAAOoJ,KAC9C89I,GAAwD,IAAzCzpI,KAAK+kI,WAAWr9I,QAAQnF,EAAOoJ,IAC9C,IAAI+9I,GAAiB1pI,KAAK48B,eAAer6C,EAAO8F,WAAa9F,EAAOoG,UAAY6gJ,GAAiBC,EAAclnJ,EAAOoJ,IACtHs9I,GAAOn9I,YAAY49I,GACnB1pI,KAAKwnI,UAAU17I,YAAYm9I,GAE3BjpI,KAAKulI,eACLvlI,KAAK2mI,yBAGblkB,EAActgI,UAAU2kJ,0BAA4B,SAAU9jJ,GAC1Dgd,KAAKsmI,gBACLtmI,KAAK2pI,YAAc3mJ,EAAEtB,OAAOE,MAC5Boe,KACK4qG,YACL5qG,KAAK6qG,WAAW7nH,IAEpBy/H,EAActgI,UAAU0oH,WAAa,SAAU7nH,GAC3C,GAAI4mJ,GAAQ5pI,KACR6pI,EAAYD,EAAM1uD,MAAsB,KAAdl4F,EAAEgrD,QAAuB,EAAN,GACjDhuC,MAAK+hF,MAAQt5F,OAAOqiH,YAAY,WAAc8+B,EAAM3D,oBAAoB2D,EAAMD,cAAiBE,IAEnGpnB,EAActgI,UAAUyoH,UAAY,WAChCniH,OAAOwiH,cAAcjrG,KAAK+hF,QAE9B0gC,EAActgI,UAAUmkJ,cAAgB,WACpCtmI,KAAKsyF,OAAOhsG,cAAc,yBAAyBmE,UAAUqE,IAAI,gBAErE2zH,EAActgI,UAAU+jJ,iBAAmB,WACvClmI,KAAKsyF,OAAOhsG,cAAc,yBAAyBmE,UAAU5I,OAAO,gBAExE4gI,EAActgI,UAAUskJ,SAAW,WAC3B9rI,UAAQ44C,WACRvzC,KAAKuyF,OAAO3nG,QAAQtE,cAAc,mBAAmBmE,UAAU5I,OAAO,iBACtEme,KAAKuyF,OAAO3nG,QAAQxE,iBAAiB,eAAe,GAAG2tD,UAI/D0uE,EAActgI,UAAUguB,cAAgB,WACpC,MAAO,iBAEXsyG,EAActgI,UAAUkkJ,iBAAmB,WAIvC,IAAK,GAHDyD,MAAYz+I,MAAMC,KAAKnF,SAAS4a,uBAAuB,YAAYzH,OAAO,SAAUywI,GACpF,MAAOA,GAAOt/I,UAAUC,SAAS,kBAE5BjH,EAAI,EAAGumJ,EAASF,EAAO1mJ,OAAQK,EAAIumJ,EAAQvmJ,KAC5CqmJ,EAAOrmJ,GAAGgH,UAAUC,SAAS,aAAesV,KAAKzV,OAAOK,QAAQJ,GAAK,WAAas/I,EAAOrmJ,GAAG+G,KAC5Fs/I,EAAOrmJ,GAAG0tF,cAAc,GAAGtY,QAIvC4pD,EAActgI,UAAUokJ,6BAA+B,WAC/Ch3I,cAAcyQ,KAAKzV,OAAO0E,kBAAmE,SAA/C+Q,KAAKzV,OAAO+9I,sBAAsB/1I,WAChFyN,KAAKzV,OAAO+9I,sBAAsB/1I,SAAW,aAEjD,IAAIm6F,IACAtqF,YAAa,0BAA2BxX,QAASoV,KAAKzV,OAAOK,QAC7DzH,QAAS6c,KAAK9J,aAAc+wB,QAAQ,EACpCw+G,eAAgBzlI,KAAKzV,OAAO+9I,sBAAsB/1I,SAUtD,OARIhD,gBAAeyQ,KAAKzV,OAAO+iC,gBAC3Bo/D,GACItqF,YAAa,0BAA2B6kB,QAAQ,EAChDw+G,eAAgBzlI,KAAKzV,OAAO+9I,sBAAsB/1I,WAG1DyN,KAAKzV,OAAOotB,QrFrmBiB,0BqFqmBuB+0E,GACpD1sF,KAAKylI,eAAiB/4C,EAAM+4C,eACrB/4C,GAEJ+1B,KChsBPwnB,GAA8B,WAC9B,QAASA,GAAa1/I,EAAQiH,GAC1BwO,KAAKkqI,mBAAoB,EACzBlqI,KAAKxO,kBACLwO,KAAKzV,OAASA,GACTA,EAAOgxF,eAAiB/pF,IACzBwO,KAAKxO,eAAiBA,GAyP9B,MAtPAy4I,GAAav4H,SAAW,SAAUnnB,EAAQjI,GACtC,GAAIuP,GAAQvP,EAAKkvB,eAAc,GAAMgF,eASrC,OARIl0B,GAAKmxB,aACDlpB,EAAO7F,cAAcouB,mBAAqBvoB,EAAO7F,cAAcvB,QAAQC,OACvEyO,EAAMkhB,YAGNlhB,EAAM+5F,KAAKrhG,EAAO8K,aAAa6sC,oBAGhCrwC,GAEXo4I,EAAa9nJ,UAAU6gD,SAAW,SAAUphD,EAAOW,GAE/C,MADqBgP,IAAehP,KAAYX,EAAOoe,KAAKxO,eAAejP,EAAOF,QAAQ,IAG9F4nJ,EAAa9nJ,UAAUgoJ,gBAAkB,SAAUhnJ,EAAS6O,EAAY1O,EAAMyV,OACvD,KAAfA,IAAyBA,EAAa,EAC1C,IAAIiC,MACA5X,EAAS4O,EAAW5O,MACxB,IAAIA,EAAQ,CACR,IAAK,GAAIK,GAAI,EAAGA,EAAIL,EAAQK,IAAKsV,IAAc,CAC3C,GAAI0P,IAAYtkB,UAAU,EAC1BskB,GAAQnmB,KAAO0P,EAAWvO,GAC1BglB,EAAQ3gB,MAAQiR,EACZzV,EAAKoS,YAC2B,QAA5BpS,EAAKyR,mBACL0T,EAAQtkB,UAAW,EAEc,aAA5Bb,EAAKyR,oBACViL,KAAKzV,OAAO4L,cAAgB6J,KAAKzV,OAAO4L,aAAa4C,KACrD0P,EAAQtkB,SAAWb,EAAK6S,aAAa4C,GAAY5U,UAGzD,IAAIiB,GAAM,GAAIozB,IAAI/P,EAClBrjB,GAAIwK,MAAQoQ,KAAK8e,cAAc37B,EAASG,GACxC0X,EAAK9W,KAAKkB,GAEd4a,KAAKoqI,eAAepvI,GAExB,MAAOA,IAEXivI,EAAa9nJ,UAAU28B,cAAgB,SAAU37B,EAASG,GACtD,GAAIsM,KACJ,IAAItM,EAAK+mJ,eAEL,IAAK,GADDtlJ,GAAMzB,EAAK+mJ,eACN5mJ,EAAI,EAAGsB,EAAMtB,EAAGA,IACrBmM,EAAM1L,KAAK8b,KAAKme,gBAAiB7O,WAAS4R,QAGlD,KAAK,GAAIrxB,GAAK,EAAGklB,EAAY5xB,EAAS0M,EAAKklB,EAAU3xB,OAAQyM,IAAM,CAC/D,GAAI9B,GAAMgnB,EAAUllB,EACpBD,GAAM1L,KAAK8b,KAAKme,aAAapwB,EAAKuhB,WAASK,OAE/C,MAAO/f,IAEXq6I,EAAa9nJ,UAAUmoJ,cAAgB,SAAU9xI,GAC7C,GAEIyd,GAFAvN,EAAQ1I,KACRuqI,KAEAC,EAAWhyI,EAAQjB,sBACvB,IAAIizI,EAASpnJ,OAAQ,CACjB,IAAK,GAAIK,GAAI,EAAGA,EAAI+mJ,EAASpnJ,OAAQK,IAAK,CACtC,GAAI8oG,GAAW,UAAYi+C,GAAS/mJ,GAAGuO,WACnC,GAAIC,eAAYu4I,EAAS/mJ,GAAGuO,WAAWtM,QACvC8kJ,EAAS/mJ,GAAGuO,UAChBu4I,GAAcrmJ,KAAKqoG,EAAQ31E,aAAa,GAAI9kB,WAEhDmkB,EAAUiwB,QAAQsmD,IAAI+9C,GAAe7zH,KAAK,SAAU1zB,GAChD,IAAK,GAAIU,GAAI,EAAGA,EAAI8mJ,EAASpnJ,OAAQM,IACjCglB,EAAMlX,eAAeg5I,EAAS9mJ,GAAGrB,OAASW,EAAEU,GAAGgC,SAK3D,MAAOuwB,IAEXg0H,EAAa9nJ,UAAUsoJ,WAAa,SAAUtnJ,EAASunJ,GAE/C1qI,KAAKkqI,oBADLQ,EAMJ1qI,KAAK82B,SAAW9/B,GAAmB7T,EAEnC,KAAK,GADD6X,MACKvX,EAAI,EAAGA,EAAIuc,KAAK82B,SAAUrzC,IAC/BuX,EAAKvX,GAAK,GAAI+0B,QACdxd,EAAKvX,GAAGmM,QAIZ,OAFAoL,GAAOgF,KAAKoqI,eAAepvI,GAC3BA,EAAOgF,KAAK2qI,mBAAmB3vI,EAAM7X,IAC5B6X,KAAMA,EAAM7X,QAAS6c,KAAK4qI,sBAAsBznJ,KAE7D8mJ,EAAa9nJ,UAAU0oJ,kBAAoB,SAAUh6I,GACjD,GAAIjP,GAAQkW,WAAWjH,EACvB,QAAgC,IAAxBA,EAAMnJ,QAAQ,KAAgBsY,KAAKzV,OAAOK,QAAQzB,wBAAwBT,MAAQ9G,EAAQ,IAAOA,GAE7GqoJ,EAAa9nJ,UAAUyoJ,sBAAwB,SAAUznJ,EAAS2nJ,OACxC,KAAlBA,IAA4BA,KAChC,KAAK,GAAIj7I,GAAK,EAAG0oB,EAAYp1B,EAAS0M,EAAK0oB,EAAUn1B,OAAQyM,IAAM,CAC/D,GAAItN,GAASg2B,EAAU1oB,EACnBtN,GAAOynB,WAGNznB,EAAOY,SAMJZ,EAAOoG,SAAWqX,KAAKkqI,oBAEP,IADFlqI,KAAK+qI,aAAaxoJ,EAAQ,IAEpCyd,KAAK4qI,sBAAsBroJ,EAAOY,QAAS2nJ,IAR/CvoJ,EAAOoG,SAAWqX,KAAKkqI,oBACvBY,EAAc5mJ,KAAK3B,IAY/B,MAAOuoJ,IAEXb,EAAa9nJ,UAAUwoJ,mBAAqB,SAAU3vI,EAAMsX,GAExD,IAAK,GADDnvB,GAAUmvB,EACL7uB,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAC3BN,EAAQM,GAAGumB,WACZhP,EAAOgF,KAAKgrI,gBAAgB7nJ,EAAQM,GAAIuX,EAAM,GAGtD,OAAOA,IAEXivI,EAAa9nJ,UAAU6oJ,gBAAkB,SAAU14H,EAAM24H,EAAUnjJ,GAC/D,GAAKwqB,EAAKnvB,UAA6B,IAAjBmvB,EAAK3pB,UAAqBqX,KAAKkqI,mBAAuB53H,EAAKtI,UAG5E,GAAIsI,EAAKnvB,QAAS,CACnB,GAAIs2B,GAAUzZ,KAAK+qI,aAAaz4H,EAAM,EAClCmH,IACAwxH,EAASnjJ,GAAO8H,MAAM1L,KAAK,GAAI80B,KAC3BQ,SAAUlK,WAASkpB,cAAej2C,OAAQ+vB,EAAMmH,QAASA,IAIjE,KAAK,GADDyxH,OAAoB,GACfznJ,EAAI,EAAGsB,EAAMutB,EAAKnvB,QAAQC,OAAQK,EAAIsB,EAAKtB,IAC5C6uB,EAAKnvB,QAAQM,GAAGkF,UAAYuiJ,IAC5BA,GAAoB,GAExBD,EAAWjrI,KAAKgrI,gBAAgB14H,EAAKnvB,QAAQM,GAAIwnJ,EAAUnjJ,EAAQ,QAdvEmjJ,GAASnjJ,GAAO8H,MAAM1L,KAAK8b,KAAKme,aAAa7L,EAAMhD,WAASmnB,OAAQz2B,KAAK82B,SAAWhvC,EAAOA,GAiB/F,OAAOmjJ,IAEXhB,EAAa9nJ,UAAUg8B,aAAe,SAAUnJ,EAAYwE,EAAUG,EAAS1b,GAC3E,GAAIktI,IACAxiJ,QAAWqsB,EAAWrsB,QACtBy2B,WAAc5F,IAAalK,WAASK,KACpCptB,OAAUyyB,EACVwE,SAAYA,EACZG,QAAWA,EACX7xB,MAASmW,EAKb,SAHKktI,EAAOxxH,SAAWwxH,EAAOxxH,QAAU,UAC7BwxH,GAAOxxH,QAEX,GAAIX,IAAKmyH,IAEpBlB,EAAa9nJ,UAAUioJ,eAAiB,SAAUpvI,GAE9C,GAAIxC,GAAUwH,KAAKzV,OACf4a,IACA3M,GAAQyO,6BACR9B,EAAgB3M,EAAQ2iB,yBAE5B,KAAK,GAAI13B,GAAI,EAAGsB,EAAMiW,EAAK5X,OAAQK,EAAIsB,EAAKtB,IACxC,GAAI+U,EAAQuQ,cACR,IAAK,GAAIrlB,GAAI,EAAGgzC,EAAQl+B,EAAQ9T,cAAcvB,QAAQC,OAAQM,EAAIgzC,EAAOhzC,IACjE8U,EAAQyO,6BAA4D,IAA9B9B,EAAczd,QAAQhE,IAGhEsX,EAAKvX,GAAGmM,MAAM4V,OAAO,EAAG,EAAGxF,KAAKme,gBAAiB7O,WAAS8nB,cAItE,OAAOp8B,IAEXivI,EAAa9nJ,UAAU4oJ,aAAe,SAAUxoJ,EAAQiC,GACpD,GAAIjC,EAAOY,QACP,IAAK,GAAIM,GAAI,EAAGA,EAAIlB,EAAOY,QAAQC,OAAQK,IACvCe,EAAQwb,KAAK+qI,aAAaxoJ,EAAOY,QAAQM,GAAIe,QAI7CjC,EAAOoG,SAAWqX,KAAKkqI,oBACvB1lJ,GAGR,OAAOA,IAEXylJ,EAAa9nJ,UAAUipJ,eAAiB,SAAUC,EAAUC,GAC7C9jJ,OAAOC,KAAK4jJ,GAAU14I,KAAK,SAAUf,GAC5C,OAAQy5I,EAASz5I,MAGjB05I,KAGRrB,EAAa9nJ,UAAUopJ,eAAiB,SAAUF,EAAUG,EAAc5xI,GACtE,GAAI8O,GAAQ1I,IACZ,OAAO,YACHqrI,EAASG,EAAahhJ,KAAM,EAC5Bke,EAAM0iI,eAAeC,EAAUzxI,KAIvCqwI,EAAa9nJ,UAAUspJ,gBAAkB,SAAUnoJ,EAAM8B,EAAKsmJ,EAAYL,GACtE,GAAIG,GAAe,GAAItoE,IAAKljE,KAAKzV,OAAOu2F,gBAAgBqgC,aAAa79H,EAAM8B,EAAKsmJ,GAChFpoJ,GAAKq5B,YAAa,CAElB6uH,GAAmB,eACflnH,SAAUhhC,EAAKsH,QAAQJ,GACvB42H,kBAAmB99H,EAAK8V,0BACxBioH,eAAgB/9H,EAAKoS,UAAU+lF,YAC/BD,oBAAqBhzF,WAASgjJ,EAAa/vD,YAAar2F,EAAI9C,MAC5Dg/H,cAAel8H,EAAI9C,KAEvB,IAAIqpJ,GAAWlgJ,EAAO,cAClBb,EAAU6B,gBAAc,OACxBjC,GAAImhJ,EAAUz+I,OAAQ,iBAK1B,OAHA/G,UAASwG,KAAKb,YAAYlB,GAC1B4gJ,EAAahhJ,GAAKmhJ,EAClBN,EAASM,IAAY,GACZj2I,UAAW81I,EAAc5gJ,QAASA,IAE/Cq/I,EAAa9nJ,UAAUypJ,qBAAuB,SAAUzoJ,GAEpD,IAAK,GADD0oJ,MACKpoJ,EAAI,EAAGD,EAAcL,EAASM,EAAID,EAAYJ,OAAQK,IAC/B,aAAxBD,EAAYC,GAAGE,MACfkoJ,EAAkB3nJ,KAAKV,EAAYC,GAG3C,OAAOooJ,IAGX5B,EAAa9nJ,UAAUuiC,kBAAoB,WACvC,MAAO1kB,MAAKxO,gBAETy4I,KAOP6B,GAAsC,WACtC,QAASA,GAAqBpkI,GAC1B1H,KAAK6J,eAAiB,GAAIrC,IAAeE,GACzC1H,KAAK+rI,qBAAuB,GAAIn3I,wBAAqB8S,GAwEzD,MArEAokI,GAAqB3pJ,UAAU6pJ,qBAAuB,SAAU98I,EAAM+8I,GAClE,OAAKzpJ,oBAAkB0M,EAAKtN,QAAUsN,EAAKtN,MAChCoe,KAAK6J,eAAera,kBAAkBy8I,GAAc/8I,EAAKtN,OAGzD,IAIfkqJ,EAAqB3pJ,UAAU+pJ,gBAAkB,SAAUh9I,EAAMi9I,GAI7D,GAHIj9I,EAAKuC,eACLvC,EAAKtN,MAAQ4G,WAAS0G,EAAK3M,OAAO+F,gBAAiBiJ,GAAerC,EAAK3M,UAAY2M,EAAKtN,OAAO,KAE1E,WAArBsN,EAAK3M,OAAOoB,UAA4CoJ,KAAvBmC,EAAK3M,OAAO+M,QAA+C,KAAvBJ,EAAK3M,OAAO+M,OACjF,MAAOJ,GAAKtN,OAAwB,IAAfsN,EAAKtN,MACtBoe,KAAK+rI,qBAAqBpsI,iBAAkBrQ,OAAQJ,EAAK3M,OAAO+M,SAAUJ,EAAKtN,OAAS,EAE3F,IAAyB,YAArBsN,EAAK3M,OAAOoB,MAAqC,KAAfuL,EAAKtN,MAC5C,MAAOsN,GAAKtN,MAAQ,OAAS,OAG5B,IAA0B,SAArBsN,EAAK3M,OAAOoB,MAAwC,aAArBuL,EAAK3M,OAAOoB,MAA4C,SAArBuL,EAAK3M,OAAOoB,UAA2CoJ,KAAvBmC,EAAK3M,OAAO+M,OAwCpH,OAAM9M,oBAAkB0M,EAAK3M,OAAOoB,OAAUnB,oBAAkB0M,EAAKtN,SAAYY,oBAAkB0M,EAAKtN,OAI7F,GAHCsN,QAAYe,UArCxB,IAH0B,gBAAff,GAAKtN,QACZsN,EAAKtN,MAAQ,GAAIuR,MAAKjE,EAAKtN,QAEG,gBAAvBsN,GAAK3M,OAAO+M,OAAqB,CACxC,GAAIA,OAAS,GACT88I,EAAUl9I,EAAK3M,OAAO+M,MAU1B,OARIA,GADqB,SAArBJ,EAAK3M,OAAOoB,KACHwoJ,GAAiBxoJ,KAAM,OAAQ2L,OAAQ88I,IAAczoJ,KAAM,OAAQ0L,SAAU+8I,GAE5D,SAArBl9I,EAAK3M,OAAOoB,KACRwoJ,GAAiBxoJ,KAAM,OAAQ2L,OAAQ88I,IAAczoJ,KAAM,OAAQ0L,SAAU+8I,GAG7ED,GAAiBxoJ,KAAM,WAAY2L,OAAQ88I,IAAczoJ,KAAM,WAAY0L,SAAU+8I,GAE3FpsI,KAAKgsI,qBAAqB98I,EAAMI,GAGvC,GAAIJ,EAAK3M,OAAO+M,iBAAkB9H,aAAsCuF,KAA5BmC,EAAK3M,OAAO+M,OAAO3L,KAC3D,MAAQuL,GAAKtN,MAAMqO,UAInB,IAAIg8I,OAAe,EAWnB,OARIA,GAFqB,SAArB/8I,EAAK3M,OAAOoB,MAEKA,KAAMuL,EAAK3M,OAAO+M,OAAO3L,KAAM2L,OAAQJ,EAAK3M,OAAO+M,OAAOA,OAAQD,SAAUH,EAAK3M,OAAO+M,OAAOD,UAEtF,SAArBH,EAAK3M,OAAOoB,MACAA,KAAM,OAAQ2L,OAAQJ,EAAK3M,OAAO+M,OAAOA,OAAQD,SAAUH,EAAK3M,OAAO+M,OAAOD,WAG9E1L,KAAM,WAAY2L,OAAQJ,EAAK3M,OAAO+M,OAAOA,OAAQD,SAAUH,EAAK3M,OAAO+M,OAAOD,UAEhG2Q,KAAKgsI,qBAAqB98I,EAAM+8I,IAahDH,KChVPO,GAA6B,WAK7B,QAASA,GAAY9hJ,EAAQiY,GAEzBxC,KAAKssI,QACLtsI,KAAKusI,aACLvsI,KAAKhF,QACLgF,KAAK7c,WACL6c,KAAK9S,UACL8S,KAAKwsI,UAAY,EACjBxsI,KAAKysI,QAAU,gBACfzsI,KAAK0sI,qBAAsB,EAC3B1sI,KAAK2sI,aAAc,EACnB3sI,KAAK4sI,oBAAqB,EAC1B5sI,KAAKxO,kBACLwO,KAAKqrI,YACLrrI,KAAK6sI,SACL7sI,KAAKzV,OAASA,EACdyV,KAAK2hB,OAAS,GAAIsoH,IAAa1/I,GAC/ByV,KAAKwC,QAAUA,EACfxC,KAAK8gC,KAAO9gC,KAAKwC,QAAQpT,WAAW,gBA08BxC,MAr8BAi9I,GAAYlqJ,UAAUguB,cAAgB,WAClC,MAAO,eAEXk8H,EAAYlqJ,UAAU2qJ,KAAO,SAAUxpJ,GACd,OAAjBA,EAAKsH,SAAwC,KAApBtH,EAAKsH,QAAQJ,KACtClH,EAAKsH,QAAQJ,IAAK,GAAI2I,OAAO45I,cAC7B/sI,KAAK4sI,oBAAqB,GAE9B5sI,KAAKzV,OAASjH,EACV0c,KAAKzV,OAAO2lB,cAGhBlQ,KAAKgtI,gBAAcjgJ,GACnBiT,KAAKssI,QACLtsI,KAAKusI,aACLvsI,KAAKhF,QACLgF,KAAK7c,WACL6c,KAAK9S,UACL8S,KAAKwsI,UAAY,EACjBxsI,KAAKitI,WAASlgJ,GACdiT,KAAKysI,QAAU,gBACfzsI,KAAK0sI,qBAAsB,EAC3B1sI,KAAKktI,qBAAuB,GAAIpB,IAAqBxoJ,EAAK0oD,QAC1D1oD,EAAKkH,GAAKiB,EAAO,aACjBuU,KAAKqrI,SAAS/nJ,EAAKkH,KAAM,IAY7B6hJ,EAAYlqJ,UAAU29F,IAAM,SAAUj8F,EAAMX,EAAkBw8F,EAAkBC,EAAUwtD,EAAOvtD,GAC7F,GAAIt8F,GAAOO,CAMXmc,MAAKqrI,YACDxnJ,EAAK6R,YAAgBlT,oBAAkBU,IAA8D,SAAzCA,EAAiBkqJ,uBAC7EvpJ,EAAKsS,aAAeV,GAAkB5R,GAAMsS,aAEhD,IAAIjH,IACAkT,YAAa,oBAAqB+mI,WAAY7lJ,EAAM2jC,QAAQ,EAC5Dy4D,iBAAkBA,EAAkBC,SAAUA,EAAUwtD,MAAOA,EAAOvtD,OAAQA,EAGlF,OADAt8F,GAAKq0B,QvF0LkB,oBuF1LgBzoB,GACnCA,EAAW,OACJ,GAAIg3C,SAAQ,SAAUtsC,EAASmd,GAClC,MAAOnd,QAGfoG,KAAKzV,OAAOyoB,IAAI,kBAAmBhT,KAAKmQ,iBACxCnQ,KAAK1d,KAAO,GAAIqtB,IAAKrsB,GACrB0c,KAAKgtI,aAAc,EACnBhtI,KAAK4/E,OAAS1wF,EAAU,OAEpB8Q,KAAK2sI,cADLz9I,EAAQ,OACWA,EAAQ,MAK3BjM,EAAgBC,IAChBG,EAAiCH,EAAkBI,GAEhD0c,KAAKqtI,eAAe/pJ,EAAMJ,EAAkBgM,EAAc,iBAAGA,EAAW,YAEnFm9I,EAAYlqJ,UAAUmrJ,iBAAmB,SAAU1zI,GAC/CoG,KAAKgtI,aAAc,EACnBhtI,KAAKzV,OAAOotB,QvFqKa,sBuFrKuB3X,KAAK4/E,QAAW3pE,QAASjW,KAAKutI,iBAC9EvtI,KAAKzV,OAAOyoB,IAAI,qBAAsBhT,KAAKmQ,iBAC3CvW,EAAQoG,KAAKssI,MACbtsI,KAAK6sI,MAAMW,WAGfnB,EAAYlqJ,UAAUkrJ,eAAiB,SAAU/pJ,EAAMJ,EAAkBw8F,EAAkBC,GACvF,GAAIj3E,GAAQ1I,IACZ,IAAKxd,oBAAkBU,IAAsBV,oBAAkBU,EAAiB8O,YAkB3E,CAAA,GAAKxP,oBAAkBU,IAAqD,gBAAhCA,EAAiBwoJ,WAO7D,CACD,GAAI+B,KAGJ,OAFAA,GAAavpJ,KAAK8b,KAAK1d,KAAK0uB,WAAYi5H,GAAav4H,SAASpuB,EAAM0c,KAAK1d,QACzEmrJ,EAAavpJ,KAAK8b,KAAK2hB,OAAO2oH,cAAchnJ,IACrC,GAAI4iD,SAAQ,SAAUtsC,EAASmd,GAClCmvB,QAAQsmD,IAAIihD,GAAc/2H,KAAK,SAAU1zB,GACrC0lB,EAAMokI,KAAKxpJ,GACXolB,EAAMglI,oBAAoBpqJ,EAAMJ,EAAkBw8F,EAAkBC,EAAU38F,EAAE,IAAI0zB,KAAK,WACrFhO,EAAM4kI,iBAAiB1zI,OAE5B+c,MAAM,SAAU3zB,GACf+zB,EAAOrO,EAAM4jI,MACb5jI,EAAMne,OAAOotB,QvF/IN,gBuF+IoC30B,OAlBnD,MAAO,IAAIkjD,SAAQ,SAAUtsC,EAASmd,GAClCrO,EAAMokI,KAAKxpJ,GACXolB,EAAMglI,oBAAoBpqJ,EAAMJ,EAAkBw8F,EAAkBC,EAAUj3E,EAAMne,OAAO8O,yBAC3FqP,EAAM4kI,iBAAiB1zI,KArBrB1W,EAAiB8O,qBAAsBC,iBACzC/O,EAAiB8O,WAAa,GAAIC,eAAY/O,EAAiB8O,YAEnE,IAAI0xC,GAAUxgD,EAAiB2O,MAAQ3O,EAAiB2O,MAAQ,GAAIC,QAIpE,QAHItP,oBAAkBkhD,EAAQiqG,kBAAoBrqJ,EAAK+I,cACnDq3C,EAAQiqG,iBAAkB,GAEvB,GAAIznG,SAAQ,SAAUtsC,EAASmd,GAChB7zB,EAAiB8O,WAAW4kB,aAAa8sB,GAC/ChtB,KAAK,SAAU9a,GACvB8M,EAAMokI,KAAKxpJ,GACXolB,EAAMglI,oBAAoBpqJ,EAAMJ,EAAkBw8F,EAAkBC,EAAU/jF,GAAG8a,KAAK,WAClFhO,EAAM4kI,iBAAiB1zI,UA8B3CyyI,EAAYlqJ,UAAUurJ,oBAAsB,SAAUpqJ,EAAMJ,EAE5Dw8F,EAAkBC,EAAU/jF,GACxB,GAAI8M,GAAQ1I,IACZA,MAAK4tI,iBAAmBtqJ,EAAKoB,cAAcvB,QAAQC,MACnD,IACI8rG,GADA2+C,EAAY,EAEZ7yI,KACA87B,EAAW9/B,GAAmB1T,EAAKH,SACnC2qJ,GAA6BtrJ,oBAAkBU,EAsDnD,OArDI4qJ,KAA8BtrJ,oBAAkBU,EAAiB6qJ,kBAEjE/tI,KAAKysI,QAAYjqJ,oBAAkBU,EAAiB6qJ,eAAepqJ,MAA+C,gBAAvCT,EAAiB6qJ,eAAepqJ,KACtGnB,oBAAkBU,EAAiB6qJ,eAAeF,aACnDA,EAAY3qJ,EAAiB6qJ,eAAeF,YAGhDrrJ,oBAAkBm9F,IAClB3/E,KAAKusI,aACLvsI,KAAKhF,QACLgF,KAAK7c,WACL6c,KAAK9S,WAEiB,aAAjB8S,KAAKysI,SACVzsI,KAAKusI,UAAY5sD,EAASquD,WAC1BhuI,KAAKhF,QACLgF,KAAK7c,WACL6c,KAAK9S,OAASyyF,EAASzyF,SAGvB8S,KAAKusI,aACLvsI,KAAKhF,KAAO2kF,EAASquD,WAAW,GAAGhzI,KACnCgF,KAAK7c,QAAUw8F,EAASquD,WAAW,GAAG7qJ,QACtC6c,KAAK9S,OAASyyF,EAASzyF,OACvB8S,KAAKwsI,UAAaxsI,KAAKhF,KAAKgF,KAAKhF,KAAK5X,OAAS,GAAG0E,MAAQ+lJ,EAC1D7tI,KAAKwsI,aAELsB,IACKtrJ,oBAAkBk9F,IAgBdl9F,oBAAkBU,EAAiBglD,SACpCloC,KAAKiuI,mBAAmB7zI,KAAKC,MAAMD,KAAK6+D,UAAU/1E,EAAiBglD,UAElE1lD,oBAAkBU,EAAiB+pJ,UACpCjtI,KAAKitI,OAAS7yI,KAAKC,MAAMD,KAAK6+D,UAAU/1E,EAAiB+pJ,YAnBxDzqJ,oBAAkBU,EAAiBglD,UAAYw3C,GAAqC,aAAjB1/E,KAAKysI,SACzEzsI,KAAKiuI,mBAAmB7zI,KAAKC,MAAMD,KAAK6+D,UAAU/1E,EAAiBglD,UAElE1lD,oBAAkBU,EAAiB+pJ,UACf,kBAAjBjtI,KAAKysI,QACA/sD,IACD1/E,KAAKitI,OAAS7yI,KAAKC,MAAMD,KAAK6+D,UAAU/1E,EAAiB+pJ,UAI7DjtI,KAAKitI,OAAS7yI,KAAKC,MAAMD,KAAK6+D,UAAU/1E,EAAiB+pJ,YAazEjtI,KAAK0sI,sBAAuBoB,GAA4B5qJ,EAAiBwpJ,oBAClE,GAAIxmG,SAAQ,SAAUtsC,EAASmd,GAClCzzB,EAAK+mJ,eAAiB,EACtBrvI,EAAO0N,EAAMwlI,kBAAkB5qJ,EAAMJ,EAAkB0Y,GACvD8M,EAAM4iI,cAAgB1xI,EACtB8O,EAAM2iI,SAAS/nJ,EAAKkH,KAAM,EAC1Bke,EAAMiZ,OAAOypH,eAAe1iI,EAAM2iI,SAAU3iI,EAAM4iI,iBACnD50H,KAAK,WACJ,GAAIy3H,KAeJ,IAdAzlI,EAAM0lI,aAAapzI,EAAMA,EAAK,GAAGlT,MAAOqmJ,GACxCzlI,EAAM1N,KAAO0N,EAAM1N,KAAKxE,OAAO23I,GAE1B3rJ,oBAAkBkmB,EAAMukI,UACF,kBAAlBvkI,EAAM+jI,UAAgC/sD,GAAwC,aAAlBh3E,EAAM+jI,UACnE/jI,EAAM2lI,mBAAmB3lI,EAAMukI,QAGnCvkI,EAAMvlB,QAAQC,OAAS,IACvBslB,EAAMmkI,MAAM1pJ,QAAUulB,EAAMvlB,SAGhCulB,EAAMmkI,MAAM7xI,KAAO0N,EAAM1N,KACzB0N,EAAMmkI,MAAM3qI,UAAYwG,EAAMne,OAAO2X,UACjCwG,EAAMne,OAAOue,gBAAkBxlB,EAAKiX,oBAAoBnX,QAAU0qJ,GAClE5qJ,EAAiBorJ,aAAc,CAC/B,GAAIC,IACAnpJ,IAAK0xC,EAAUv0C,OAAQmmB,EAAMklI,iBAAmBllI,EAAMklI,iBAAmB,EACrEllI,EAAMmkI,MAAM1pJ,QAAQ,GAAG2E,MAAO41D,QAASh1C,EAAMmkI,MAAM7xI,KAAK5X,OAAQorJ,WAAY9lI,EAAMmkI,MAAM1pJ,QAAQC,OAExGslB,GAAMmkI,MAAM0B,YAAcA,EAM9B,GAJA7lI,EAAM6jI,UAAUroJ,KAAKwkB,EAAMmkI,OAC3BnkI,EAAM4jI,KAAK0B,WAAatlI,EAAM6jI,UAC9B7jI,EAAM4jI,KAAKp/I,OAASwb,EAAMxb,OAC1B5J,EAAKuvB,OAAO,iBAAkBnK,EAAM4jI,OAC/B5sD,EAAkB,CACnB,GAAIh3E,EAAMikI,YAAa,CACfp9I,cAAcjM,EAAK2L,mBACnByZ,EAAM4jI,KAAKr9I,iBAAmB3L,EAAK2L,kBAEnC6+I,IAA8BtrJ,oBAAkBU,EAAiBgsG,YAC/B,MAA/BhsG,EAAiBgsG,YACpBA,EAAYhsG,EAAiBgsG,UAG7Bo9C,GAAO,GAAImC,YAAS/lI,EAAM4jI,KAAM,MAAOhpJ,EAAK0oD,OAAQ1oD,EAAKorJ,aAAcx/C,EACtExmF,GAAMk3E,OASPl3E,EAAM6kI,YAAcjB,EAAKqC,WAAW,YARhCb,GAA6B5qJ,EAAiB0rJ,SAC9CtC,EAAKuC,KAAK3rJ,EAAiB0rJ,UAG3BtC,EAAKuC,KAAK,kBAOjB,CACD,GAAIvC,GAAO,GAAImC,YAAS/lI,EAAM4jI,KAAM,OAAQhpJ,EAAK0oD,OAAQ1oD,EAAKorJ,aACzDhmI,GAAMk3E,OASPl3E,EAAM6kI,YAAcjB,EAAKqC,WAAW,qEARhCb,GAA6B5qJ,EAAiB0rJ,SAC9CtC,EAAKuC,KAAK3rJ,EAAiB0rJ,UAG3BtC,EAAKuC,KAAK,eAOlBnmI,EAAMkkI,qBACNtpJ,EAAKsH,QAAQJ,GAAK,UAEflH,GAAK6S,aAEhB,MAAOwpF,MAGf0sD,EAAYlqJ,UAAUisJ,aAAe,SAAUpzI,EAAM8zI,EAAcX,GAC/D,IAAKnzI,EAAK5X,OACN,MAAO0rJ,EAEX,KAAK,GAAIrrJ,GAAI,EAAGA,EAAIuX,EAAK5X,OAAQK,IAAK,CAClC,GAAI2B,GAAM4V,EAAKvX,GACXsrJ,EAAY3pJ,EAAI2pJ,SAChBA,IACA3pJ,EAAI0C,MAAQgnJ,UACL1pJ,GAAI2pJ,UACXZ,EAAcjqJ,KAAKkB,GACnB0pJ,EAAe9uI,KAAKouI,aAAaW,EAAWD,EAAcX,KAG1D/oJ,EAAI0C,MAAQgnJ,IACZX,EAAcjqJ,KAAKkB,IAG3B,MAAO0pJ,IAEXzC,EAAYlqJ,UAAU+rJ,kBAAoB,SAAU5qJ,EAAMJ,EAAkB0Y,GACxE,GAAIozI,MACAp5I,EAAWoK,KAAKzV,OAAOsL,iBAAmBmK,KAAKzV,OAAOuL,kBACrDtT,qBAAkBU,IAAsBV,oBAAkBU,EAAiB+rJ,SAC5EjvI,KAAKivI,MAAQ/rJ,EAAiB+rJ,OAE9B3rJ,EAAKoS,YAAclT,oBAAkBU,KACrCI,EAAKyR,mBAAqB7R,EAAiBkqJ,qBAAuB,WAEtE,IAAIzrH,GAAS,GAAIsoH,IAAa3mJ,EAAM0c,KAAK2hB,OAAO+C,qBAC5CwqH,EAAWjsJ,EAAgBC,GAC3B6E,EAAe7E,EAAiBC,QAASG,EAAK2jB,4BAC9C0a,EAAOiqH,qBAAqBh2I,EAAWtS,EAAK4S,aAAe5S,EAAKH,SAChE0zC,EAAYlV,EAAO8oH,WAAWyE,EAAUlvI,KAAK0sI,qBAC7CyC,EAAc7rJ,EAAKoB,cAAcvB,QAAQC,MAa7C,OAZA4rJ,GAAYhvI,KAAKovI,qBAAqB9rJ,EAAMuzC,EAAWs4G,EAAaH,GAShEA,EAPCxsJ,oBAAkBU,IAAsBV,oBAAkBU,EAAiB8O,aAAiB9O,EAAiB8O,qBAAsBC,eAG9HzP,oBAAkBU,IAAqD,gBAAhCA,EAAiBwoJ,WAIlD1rI,KAAKqvI,qBAAqB/rJ,EAAMsY,EAAGi7B,EAAW3zC,MAAkB6J,GAAWiiJ,EAAWrtH,GAHtF3hB,KAAKqvI,qBAAqB/rJ,EAAMsY,EAAGi7B,EAAW3zC,EAAkBI,EAAK8lC,gBAAiB4lH,EAAWrtH,GAHjG3hB,KAAKqvI,qBAAqB/rJ,EAAMsY,EAAGi7B,EAAW3zC,EAAkBA,EAAiB8O,WAAYg9I,EAAWrtH,GAQxHr+B,EAAKuvB,OvFAgB,oBuFAiBm8H,UAAWA,EAAWrrJ,KAAM,UAC3DqrJ,GAEX3C,EAAYlqJ,UAAUktJ,qBAAuB,SAAU/rJ,EAAMgsJ,EAAYz4G,EAAW3zC,EAAkBqsJ,EAAoBC,EAAU7tH,GAChI,GAAIyiB,EAaJ,IAXIA,GADC5hD,oBAAkB+sJ,IAAuBA,EAAmBnsJ,OACpDmsJ,EAGAD,EAAW5pJ,OAEnBlD,oBAAkB4hD,EAAO3jB,OAI1BzgB,KAAKyvI,kBAAkBnsJ,EAAM8gD,EAAQvN,EAAW,EAAG,EAAG3zC,EAAkBssJ,EAAU7tH,GAHlF3hB,KAAK0vI,mBAAmBpsJ,EAAM8gD,EAAQvN,EAAWuN,EAAO3jB,MAAO,EAAGv9B,EAAkBssJ,EAAU7tH,IAK7Fn/B,oBAAkB8sJ,EAAWjjJ,YAC9B,GAAK7J,oBAAkB+sJ,GAGlB,CACD,GAAI7pJ,GAAS4pJ,EAAW5pJ,OAAOT,UAC3BqqJ,EAAW5pJ,OAAOkyB,QAAU03H,EAAW5pJ,MAC3Csa,MAAK2vI,kBAAkBrsJ,EAAMoC,EAAQ8pJ,OALrCxvI,MAAK2vI,kBAAkBrsJ,EAAMgsJ,EAAW5pJ,OAAQ8pJ,EAAUD,EAQlE,OAAOC,IAGXnD,EAAYlqJ,UAAUutJ,mBAAqB,SAAUpsJ,EAAM0O,EAAY6kC,EAAWpW,EAAO1nB,EAAY0mF,EAAuBuvD,EAAWrtH,GACnI,IAAK,GAAI9xB,GAAK,EAAG+/I,EAAe59I,EAAYnC,EAAK+/I,EAAaxsJ,OAAQyM,IAAM,CACxE,GAAIurB,GAAOw0H,EAAa//I,GACpBD,KAGA6oB,IACJA,GAAK3wB,MAHO,EAGS24B,CACrB,IAAI1yB,GAAMzK,EAAKkU,iBAAiB4jB,EAAK/4B,OAEjC6M,GACAtN,MAAOw5B,EAAKxpB,IACZrP,OAAQwL,EACR1E,UAAO0D,GACP0E,aAAc1D,EAAI2c,mBAElB9oB,EAAQ0B,EAAKkU,iBAAiB4jB,EAAK/4B,OAAOgG,WAC1C,MAAS0F,EAAIkb,oBAAwEmS,EAAKxpB,IAAvDoO,KAAKktI,qBAAqBhB,gBAAgBh9I,IAAoB,KACjGksB,GAAK52B,MAAQ,EACb5C,GAASw5B,EAAK52B,MAAQ,SAGtB5C,GAASw5B,EAAK52B,MAAQ,OAE1B,IAAIqrJ,IAAUC,YAAaluJ,EAAO+B,KAAMqc,KAAK2sI,YAAc,MAAQ,QACnE3sI,MAAKzV,OAAOotB,QvF5RQ,qBuF4R2Bk4H,GAC/Cp3H,EAAK72B,MAAQiuJ,EAAMC,YACnBr3H,EAAKpvB,MAAQ2W,KAAK+vI,qBAAqB/vI,KAAKivI,MAC5C,IACIe,GADkB,GAAI5tH,IAA6B9+B,GACTwf,aAAasY,EAG3D,IAFApb,KAAKiwI,eAAe3sJ,EAAM0sJ,EAAyBh+I,EAAWyuB,MAAQzuB,EAAW9M,YAAa8pJ,EAAWhvI,KAAKwsI,WAC9G58I,EAAM1L,KAAKu0B,GACPu2H,EAAUA,EAAU5rJ,OAAS,GAAGwM,MAAMxM,OAAS,EAAG,CAGlD,IAAK,GAFD8sJ,GAASl+I,EAAWyuB,MAAQzuB,EAAW9M,YAAc8qJ,EAAwB,GAAGpgJ,MAAMxM,OACtF+sJ,EAAS,EACJp6I,EAAK,EAAG+e,EAAKk6H,EAAUA,EAAU5rJ,OAAS,GAAGwM,MAAOmG,EAAK+e,EAAG1xB,OAAQ2S,IAAM,CAC/E,GAAIq6I,GAAQt7H,EAAG/e,EACXq6I,GAAMtoJ,MAAQooJ,IACdA,EAASE,EAAMtoJ,OAEfsoJ,EAAMtoJ,MAAQqoJ,IACdA,EAASC,EAAMtoJ,OAEf8H,EAAMA,EAAMxM,OAAS,GAAG0E,QAAUsoJ,EAAMtoJ,OACxC8H,EAAM1L,KAAKksJ,GAMnB,IAHKF,EAASz3H,EAAK3wB,MAAS,IACxB2wB,EAAKgB,QAAUy2H,EAASz3H,EAAK3wB,OAE1BqoJ,EAAUt5G,EAAU1zC,QAAQC,OAASq9B,EAAQzuB,EAAW9M,aAAc,CAEzE,GAAImrJ,KACJA,GAAMvoJ,MAASqoJ,EAAS,EACxBE,EAAMhnJ,MAAQ2W,KAAK+vI,qBAAqB/vI,KAAKivI,OAC7Cr/I,EAAM1L,KAAKmsJ,GACXF,SAGH,CAGD,IAAK,GAFDv/I,GAAO,EAEFykB,EAAK,EAAGC,EAAKuhB,EAAU1zC,QAASkyB,EAAKC,EAAGlyB,OAAQiyB,IACzCC,EAAGD,GACL1sB,SACNiI,GAGR6nB,GAAKgB,QAAWznB,EAAW9M,YAAc0L,EAI7C,GAFAo+I,EAAUA,EAAU5rJ,OAAS,GAAGwM,MAAQA,EACxCoQ,KAAKwsI,YACDxsI,KAAK4tI,iBAAmB,GAAKntH,EAAQ,EAAG,CACxC,GAAI6vH,IAAaC,aAAc9vH,EAAQ,EAAG+vH,aAAa,EACvDxB,GAAUA,EAAU5rJ,OAAS,GAAGktJ,SAAWA,GAE1C9tJ,oBAAkBwP,EAAW9M,cAAgB8M,EAAW9M,YAAc,GACvE8a,KAAK0vI,mBAAmBpsJ,EAAM83B,EAAKz2B,MAAOkyC,EAAWzb,EAAKz2B,MAAM87B,MAAO1nB,EAAY0mF,EAAuBuvD,EAAWrtH,GACrH3hB,KAAK2vI,kBAAkBrsJ,EAAM83B,EAAM4zH,MAAWjiJ,GAAW,EAAUiF,EAAW9M,aAAa,KAG3F6T,EAAaiH,KAAKyvI,kBAAkBnsJ,EAAM83B,EAAKz2B,MAAOkyC,IAAoB99B,EAAY0mF,EAAuBuvD,EAAWrtH,GACxH3hB,KAAK2vI,kBAAkBrsJ,EAAM83B,EAAM4zH,MAAWjiJ,MAAoB,MAK9Es/I,EAAYlqJ,UAAUstJ,kBAAoB,SAAUnsJ,EAAM8gD,EAAQvN,EAAWpW,EAAO1nB,EAAY0mF,EAAuBuvD,EAAWrtH,GAK9H,IAAK,GAJD75B,GAAQ,EACR8H,KACAzM,EAAU0zC,EAAU1zC,QAEf0M,EAAK,EAAGmF,EADN2sB,EAAOwoH,gBAAgBhnJ,EAASihD,EAAQ9gD,EAAMyV,GACzBlJ,EAAKmF,EAAO5R,OAAQyM,IAAM,CACtD,GAAIzK,GAAM4P,EAAOnF,EACjBD,MACAmJ,IACAjR,EAAQ,CAER,KAAK,GADD2oJ,OAAoB,GACfxoJ,EAAI,EAAGlD,EAAMK,EAAIwK,MAAMxM,OAAQ6E,EAAIlD,EAAKkD,IAAK,CAClD,GAAIyoJ,GAAQtrJ,EAAIwK,MAAM3H,EACtB,IAAIyoJ,EAAMl3H,WAAalK,WAASK,KAAhC,CAGA,GAAIptB,GAASmuJ,EAAMnuJ,OACfF,EAAQE,EAAOF,MACfsuJ,EAAanuJ,oBAAkBH,GAAyD,GAAhDE,EAAOH,cAAcC,EAAO+C,EAAI9C,KAAMC,GAC9EX,EAASY,oBAAkBmuJ,GAAyB,GAAZA,EACxCC,MAAS,EAKb,IAJIruJ,EAAOmoB,iBAAmBnoB,EAAOmoB,oBACjCkmI,EAASjvH,EAAOqhB,SAASphD,EAAOW,GAChCX,EAAQ4G,WAASjG,EAAO+F,gBAAiBsoJ,KAExCpuJ,oBAAkBZ,GAAQ,CAC3B,GAAI62B,MACApX,EAAMvZ,EAAQ24B,EAAQn9B,EAAK+mJ,eAE3BwG,GACAvuJ,KAAM8C,EAAI9C,KAAMC,OAAQA,EAAQiP,eAAgBo/I,EAChDhvJ,MAAOA,EAAOyH,UAAO0D,GAAW0sB,QAAS,EAAGhB,KAAMA,EAGtD,IADAn1B,EAAKq0B,QvF9NO,qBuF8N4Bk5H,IACnCruJ,oBAAkBquJ,EAAcC,SAAWtuJ,oBAAkBquJ,EAAcC,MAAMC,QAAS,CACvFvuJ,oBAAkBwd,KAAK6sI,MAAMW,UAC7BxtI,KAAK6sI,MAAMW,UAGf,IAAIwD,IACAF,MAAOD,EAAcC,MAAMC,OAAQ3rJ,IAAK4a,KAAKwsI,UAAWjqJ,OAAQ8e,EAChEq8C,QAAS19C,KAAKwsI,UAAWgC,WAAYntI,EAEzCrB,MAAK6sI,MAAMW,OAAOtpJ,KAAK8sJ,GACvBP,EAAoBI,EAAcC,MAAMxjJ,QAAU,GAClD0S,KAAK7c,QAAQke,EAAM,GAAG3Y,MAAQmoJ,EAAcC,MAAMpoJ,OAASsX,KAAK7c,QAAQke,EAAM,GAAG3Y,MASrF,GAPKlG,oBAAkBquJ,EAAcI,aACjCJ,EAAcp4H,KAAKy4H,WAAcxvJ,OAAQmvJ,EAAcI,UAAUvvJ,QACjEmvJ,EAAcjvJ,MAAQivJ,EAAcI,UAAUE,aAAeN,EAAcjvJ,OAE/E62B,EAAOo4H,EAAcp4H,KACrBA,EAAK3wB,MAAQuZ,EACboX,EAAK72B,MAAQivJ,EAAcjvJ,MACA,KAAvBivJ,EAAcvuJ,MAAegB,EAAK+mJ,gBAA4B,IAAVviJ,EAAa,CACjE,GAAIuB,KACJA,GAAM+nJ,OAAS,OACfP,GAAkBxnJ,MAAOA,GACzBovB,EAAKgB,QAAUn2B,EAAKiX,oBAAoBnX,OACxCq1B,EAAK72B,MAAQoe,KAAK8gC,KAAKvE,YAAY,eAKvC,GAHIs0G,EAAcp3H,QAAU,IACxBhB,EAAKgB,QAAUo3H,EAAcp3H,SAE5Bj3B,oBAAkBquJ,EAAcxnJ,OAKjCovB,EAAKpvB,OAAUwR,KAAMvX,EAAKsH,QAAQJ,GAAK,UAAY1C,EAAQ24B,QALlB,CACzC,GAAI4wH,GAAarxI,KAAKsxI,eAAehuJ,EAAMwE,EAAQ24B,EACnDhI,GAAKpvB,MAAQ2W,KAAKuxI,aAAavxI,KAAK9S,OAAOmkJ,GAAaR,EAAcxnJ,OAK1EuG,EAAM1L,KAAKu0B,GAEf3wB,KAEJ,GAAI0nJ,IAAa1nJ,MAAOkY,KAAKwsI,YAAa58I,MAAOA,EAYjD,IAXKpN,oBAAkBiuJ,KAEnBjB,EAASliJ,OAASmjJ,GAElBzwI,KAAK4tI,iBAAmB,GAAKntH,EAAQ,GACrC+uH,EAASc,UAAaC,aAAc9vH,EAAO+vH,aAAa,GACxDxB,EAAU9qJ,KAAKsrJ,IAGfR,EAAU9qJ,KAAKsrJ,IAEdhtJ,oBAAkBc,EAAKoS,WAAY,CACpCpS,EAAKq5B,YAAa,CAClB,IAAI+uH,IAAelpJ,oBAAkBi9F,IAA0BA,EAAsBisD,WACjFjsD,EAAsBisD,WAAa,WACnC8F,EAAYxxI,KAAK2hB,OAAO8pH,gBAAgBnoJ,EAAM8B,EAAKsmJ,EAAY1rI,KAAKqrI,UACpEG,EAAegG,EAAU97I,UACzB9K,EAAU4mJ,EAAU5mJ,OACxB4gJ,GAAaiG,cACT9vH,EAAO4pH,eAAevrI,KAAKqrI,SAAUG,EAAcxrI,KAAKsrI,eAC5DE,EAAanB,eAAiB/mJ,EAAK+mJ,eAAiB,CACpD,IAAIn7I,IAASwG,UAAW81I,EAAcpmJ,IAAKA,EAAKlC,iBAAkBu8F,EAClEz/E,MAAKzV,OAAOotB,QvF3RO,wBuF2R+BzoB,GAClDs8I,EAAakG,gBAAkB1xI,KAAK2xI,cAAcnC,EAAUhE,EAAc/rD,EAAuBr6F,GACjGomJ,EAAa/wG,SAAS7vC,GAE1BtH,EAAKuvB,OvF7Ne,uBuF6NqBxV,OAAQjY,EAAKzB,KAAM,QAASqrJ,UAAWA,IAEpF,MAAOj2I,IAEXszI,EAAYlqJ,UAAUwvJ,cAAgB,SAAUnC,EAAUhE,EAAcoG,EAAkBC,GACtF,GAAInpI,GAAQ1I,IACZ,OAAO,UAAUta,GACb8lJ,EAAakG,gBAAkB,KAC/BhsJ,EAAOuhC,QAAS,EACa,IAAzBvhC,EAAOA,OAAOtC,SACdsC,EAAOA,QAAU,KAErB8pJ,EAAST,UAAYrmI,EAAMwlI,kBAAkB1C,EAAcoG,EAAkBlsJ,EAG7E,KAAK,GAFDosJ,GAASppI,EAAMne,OAAO7F,cAAcvB,QAAQC,OAC5C4X,EAAOw0I,EAAST,UACXtrJ,EAAI,EAAGA,EAAIuX,EAAK5X,OAAQK,IAC7BuX,EAAKvX,GAAG6sJ,UAAaC,aAAcuB,EAAStG,EAAanB,eACrDmG,aAAcqB,EAAK1tJ,SAAU4tJ,UAAWF,EAAK1tJ,SAMrD,OAJAqnJ,GAAa39H,UACb24E,SAAOglD,EAAa5gJ,SACpB8d,EAAM2iI,SAASG,EAAahhJ,KAAM,EAClCke,EAAMiZ,OAAOypH,eAAe1iI,EAAM2iI,SAAU3iI,EAAM4iI,eAC3CkE,IAIfnD,EAAYlqJ,UAAUwtJ,kBAAoB,SAAUrsJ,EAAM0uJ,EAAKhD,EAAWO,EAAoBzqJ,EAAQmtJ,GAClG,GAAIC,GAAe,GAAIjyH,IAAsB38B,GACzCH,EAAU+uJ,EAAah8I,YAC3B/S,GAAUA,EAAQmW,OAAO,SAAUvL,GAAO,MAAOvL,qBAAkBuL,EAAIic,WAA0B,aAAbjc,EAAIpK,OACpFL,EAAK+I,WAAWjJ,QAAU4c,KAAKzV,SAAWjH,GAC1CA,EAAK6uJ,gBAAgB1pB,oBAEzB,IAAInmI,OAAOyK,EAUX,IALIzK,EAJCE,oBAAkB+sJ,GAIZyC,EAHAzC,MAKIxiJ,KAAXjI,IACAA,EAAS,GAETxB,EAAKoB,cAAcvB,QAAQC,OAAS,GAAK6uJ,EAAS,CAClD,GACIG,GADoB,GAAIrwH,IAA2Bz+B,GACdwf,aAAaxgB,GAAQm+B,MAAOn+B,EAAKm+B,OACtE2xH,GAAiBhvJ,OAAS,IAC1B4rJ,EAAYhvI,KAAKiwI,eAAe3sJ,EAAM8uJ,EAAkBttJ,EAAQkqJ,QAGnE,CACDlqJ,EAASxB,EAAKoB,cAAcvB,QAAQC,OAAS,IAAM6uJ,EAAU3uJ,EAAKoB,cAAcvB,QAAQC,OAAS0B,CACjG,IAAIutJ,GAAQH,EAAapvI,aAAaxgB,EAAM0vJ,EAAI3lJ,WAAY,KAAM,KAAMlJ,EACpEkvJ,GAAMjvJ,OAAS,IAAM6uJ,IACrBjD,EAAYhvI,KAAKiwI,eAAe3sJ,EAAM+uJ,EAAOvtJ,EAAQkqJ,IAG7D,MAAOA,IAGX3C,EAAYlqJ,UAAU8tJ,eAAiB,SAAU3sJ,EAAM0X,EAAMlW,EAAQkqJ,EAAWsD,GAC5E,IAAK,GAAIziJ,GAAK,EAAGsyF,EAASnnF,EAAMnL,EAAKsyF,EAAO/+F,OAAQyM,IAAM,CAKtD,IAAK,GAJDzK,GAAM+8F,EAAOtyF,GACbD,KACA4yB,GAAU,EACV16B,EAAQ,EACHiO,EAAK,EAAG+e,EAAK1vB,EAAIwK,MAAOmG,EAAK+e,EAAG1xB,OAAQ2S,IAAM,CACnD,GAAI0iB,GAAO3D,EAAG/e,GAEVw8I,IACJ,IAAI95H,EAAKe,WAAalK,WAAS6R,qBAG1B1I,EAAK9vB,SAAWqX,KAAK0sI,qBAEtB,GADA5kJ,IACI2wB,EAAK2G,WAAY,CACjBoD,GAAU,CACV,IAAInF,IAAkB76B,oBAAkBi2B,EAAKl2B,OAAO86B,gBAChD6C,GAAuB19B,oBAAkBi2B,EAAKl2B,OAAO29B,qBACrDC,GAAwB39B,oBAAkBi2B,EAAKl2B,OAAO49B,qBAE1D,IADAoyH,EAAMzqJ,MAAQA,EAAQhD,EAASxB,EAAK+mJ,eAChChtH,EACAk1H,EAAM3wJ,MAAQoe,KAAKwyI,iBAAiBljI,WAASwS,QAASrJ,EAAKl2B,OAAO86B,eAAgB5E,EAAMrzB,OAEvF,IAAI86B,EACLqyH,EAAM3wJ,MAAQoe,KAAKwyI,iBAAiBljI,WAAS6S,aAAc1J,EAAKl2B,OAAO29B,oBAAqBzH,EAAMrzB,OAEjG,IAAI+6B,EACLoyH,EAAM3wJ,MAAQoe,KAAKwyI,iBAAiBljI,WAASmT,eAAgBhK,EAAKl2B,OAAO49B,qBAAsB1H,EAAMrzB,OAGrG,KAAK,GAAIiwB,GAAK,EAAGC,EAAK9tB,OAAOC,KAAKrC,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,QAASgzB,EAAKC,EAAGlyB,OAAQiyB,IAClEC,EAAGD,KACDoD,EAAKl2B,OAAOoB,OACfnB,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOowJ,KAGzCjwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOqwJ,SAG9ClwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOswJ,KAG9CnwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOuwJ,KAG9CpwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOwwJ,OAG9CrwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOywJ,WAG9CtwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAO0wJ,YAG9CvwJ,oBAAkB4C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAO2wJ,UACpDT,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAO2wJ,QAH1CT,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,iBAH9DkwJ,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,gBAH9DkwJ,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,YAH9DkwJ,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,UAH9DkwJ,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,UAH9DkwJ,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,cAH9DkwJ,EAAM3wJ,MAAQwD,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAAOo2B,EAAKl2B,OAAOF,MAAQ,UA0B9EkwJ,GAAMlpJ,MAAQ2W,KAAK+vI,qBAAqB/vI,KAAKivI,OAC7CjvI,KAAKizI,eAAex6H,EAAKl2B,OAAQgwJ,EAAMlpJ,MAAOovB,EAAKl2B,OAAOF,MAC1D,IAAI6wJ,GAAgBz6H,EAAKzxB,WAAWqC,KAChC6pJ,GAAcjpI,YACdsoI,EAAMlpJ,MAAM+nJ,OAAS8B,EAAcjpI,UAAU9hB,cAEjD,IAAI+G,IACA9J,IAAKA,EACLzB,KAAM05B,EAAiB,SAAW6C,EAAsB,cAAgB,eACxE72B,MAAOkpJ,EAEXvyI,MAAKzV,OAAOotB,QvFlQK,8BuFkQuCzoB,GACxDU,EAAM1L,KAAKquJ,YAGSxlJ,KAAhBulJ,IACAC,EAAMzqJ,MAAQA,EAAQhD,EAASxB,EAAK+mJ,eACpCkI,EAAMlpJ,MAAQ2W,KAAK+vI,qBAAqB/vI,KAAKivI,OAC7Cr/I,EAAM1L,KAAKquJ,IAK3B,GAAK/vJ,oBAAkB8vJ,GAGlB,CACD,GAAItrF,KACJ,IAAIhnD,KAAK4tI,iBAAmB,GAAK5tI,KAAK4tI,iBAAmB,EAAG,CACxD,GAGI0C,IAAaC,aADLvB,EAAUA,EAAU5rJ,OAAS,GAAgB,SAAmB,aACtCotJ,aAAa,EACnDxpF,IAAUl/D,MAAOkY,KAAKwsI,YAAa58I,MAAOA,EAAO0gJ,SAAUA,OAG3DtpF,IAAUl/D,MAAOkY,KAAKwsI,YAAa58I,MAAOA,EAEzC4yB,IACDwsH,EAAU9qJ,KAAK8iE,OAfnBgoF,GAAU9qJ,MAAO4D,MAAOwqJ,EAAa1iJ,MAAOA,IAmBpD,MAAOo/I,IAEX3C,EAAYlqJ,UAAU8wJ,eAAiB,SAAUllJ,EAAK1E,EAAOhH,GACzD,GAAIE,GAASyd,KAAKzV,OAAOiN,iBAAiBnV,EAC1C,IAA0B,gBAAf0L,GAAIuB,OAAqB,CAChC,GAAIA,GAASvB,EAAIuB,MACjBjG,GAAMuW,aAAgBpd,oBAAkB8M,EAAOA,QAA0BA,EAAOD,SAAvBC,EAAOA,OAC3D9M,oBAAkB8M,EAAO3L,QAC1B0F,EAAM1F,KAAO2L,EAAO3L,KAAKwE,mBAI7BkB,GAAMuW,aAAe7R,EAAIuB,QAExB9M,oBAAkBD,IAAWC,oBAAkB6G,EAAM1F,QACtD0F,EAAM1F,KAAOpB,EAAOoB,KAAKwE,gBAGjCkkJ,EAAYlqJ,UAAUqwJ,iBAAmB,SAAUh5H,EAAUtzB,EAAUuyB,EAAMrzB,GACzE,GAAI+kB,KACJA,GAAWi9B,eAAa93B,WAAUmJ,EAAKe,WAAaqiD,UAAQ31E,EAC5D,IAAI+jD,GACA3nD,EAAO8C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,MAAQo2B,EAAKl2B,OAAOF,MAAQo2B,EAAKl2B,OAAO2wB,WAUxE,OATIlT,MAAKzV,OAAOkhB,SAAWzL,KAAKzV,OAAO01C,OACnCgK,EAAO9/B,EAAWi9B,eAAa93B,WAAUmJ,EAAKe,WAAWl3B,EAAM0d,KAAKzV,QAChEyV,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOihC,mBAIhBye,EAAO9/B,EAAWi9B,eAAa93B,WAAUmJ,EAAKe,WAAWl3B,GAEtD2nD,EAAI,GAAGC,aAElBmiG,EAAYlqJ,UAAUovJ,aAAe,SAAU4B,EAAOC,GAGlD,IAAK,GAFD1tJ,MACA2tJ,EAAW7rJ,OAAOC,KAAK0rJ,GAClBrrJ,EAAQ,EAAGA,EAAQurJ,EAASjwJ,OAAQ0E,IACjB,SAApBurJ,EAASvrJ,KACTpC,EAAO2tJ,EAASvrJ,IAAUqrJ,EAAME,EAASvrJ,IAGjDurJ,GAAW7rJ,OAAOC,KAAK2rJ,EACvB,KAAStrJ,EAAQ,EAAGA,EAAQurJ,EAASjwJ,OAAQ0E,IACjB,SAApBurJ,EAASvrJ,KACTpC,EAAO2tJ,EAASvrJ,IAAUsrJ,EAAMC,EAASvrJ,IAGjD,OAAOpC,IAEX2mJ,EAAYlqJ,UAAUmvJ,eAAiB,SAAUhuJ,EAAM03B,GAEnD,IAAK,GADDlzB,GAAQ,EACH+H,EAAK,EAAGkG,EAAKiK,KAAK9S,OAAQ2C,EAAKkG,EAAG3S,OAAQyM,IAAM,CAErD,GADYkG,EAAGlG,GACLgL,OAASvX,EAAKsH,QAAQJ,GAAK,SAAWwwB,EAC5C,MAAOlzB,EAEXA,OAIRukJ,EAAYlqJ,UAAUitJ,qBAAuB,SAAU9rJ,EAAMuzC,EAAW/xC,EAAQkqJ,GAC5E,GACI/D,GAAWp0G,EAAU77B,KAErBxX,EAAcqzC,EAAU1zC,QACxBmwJ,IACJ,IAAIxuJ,EAAS,EAET,IADA,GAAIgD,GAAQ,EACLA,IAAUhD,GACbkb,KAAK7c,QAAQe,MAAO4D,MAAOA,EAAQ,EAAGY,MAAO,KAC7CZ,GAGR,KAAK,GAAI1C,GAAM,EAAGA,EAAM6lJ,EAAS7nJ,OAAQgC,IAAO,CAG5C,IAAK,GAFDmuJ,GAAmB,EAAIzuJ,EACvB8K,KACKrN,EAAS,EAAGA,EAAS0oJ,EAAS7lJ,GAAKwK,MAAMxM,OAAQb,IAAU,CAEhE,GAAI8G,MACAovB,KACA+6H,EAAWvI,EAAS7lJ,GAAKwK,MAAMrN,EACnC,IAAIixJ,EAASh6H,WAAalK,WAAS8nB,cAAgBo8G,EAASh6H,WAAalK,WAAS+nB,aAAlF,CAIA,IADA,GAAI3xC,IAAWgF,UAAU,EAAM5C,MAAO,GAC/BpC,EAAOgF,UAGV,GAFAhF,EAASsa,KAAKyzI,SAASH,EAzBpB,EAyB4CC,GAC/CA,EAAmB7tJ,EAAOoC,OACrBpC,EAAOgF,SAAU,CAClB+tB,EAAK3wB,MAAQpC,EAAOoC,MAAQxE,EAAK+mJ,cACjC,OAGR,IAAK7nJ,oBAAkBgxJ,EAAS75H,UAAiC,IAArB65H,EAAS75H,QAAe,CAChElB,EAAKkB,QAAU65H,EAAS75H,OACxB,KAAK,GAAIl2B,GAlCN,EAkCoBA,EAAI+vJ,EAAS75H,QAlCjC,EAkCqDl2B,IAAK,CACzD,GAAI41B,IAAgBpb,SAAU,EAAG+c,YAAa,EAC9C3B,GAAYpb,SAAWxa,EACvB41B,EAAY2B,YAAcu4H,EAC1BD,EAAapvJ,KAAKm1B,IAGrB72B,oBAAkBgxJ,EAAS/5H,UAAiC,IAArB+5H,EAAS/5H,UACjDhB,EAAKgB,QAAU+5H,EAAS/5H,QACxB85H,EAAmBA,EAAmB96H,EAAKgB,QAAU,GAEzDhB,EAAK72B,MAAQ4xJ,EAASjxJ,OAAO8F,WAC7BgB,EAAQ2W,KAAK0zI,oBAAoB1zI,KAAKivI,OACjCzsJ,oBAAkBgxJ,EAASjxJ,OAAO0nB,aACnC5gB,EAAM+nJ,OAASoC,EAASjxJ,OAAO0nB,UAAU9hB,eAExC3F,oBAAkBgxJ,EAASjxJ,OAAO+8C,mBACnCj2C,EAAM+nJ,OAASoC,EAASjxJ,OAAO+8C,gBAAgBn3C,cAEnD,IAAIwrJ,IAAwBl7H,KAAMA,EAAM+6H,SAAUA,EAAUnqJ,MAAOA,EACnE/F,GAAKq0B,QvF1jBiB,2BuF0jBwBg8H,GAC9Cl7H,EAAKpvB,MAAQsqJ,EAAoBtqJ,MACjCuG,EAAM1L,KAAKu0B,GACX86H,KAEJvE,EAAU9qJ,MAAO4D,MAAOkY,KAAKwsI,YAAa58I,MAAOA,IAErD,IAAK,GAAI7B,GAAM,EAAGA,EAAMvK,EAAYJ,OAAQ2K,IACxCiS,KAAK4zI,YAAYtwJ,EAAME,EAAYuK,GAAMiS,KAAK6zI,oBAAoB7zI,KAAKivI,OAAQnqJ,EAASiJ,EAAM,EAElG,OAAOihJ,IAEX3C,EAAYlqJ,UAAUuxJ,oBAAsB,SAAUzE,GAClD,GAAI5lJ,KAOJ,OANAA,GAAMyqJ,SAAW,GACjBzqJ,EAAM0qJ,SAAYC,MAAO,WACzB3qJ,EAAM4qJ,MAAO,EACRzxJ,oBAAkBysJ,IAAWzsJ,oBAAkBysJ,EAAM/mG,UACtD7+C,EAAQ2W,KAAKk0I,iBAAiBjF,EAAM/mG,OAAQ7+C,IAEzCA,GAEXgjJ,EAAYlqJ,UAAU+xJ,iBAAmB,SAAUC,EAAY9qJ,GAC3D,MAAOpC,UAAOoC,EAAO8qJ,IAEzB9H,EAAYlqJ,UAAU4tJ,qBAAuB,SAAUd,GACnD,GAAI5lJ,KAMJ,OALAA,GAAMyqJ,SAAW,GACjBzqJ,EAAM+qJ,UAAY,UACb5xJ,oBAAkBysJ,IAAWzsJ,oBAAkBysJ,EAAM34G,WACtDjtC,EAAQ2W,KAAKk0I,iBAAiBjF,EAAM34G,QAASjtC,IAE1CA,GAEXgjJ,EAAYlqJ,UAAU0xJ,oBAAsB,SAAU5E,GAClD,GAAI5lJ,KAMJ,OALAA,GAAMyqJ,SAAW,GACjBzqJ,EAAM0qJ,SAAYC,MAAO,WACpBxxJ,oBAAkBysJ,IAAWzsJ,oBAAkBysJ,EAAM7qG,UACtD/6C,EAAQ2W,KAAKk0I,iBAAiBjF,EAAM7qG,OAAQ/6C,IAEzCA,GAEXgjJ,EAAYlqJ,UAAU8rJ,mBAAqB,SAAU/lG,GACjD,IAAK1lD,oBAAkB0lD,EAAOltC,QAA2B,aAAjBgF,KAAKysI,SAA6C,IAAnBzsI,KAAKwsI,WAAkB,CAC1F,GAAI6H,OAAS,OACatnJ,KAAtBm7C,EAAOsyC,WACPx6E,KAAKwsI,UAAYtkG,EAAOltC,KAAK5X,OAG7B4c,KAAKwsI,UAAYtkG,EAAOsyC,WAGxB65D,EADAr0I,KAAKwsI,UAAYtkG,EAAOltC,KAAK5X,OACpB4c,KAAKwsI,UAGLtkG,EAAOltC,KAAK5X,OAEzB4c,KAAKwsI,WACL,KAAK,GAAIpnJ,GAAM,EAAGA,EAAMivJ,EAAQjvJ,IAAO,CACnC,GAAI8M,GAAOg2C,EAAOltC,KAAK5V,IAEF,OAAf8M,EAAKpK,OAAmBtF,oBAAkB0P,EAAKpK,UACjDoK,EAAKpK,MAAS1C,EAAM,GAExB4a,KAAKs0I,iBAAiBpiJ,MAIlCm6I,EAAYlqJ,UAAUmyJ,iBAAmB,SAAUpiJ,GAE/C,IAAK,GADDqiJ,GAAcriJ,EAAKtC,MAAMxM,OACpBoxJ,EAAS,EAAGA,EAASD,EAAaC,IAAU,CACjD,GAAIC,GAAWviJ,EAAKtC,MAAM4kJ,IAED,OAAnBC,EAAS3sJ,OAAmBtF,oBAAkBiyJ,EAAS3sJ,UACzD2sJ,EAAS3sJ,MAAS0sJ,EAAS,GAGnCx0I,KAAKhF,KAAK9W,KAAKgO,IAEnBm6I,EAAYlqJ,UAAUksJ,mBAAqB,SAAUpB,GACjD,IAAKzqJ,oBAAkByqJ,EAAOjyI,MAAO,CACjC,GAAIq5I,OAAS,OACatnJ,KAAtBkgJ,EAAOyH,WACP10I,KAAKwsI,WAAaS,EAAOjyI,KAAK5X,OAG1B6pJ,EAAOyH,WAAazH,EAAOjyI,KAAK5X,QAChC4c,KAAKwsI,WAAcS,EAAOyH,WAAazH,EAAOjyI,KAAK5X,OACnDixJ,EAASpH,EAAOjyI,KAAK5X,QAGrBixJ,EAASpH,EAAOyH,UAGxB,KAAK,GAAItvJ,GAAM,EAAGA,EAAMivJ,EAAQjvJ,IAAO,CACnC,GAAI8M,GAAO+6I,EAAOjyI,KAAK5V,EAEJ,QAAf8M,EAAKpK,WAAiCiF,KAAfmF,EAAKpK,MAC5BoK,EAAKpK,MAAQkY,KAAKwsI,YAGlBt6I,EAAKpK,OAASkY,KAAKwsI,UAEvBxsI,KAAKs0I,iBAAiBpiJ,MAIlCm6I,EAAYlqJ,UAAUsxJ,SAAW,SAAUH,EAAcr1I,EAAU+c,GAC/D,IAAK,GAAInrB,GAAK,EAAG8kJ,EAAiBrB,EAAczjJ,EAAK8kJ,EAAevxJ,OAAQyM,IAAM,CAC9E,GAAIwpB,GAAcs7H,EAAe9kJ,EACjC,IAAKwpB,EAAYpb,WAAaA,GAAcob,EAAY2B,cAAgBA,EAEpE,MADAA,IAA4B,GACnBtwB,UAAU,EAAM5C,MAAOkzB,GAGxC,OAAStwB,UAAU,EAAO5C,MAAOkzB,IAErCqxH,EAAYlqJ,UAAUyxJ,YAAc,SAAUtwJ,EAAMyK,EAAK1E,EAAOvB,GAC5D,IAAKtF,oBAAkBuL,EAAIuB,QACvB,GAA0B,gBAAfvB,GAAIuB,OAAqB,CAChC,GAAIA,GAASvB,EAAIuB,MACjBjG,GAAMuW,aAAgBpd,oBAAkB8M,EAAOA,QAA0BA,EAAOD,SAAvBC,EAAOA,OAC3D9M,oBAAkB8M,EAAO3L,QAC1B0F,EAAM1F,KAAO2L,EAAO3L,KAAKwE,mBAI7BkB,GAAMuW,aAAe7R,EAAIuB,OACzBjG,EAAM1F,KAAOoK,EAAIpK,IAGpBnB,qBAAkBuL,EAAIkc,aACvB5gB,EAAM+nJ,OAASrjJ,EAAIkc,UAAU9hB,eAE7BX,OAAOC,KAAK4B,GAAOjG,OAAS,IAC5BiG,EAAMwR,KAAOvX,EAAKsH,QAAQJ,GAAK,SAAW1C,EAC1CkY,KAAK9S,OAAOhJ,KAAKmF,IAEhB7G,oBAAkBuL,EAAIrF,QAAwB,SAAdqF,EAAIrF,OACrCsX,KAAK7c,QAAQe,MAAO4D,MAAOA,EAAQxE,EAAK+mJ,eAAgB3hJ,MAA4B,gBAAdqF,GAAIrF,MAClEqF,EAAIrF,MAAQsX,KAAK2hB,OAAOkpH,kBAAkB98I,EAAIrF,UAQ9D2jJ,EAAYlqJ,UAAU0rB,QAAU,aAGzBw+H,KC19BPuI,GAA2B,WAK3B,QAASA,GAAUrqJ,GACfyV,KAAKkqI,mBAAoB,EACzBlqI,KAAKopB,iBAAkB,EACvBppB,KAAK60I,kBAAmB,EACxB70I,KAAK80I,YAAa,EAClB90I,KAAK+0I,iBACL/0I,KAAKg1I,cAAiBC,UAAW,EAAGC,UAAW,GAC/Cl1I,KAAKzV,OAASA,EACdyV,KAAK2hB,OAAS,GAAIsoH,IAAa1/I,GAC/ByV,KAAKqrI,YA60CT,MAx0CAuJ,GAAUzyJ,UAAUguB,cAAgB,WAChC,MAAO,aAEXykI,EAAUzyJ,UAAU2qJ,KAAO,SAAUviJ,GACjCyV,KAAKktI,qBAAuB,GAAIpB,IAAqBvhJ,EAAOyhD,QAC5DhsC,KAAKm1I,gBAAcpoJ,GACnBiT,KAAKkqI,mBAAoB,EACzBlqI,KAAKopB,iBAAkB,EACvBppB,KAAKzV,OAASA,EACdyV,KAAK80I,YAAa,EAClB90I,KAAKgtI,aAAc,EACnBziJ,EAAOC,GAAKiB,EAAO,aACnBuU,KAAKqrI,SAAS9gJ,EAAOC,KAAM,EAC3BwV,KAAKo1I,gBAAkB,GAAIC,oBAE/BT,EAAUzyJ,UAAUmzJ,eAAiB,SAAU/qJ,EAAQ21F,EAAQtmF,EAAS01I,EAAYrvD,EAAqBP,EAAkB3oE,GACvH,GAAIrO,GAAQ1I,IACZA,MAAK8sI,KAAKviJ,GACL/H,oBAAkB09F,GAInBlgF,KAAKm1I,YAAc,GAAII,eAHvBv1I,KAAKm1I,YAAcj1D,EAKvBlgF,KAAKw1I,cAAcjrJ,EAAQ+kJ,EAAYrvD,EAAqBP,GAAkBhpE,KAAK,WAC/EhO,EAAMskI,aAAc,EACpBziJ,EAAOotB,QxFiOY,oBwFjOsBjP,EAAMk3E,QAAW3pE,QAASvN,EAAM6kI,iBACzE7kI,EAAMne,OAAOyoB,IAAI,qBAAsBtK,EAAMyH,iBAC7CvW,EAAQ8O,EAAMysI,eACfx+H,MAAM,SAAU3zB,GACf+zB,EAAOrO,EAAMysI,aACbzsI,EAAMne,OAAOotB,QxFrDE,gBwFqD4B30B,MAOnD4xJ,EAAUzyJ,UAAU29F,IAAM,SAAUv1F,EAAQ01F,EAAqBP,EAAkBQ,EAAQN,GACvF,GAAIl3E,GAAQ1I,IACZA,MAAK1d,KAAO,GAAIqtB,IAAK3P,KAAKzV,QAC1ByV,KAAK4/E,OAASA,EACd5/E,KAAKqrI,WACL,IAAIx5I,GAAQ,GAAIC,QACZvH,GAAOmL,YAAgBlT,oBAAkBy9F,IAAoE,SAA5CA,EAAoBmtD,uBACrF7iJ,EAAO4L,aAAeV,GAAkBlL,GAAQ4L,aAEpD,IAAIjH,IACAkT,YAAa,kBAAmB6kB,QAAQ,EACxCwuH,qBAAuBC,kBAAoBT,UAAW,EAAGC,UAAW,GAAK1jI,eAAe,EAE5F,KAAKjiB,aAAY,CAEbL,EAAe,WAAI3E,EAOvB,GADAA,EAAOotB,QxF8Lc,kBwF9LkBzoB,IACrB,IAAdA,EAAQ,OACR,MAAO,IAAIg3C,SAAQ,SAAUtsC,EAASmd,GAClC,MAAOnd,MAYf,IATI3W,EAAgBg9F,IAChB58F,EAAiC48F,EAAqB11F,GAEtD2E,EAAkB,gBAClB2C,EAAQo4I,GAAav4H,SAASnnB,EAAQyV,KAAK1d,OAE/C0d,KAAK+0I,cAAgB7lJ,EAAW,kBAChC8Q,KAAKg1I,aAAe9lJ,EAAY,iBAChC8Q,KAAKzV,OAAOyoB,IAAI,kBAAmBhT,KAAKmQ,kBACnC3tB,oBAAkBy9F,KAAyBz9F,oBAAkBy9F,EAAoBjuF,aAC/EiuF,EAAoBjuF,qBAAsBC,eAC7C,MAAO,IAAIi0C,SAAQ,SAAUtsC,EAASmd,GAClCkpE,EAAoBjuF,WAAW4kB,aAAa/kB,GAAO6kB,KAAK,SAAU44H,GAC9D5mI,EAAM4sI,eAAe/qJ,EAAQ21F,EAAQtmF,EAAS01I,EAAYrvD,EAAqBP,EAAkB3oE,MAIxG,IAAKv0B,oBAAkBy9F,IAA2D,gBAAnCA,EAAoByrD,WAKnE,CACD,GAAI+B,KAGJ,OAFAA,GAAavpJ,KAAK8b,KAAK1d,KAAK0uB,WAAYi5H,GAAav4H,SAASnnB,EAAQyV,KAAK1d,QAC3EmrJ,EAAavpJ,KAAK8b,KAAK2hB,OAAO2oH,cAAc//I,IACrC,GAAI27C,SAAQ,SAAUtsC,EAASmd,GAClCmvB,QAAQsmD,IAAIihD,GAAc/2H,KAAK,SAAU1zB,GACrC0lB,EAAMokI,KAAKviJ,GACN/H,oBAAkB09F,GAInBx3E,EAAMysI,YAAc,GAAII,eAHxB7sI,EAAMysI,YAAcj1D,EAKxBx3E,EAAM8sI,cAAcjrJ,EAAQvH,EAAE,GAAIi9F,EAAqBP,GAAkBhpE,KAAK,WAC1EhO,EAAMskI,aAAc,EACpBziJ,EAAOotB,QxFqJA,oBwFrJkCjP,EAAMk3E,QAAW3pE,QAASvN,EAAM6kI,iBACzE7kI,EAAMne,OAAOyoB,IAAI,qBAAsBtK,EAAMyH,iBAC7CvW,EAAQ8O,EAAMysI,eACfx+H,MAAM,SAAU3zB,GACf+zB,EAAOrO,EAAMysI,aACbzsI,EAAMne,OAAOotB,QxFjIV,gBwFiIwC30B,SAxBvD,MAAO,IAAIkjD,SAAQ,SAAUtsC,EAASmd,GAClCrO,EAAM4sI,eAAe/qJ,EAAQ21F,EAAQtmF,EAAS8O,EAAMne,OAAO8O,wBAAyB4mF,EAAqBP,EAAkB3oE,MA6BvI69H,EAAUzyJ,UAAUqzJ,cAAgB,SAAUlyJ,EAAMgsJ,EAAYrvD,EAAqBP,GACjF,GAEIi2D,GAFAjtI,EAAQ1I,KACR41I,EAAU51I,KAAKm1I,YAAYU,SAAS/mJ,KAExCkR,MAAK81I,+BAA+BF,EAAS31D,EAC7C,IAAI81D,GAAUH,EAAQI,MAAMlnJ,KAC5B,OAAO,IAAIo3C,SAAQ,SAAUtsC,EAASmd,GAClC4+H,EAAUjtI,EAAMwlI,kBAAkB5qJ,EAAMgsJ,EAAYrvD,GACpDv3E,EAAM4iI,cAAgB1xI,EACtB8O,EAAM2iI,SAAS/nJ,EAAKkH,KAAM,EAC1Bke,EAAMiZ,OAAOypH,eAAe1iI,EAAM2iI,SAAU3iI,EAAM4iI,iBACnD50H,KAAK,WAsBJ,MAlBAi/H,GAAQM,KAAKF,EAASrtI,EAAMssI,aAAsB,UAAGtsI,EAAMssI,aAAsB,WACjFtsI,EAAMwtI,WAAWj2D,GACZP,IAEIh3E,EAAMk3E,OASPl3E,EAAM6kI,YAAc7kI,EAAMysI,YAAYtG,QARjCrsJ,oBAAkBy9F,IAAwBA,EAAoB2uD,SAC/DlmI,EAAMysI,YAAYtG,KAAK5uD,EAAoB2uD,UAG3ClmI,EAAMysI,YAAYtG,KAAK,cAM/BnmI,EAAMysI,YAAYtnI,gBACXvqB,GAAK6S,cAETuS,EAAMysI,eAGrBP,EAAUzyJ,UAAU2zJ,+BAAiC,SAAUF,EAAS31D,GAQpE,MAPKz9F,qBAAkBy9F,IAA0Bz9F,oBAAkBy9F,EAAoBk2D,kBAC/E3zJ,oBAAkBy9F,EAAoB1qF,YAC1CyK,KAAKo1I,gBAAgBgB,YAAuD,cAAxCn2D,EAAoBk2D,gBACpDE,qBAAmBC,UAAYD,qBAAmBE,SACtDv2I,KAAKo1I,gBAAgBzhB,KAAO3zH,KAAKw2I,YAAYv2D,EAAoB1qF,UACjEqgJ,EAAQa,gBAAgBz2I,KAAKo1I,kBAE1BQ,GAEXhB,EAAUzyJ,UAAU+rJ,kBAAoB,SAAU5qJ,EAAMgsJ,EAAYrvD,GAChE,GAAIy2D,IAA0B,EAC1B9gJ,EAAWoK,KAAKzV,OAAOsL,iBAAmBmK,KAAKzV,OAAOuL,kBACrDtT,qBAAkBy9F,KACnBjgF,KAAK22I,UAAY12D,EAAoBgvD,MACjC1/I,eAAe/M,oBAAkBwd,KAAK22I,YACtC32I,KAAK42I,eAAe52I,KAAK22I,WAE7BD,IAA0Bl0J,oBAAkBy9F,EAAoBy2D,0BACrDz2D,EAAoBy2D,wBAEnC,IAAI/0H,GAAS,GAAIsoH,IAAa3mJ,EAAM0c,KAAK2hB,OAAO+C,qBAC5C1yB,EAAagO,KAAK62I,wBAAwB52D,EAAqBqvD,EAAW5pJ,QAC1EvC,EAAUF,EAAgBg9F,GAC1Bl4F,EAAek4F,EAAoB98F,QAASG,EAAK2jB,4BACjD0a,EAAOiqH,qBAAqBh2I,EAAWtS,EAAK4S,aAAe5S,EAAKH,QACpEA,GAAUA,EAAQmW,OAAO,SAAUnW,GAAW,MAAOX,qBAAkBW,EAAQ6mB,WAC/E,IAAI8qI,IAAa,CACbxxJ,GAAKoB,cAAcvB,QAAQC,SAC3B0xJ,GAAa,GAEbxxJ,EAAKoS,YAAclT,oBAAkBy9F,KACrC38F,EAAKyR,mBAAqBkrF,EAAoBmtD,qBAAuB,WAGzE,IAAIuI,GAAU,GAAImB,WAEdC,EAAmB/2I,KAAK0zI,sBACxB9mF,EAASmqF,EAAiBnqF,OAC1BoqF,EAAaD,EAAiBE,KAC9BC,EAAcH,EAAiBI,MAC/BC,EAAcz1H,EAAO8oH,WAAWtnJ,EAAS6c,KAAKkqI,mBAE9C1mJ,EAAc4zJ,EAAYj0J,OAE9BwyJ,GAAU31I,KAAKq3I,mBAAmB/zJ,EAAKoB,cAAcvB,QAAQC,OAAQuyJ,EAASyB,EAAYp8I,KAAMxX,EAAaopE,EAAQoqF,EAAYE,EAAa5zJ,EAAMozJ,EAAyBvzJ,GAE7K6c,KAAKs3I,oBAAoB9zJ,EAAamyJ,EAASh0H,EAAQr+B,EAAMozJ,EAC7D,IAAIa,GAAoBv3I,KAAKw3I,6BAC7B,KAAKh1J,oBAAkBwP,IAAeA,EAAW5O,QAW7C,GAVI0xJ,GACKtyJ,oBAAkB+0J,EAAkB3qF,UACrCA,EAAS2qF,EAAkB3qF,QAE/B5sD,KAAKy3I,sBAAsB9B,EAAS3jJ,EAAYxO,EAAaF,EAAMspE,EAAQ,EAAG2qF,EAAkBN,KAAMM,EAClGJ,MAAOI,EAAkBG,gBAAiBpI,EAAYrvD,EAAqBt+D,EAAQ,IAGvF3hB,KAAK23I,cAAc/qF,EAAQppE,EAAaF,EAAM0O,EAAY2jJ,EAAS,EAAG11D,EAAqBt+D,EAAQ,IAElGn/B,oBAAkB8sJ,EAAWjjJ,YAAa,CAC3C,GAAI6lJ,GAAe,GAAIjyH,IAAsB38B,GACzC+uJ,MAAQ,GACR9vJ,EAAS2vJ,EAAah8I,YAC1B3T,GAASA,EAAO+W,OAAO,SAAUvL,GAAO,MAAOvL,qBAAkBuL,EAAIic,WAA0B,aAAbjc,EAAIpK,OAClFL,EAAK+I,WAAWjJ,QAAU4c,KAAKzV,SAAWjH,GAC1CA,EAAK6uJ,gBAAgB1pB,qBAGrB4pB,EADAryI,KAAK60I,iBACG3C,EAAapvI,aAAa9Q,EAAYs9I,EAAWjjJ,YAEpD2T,KAAKopB,gBACF8oH,EAAapvI,aAAa9C,KAAKzV,OAAO8O,wBAAyBi2I,EAAWjjJ,YAE7EyoJ,EACG5C,EAAapvI,aAAa9Q,EAAW4lB,QAAS03H,EAAWjjJ,YAGzD6lJ,EAAapvI,aAAawsI,EAAW5pJ,OAAQ4pJ,EAAWjjJ,WAAY,KAAM,KAAM9J,GAE5Fyd,KAAK2vI,kBAAkB0C,EAAOsD,EAAS/oF,EAAQ2qF,EAAkBN,KAAMM,EAAkBJ,MAAOI,EAAkBG,iBAAiB,QAI7H/B,GAAQ36I,KAAK48I,SACnBvuJ,MAAM2xH,UAAUpuD,EAExB,OAAO+oF,IAEXf,EAAUzyJ,UAAUq1J,4BAA8B,WAC9C,GAAKh1J,oBAAkBwd,KAAK22I,YAAen0J,oBAAkBwd,KAAK22I,UAAUrgH,SAoBxE,OAAS2gH,KAAM,GAAIY,mBAAgBC,gBAAcC,UAAW,MAAOZ,MAAO,GAAIa,iBAAc,GAAIC,YAAS,EAAG,EAAG,IAC3GP,gBAAiB,GAAIM,iBAAc,GAAIC,YAAS,IAAK,IAAK,MApB9D,IAAInE,GAAYtxJ,oBAAkBwd,KAAK22I,UAAUrgH,QAAQw9G,UAA8C,KAAlC9zI,KAAK22I,UAAUrgH,QAAQw9G,SACxFoE,EAAc11J,oBAAkBwd,KAAK22I,UAAUrgH,QAAQ6hH,UACDL,gBAAcC,UAApE/3I,KAAKo4I,cAAcp4I,KAAK22I,UAAUrgH,QAAQ6hH,UAC1CE,EAAYr4I,KAAKs4I,aAAat4I,KAAK22I,UAAUrgH,SAC7CiiH,EAAW,GAAIN,YAAS,EAAG,EAAG,EAClC,KAAKz1J,oBAAkBwd,KAAK22I,UAAUrgH,QAAQkiH,WAAY,CACtD,GAAIC,GAAgBz4I,KAAK04I,SAAS14I,KAAK22I,UAAUrgH,QAAQkiH,UACzDD,GAAW,GAAIN,YAASQ,EAAc78I,EAAG68I,EAAcE,EAAGF,EAAc/4H,GAE5E,GAAIk5H,GAAgB54I,KAAK22I,UAAUrgH,QAAQs2B,OAAS5sD,KAAK64I,eAAe74I,KAAK22I,UAAUrgH,QAAQs2B,QAAU,KACrGqqF,EAAO,GAAIY,mBAAgBK,EAAYpE,EAAUuE,EAIrD,OAHK71J,qBAAkBwd,KAAK22I,UAAUrgH,QAAQ2gH,QAC1CA,EAAOj3I,KAAK22I,UAAUrgH,QAAQ2gH,OAEzBA,KAAMA,EAAME,MAAO,GAAIa,iBAAcO,GAAWb,gBAAiB,GAAIM,iBAAc,GAAIC,YAAS,IAAK,IAAK,MAC/GrrF,OAAQgsF,IAQpBhE,EAAUzyJ,UAAUy0J,eAAiB,SAAU1nJ,GAC3C,GAII7F,GAAQ,CACZ,IAAI6F,EAAKg5C,QAAUh5C,EAAKg5C,OAAO+uG,KAAM,CACjC,GAAID,GAAa9nJ,EAAKg5C,OAAO+uG,KAAe,WACxC6B,EAAa5pJ,EAAKg5C,OAAO+uG,KAAa,SACtC8B,EAAc7pJ,EAAKg5C,OAAO+uG,KAAc,SAE5C,IADA5tJ,EAAS7G,oBAAkBw2J,eAAaD,IAAgB,EAAIC,eAAaD,GACrE7pJ,EAAKg5C,OAAO+uG,KAAe,WAC3B/nJ,EAAKg5C,OAAO+uG,KAAO,GAAIgC,mBAAgBjC,EAAY8B,EAAYzvJ,OAE9D,CACD,GAAI6vJ,GAAgB12J,oBAAkBw0J,GACDc,gBAAcC,UAA/C/3I,KAAKo4I,cAAcpB,EACvB9nJ,GAAKg5C,OAAO+uG,KAAO,GAAIY,mBAAgBqB,EAAcJ,EAAYzvJ,IAGzE,GAAI6F,EAAKonC,SAAWpnC,EAAKonC,QAAQ2gH,KAAM,CACnC,GAAIkC,GAAcjqJ,EAAKonC,QAAQ2gH,KAAe,WAC1CmC,EAAclqJ,EAAKonC,QAAQ2gH,KAAa,SACxCoC,EAAenqJ,EAAKonC,QAAQ2gH,KAAc,SAE9C,IADA5tJ,EAAS7G,oBAAkBw2J,eAAaK,IAAiB,EAAIL,eAAaK,GACtEnqJ,EAAKonC,QAAQ2gH,KAAe,WAC5B/nJ,EAAKonC,QAAQ2gH,KAAO,GAAIgC,mBAAgBE,EAAaC,EAAa/vJ,OAEjE,CACD,GAAIiwJ,GAAgB92J,oBAAkB22J,GACArB,gBAAcC,UAAhD/3I,KAAKo4I,cAAce,EACvBjqJ,GAAKonC,QAAQ2gH,KAAO,GAAIY,mBAAgByB,EAAcF,EAAa/vJ,IAG3E,GAAI6F,EAAKk1C,QAAUl1C,EAAKk1C,OAAO6yG,KAAM,CACjC,GAAIsC,GAAarqJ,EAAKk1C,OAAO6yG,KAAe,WACxCuC,EAAatqJ,EAAKk1C,OAAO6yG,KAAa,SACtCwC,EAAcvqJ,EAAKk1C,OAAO6yG,KAAc,SAE5C,IADA5tJ,EAAS7G,oBAAkBw2J,eAAaS,IAAgB,EAAIT,eAAaS,GACrEvqJ,EAAKk1C,OAAO6yG,KAAe,WAC3B/nJ,EAAKk1C,OAAO6yG,KAAO,GAAIgC,mBAAgBM,EAAYC,EAAYnwJ,OAE9D,CACD,GAAIqwJ,GAAgBl3J,oBAAkB+2J,GACDzB,gBAAcC,UAA/C/3I,KAAKo4I,cAAcmB,EACvBrqJ,GAAKk1C,OAAO6yG,KAAO,GAAIY,mBAAgB6B,EAAcF,EAAYnwJ,MAI7EurJ,EAAUzyJ,UAAUuxJ,oBAAsB,WACtC,GAAI9mF,GAAS,GAAI+sF,aACjB,IAAKn3J,oBAAkBwd,KAAK22I,YAAen0J,oBAAkBwd,KAAK22I,UAAUzuG,QAmBxE,MADA0kB,GAAO4/B,IAAM,GAAIotD,UAAO,GAAI3B,YAAS,IAAK,IAAK,OACtCrrF,OAAQA,EAAQqqF,KAAM,GAAIY,mBAAgBC,gBAAcC,UAAW,MACxEZ,MAAO,GAAIa,iBAAc,GAAIC,YAAS,IAAK,IAAK,MAnBpD,IAAIC,GAAc11J,oBAAkBwd,KAAK22I,UAAUzuG,OAAOiwG,UACDL,gBAAcC,UAAnE/3I,KAAKo4I,cAAcp4I,KAAK22I,UAAUzuG,OAAOiwG,UACzCE,EAAYr4I,KAAKs4I,aAAat4I,KAAK22I,UAAUzuG,QAC7C4rG,EAAYtxJ,oBAAkBwd,KAAK22I,UAAUzuG,OAAO4rG,UAA6C,KAAjC9zI,KAAK22I,UAAUzuG,OAAO4rG,SACtFyE,EAAW,GAAIN,WACnB,KAAKz1J,oBAAkBwd,KAAK22I,UAAUzuG,OAAOswG,WAAY,CACrD,GAAIC,GAAgBz4I,KAAK04I,SAAS14I,KAAK22I,UAAUzuG,OAAOswG,UACxDD,GAAW,GAAIN,YAASQ,EAAc78I,EAAG68I,EAAcE,EAAGF,EAAc/4H,GAE5E,GAAIu3H,GAAO,GAAIY,mBAAgBK,EAAYpE,EAAUuE,EAIrD,OAHK71J,qBAAkBwd,KAAK22I,UAAUzuG,OAAO+uG,QACzCA,EAAOj3I,KAAK22I,UAAUzuG,OAAO+uG,OAExBrqF,OAAQ5sD,KAAK64I,eAAe74I,KAAK22I,UAAUzuG,OAAO0kB,QAASqqF,KAAMA,EAAME,MAAO,GAAIa,iBAAcO,KAUjH3D,EAAUzyJ,UAAUs1J,sBAAwB,SAAU9B,EAAS3jJ,EAAYxO,EAAaF,EAAMspE,EAAQnsC,EAAOw2H,EAAME,EAAOO,EAAiBpI,EAAYrvD,EAAqBt+D,EAAQ75B,GAoDhL,IAAK,GAnDD4gB,GAAQ1I,KACR65I,EAAap5H,EAiDbjE,EAASxc,KACJnQ,EAAK,EAAG+/I,EAAe59I,EAAYnC,EAAK+/I,EAAaxsJ,OAAQyM,KAjDxD,SAAUiqJ,GACpB,GAAI10J,GAAMuwJ,EAAQ36I,KAAK48I,SACnB7pJ,EAAMzK,EAAKkU,iBAAiBsiJ,EAAgBz3J,OAE5C6M,GACAtN,MAAOk4J,EAAgBloJ,IACvBrP,OAAQwL,EACR1E,UAAO0D,GACP0E,aAAc1D,EAAI2c,mBAIlBmlI,GAAUC,YADFtzH,EAAOjyB,OAAOiN,iBAAiBsiJ,EAAgBz3J,OAAOgG,WAAa,MAAS0F,EAAIkb,oBAA0E6wI,EAAgBloJ,IAApE4qB,EAAO0wH,qBAAqBhB,gBAAgBh9I,IAA+B,MAAQ4qJ,EAAgBt1J,OAASwN,EAAWxN,MAAQ,EAAI,SAAW,SAC9Nb,KAAM,MACxC64B,GAAOjyB,OAAOotB,QxF5QM,qBwF4Q6Bk4H,EAAO,SAAUA,GAC9DzqJ,EAAIwK,MAAMmqJ,QAAQF,GAAYj4J,MAAQiuJ,EAAMC,YAC5C1qJ,EAAIwK,MAAMmqJ,QAAQF,EAAa,GAAGxwJ,MAAM2wJ,aAAe,GAAIC,mBAAgBC,mBAAiBC,MAC5F/0J,EAAIiE,MAAM2xH,UAAUpuD,GACpBxnE,EAAIiE,MAAM+wJ,QAAQnD,GAClB7xJ,EAAIiE,MAAMgxJ,aAAalD,GACvB/xJ,EAAIiE,MAAMixJ,mBAAmB5C,EAC7B,IAAIrF,GACAkI,EAAsB,GAAIn4H,IAA6B9+B,EAU3D,IALI+uJ,EAJC7vJ,oBAAkBs3J,EAAgBn1J,MAAMizB,SAIjC2iI,EAAoBz3I,aAAag3I,EAAgBn1J,MAAOm1J,GAHxDS,EAAoBz3I,aAAag3I,EAAgBn1J,MAAMizB,QAASkiI,GAKvEt3J,oBAAkB6vJ,IAA2B,IAAjBA,EAAMjvJ,SACnCgC,EAAIwK,MAAMmqJ,QAAQF,EAAa,GAAGW,WAAa7E,EAAQxyJ,QAAQqB,OAASq1J,EAAa,KAEpFr3J,oBAAkBwP,EAAW9M,cAAgB8M,EAAW9M,YAAc,EACvEwjB,EAAMinI,kBAAkB0C,EAAOsD,EAAS/oF,EAAQqqF,EAAME,EAAOO,GAAiB,EAAMtyJ,EAAKy0J,GACzFnxI,EAAM+uI,sBAAsB9B,EAASmE,EAAgBn1J,MAAOnB,EAAaF,EAAMspE,EAASitF,EAAa,EAAI5C,EAAME,EAAOO,EAAiBpI,EAAYrvD,EAAqBt+D,EAAQ75B,GAEhLuqJ,GADIoI,EAAoB,GAAI14H,IAA2Bz+B,IAC7Bwf,aAAag3I,EAAgBn1J,MAAMizB,QAASkiI,GACtEpxI,EAAMinI,kBAAkB0C,EAAOsD,EAAS/oF,EAAQqqF,EAAME,EAAOO,GAAiB,OAE7E,CACDhvI,EAAMinI,kBAAkB0C,EAAOsD,EAAS/oF,EAAQqqF,EAAME,EAAOO,GAAiB,EAAMtyJ,EAAKy0J,GACzF/xJ,EAAQ4gB,EAAMivI,cAAc/qF,EAAQppE,EAAaF,EAAMw2J,EAAgBn1J,MAAOgxJ,EAAUkE,EAAa,EAAI55D,EAAqBt+D,EAAQ75B,EACtI,IAAI2yJ,GAAoB,GAAI14H,IAA2Bz+B,EACvD+uJ,GAAQoI,EAAkB33I,aAAag3I,EAAgBn1J,MAAOm1J,EAE9DpxI,GAAMinI,kBAAkB0C,EAAOsD,EAAS/oF,EAAQqqF,EAAME,EAAOO,GAAiB,EAAO,KAAM,MADrE,OAOR9H,EAAa//I,KAI3C+kJ,EAAUzyJ,UAAUk1J,mBAAqB,SAAUnyJ,EAAaywJ,EAAS36I,EAAMga,EAAY43C,EAAQoqF,EAAYE,EAAarzJ,EAAM6yJ,EAAyBgE,GACvJ,GAAIhyI,GAAQ1I,KACR26I,EAAc3lI,EAAW5xB,OAAS8B,EAClCgS,EAAQF,GAAmB0jJ,GAC3BpoI,EAAOooI,EACP5yJ,EAAQ,CACRkY,MAAKzV,OAAOwe,gBACZjhB,EAAQkY,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAE9CuyJ,EAAQxyJ,QAAQ2L,IAAI6rJ,GACpBhF,EAAQ73E,QAAQhvE,IAAIkM,EAAK5X,OACzB,IAAIw3J,GAAmB,SAAU/8B,EAAQ9tF,EAAQhiC,EAAK4rB,EAASF,GAC3D,GAAIohI,GAAalF,EAAQ73E,QAAQg9E,UAAUj9B,GACvCk9B,EAAUF,EAAWjrJ,MAAMmqJ,QAAQhqH,GACnCtX,EAAOzd,EAAK6iH,GAAQjuH,MAAMmgC,EACzBvtC,qBAAkBuL,EAAIuxC,mBACvBy7G,EAAQ1xJ,MAAM2wJ,aAAetxI,EAAMsyI,uBAAuBjtJ,EAAIuxC,kBAE9D3lB,EAAU,IACVohI,EAAQphI,QAAUA,EAClBohI,EAAQ1xJ,MAAM2wJ,aAAetxI,EAAMuyI,qBAAqB,SAAUF,EAAQ1xJ,MAAM2wJ,aAAcjsJ,EAAIkc,YAElGwP,EAAU,IACVshI,EAAQP,WAAa/gI,GAEzBohI,EAAWxxJ,MAAM2xH,UAAUpuD,GAC3BiuF,EAAWxxJ,MAAM+wJ,QAAQpD,GACzB6D,EAAWxxJ,MAAMgxJ,aAAanD,GAC9B6D,EAAQn5J,MAAQmM,EAAI1F,WACf7F,oBAAkBi2B,IAAUA,EAAKe,WAAalK,WAAS8nB,cAAgB3e,EAAKe,WAAalK,WAAS+nB,eACnG0jH,EAAQn5J,MAAQ,GAChBm5J,EAAQryJ,MAAQ,GAEpB,IAAIwG,IACAupB,KAAMsiI,EACNvH,SAAU/6H,EACVpvB,MAAO0xJ,EAAQ1xJ,MAEnBqf,GAAMne,OAAOotB,QxFlLW,yBwFkL4BzoB,IAEpDgsJ,EAAa,SAAU5oI,EAAMpb,EAAOikJ,EAASj2I,EAAUjH,EAAUm9I,GAEjE,IAAK,GADDC,GAAO,EACF53J,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAM7B,GALI23J,IAEAl2I,EADAm2I,EAAOA,EAAOF,GAAiB,IAAN13J,EAAU,GAAK,GAExC03J,EAAU,GAEV7oI,EAAK7uB,GAAGN,SAAWmvB,EAAK7uB,GAAGN,QAAQC,OAAQ,CAC3C,GAAIk4J,GAAaJ,EAAW5oI,EAAK7uB,GAAGN,QAAS+T,EAAQ,EAAG,EAAGzT,EAAIyhB,EAAUjH,EAAW,GAAG,EACvF28I,GAAiB38I,EAAUxa,EAAIyhB,EAAUoN,EAAK7uB,GAAI,EAAG63J,GACrDH,GAAoBG,EACpBp2I,EAAWA,EAAWo2I,EAAa,OAE9BhpI,EAAK7uB,GAAGkF,SAAW+f,EAAMwhI,qBAC9BiR,IACAP,EAAiB38I,EAAUxa,EAAIyhB,EAAWpd,EAAOwqB,EAAK7uB,GAAIyT,EAAO,GAGzE,OAAOikJ,GAMX,OAJAD,GAAW5oI,EAAMpb,EAAO,EAAG,EAAG,GAAG,GAC7By+I,EAAQxyJ,QAAQqB,OAAS,GAAKkyJ,IAC9Bf,EAAQtsJ,MAAMqtJ,yBAA0B,GAErCf,GAEXf,EAAUzyJ,UAAU00J,wBAA0B,SAAU52D,EAAqBjuF,GACzE,GAAKxP,oBAAkBy9F,GAyCnBjgF,KAAKopB,iBAAkB,EACvBppB,KAAK60I,kBAAmB,MA1CiB,CACpCryJ,oBAAkBy9F,EAAoBgvD,SACvCjvI,KAAK22I,UAAY12D,EAAoBgvD,MAEzC,IAAIsM,GAAav7I,KAAKo1I,gBAAgBzhB,IAEtC,IADA3zH,KAAKk2I,WAAWj2D,IACXz9F,oBAAkBy9F,EAAoBgtD,QAAS,CAEhD,GAAIA,GAAShtD,EAAoBgtD,OAC7BhkJ,EAAW,GAAIuyJ,UAAO,EAAKD,EAAW7yJ,MAAQ,GAA2B,IAApBukJ,EAAOwO,YAC5D9nB,EAAO,GAAI+nB,SAAOH,EAAW7yJ,MAAQ,GAAsB,IAAhBukJ,EAAO3/I,QAClDquJ,EAAS,GAAIC,cAAW3yJ,EAAU0qI,EACtC3zH,MAAKm1I,YAAYjvJ,SAAS8yD,OAASh5C,KAAK67I,iBAAiB,GAAIC,0BAAuBH,GAAS1O,GAE5FzqJ,oBAAkBy9F,EAAoBysD,sBAAyB1sI,KAAK80I,aACrE90I,KAAKkqI,kBAAoBjqD,EAAoBysD,qBAE5ClqJ,oBAAkBy9F,EAAoBjuF,YAOjCxP,oBAAkBy9F,EAAoByrD,aAY5C1rI,KAAKopB,iBAAkB,EACvBppB,KAAK60I,kBAAmB,GAZe,gBAAnC50D,EAAoByrD,YACpB15I,EAAagO,KAAKzV,OAAO6+B,gBACzBppB,KAAKopB,iBAAkB,EACvBppB,KAAK60I,kBAAmB,IAGxB70I,KAAKopB,iBAAkB,EACvBppB,KAAK60I,kBAAmB,IAdtB50D,EAAoBjuF,qBAAsBC,iBAC5CD,EAAaiuF,EAAoBjuF,YAErCgO,KAAK60I,kBAAmB,EACxB70I,KAAKopB,iBAAkB,GAsB/B,MAAOp3B,IAEX4iJ,EAAUzyJ,UAAU+zJ,WAAa,SAAUj2D,GACvC,GAAIv3E,GAAQ1I,KACRu7I,EAAav7I,KAAKo1I,gBAAgBzhB,IACtC,KAAKnxI,oBAAkBy9F,KAAyBz9F,oBAAkBy9F,EAAoB/3C,QAAS,CAE3F,GAAIA,GAAS+3C,EAAoB/3C,OAC7Bj/C,EAAW,GAAIuyJ,UAAO,EAAGtzG,EAAO6zG,SAChCpoB,EAAO,GAAI+nB,SAAOH,EAAW7yJ,MAAQ,GAAsB,IAAhBw/C,EAAO56C,QAClDquJ,EAAS,GAAIC,cAAW3yJ,EAAU0qI,EACtC,IAAK3zH,KAAK+0I,cAAc3xJ,OAGnB,CACD,GAAI44J,GAAmBh8I,KAAK67I,iBAAiB,GAAIC,0BAAuBH,GAASzzG,EACjFloC,MAAK+0I,cAAcz7I,OAAO,SAAUxR,GAC5BA,EAAQ,GAAK,GAAKA,EAAQ,EAAI4gB,EAAMysI,YAAYa,MAAMxxJ,MAAQ,GAC9DkkB,EAAMysI,YAAYa,MAAMiG,eAAen0J,EAAQ,GAAGo0J,SAC7CC,gBAAgBH,EAAiB91J,SAAU,GAAIs1J,UAAO,EAAG,UAPtEx7I,MAAKm1I,YAAYjvJ,SAASwD,IAAMsW,KAAK67I,iBAAiB,GAAIC,0BAAuBH,GAASzzG,KAatG0sG,EAAUzyJ,UAAU05J,iBAAmB,SAAU31J,EAAU0E,GACvD,IAAK,GAAIiF,GAAK,EAAGkG,EAAKnL,EAAQwxJ,SAAUvsJ,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC1D,GAAIiW,GAAU/P,EAAGlG,EAEjB,QADAmQ,KAAKq8I,yBAAyBv2I,GACtBA,EAAQniB,MACZ,IAAK,OAED,GAAsB,KAAlBmiB,EAAQlkB,WAAkCmL,KAAlB+Y,EAAQlkB,OAAyC,OAAlBkkB,EAAQlkB,OAA2C,gBAAlBkkB,GAAQlkB,MAChG,KAAM,IAAI06J,OAAM,wDAEpBt8I,MAAKu8I,SAASr2J,EAAU4f,EACxB,MACJ,KAAK,aACD9F,KAAKw8I,eAAet2J,EAAU4f,EAC9B,MACJ,KAAK,QACD,OAAoB/Y,KAAhB+Y,EAAQ22I,KAAqC,OAAhB32I,EAAQ22I,KAAgC,KAAhB32I,EAAQ22I,IAC7D,KAAM,IAAIH,OAAM,2DAEpBt8I,MAAK08I,UAAUx2J,EAAU4f,EACzB,MACJ,KAAK,OACD9F,KAAK28I,SAASz2J,EAAU4f,EACxB,MACJ,SACI,KAAM,IAAIw2I,OAAM,qCAG5B,MAAOp2J,IAEX0uJ,EAAUzyJ,UAAUk6J,yBAA2B,SAAUv2I,GACrD,OAAqB/Y,KAAjB+Y,EAAQniB,MAAuC,OAAjBmiB,EAAQniB,KACtC,KAAM,IAAI24J,OAAM,mCAGhB,IAAqB,SAAjBx2I,EAAQniB,KAAiB,CACzB,OAAuBoJ,KAAnB+Y,EAAQ82I,QAA2C,OAAnB92I,EAAQ82I,OACxC,KAAM,IAAIN,OAAM,gCAAkCx2I,EAAQniB,KAAO,cAGjE,QAA0BoJ,KAAtB+Y,EAAQ82I,OAAOzxF,IAA0C,OAAtBrlD,EAAQ82I,OAAOzxF,IAA4C,gBAAtBrlD,GAAQ82I,OAAOzxF,GACvF,KAAM,IAAImxF,OAAM,wCAA0Cx2I,EAAQniB,KAAO,aAE7E,QAA0BoJ,KAAtB+Y,EAAQ82I,OAAOxxF,IAA0C,OAAtBtlD,EAAQ82I,OAAOxxF,IAA4C,gBAAtBtlD,GAAQ82I,OAAOxxF,GACvF,KAAM,IAAIkxF,OAAM,wCAA0Cx2I,EAAQniB,KAAO,aAE7E,QAA0BoJ,KAAtB+Y,EAAQ82I,OAAOvxF,IAA0C,OAAtBvlD,EAAQ82I,OAAOvxF,IAA4C,gBAAtBvlD,GAAQ82I,OAAOvxF,GACvF,KAAM,IAAIixF,OAAM,wCAA0Cx2I,EAAQniB,KAAO,aAE7E,QAA0BoJ,KAAtB+Y,EAAQ82I,OAAOtxF,IAA0C,OAAtBxlD,EAAQ82I,OAAOtxF,IAA4C,gBAAtBxlD,GAAQ82I,OAAOtxF,GACvF,KAAM,IAAIgxF,OAAM,wCAA0Cx2I,EAAQniB,KAAO,kBAIhF,CACD,OAAyBoJ,KAArB+Y,EAAQ7c,UAA+C,OAArB6c,EAAQ7c,SAC1C,KAAM,IAAIqzJ,OAAM,kCAAoCx2I,EAAQniB,KAAO,cAGnE,QAA2BoJ,KAAvB+Y,EAAQ7c,SAASc,GAA0C,OAAvB+b,EAAQ7c,SAASc,GAA4C,gBAAvB+b,GAAQ7c,SAASc,EAC3F,KAAM,IAAIuyJ,OAAM,uCAAyCx2I,EAAQniB,KAAO,eAE5E,QAA2BoJ,KAAvB+Y,EAAQ7c,SAASuC,GAA0C,OAAvBsa,EAAQ7c,SAASuC,GAA4C,gBAAvBsa,GAAQ7c,SAASuC,EAC3F,KAAM,IAAI8wJ,OAAM,uCAAyCx2I,EAAQniB,KAAO,kBAO5FixJ,EAAUzyJ,UAAUo6J,SAAW,SAAUM,EAAc/2I,GACnD,GAAImxI,GAAOj3I,KAAK88I,QAAQh3I,GACpBqxI,EAAQn3I,KAAK+8I,oBAAoBj3I,GACjCk3I,EAAM,IACV,KAAKx6J,oBAAkBsjB,EAAQzc,MAAM4zJ,cAAe,CAChD,GAAIC,GAAWl9I,KAAK04I,SAAS5yI,EAAQzc,MAAM4zJ,aAC3CD,GAAM,GAAIpD,UAAO,GAAI3B,YAASiF,EAASthJ,EAAGshJ,EAASvE,EAAGuE,EAASx9H,IAEtD,MAATy3H,GAAwB,MAAP6F,IACjB7F,EAAQ,GAAIa,iBAAc,GAAIC,YAAS,EAAG,EAAG,IAEjD,IAAIr2J,GAAQkkB,EAAQlkB,MAAMqO,WACtBlG,EAAyB,IAArB+b,EAAQ7c,SAASc,EACrByB,EAAyB,IAArBsa,EAAQ7c,SAASuC,EACrB8D,EAAS,GAAI2qJ,mBACbv0J,EAASsa,KAAKm9I,iBAAiBr3I,EAASxW,EAC7B,QAAX5J,GAAoBlD,oBAAkBkD,EAAO4J,SAAY9M,oBAAkBkD,EAAOiuI,MAIlFkpB,EAAaX,SAASkB,WAAWx7J,EAAOq1J,EAAM+F,EAAK7F,EAAOptJ,EAAGyB,EAAG8D,GAHhEutJ,EAAaX,SAASkB,WAAWx7J,EAAOq1J,EAAM+F,EAAK7F,EAAOptJ,EAAGyB,EAAG9F,EAAOiuI,KAAKjrI,MAAOhD,EAAOiuI,KAAKrmI,OAAQ5H,EAAO4J,SAOtHslJ,EAAUzyJ,UAAUq6J,eAAiB,SAAUa,EAAgBv3I,GAC3D,GAAImxI,GAAOj3I,KAAK88I,QAAQh3I,GACpBqxI,EAAQ,IACZ,IAAK30J,oBAAkBsjB,EAAQzc,MAAMi0J,gBAMjCnG,EAAQ,GAAIa,iBAAc,GAAIC,YAAS,EAAG,EAAG,QANK,CAElD,GAAIsF,GAAav9I,KAAK04I,SAAS5yI,EAAQzc,MAAMi0J,eAC7CnG,GAAQ,GAAIa,iBAAc,GAAIC,YAASsF,EAAW3hJ,EAAG2hJ,EAAW5E,EAAG4E,EAAW79H,IAKlF,GAAI89H,GAAa,GAAIC,sBAAmBxG,EAAME,EAC9CqG,GAAWE,YAAc19I,KAAK29I,mBAAmB73I,EAAQ83I,eACzD,IAAIC,GACAvuJ,CACJ,IAAK9M,oBAAkBsjB,EAAQxW,QAyB3BA,EAAS,MACTuuJ,EAAiB,GAAIC,qBAAkB7G,EAAME,EAAO7nJ,EAAQkuJ,OAzB5D,KAA0C,IAAtC13I,EAAQxW,OAAO5H,QAAQ,YAA4D,IAAxCoe,EAAQxW,OAAO5H,QAAQ,aAC9DirB,EAAY,GAAIorI,qBAAkB9G,IAC5ByG,YAAc19I,KAAK29I,mBAAmB73I,EAAQ83I,gBAGpDtuJ,EAFAwW,EAAQxW,OAAO5H,QAAQ,UAAYoe,EAAQxW,OAAO5H,QAAQ,aAC1D4H,EAASwW,EAAQxW,OAAO1B,QAAQ,WAAY,MAC5BA,QAAQ,SAAU,MAGlC0B,EAASwW,EAAQxW,OAAO1B,QAAQ,WAAY,MAC5BA,QAAQ,SAAU,KAEtCiwJ,EAAiB,GAAIC,qBAAkB7G,EAAME,EAAO7nJ,EAAQkuJ,EAAY7qI,OAEvE,KAA4C,IAAxC7M,EAAQxW,OAAO5H,QAAQ,cAA4D,IAAtCoe,EAAQxW,OAAO5H,QAAQ,UACzE4H,EAASwW,EAAQxW,OAAO1B,QAAQ,WAAY,KAC5CiwJ,EAAiB,GAAIC,qBAAkB7G,EAAME,EAAO7nJ,EAAQkuJ,OAE3D,CACD,GAAI7qI,GAAY,GAAIorI,qBAAkB9G,EACtC3nJ,GAASwW,EAAQxW,OAAO1B,QAAQ,SAAU,KAC1CiwJ,EAAiB,GAAIC,qBAAkB7G,EAAME,EAAO7nJ,EAAQqjB,GAOpE,GAAI5oB,GAAyB,IAArB+b,EAAQ7c,SAASc,EACrByB,EAAyB,IAArBsa,EAAQ7c,SAASuC,EACrB9F,EAASsa,KAAKm9I,iBAAiBr3I,EAAS+3I,EAAe7D,aAC5C,QAAXt0J,GAAoBlD,oBAAkBkD,EAAO4J,SAAY9M,oBAAkBkD,EAAOiuI,QAClFkqB,EAAe7D,aAAet0J,EAAO4J,OACrCuuJ,EAAelC,OAAS,GAAIC,cAAW7xJ,EAAGyB,EAAG9F,EAAOiuI,KAAKjrI,MAAOhD,EAAOiuI,KAAKrmI,SAEhFuwJ,EAAe5H,KAAKoH,EAAenB,SAAUnyJ,EAAGyB,IAGpDopJ,EAAUzyJ,UAAUu6J,UAAY,SAAUW,EAAgBv3I,GACtD,GAAI/b,GAAyB,IAArB+b,EAAQ7c,SAASc,EACrByB,EAAyB,IAArBsa,EAAQ7c,SAASuC,EACrB9C,EAAUlG,oBAAkBsjB,EAAQ6tH,UAAuC5mI,GAAR,IAArB+Y,EAAQ6tH,KAAKjrI,MAC3D4E,EAAW9K,oBAAkBsjB,EAAQ6tH,UAAwC5mI,GAAR,IAAtB+Y,EAAQ6tH,KAAKrmI,OAC5DwjJ,EAAQ,GAAIkN,aAAUl4I,EAAQ22I,IAC7Bj6J,qBAAkBkG,GAInB20J,EAAenB,SAASQ,UAAU5L,EAAO/mJ,EAAGyB,GAH5C6xJ,EAAenB,SAASQ,UAAU5L,EAAO/mJ,EAAGyB,EAAG9C,EAAO4E,IAO9DsnJ,EAAUzyJ,UAAUw6J,SAAW,SAAUU,EAAgBv3I,GACrD,GAAIqlD,GAAyB,IAApBrlD,EAAQ82I,OAAOzxF,GACpBC,EAAyB,IAApBtlD,EAAQ82I,OAAOxxF,GACpBC,EAAyB,IAApBvlD,EAAQ82I,OAAOvxF,GACpBC,EAAyB,IAApBxlD,EAAQ82I,OAAOtxF,GACpB0xF,EAAMh9I,KAAKi+I,kBAAkBn4I,EAC5BtjB,qBAAkBsjB,EAAQzc,QAA4B,OAAlByc,EAAQzc,QACxC7G,oBAAkBsjB,EAAQzc,MAAM60J,UAAsC,OAA1Bp4I,EAAQzc,MAAM60J,SAAqD,gBAA1Bp4I,GAAQzc,MAAM60J,UACpGlB,EAAIt0J,MAAgC,IAAxBod,EAAQzc,MAAM60J,SAE9BlB,EAAImB,UAAYn+I,KAAKo+I,aAAat4I,EAAQzc,MAAM80J,YAEpDd,EAAenB,SAASS,SAASK,EAAK7xF,EAAIC,EAAIC,EAAIC,IAGtDspF,EAAUzyJ,UAAUwtJ,kBAAoB,SAAU0C,EAAOsD,EAAS/oF,EAAQqqF,EAAME,EAAOO,EAAiB2G,EAAW/6H,EAAYu2H,EAAYyE,GACvI,IAAK,GAAIzuJ,GAAK,EAAG0uJ,EAAUlM,EAAOxiJ,EAAK0uJ,EAAQn7J,OAAQyM,IAAM,CAQzD,IAAK,GAPDzK,GAAMm5J,EAAQ1uJ,GAEd2uJ,GAA4B,EAC5B12J,EAAQ,EACR06B,GAAU,EAEV5gC,KACK6B,EAAI,EAAGA,EAAIkyJ,EAAQxyJ,QAAQqB,MAAOf,IAAK,CAC5C,GAAIg1B,GAAOrzB,EAAIwK,MAAM9H,EACrB,IAAI2wB,EAAKe,WAAalK,WAAS6R,mBAA/B,CAKA,IAAKnhB,KAAKkqI,kBAAmB,CACzB,SAAwBn9I,KAAjB0rB,EAAK9vB,SACR,GAAI8vB,EAAKe,WAAalK,WAAS6R,mBAA/B,CAGA,GAAK3+B,oBAAkB8gC,GAiBnB1hC,EAAMsC,KAAK,QAhBX,IAAK1B,oBAAkB8gC,EAAW1zB,MAAMmqJ,QAAQt2J,GAAG7B,OAY/CA,EAAMsC,KAAK,QAZ4C,CAEnDgL,GAAS9J,IAAKA,EAAKzB,KAAM,eAAgB0F,MAAOi6B,EAAW1zB,MAC/DoQ,MAAKzV,OAAOotB,QxFtUL,4BwFsU+CzoB,GACtDtN,EAAMsC,KAAK,IACXtC,EAAMsC,KAAKo/B,EAAW1zB,MAAMmqJ,QAAQt2J,GAAG7B,OACvC4gC,GAAU,EACL67H,IACD56J,GAAK,GAUjBA,GAAK,EACLqE,GAAgB,EAChB2wB,EAAOrzB,EAAIwK,MAAM9H,GAErB,MAAQtF,oBAAkBi2B,EAAK9vB,WAAa8vB,EAAK9vB,SAC7Cb,GAAgB,EAChB2wB,EAAOrzB,EAAIwK,MAAM9H,GAGzB,GAAI2wB,EAAK2G,WAAY,CACjB,GAAIjV,KAEJ,IAAK3nB,oBAAkBi2B,EAAKl2B,OAAO86B,iBAAoB76B,oBAAkBi2B,EAAKl2B,OAAO49B,uBAA0B39B,oBAAkBi2B,EAAKl2B,OAAO29B,qBAmBxI,CAED,GAAIx6B,GAASsa,KAAKy+I,0BAA0Br5J,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,OAC5DG,qBAAkBkD,IACnB9D,EAAMsC,KAAKwB,OAvBgJ,CAG/JykB,GADIzkB,EAASsa,KAAK0+I,oBAAoBv0I,EAAY1mB,EAAG+6J,EAA0B/lI,IAC3DkmI,iBACpBH,EAA2B94J,EAAO84J,wBAClC,IAAIv0G,OAAM,GACN3nD,EAAO8C,EAAI9C,KAAKm2B,EAAKl2B,OAAOF,MAAQo2B,EAAKl2B,OAAOF,MAAQo2B,EAAKl2B,OAAO2wB,WACpElT,MAAKzV,OAAOkhB,SAAWzL,KAAKzV,OAAO01C,OACnCgK,EAAO9/B,EAAWi9B,eAAa93B,WAAUmJ,EAAKe,WAAWl3B,EAAM0d,KAAKzV,QAChEyV,KAAKzV,OAAOkhB,SACZzL,KAAKzV,OAAOihC,mBAIhBye,EAAO9/B,EAAWi9B,eAAa93B,WAAUmJ,EAAKe,WAAWl3B,GAE7DV,EAAMsC,KAAK+lD,EAAI,GAAGC,aAClB1nB,GAAU,OAWd5gC,GAAMsC,KAAK,GAEXs+B,IAAwB,KAAb5gC,EAAM6B,KAAcjB,oBAAkBZ,EAAM6B,KAAoB,OAAb7B,EAAM6B,KACpE++B,GAAU,GAEd16B,GAAS,MAzELrE,KACAqE,IA0ER,GAAIu2J,EACA,IAAS56J,EAAKuc,KAAKzV,OAAO7F,cAAcvB,eAAkB,EAAGM,EAAI7B,EAAMwB,OAAS,EAAGK,IAC/E7B,EAAM6B,GAAK7B,EAAM6B,EAAI,EAG7B,KAAK++B,EACD,GAAK67H,EAcD,IAAS56J,EAAI,EAAGA,EAAIkyJ,EAAQxyJ,QAAQqB,MAAOf,IACvC6/B,EAAW1zB,MAAMmqJ,QAAQt2J,GAAG7B,MAAQA,EAAM6B,GAAGwM,WACzCxM,IAAOo2J,EAAa,IAAoC,IAA9B2E,GAAgE,IAA7BA,EAC7Dl7H,EAAW1zB,MAAMmqJ,QAAQt2J,GAAG+2J,WAAagE,GAA4B3E,EAAa,GAE7Ep2J,IAAOo2J,EAAa,IAAoC,IAA9B2E,IAC/Bl7H,EAAW1zB,MAAMmqJ,QAAQt2J,GAAG+2J,WAAa7E,EAAQxyJ,QAAQqB,OAASq1J,EAAa,QApB3E,CACZ,GAAIl6E,GAAUg2E,EAAQ36I,KAAK48I,QAC3Bj4E,GAAQt2E,MAAM2xH,UAAUpuD,GACxB+S,EAAQt2E,MAAM+wJ,QAAQnD,GACtBt3E,EAAQt2E,MAAMgxJ,aAAalD,GAC3Bx3E,EAAQt2E,MAAMixJ,mBAAmB5C,EAEjC,IAAIxoJ,IAAS9J,IAAKA,EAAKzB,KAAM26J,EAAkB,cAAgB,SAAUj1J,MAAOs2E,EAAQ/vE,MACxFoQ,MAAKzV,OAAOotB,QxFlZO,4BwFkZmCzoB,EACtD,KAASzL,EAAI,EAAGA,EAAIkyJ,EAAQxyJ,QAAQqB,MAAOf,IACvCk8E,EAAQ/vE,MAAMmqJ,QAAQt2J,GAAG7B,MAAQA,EAAM6B,GAAGwM,cAkB9D2kJ,EAAUzyJ,UAAUu8J,oBAAsB,SAAUv0I,EAAYriB,EAAO02J,EAA0B/lI,GAa7F,MAZKj2B,qBAAkBi2B,EAAKl2B,OAAO86B,iBAAmB5E,EAAKe,WAAalK,WAASwS,QAGvEt/B,oBAAkBi2B,EAAKl2B,OAAO49B,sBAOpChW,EAAWi9B,eAAa93B,WAAUA,WAAS6S,eAAiB05C,UAAQpjD,EAAKl2B,OAAO29B,uBAN9C,IAA9Bs+H,IACAA,EAA2B12J,GAE/BqiB,EAAWi9B,eAAa93B,WAAUA,WAASmT,iBAAmBo5C,UAAQpjD,EAAKl2B,OAAO49B,uBANlFhW,EAAWi9B,eAAa93B,WAAUA,WAASwS,UAAY+5C,UAAQpjD,EAAKl2B,OAAO86B,iBAWtEshI,iBAAkBx0I,EAAYq0I,yBAA0BA,IAGrE5J,EAAUzyJ,UAAUs8J,0BAA4B,SAAUn8J,GACtD,MAAKE,qBAAkBF,EAAKmwJ,KAGlBjwJ,oBAAkBF,EAAKowJ,SAGvBlwJ,oBAAkBF,EAAKqwJ,KAGvBnwJ,oBAAkBF,EAAKswJ,KAGvBpwJ,oBAAkBF,EAAKuwJ,OAGvBrwJ,oBAAkBF,EAAKwwJ,WAGvBtwJ,oBAAkBF,EAAKywJ,YAGvBvwJ,oBAAkBF,EAAK0wJ,YAA5B,GACM1wJ,EAAK0wJ,OAHL1wJ,EAAKywJ,WAHLzwJ,EAAKwwJ,UAHLxwJ,EAAKuwJ,MAHLvwJ,EAAKswJ,IAHLtwJ,EAAKqwJ,IAHLrwJ,EAAKowJ,QAHLpwJ,EAAKmwJ,KA2BpBmC,EAAUzyJ,UAAUm1J,oBAAsB,SAAU9zJ,EAAamyJ,EAASh0H,EAAQr+B,EAAMozJ,GAEpF,IAAK,GADD39I,GAAazV,EAAKoB,cAAcvB,QAAQC,OACnCK,EAAI,EAAGA,EAAIsV,EAAYtV,IAC5BkyJ,EAAQxyJ,QAAQy7J,UAAUn7J,GAAGiF,MAAQ,EAEzC,KAASjF,EAAI,EAAGA,EAAID,EAAYJ,OAAQK,IAC/BjB,oBAAkBgB,EAAYC,GAAGwmB,aAClC0rI,EAAQxyJ,QAAQy7J,UAAUn7J,EAAIsV,GAAYzJ,OAAS0Q,KAAKg7I,uBAAuBx3J,EAAYC,GAAGwmB,YAG9F0rI,EAAQtsJ,MAAMqtJ,0BAA4Bl0J,oBAAkBgB,EAAYC,GAAGiF,QAAUguJ,IACrFf,EAAQxyJ,QAAQy7J,UAAUn7J,EAAIsV,GAAYrQ,MAAwC,gBAAzBlF,GAAYC,GAAGiF,MAC7C,IAAvBlF,EAAYC,GAAGiF,MAAgE,IAAjDi5B,EAAOkpH,kBAAkBrnJ,EAAYC,GAAGiF,SAQtFksJ,EAAUzyJ,UAAU08J,oBAAsB,SAAUz5J,EAAKwnE,GACrD,GAAKpqE,oBAAkBwd,KAAK22I,YAAen0J,oBAAkBwd,KAAK22I,UAAUvyG,QAkBxEh/C,EAAIiE,MAAMgxJ,aAAa,GAAIrC,iBAAc,GAAIC,YAAS,EAAG,EAAG,SAlBqB,CACjF,GAAIC,GAAc11J,oBAAkBwd,KAAK22I,UAAUvyG,OAAO+zG,UACDL,gBAAcC,UAAnE/3I,KAAKo4I,cAAcp4I,KAAK22I,UAAUvyG,OAAO+zG,UACzCrE,EAAYtxJ,oBAAkBwd,KAAK22I,UAAUvyG,OAAO0vG,UAA6C,KAAjC9zI,KAAK22I,UAAUvyG,OAAO0vG,SACtFuE,EAAYr4I,KAAKs4I,aAAat4I,KAAK22I,UAAUvyG,QAC7C6yG,EAAO,GAAIY,mBAAgBK,EAAYpE,EAAUuE,EAChD71J,qBAAkBwd,KAAK22I,UAAUvyG,OAAO6yG,QACzCA,EAAOj3I,KAAK22I,UAAUvyG,OAAO6yG,MAEjC7xJ,EAAIiE,MAAM+wJ,QAAQnD,EAClB,IAAIsB,GAAW,GAAIN,WACnB,KAAKz1J,oBAAkBwd,KAAK22I,UAAUvyG,OAAOo0G,WAAY,CACrD,GAAIC,GAAgBz4I,KAAK04I,SAAS14I,KAAK22I,UAAUvyG,OAAOo0G,UACxDD,GAAW,GAAIN,YAASQ,EAAc78I,EAAG68I,EAAcE,EAAGF,EAAc/4H,GAE5Et6B,EAAIiE,MAAMgxJ,aAAa,GAAIrC,iBAAcO,IAK7C,GAAIuG,GAAe9+I,KAAK22I,WAAa32I,KAAK22I,UAAUvyG,QAChDpkC,KAAK22I,UAAUvyG,OAAOwoB,OAAS5sD,KAAK64I,eAAe74I,KAAK22I,UAAUvyG,OAAOwoB,QAAUA,CAEvF,OADAxnE,GAAIiE,MAAM2xH,UAAU8jC,GACb15J,GAMXwvJ,EAAUzyJ,UAAUw1J,cAAgB,SAAU/qF,EAAQzpE,EAASG,EAAM0O,EAAY2jJ,EAAS58I,EAAYknF,EAAqBt+D,EAAQ1jB,GAE/H,IAAK,GAAIpO,GAAK,EAAGmF,EADN2sB,EAAOwoH,gBAAgBhnJ,EAAS6O,EAAY1O,EAAM2a,GAC7BpO,EAAKmF,EAAO5R,OAAQyM,IAAM,CACtD,GAAIzK,GAAM4P,EAAOnF,EACjBoO,IAIA,KAAK,GAFD0hE,GAAU3/D,KAAK6+I,oBAAoBlJ,EAAQ36I,KAAK48I,SAAUhrF,GAC1DmyF,EAAa35J,EAAIwK,MAAMxM,OAClBM,EAAI,EAAGA,EAAIq7J,EAAYr7J,IAAK,CACjC,GAAI8vJ,GAAWpuJ,EAAIwK,MAAMlM,EACzB,IAAI8vJ,EAASh6H,WAAalK,WAASK,KAAnC,CAGA,GAAIptB,GAASixJ,EAASjxJ,OAClBF,EAAQE,EAAOF,MACfsuJ,EAAanuJ,oBAAkBH,GAAyD,GAAhDE,EAAOH,cAAcC,EAAO+C,EAAI9C,KAAMC,GAC9EX,EAASY,oBAAkBmuJ,GAAyB,GAAZA,EACxCn/I,MAAiB,EAsBrB,IArBIjP,EAAOmoB,iBAAmBnoB,EAAOmoB,oBACjClZ,EAAiBmwB,EAAOqhB,SAASphD,EAAOW,GACxCX,EAAQ4G,WAASjG,EAAO+F,gBAAiBkJ,KAIzCtC,GACA5M,KAHO8C,EAAI9C,KAIXV,MAAOA,EACPW,OAAQA,EACR8G,UAAO0D,GACP0sB,QAAS,EACThB,KAPAA,EAAOknD,EAAQ/vE,MAAMmqJ,QAAQr2J,KAS5B9B,MAA6B,YAArBsN,EAAK3M,OAAOoB,MAA4C,gBAAfuL,GAAKtN,MAAqBsN,EAAKtN,MACjFoe,KAAKktI,qBAAqBhB,gBAAgBh9I,EAAM5L,EAAK2L,kBACzD+Q,KAAKzV,OAAOotB,QxFjsBE,mBwFisB+BzoB,GACxC1M,oBAAkB0M,EAAK4hJ,SACxB5hJ,EAAKtN,MAAQ,GAAIo8J,aAAU9uJ,EAAK4hJ,MAAMC,SAE1Ct4H,EAAK72B,MAAQsN,EAAKtN,OACbY,oBAAkB0M,EAAK+hJ,WAAY,CAEpC,GAAI+N,GAAW,GAAIC,iBAEnBD,GAAS/kJ,IAAM/K,EAAK+hJ,UAAUvvJ,OAE9Bs9J,EAASn0I,KAAO3b,EAAK+hJ,UAAUE,aAAejiJ,EAAK+hJ,UAAUvvJ,OAE7Ds9J,EAAS/H,KAAO,GAAIY,mBAAgBC,gBAAcC,UAAW,MAE7DiH,EAAS7H,MAAQ,GAAIa,iBAAc,GAAIC,YAAS,GAAI,IAAK,MACzDx/H,EAAK72B,MAAQo9J,EAKjB,GAHKx8J,oBAAkB0M,EAAK7F,QACxB2W,KAAKk/I,iBAAiBzmI,EAAMvpB,GAE5BA,EAAKuqB,QAAU,EAAG,CACb/1B,EAAI,EAAIwL,EAAKuqB,QAAWkmD,EAAQ/vE,MAAMpL,QACvC0K,EAAKuqB,QAAUkmD,EAAQ/vE,MAAMpL,OAASd,EAAI,IAE9C+0B,EAAK+hI,WAAatrJ,EAAKuqB,OACvB,KAAK,GAAIh2B,GAAI,EAAGA,EAAIg1B,EAAK+hI,WAAY/2J,IAClBk8E,EAAQ/vE,MAAMmqJ,QAAQr2J,EAAID,GAChC7B,MAAQ,EAErB8B,IAAMwL,EAAKuqB,QAAU,IAG7B,GAAIr0B,EAAIjB,SAAU,CACd,GAAIg7J,GAAYn/I,KAAK6+I,oBAAoBlJ,EAAQ36I,KAAK48I,SAAUhrF,GAC5Dn0C,EAAO0mI,EAAUvvJ,MAAMmqJ,QAAQhhJ,EACnC0f,GAAK+hI,WAAa2E,EAAUvvJ,MAAMpL,QAClCi0B,EAAKpvB,MAAM+1J,YAAc,GAAIC,eAAY,GAAI,GAAI,GAAI,IACrD/7J,EAAKq5B,YAAa,CAClB,IAAI+uH,IAAelpJ,oBAAkBy9F,IAAwBA,EAAoByrD,WAC7EzrD,EAAoByrD,WAAa,WACjC0L,EAAcp3I,KAAK2hB,OAAO8pH,gBAAgBnoJ,EAAM8B,EAAKsmJ,EAAY1rI,KAAKqrI,UACtEG,EAAe4L,EAAY1hJ,UAC3B9K,EAAUwsJ,EAAYxsJ,OAC1B4gJ,GAAaiG,cACT9vH,EAAO4pH,eAAevrI,KAAKqrI,SAAUG,EAAcxrI,KAAKsrI,cAC5D,IAAIp8I,IAASwG,UAAW81I,EAAcpmJ,IAAKA,EAAKqzB,KAAMA,EAAMv1B,iBAAkB+8F,EAC9EjgF,MAAKzV,OAAOotB,QxFtvBO,wBwFsvB+BzoB,GAClDs8I,EAAakG,gBAAkB1xI,KAAK2xI,cAAcl5H,EAAM+yH,EAAcvrD,GACtEurD,EAAa/wG,SAAS7vC,GAE1BoV,KAAKzV,OAAOsoB,OxFxrBQ,uBwFwrB4BlvB,KAAM,MAAO0Z,OAAQjY,IAEzE,MAAO6Y,IAEX22I,EAAUzyJ,UAAUwvJ,cAAgB,SAAUl5H,EAAM+yH,EAAcvrD,GAC9D,GAAIv3E,GAAQ1I,IACZ,OAAO,UAAUta,GAQb,MAPA8lJ,GAAakG,gBAAkB,KAC/BhsJ,EAAOuhC,QAAS,EAChBxO,EAAK72B,MAAQ8mB,EAAMwlI,kBAAkB1C,EAAc9lJ,EAAQu6F,GAC3DurD,EAAa39H,UACb24E,SAAOglD,EAAa5gJ,SACpB8d,EAAM2iI,SAASG,EAAahhJ,KAAM,EAClCke,EAAMiZ,OAAOypH,eAAe1iI,EAAM2iI,SAAU3iI,EAAM4iI,eAC3C7yH,IAGfm8H,EAAUzyJ,UAAU+8J,iBAAmB,SAAUzmI,EAAMvpB,GACnD,IAAK1M,oBAAkB0M,EAAK7F,MAAMi2J,iBAAkB,CAChD,GAAIlL,GAAYp0I,KAAK04I,SAASxpJ,EAAK7F,MAAMi2J,gBACzC7mI,GAAKpvB,MAAMquJ,gBAAkB,GAAIM,iBAAc,GAAIC,YAAS7D,EAAUx4I,EAAGw4I,EAAUuE,EAAGvE,EAAU10H,IAWpG,GATKl9B,oBAAkB0M,EAAK7F,MAAMk2J,iBAC9B9mI,EAAKpvB,MAAM2wJ,aAAeh6I,KAAKg7I,uBAAuB9rJ,EAAK7F,MAAMk2J,gBAEhE/8J,oBAAkB0M,EAAK7F,MAAM+1J,eAC9B3mI,EAAKpvB,MAAM+1J,YAAclwJ,EAAK7F,MAAM+1J,aAEnC58J,oBAAkB0M,EAAK7F,MAAMm2J,qBAC9B/mI,EAAKpvB,MAAM2wJ,aAAeh6I,KAAKi7I,qBAAqB/rJ,EAAK7F,MAAMm2J,kBAAmB/mI,EAAKpvB,MAAM2wJ,gBAE5Fx3J,oBAAkB0M,EAAK7F,MAAMi0J,gBAAiB,CAC/C,GAAIA,GAAiBt9I,KAAK04I,SAASxpJ,EAAK7F,MAAMi0J,eAC9C7kI,GAAKpvB,MAAMo2J,UAAY,GAAIzH,iBAAc,GAAIC,YAASqF,EAAe1hJ,EAAG0hJ,EAAe3E,EAAG2E,EAAe59H,IAE7G,IAAKl9B,oBAAkB0M,EAAK7F,MAAM4zJ,cAAe,CAC7C,GAAIA,GAAej9I,KAAK04I,SAASxpJ,EAAK7F,MAAM4zJ,aAC5CxkI,GAAKpvB,MAAMq2J,QAAU,GAAI9F,UAAO,GAAI3B,YAASgF,EAAarhJ,EAAGqhJ,EAAatE,EAAGsE,EAAav9H,IAM9F,GAJKl9B,oBAAkB0M,EAAK7F,MAAM6uJ,aAAgB11J,oBAAkB0M,EAAK7F,MAAMyqJ,WAActxJ,oBAAkB0M,EAAK7F,MAAM4qJ,OACrHzxJ,oBAAkB0M,EAAK7F,MAAMs2J,SAAYn9J,oBAAkB0M,EAAK7F,MAAMu2J,YAAep9J,oBAAkB0M,EAAK7F,MAAMw2J,aACnHpnI,EAAKpvB,MAAM4tJ,KAAOj3I,KAAK88I,QAAQ5tJ,KAE9B1M,oBAAkB0M,EAAK7F,MAAMujE,QAAS,CACvC,GAAIA,GAAS,GAAI+sF,cACb1rF,EAAc/+D,EAAK7F,MAAMujE,OAAOlkE,MAEhCA,EAAUlG,oBAAkByrE,IAAuC,gBAAhBA,UAA2C,IAAdA,EAEhF+lF,EAAQ,GAAIiE,YAAS,IAAK,IAAK,IACnC,KAAKz1J,oBAAkB0M,EAAK7F,MAAMujE,OAAOonF,OAAQ,CAC7C,GAAI8L,GAAc9/I,KAAK04I,SAASxpJ,EAAK7F,MAAMujE,OAAOonF,MAClDA,GAAQ,GAAIiE,YAAS6H,EAAYlkJ,EAAGkkJ,EAAYnH,EAAGmH,EAAYpgI,GAEnE,GAAIs9H,GAAM,GAAIpD,UAAO5F,EAAOtrJ,EAEvBlG,qBAAkB0M,EAAK7F,MAAMujE,OAAOuxF,aACrCnB,EAAImB,UAAYn+I,KAAKo+I,aAAalvJ,EAAK7F,MAAMujE,OAAOuxF,YAExDvxF,EAAO4/B,IAAMwwD,EACbvkI,EAAKpvB,MAAM0qJ,QAAUnnF,EAEpBpqE,oBAAkB0M,EAAK7F,MAAM02J,mBAC9BtnI,EAAKpvB,MAAM2wJ,aAAe,GAAIC,mBAC9BxhI,EAAKpvB,MAAM2wJ,aAAa+F,gBAAkB7wJ,EAAK7F,MAAM02J,kBAO7DnL,EAAUzyJ,UAAU64J,uBAAyB,SAAU/wI,EAAW3a,GAI9D,WAHevC,KAAXuC,IACAA,EAAS,GAAI2qJ,oBAEThwI,GACJ,IAAK,QACD3a,EAAOiwC,UAAY26G,mBAAiB8F,KACpC,MACJ,KAAK,SACD1wJ,EAAOiwC,UAAY26G,mBAAiB+F,MACpC,MACJ,KAAK,UACD3wJ,EAAOiwC,UAAY26G,mBAAiBgG,OACpC,MACJ,KAAK,OACD5wJ,EAAOiwC,UAAY26G,mBAAiBC,KAG5C,MAAO7qJ,IAMXslJ,EAAUzyJ,UAAU84J,qBAAuB,SAAUkF,EAAe7wJ,EAAQ2a,GAKxE,WAJeld,KAAXuC,IACAA,EAAS,GAAI2qJ,mBACb3qJ,EAAS0Q,KAAKg7I,uBAAuB/wI,EAAW3a,IAE5C6wJ,GACJ,IAAK,SACD7wJ,EAAO8wJ,cAAgBC,uBAAqBC,MAC5C,MACJ,KAAK,SACDhxJ,EAAO8wJ,cAAgBC,uBAAqBE,MAC5C,MACJ,KAAK,MACDjxJ,EAAO8wJ,cAAgBC,uBAAqBG,IAGpD,MAAOlxJ,IAEXslJ,EAAUzyJ,UAAUi2J,cAAgB,SAAUF,GAC1C,OAAQA,GACJ,IAAK,aACD,MAAO,EACX,KAAK,UACD,MAAO,EACX,KAAK,SACD,MAAO,EACX,KAAK,eACD,MAAO,EACX,SACI,MAAO,KAInBtD,EAAUzyJ,UAAU26J,QAAU,SAAUh3I,GACpC,GAAIA,EAAQmxI,KACR,MAAOnxI,GAAQmxI,IAEnB,IAAInD,GAAatxJ,oBAAkBsjB,EAAQzc,MAAMyqJ,UAA+C,KAAR,IAAzBhuI,EAAQzc,MAAMyqJ,SACzEoE,EAAe11J,oBAAkBsjB,EAAQzc,MAAM6uJ,YACEJ,gBAAc2I,WAA9DzgJ,KAAKo4I,cAActyI,EAAQzc,MAAM6uJ,YAClCG,EAAYW,eAAa0H,OAa7B,QAZKl+J,oBAAkBsjB,EAAQzc,MAAM4qJ,OAASnuI,EAAQzc,MAAM4qJ,OACxDoE,GAAaW,eAAa2H,OAEzBn+J,oBAAkBsjB,EAAQzc,MAAMs2J,SAAW75I,EAAQzc,MAAMs2J,SAC1DtH,GAAaW,eAAa4H,SAEzBp+J,oBAAkBsjB,EAAQzc,MAAMu2J,YAAc95I,EAAQzc,MAAMu2J,YAC7DvH,GAAaW,eAAa6H,YAEzBr+J,oBAAkBsjB,EAAQzc,MAAMw2J,YAAc/5I,EAAQzc,MAAMw2J,YAC7DxH,GAAaW,eAAa8H,WAEvB,GAAIjJ,mBAAgBK,EAAYpE,EAAUuE,IAErDzD,EAAUzyJ,UAAUw7J,mBAAqB,SAAUC,GAC/C,OAAQA,GACJ,IAAK,aACD,MAAO,EACX,KAAK,aACD,MAAO,EACX,KAAK,aACD,MAAO,EACX,KAAK,aACD,MAAO,EACX,SACI,MAAO,KAGnBhJ,EAAUzyJ,UAAUg7J,iBAAmB,SAAUr3I,EAASxW,GACtD,IAAK9M,oBAAkBsjB,EAAQ6tH,MAAO,CAClC,GAAIjrI,GAA6B,IAArBod,EAAQ6tH,KAAKjrI,MACrB4E,EAA+B,IAAtBwY,EAAQ6tH,KAAKrmI,MAE1B,IADAgC,EAAS,GAAI2qJ,mBAAgBC,mBAAiBC,KAAMkG,uBAAqBE,SACpE/9J,oBAAkBsjB,EAAQzc,MAAM+nJ,QACjC,OAAQtrI,EAAQzc,MAAM+nJ,QAClB,IAAK,QACD9hJ,EAAOiwC,UAAY26G,mBAAiB8F,KACpC,MACJ,KAAK,SACD1wJ,EAAOiwC,UAAY26G,mBAAiB+F,MACpC,MACJ,KAAK,UACD3wJ,EAAOiwC,UAAY26G,mBAAiBgG,OACpC,MACJ,SACI5wJ,EAAOiwC,UAAY26G,mBAAiBC,KAMhD,MAHK33J,qBAAkBsjB,EAAQzc,MAAM03J,UACjCzxJ,EAAS0Q,KAAKi7I,qBAAqBn1I,EAAQzc,MAAM03J,OAAQzxJ,KAEpDA,OAAQA,EAAQqkI,KAAM,GAAI+nB,SAAMhzJ,EAAO4E,IAEpD,MAAO,OAEXsnJ,EAAUzyJ,UAAUq0J,YAAc,SAAUjhJ,GACxC,OAAQA,GACJ,IAAK,SACD,MAAO,IAAImmJ,SAAM,IAAK,IAC1B,KAAK,OACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,QACD,MAAO,IAAIA,SAAM,IAAK,KAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,KAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,IAG1B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,KAC1B,KAAK,KACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,QACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,QACD,MAAO,IAAIA,SAAM,IAAK,KAC1B,KAAK,QACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,QACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,QACD,MAAO,IAAIA,SAAM,KAAM,KAC3B,KAAK,OACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,aACD,MAAO,IAAIA,SAAM,IAAK,IAC1B,KAAK,cACD,MAAO,IAAIA,SAAM,IAAK,KAC1B,KAAK,SACD,MAAO,IAAIA,SAAM,KAAM,IAC3B,SACI,MAAO,IAAIA,SAAM,IAAK,OAGlC9G,EAAUzyJ,UAAUi8J,aAAe,SAAUD,GACzC,OAAQA,GACJ,IAAK,OACD,MAAO,EACX,KAAK,MACD,MAAO,EACX,KAAK,UACD,MAAO,EACX,KAAK,aACD,MAAO,EACX,SACI,MAAO,KAGnBvJ,EAAUzyJ,UAAU87J,kBAAoB,SAAUn4I,GAC9C,GAAIk3I,GAAM,GAAIpD,UAAO,GAAI3B,YAAS,EAAG,EAAG,GACxC,KAAKz1J,oBAAkBsjB,EAAQzc,QAA4B,OAAlByc,EAAQzc,QAAmB7G,oBAAkBsjB,EAAQzc,MAAM6zJ,UAAW,CAC3G,GAAIA,GAAWl9I,KAAK04I,SAAS5yI,EAAQzc,MAAM6zJ,SAC3CF,GAAM,GAAIpD,UAAO,GAAI3B,YAASiF,EAASthJ,EAAGshJ,EAASvE,EAAGuE,EAASx9H,IAEnE,MAAOs9H,IAEXpI,EAAUzyJ,UAAU46J,oBAAsB,SAAUj3I,GAChD,GAAIqxI,GAAQ,IACZ,KAAK30J,oBAAkBsjB,EAAQzc,MAAMi0J,gBAAiB,CAElD,GAAIC,GAAav9I,KAAK04I,SAAS5yI,EAAQzc,MAAMi0J,eAC7CnG,GAAQ,GAAIa,iBAAc,GAAIC,YAASsF,EAAW3hJ,EAAG2hJ,EAAW5E,EAAG4E,EAAW79H,IAElF,MAAOy3H,IAEXvC,EAAUzyJ,UAAUu2J,SAAW,SAAUsI,GACrC,GAAY,OAARA,GAAwB,KAARA,GAA6B,IAAfA,EAAI59J,OAClC,KAAM,IAAIk5J,OAAM,0CAEpB0E,GAAMA,EAAI11C,UAAU,EACpB,IAAI21C,GAAS7yH,SAAS4yH,EAAK,GAI3B,QAASplJ,EAHAqlJ,GAAU,GAAM,IAGVtI,EAFNsI,GAAU,EAAK,IAEHvhI,EADJ,IAATuhI,IAGZrM,EAAUzyJ,UAAUm2J,aAAe,SAAUrJ,GACzC,GAAIoJ,GAAYW,eAAa0H,OAa7B,QAZKl+J,oBAAkBysJ,IAAUA,EAAMgF,OACnCoE,GAAaW,eAAa2H,OAEzBn+J,oBAAkBysJ,IAAUA,EAAM0Q,SACnCtH,GAAaW,eAAa4H,SAEzBp+J,oBAAkBysJ,IAAUA,EAAM2Q,YACnCvH,GAAaW,eAAa6H,YAEzBr+J,oBAAkBysJ,IAAUA,EAAM4Q,YACnCxH,GAAaW,eAAa8H,WAEvBzI,GAEXzD,EAAUzyJ,UAAU02J,eAAiB,SAAUjsF,GAC3C,GAAImnF,GAAU,GAAI4F,aAClB,IAAKn3J,oBAAkBoqE,GAkBnBmnF,EAAQvnD,IAAM,GAAIotD,UAAO,GAAI3B,YAAS,IAAK,IAAK,UAlBpB,CAC5B,GAAIhqF,GAAcrB,EAAOlkE,MAErBA,EAAUlG,oBAAkByrE,IAAuC,gBAAhBA,OAAiDlhE,GAAP,IAAdkhE,EAE/E+lF,EAAQ,GAAIiE,YAAS,IAAK,IAAK,IACnC,KAAKz1J,oBAAkBoqE,EAAOonF,OAAQ,CAClC,GAAI8L,GAAc9/I,KAAK04I,SAAS9rF,EAAOonF,MACvCA,GAAQ,GAAIiE,YAAS6H,EAAYlkJ,EAAGkkJ,EAAYnH,EAAGmH,EAAYpgI,GAEnE,GAAIs9H,GAAM,GAAIpD,UAAO5F,EAAOtrJ,EAEvBlG,qBAAkBoqE,EAAOuxF,aAC1BnB,EAAImB,UAAYn+I,KAAKo+I,aAAaxxF,EAAOuxF,YAE7CpK,EAAQvnD,IAAMwwD,EAKlB,MAAOjJ,IAOXa,EAAUzyJ,UAAU0rB,QAAU,aAGvB+mI,KC/2CPp1H,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAWnFohI,GAAuC,SAAUl/H,GAEjD,QAASk/H,GAAsB32J,EAAQiY,GACnC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAQlD,OAPA0I,GAAMy4I,cAAgBz4I,EAAMne,OAAOkC,cAAc,aACjDic,EAAM04I,UAAY14I,EAAMne,OAAOkC,cAAc,OAAS3D,UAAW,mBAAoBoE,OAAQ,0BAC7Fwb,EAAM9d,QAAU8d,EAAMne,OAAOkC,cAAc,MACvC3D,UAAW,0BAA2BwyB,OAClCC,KAAM,WAAY0f,SAAU,QAG7BvyB,EAiEX,MA3EA8W,IAAU0hI,EAAuBl/H,GAmBjCk/H,EAAsB/+J,UAAUohB,OAAS,SAAUkV,EAAMn2B,EAAM0E,GAC3D,GAAIN,GAAOsZ,KAAKpV,QAAQsJ,WAIxB,IAFAxN,EAAKoF,YAAYkU,KAAKohJ,UAAUltJ,aAChCxN,EAAK3E,aAAa,aAAc,mCAAqC02B,EAAKl2B,OAAO8F,YAC7EowB,EAAKl2B,OAAO2nB,iBACZ,GAAIlK,KAAKzV,OAAOkhB,SAAqD,gBAAlCgN,GAAKl2B,wBAAuC,CAC3E,GAAIy9C,GAAShgC,KAAKzV,OAAS,kBAC3BkuB,GAAKl2B,OAAOwpB,oBAAoBzpB,EAAM0d,KAAKzV,OAAQ,mBAAoBy1C,EAAQ,KAAM,KAAMt5C,EAAKiS,mBAChGqH,KAAKzV,OAAOihC,sBAGZ5/B,GAAelF,EAAKiS,kBAAmB8f,EAAKl2B,OAAOwpB,oBAAoBzpB,QAI3E,KAAK,GAAIuN,GAAK,EAAGkG,EAAK0iB,EAAKzO,SAAUna,EAAKkG,EAAG3S,OAAQyM,IAAM,CACvD,GAAIwxJ,GAAUtrJ,EAAGlG,EACjBnJ,GAAOsZ,KAAKshJ,aAAa56J,EAAM26J,EAASr6J,EAAWc,MAAOu5J,EAAW,KAY7E,MATArhJ,MAAK88B,cAAcp2C,EAAM+xB,EAAMzxB,GAC3BgZ,KAAKzV,OAAOuxB,QACZ/0B,WAASL,EAAKN,iBAAiB,kBAAmB,UAClDgL,cAAY1K,EAAKN,iBAAiB,kBAAmB,YAGrDW,WAASL,EAAKN,iBAAiB,kBAAmB,UAClDgL,cAAY1K,EAAKN,iBAAiB,kBAAmB,WAElDM,GAEXw6J,EAAsB/+J,UAAUm/J,aAAe,SAAU56J,EAAM66J,EAAcz5J,EAAO6D,GAChF,GAAI4uC,GAASv6B,KAAKmhJ,cAAcjtJ,WAChClN,cAAWuzC,GACP/vC,GAAMwV,KAAKzV,OAAOK,QAAQJ,IAAM+2J,EAAa59J,MAAQ,IAAM,IAAMmE,EAAQ,IAAM6D,EAAKhI,KAAQ,SAC5FykD,MAAQ5lD,oBAAkB++J,EAAan5G,OACnCm5G,EAAaA,aAAaz7I,SAAW9F,KAAK+6B,UAAUwB,YAAYglH,EAAa59J,OAAS49J,EAAa59J,KADvD49J,EAAan5G,MAE7D44E,WAAYr1H,IAEhB4uC,EAAOG,QAAU6mH,EAAaA,aAAa3zI,KAC3C,IAAI4zI,GAAY,GAAIhnH,UAAO+mH,EAAaA,aAAchnH,EAGtD,QAFAinH,EAAUC,YAAcF,EAAa59J,KACrC+C,EAAKiS,kBAAkB7M,YAAY01J,EAAU52J,SACrC22J,EAAa59J,MACjB,IAAK,OACL,IAAK,SACDoD,YAAUwzC,IAAU,gBAAiB,KAAOgnH,EAAa59J,KAAKwE,cAAgB,UAC9E,MACJ,KAAK,SACL,IAAK,OACDpB,YAAUwzC,IAAU,gBAAiB,KAAOgnH,EAAa59J,KAAKwE,cAAgB,WAGtF,MAAOzB,IAEJw6J,GACTpmH,ICzFEje,GAA+B,WAC/B,QAASA,GAActyB,EAAQiY,GAC3BxC,KAAKzV,OAASA,EACdyV,KAAKwC,QAAUA,EACfxC,KAAKsoH,iBACLtoH,KAAKghC,mBA4HT,MA1HAnkB,GAAc16B,UAAUmmI,eAAiB,WACvBtoH,KAAKwC,QAAQpT,WAAW,uBAC9B22C,gBAAgBz2B,WAASuN,cAAe,GAAIqkI,IAAsBlhJ,KAAKzV,OAAQyV,KAAKwC,WAEhGqa,EAAc16B,UAAUu/J,oBAAsB,SAAU1+J,GACpD,GAAIM,GAAO0c,KAAKzV,OAEZ7I,GADM4B,EAAKsH,QAAQJ,GACV6N,UAAQrV,EAAEtB,OAAQ,UAC/B,IAAKA,GAAW2W,UAAQrV,EAAEtB,OAAQ,kBAAlC,CASA,IAAK,GAHDigK,GAHAH,EAAY9/J,EAAOyvF,cAAc,GACjCxtF,EAAO69J,EAAUC,YACjB91J,EAAMjK,EAAOgpC,aAAa,YAE1BtlC,EAAM9B,EAAKsnC,oBAAoBvyB,UAAQ3W,EAAQ,UAAUgpC,aAAa,aACtEpY,EAAOtS,KAAKzV,OAAO3C,YACdnE,EAAI,EAAGA,EAAI6uB,EAAKlvB,OAAQK,IAC7B,GAAI6uB,EAAK7uB,GAAGumB,SAER,IAAK,GADD43I,GAActvI,EAAK7uB,GAAGumB,SACjBtmB,EAAI,EAAGA,EAAIk+J,EAAYx+J,OAAQM,IAAK,CAGrC6L,eAAejM,EAAKgqC,eAAiBs0H,EAAYl+J,GAAa,MAAMiI,GACpEg2J,EAAgBC,EAAYl+J,GAC5BC,EAAOi+J,EAAYl+J,GAAe,MAE7Bk+J,EAAYl+J,GAAa,MAAMiI,GAAOi2J,EAAYl+J,GAAe,OAAMC,IAC5Eg+J,EAAgBC,EAAYl+J,IAK5C,GAAIwL,IACA+3B,QAAQ,EACRvlC,OAAQA,EACRigK,cAAeA,EACf5/I,QAASvf,oBAAkB4C,OAAO2H,GAAY3H,EAAI9C,KAEtD0d,MAAKzV,OAAOotB,Q1FoEM,e0FpEgBzoB,EAAM,SAAU2yJ,GAC9C,IAAIL,EAAU/4G,UAAanlD,EAAKowD,aAAcmuG,EAAiB56H,OAG/D,OAAQtjC,GACJ,IAAK,OACDL,EAAKowD,WAAWj8B,UAChBn0B,EAAKowD,WAAWklC,UAAUvgF,UAAQ3W,EAAQ,MAC1C,MACJ,KAAK,SACD4B,EAAKowD,WAAWmlC,WAChB,MACJ,KAAK,OACDv1F,EAAKowD,WAAWj8B,SAChB,MACJ,KAAK,SAC8B,UAA3Bn0B,EAAKkL,aAAaC,MAClBnL,EAAKowD,WAAWj8B,UAEpBn0B,EAAKw+C,gBAAkB1T,SAAS/1B,UAAQ3W,EAAQ,MAAMgpC,aAAa,iBAAkB,IACrFpnC,EAAKqf,iBAELrf,EAAKinC,UAAUjnC,EAAKw+C,iBAAiB,GACrCx+C,EAAKowD,WAAWglC,eAChBp1F,EAAKw+C,oBAAkB/0C,QAQvC8vB,EAAc16B,UAAUguB,cAAgB,WACpC,MAAO,iBAOX0M,EAAc16B,UAAU0rB,QAAU,WAC1B7N,KAAKzV,OAAO2lB,aAGhBlQ,KAAKiuC,uBAETpxB,EAAc16B,UAAU8rD,oBAAsB,WACtCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAIjK,GAAO5N,KAAK0hJ,qBAC5B1hJ,KAAKzV,OAAOstB,IAAIlK,GAAY3N,KAAKk9E,iBACjCl9E,KAAKzV,OAAOstB,IAAI7K,GAAYhN,KAAKqmF,QAErCxpE,EAAc16B,UAAU6+C,iBAAmB,WACnChhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGxC,GAAO5N,KAAK0hJ,oBAAqB1hJ,MAChDA,KAAKzV,OAAO6lB,GAAGzC,GAAY3N,KAAKk9E,gBAAiBl9E,MACjDA,KAAKzV,OAAO6lB,GAAGpD,GAAYhN,KAAKqmF,KAAMrmF,QAE1C6c,EAAc16B,UAAU+6F,gBAAkB,SAAUl6F,GAC/B,UAAbA,EAAE6L,QAAsBwJ,UAAQrV,EAAEtB,OAAQ,uBAC1Cse,KAAK0hJ,oBAAoB1+J,GACzBA,EAAE8yD,mBAGVj5B,EAAc16B,UAAUkkG,KAAO,WAC3B,IAAI92F,cAAeyQ,KAAKzV,OAAO+iC,cAK/B,IAAK,GADDv/B,GAAMiS,KAAKzV,OAAO3C,YACbnE,EAAI,EAAGA,EAAIsK,EAAI3K,OAAQK,IAC5B,GAAIsK,EAAItK,GAAGumB,SAEP,IAAK,GADD83I,GAAa/zJ,EAAItK,GAAGumB,SACftmB,EAAI,EAAGA,EAAIo+J,EAAW1+J,OAAQM,IACnCo+J,EAAWp+J,GAAM,IAAI+H,EAAO,gBAKrCoxB,KC/HAklI,IACP75G,OAAQ,gBACRpiC,QAAS,iBACTqD,KAAM,iBACN64I,UAAW,qBACXC,SAAU,SACVC,MAAO,eACPn0E,OAAQ,WACR8gE,KAAM,SACN5nH,OAAQ,WACRq2C,KAAM,SACN6kF,IAAK,cACLpyI,MAAO,eACPqyI,QAAS,iBACTC,IAAK,cACLC,MAAO,gBACPC,MAAO,eACPC,MAAO,cACPC,MAAO,cACPC,MAAO,cACPC,UAAW,mBACXC,WAAY,oBACZC,YAAa,kBACbC,SAAU,eAKVzxD,GAA6B,WAC7B,QAASA,GAAY9mG,EAAQyE,GACzBgR,KAAK+iJ,gBACL/iJ,KAAKukH,gBACLvkH,KAAKgjJ,eACLhjJ,KAAKijJ,WAAajjJ,KAAKkjJ,eACvBljJ,KAAKzV,OAASA,EACdyV,KAAKiiH,OAAS13H,EAAOK,QAAQJ,GAC7BwV,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBA+iBT,MA1iBAqwD,GAAYlvG,UAAU6+C,iBAAmB,WACjChhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAKmjJ,sBAAuBnjJ,MAC5DA,KAAKzV,OAAO6lB,GAAG41B,GAAoBhmC,KAAKuD,OAAQvD,QAKpDqxF,EAAYlvG,UAAU8rD,oBAAsB,WACpCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAImuB,GAAoBhmC,KAAKuD,QACzCvD,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAKmjJ,uBACtCv5G,eAAa/nD,OAAOme,KAAKpV,QAAS,UAAWoV,KAAKgyD,eAAe3+C,KAAKrT,SAE1EqxF,EAAYlvG,UAAU6vE,eAAiB,SAAUhvE,GAC9B,QAAXA,EAAEogK,MAA8B,IAAZpgK,EAAEqgK,OACtBrjJ,KAAKsjJ,YAAYh3G,QAEN,WAAXtpD,EAAEogK,OACFpjJ,KAAKsjJ,YAAYh3G,QACjBtsC,KAAKzV,OAAOsoB,O3FyTE,sB2FtTtBw+E,EAAYlvG,UAAUohB,OAAS,WAC3BvD,KAAKzV,OAAOK,QAAQH,UAAUqE,IAAI,cAClCkR,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKpV,QAAUoV,KAAKzV,OAAOkC,cAAc,MAAQjC,GAAIwV,KAAKiiH,OAAS,WACnEr4E,eAAa96C,IAAIkR,KAAKpV,QAAS,UAAWoV,KAAKgyD,eAAe3+C,KAAKrT,OACnEA,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKpV,QACrC,IAAIlJ,GAAS,IAAMse,KAAKiiH,MACxBjiH,MAAKsjJ,YAAc,GAAIt8C,gBACnBriH,MAAOqb,KAAKujJ,eACZrhJ,UAAWlC,KAAKzV,OAAO2X,UACvBq1B,kBAAmBv3B,KAAKzV,OAAOgtC,kBAC/ByU,OAAQhsC,KAAKzV,OAAOyhD,OACpBtqD,OAAQA,EACR6M,OAAQyR,KAAKwjJ,qBAAqBnwI,KAAKrT,MACvCuiG,WAAYviG,KAAKyjJ,sBAAsBpwI,KAAKrT,MAC5C0jJ,OAAQ1jJ,KAAK2jJ,gBAAgBtwI,KAAKrT,MAClCkxF,QAASlxF,KAAK4jJ,mBAAmBvwI,KAAKrT,MACtCid,SAAU,gBAEdjd,KAAKsjJ,YAAY7oH,SAASz6B,KAAKpV,UAEnCymG,EAAYlvG,UAAUghK,sBAAwB,SAAUngK,GAChDA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,SACnCzxB,KAAKsjJ,cACLtjJ,KAAKsjJ,YAAYz1I,UACjBhsB,SAAOme,KAAKpV,SACZoV,KAAKzV,OAAOK,QAAQH,UAAU5I,OAAO,eAEzCme,KAAKuD,WAGb8tF,EAAYlvG,UAAUohK,aAAe,WAGjC,IAAK,GAFDM,MACAC,KACKj0J,EAAK,EAAGkG,EAAKiK,KAAKzV,OAAOs7E,iBAAkBh2E,EAAKkG,EAAG3S,OAAQyM,IAAM,CACtE,GAAIurB,GAAOrlB,EAAGlG,EACM,iBAATurB,KAA+D,IAA1Cpb,KAAK+jJ,kBAAkBr8J,QAAQ0zB,IACP,IAAhDA,EAAK4oI,oBAAoBt8J,QAAQ,UACjCo8J,EAAY5/J,KAAK8b,KAAKikJ,kBAAkB7oI,IAGxCyoI,EAAU3/J,KAAK8b,KAAKikJ,kBAAkB7oI,IAGrB,gBAATA,IACZyoI,EAAU3/J,KAAKk3B,GAGvB,GAAI0oI,EAAY1gK,OAAS,EAAG,CACxB,GAAI8gK,GAAclkJ,KAAKikJ,kBAAkB,SACzCC,GAAYv/J,MAAQm/J,EACpBD,EAAU3/J,KAAKggK,GAEnB,MAAOL,IAEXxyD,EAAYlvG,UAAUgiK,YAAc,WAChC,GAAIC,GAAYh3J,KAAK4hE,MAAMhvD,KAAKzV,OAAO8K,aAAa6sC,kBAAoBliC,KAAKzV,OAAO8K,aAAaE,SAIjG,OAHIyK,MAAKzV,OAAO8K,aAAa6sC,kBAAoBliC,KAAKzV,OAAO8K,aAAaE,WACtE6uJ,GAAa,GAEVA,GAEX/yD,EAAYlvG,UAAUwhK,gBAAkB,WACpC3jJ,KAAK8oC,QAAS,GAKlBuoD,EAAYlvG,UAAUqhK,qBAAuB,SAAUt0J,GAEnD,OADW8Q,KAAKqkJ,aAAan1J,EAAKksB,KAAK5wB,KAEnC,IAAK,aACDwV,KAAKzV,OAAOmwF,kBACZ,MACJ,KAAK,UACD16E,KAAKzV,OAAOmwF,eAAe16E,KAAKskJ,aAAajiK,MAC7C,MACJ,KAAK,QACD2d,KAAKzV,OAAO61F,YAAYpgF,KAAKskJ,aAAajiK,MAC1C,MACJ,KAAK,UACD2d,KAAKzV,OAAOo2F,cAAc3gF,KAAKskJ,aAAajiK,MAC5C,MACJ,KAAK,OACG2d,KAAKzV,OAAOmpD,aAC0B,UAAlC1zC,KAAKzV,OAAOiE,aAAaC,KACrBuR,KAAK5a,KAAO4a,KAAKyY,OAAS2iB,MAAMhN,SAASpuB,KAAKyY,KAAKiS,aAAa,iBAAkB,MAClF1qB,KAAKzV,OAAOmpD,WAAWslC,SAAS5qD,SAASpuB,KAAK5a,IAAIslC,aAAa,iBAAkB,IAAK1qB,KAAKzV,OAAO2L,aAAak4B,SAASpuB,KAAKyY,KAAKiS,aAAa,iBAAkB,KAAKroC,QAI1K2d,KAAKzV,OAAOmpD,WAAWj8B,UACvBzX,KAAKzV,OAAOmpD,WAAWklC,UAAU54E,KAAK5a,MAG9C,MACJ,KAAK,SACG4a,KAAKzV,OAAOmpD,aAC0B,UAAlC1zC,KAAKzV,OAAOiE,aAAaC,MACzBuR,KAAKzV,OAAOmpD,WAAWj8B,UAEqB,IAA5CzX,KAAKzV,OAAOw3C,qBAAqB3+C,OACjC4c,KAAKzV,OAAOmpD,WAAWqlC,UAAU/4E,KAAK5a,KAGtC4a,KAAKzV,OAAOmuF,eAGpB,MACJ,KAAK,OACG14E,KAAKzV,OAAOmpD,YACZ1zC,KAAKzV,OAAOmpD,WAAWj8B,SAE3B,MACJ,KAAK,SACGzX,KAAKzV,OAAOmpD,YACZ1zC,KAAKzV,OAAOmpD,WAAWmlC,WAE3B,MACJ,KAAK,OACD74E,KAAKzV,OAAO+yE,MACZ,MACJ,KAAK,YACDt9D,KAAKzV,OAAOy1F,WACZ,MACJ,KAAK,cACDhgF,KAAKzV,OAAOi1F,aACZ,MACJ,KAAK,YACDx/E,KAAKzV,OAAOw1F,WACZ,MACJ,KAAK,gBACD//E,KAAK8oC,QAAS,EACd9oC,KAAKzV,OAAOwiD,WAAW/sC,KAAKskJ,aAAajiK,MAAO,YAChD,MACJ,KAAK,iBACD2d,KAAK8oC,QAAS,EACd9oC,KAAKzV,OAAOwiD,WAAW/sC,KAAKskJ,aAAajiK,MAAO,aAChD,MACJ,KAAK,YACD2d,KAAKzV,OAAOotF,SAAS,EACrB,MACJ,KAAK,WACD33E,KAAKzV,OAAOotF,SAAS33E,KAAKzV,OAAO8K,aAAaC,YAAc,EAC5D,MACJ,KAAK,WACD0K,KAAKzV,OAAOotF,SAAS33E,KAAKmkJ,cAC1B,MACJ,KAAK,WACDnkJ,KAAKzV,OAAOotF,SAAS33E,KAAKzV,OAAO8K,aAAaC,YAAc,GAKpE,GAFApG,EAAK3M,OAASyd,KAAKskJ,aACnBp1J,EAAKq1J,QAAUvkJ,KAAKwkJ,cAChBj1J,aAAY,CACZ,GAAIk1J,GAAuBv1J,EAAKq1J,QAAQn/J,KAEhCwF,QAASsE,EAAKtE,QAASwwB,KAAMlsB,EAAKksB,KAAMiZ,MAAOnlC,EAAKmlC,MAAO9xC,OAAQyd,KAAKskJ,aAAcC,SAClFxiJ,QAAS/B,KAAKwkJ,cAAcziJ,QAAS9D,SAAU+B,KAAKwkJ,cAAcvmJ,SAAU89B,UAAW/7B,KAAKwkJ,cAAczoH,YAGhH/7B,KAAKskJ,cAAiB15J,QAASsE,EAAKtE,QAASwwB,KAAMlsB,EAAKksB,KAAMiZ,MAAOnlC,EAAKmlC,MAAO9xC,OAAQyd,KAAKskJ,eACxF15J,QAASsE,EAAKtE,QAASwwB,KAAMlsB,EAAKksB,KAAMiZ,MAAOnlC,EAAKmlC,MAChEr0B,MAAKzV,OAAOotB,Q3FuDM,mB2FvD2B8sI,OAG7CzkJ,MAAKzV,OAAOotB,Q3FoDM,mB2FpD2BzoB,IAGrDmiG,EAAYlvG,UAAUyhK,mBAAqB,SAAU10J,GAE7CA,EAAKvK,MAAMvB,OAAS,GAAK8L,EAAKvK,MAAM,GAAS,oBAAaqiH,gBAC1DhnG,KAAK0kJ,mBAET1kJ,KAAKzV,OAAOsoB,O3FwQgB,8B2FxQwBi2B,QAAQ,KAEhEuoD,EAAYlvG,UAAUwiK,cAAgB,SAAUvpI,GAC5C,MAAOpb,MAAK8gC,KAAKvE,YAAYv8B,KAAKijJ,WAAW7nI,KAEjDi2E,EAAYlvG,UAAUuiK,iBAAmB,WACrC1kJ,KAAKsjJ,YAAYsB,UAAU5kJ,KAAKgjJ,aAChChjJ,KAAKsjJ,YAAYlqE,YAAYp5E,KAAKukH,cAClCvkH,KAAKgjJ,eACLhjJ,KAAKukH,gBACLvkH,KAAK8oC,QAAS,GAElBuoD,EAAYlvG,UAAUshK,sBAAwB,SAAUv0J,GACpD,GAGI21J,GAAcxsJ,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,UAC7C,IAAIwN,EAAKmlC,OAASwwH,GAAeA,IAAgB7kJ,KAAKzV,OAAOK,QACzDsE,EAAK+3B,QAAS,MAEb,IAAI/3B,EAAKmlC,QAAUh8B,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,IAAMqgK,GAAUc,cAC5DxqJ,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,IAAMqgK,GAAUe,WAC9CzqJ,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,mBAC3B2W,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,oBAC3B2W,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,qBAC3BwN,EAAK+3B,QAAS,MAEb,CACDjnB,KAAKskJ,aAAetkJ,KAAK4+I,UAAU1vJ,EAAKmlC,OACxCr0B,KAAKwkJ,cAAgBxkJ,KAAKzV,OAAOoqF,WAAWzlF,EAAKmlC,MAAM3yC,QAClDc,oBAAkB0M,EAAK41J,aAAgB9kJ,KAAKskJ,cACzCtkJ,KAAKwkJ,cAAc/rI,OACnBzY,KAAKzV,OAAOsoB,O3FwOI,8B2FxOoCi2B,QAAQ,IAC5D9oC,KAAKuqB,UAAUr7B,EAAKmlC,OAAQr0B,KAAKwkJ,cAAc/rI,KAAKhuB,UAAUC,SAAS,0BACzB,aAAvCsV,KAAKzV,OAAOw+B,kBAAkBplC,MAK7C,KAAK,GAFDohK,MACAC,KACKn1J,EAAK,EAAGkG,EAAK7G,EAAKvK,MAAOkL,EAAKkG,EAAG3S,OAAQyM,IAAM,CACpD,GAAIurB,GAAOrlB,EAAGlG,GACV+B,EAAMoO,KAAKqkJ,aAAajpI,EAAK5wB,IAC7By6J,EAAQjlJ,KAAK+iJ,aAAanxJ,EAC9B,KAA6C,IAAzCoO,KAAK+jJ,kBAAkBr8J,QAAQkK,GAI/B,GAHIoO,KAAKklJ,qBAAqBtzJ,IAC1BoO,KAAKukH,aAAargI,KAAKk3B,EAAKvQ,MAE5B3b,EAAKmlC,QAAUr0B,KAAKmlJ,aAAaj2J,EAAKmlC,MAAM3yC,OAAQqgK,GAAU54I,OAC9DnJ,KAAKmlJ,aAAaj2J,EAAKmlC,MAAM3yC,OAAQqgK,GAAUC,YACnC,SAARpwJ,GAA0B,WAARA,GAClBoO,KAAKgjJ,YAAY9+J,KAAKk3B,EAAKvQ,UAG9B,CAAA,GAAI7K,KAAKzV,OAAOmpD,YAAgD,UAAlC1zC,KAAKzV,OAAOiE,aAAaC,OACtD4J,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,gBACzBse,KAAKzV,OAAOmpD,WAAW3gB,kBAAgC,eAAE3vC,QACzD4c,KAAKzV,OAAOmpD,WAAW3gB,kBAA8B,aAAE3vC,QACvD4c,KAAKzV,OAAOmpD,WAAW3gB,kBAAgC,eAAE3vC,UAAoB,SAARwO,GAA0B,WAARA,GAC3F,QAEKpP,qBAAkB0M,EAAK41J,aAAe51J,EAAKmlC,QAC5Cr0B,KAAKmlJ,aAAaj2J,EAAKmlC,MAAM3yC,OAAQujK,EAAMvjK,SAC/Cse,KAAKgjJ,YAAY9+J,KAAKk3B,EAAKvQ,UAG1BuQ,GAAK15B,QAAUwN,EAAKmlC,QACxBr0B,KAAKmlJ,aAAaj2J,EAAKmlC,MAAM3yC,OAAQ05B,EAAK15B,QACvC05B,EAAK8zE,UACL61D,EAAa7gK,KAAKk3B,EAAK5wB,IAGvBwV,KAAKgjJ,YAAY9+J,KAAKk3B,EAAKvQ,MAG1B7K,KAAKmlJ,aAAaj2J,EAAKmlC,MAAM3yC,OAAQ05B,EAAK15B,SAAW05B,EAAK8zE,WAC/D81D,EAAa9gK,KAAKk3B,EAAK5wB,IAG3Bw6J,EAAa5hK,OAAS,GACtB4c,KAAKsjJ,YAAYsB,UAAUI,GAAc,GAE7ChlJ,KAAKsjJ,YAAYlqE,YAAYp5E,KAAKukH,cAAc,GAChDvkH,KAAKsjJ,YAAY8B,UAAUplJ,KAAKgjJ,aAC5B+B,EAAa3hK,OAAS,GACtB4c,KAAKsjJ,YAAY8B,UAAUL,GAAc,GAE7C/kJ,KAAKqlJ,UAAYn2J,EAAKmlC,MACtBnlC,EAAK3M,OAASyd,KAAKskJ,aACnBp1J,EAAKq1J,QAAUvkJ,KAAKwkJ,cACpBxkJ,KAAKzV,OAAOotB,Q3FvCK,kB2FuC2BzoB,IACxCA,EAAK+3B,QAAWjnB,KAAKgjJ,YAAY5/J,SAAW8L,EAAKvK,MAAMvB,SAAW8L,EAAK41J,cACvE9kJ,KAAK0kJ,mBACLx1J,EAAK+3B,QAAS,GAGtBlvB,GAAiBiI,KAAKzV,OAAOK,QAASoV,KAAKsjJ,YAAY14J,QAAQ1B,gBAEnEmoG,EAAYlvG,UAAUgjK,aAAe,SAAUpqC,EAAe1wH,GAC1D,GAAI3I,GAASq5H,CAUb,QALIr5H,GAJAse,KAAKslJ,mBAAmBvqC,IAAmB1wH,IAAa03J,GAAU75G,QAAU79C,IAAa03J,GAAUj8I,QAG9Fzb,IAAa03J,GAAUj8I,SAAWzb,IAAa03J,GAAU75G,OACrD/9C,EAAakO,UAAQ0iH,EAAe,YAAa1wH,EAASk7J,OAAO,EAAGl7J,EAASjH,SAG7EiV,UAAQ0iH,EAAe1wH,GANvBgO,UAAQ0iH,EAAe1wH,IAAa03J,GAAU75G,OAAS,QAAU,WAQ7D/9C,EAAazI,EAAQ,YAAcse,KAAKzV,OAAOK,SAEpEymG,EAAYlvG,UAAUmjK,mBAAqB,SAAUvqC,GACjD,SAAQ/6G,KAAKzV,OAAOsL,iBAAkBmK,KAAKzV,OAAOuU,aAC3CzG,UAAQ0iH,EAAegnC,GAAU75G,UAE5CmpD,EAAYlvG,UAAU+iK,qBAAuB,SAAU9pI,GACnD,GAAIyiD,IAAS,CACb,QAAQziD,GACJ,IAAK,aACL,IAAK,UACDyiD,IAAW79D,KAAKzV,OAAO02F,qBAAqB+rB,MAAYhtG,KAAKzV,OAAOuxB,SAC5D9b,KAAKskJ,eAAiBtkJ,KAAKskJ,aAAajiK,OAAkB,YAAT+4B,CACzD,MACJ,KAAK,UACIpb,KAAKzV,OAAOwe,eAAkB/I,KAAKzV,OAAO02F,qBAAqB9W,KAAUnqE,KAAKskJ,cAC5EtkJ,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQsY,KAAKskJ,aAAajiK,QAAU,GACxE2d,KAAKskJ,eAAiBtkJ,KAAKskJ,aAAajiK,SACzCw7E,GAAS,EAEb,MACJ,KAAK,YACI79D,KAAKzV,OAAOwe,gBAAkB/I,KAAKzV,OAAO02F,qBAAqB9W,KAC5DnqE,KAAKzV,OAAO02F,qBAAqB9W,KAAUnqE,KAAKskJ,cAC7CtkJ,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQsY,KAAKskJ,aAAajiK,OAAS,KAC5Ew7E,GAAS,EAEb,MACJ,KAAK,OACL,IAAK,SACL,IAAK,OACL,IAAK,SACI79D,KAAKzV,OAAOmpD,YAAoD,IAArC1zC,KAAKzV,OAAO8T,cAAcjb,SACtDy6E,GAAS,EAEb,MACJ,KAAK,OACkD,IAA/C79D,KAAKzV,OAAO2xB,wBAAwB94B,QACW,IAA/C4c,KAAKzV,OAAO8O,wBAAwBjW,SACpCy6E,GAAS,EAEb,MACJ,KAAK,SACK79D,KAAKzV,OAAO86E,kBAAqBrlE,KAAKzV,OAAOi1F,cAC9Cx/E,KAAKzV,OAAO02F,qBAAqB2zD,KAAe50I,KAAKzV,OAAO02F,qBAAqBorD,OAClFxuE,GAAS,EAEb,MACJ,KAAK,YACK79D,KAAKzV,uBAA2ByV,KAAKzV,OAAO02F,qBAAqB2zD,MACnE/2E,GAAS,EAEb,MACJ,KAAK,cACL,IAAK,YACK79D,KAAKzV,yBAA6ByV,KAAKzV,OAAO02F,qBAAqBorD,MACrExuE,GAAS,EAEb,MACJ,KAAK,gBACL,IAAK,iBACD,IAAM79D,KAAKzV,OAAOqe,eAAkB5I,KAAKzV,OAAO02F,qBAAqBhU,KAChEjtE,KAAKskJ,eAAiBtkJ,KAAKskJ,aAAajiK,MACzCw7E,GAAS,MAER,IAAI79D,KAAKzV,OAAO02F,qBAAqBhU,KAASjtE,KAAKzV,OAAO+oB,aAAanwB,QAAQC,OAAS,GAAK4c,KAAKskJ,aAEnG,IAAK,GADDzrD,GAAc74F,KAAKzV,OAAO+oB,aAAanwB,QAClCM,EAAI,EAAGA,EAAIo1G,EAAYz1G,OAAQK,IAChCo1G,EAAYp1G,GAAGpB,QAAU2d,KAAKskJ,aAAajiK,OACxCw2G,EAAYp1G,GAAG8nB,UAAUpjB,gBAAkBizB,EAAKjzB,cAAcyF,QAAQ,OAAQ,IAAIo2J,sBACrFnmF,GAAS,EAIrB,MACJ,KAAK,YACL,IAAK,aACI79D,KAAKzV,OAAO4K,cAAgB6K,KAAKzV,OAAO02F,qBAAqBuf,KACf,IAA/CxgG,KAAKzV,OAAO8O,wBAAwBjW,QACnC4c,KAAKzV,OAAO02F,qBAAqBuf,KAAkD,IAAzCxgG,KAAKzV,OAAO8K,aAAaC,eACpEuoE,GAAS,EAEb,MACJ,KAAK,WACL,IAAK,aACI79D,KAAKzV,OAAO4K,cAAgB6K,KAAKzV,OAAO02F,qBAAqBuf,KACf,IAA/CxgG,KAAKzV,OAAO8O,wBAAwBjW,QACnC4c,KAAKzV,OAAO02F,qBAAqBuf,KAASxgG,KAAKzV,OAAO8K,aAAaC,cAAgB0K,KAAKmkJ,iBACzFtmF,GAAS,GAIrB,MAAOA,IAMXwzB,EAAYlvG,UAAUkvF,eAAiB,WACnC,MAAOrxE,MAAKpV,SAQhBymG,EAAYlvG,UAAU0rB,QAAU,WAC5B,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OACzBq2D,KAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,qBAG/F0Z,KAAKsjJ,YAAYz1I,UACjBhsB,SAAOme,KAAKpV,SACZoV,KAAKiuC,sBACLjuC,KAAKzV,OAAOK,QAAQH,UAAU5I,OAAO,gBAEzCwvG,EAAYlvG,UAAUguB,cAAgB,WAClC,MAAO,eAEXkhF,EAAYlvG,UAAUqjK,WAAa,SAAUpqI,GACzC,MAAOpb,MAAKiiH,OAAS,UAAY7mG,GAErCi2E,EAAYlvG,UAAUkiK,aAAe,SAAU75J,GAC3C,MAAOA,GAAGoD,QAAQoS,KAAKiiH,OAAS,UAAW,KAE/C5wB,EAAYlvG,UAAU8hK,kBAAoB,SAAU7oI,GAChD,GAAIq1E,EACJ,QAAQr1E,GACJ,IAAK,aACL,IAAK,UACDq1E,GAAa/uG,OAAQqgK,GAAU75G,OAC/B,MACJ,KAAK,QACDuoD,GAAa/uG,OAAQqgK,GAAU75G,OAAQ+mD,QAAS8yD,GAAUhyI,MAC1D,MACJ,KAAK,UACD0gF,GAAa/uG,OAAQqgK,GAAU75G,OAAQ+mD,QAAS8yD,GAAUK,QAC1D,MACJ,KAAK,OACD3xD,GAAa/uG,OAAQqgK,GAAUj8I,QAASmpF,QAAS8yD,GAAUE,SAC3D,MACJ,KAAK,SACDxxD,GAAa/uG,OAAQqgK,GAAUj8I,QAASmpF,QAAS8yD,GAAUh0E,OAC3D,MACJ,KAAK,OACD0iB,GAAa/uG,OAAQqgK,GAAU54I,KAAM8lF,QAAS8yD,GAAUlT,KACxD,MACJ,KAAK,SACDp+C,GAAa/uG,OAAQqgK,GAAU54I,KAAM8lF,QAAS8yD,GAAU96H,OACxD,MACJ,KAAK,OACDwpE,GAAa/uG,OAAQqgK,GAAUj8I,QAASmpF,QAAS8yD,GAAUzkF,KAC3D,MACJ,KAAK,SACDmzB,GAAa/uG,OAAQqgK,GAAUj8I,QAC/B,MACJ,KAAK,YACD2qF,GAAa/uG,OAAQqgK,GAAUj8I,QAASmpF,QAAS8yD,GAAUI,IAC3D,MACJ,KAAK,cACD1xD,GAAa/uG,OAAQqgK,GAAUj8I,QAASmpF,QAAS8yD,GAAUO,MAC3D,MACJ,KAAK,YACD7xD,GAAa/uG,OAAQqgK,GAAUj8I,QAASmpF,QAAS8yD,GAAUM,IAC3D,MACJ,KAAK,gBACD5xD,GAAa/uG,OAAQqgK,GAAU75G,OAAQ+mD,QAAS8yD,GAAUY,UAC1D,MACJ,KAAK,iBACDlyD,GAAa/uG,OAAQqgK,GAAU75G,OAAQ+mD,QAAS8yD,GAAUa,WAC1D,MACJ,KAAK,YACDnyD,GAAa/uG,OAAQqgK,GAAUG,MAAOjzD,QAAS8yD,GAAUQ,MACzD,MACJ,KAAK,WACD9xD,GAAa/uG,OAAQqgK,GAAUG,MAAOjzD,QAAS8yD,GAAUW,MACzD,MACJ,KAAK,WACDjyD,GAAa/uG,OAAQqgK,GAAUG,MAAOjzD,QAAS8yD,GAAUU,MACzD,MACJ,KAAK,WACDhyD,GAAa/uG,OAAQqgK,GAAUG,MAAOjzD,QAAS8yD,GAAUS,OAOjE,MAJAxiJ,MAAK+iJ,aAAa3nI,IACdvQ,KAAM7K,KAAK2kJ,cAAcvpI,GAAO5wB,GAAIwV,KAAKwlJ,WAAWpqI,GACpD15B,OAAQ+uG,EAAS/uG,OAAQutG,QAASwB,EAASxB,QAAU,WAAawB,EAASxB,QAAU,IAElFjvF,KAAK+iJ,aAAa3nI,IAE7Bi2E,EAAYlvG,UAAU4hK,gBAAkB,WACpC,OAAQ,aAAc,UAClB,QAAS,UAAW,OAAQ,SAAU,OAAQ,SAAU,OAAQ,SAChE,YAAa,cAAe,YAAa,gBAAiB,iBAC1D,YAAa,WAAY,WAAY,aAE7C1yD,EAAYlvG,UAAU+gK,aAAe,WACjC,GAAIuC,IACAn7E,WAAc,aACdC,QAAW,UACXL,KAAQ,OACRC,MAAS,QACTC,QAAW,UACXzC,KAAQ,aACRG,OAAU,eACVM,KAAQ,OACRR,OAAU,eACVgtE,UAAa,YACbvI,YAAe,cACfqZ,UAAa,YACbC,OAAU,SACV96E,cAAiB,gBACjBC,eAAkB,iBAClBL,UAAa,YACbC,SAAY,WACZk7E,SAAY,eACZh7E,SAAY,WAEhB,IAAIr7E,aAAY,CAEZk2J,EAAqB,WAAI,YAEzBA,GAAkB,QAAI,UAE1B,MAAOA,IAEXp0D,EAAYlvG,UAAUy8J,UAAY,SAAU57J,GACxC,GAAIy1B,GAAOpgB,UAAQrV,EAAEtB,OAAQ,kBAC7B,IAAI+2B,EAAM,CACN,GAAI9sB,GAAM8sB,EAAKnyB,cAAc,6CAA6CokC,aAAa,eACvF,OAAO1qB,MAAKzV,OAAOwpC,eAAepoC,GAIlC,MADWqU,MAAKzV,OAAOoqF,WAAW3xF,EAAEtB,QAAe,QACrC,MAGtB2vG,EAAYlvG,UAAUooC,UAAY,SAAUvnC,EAAGo6D,GAC3Cp9C,KAAKyY,KAAOz1B,EAAEtB,OACdse,KAAK5a,IAAMiT,UAAQrV,EAAEtB,OAAQ,aAAese,KAAK5a,IAC7C4a,KAAK5a,KAAOg4D,IAAiBjzD,EAAanH,EAAEtB,OAAQ,gBACpDse,KAAKzV,OAAOggC,UAAU6D,SAASpuB,KAAK5a,IAAIslC,aAAa,iBAAkB,MAGxE2mE,KCxlBPw0D,GAAyC,WACzC,QAASA,GAAwBt7J,GAC7ByV,KAAKzV,OAASA,EACdyV,KAAKuC,kBAAoB,GAAIwb,IAAkB/d,KAAKzV,QA8BxD,MA5BAs7J,GAAwB1jK,UAAU2gB,aAAe,SAAUxgB,EAAMoiB,EAAY4oH,GACzE,GACI7wH,GADA1I,EAAUiM,KAAKzV,OAAOuL,kBAY1B,IATI2G,EADAiI,EAAWxB,0BAA6BwB,EAAW3B,uBAAyB/C,KAAKzV,OAAO8J,qBAC5E,eAEPqQ,EAAW3B,sBAAwB2B,EAAW9O,SACvC,UAGAoK,KAAKzV,OAAOmS,qBAAuB,cAAgB,eAEnE3I,EAAUA,GAAWiM,KAAKzV,OAAOyJ,gBAAkBD,EAAU,EAAIA,EAClC,kBAA3B2Q,EAAWtC,aAAgF,MAA7CsC,EAAWM,YAAYW,aAAaC,MAChE,YAAdnJ,EACA,MAAO,KAGf,IAAIrX,GAAM4a,KAAKzV,OAAO8J,uBAAyBqQ,EAAWd,mBAAqB0pH,EACzEttH,KAAKuC,kBAAkBO,aAAaxgB,EAAMoiB,EAChD,IAAInV,eAAeyQ,KAAKzV,OAAO+iC,cAC3B,MAAOloC,EAEX,KAAK,GAAI3B,GAAI,EAAGsB,EAAMK,EAAIhC,OAAQK,EAAIsB,EAAKtB,IACvC2B,EAAI3B,GAAGmM,MAAQ4M,GAA0BwD,KAAKzV,OAAQnF,EAAI3B,GAAGmM,MAAO6M,EAExE,OAAOrX,IAEJygK,KCxCPrmI,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAcnFgmI,GAAqC,SAAU9jI,GAE/C,QAAS8jI,GAAoBv7J,EAAQiY,GACjC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAIlD,OAHA0I,GAAM+3F,iBAAkB,EACxB/3F,EAAMnE,aAAe/B,EAAQpT,WAAW,gBACxCsZ,EAAMs4B,mBACCt4B,EAiSX,MAvSA8W,IAAUsmI,EAAqB9jI,GAQ/B8jI,EAAoB3jK,UAAU6+C,iBAAmB,WAC7ChhC,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAKsM,eAAe+G,KAAKrT,OAC7EA,KAAKzV,OAAOy2C,iB7FgCE,W6FhCgChhC,KAAK+lJ,SAAS1yI,KAAKrT,OACjEA,KAAKzV,OAAO6lB,G7FiCK,c6FjCkBpQ,KAAK+lJ,SAAS1yI,KAAKrT,OACtDA,KAAKzV,OAAOy2C,iB7FkCK,c6FlCgChhC,KAAK+lJ,SAAS1yI,KAAKrT,OACpEA,KAAKzV,OAAO6lB,G7F4bkB,+B6F5bkBpQ,KAAKgmJ,qBACrDhmJ,KAAKzV,OAAO6lB,GAAGkX,GAAgCtnB,KAAKuE,aAAaE,uBAAwBzE,OAE7F8lJ,EAAoB3jK,UAAU4jK,SAAW,SAAU72J,GAC/C,GAAIg+C,GAAsB,gBAAdh+C,EAAK2L,QACRmF,KAAKzV,OAAOuU,YAA0D,QAA5CkB,KAAKzV,OAAOiE,aAAauQ,eAC5D,IAA2B,SAAvBiB,KAAKzV,OAAO+C,SAAsB4/C,GAAuB,gBAAdh+C,EAAK2L,MAAwC,gBAAd3L,EAAK2L,MAAyB,CACxGmF,KAAKgmJ,qBACL,IAAI14J,GAAS0S,KAAK6oB,WAAWp/B,YACX,SAAdyF,EAAK2L,MAA8D,WAA5CmF,KAAKzV,OAAOiE,aAAauQ,gBAChDiB,KAAKzV,OAAOmO,aAAa4gC,WAAW2sH,OAAO,EAAG34J,KAI1Dw4J,EAAoB3jK,UAAU+jK,mBAAqB,SAAU54J,GACzD0S,KAAKmmJ,mBAAmB98J,MAAMiE,OAASA,EAAO2C,WAAa,KAC3D+P,KAAKutD,oBAAoBlkE,MAAMiE,OAASA,EAAO2C,WAAa,MAEhE61J,EAAoB3jK,UAAUmqB,eAAiB,SAAUpd,GACrD,GAAsC,WAAlC8Q,KAAKzV,OAAOiE,aAAaC,OAA2C,QAArBS,EAAKkT,aAA+C,WAArBlT,EAAKkT,aAChFlT,EAAK9J,IAAIqF,UAAUC,SAAS,kBAC1BsV,KAAKzV,OAAOuU,YAA0D,WAA5CkB,KAAKzV,OAAOiE,aAAauQ,iBAAuD,SAAvBiB,KAAKzV,OAAO+C,OAAmB,CACvH0S,KAAKgmJ,qBACL,IAAI14J,GAAS0S,KAAK6oB,WAAWp/B,YACJ,SAArByF,EAAKkT,aAAqE,WAA5CpC,KAAKzV,OAAOiE,aAAauQ,gBACvDiB,KAAKzV,OAAOmO,aAAa4gC,WAAW2sH,OAAO,EAAG34J,KAI1Dw4J,EAAoB3jK,UAAU8rD,oBAAsB,WAC5CjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO0jD,oBAAoB/mB,GAAuBlnB,KAAKsM,gBAC5DtM,KAAKzV,OAAO0jD,oB7FLE,W6FKmCjuC,KAAK+lJ,UACtD/lJ,KAAKzV,OAAOstB,IAAIyP,GAAgCtnB,KAAKuE,aAAaE,0BAEtEqhJ,EAAoB3jK,UAAU+lC,YAAc,WACxClG,EAAO7/B,UAAU+lC,YAAY58B,KAAK0U,KAClC,IAAI0lH,GAAO1lH,KAAKzV,OAAOK,QAAQtE,cAAc,oBACzCq/H,EAAO3lH,KAAKzV,OAAOK,QAAQtE,cAAc,oBACzC9D,qBAAkBkjI,KAClBA,EAAO1lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,0CACrD68H,EAAO3lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,qBACrDkX,KAAK2mB,WAAWrgC,cAAc,cAAcwF,YAAY45H,GACxD1lH,KAAK2mB,WAAWrgC,cAAc,cAAcwF,YAAY65H,GACxDA,EAAKt8H,MAAM+8J,eAAiB,QAEhCpmJ,KAAKqmJ,iBAAiB3gC,GACtB1lH,KAAKsmJ,kBAAkB3gC,GACnBhrH,UAAQo3D,UAAUrqE,QAAQ,WAAa,GAA2B,WAAtBiT,UAAQC,KAAKC,OAAsBmF,KAAKzV,OAAO8J,sBAC3F2L,KAAK2mB,WAAWhuB,kBAAkBlO,UAAUqE,IAAI,iBAGxDg3J,EAAoB3jK,UAAUokK,uBAAyB,WACnDvkI,EAAO7/B,UAAU+lC,YAAY58B,KAAK0U,OAEtC8lJ,EAAoB3jK,UAAU8uC,YAAc,SAAUpyB,GAC9CtP,eAAeyQ,KAAKzV,OAAO+iC,gBAG/BtL,EAAO7/B,UAAU8uC,YAAY3lC,KAAK0U,KAAMnB,GACxCmB,KAAKutD,oBAAoBjnE,cAAc,SAASC,UAAY,qBAC5DQ,YAAUiZ,KAAKutD,oBAAoBjnE,cAAc,SAASA,cAAc,QAAS,eACjF0Z,KAAKmmJ,mBAAmB7/J,cAAc,eAAeA,cAAc,MAAMmzB,QAAUzZ,KAAKzV,OAAO+sF,0BAC/Ft3E,KAAKmmJ,mBAAmB98J,MAAMghC,iBAAmB,MAC7CrqB,KAAKzV,OAAOuU,aACZkB,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,mBAAmBA,cAAc,SAASC,UAAY,GACnGyZ,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBA,cAAc,SAASC,UAAY,MAG5Gu/J,EAAoB3jK,UAAUqkK,uBAAyB,SAAU3nJ,GAC7DmjB,EAAO7/B,UAAU8uC,YAAY3lC,KAAK0U,KAAMnB,IAE5CinJ,EAAoB3jK,UAAUkkK,iBAAmB,SAAUvyJ,GACvDkM,KAAK6lH,cAAgB/xH,GAKzBgyJ,EAAoB3jK,UAAUmkK,kBAAoB,SAAUxyJ,GACxDkM,KAAKgxC,eAAiBl9C,GAE1BgyJ,EAAoB3jK,UAAUgkK,iBAAmB,WAC7C,MAAOnmJ,MAAK6lH,eAEhBigC,EAAoB3jK,UAAUorE,kBAAoB,WAC9C,MAAOvtD,MAAKgxC,gBAEhB80G,EAAoB3jK,UAAUklC,kBAAoB,WAC9C,MAAO,IAAIw+H,IAAwB7lJ,KAAKzV,SAE5Cu7J,EAAoB3jK,UAAUskK,uBAAyB,WACnDzkI,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,OAEtC8lJ,EAAoB3jK,UAAUomC,YAAc,WACxC,GAAI2Q,EACqD,OAArDl5B,KAAKmmJ,mBAAmB7/J,cAAc,aACtC07B,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAClCA,KAAKmmJ,mBAAmBr6J,YAAYkU,KAAK6oB,YACzCqQ,EAAOl5B,KAAK6oB,WAAW30B,WAAU,GACjC8L,KAAKutD,oBAAoBzhE,YAAYotC,KAGrCl5B,KAAK4oB,SAAS5oB,KAAKmmJ,mBAAmB7/J,cAAc,aACpD0Z,KAAKmG,YAAYnG,KAAKzV,OAAOK,QAAQtE,cAAc,iBAAiBA,cAAc,YAAY4N,WAAU,IACxG8L,KAAKmmJ,mBAAmB7/J,cAAc,YAAYwF,YAAYkU,KAAKmpB,eACnE+P,EAAOl5B,KAAKutD,oBAAoBjnE,cAAc,YAC1C0Z,KAAKzV,OAAOuU,YACZkB,KAAKzV,OAAO+Y,mBAAmB7Y,UAAUqE,IAAI,oBAGjDkR,KAAKutD,oBAAoBjnE,cAAc,aACvCzE,SAAOme,KAAKutD,oBAAoBjnE,cAAc,YAElD,IAAI8f,GAAapG,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBA,cAAc,YAAa4N,WAAU,EACvHglC,GAAKK,aAAanzB,EAAU8yB,EAAK5yC,cAAc,SAC/C,IAAI+C,GAAQ2W,KAAKzV,OAAO8J,qBAAuB,GAAK,MACpD2L,MAAK2mB,WAAW2S,WAAWjwC,MAAMC,QAAUD,EAC3C2W,KAAK0mJ,0BAA0B,4CAA6C1mJ,KAAK2mJ,wBAErFb,EAAoB3jK,UAAUwkK,oBAAsB,WAChD,GAAIC,GAAgB,EAKpB,QAJK5mJ,KAAKzV,OAAOuL,qBAAuBkK,KAAKzV,OAAO+sF,2BAC5Ct3E,KAAKzV,OAAO0lC,8BAAgCjwB,KAAKzV,OAAOysF,+BAC5D4vE,EAAgB,QAEbA,GAEXd,EAAoB3jK,UAAUukK,0BAA4B,SAAU59J,EAAWQ,EAASu9J,GACpF,GAAIl9J,GAAOqW,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAWA,EAAWoE,OAAQ,WAAa5D,IACrFqT,EAAUqD,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,uBACxDyiD,EAAQvrC,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,mBACtDg+J,EAAkBx6J,IAAoB2D,UAC1C+P,MAAK+mJ,mBAAmBpqJ,EAASmqJ,GACjC9mJ,KAAK+mJ,mBAAmBx7G,EAAOu7G,GAC/BnqJ,EAAQ7Q,YAAYy/C,GACpBvrC,KAAKgnJ,gBAAgBr9J,EAAMgT,EAASkqJ,IAExCf,EAAoB3jK,UAAU6kK,gBAAkB,SAAU7sB,EAAQx9H,EAASkqJ,GACvE,GAAIt8J,GAASyV,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,cAAeoE,OAAQ,iBAClF3C,GAAOuB,YAAYquI,GACnB5vI,EAAOuB,YAAY6Q,GACnBqD,KAAKzV,OAAOmO,aAAa5M,YAAYvB,IAEzCu7J,EAAoB3jK,UAAU4kK,mBAAqB,SAAUjzJ,EAAKxG,GAC9DwG,EAAIzK,MAAM49J,UAAY35J,EAAS,KAC/BwG,EAAIzK,MAAM6hD,UAAY59C,EAAS,MAKnCw4J,EAAoB3jK,UAAUorC,YAAc,SAAUr+B,EAAMuN,GACxDvN,EAAK0G,UAAY1G,EAAK0G,UAK1BkwJ,EAAoB3jK,UAAU6oC,SAAW,SAAUhB,EAAW96B,GAC1D,GAAIuN,EACAja,qBAAkBwnC,EAAU,GAAGp6B,MAAM,MACrCoQ,KAAKutD,oBAAoBjnE,cAAc,SAASC,UAAY,GAEhE,IAAIkyB,GAAOuR,EAAU,GAAGp6B,MAAM,GAC1ByR,EAAMoX,EAAK3wB,KAmBf,OAlBI4S,eAAY2G,IAAQrB,KAAKzV,OAAOyJ,kBAEhCqN,GADAoX,EAAOuR,EAAU,GAAGp6B,MAAM,IACf9H,OAEH,IAARuZ,IACArB,KAAK2mB,WAAW2S,WAAWjwC,MAAMo9F,UAAY,SACzCzmF,KAAKzV,OAAO0c,6BACZjH,KAAKutD,oBAAoBlkE,MAAMo9F,UAAY,WAG/CzmF,KAAKzV,OAAO0c,4BAA8B/X,EAAK6T,sBACvB,kBAArB7T,EAAKkT,aAAmCpC,KAAKutD,oBAAoBt1B,WAAa,GAA2C,IAAtC/oC,EAAK8V,YAAYG,cAAc,KACrH9D,EAAMrB,KAAKzV,OAAOuL,oBAElB2iB,GAAQA,EAAKl2B,SACbka,EAAYgc,EAAKl2B,OAAO2b,sBAE5B8B,KAAKknJ,OAAO7lJ,GACL5E,GAKXqpJ,EAAoB3jK,UAAUgrC,UAAY,SAAU1wB,GAC9B,gBAAdA,GACAuD,KAAKglB,WAAahlB,KAAKhF,KACvBgF,KAAK1D,kBAAoB0D,KAAK7D,aAG9B6D,KAAKilB,YAAcjlB,KAAKhF,MAMhC8qJ,EAAoB3jK,UAAUwrC,sBAAwB,SAAUz+B,EAAMuN,GAClE,GAAI+wB,GAAYxtB,KAAKzV,OAAO8J,oBACV,iBAAdoI,IACI+wB,IACAt+B,EAAK6T,sBAAuB,GAEhC/C,KAAK4nB,mBAAmB3gC,YAAWiI,MAG3C42J,EAAoB3jK,UAAUmiB,cAAgB,SAAUzF,EAAOyqB,EAAMp6B,EAAMuN,GACnEuD,KAAKzV,OAAOkhB,UAAYjpB,oBAAkBwd,KAAKzV,OAAOixB,aACtD3c,EAAQyqB,EAGRzqB,EAAM/S,YAAYw9B,GAEJ,gBAAd7sB,GACAuD,KAAKmlB,UAAW,EAChBnlB,KAAKmmJ,mBAAmB7/J,cAAc,SAASwF,YAAY+S,KAG3DmB,KAAKmnJ,aAAatoJ,GAClBmB,KAAKmlB,UAAW,EAChBnlB,KAAKutD,oBAAoBjnE,cAAc,SAASwF,YAAY+S,GAC5DmB,KAAKuuG,gBACLvuG,KAAKgmJ,sBACLhmJ,KAAKuE,aAAaE,0BAElBzE,KAAKygG,kBACLzgG,KAAKzV,OAAO+2C,aAAaE,YACzBxhC,KAAKygG,iBAAkB,IAM/BqlD,EAAoB3jK,UAAU6jK,oBAAsB,WAChD,GAA2B,SAAvBhmJ,KAAKzV,OAAO+C,OAAmB,CAC/B,GAAIA,GAAS0S,KAAK6oB,WAAWp/B,aAAe,CAC5CuW,MAAKkmJ,mBAAmB54J,GAE5B0S,KAAKzV,OAAOsoB,O7FyMa,6B6FpM7BizI,EAAoB3jK,UAAUirC,gBAAkB,SAAU3wB,GACtD,MAAkB,gBAAdA,EACOuD,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,mBAAmBA,cAAc,SAG9E0Z,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBA,cAAc,UAG9Fw/J,EAAoB3jK,UAAUglK,aAAe,SAAUtoJ,GAC/CA,EAAM1K,kBAAoB,GAC1B0K,EAAM/S,YAAYkU,KAAKzV,OAAOkC,cAAc,MAAMX,YAAYkU,KAAKzV,OAAOkC,cAAc,SAGhGq5J,EAAoB3jK,UAAUosH,cAAgB,WACrCvuG,KAAKzV,OAAOu8B,eACb9mB,KAAKzV,OAAOsoB,OAAOkU,IAAuBC,KAAM,kBAEpDhnB,KAAKmmJ,mBAAmB98J,MAAMghC,iBAAmB,OAErDy7H,EAAoB3jK,UAAU+kK,OAAS,SAAU7lJ,GAC7CrB,KAAKqB,IAAMA,GAEfykJ,EAAoB3jK,UAAUilK,OAAS,WACnC,MAAOpnJ,MAAKqB,KAKhBykJ,EAAoB3jK,UAAU8oC,SAAW,SAAUxuB,GAC/C,MAAkB,gBAAdA,EACOuD,KAAK6oB,WAAWviC,cAAc,SAG9B0Z,KAAKutD,oBAAoBjnE,cAAc,UAG/Cw/J,GACT/gI,IAEEsiI,GAA8B,SAAUrlI,GAExC,QAASqlI,GAAa98J,EAAQiY,GAC1B,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAElD,OADA0I,GAAMs4B,mBACCt4B,EAgUX,MApUA8W,IAAU6nI,EAAcrlI,GAMxBqlI,EAAallK,UAAU6+C,iBAAmB,WACtChhC,KAAKzV,OAAO6lB,GAAG2W,GAAqB/mB,KAAKsnJ,cAAetnJ,MACxDA,KAAKzV,OAAO6lB,G7FIM,e6FJkBpQ,KAAKunJ,gBAAiBvnJ,MAC1DA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAK0nB,kBAAmB1nB,OAE5DqnJ,EAAallK,UAAU8rD,oBAAsB,WACrCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,I7FHM,e6FGmB7X,KAAKunJ,iBAC1CvnJ,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAK0nB,qBAE1C2/H,EAAallK,UAAUomC,YAAc,WAC5Bh5B,cAIDyQ,KAAK4oB,SAAS5oB,KAAK+1B,YAAY/1B,KAAKotB,kBAAkB9mC,cAAc,cACpE0Z,KAAKzV,OAAOsoB,OAAO6iB,IAA0B16B,KAAMgF,KAAKhF,KAAM9L,MAAQ0G,UAAU,KAChFoK,KAAK+1B,YAAY/1B,KAAK4tD,mBAAmBtnE,cAAc,cALvD07B,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAOtCA,KAAKwnJ,cACLxnJ,KAAKynJ,iBACLznJ,KAAKw1B,uBACLx1B,KAAKy1B,uBACLz1B,KAAKzV,OAAOsoB,OAAO6iB,IAA0B16B,KAAMgF,KAAKhF,KAAM9L,MAAQ0G,UAAU,MAEpFyxJ,EAAallK,UAAU+lC,YAAc,WACjC,GAAIw9F,GAAO1lH,KAAKzV,OAAOK,QAAQtE,cAAc,mBACzCq/H,EAAO3lH,KAAKzV,OAAOK,QAAQtE,cAAc,mBAC7C07B,GAAO7/B,UAAU+lC,YAAY58B,KAAK0U,MAC9Bxd,oBAAkBkjI,KAClBA,EAAO1lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,wCACrD68H,EAAO3lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,oBACrDkX,KAAK2mB,WAAWrgC,cAAc,oBAAoBwF,YAAY45H,GAC9D1lH,KAAK2mB,WAAWrgC,cAAc,oBAAoBwF,YAAY65H,IAElE3lH,KAAK0nJ,gBAAgBhiC,GACrB1lH,KAAK2nJ,iBAAiBhiC,IAE1B0hC,EAAallK,UAAUylK,uBAAyB,WAC5C5lI,EAAO7/B,UAAU+lC,YAAY58B,KAAK0U,OAEtCqnJ,EAAallK,UAAUskK,uBAAyB,WAC5CzkI,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,OAEtCqnJ,EAAallK,UAAUg3C,UAAY,WAC/B,GAAM5pC,cAAcyQ,KAAKzV,OAAO0E,kBAAgD,IAA3B+Q,KAAKzV,OAAOuU,WAQzDkB,KAAKzV,OAAOuL,oBAAsBkK,KAAKo5B,gBACvCpX,EAAO7/B,UAAUg3C,UAAU7tC,KAAK0U,MAChCA,KAAKo5B,eAAgB,EACrBpX,EAAO7/B,UAAUg3C,UAAU7tC,KAAK0U,OAEpCA,KAAKwnJ,kBAb0E,CAC/E,GAAI3oJ,GAAQmB,KAAK4tD,mBAAmBtnE,cAAc,QAClDzE,UAAOme,KAAK4tD,mBAAmBtnE,cAAc,UAC7C07B,EAAO7/B,UAAUg3C,UAAU7tC,KAAK0U,MAChCA,KAAKwnJ,cACLxnJ,KAAK4tD,mBAAmBtnE,cAAc,SAASC,UAAYsY,EAAMtY,UAUhEgJ,cAAyC,IAA3ByQ,KAAKzV,OAAOuU,YAC3BkB,KAAKynJ,iBAEJznJ,KAAKzV,OAAO8J,sBACb2L,KAAKuE,aAAamrC,kBAElB1vC,KAAKzV,OAAOu8B,eAA2D,WAA1C9mB,KAAKzV,OAAOovC,iBAAiBC,UAC1DhrC,KAAQvD,MAAMC,KAAK0U,KAAK6nJ,cAAczhK,iBAAiB,uBAAuB,GAElF4Z,KAAKzV,OAAOkvC,sBACPlqC,cAAyC,IAA3ByQ,KAAKzV,OAAOuU,YAC3BjL,GAAcmM,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,YAAa0Z,KAAKzV,OAAOuL,mBAAoBkK,KAAKzV,QAEhHyV,KAAKuE,aAAaE,yBAClBzE,KAAKw1B,uBACLx1B,KAAKzV,OAAOsoB,OAAO6iB,IAA0B16B,KAAMgF,KAAKhF,KAAM9L,MAAQ0G,UAAU,MAEpFyxJ,EAAallK,UAAU2lK,oBAAsB,WACzC9lI,EAAO7/B,UAAUg3C,UAAU7tC,KAAK0U,OAEpCqnJ,EAAallK,UAAUqlK,YAAc,WAC5Bj4J,cAAyC,IAA3ByQ,KAAKzV,OAAOuU,aAC3BkB,KAAKotB,kBAAkBthC,YAAYkU,KAAK6oB,YACxC7oB,KAAK4tD,mBAAmB9hE,YAAYkU,KAAKg2B,iBAAajpC,GAAW,aAErEiT,KAAK+nJ,uBACL/nJ,KAAKgoJ,sBAETX,EAAallK,UAAU6lK,mBAAqB,WACxC,GAAIhoJ,KAAKzV,OAAO+sF,0BAGZ,IAAK,GAFD2wE,GAAmBjoJ,KAAKzV,OAAOK,QAAQtE,cAAc,oBAAoBA,cAAc,SAASF,iBAAiB,mBACjHrB,EAAMkjK,EAAiB7kK,OAClBK,EAAI,EAAGA,EAAIsB,EAAKtB,IAAK,CAC1B,GACImH,GAAUq9J,EAAiBxkK,GAAQ,MAAE,EACrCmH,KACA7D,YAAU6D,IAAW,mBACjBq9J,EAAiBxkK,GAAQ,MAAE,GAAGk2B,QAAU,IACxCl2B,GAASwkK,EAAiBxkK,GAAQ,MAAE,GAAGk2B,QAAU,MAMrE0tI,EAAallK,UAAUmlK,cAAgB,SAAUxhK,GAC7C,GAAiB,WAAbA,EAAIkhC,KAAmB,CACvB,GAAIkhI,GAAYloJ,KAAK6oB,WAAWviC,cAAc,eAC9C,IAAI0Z,KAAKzV,OAAOue,gBAAkBo/I,GAAaloJ,KAAK4tD,mBAAmBtnE,cAAc,SAAU,CAC3F0Z,KAAK4tD,mBAAmBtnE,cAAc,SACjCwF,YAAYkU,KAAKmoJ,eAAeD,EAAWloJ,KAAKzV,OAAOuL,oBAG5D,KAAK,GAAIjG,GAAK,EAAGssC,KAFC9wC,MAAMC,KAAK0U,KAAK4tD,mBAC9BxnE,iBAAiB,oCACmByJ,EAAKssC,EAAW/4C,OAAQyM,IAAM,CAClE,GACIX,IACAtE,QAFOuxC,EAAWtsC,GAEHmS,eAAgB,QAC/B7W,YACI+W,UAAWlC,KAAKzV,OAAO2X,UAAW2/F,iBAAiB,GAG3D9Y,SAAMq/D,iBAAiBl5J,SAIb,aAAbpJ,EAAIkhC,MAAoC,kBAAblhC,EAAIkhC,OACpChnB,KAAKuuG,cAAczoH,GACnBka,KAAKzV,OAAO2R,cAAc8pJ,wBAGlCqB,EAAallK,UAAUosH,cAAgB,SAAUzoH,GAC7C,GAAIopC,GACAC,EACA3I,EAAOxmB,KAAKotB,kBACZ7G,EAAOvmB,KAAK4tD,mBACZ9jC,EAAO9pB,KAAKzV,OAAOmO,aACnBkhC,EAAW55B,KAAKzV,OAAOovC,iBAAiBC,SACxCyuH,EAAeroJ,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBmE,SACnE,cAAb3E,EAAIkhC,OACa,WAAb4S,GAAyB9zC,EAAIgsF,aAC7B5iD,EAAQpF,EAAKxjC,cAAc,oBAAoBF,iBAAiB,MAChE+oC,EAAQrF,EAAKxjC,cAAc,qBAAqBF,iBAAiB,MACjE4Z,KAAKsoJ,cAAcp5H,EAAOC,EAAOrpC,EAAIgsF,WAAW,IAEnC,YAAbl4C,GAA0B55B,KAAKzV,OAAOu8B,cACtCuhI,EAAav5J,IAAI,UAGjBu5J,EAAaxmK,OAAO,UAEP,SAAb+3C,GAAuB9zC,EAAIgsF,WAC3B5iD,EAAQ1I,EAAKpgC,iBAAiB,MAC9B+oC,EAAQ5I,EAAKngC,iBAAiB,QAG9B+oC,EAAQ5I,EAAKjgC,cAA2B,YAAbszC,EACvB,QAAU,SAASxzC,iBAAiB,MACxC8oC,EAAQ1I,EAAKlgC,cAA2B,YAAbszC,EACvB,QAAU,SAASxzC,iBAAiB,OAEvC4Z,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,wBAAwBhD,QACzE4c,KAAKsoJ,cAAcp5H,EAAOC,EAAOrpC,EAAIgsF,WAAW,EAAO9xE,KAAK82B,SAAW,GAE3E92B,KAAK+nJ,wBAEa,kBAAbjiK,EAAIkhC,OACThnB,KAAKsoJ,cAAcx+H,EAAKxjC,cAAc,oBAAoBF,iBAAiB,MAAO0jC,EAAKxjC,cAAc,qBAAqBF,iBAAiB,MAAON,EAAIgsF,WACjJ9xE,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,wBAAwBhD,QACzE4c,KAAKsoJ,cAAc9hI,EAAKpgC,iBAAiB,MAAOmgC,EAAKngC,iBAAiB,MAAON,EAAIgsF,aAI7Fu1E,EAAallK,UAAUulC,kBAAoB,SAAU1kC,GAChC,WAAbA,EAAEwuC,QACFxxB,KAAKunJ,mBAGbF,EAAallK,UAAUomK,oBAAsB,WAEzC,IAAK,GADD19J,MAAcQ,MAAMC,KAAK0U,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,gBACpE3C,EAAI,EAAGA,EAAIoH,EAASzH,OAAQK,IACjCoH,EAASpH,GAAG4F,MAAMiE,OAASzC,EAASpH,GAAGyF,cAAcO,aAAe,MAG5E49J,EAAallK,UAAUmmK,cAAgB,SAAUp5H,EAAOC,EAAO2iD,EAAW02E,EAAaC,GASnF,IAAK,GARDC,GACAC,EACAC,EAAS5oJ,KAAKzV,OAAOu8B,cACrB8S,EAAW55B,KAAKzV,OAAOovC,iBAAiBC,SACxC/D,EAAQ71B,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,SACrDuiK,EAAQ7oJ,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,SACrDgH,KACA5E,KACKjF,EAAI,EAAGsB,EAAMmqC,EAAM9rC,OAAQK,EAAIsB,EAAKtB,IACpCjB,oBAAkB0sC,EAAMzrC,KAAQjB,oBAAkB2sC,EAAM1rC,MACzD6J,EAAO7J,GAAKyrC,EAAMzrC,GAAG0F,wBAAwBmE,OAC7C5E,EAAMjF,GAAK0rC,EAAM1rC,GAAG0F,wBAAwBmE,OAGpD,KAAK,GAAI7J,GAAI,EAAGsB,EAAMmqC,EAAM9rC,OAAQK,EAAIsB,EAAKtB,KACrCquF,IAA4B,WAAbl4C,GAAyB4uH,GAA+B,YAAb5uH,GAA0B/D,EAAMnrC,SAASwkC,EAAMzrC,KACxF,WAAbm2C,GAAyBivH,EAAMn+J,SAASwkC,EAAMzrC,MAAUglK,KAC5Dv5H,EAAMzrC,GAAG4F,MAAMiE,OAAS,KACxB6hC,EAAM1rC,GAAG4F,MAAMiE,OAAS,MAE5Bo7J,EAAUp7J,EAAO7J,GACjBklK,EAAUjgK,EAAMjF,IACXjB,oBAAkB0sC,EAAMzrC,KAAOyrC,EAAMzrC,GAAG0Q,oBAAuBy0J,GAAUF,EAAUC,IAClFC,GAAUF,EAAUC,GAAa3oJ,KAAKzV,OAAOse,eAAiB7I,KAAKzV,OAAOqwF,eAC5B,IAAhD56E,KAAKzV,OAAOqwF,aAAai2B,sBACzB3hF,EAAMzrC,GAAG4F,MAAMiE,OAASq7J,EAAU,MAElCx5H,IAAU3sC,oBAAkB2sC,EAAM1rC,KAAO0rC,EAAM1rC,GAAG0Q,oBAAuBy0J,GAAUF,EAAUC,IAC3FC,GAAUF,EAAUC,GAAa3oJ,KAAKzV,OAAOse,eAAiB7I,KAAKzV,OAAOqwF,eAC5B,IAAhD56E,KAAKzV,OAAOqwF,aAAai2B,sBACzB1hF,EAAM1rC,GAAG4F,MAAMiE,OAASo7J,EAAU,KAGtCE,IAAiC,SAAvB5oJ,KAAKzV,OAAO+C,QACtB0S,KAAKunJ,mBAGbF,EAAallK,UAAUolK,gBAAkB,SAAUj6J,OAChC,KAAXA,IAAqBA,EAAShB,IAClC,IAAIw8J,GAAuB9oJ,KAAKzV,OAAOK,QAAQtE,cAAc,qBAAqB6C,wBAAwBmE,OACtG0jD,EAAiBhxC,KAAKzV,OAAOK,QAAQtE,cAAc,qBACnDu/H,EAAgB7lH,KAAKzV,OAAOK,QAAQtE,cAAc,oBAClDyiK,EAAqB/oJ,KAAKzV,OAAOmO,aAAanM,YAC9Cy8J,EAA0BhpJ,KAAKzV,OAAOK,QAAQtE,cAAc,2BAA2BiG,YACvFyT,KAAKzV,OAAOulD,kBAAkBvjD,WAC9BykD,GAAezkD,YAAcykD,EAAepkD,aAC5Ci5H,EAAcx8H,MAAMiE,OAASw7J,EACzBx7J,EAAS,KACbu4H,EAAcx8H,MAAM4/J,aAAe,KAGnCpjC,EAAcx8H,MAAMiE,OAASw7J,EAAuB,MAC9CjjC,EAAczoG,cAAgByoG,EAAc3sE,cAC7ClI,EAAe5zB,cAAgB4zB,EAAekI,eAC5C6vG,IAAuBC,GAC1BhpJ,KAAKzV,OAAO+2C,aAAa64B,gBAE7B0rD,EAAcx8H,MAAM4/J,aAAe,QAG3C5B,EAAallK,UAAU4lK,qBAAuB,WAK1C,IAAK,GAJDmB,GACAC,EACA/rF,EAAMp9D,KAAKotB,kBAAkBhnC,iBAAiB,mBAC9CqZ,EAAMO,KAAK4tD,mBAAmBxnE,iBAAiB,mBAC1C3C,EAAI,EAAGsB,EAAMq4E,EAAIh6E,OAAQK,EAAIsB,EAAKtB,IACvCylK,EAAWlpJ,KAAKopJ,WAAWhsF,EAAI35E,IAC/B0lK,EAAWnpJ,KAAKopJ,WAAW3pJ,EAAIhc,IAC3BylK,EAASrwG,IAAM,EACf74C,KAAKqpJ,uBAAuB5lK,EAAGylK,EAASjyJ,IAAKmmE,EAAI35E,GAAIgc,GAEhD0pJ,EAAStwG,IAAM,GACpB74C,KAAKqpJ,uBAAuB5lK,EAAG0lK,EAASlyJ,IAAKwI,EAAIhc,GAAI25E,EAGzDp9D,MAAKzV,OAAOse,eACZ7I,KAAKuoJ,uBAGblB,EAAallK,UAAUinK,WAAa,SAAUhkK,GAI1C,IAAK,GAHDkkK,GACAC,EACAC,EACK/lK,EAAI,EAAGsB,EAAMK,EAAI+O,kBAAmB1Q,EAAIsB,EAAKtB,IACxC,IAANA,IACA8lK,EAAankK,EAAIyG,SAAS,GAAG8tB,SAEjC2vI,EAAQlkK,EAAIyG,SAASpI,GAAGk2B,QACxB4vI,EAAan8J,KAAKyrD,IAAIywG,EAAOC,GAC7BC,EAAap8J,KAAK6J,IAAIqyJ,EAAOC,EAEjC,QAAS1wG,IAAK0wG,EAAYtyJ,IAAKuyJ,IAEnCnC,EAAallK,UAAUknK,uBAAyB,SAAUhoJ,EAAKmoJ,EAAYpkK,EAAK4V,GAE5E,IAAK,GADD1N,GAAS,EACJ7J,EAAI,EAAGA,EAAI+lK,EAAY/lK,IAC5B6J,GAAU0N,EAAKqG,EAAM5d,GAAG4F,MAAMiE,OAC1B8gC,SAASpzB,EAAKqG,EAAM5d,GAAG4F,MAAMiE,OAAQ,IAAM0N,EAAKqG,EAAM5d,GAAGgG,YAEjErE,GAAIiE,MAAMiE,OAASA,EAAS,MAEhC+5J,EAAallK,UAAUulK,gBAAkB,SAAU5zJ,GAC/CkM,KAAKypJ,aAAe31J,GAKxBuzJ,EAAallK,UAAUwlK,iBAAmB,SAAU7zJ,GAChDkM,KAAK6nJ,cAAgB/zJ,GAEzBuzJ,EAAallK,UAAUirC,gBAAkB,WACrC,MAAOptB,MAAKypJ,cAEhBpC,EAAallK,UAAUyrE,iBAAmB,WACtC,MAAO5tD,MAAK6nJ,eAKhBR,EAAallK,UAAUslK,eAAiB,WACpC,GAAIp3H,GAASrwB,KAAK4tD,mBAAmBtnE,cAAc,QACnDzE,UAAOme,KAAK4tD,mBAAmBtnE,cAAc,aAC7C+pC,EAAOkJ,aAAa1lC,GAAcmM,KAAKotB,kBAAkB9mC,cAAc,YAAa0Z,KAAKzV,OAAOuL,mBAAoBkK,KAAKzV,QAAS8lC,EAAO/pC,cAAc,WAE3J+gK,EAAallK,UAAUgmK,eAAiB,SAAUr0J,EAAK41J,EAAcz4B,GACjE,GAAIt/G,GAAQ7d,EAAII,WAAU,EAC1Byd,GAAMprB,UAAY,EAElB,KAAK,GADDwX,GAAMkzH,GAAgBjxH,KAAKzV,OAAO2L,aAAa9S,OAC1CK,EAAIimK,EAAcjmK,EAAIsa,EAAKta,IAChCkuB,EAAM7lB,YAAYgI,EAAIjH,YAAYiH,EAAIjI,SAAS69J,IAEnD,OAAO/3I,IAEJ01I,GACTl0H,ICzoBE3T,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAYnF6pI,GAA4C,SAAU3nI,GAEtD,QAAS2nI,GAA2Bp/J,EAAQiY,GACxC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAElD,OADA0I,GAAMs4B,mBACCt4B,EAkbX,MAtbA8W,IAAUmqI,EAA4B3nI,GAMtC2nI,EAA2BxnK,UAAU6+C,iBAAmB,WACpDhhC,KAAKzV,OAAO6lB,GAAG2W,GAAqB/mB,KAAKsnJ,cAAetnJ,MACxDA,KAAKzV,OAAO6lB,G9F6ac,yB8F7akBpQ,KAAK4pJ,qBAAsB5pJ,MACvEA,KAAKzV,OAAO6lB,G9F8asB,kC8F9akBpQ,KAAK6pJ,kBAAmB7pJ,MAC5EA,KAAKzV,OAAO6lB,GAAGkX,GAAgCtnB,KAAKunB,WAAYvnB,OAEpE2pJ,EAA2BxnK,UAAU8rD,oBAAsB,WACnDjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAIkP,GAAqB/mB,KAAKsnJ,eAC1CtnJ,KAAKzV,OAAOstB,I9Foac,yB8FpamB7X,KAAK4pJ,sBAClD5pJ,KAAKzV,OAAOstB,I9FqasB,kC8FramB7X,KAAK6pJ,mBAC1D7pJ,KAAKzV,OAAOstB,IAAIyP,GAAgCtnB,KAAKunB,cAEzDoiI,EAA2BxnK,UAAU0nK,kBAAoB,SAAU36J,GAC/D8Q,KAAK8pJ,QAAU56J,EAAK4E,KAExB61J,EAA2BxnK,UAAUynK,qBAAuB,SAAU16J,GAC7DA,EAAK3E,QACNyV,KAAKzV,OAAOoJ,eAAgBxQ,QAAS+L,EAAK/L,UAAW,EAEzD,IAAI+nC,GAAe/gC,EAAa6V,KAAK8pJ,QAAS,wBAC1Cr1G,EAAgBtqD,EAAa6V,KAAK8pJ,QAAS,yBAC3CngK,EAAOqW,KAAKzV,OAAO0lC,4BACnBhmC,EAAQ+V,KAAKzV,OAAOsS,4BACxB3N,GAAK3M,OAAO20C,OAAS,KACjBhM,EACAh8B,EAAK3M,OAAO20C,OAAS,OAEhBud,IACLvlD,EAAK3M,OAAO20C,OAAS,SAEzBl3B,KAAKzV,OAAO26E,iBACZh2E,EAAK+3B,OAASt9B,IAASqW,KAAKzV,OAAO0lC,6BAA+BhmC,IAAU+V,KAAKzV,OAAOsS,6BACpF3N,EAAK+3B,QACLjnB,KAAKzV,OAAO40F,kBAGpBwqE,EAA2BxnK,UAAUmmK,cAAgB,SAAUp5H,EAAOC,EAAO2iD,EAAW02E,EAAaC,EAAc/kJ,GAW/G,IAAK,GAVDglJ,GACAC,EACAoB,EACAnB,EAAS5oJ,KAAKzV,OAAOu8B,cACrB+hI,EAAQ7oJ,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,SACrDszC,EAAW55B,KAAKzV,OAAOovC,iBAAiBC,SACxC/D,EAAQ71B,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,SACrDgH,KACA5E,KACAshK,KACKvmK,EAAI,EAAGsB,EAAMmqC,EAAM9rC,OAAQK,EAAIsB,EAAKtB,IACpCjB,oBAAkB0sC,EAAMzrC,KAAQjB,oBAAkB2sC,EAAM1rC,MACrDigB,IACAsmJ,EAAYvmK,GAAKigB,EAAOjgB,GAAG0F,wBAAwBmE,QAEvD5E,EAAMjF,GAAK0rC,EAAM1rC,GAAG0F,wBAAwBmE,OAC5CA,EAAO7J,GAAKyrC,EAAMzrC,GAAG0F,wBAAwBmE,OAGrD,KAAK,GAAI7J,GAAI,EAAGsB,EAAMmqC,EAAM9rC,OAAQK,EAAIsB,EAAKtB,IAAK,EAC1CquF,IAA6B,YAAbl4C,GAA0B/D,EAAMnrC,SAASwkC,EAAMzrC,KAC9C,WAAbm2C,GAAyBivH,EAAMn+J,SAASwkC,EAAMzrC,KAAuB,WAAbm2C,GAAyB4uH,IAAiBC,KAClG/kJ,EAAOjgB,KACPigB,EAAOjgB,GAAG4F,MAAMiE,OAAS,MAE7B4hC,EAAMzrC,GAAG4F,MAAMiE,OAAS,KACxB6hC,EAAM1rC,GAAG4F,MAAMiE,OAAS,MAE5Bo7J,EAAUp7J,EAAO7J,GACjBklK,EAAUjgK,EAAMjF,GAChBsmK,EAAWC,EAAYvmK,GAAKumK,EAAYvmK,GAAK,CAC7C,IAAIynD,GAAY99C,KAAK6J,IAAIyxJ,EAASC,EAASoB,IACtCvnK,oBAAkB0sC,EAAMzrC,KAAOyrC,EAAMzrC,GAAG0Q,oBAAuBy0J,GAAUF,EAAUx9G,IAClF09G,GAAUF,EAAUx9G,GAAelrC,KAAKzV,OAAOse,eAAiB7I,KAAKzV,OAAOqwF,eAC9B,IAAhD56E,KAAKzV,OAAOqwF,aAAai2B,sBACzB3hF,EAAMzrC,GAAG4F,MAAMiE,OAAS49C,EAAY,MAEpC/b,IAAU3sC,oBAAkB2sC,EAAM1rC,KAAO0rC,EAAM1rC,GAAG0Q,oBAAuBy0J,GAAU19G,EAAYy9G,IAC7FC,GAAU19G,EAAYy9G,GAAa3oJ,KAAKzV,OAAOse,eAAiB7I,KAAKzV,OAAOqwF,eAC9B,IAAhD56E,KAAKzV,OAAOqwF,aAAai2B,sBACzB1hF,EAAM1rC,GAAG4F,MAAMiE,OAAS49C,EAAY,MAEpCxnC,IAAWlhB,oBAAkBkhB,EAAOjgB,KAAOigB,EAAOjgB,GAAG0Q,oBAAuBy0J,GAAU19G,EAAY6+G,IAChGnB,GAAU19G,EAAY6+G,GAAc/pJ,KAAKzV,OAAOse,eAAiB7I,KAAKzV,OAAOqwF,eAC/B,IAAhD56E,KAAKzV,OAAOqwF,aAAai2B,sBACzBntG,EAAOjgB,GAAG4F,MAAMiE,OAAS49C,EAAY,MAGzC09G,GACA5oJ,KAAKunJ,mBAGboC,EAA2BxnK,UAAUosH,cAAgB,SAAUzoH,GAC3D,GACIopC,GACAxrB,EACAyrB,EAHAspF,EAA8C,eAAhCz4G,KAAKzV,OAAO8R,gBAI1Bi0C,EAAQtwC,KAAKuwC,uBACb/pB,EAAOxmB,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,mBACpDwjC,EAAO9pB,KAAKzV,OAAOmO,aACnB6tB,EAAOvmB,KAAK4tD,mBACZy6F,EAAeroJ,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBmE,UAChFmvC,EAAW55B,KAAKzV,OAAOovC,iBAAiBC,QAC3B,cAAb9zC,EAAIkhC,OACa,WAAb4S,GAAyB9zC,EAAIgsF,aACzB2mC,IACA/0G,EAASomB,EAAKxjC,cAAc,2BAA2BF,iBAAiB,OAE5E+oC,EAAQrF,EAAKxjC,cAAc,qBAAqBF,iBAAiB,MACjE8oC,EAAQpF,EAAKxjC,cAAc,oBAAoBF,iBAAiB,MAChE4Z,KAAKsoJ,cAAcp5H,EAAOC,EAAOrpC,EAAIgsF,WAAW,GAAM,EAAOpuE,IAEhD,YAAbk2B,GAA0B55B,KAAKzV,OAAOu8B,cACtCuhI,EAAav5J,IAAI,UAGjBu5J,EAAaxmK,OAAO,UAEP,SAAb+3C,GAAuB9zC,EAAIgsF,WACvB2mC,IACA/0G,EAAS4sC,EAAMlqD,iBAAiB,OAEpC8oC,EAAQ1I,EAAKpgC,iBAAiB,MAC9B+oC,EAAQ5I,EAAKngC,iBAAiB,QAG1BqyH,IACA/0G,EAAS4sC,EAAMhqD,cAA2B,YAAbszC,EACzB,QAAU,SAASxzC,iBAAiB,OAE5C8oC,EAAQ1I,EAAKlgC,cAA2B,YAAbszC,EACvB,QAAU,SAASxzC,iBAAiB,MACxC+oC,EAAQ5I,EAAKjgC,cAA2B,YAAbszC,EACvB,QAAU,SAASxzC,iBAAiB,OAEvC4Z,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,wBAAwBhD,QACzE4c,KAAKsoJ,cAAcp5H,EAAOC,EAAOrpC,EAAIgsF,WAAW,EAAO9xE,KAAK82B,SAAW,EAAGpzB,GAE9E1D,KAAK+nJ,wBAEa,kBAAbjiK,EAAIkhC,OACTmI,EAAQrF,EAAKxjC,cAAc,qBAAqBF,iBAAiB,MACjE8oC,EAAQpF,EAAKxjC,cAAc,oBAAoBF,iBAAiB,MAC5DqyH,IACA/0G,EAASomB,EAAKxjC,cAAc,2BAA2BF,iBAAiB,OAE5E4Z,KAAKsoJ,cAAcp5H,EAAOC,EAAOrpC,EAAIgsF,WAAW,GAAO,EAAOpuE,GACzD1D,KAAKzV,OAAO+Y,mBAAmBld,iBAAiB,wBAAwBhD,SACrEq1H,IACA/0G,EAAS4sC,EAAMlqD,iBAAiB,OAEpC8oC,EAAQ1I,EAAKpgC,iBAAiB,MAC9B+oC,EAAQ5I,EAAKngC,iBAAiB,MAC9B4Z,KAAKsoJ,cAAcp5H,EAAOC,EAAOrpC,EAAIgsF,WAAW,GAAO,EAAOpuE,MAQ1EimJ,EAA2BxnK,UAAUolC,WAAa,SAAUpkC,GAOxD,IAAK,GALDme,GACAD,EAFA/d,EAAO0c,KAAKzV,OAGZZ,EAAOqW,KAAKzV,OAAO0lC,4BACnBhmC,EAAQ+V,KAAKzV,OAAOsS,6BACpBF,EAAUqD,KAAKzV,OAAOqS,yBACjB3U,EAAI,EAAG4nC,EAAO1sC,EAAQC,OAAQ6E,EAAI4nC,EAAM5nC,IAAK,CAClD,GAAI1F,GAASY,EAAQ8E,EAGrB,IAFAoZ,EAAM/d,EAAKwsC,yBAAyBvtC,EAAOoJ,KAC3C2V,EAAa/e,EAAOoG,QAAU,GAAK,OACb,SAAlBpG,EAAO20C,QAAuC,UAAlB30C,EAAO20C,QACnC,GAAIvtC,IAASM,EAAO,CAChB,GAAIggK,GAAa3mK,EAAKggB,mBAAmBhd,cAAc,yBAAyBA,cAAc,WAC9FQ,qBAAkBmjK,EAAWp+J,SAASwV,IAAQ/X,QAAWgY,QAExD,KAAK3X,GAAQM,EAAO,CACrB,GAAIigK,GAAc5mK,EAAKggB,mBAAmBhd,cAAc,0BAA0BA,cAAc,WAChGQ,qBAAkBojK,EAAYr+J,SAASwV,EAAM1E,IAAYrT,QAAWgY,SAGvE,CACD,GAAI23B,GAAa31C,EAAKggB,mBAAmBhd,cAAc,oBAAoBA,cAAc,WACzFQ,qBAAkBmyC,EAAWptC,SAASwV,EAAM1X,IAASL,QAAWgY,KAGxEtB,KAAKm5B,aAETwwH,EAA2BxnK,UAAUgmK,eAAiB,SAAUr0J,EAAK41J,EAAcz4B,GAC/E,MAAOjvG,GAAO7/B,UAAUgmK,eAAe78J,KAAK0U,KAAMlM,EAAK41J,EAAcz4B,IAEzE04B,EAA2BxnK,UAAUg3C,UAAY,WAC7C,GAAI55B,GACAV,EAAQmB,KAAK4tD,mBAAmBtnE,cAAc,QAClDzE,UAAOme,KAAK4tD,mBAAmBtnE,cAAc,UACT,eAAhC0Z,KAAKzV,OAAO8R,kBACZkD,EAAUS,KAAKuwC,uBAAuBjqD,cAAc,SACpDzE,SAAOme,KAAKuwC,uBAAuBjqD,cAAc,WAErD07B,EAAO7/B,UAAU2lK,oBAAoBx8J,KAAK0U,MAC1CA,KAAKwnJ,cACLxnJ,KAAK4tD,mBAAmBtnE,cAAc,SAASC,UAAYsY,EAAMtY,UAC7DgZ,IACAS,KAAKuwC,uBAAuBjqD,cAAc,SAASC,UAAYgZ,EAAQhZ,WAE3EyZ,KAAKynJ,iBACLznJ,KAAKuE,aAAai1B,oBAClBx5B,KAAKzV,OAAOsoB,OAAO2U,OACfxnB,KAAKzV,OAAOu8B,eAA2D,WAA1C9mB,KAAKzV,OAAOovC,iBAAiBC,UAC1DhrC,KAAQvD,MAAMC,KAAK0U,KAAK4tD,mBAAmBxnE,iBAAiB,uBAAuB,GAEvF4Z,KAAKzV,OAAOkvC,qBACZ,IAAIP,GAAOl5B,KAAKzV,OAAOmO,aAAapS,cAAc,qBAAqBA,cAAc,WACrFzE,UAAOq3C,EAAK5yC,cAAc,YAC1B,IAAI6jK,GAAanqJ,KAAK4tD,mBAAmBtnE,cAAc,YAAY4N,WAAU,EAE7E,IADAglC,EAAKK,aAAa4wH,EAAWjxH,EAAK5yC,cAAc,UAC5CiZ,EAAS,CACT,GAAI6qJ,GAAQpqJ,KAAKzV,OAAOmO,aAAapS,cAAc,2BAA2BA,cAAc,WAC5FzE,UAAOuoK,EAAM9jK,cAAc,YAC3B,IAAI+jK,GAAiBrqJ,KAAKuwC,uBAAuBjqD,cAAc,YAAY4N,WAAU,EACrFk2J,GAAM7wH,aAAa8wH,EAAeD,EAAM9jK,cAAc,UAE1D0Z,KAAKuE,aAAaE,yBAClBzE,KAAKw1B,uBACLx1B,KAAKzV,OAAOsoB,OAAO6iB,IAA0B16B,KAAMgF,KAAKhF,KAAM9L,MAAQ0G,UAAU,MAEpF+zJ,EAA2BxnK,UAAUmlK,cAAgB,SAAUxhK,GAC3D,GAAI6D,GAAOqW,KAAKzV,OAAO0lC,4BACnBhmC,EAAQ+V,KAAKzV,OAAOsS,6BACpBF,EAAUqD,KAAKzV,OAAOqS,wBAC1B,IAAiB,WAAb9W,EAAIkhC,KAAmB,CACvB,GAAIkhI,GAAYloJ,KAAK6oB,WAAWviC,cAAc,eAC9C,IAAI0Z,KAAKzV,OAAOue,gBAAkBo/I,GAAaloJ,KAAK4tD,mBAAmBtnE,cAAc,SAAU,CAC3F,GAAI2pD,GAAcjwC,KAAKzV,OAAOyJ,gBAC1BlM,EAAQ6B,EAAOsmD,EAActmD,EAAO,EAAIA,EAAO,EAC/CsnI,EAAQtnI,EAAOgT,GAAWhT,GAAQsmD,EAAc,EAAI,EAGxD,IAFAjwC,KAAK4tD,mBAAmBtnE,cAAc,SACjCwF,YAAYkU,KAAKmoJ,eAAeD,EAAWpgK,EAAOmpI,IACnB,eAAhCjxH,KAAKzV,OAAO8R,gBAAkC,CAC9C,GAAIvI,MAASzI,MAAMC,KAAK0U,KAAK4tD,mBACzBxnE,iBAAiB,mCACrB4Z,MAAKuwC,uBAAuBjqD,cAAc,SAASwF,YAAYkU,KAAKmoJ,eAAeD,EAAWpgK,EAAOA,EAAQmC,IAC7G+V,KAAKsqJ,oBAAoBx2J,GAE7B,GAAIjJ,MAAcQ,MAAMC,KAAK0U,KAAK4tD,mBAC9BxnE,iBAAiB,mCACrB4Z,MAAKsqJ,oBAAoBz/J,QAGX,aAAb/E,EAAIkhC,MAAoC,kBAAblhC,EAAIkhC,OACpChnB,KAAKuuG,cAAczoH,GACnBka,KAAKzV,OAAO2R,cAAc8pJ,wBAGlC2D,EAA2BxnK,UAAUooK,qBAAuB,SAAUj4I,EAAMlM,GACpEkM,IAAyB,IAAjBA,EAAK3pB,SACb7B,oBAAkBsf,GAAY9c,QAAW,UAGjDqgK,EAA2BxnK,UAAUmoK,oBAAsB,SAAUz/J,GACjE,IAAK,GAAIgF,GAAK,EAAGssC,EAAatxC,EAAUgF,EAAKssC,EAAW/4C,OAAQyM,IAAM,CAClE,GACIX,IACAtE,QAFOuxC,EAAWtsC,GAEHmS,eAAgB,QAC/B7W,YACI+W,UAAWlC,KAAKzV,OAAO2X,UAAW2/F,iBAAiB,GAG3D9Y,SAAMq/D,iBAAiBl5J,KAG/By6J,EAA2BxnK,UAAU+lC,YAAc,WAC3CloB,KAAKzV,OAAO0lC,6BACZjO,EAAO7/B,UAAU+lC,YAAY58B,KAAK0U,MAC9BA,KAAKzV,OAAOsS,8BACZmD,KAAKwqJ,kCAITxqJ,KAAKyqJ,8BAETzqJ,KAAK2mB,WAAW2S,WAAWjwC,MAAMC,QAAU,OAC3C0W,KAAK4tD,mBAAmBvkE,MAAMqhK,KAAO,KAEzCf,EAA2BxnK,UAAUomC,YAAc,WAC3CvoB,KAAKzV,OAAO0lC,4BACZjO,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAGlCA,KAAK2qJ,+BAGbhB,EAA2BxnK,UAAUqlK,YAAc,WAC/C,GAAIxnJ,KAAKzV,OAAO0lC,6BAEZ,GADAjO,EAAO7/B,UAAUqlK,YAAYl8J,KAAK0U,MAC9BA,KAAKzV,OAAOsS,6BAA8B,CAC1C,GAAI7B,GAAOgF,KAAKhF,IAChBgF,MAAKuwC,uBAAuBzkD,YAAYkU,KAAKg2B,iBAAajpC,GAAW,iBACrEiT,KAAK+nJ,uBACL/nJ,KAAKzV,OAAOsoB,OAAO6iB,IAA0B16B,KAAMgF,KAAKhF,KAAM9L,MAAQgU,0BAA0B,KAChGlD,KAAKhF,KAAOA,OAIhBgF,MAAKuwC,uBAAuBzkD,YAAYkU,KAAK6oB,YAC7C7oB,KAAK4tD,mBAAmB9hE,YAAYkU,KAAKg2B,iBAAajpC,GAAW,YACjEiT,KAAK+nJ,uBACL/nJ,KAAKgoJ,sBAGb2B,EAA2BxnK,UAAU4lK,qBAAuB,WACpD/nJ,KAAKzV,OAAO0lC,6BACZjO,EAAO7/B,UAAU4lK,qBAAqBz8J,KAAK0U,MACvCA,KAAKzV,OAAOsS,8BACZmD,KAAK4qJ,mCAIT5qJ,KAAK4qJ,mCAGbjB,EAA2BxnK,UAAUyoK,gCAAkC,WAKnE,IAAK,GAJD1B,GAEAxpJ,EAAOM,KAAKuwC,uBAAuBnqD,iBAAiB,mBACpDqZ,EAAMO,KAAK4tD,mBAAmBxnE,iBAAiB,mBAC1C3C,EAAI,EAAGsB,EAAM2a,EAAKtc,OAAQK,EAAIsB,EAAKtB,IACxCylK,EAAWlpJ,KAAKopJ,WAAW1pJ,EAAKjc,IACrBuc,KAAKopJ,WAAW3pJ,EAAIhc,IAC3BylK,EAASrwG,IAAM,GACf74C,KAAKqpJ,uBAAuB5lK,EAAGylK,EAASjyJ,IAAKyI,EAAKjc,GAAIgc,IAOlEkqJ,EAA2BxnK,UAAUslK,eAAiB,WAClDznJ,KAAK6qJ,wBACD7qJ,KAAKzV,OAAO0lC,6BACZjwB,KAAK8qJ,2BAEL9qJ,KAAKzV,OAAOsS,8BACZmD,KAAK+qJ,6BAGbpB,EAA2BxnK,UAAUsoK,4BAA8B,WAC/D,GAAI9kC,GAAO3lH,KAAKzV,OAAOK,QAAQtE,cAAc,oBACzC0kK,EAAYhrJ,KAAKzV,OAAOK,QAAQtE,cAAc,yBAClD07B,GAAO7/B,UAAUylK,uBAAuBt8J,KAAK0U,MACzCxd,oBAAkBwoK,KAClBrlC,EAAO3lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,oBACrDkiK,EAAYhrJ,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,yCAC1DkX,KAAK2mB,WAAWrgC,cAAc,oBAAoBwF,YAAY65H,GAC9D3lH,KAAK2mB,WAAWrgC,cAAc,oBAAoBwF,YAAYk/J,IAElEhpI,EAAO7/B,UAAUwlK,iBAAiBr8J,KAAK0U,KAAM2lH,GAC7C3lH,KAAKirJ,qBAAqBD,IAE9BrB,EAA2BxnK,UAAUqoK,+BAAiC,WAClE,GAAIQ,GAAYhrJ,KAAKzV,OAAOK,QAAQtE,cAAc,yBAClD07B,GAAO7/B,UAAUylK,uBAAuBt8J,KAAK0U,MACzCxd,oBAAkBwoK,KAClBA,EAAYhrJ,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,yCAC1DkX,KAAK2mB,WAAWrgC,cAAc,oBAAoBwF,YAAYk/J,IAElEhrJ,KAAKirJ,qBAAqBD,IAE9BrB,EAA2BxnK,UAAUwoK,4BAA8B,WAC/D3oI,EAAO7/B,UAAUskK,uBAAuBn7J,KAAK0U,MAC7CA,KAAKwnJ,cACLxnJ,KAAKynJ,iBACLznJ,KAAKw1B,uBACLx1B,KAAKy1B,uBACLz1B,KAAKzV,OAAOsoB,OAAO6iB,IAA0B16B,KAAMgF,KAAKhF,KAAM9L,MAAQ0G,UAAU,MAEpF+zJ,EAA2BxnK,UAAU2oK,yBAA2B,WAK5D,IAAK,GAJDI,GAAelrJ,KAAKotB,kBAAkB9mC,cAAc,YAAYuF,SAChEiS,EAAQkC,KAAKzV,OAAOyJ,gBAAkB,EAAI,EAC1CxP,EAAQwb,KAAKzV,OAAOyJ,gBAAkBgM,KAAKzV,OAAO0lC,4BAA8B,EAC9EjwB,KAAKzV,OAAO0lC,4BACTxsC,EAAIqa,EAAOra,EAAIynK,EAAa9nK,OAAQK,IACrCA,GAAKe,IACL3C,SAAOqpK,EAAaznK,IACpBA,MAIZkmK,EAA2BxnK,UAAU0oK,sBAAwB,WACzD,GAAIM,GAAkBnrJ,KAAK4tD,mBAAmBtnE,cAAc,YAAYuF,QACpEmU,MAAKzV,OAAOyJ,iBACZnS,SAAOspK,EAAgB,GAM3B,KAAK,GAJD/nK,GAAS+nK,EAAgB/nK,OACzBuG,EAAOqW,KAAKzV,OAAO0lC,4BACnBtzB,EAAUqD,KAAKzV,OAAOqS,yBACtBZ,EAAI,EACCvY,EAAI,EAAGA,EAAIL,EAAQK,IAAKuY,KACzBvY,EAAIkG,GAAQlG,GAAKkG,EAAOgT,KACxB9a,SAAOspK,EAAgBnvJ,IACvBA,MAIZ2tJ,EAA2BxnK,UAAU4oK,0BAA4B,WAC7D,GAAI96G,GAAcjwC,KAAKzV,OAAOyJ,gBAC1Bo3J,EAAeprJ,KAAKzV,OAAO4sF,wBAC3Bk0E,EAAgBrrJ,KAAKuwC,uBAAuBjqD,cAAc,YAAYuF,QACtC,gBAAhCmU,KAAKzV,OAAO8R,iBAAoC4zC,GAChDpuD,SAAOwpK,EAAc,GAMzB,KAAK,GAJDjoK,GAASioK,EAAcjoK,OACvBuG,EAAOqW,KAAKzV,OAAO0lC,4BACnBtzB,EAAUqD,KAAKzV,OAAOqS,yBACtBZ,EAAI,EACCvY,EAAI,EAAGA,EAAIL,EAAQK,IACpBA,EAAIkG,EAAOgT,EACX9a,SAAOwpK,EAAc,KAGrBrrJ,KAAKuqJ,qBAAqBa,EAAapvJ,GAAIqvJ,EAAcrvJ,IACzDA,MAIZ2tJ,EAA2BxnK,UAAU8oK,qBAAuB,SAAUn3J,GAClEkM,KAAKsrJ,kBAAoBx3J,GAE7B61J,EAA2BxnK,UAAUouD,qBAAuB,WACxD,MAAOvwC,MAAKsrJ,mBAET3B,GACTtC,IAMEkE,GAA6C,SAAUvpI,GAEvD,QAASupI,GAA4BhhK,EAAQiY,GACzC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAIlD,OAHA0I,GAAM8iJ,SAAW,EACjB9iJ,EAAM+iJ,mBAAoB,EAC1B/iJ,EAAMnE,aAAe/B,EAAQpT,WAAW,gBACjCsZ,EA2YX,MAjZA8W,IAAU+rI,EAA6BvpI,GAQvCupI,EAA4BppK,UAAU+lC,YAAc,WAC5CloB,KAAKzV,OAAO0lC,6BACZjO,EAAO7/B,UAAU+lC,YAAY58B,KAAK0U,MAC9BA,KAAKzV,OAAOsS,8BACZmD,KAAK0rJ,kCAIT1rJ,KAAK2rJ,6BAET,IAAIriK,GAAU0W,KAAKzV,OAAO8J,qBAAuB,GAAK,MACtD2L,MAAK2mB,WAAW2S,WAAWjwC,MAAMC,QAAUA,GAE/CiiK,EAA4BppK,UAAUomC,YAAc,WAChD,GAAIvoB,KAAKzV,OAAO0lC,6BAEZ,GADAjO,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAC9BA,KAAKzV,OAAOsS,6BAA8B,CAC1CmD,KAAK4rJ,gCACDtiK,GAAW0W,KAAKzV,OAAO0sF,6BAAwC,GAAT,MAC1Dj3E,MAAK0mJ,0BAA0B,6CAA8Cp9J,GAAS,QAGzF,CACD0W,KAAK2qJ,6BACL,IAAIrhK,GAAW0W,KAAKzV,OAAO0sF,6BAAwC,GAAT,MAC1Dj3E,MAAK0mJ,0BAA0B,6CAA8Cp9J,GAEjF0W,KAAKutD,oBAAoBlkE,MAAMqhK,KAAO,KAE1Ca,EAA4BppK,UAAU6kK,gBAAkB,SAAU7sB,EAAQx9H,EAASkqJ,GAC/E,GAAIt8J,GAASyV,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,cAAeoE,OAAQ,iBAClF,IAAI8S,KAAKzV,OAAO0lC,4BAA6B,CACzC,GAAK42H,EAMD,WADA7mJ,MAAKzV,OAAOmO,aAAapS,cAAc,gBAAgBwF,YAAYquI,EAJnE5vI,GAAOuB,YAAYquI,GACnB5vI,EAAOuB,YAAY6Q,OAQvBpS,GAAOuB,YAAY6Q,GACnBpS,EAAOuB,YAAYquI,EAEvBn6H,MAAKzV,OAAOmO,aAAa5M,YAAYvB,IAEzCghK,EAA4BppK,UAAUwpK,4BAA8B,WAChE3rJ,KAAKumJ,wBACL,IAAI5gC,GAAO3lH,KAAKzV,OAAOK,QAAQtE,cAAc,qBACzCulK,EAAgB7rJ,KAAKzV,OAAOK,QAAQtE,cAAc,0BAClD9D,qBAAkBqpK,KAClBlmC,EAAO3lH,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,qBACrD+iK,EAAgB7rJ,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,2CAC9DkX,KAAK2mB,WAAWrgC,cAAc,cAAcwF,YAAY65H,GACxD3lH,KAAK2mB,WAAWrgC,cAAc,cAAcwF,YAAY+/J,IAE5D7pI,EAAO7/B,UAAUmkK,kBAAkBh7J,KAAK0U,KAAM2lH,GAC9C3lH,KAAK8rJ,sBAAsBD,IAE/BN,EAA4BppK,UAAUupK,+BAAiC,WACnE1rJ,KAAKumJ,wBACL,IAAIsF,GAAgB7rJ,KAAKzV,OAAOK,QAAQtE,cAAc,0BAClD9D,qBAAkBqpK,KAClBA,EAAgB7rJ,KAAKzV,OAAOkC,cAAc,OAAS3D,UAAW,2CAC9DkX,KAAK2mB,WAAWrgC,cAAc,cAAcwF,YAAY+/J,IAE5D7rJ,KAAK8rJ,sBAAsBD,IAE/BN,EAA4BppK,UAAUwoK,4BAA8B,WAChE,GAAIzxH,EAC0D,OAA1Dl5B,KAAK0hD,wBAAwBp7D,cAAc,aAC3C07B,EAAO7/B,UAAUskK,uBAAuBn7J,KAAK0U,MAC7CA,KAAK0hD,wBAAwB51D,YAAYkU,KAAK6oB,YAC9CqQ,EAAOl5B,KAAK6oB,WAAW30B,WAAU,GACjC8L,KAAKutD,oBAAoBzhE,YAAYotC,KAGjCl5B,KAAKzV,OAAOuU,YACZkB,KAAKzV,OAAO+Y,mBAAmB7Y,UAAUqE,IAAI,mBAEjDkR,KAAK4oB,SAAS5oB,KAAK0hD,wBAAwBp7D,cAAc,aACzD0Z,KAAKmG,YAAYnG,KAAK+rJ,gCACtB7yH,EAAOl5B,KAAKutD,oBAAoBjnE,cAAc,YAC9C0Z,KAAK0hD,wBAAwBp7D,cAAc,YAAYwF,YAAYkU,KAAKmpB,gBAExEnpB,KAAKutD,oBAAoBjnE,cAAc,aACvCzE,SAAOme,KAAKutD,oBAAoBjnE,cAAc,YAElD,IAAI+f,GAAarG,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBACzDA,cAAc,YAAa4N,WAAU,EAC1CglC,GAAKK,aAAalzB,EAAU6yB,EAAK5yC,cAAc,WAEnDilK,EAA4BppK,UAAUypK,+BAAiC,WACnE,GAAIl5E,GAAc1yE,KAAK6oB,WAAW30B,WAAU,EAC5C8L,MAAK0hD,wBAAwB51D,YAAY4mF,EACzC,IAAIs5E,GAAchsJ,KAAK0hD,wBAAwBp7D,cAAc,WACzD0lK,IACAnqK,SAAOmqK,EAEX,IAAIC,GAAajsJ,KAAK0hD,wBAAwBp7D,cAAc,WAC5D2lK,GAAW1yH,aAAav5B,KAAK+rJ,+BAAgCE,EAAW3lK,cAAc,WAE1FilK,EAA4BppK,UAAU+pK,+BAAiC,SAAUrtJ,GAC7EmjB,EAAO7/B,UAAUqkK,uBAAuBl7J,KAAK0U,KAAMnB,GACnDmB,KAAKutD,oBAAoBjnE,cAAc,SAASC,UAAY,qBAC5DQ,YAAUiZ,KAAKzV,OAAO0U,yBAAyB3Y,cAAc,QAAS,eACtE0Z,KAAK0hD,wBAAwBp7D,cAAc,eAAeA,cAAc,MAAMmzB,QAAUzZ,KAAKzV,OAAO0sF,6BAChGj3E,KAAKzV,OAAOuU,aACZkB,KAAKzV,OAAO4U,4BAA4B5Y,UAAY,GACpDyZ,KAAKzV,OAAOyU,wBAAwBzY,UAAY,KAMxDglK,EAA4BppK,UAAUirC,gBAAkB,SAAU3wB,GAC9D,MAAkB,gBAAdA,EACOuD,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,yBAAyBA,cAAc,SAExE,YAAdmW,EACEuD,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,oBAAoBA,cAAc,SAG/E0Z,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,0BAA0BA,cAAc,UAGpGilK,EAA4BppK,UAAUgqK,kCAAoC,WACtEnsJ,KAAK0hD,wBAAwBp7D,cAAc,SAASC,UAAY,qBAChEQ,YAAUiZ,KAAK0hD,wBAAwBp7D,cAAc,SAASA,cAAc,QAAS,eACjF0Z,KAAKzV,OAAOuU,aACZkB,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,0BAA0BA,cAAc,SAASC,UAAY,KAGlHglK,EAA4BppK,UAAU2pK,sBAAwB,SAAUh4J,GACpEkM,KAAKosJ,mBAAqBt4J,GAE9By3J,EAA4BppK,UAAUu/D,sBAAwB,WAC1D,MAAO1hD,MAAKosJ,oBAEhBb,EAA4BppK,UAAUwuC,kBAAoB,WACtD,GAAIvqB,GAAWpG,KAAKzV,OAAOK,QAAQtE,cAAc,iBAAiBA,cAAc,YAAY4N,WAAU,EACtG,KAAK8L,KAAKzV,OAAO0lC,4BAA6B,CAC1C,GAAIhmC,GAAQ+V,KAAK+rJ,8BACjB3lJ,GAAWnc,GAAS+V,KAAKwrJ,SAAWvhK,EAAMiK,WAAU,GAAQkS,EAC5DpG,KAAKwrJ,WACLxrJ,KAAKyrJ,mBAAoB,EAE7B,MAAOrlJ,IAEXmlJ,EAA4BppK,UAAU4pK,6BAA+B,WACjE,GAAIh+J,GAAMiS,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,0BAA0BA,cAAc,WAI/F,OAHKyH,KACDA,EAAMiS,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,aAEhDyH,EAAImG,WAAU,IAEzBq3J,EAA4BppK,UAAUgkB,YAAc,SAAUC,GAC1D,MAAIpG,MAAKzV,OAAO0lC,4BACLjO,EAAO7/B,UAAUgkB,YAAY7a,KAAK0U,KAAMoG,IAG/CA,EAAYpG,KAAKyrJ,kBAA0DrlJ,EAAtCpG,KAAK+rJ,+BACrCvpK,oBAAkB4jB,KACnBA,EAAS5b,GAAK,WAAa4b,EAAS5b,IAExCwV,KAAKyrJ,mBAAoB,EACH,IAAlBzrJ,KAAKwrJ,WACLxrJ,KAAKwrJ,SAAW,GAEbxrJ,KAAKqG,SAAWD,IAG/BmlJ,EAA4BppK,UAAU8uC,YAAc,SAAUpyB,GACtDmB,KAAKzV,OAAO0lC,6BACZjO,EAAO7/B,UAAU8uC,YAAY3lC,KAAK0U,KAAMnB,GACxCmB,KAAKmmJ,mBAAmB7/J,cAAc,eAAeA,cAAc,MAAMmzB,QAAUzZ,KAAKzV,OAAOysF,4BAC3Fh3E,KAAKzV,OAAOsS,8BACZmD,KAAKmsJ,qCAITnsJ,KAAKksJ,+BAA+BrtJ,GAExCmB,KAAKzV,OAAOsoB,OAAOkU,IAAuBC,KAAM,mBAEpDukI,EAA4BppK,UAAU+jK,mBAAqB,SAAU54J,GAC7D0S,KAAKzV,OAAOsS,+BACZmD,KAAK0hD,wBAAwBr4D,MAAMiE,OAASA,EAAO2C,WAAa,MAEhE+P,KAAKzV,OAAO0lC,8BACZjwB,KAAKmmJ,mBAAmB98J,MAAMiE,OAASA,EAAO2C,WAAa,MAE/D+P,KAAKutD,oBAAoBlkE,MAAMiE,OAASA,EAAO2C,WAAa,MAEhEs7J,EAA4BppK,UAAUmqB,eAAiB,SAAUpd,GAC7D8yB,EAAO7/B,UAAUmqB,eAAehhB,KAAK0U,KAAM9Q,IAE/Cq8J,EAA4BppK,UAAU4jK,SAAW,SAAU72J,GACvD8yB,EAAO7/B,UAAU4jK,SAASz6J,KAAK0U,KAAM9Q,IAKzCq8J,EAA4BppK,UAAU8oC,SAAW,SAAUxuB,GACvD,GAAIoC,EAUJ,OATkB,gBAAdpC,EACAoC,EAAQmB,KAAKzV,OAAOwqF,4BAED,YAAdt4E,EACLoC,EAAQmB,KAAKzV,OAAO0U,yBAED,iBAAdxC,IACLoC,EAAQmB,KAAKzV,OAAO6U,8BAEjBP,GAKX0sJ,EAA4BppK,UAAUorC,YAAc,SAAUr+B,EAAMuN,GAChEvN,EAAK0G,SAA0B,gBAAd6G,GAAgE,UAAhCuD,KAAKzV,OAAO8R,iBACxC,iBAAdI,EACPvN,EAAKgU,yBAA2D,eAAhClD,KAAKzV,OAAO8R,iBAAkD,iBAAdI,EAChFvN,EAAK6T,qBAAqC,YAAdtG,GAKhC8uJ,EAA4BppK,UAAUmiB,cAAgB,SAAUzF,EAAOyqB,EAAMp6B,EAAMuN,IAC1Eja,oBAAkBwd,KAAKzV,OAAOixB,cAAgBxb,KAAKzV,OAAOkhB,QAC3D5M,EAAQyqB,EAGRzqB,EAAM/S,YAAYw9B,GAEc,SAAhCtpB,KAAKzV,OAAO8R,gBACM,gBAAdI,GACAuD,KAAKmlB,UAAW,EAChBnlB,KAAKmmJ,mBAAmB7/J,cAAc,SAASwF,YAAY+S,GAC3DmB,KAAK4nB,mBAAmB3gC,YAAWiI,MAGnC8Q,KAAKmnJ,aAAatoJ,GAClBmB,KAAKmlB,UAAW,EAChBnlB,KAAKutD,oBAAoBjnE,cAAc,SAASwF,YAAY+S,GAC5DmB,KAAKuuG,gBACLvuG,KAAKgmJ,uBAG4B,UAAhChmJ,KAAKzV,OAAO8R,gBACC,YAAdI,GACAuD,KAAKmnJ,aAAatoJ,GAClBmB,KAAKmlB,UAAW,EAChBnlB,KAAKutD,oBAAoBjnE,cAAc,SAASwF,YAAY+S,GAC5DmB,KAAKuuG,gBACLvuG,KAAKgmJ,wBAGLhmJ,KAAKmlB,UAAW,EAChBnlB,KAAK0hD,wBAAwBp7D,cAAc,SAASwF,YAAY+S,GAChEmB,KAAK4nB,mBAAmB3gC,YAAWiI,KAGF,eAAhC8Q,KAAKzV,OAAO8R,kBACC,gBAAdI,GACAuD,KAAKmlB,UAAW,EAChBnlB,KAAKmmJ,mBAAmB7/J,cAAc,SAASwF,YAAY+S,GAC3DmB,KAAK4nB,mBAAmB3gC,YAAWiI,KAEhB,YAAduN,GACLuD,KAAKmnJ,aAAatoJ,GAClBmB,KAAKmlB,UAAW,EAChBnlB,KAAKutD,oBAAoBjnE,cAAc,SAASwF,YAAY+S,GAC5DmB,KAAK4nB,mBAAmB3gC,YAAWiI,MAGnC8Q,KAAKmlB,UAAW,EAChBnlB,KAAK0hD,wBAAwBp7D,cAAc,SAASwF,YAAY+S,GAChEmB,KAAKuuG,gBACLvuG,KAAKgmJ,wBAGThmJ,KAAKygG,kBACLzgG,KAAKzV,OAAO+2C,aAAaE,YACzBxhC,KAAKygG,iBAAkB,GAE3BzgG,KAAKuE,aAAaE,0BAEtB8mJ,EAA4BppK,UAAUosH,cAAgB,WAC7CvuG,KAAKzV,OAAOu8B,eACb9mB,KAAKzV,OAAOsoB,OAAOkU,IAAuBC,KAAM,mBAMxDukI,EAA4BppK,UAAUgrC,UAAY,SAAU1wB,GACxD,GAAI9S,GAAOqW,KAAKzV,OAAO0lC,4BACnBhmC,EAAQ+V,KAAKzV,OAAOsS,4BACpBlT,KAASM,EACS,gBAAdwS,GACAuD,KAAKglB,WAAahlB,KAAKhF,KACvBgF,KAAK1D,kBAAoB0D,KAAK7D,aAG9B6D,KAAKilB,YAAcjlB,KAAKhF,MAGtBrR,GAAQM,EACI,YAAdwS,EACAuD,KAAKilB,YAAcjlB,KAAKhF,MAGxBgF,KAAKglB,WAAahlB,KAAKhF,KACvBgF,KAAK1D,kBAAoB0D,KAAK7D,aAG7BxS,GAAQM,IACK,gBAAdwS,GACAuD,KAAKglB,WAAahlB,KAAKhF,KACvBgF,KAAK1D,kBAAoB0D,KAAK7D,aAEX,YAAdM,GACLuD,KAAKilB,YAAcjlB,KAAKhF,KACxBgF,KAAKqsJ,mBAAqBrsJ,KAAK7D,cAG/B6D,KAAKssJ,gBAAkBtsJ,KAAKhF,KAC5BgF,KAAKzD,uBAAyByD,KAAK7D,eAQ/CovJ,EAA4BppK,UAAU8sC,sBAAwB,WAC1D,MAAoC,eAAhCjvB,KAAKzV,OAAO8R,gBACL2D,KAAK7D,YAGL6D,KAAKqsJ,oBAOpBd,EAA4BppK,UAAU0yF,0BAA4B,WAC9D,MAAoC,eAAhC70E,KAAKzV,OAAO8R,gBACL2D,KAAK1D,kBAGL0D,KAAKzD,wBAOpBgvJ,EAA4BppK,UAAUmlE,mBAAqB,WACvD,MAAoC,eAAhCtnD,KAAKzV,OAAO8R,gBACR2D,KAAKzV,OAAOmoB,wBACL1S,KAAK4lB,gBAET5lB,KAAKssJ,gBAGLtsJ,KAAKyqB,WAMpB8gI,EAA4BppK,UAAUw/D,yBAA2B,SAAU75D,GACvE,MAAOkY,MAAKzV,OAAO6T,yBAAyBtW,IAMhDyjK,EAA4BppK,UAAUsoC,QAAU,WAC5C,GAAIqE,GAAe9uB,KAAKyuB,iBACxB,OAAOK,GAAa1rC,OAAS0rC,EAAe9uB,KAAKglB,YAMrDumI,EAA4BppK,UAAU6sC,eAAiB,WACnD,MAAOhvB,MAAK1D,mBAETivJ,GACTzF,IjGv2BEtmI,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAmBnFysI,GAAuC,SAAUvqI,GAEjD,QAASuqI,GAAsBhiK,EAAQiY,GACnC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAUlD,OARA0I,GAAM/E,WAEN+E,EAAMjF,YAENiF,EAAMhF,UACNgF,EAAM8jJ,WAAahqJ,EACnBkG,EAAMqkH,cAAc,MACpBrkH,EAAMnG,kBAAoB,GAAIwb,IAAkBrV,EAAMne,QAC/Cme,EAqJX,MAjKA8W,IAAU+sI,EAAuBvqI,GAcjCuqI,EAAsBpqK,UAAU4qI,cAAgB,SAAUl+H,GACtDmR,KAAKzV,OAAOsE,GAAQ+jI,GAAuB5yH,KAAKmP,eAAgBnP,MAChEA,KAAKzV,OAAOsE,GGoaY,uBHpauBmR,KAAK+D,mBAAoB/D,MACxEA,KAAKzV,OAAOsE,GG6akB,6BH7auBmR,KAAKysJ,yBAA0BzsJ,MACpFA,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAKsM,eAAe+G,KAAKrT,QAEjFusJ,EAAsBpqK,UAAUmqB,eAAiB,SAAUpd,GACvD,GAAyB,WAArBA,EAAKkT,aAA4BpC,KAAKzV,OAAOuU,WAC7C,IAAK,GAAIrb,GAAI,EAAGA,EAAIuc,KAAKzV,OAAOuU,WAAYrb,IACxC6iB,GAAStG,KAAMvc,IAI3B8oK,EAAsBpqK,UAAUsqK,yBAA2B,SAAUv9J,GACjE,GAAIwZ,GAAQ1I,KACR1c,EAAO0c,KAAKzV,MAChB,IAAyB,WAArB2E,EAAKkT,aAA4B9e,EAAKwb,WAAY,CAClD5P,EAAK0U,oBAAqB,CAC1B,IAAI8oJ,GAAgBppK,EAAK44B,wBACrBrqB,EAAQvO,EAAK8X,aAAa9Y,KAAKkvB,eAAc,GAAMG,OACvD9f,GAAMuT,KAAK,EAAG9hB,EAAK+R,aAAaE,UAChCjS,EAAK8X,aAAa9Y,KAAK0uB,WAAYnf,GAAO6kB,KAAK,SAAU1zB,GACrDqf,GAAiBnT,EAAMlM,EAAE0C,OAAQgnK,EAAeppK,EAAMolB,EAAMnG,kBAAmBmG,EAAM8jJ,WAAY9jJ,EAAMjG,gBAAiBiG,OAIpI6jJ,EAAsBpqK,UAAUgtB,eAAiB,SAAU7sB,GACvD0d,KAAKyC,gBAAgB0M,eAAe7sB,IAExCiqK,EAAsBpqK,UAAU4hB,mBAAqB,SAAU7U,GAC3D6U,GAAmB7U,EAAM8Q,KAAKyC,kBAKlC8pJ,EAAsBpqK,UAAUomC,YAAc,WAC1CvoB,KAAK2E,mBAAqB,GAAIkhJ,IAAwB7lJ,KAAKzV,QAC3DyV,KAAKyC,gBAAkB,GAAIqpH,IAAuB9rH,KAAKzV,OAAQyV,KAAKwsJ,YACpExsJ,KAAKyC,gBAAgBylC,OAASloC,KAAKwsJ,WAAWp9J,WAAW,mBACpD8xC,YAAY3xB,aAAWknB,QAAQk2H,mBACpC3qI,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAClCA,KAAKyC,gBAAgB4lB,SAASroB,KAAKzV,OAAOmO,cAC1CsH,KAAKwG,UAAYxG,KAAKzV,OAAOmO,aAAapS,cAAc,sBACxD,IAAIsmK,GAAU5sJ,KAAKmmJ,mBACf0G,EAAc7sJ,KAAKutD,oBACnB05F,EAAYjnJ,KAAKzV,OAAO+C,MAK5B,IAJA0S,KAAKyC,gBAAgB4E,WAAWvB,QAAU9F,KAAKyC,gBAAgBqD,QAAU9F,KAAK2mB,WAAWrgC,cAAc,cACvG0Z,KAAKyC,gBAAgB4E,WAAWvB,QAAQzc,MAAMo9F,UAAY,SAC1DzmF,KAAKyC,gBAAgB4E,WAAWgtH,oBAAoB4yB,GACpDjnJ,KAAKyC,gBAAgB4E,WAAWitH,0BAC5Bt0H,KAAKzV,OAAO0c,2BAA4B,CACxCjH,KAAKyC,gBAAgB4E,WAAW2pC,eAAiBhxC,KAAKyC,gBAAgBuuC,eAChEhxC,KAAK2mB,WAAWrgC,cAAc,qBACpC0Z,KAAKyC,gBAAgB4E,WAAWktH,qBAAqB0yB,GACrDjnJ,KAAKyC,gBAAgB4E,WAAWmtH,0BAChC,IAAIs4B,GAAMD,EAAYvmK,cAAc,QACpC0Z,MAAKyC,gBAAgB4E,WAAW0lJ,aAAeD,EAC/C9sJ,KAAKyC,gBAAgB4E,WAAWE,eAAezb,YAAYghK,GAC3DD,EAAY/gK,YAAYkU,KAAKyC,gBAAgB4E,WAAWE,gBACxDslJ,EAAY/gK,YAAYkU,KAAKyC,gBAAgB4E,WAAWotH,oBAE5Dz0H,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY8gK,GACpD5sJ,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY+gK,GACpD7sJ,KAAKyC,gBAAgB4E,WAAWpa,MAAQ+S,KAAK6oB,WAC7CtiB,GAAYvG,KAAKzV,OAAQyV,KAAKyC,gBAAiBzC,KAAKwG,UAAWxG,KAAKutD,sBAKxEg/F,EAAsBpqK,UAAUmiB,cAAgB,SAAU5iB,EAAQ8iB,EAAUxhB,GACxEshB,GAActE,KAAKyC,gBAAiBzC,KAAKuE,aAAc7iB,EAAQ8iB,EAAUxhB,IAK7EupK,EAAsBpqK,UAAU2gB,aAAe,SAAUxgB,EAAMoiB,GAI3D,MAHK1E,MAAK8E,mBACN9E,KAAK8E,iBAAmBxiB,GAErBwgB,GAAa9C,KAAKyC,gBAAiBngB,EAAMoiB,EAAY1E,KAAK2E,mBAAoB3E,KAAKzV,SAK9FgiK,EAAsBpqK,UAAUgvC,cAAgB,SAAUrpC,GACtD,MAAOkY,MAAKyC,gBAAgB0uB,cAAcrpC,IAK9CykK,EAAsBpqK,UAAUovC,qBAAuB,SAAUzpC,GAC7D,MAAOkY,MAAKyC,gBAAgB4wH,4BAA4BvrI,IAE5DykK,EAAsBpqK,UAAU2hB,YAAc,SAAUrH,GACpD,MAAOqH,IAAYrH,EAAWuD,KAAKyC,gBAAiBzC,KAAKzV,SAK7DgiK,EAAsBpqK,UAAU4sC,eAAiB,WAC7C,MAAO/uB,MAAK8D,YAAY,YAK5ByoJ,EAAsBpqK,UAAUsoC,QAAU,WACtC,MAAOzqB,MAAK8D,YAAY,gBAK5ByoJ,EAAsBpqK,UAAUgnC,YAAc,WAC1C,GAAI6jI,GAAOhtJ,KAAKzV,OAAO67B,0BACvB,OAAOpmB,MAAKyF,UAAYunJ,EAAK1mK,cAAc,YAAc0Z,KAAKqG,UAKlEkmJ,EAAsBpqK,UAAU0iB,uBAAyB,SAAU3V,GAC/D,MAAO2V,IAAuB3V,EAAM8Q,KAAKyC,gBAAiBzC,KAAKzV,OAAQyV,KAAK2E,mBAAoB3E,KAAK8E,mBAEzGynJ,EAAsBpqK,UAAUsjB,QAAU,WACtC,MAAOA,IAAQzF,KAAKyC,kBAExB8pJ,EAAsBpqK,UAAU0jB,eAAiB,WAC7C,MAAOA,IAAe7F,KAAKyC,gBAAiBzC,KAAKzV,SAErDgiK,EAAsBpqK,UAAU6jB,uBAAyB,WACrD,MAAOA,IAAuBhG,KAAKyC,gBAAiBzC,KAAKzV,SAE7DgiK,EAAsBpqK,UAAU+jB,iBAAmB,SAAU/iB,GACzD,MAAO+iB,IAAiB/iB,EAAS6c,KAAKzV,SAK1CgiK,EAAsBpqK,UAAUogE,oBAAsB,SAAUz6D,GAC5D,MAAOkY,MAAKyC,gBAAgB8/C,oBAAoBz6D,IAOpDykK,EAAsBpqK,UAAUgkB,YAAc,SAAUC,GACpD,MAAOD,IAAYC,EAAUpG,KAAKyC,gBAAiBzC,OAEhDusJ,GACTzG,IAMEmH,GAA0C,SAAUjrI,GAEpD,QAASirI,GAAyB1iK,EAAQiY,GACtC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAElD,OADA0I,GAAM8jJ,WAAahqJ,EACZkG,EAgCX,MApCA8W,IAAUytI,EAA0BjrI,GASpCirI,EAAyB9qK,UAAUomC,YAAc,WAC7CvoB,KAAK2sJ,mBAAqB,GAAI34B,IAAsBh0H,KAAKzV,OAAQyV,KAAKwsJ,YACtExsJ,KAAK2sJ,mBAAmB14B,IAAIzI,oBAC5BxrH,KAAKzV,OAAOwpF,uBAAuB/zE,KAAK2sJ,mBAAmB14B,IAAI9I,iBAAiBnrH,KAAK2mB,WAChFrgC,cAAc,sBACnB0Z,KAAK2sJ,mBAAmBtlJ,WAAWvB,QAAU9F,KAAK2mB,WAAWrgC,cAAc,oBAC3E0Z,KAAK2sJ,mBAAmBtlJ,WAAWgtH,sBACnCr0H,KAAK2sJ,mBAAmBtlJ,WAAWitH,0BAC/Bt0H,KAAKzV,OAAO0c,6BACZjH,KAAK2sJ,mBAAmBtlJ,WAAW2pC,eAAiBhxC,KAAK2mB,WAAWrgC,cAAc,oBAClF0Z,KAAK2sJ,mBAAmBtlJ,WAAWktH,uBACnCv0H,KAAK2sJ,mBAAmBtlJ,WAAWmtH,4BAEvCxyG,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAClCA,KAAK2sJ,mBAAmBtkI,SAASroB,KAAKzV,OAAO+Y,qBAEjD2pJ,EAAyB9qK,UAAUqlK,YAAc,WAC7CxnJ,KAAKotB,kBAAkBthC,YAAYkU,KAAK6oB,YACxC7oB,KAAK2sJ,mBAAmBtlJ,WAAWC,QAAQxb,YAAYkU,KAAKotB,mBACxDptB,KAAKzV,OAAO0c,2BACZjH,KAAK2sJ,mBAAmBtlJ,WAAWE,eAAezb,YAAYkU,KAAKg2B,iBAAajpC,GAAW,YAG3FiT,KAAK4tD,mBAAmB9hE,YAAYkU,KAAK+1B,eAE7C/1B,KAAK2sJ,mBAAmBtlJ,WAAWC,QAAQxb,YAAYkU,KAAK4tD,qBAEzDq/F,GACT5F,IAsOE6F,GAA6C,SAAUlrI,GAEvD,QAASkrI,GAA4B3iK,EAAQiY,GACzC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAUlD,OARA0I,GAAMhF,UAENgF,EAAM/E,WAEN+E,EAAMjF,YACNiF,EAAM8jJ,WAAahqJ,EACnBkG,EAAMqkH,cAAc,MACpBrkH,EAAMnG,kBAAoB,GAAIwb,IAAkBrV,EAAMne,QAC/Cme,EA4LX,MAxMA8W,IAAU0tI,EAA6BlrI,GAcvCkrI,EAA4B/qK,UAAUmqB,eAAiB,SAAUpd,GAC7D,GAAyB,WAArBA,EAAKkT,aAA4BpC,KAAKzV,OAAOuU,WAC7C,IAAK,GAAIrb,GAAI,EAAGA,EAAIuc,KAAKzV,OAAOuU,WAAYrb,IAAK,CAC7C,IAAIuc,KAAKyC,gBAAgBO,WAAWG,iBAAiB,GAGhD,CACDnD,KAAKyC,gBAAgBO,WAAWG,iBAAiB,GAAKnD,KAAK0D,OAAOtgB,OAAS4c,KAAK0D,OAAS1D,KAAK2D,OAC9F,OAJA3D,KAAKyC,gBAAgBO,WAAWG,iBAAiB,GAAG1f,GAAKuc,KAAK0D,OAAOtgB,OAAS4c,KAAK0D,OAAOjgB,GAAKuc,KAAK2D,QAAQlgB,GAMhH6iB,GAAStG,KAAMvc,KAI3BypK,EAA4B/qK,UAAU4qI,cAAgB,SAAUl+H,GAC5DmR,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAKsM,eAAe+G,KAAKrT,OAC7EA,KAAKzV,OAAOsE,GGrBkB,6BHqBuBmR,KAAKysJ,yBAA0BzsJ,MACpFA,KAAKzV,OAAOsE,GAAQ+jI,GAAuB5yH,KAAKmP,eAAgBnP,MAChEA,KAAKzV,OAAOsE,GGjCY,uBHiCuBmR,KAAK+D,mBAAoB/D,OAE5EktJ,EAA4B/qK,UAAUsqK,yBAA2B,SAAUv9J,GACvE,GAAIwZ,GAAQ1I,IACZ,IAAyB,WAArB9Q,EAAKkT,aAA4BpC,KAAKzV,OAAOuU,WAAY,CACzD5P,EAAK0U,oBAAqB,CAC1B,IAAI/R,GAAQmO,KAAKzV,OAAO6Q,aAAa9Y,KAAKkvB,eAAc,GAAMG,OAC9D9f,GAAMuT,KAAK,EAAGpF,KAAKzV,OAAO8K,aAAaE,SACvC,IAAI43J,GAAgBntJ,KAAKzV,OAAO2xB,uBAChClc,MAAKzV,OAAO6Q,aAAa9Y,KAAK0uB,WAAYnf,GAAO6kB,KAAK,SAAU1zB,GAC5Dqf,GAAiBnT,EAAMlM,EAAE0C,OAAQynK,EAAezkJ,EAAMne,OAAQme,EAAMnG,kBAAmBmG,EAAM8jJ,WAAY9jJ,EAAMjG,gBAAiBiG,OAI5IwkJ,EAA4B/qK,UAAU4hB,mBAAqB,SAAU7U,GACjE6U,GAAmB7U,EAAM8Q,KAAKyC,kBAElCyqJ,EAA4B/qK,UAAUgtB,eAAiB,SAAU7sB,GAC7D0d,KAAKyC,gBAAgB0M,eAAe7sB,IAExC4qK,EAA4B/qK,UAAUwrC,sBAAwB,SAAU3qC,EAAGyZ,GACvEzZ,EAAE+f,qBAAuB/C,KAAKzV,OAAOmS,qBAAqC,gBAAdD,EAA4C,iBAAdA,EAC1FzZ,EAAEkgB,yBAA2D,eAAhClD,KAAKzV,OAAO8R,iBAAkD,YAAdI,GACzEzZ,EAAE+f,sBAAwB/f,EAAEkgB,2BAC5BlD,KAAK4nB,mBAAmB3gC,YAAWjE,KAM3CkqK,EAA4B/qK,UAAUomC,YAAc,WAChDvoB,KAAKyC,gBAAkB,GAAIqpH,IAAuB9rH,KAAKzV,OAAQyV,KAAKwsJ,YACpExsJ,KAAKyC,gBAAgBylC,OAASloC,KAAKwsJ,WAAWp9J,WAAW,mBACpD8xC,YAAY3xB,aAAWknB,QAAQk2H,mBACpC3sJ,KAAK2E,mBAAqB,GAAIkhJ,IAAwB7lJ,KAAKzV,QAC3Dy3B,EAAO7/B,UAAUomC,YAAYj9B,KAAK0U,MAClCA,KAAKyC,gBAAgB4lB,SAASroB,KAAKzV,OAAOmO,cAC1CsH,KAAKwG,UAAYxG,KAAKzV,OAAOmO,aAAapS,cAAc,sBACxD,IAAI8mK,GAAkBptJ,KAAK0hD,wBACvBkrG,EAAU5sJ,KAAKmmJ,mBACf0G,EAAc7sJ,KAAKutD,mBACa,WAAhCvtD,KAAKzV,OAAO8R,kBACZuwJ,EAAUQ,GAEdptJ,KAAKyC,gBAAgB4E,WAAWvB,QAAU9F,KAAKyC,gBAAgBqD,QAAU9F,KAAK2mB,WAAWrgC,cAAc,cACvG0Z,KAAKyC,gBAAgB4E,WAAWvB,QAAQzc,MAAMo9F,UAAY,QAC1D,IAAIwgE,GAAYjnJ,KAAKzV,OAAO+C,MAC5B0S,MAAKyC,gBAAgB4E,WAAWgtH,oBAAoB4yB,GACpDjnJ,KAAKyC,gBAAgB4E,WAAWitH,0BAChCt0H,KAAKqtJ,wBAAwBT,EAASC,GACtC7sJ,KAAKstJ,yBAAyBV,EAASC,GACvC7sJ,KAAKutJ,6BAA6BX,EAASC,EAAaO,GACxDptJ,KAAKyC,gBAAgB4E,WAAWpa,MAAQ+S,KAAK6oB,WAC7CtiB,GAAYvG,KAAKzV,OAAQyV,KAAKyC,gBAAiBzC,KAAKwG,UAAWxG,KAAKutD,sBAExE2/F,EAA4B/qK,UAAUkrK,wBAA0B,SAAUT,EAASC,GAC3C,SAAhC7sJ,KAAKzV,OAAO8R,kBACZ2D,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY8gK,GACpD5sJ,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY+gK,KAG5DK,EAA4B/qK,UAAUmrK,yBAA2B,SAAUV,EAASC,GAC5C,UAAhC7sJ,KAAKzV,OAAO8R,kBACZ2D,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY+gK,GACpD7sJ,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY8gK,KAG5DM,EAA4B/qK,UAAUorK,6BAA+B,SAAUX,EAASC,EAAaO,GAC7D,eAAhCptJ,KAAKzV,OAAO8R,kBACZ2D,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY8gK,GACpD5sJ,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAY+gK,GACpD7sJ,KAAKyC,gBAAgB4E,WAAWC,QAAQxb,YAAYshK,KAM5DF,EAA4B/qK,UAAUmiB,cAAgB,SAAU5iB,EAAQ8iB,EAAUxhB,GAC9EshB,GAActE,KAAKyC,gBAAiBzC,KAAKuE,aAAc7iB,EAAQ8iB,EAAUxhB,GACzEgd,KAAKgmJ,uBAKTkH,EAA4B/qK,UAAU2gB,aAAe,SAAUxgB,EAAMU,GAIjE,MAHKgd,MAAK8E,mBACN9E,KAAK8E,iBAAmBxiB,GAErBwgB,GAAa9C,KAAKyC,gBAAiBngB,EAAMU,EAAGgd,KAAK2E,mBAAoB3E,KAAKzV,SAKrF2iK,EAA4B/qK,UAAUgvC,cAAgB,SAAUrpC,GAC5D,MAAOkY,MAAKyC,gBAAgB0uB,cAAcrpC,IAK9ColK,EAA4B/qK,UAAUw/D,yBAA2B,SAAU75D,GACvE,MAAOkY,MAAKyC,gBAAgB6wH,gCAAgCxrI,IAEhEolK,EAA4B/qK,UAAU2hB,YAAc,SAAUrH,GAC1D,MAAOqH,IAAYrH,EAAWuD,KAAKyC,gBAAiBzC,KAAKzV,SAK7D2iK,EAA4B/qK,UAAUovC,qBAAuB,SAAUzpC,GACnE,MAAOkY,MAAKyC,gBAAgB4wH,4BAA4BvrI,IAK5DolK,EAA4B/qK,UAAUmlE,mBAAqB,WACvD,MAAOtnD,MAAK8D,YAAY,iBAK5BopJ,EAA4B/qK,UAAU4sC,eAAiB,WACnD,MAAO/uB,MAAK8D,YAAY,YAK5BopJ,EAA4B/qK,UAAUgnC,YAAc,WAChD,GAAI6jI,GAAOhtJ,KAAKzV,OAAO67B,0BACvB,OAAO3gB,IAAQzF,KAAKyC,iBAAmBuqJ,EAAK1mK,cAAc,YAAc0Z,KAAKqG,UAKjF6mJ,EAA4B/qK,UAAUsoC,QAAU,WAC5C,MAAOzqB,MAAK8D,YAA4C,UAAhC9D,KAAKzV,OAAO8R,gBAA8B,eAAiB,gBAKvF6wJ,EAA4B/qK,UAAU0iB,uBAAyB,SAAU3V,GACrE,MAAO2V,IAAuB3V,EAAM8Q,KAAKyC,gBAAiBzC,KAAKzV,OAAQyV,KAAK2E,mBAAoB3E,KAAK8E,mBAEzGooJ,EAA4B/qK,UAAU0jB,eAAiB,WACnD,MAAOA,IAAe7F,KAAKyC,gBAAiBzC,KAAKzV,SAErD2iK,EAA4B/qK,UAAUsjB,QAAU,WAC5C,MAAOA,IAAQzF,KAAKyC,kBAExByqJ,EAA4B/qK,UAAU6jB,uBAAyB,WAC3D,MAAOA,IAAuBhG,KAAKyC,gBAAiBzC,KAAKzV,SAK7D2iK,EAA4B/qK,UAAUogE,oBAAsB,SAAUz6D,GAClE,MAAOkY,MAAKyC,gBAAgB8/C,oBAAoBz6D,IAEpDolK,EAA4B/qK,UAAU+jB,iBAAmB,SAAU/iB,GAC/D,MAAO+iB,IAAiB/iB,EAAS6c,KAAKzV,SAO1C2iK,EAA4B/qK,UAAUgkB,YAAc,SAAUC,GAC1D,MAAOD,IAAYC,EAAUpG,KAAKyC,gBAAiBzC,OAEhDktJ,GACT3B,IkGnpBEiC,GAAwB,WACxB,QAASA,GAAOjjK,EAAQiY,GACpBxC,KAAKzV,OAASA,EACdyV,KAAKwC,QAAUA,EACfxC,KAAKghC,mBAsCT,MApCAwsH,GAAOrrK,UAAUguB,cAAgB,WAC7B,MAAO,UAEXq9I,EAAOrrK,UAAU6+C,iBAAmB,WAC5BhhC,KAAKzV,OAAO2lB,aAGhBlQ,KAAKzV,OAAO6lB,GAAG41B,GAAoBhmC,KAAK4lC,oBAAqB5lC,OAEjEwtJ,EAAOrrK,UAAUyjD,oBAAsB,WACnC5lC,KAAKzV,OAAOyoB,IAAI,aAAchT,KAAKmQ,gBACnC,IAAI4wB,GAAW/gC,KAAKwC,QAAQpT,WAAW,kBACnC4Q,MAAKzV,OAAOuL,qBACZkK,KAAKzV,OAAO0c,2BACR85B,EAAS8E,YAAYt2B,aAAWknB,OAAQ,GAAIw2H,IAAyBjtJ,KAAKzV,OAAQyV,KAAKwC,UACrFu+B,EAAS8E,YAAYt2B,aAAWknB,OAAQ,GAAI4wH,IAAarnJ,KAAKzV,OAAQyV,KAAKwC,UACjFxC,KAAKzV,OAAO8J,qBACR0sC,EAAS8E,YAAYt2B,aAAW6xB,QAAS,GAAImrH,IAAsBvsJ,KAAKzV,OAAQyV,KAAKwC,UACnFu+B,EAAS8E,YAAYt2B,aAAW6xB,QAAS,GAAI0kH,IAAoB9lJ,KAAKzV,OAAQyV,KAAKwC,YAEzFxC,KAAKzV,OAAO0lC,6BAA+BjwB,KAAKzV,OAAOsS,gCACvDkkC,EAAS8E,YAAYt2B,aAAWknB,OAAQ,GAAIkzH,IAA2B3pJ,KAAKzV,OAAQyV,KAAKwC,UACzFxC,KAAKzV,OAAO8J,qBACN0sC,EAAS8E,YAAYt2B,aAAW6xB,QAAS,GAAI8rH,IAA4BltJ,KAAKzV,OAAQyV,KAAKwC,UAC3Fu+B,EAAS8E,YAAYt2B,aAAW6xB,QAAS,GAAImqH,IAA4BvrJ,KAAKzV,OAAQyV,KAAKwC,YAGzGgrJ,EAAOrrK,UAAU8rD,oBAAsB,WAC/BjuC,KAAKzV,OAAO2lB,aAGhBlQ,KAAKzV,OAAOstB,IAAImuB,GAAoBhmC,KAAK4lC,sBAE7C4nH,EAAOrrK,UAAU0rB,QAAU,WACvB7N,KAAKiuC,uBAEFu/G,KCpCPC,GAA4B,WAC5B,QAASA,GAAWljK,EAAQyE,GACxBgR,KAAK+iJ,gBACL/iJ,KAAKijJ,WAAajjJ,KAAKkjJ,eACvBljJ,KAAKukH,gBACLvkH,KAAKgjJ,eACLhjJ,KAAK8oC,QAAS,EAEd9oC,KAAK0tJ,MAAQ,eACb1tJ,KAAK2tJ,QAAU,iBACf3tJ,KAAK4tJ,UAAY,mBACjB5tJ,KAAK6tJ,WAAa,oBAClB7tJ,KAAK8tJ,KAAO,eACZ9tJ,KAAK+tJ,OAAS,gBACd/tJ,KAAKguJ,IAAM,iBACXhuJ,KAAKiuJ,KAAO,aACZjuJ,KAAKkuJ,QAAU,YACfluJ,KAAKzV,OAASA,EACdyV,KAAKiiH,OAAS13H,EAAOK,QAAQJ,GAC7BwV,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBAiiBT,MA/hBAysH,GAAWtrK,UAAUu+D,WAAa,WAE9B,IAAK,GADD71D,GAAWmV,KAAKmuJ,wBACX1qK,EAAI,EAAGA,EAAIoH,EAASzH,OAAQK,IACjCmmD,eAAa96C,IAAIjE,EAASpH,GAAI,YAAauc,KAAKouJ,sBAAuBpuJ,OAG/EytJ,EAAWtrK,UAAU4tF,aAAe,WAEhC,IAAK,GADDllF,GAAWmV,KAAKmuJ,wBACX1qK,EAAI,EAAGA,EAAIoH,EAASzH,OAAQK,IACjCmmD,eAAa/nD,OAAOgJ,EAASpH,GAAI,YAAauc,KAAKouJ,wBAQ3DX,EAAWtrK,UAAU0rB,QAAU,WAC3B,GAAIozC,GAAcjhD,KAAKzV,OAAOK,OACzBq2D,KAAiBA,EAAY36D,cAAc,kBAAqB26D,EAAY36D,cAAc,qBAG/F0Z,KAAKquJ,WAAWxgJ,UAChB7N,KAAKiuC,sBACLjuC,KAAKsuJ,qBACLtuJ,KAAK+vE,eACLluF,SAAOme,KAAKpV,WAEhB6iK,EAAWtrK,UAAUosK,uBAAyB,SAAUvrK,GAChDA,EAAEtB,OAAO+I,UAAUC,SAAS,kBAC5BsV,KAAKquJ,WAAW1pK,MAAQqb,KAAKujH,WAC7BvjH,KAAKquJ,WAAWtpH,WACX/kC,KAAK8oC,QAAU9oC,KAAKu2D,aAAev2D,KAAKwuJ,cAAcxrK,IAAOmD,SAASG,cAAc,qCACrF0Z,KAAKquJ,WAAW/hH,QAChBtsC,KAAKyuJ,eAAezrK,IAEdgd,KAAK8oC,OAIX9oC,KAAKquJ,WAAW/hH,QAHhBtsC,KAAKyuJ,eAAezrK,KAQhCyqK,EAAWtrK,UAAUusK,sBAAwB,SAAUrsK,GACnD2d,KAAKyuJ,gBAAiB/sK,OAAQse,KAAKzV,OAAOurF,uBAAuBzzF,GAAOiE,cAAc,oBAE1FmnK,EAAWtrK,UAAUssK,eAAiB,SAAUzrK,GAC5C,GAAIuuG,IAAQ7nG,IAAK,EAAGC,KAAM,EAC1BqW,MAAKpV,QAAQvB,MAAMqD,QAAU,iCAC7B,IAAIiiK,GAAS3uJ,KAAKpV,QAAQzB,uBAC1B6W,MAAKpV,QAAQvB,MAAMqD,QAAU,kCAC7BsT,KAAKu2D,WAAav2D,KAAKwuJ,cAAcxrK,GACjC2X,UAAQ44C,UACRg+C,EAAI7nG,IAAQjB,OAAOwwD,YAAc,EAAM01G,EAAOrhK,OAAS,EACvDikG,EAAI5nG,KAASlB,OAAOqwD,WAAa,EAAM61G,EAAOjmK,MAAQ,GAGlDsX,KAAKzV,OAAO2X,UACZqvF,EAAMq9D,oBAAkB5uJ,KAAKu2D,WAAY,OAAQ,WAGjDg7B,EAAMq9D,oBAAkB5uJ,KAAKu2D,WAAY,QAAS,WAC9C5sE,MAAQglK,EAAOjmK,MAG3BsX,KAAKquJ,WAAWniH,KAAKqlD,EAAI7nG,IAAK6nG,EAAI5nG,MAC9B3G,EAAE8yD,gBACF9yD,EAAE8yD,iBAEN/9C,GAAiBiI,KAAKzV,OAAOK,QAASoV,KAAKquJ,WAAWzjK,QAAQ1B,gBAElEukK,EAAWtrK,UAAUisK,sBAAwB,SAAUprK,GACnDgd,KAAK8oC,SAA0C,SAA/B9oC,KAAKpV,QAAQvB,MAAMC,SAAqD,KAA/B0W,KAAKpV,QAAQvB,MAAMC,UAEhFmkK,EAAWtrK,UAAUgsK,sBAAwB,WACzC,SAAU9iK,MAAMC,KAAK0U,KAAKzV,OAAO2+B,iBAAiB9iC,iBAAiB,IAAM4Z,KAAK8tJ,QAKlFL,EAAWtrK,UAAU6+C,iBAAmB,WAChChhC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GAAGslB,GAAwB11B,KAAK0gD,WAAY1gD,MACxDA,KAAKzV,OAAO6lB,GAAGqX,GAAiBznB,KAAKmjJ,sBAAuBnjJ,MAC5DA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAKuD,OAAQvD,MAC3CA,KAAK6uJ,qBACL7uJ,KAAKzV,OAAO6lB,GhGyLS,sBgGzLsBpQ,KAAK8uJ,eAAgB9uJ,MAEpEA,KAAKzV,OAAO6lB,GAAG0nD,GAAc93D,KAAKuuJ,uBAAwBvuJ,MAC1DA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKk9E,gBAAiBl9E,QAK5DytJ,EAAWtrK,UAAU8rD,oBAAsB,WACnCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAI6d,GAAwB11B,KAAK+vE,cAC7C/vE,KAAKzV,OAAOstB,IAAI4P,GAAiBznB,KAAKmjJ,uBACtCnjJ,KAAKzV,OAAOstB,IAAImd,GAAmBh1B,KAAKuD,QACpCvD,KAAK6uJ,qBACL7uJ,KAAKzV,OAAOstB,IhGyKS,sBgGzKuB7X,KAAK8uJ,gBAErD9uJ,KAAKzV,OAAOstB,IAAIigD,GAAc93D,KAAKuuJ,wBACnCvuJ,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKk9E,mBAE5CuwE,EAAWtrK,UAAU+6F,gBAAkB,SAAUl6F,GAC7C,GAAIM,GAAO0c,KAAKzV,MAChB,IAAiB,iBAAbvH,EAAE6L,OAA2B,CAC7B,GAAIjE,GAAUtH,EAAKu6D,YAAYn4C,YAAY9a,OAC3C,IAAIA,GAAWA,EAAQH,UAAUC,SAAS,gBAAiB,CACvD,GAAInI,GAASe,EAAKywC,eAAenpC,EAAQ+N,kBAAkB+xB,aAAa,gBACxE1qB,MAAK0uJ,sBAAsBnsK,EAAOF,UAI9CorK,EAAWtrK,UAAUghK,sBAAwB,SAAUngK,GAC/CA,EAAEwuC,SAAWxxB,KAAKmQ,iBAAmBntB,EAAEyuC,SACnCzxB,KAAKquJ,aACLruJ,KAAKquJ,WAAWxgJ,UAChBhsB,SAAOme,KAAKpV,UAEhBoV,KAAKuD,WAGbkqJ,EAAWtrK,UAAUohB,OAAS,WAC1BvD,KAAK8gC,KAAO9gC,KAAKhR,eAAeI,WAAW,gBAC3C4Q,KAAKpV,QAAUoV,KAAKzV,OAAOkC,cAAc,MAAQjC,GAAIwV,KAAKiiH,OAAS,cAAen5H,UAAW,cAC7FkX,KAAKpV,QAAQ7I,aAAa,aAAcie,KAAK8gC,KAAKvE,YAAY,yBAC9Dv8B,KAAKzV,OAAOK,QAAQkB,YAAYkU,KAAKpV,SACrCoV,KAAKquJ,WAAa,GAAIrnD,gBAClB/pF,SAAU,cACV/a,UAAWlC,KAAKzV,OAAO2X,UACvBq1B,kBAAmBv3B,KAAKzV,OAAOgtC,kBAC/ByU,OAAQhsC,KAAKzV,OAAOyhD,OACpBrnD,MAAOqb,KAAKujH,WACZh1H,OAAQyR,KAAK+uJ,oBAAoB17I,KAAKrT,MACtCuiG,WAAYviG,KAAKgvJ,qBAAqB37I,KAAKrT,MAC3C0jJ,OAAQ1jJ,KAAKivJ,iBAAiB57I,KAAKrT,MACnCkxF,QAASlxF,KAAKkvJ,kBAAkB77I,KAAKrT,MACrCmvJ,iBAAkBnvJ,KAAKovJ,qBAAqB/7I,KAAKrT,MACjDmxF,YAAanxF,KAAKqvJ,sBAAsBh8I,KAAKrT,QAEjDA,KAAKquJ,WAAW5zH,SAASz6B,KAAKpV,SAC9BoV,KAAKsvJ,oBAET7B,EAAWtrK,UAAUmtK,iBAAmB,YAC/B30J,UAAQ44C,UAAYvzC,KAAK6uJ,qBAC1BjlH,eAAa96C,IAAIkR,KAAKpV,QAAS,YAAaoV,KAAKuvJ,aAAcvvJ,OAGvEytJ,EAAWtrK,UAAUmsK,mBAAqB,YACjC3zJ,UAAQ44C,UAAYvzC,KAAK6uJ,qBAC1BjlH,eAAa/nD,OAAOme,KAAKpV,QAAS,YAAaoV,KAAKuvJ,eAG5D9B,EAAWtrK,UAAUitK,qBAAuB,SAAUlgK,GAClD,GAAI8Q,KAAKwvJ,cAActgK,EAAKksB,MAAO,CAC/B,GAAIq0I,GAAUzvJ,KAAKqkJ,aAAan1J,EAAKksB,KAAK5wB,GAAIwV,KAAKkuJ,SAC/C3rK,EAASyd,KAAKzV,OAAO3C,YAAY0R,OAAO,SAAUvL,GAAO,MAAOA,GAAI1L,QAAUotK,IAC9EvlE,EAAQttD,iBAAe58B,KAAKzV,OAAOkC,eAAe,GAClDowC,MAAO3tC,EAAKksB,KAAKvQ,KACjB9Z,QAASxO,EAAO,GAAGoG,SAEnBqX,MAAKzV,OAAO2X,WACZgoF,EAAMz/F,UAAUqE,IAAI,SAExBI,EAAKtE,QAAQrE,UAAY,GACzB2I,EAAKtE,QAAQkB,YAAYo+F,OAEpBh7F,GAAKksB,KAAK5wB,IAA0C,WAApCwV,KAAKqkJ,aAAan1J,EAAKksB,KAAK5wB,MACjD0E,EAAKtE,QAAQkB,YAAYkU,KAAKzV,OAAOkC,cAAc,QAAU3D,UAAW,qBACxEoG,EAAKtE,QAAQ9B,WAAa,oCAGlC2kK,EAAWtrK,UAAUktK,sBAAwB,SAAUngK,GACnD,GAAIwgK,GAAaxgK,EAAKmlC,MAAQh8B,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,gBAAkB,MACtEc,oBAAkB0M,EAAK41J,aACkB,kBAA1C9kJ,KAAKqkJ,aAAan1J,EAAK41J,WAAWt6J,KAClCklK,GAAc1vJ,KAAKwvJ,cAAcE,GACjCxgK,EAAK+3B,QAAS,EAET/3B,EAAKmlC,QAAUh8B,UAAQnJ,EAAKmlC,MAAM3yC,OAAQ,IAAMse,KAAKguJ,MACtD9+J,EAAKmlC,MAAMyjE,eAAiB5oG,EAAKmlC,MAAMyjE,cAAc9hD,eACrD7rD,EAAa+E,EAAKmlC,MAAMyjE,cAAc9hD,cAAe,mBACtD7rD,EAAa+E,EAAKmlC,MAAM3yC,OAAQ,YAClCyI,EAAa+E,EAAKmlC,MAAM3yC,OAAQ,sBAAyBiZ,UAAQ44C,WAClErkD,EAAK+3B,QAAS,IAGtBwmI,EAAWtrK,UAAUqtK,cAAgB,SAAUp0I,GAC3C,MAAOA,GAAK5wB,IAAM4wB,EAAK5wB,GAAG9C,QAAQ,cAAgB,IACqB,IAAnEsY,KAAKqkJ,aAAajpI,EAAK5wB,GAAIwV,KAAKkuJ,SAASxmK,QAAQ,cAEzD+lK,EAAWtrK,UAAU6sK,qBAAuB,SAAU9/J,GAClDA,EAAK3M,OAASyd,KAAKskJ,aAAetkJ,KAAK4+I,YACvC5+I,KAAKzV,OAAOotB,QhGsEQ,iBgGtEuBzoB,EAC3C,KAAK,GAAIW,GAAK,EAAGkG,EAAK7G,EAAKvK,MAAOkL,EAAKkG,EAAG3S,OAAQyM,IAAM,CACpD,GAAIurB,GAAOrlB,EAAGlG,GACV+B,EAAMoO,KAAKqkJ,aAAajpI,EAAK5wB,IAC7By6J,EAAQjlJ,KAAK+iJ,aAAanxJ,IACe,IAAzCoO,KAAK+jJ,kBAAkBr8J,QAAQkK,IAAeoO,KAAKklJ,qBAAqBtzJ,KAASqzJ,EAAMpsF,MACvF74D,KAAKukH,aAAargI,KAAKk3B,EAAKvQ,MAE5BuQ,EAAKy9C,MACL74D,KAAKgjJ,YAAY9+J,KAAKk3B,EAAKvQ,MAGnC7K,KAAKquJ,WAAWj1E,YAAYp5E,KAAKukH,cAAc,GAC/CvkH,KAAKquJ,WAAWjJ,UAAUplJ,KAAKgjJ,cAEnCyK,EAAWtrK,UAAU8sK,iBAAmB,SAAU//J,GACf,wBAA3BA,EAAKtE,QAAQ9B,YACToG,EAAKtE,QAAQnB,aAAehB,OAAOwwD,aACnC/pD,EAAKtE,QAAQvB,MAAM6hD,UAAmC,GAAtBziD,mBAA4B,KAC5DyG,EAAKtE,QAAQvB,MAAM+gC,UAAY,QAE1BpqB,KAAKzV,OAAOK,QAAQnB,aAAehB,OAAOwwD,cAC/C/pD,EAAKtE,QAAQvB,MAAM6hD,UAAmC,GAAtBziD,mBAA4B,KAC5DyG,EAAKtE,QAAQvB,MAAM+gC,UAAY,UAI3CqjI,EAAWtrK,UAAU+iK,qBAAuB,SAAU9pI,GAClD,GAAIyiD,IAAS,CACb,QAAQziD,GACJ,IAAK,UACIpb,KAAKzV,OAAOwe,eAAkB/I,KAAKzV,OAAO02F,qBAAqB9W,KAAUnqE,KAAKskJ,cAC5EtkJ,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQsY,KAAKskJ,aAAajiK,QAAU,GACzE2d,KAAKskJ,eAAiBtkJ,KAAKskJ,aAAav7I,iBACxC80D,GAAS,EAEb,MACJ,KAAK,aACL,IAAK,UACDA,GAAU79D,KAAKzV,OAAO02F,qBAAqB+rB,GAC3C,MACJ,KAAK,YACIhtG,KAAKzV,OAAO02F,qBAAqB9W,KAAWnqE,KAAKzV,OAAO02F,qBAAqB9W,KAAUnqE,KAAKskJ,cAC1FtkJ,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQsY,KAAKskJ,aAAajiK,OAAS,KACxEw7E,GAAS,EAEb,MACJ,KAAK,iBACL,IAAK,gBACD,GAAI79D,KAAKzV,OAAOqe,cAAgB5I,KAAKzV,OAAO02F,qBAAqBhU,KAC1DjtE,KAAKzV,OAAO+oB,aAAanwB,QAAQC,OAAS,GAAK4c,KAAKskJ,cAAgBtkJ,KAAKskJ,aAAa17I,aAEzF,IAAK,GADDiwF,GAAc74F,KAAKzV,OAAO+oB,aAAanwB,QAClCM,EAAI,EAAGA,EAAIo1G,EAAYz1G,OAAQK,IAChCo1G,EAAYp1G,GAAGpB,QAAU2d,KAAKskJ,aAAajiK,OACxCw2G,EAAYp1G,GAAG8nB,UAAUy4I,sBAAwB5oI,EAAK4oI,oBAAoBp2J,QAAQ,OAAQ,MAC7FiwE,GAAS,SAIX79D,KAAKzV,OAAOqe,eAAiB5I,KAAKzV,OAAO02F,qBAAqBhU,KACpEjtE,KAAKzV,OAAOqe,cAAgB5I,KAAKskJ,eAAiBtkJ,KAAKskJ,aAAa17I,gBACpEi1D,GAAS,EAEb,MACJ,KAAK,SACG79D,KAAKzV,OAAOue,gBAAuD,cAApC9I,KAAKzV,OAAOoqB,eAAehxB,MACvDqc,KAAKzV,OAAO02F,qBAAqBrkE,KAAW5c,KAAKskJ,cAAgBtkJ,KAAKskJ,aAAax7I,eACtF+0D,GAAS,EAEJ79D,KAAKzV,OAAO02F,qBAAqBrkE,KAAW5c,KAAKzV,OAAOue,gBAC1D9I,KAAKskJ,gBAAkBtkJ,KAAKskJ,aAAax7I,gBAAsD,cAApC9I,KAAKzV,OAAOoqB,eAAehxB,QACzFk6E,GAAS,GAGrB,MAAOA,IAEX4vF,EAAWtrK,UAAU4sK,oBAAsB,SAAU7/J,GAEjD,OADW8Q,KAAKwvJ,cAActgK,EAAKksB,MAAQ,gBAAkBpb,KAAKqkJ,aAAan1J,EAAKksB,KAAK5wB,KAErF,IAAK,UACDwV,KAAKzV,OAAOmwF,eAAe16E,KAAKskJ,aAAajiK,MAC7C,MACJ,KAAK,aACD2d,KAAKzV,OAAOmwF,kBACZ,MACJ,KAAK,UACD16E,KAAKzV,OAAOo2F,cAAc3gF,KAAKskJ,aAAajiK,MAC5C,MACJ,KAAK,QACD2d,KAAKzV,OAAO61F,YAAYpgF,KAAKskJ,aAAajiK,MAC1C,MACJ,KAAK,gBACD2d,KAAKzV,OAAOwiD,WAAW/sC,KAAKskJ,aAAajiK,MAAO,YAChD,MACJ,KAAK,iBACD2d,KAAKzV,OAAOwiD,WAAW/sC,KAAKskJ,aAAajiK,MAAO,aAChD,MACJ,KAAK,gBACD,GAAIuP,GAAMoO,KAAKqkJ,aAAan1J,EAAKksB,KAAK5wB,GAAIwV,KAAKkuJ,SAC3ChgE,EAAWh/F,EAAKtE,QAAQtE,cAAc,+BACtC4nG,IAAYA,EAASzjG,UAAUC,SAAS,YACxCwjG,EAASzjG,UAAU5I,OAAO,WAC1Bme,KAAKzV,OAAOssF,YAAYjlF,EAAK,UAExBs8F,IACLluF,KAAKzV,OAAOqsF,YAAYhlF,EAAK,SAC7Bs8F,EAASzjG,UAAUqE,IAAI,WAE3B,MACJ,KAAK,SACDkR,KAAK2vJ,UAAUzgK,EAAKtE,QAASsE,EAAKksB,KAAK5wB,IAG/C0E,EAAK3M,OAASyd,KAAKskJ,aACnBtkJ,KAAKzV,OAAOotB,QhG9CS,kBgG8CuBzoB,IAEhDu+J,EAAWtrK,UAAU+sK,kBAAoB,SAAUhgK,GAE3CA,EAAKvK,MAAMvB,OAAS,GAAK8L,EAAKvK,MAAM,GAAS,oBAAaqiH,iBAC1DhnG,KAAKquJ,WAAWj1E,YAAYp5E,KAAKukH,cAAc,GAC/CvkH,KAAKukH,gBACLvkH,KAAKquJ,WAAWzJ,UAAU5kJ,KAAKgjJ,aAC/BhjJ,KAAKgjJ,eACDhjJ,KAAK4vJ,qBACL5vJ,KAAK2vJ,UAAUzgK,EAAKtE,QAASsE,EAAKtE,QAAQJ,IAAI,IAGjDwV,KAAKzV,OAAOsL,gBACbmK,KAAKzV,OAAOsoB,OhGwBE,qBgGrBtB46I,EAAWtrK,UAAU4hK,gBAAkB,WACnC,OAAQ,aAAc,UAAW,gBAAiB,iBAAkB,QAAS,UAAW,gBAAiB,WAE7G0J,EAAWtrK,UAAUohI,SAAW,WAG5B,IAAK,GAFD5+H,MAEKkL,EAAK,EAAGggK,EADC7vJ,KAAKzV,OAAOonF,gBAAkB3xE,KAAKzV,OAAOonF,gBAAkB3xE,KAAK8vJ,aACrCjgK,EAAKggK,EAAczsK,OAAQyM,IAAM,CAC3E,GAAIurB,GAAOy0I,EAAchgK,EACzB,IAAoB,gBAATurB,GACP,GAAa,kBAATA,EAA0B,CAC1B,GAAIrtB,GAAMiS,KAAK+vJ,eAAe30I,EAC9BrtB,GAAIpJ,MAAQqb,KAAKgwJ,qBACjBrrK,EAAMT,KAAK6J,OAGXpJ,GAAMT,KAAK8b,KAAK+vJ,eAAe30I,QAInCz2B,GAAMT,KAAKk3B,GAGnB,MAAOz2B,IAEX8oK,EAAWtrK,UAAU4tK,eAAiB,SAAU30I,GAC5C,GAAIq1E,KACJ,QAAQr1E,GACJ,IAAK,gBACDq1E,GAAaxB,QAASjvF,KAAK4tJ,UAC3B,MACJ,KAAK,iBACDn9D,GAAaxB,QAASjvF,KAAK6tJ,WAC3B,MACJ,KAAK,QACDp9D,GAAaxB,QAASjvF,KAAK0tJ,MAC3B,MACJ,KAAK,UACDj9D,GAAaxB,QAASjvF,KAAK2tJ,QAC3B,MACJ,KAAK,SACDl9D,GAAaxB,QAASjvF,KAAK+tJ,QAOnC,MAJA/tJ,MAAK+iJ,aAAa3nI,IACdvQ,KAAM7K,KAAK2kJ,cAAcvpI,GAAO5wB,GAAIwV,KAAKwlJ,WAAWpqI,GACpD6zE,QAASwB,EAASxB,QAAU,WAAawB,EAASxB,QAAU,MAEzDjvF,KAAK+iJ,aAAa3nI,IAE7BqyI,EAAWtrK,UAAUwiK,cAAgB,SAAUvpI,GAC3C,MAAOpb,MAAK8gC,KAAKvE,YAAYv8B,KAAKijJ,WAAW7nI,KAEjDqyI,EAAWtrK,UAAUqjK,WAAa,SAAUpqI,EAAM0gE,GAC9C,MAAO97E,MAAKiiH,OAAS,aAAenmC,EAASA,EAAS1gE,EAAOA,IAEjEqyI,EAAWtrK,UAAUkiK,aAAe,SAAU75J,EAAIsxF,GAC9C,MAAOtxF,GAAG9C,QAAQ,aAAe,GAC7B8C,EAAGoD,QAAQoS,KAAKiiH,OAAS,aAAenmC,GAAkB,IAAK,KAKvE2xE,EAAWtrK,UAAUovF,cAAgB,WACjC,MAAOvxE,MAAKpV,SAEhB6iK,EAAWtrK,UAAUguB,cAAgB,WACjC,MAAO,cAEXs9I,EAAWtrK,UAAU+gK,aAAe,WAChC,GAAIuC,IACAn7E,WAAc,aACdC,QAAW,UACXJ,MAAS,QACTC,QAAW,UACXS,cAAiB,gBACjBC,eAAkB,iBAClB23C,cAAiB,gBACjB7lG,OAAU,aAEd,IAAIrtB,aAAY,CAEZk2J,EAAqB,WAAI,YAEzBA,GAAkB,QAAI,UAE1B,MAAOA,IAEXgI,EAAWtrK,UAAUqsK,cAAgB,SAAUxrK,GAC3C,MAAOqV,WAAQrV,EAAEtB,OAAQ,oBAE7B+rK,EAAWtrK,UAAUy8J,UAAY,WAC7B,GAAI5+I,KAAKu2D,WAAY,CACjB,GAAI5qE,GAAMqU,KAAKu2D,WAAWjwE,cAAc,oBAAoBokC,aAAa,eACzE,OAAO1qB,MAAKzV,OAAOwpC,eAAepoC,GAEtC,MAAO,OAEX8hK,EAAWtrK,UAAU6tK,mBAAqB,WAEtC,IAAK,GADDrrK,MACKkL,EAAK,EAAGkG,EAAKiK,KAAKzV,OAAO3C,YAAaiI,EAAKkG,EAAG3S,OAAQyM,IAAM,CACjE,GAAI9B,GAAMgI,EAAGlG,EACT9B,GAAImb,qBAAuBnb,EAAI1L,OAC/BsC,EAAMT,MAAOsG,GAAIwV,KAAKwlJ,WAAWz3J,EAAI1L,MAAO2d,KAAKkuJ,SAAUrjJ,KAAM9c,EAAI1F,WAAa0F,EAAI1F,WAAa0F,EAAI1L,QAG/G,MAAOsC,IAEX8oK,EAAWtrK,UAAUotK,aAAe,SAAUvsK,GAE1C,GAAKgd,KAAK+iJ,aAAmB,OAA7B,CAII,GAAInxJ,GAAMoO,KAAK+iJ,aAAmB,OAAEv4J,EAChC6N,WAAQrV,EAAEtB,OAAQ,IAAMkQ,KAASoO,KAAK4vJ,oBACtC5vJ,KAAK2vJ,UAAU3sK,EAAEtB,OAAQkQ,IAEnByG,UAAQrV,EAAEtB,OAAQ,IAAMkQ,IAAQoO,KAAK4vJ,qBAC3C5vJ,KAAK2vJ,UAAU3sK,EAAEtB,OAAQkQ,GAAK,KAI1C67J,EAAWtrK,UAAUwtK,UAAY,SAAUjuK,EAAQ8I,EAAIk/G,GACnD,GAAIumD,GAAcjwJ,KAAKkwJ,cACnBD,GACAA,EAAY5mK,MAAMC,SAAWqR,UAAQ44C,UAAYm2D,EAAU,OAAS,QAGpE1pG,KAAKzV,OAAOsoB,OhG3LA,cgG4LR9kB,IAAKiS,KAAKskJ,aAAc5iK,OAAQA,EAAQgoH,QAASA,EAASl/G,GAAIA,KAI1EijK,EAAWtrK,UAAUguK,YAAc,SAAU9/D,EAAIZ,GAC7C,GAAI2gE,GAAUpwJ,KAAKzV,OAAOK,QAAQzB,wBAC9BknK,EAAQhgE,EAAGlnG,wBACXQ,EAAO0mK,EAAM1mK,KAAOymK,EAAQzmK,KAC5BD,EAAM2mK,EAAM3mK,IAAM0mK,EAAQ1mK,GAC1B0mK,GAAQ9iK,OAAS5D,EACjBA,EAAMA,EAAM+lG,EAAGhmG,aAAe4mK,EAAM/iK,OAE/B8iK,EAAQ9iK,OAAS5D,EAAM+lG,EAAGhmG,eAC/BC,EAAM0mK,EAAQ9iK,OAASmiG,EAAGhmG,cAE1BhB,OAAOwwD,YAAcw2C,EAAGhmG,aAAeC,EAAM0mK,EAAQ1mK,MACrDA,EAAMjB,OAAOwwD,YAAcw2C,EAAGhmG,aAAe2mK,EAAQ1mK,KAErDA,EAAM0mK,EAAQ1mK,IAAM,IACpBA,EAAM,GAEVC,GAASqW,KAAKzV,OAAO2X,WAAautF,EAAG3lG,YAAcumK,EAAM3nK,MACrD0nK,EAAQ1nK,OAASiB,EAAO8lG,EAAG3lG,aAC3BH,GAAQ0mK,EAAM3nK,MAAQ+mG,EAAG3lG,YACrBumK,EAAM1mK,KAAO8lG,EAAG3lG,cAChBH,EAAO0mK,EAAM1mK,KAAO8lG,EAAG3lG,YAAc,IAGpCH,EAAO,IACZA,GAAQ8lG,EAAG3lG,YAAcumK,EAAM3nK,OAEnC+mG,EAAGpmG,MAAMK,IAAMA,EAAM,KACrB+lG,EAAGpmG,MAAMM,KAAOA,EAAO,MAE3B8jK,EAAWtrK,UAAU2sK,eAAiB,SAAU9rK,GAC5C,GAAIitK,GAAcjwJ,KAAKkwJ,cAEvB,IADAD,EAAYxlK,UAAUqE,IAAIkR,KAAKiuJ,OAC1BtzJ,UAAQ44C,SAAU,CACnB,GAAI1xB,GAAOouI,EAAY5mK,MAAMC,OAC7B2mK,GAAY5mK,MAAMqD,SAAW,iCAC7B,IAAI2jG,GAAKrwF,KAAKpV,QAAQtE,cAAc,IAAM0Z,KAAK+tJ,OAC3C19D,KACArwF,KAAKmwJ,YAAY9/D,EAAGnnG,cAAe+mK,GACnCA,EAAY5mK,MAAMqD,SAAW,WAAam1B,EAAO,yBAI7D4rI,EAAWtrK,UAAU2tK,WAAa,WAC9B,GAAInrK,KAkBJ,OAjBIqb,MAAKzV,OAAO02F,qBAAqB+rB,MACjCroH,EAAMT,KAAK,cACXS,EAAMT,KAAK,YAEX8b,KAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO02F,qBAAqB9W,MAC9DxlF,EAAMT,KAAK,SACXS,EAAMT,KAAK,YAEX8b,KAAKzV,OAAOqe,cAAgB5I,KAAKzV,OAAO02F,qBAAqBhU,MAC7DtoF,EAAMT,KAAK,iBACXS,EAAMT,KAAK,mBAEfS,EAAMT,KAAK,iBACP8b,KAAKzV,OAAOue,gBAAuD,cAApC9I,KAAKzV,OAAOoqB,eAAehxB,MAC1Dqc,KAAKzV,OAAO02F,qBAAqBrkE,KACjCj4B,EAAMT,KAAK,UAERS,GAEX8oK,EAAWtrK,UAAUytK,kBAAoB,WACrC,GAAIK,GAAcjwJ,KAAKkwJ,cACvB,OAAOD,IAA6C,SAA9BA,EAAY5mK,MAAMC,SAE5CmkK,EAAWtrK,UAAU+tK,aAAe,WAChC,MAAIv1J,WAAQ44C,UAAkC,OAAtBvzC,KAAKskJ,cAA6D,SAApCtkJ,KAAKzV,OAAOoqB,eAAehxB,KACtEwC,SAAS2nD,eAAe9tC,KAAKskJ,aAAa34J,IAAM,WAEpDqU,KAAKzV,OAAOK,QAAQtE,cAAc,IAAM0Z,KAAKguJ,MAExDP,EAAWtrK,UAAU0sK,kBAAoB,WACrC,MAAQ7uJ,MAAKzV,OAAOonF,iBAChB3xE,KAAKzV,OAAOonF,gBAAgBjqF,QAAQ,WAAa,IAAOsY,KAAKzV,OAAOonF,iBAErE87E,KCpkBPjuI,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAYnFwwI,GAA4B,SAAUtuI,GAEtC,QAASsuI,GAAW/lK,EAAQyE,GACxB,GAAI0Z,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQyE,IAAmBgR,IAIzD,OAHA0I,GAAMne,OAASA,EACfme,EAAM1Z,eAAiBA,EACvB0Z,EAAM27F,YACC37F,EA+JX,MArKA8W,IAAU8wI,EAAYtuI,GAQtBsuI,EAAWnuK,UAAUkiH,UAAY,WACzBrkG,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAO6lB,GjGyRc,uBiGzRWpQ,KAAKuwJ,sBAAuBvwJ,MACjEA,KAAKzV,OAAO6lB,GjG0RW,oBiG1RWpQ,KAAK0kB,kBAAmB1kB,MAC1DA,KAAKzV,OAAO6lB,GjG2RO,gBiG3RWpQ,KAAKwwJ,sBAAuBxwJ,QAE9DswJ,EAAWnuK,UAAUouK,sBAAwB,SAAUptK,GACnD,IAAK,GAAIM,GAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAChCN,EAAQM,GAAGuO,WAAc7O,EAAQM,GAAGuO,qBAAsBC,eAAc9O,EAAQM,GAAGuO,WAC9ExP,oBAAkBW,EAAQM,GAAGuO,YAAc,GAAIC,eAAgB,UAAY9O,GAAQM,GAAGuO,WAAa7O,EAAQM,GAAGuO,WAC3G,GAAIC,eAAY9O,EAAQM,GAAGuO,aAG3Cs+J,EAAWnuK,UAAUsuK,cAAgB,SAAUvhK,EAAM2C,EAAOD,EAAKrP,GAC7D,GAAIiX,GAAQwG,KAAKvG,sBAAsB5H,GACnC6H,EAAM,GAAIC,YACV6d,EAAO,GAAI7d,WACfH,GAAM3K,OAASK,EAAKL,MACpB,IAAI6hK,GAAa1wJ,KAAKzV,OAAOwuB,eAe7B,QAdKv2B,oBAAkB0M,EAAKL,SAAWK,EAAKL,OAAOuT,cAAgE,IAAjDsuJ,EAAW1gJ,oBAAoBmI,eAC7Fu4I,EAAW14I,wBACPnI,WAAW,EAAMC,SAAU0H,EAAK5d,UAEpC4d,EAAKvB,QAAQS,KAAK,WACdhd,EAAIE,QAAQrX,EAAOyP,cAEvBwH,EAAMm3J,cAAgB3wJ,KAAKzV,OAAO+4F,kBAAkBjwE,KAAKrT,KAAKzV,QAC9DyV,KAAKzV,OAAOotB,QjG0QW,wBiG1Q2Bne,KAGlDk3J,EAAW14I,2BACXte,EAAIE,QAAQhI,IAET8H,GAEX42J,EAAWnuK,UAAUuiC,kBAAoB,SAAUx1B,GAyB/C,IAAK,GAxBDwZ,GAAQ1I,KACR4wJ,EAAiB1hK,EAAK3M,QAAU2M,EAAK3M,QAAUyd,KAAKzV,OAAOgN,uBAC3D80F,KAqBA7vE,EAASxc,KACJvc,EAAI,EAAGA,EAAImtK,EAAextK,OAAQK,KArB7B,SAAUA,GACpB,GAAIwyB,OAAU,GACVpkB,EAAQ3C,EAAKq0C,UAAY/mB,EAAOq0I,oBAAoBD,EAAentK,IACnE+4B,EAAOs0I,cAAcF,EAAentK,GAAIyL,EAAKxJ,OAAOA,QAAQ,GAAO,EACvEmM,GAAM8Y,OAAS6R,EAAOjyB,OAAOsH,MAAM8Y,MACnC,IAAI3Y,GAAa4+J,EAAentK,GAAGuO,UAG/BikB,GAFAjkB,GAAc,UAAYA,GAChBwqB,EAAOi0I,cAAcvhK,EAAM2C,EAAOG,EAAY4+J,EAAentK,IACzDwyB,SAERjkB,EAAW6kB,OAAS7kB,EAAWA,WAAW2U,QACtC3U,EAAW4kB,aAAa/kB,GAGxBG,EAAW6kB,MAAMH,KAAK,WAC5B,MAAO1kB,GAAW4kB,aAAa/kB,KAGvCw6F,EAAWnoG,KAAK+xB,IAIRxyB,EAEZyiD,SAAQsmD,IAAIH,GAAY31E,KAAK,SAAUq6I,GACnC,IAAK,GAAIttK,GAAI,EAAGA,EAAIstK,EAAU3tK,OAAQK,IAClCmtK,EAAentK,GAAG0O,WAAa4+J,EAAUttK,GAAGiC,OACT,iBAA/BkrK,EAAentK,GAAGmmB,UAA+B,UAAYgnJ,GAAentK,GAAGuO,aAC/E4+J,EAAentK,GAAG0lB,KAAKwB,OAAS1jB,SAAO2pK,EAAentK,GAAG0lB,KAAKwB,QAC1D3Y,WAAY++J,EAAUttK,GAAGiC,OACzBmM,MAAO,GAAIC,SAAS8Y,QAChBhpB,MAAOgvK,EAAentK,GAAG8E,iBAAmBqoK,EAAentK,GAAGpB,MAC9DwoB,KAAM+lJ,EAAentK,GAAG6E,mBAKxC4G,GAAK+mB,QAAQrc,QAAQ1K,EAAKxJ,UAC3BixB,MAAM,SAAU3zB,GAKf,MAJA0lB,GAAMne,OAAOyoB,KAAK,gBAAiB,wBAC/B9jB,EAAK+mB,SAAW/mB,EAAK+mB,QAAQc,QAC7B7nB,EAAK+mB,QAAQc,OAAO/zB,GAEjBA,KAGfstK,EAAWnuK,UAAUquK,sBAAwB,SAAUthK,GACnDA,EAAKzJ,UAAUA,UAAYua,KAAK8wJ,cAAc5hK,EAAK3M,OAAQ2M,EAAK3M,OAAO4P,YAAY,IAEvFm+J,EAAWnuK,UAAU2uK,cAAgB,SAAUvuK,EAAQS,EAAGguK,EAAUC,GAChE,GAAI3tK,GAAO0c,KAAKzV,OACZwrB,KAEAlkB,EAAQ,GAAIC,SACZzP,EAAQ2uK,EAAWzuK,EAAOgG,gBAAkBhG,EAAOF,KACvD,IAAIiB,EAAK6R,aAAe7R,EAAK+Q,sBAAwB28J,EAAU,CAC3DhuK,EAAI,GAAIiP,eAAc3O,EAAKylB,eAAiBzlB,EAAKoB,cAAcvB,QAAQC,SAAW4tK,EAC9EhuK,EAAE40B,QAAU50B,GAAIyP,cAAa,GAAIX,UAAQvD,OAAOlM,GACpD,IAAIohH,GAAgBhhH,WAAS0pG,SAASnpG,EAAGX,GAAO,EAChDA,GAAQ2uK,EAAWzuK,EAAOF,MAAQE,EAAOgG,eACzC,KAAK,GAAI9E,GAAI,EAAGA,EAAIggH,EAAcrgH,OAAQK,IAClCggH,EAAchgH,IAAMggH,EAAchgH,GAAG2O,OACrC2jB,EAAW7xB,KAAKoO,IAAmBjQ,MAAOA,EAAOkQ,SAAU,QAAS3Q,MAAO6hH,EAAchgH,GAAI+O,WAAW,KAGxGujB,EAAW7xB,KAAK,GAAIgP,aAAU7Q,EAAO,QAASohH,EAAchgH,IAAI,IAI5E,MAAIwtK,GACOl7I,EAAW3yB,OAASyO,EAAMQ,MAAMa,YAAUQ,GAAGqiB,IAAelkB,EAE1DkkB,EAAW3yB,OAAS8P,YAAUQ,GAAGqiB,IAAgBA,gBAGlEu6I,EAAWnuK,UAAU0uK,oBAAsB,SAAUtuK,GACjD,GAAIe,GAAO0c,KAAKzV,OACZsH,EAAQ,GAAIC,SACZo/J,EAAclxJ,KAAKgpC,WAAWzmD,EAIlC,IAHI2uK,EAAYr4H,SACZhnC,EAAQmO,KAAK8R,YAAYjgB,EAAOq/J,EAAY3uK,QAAQ,IAEpDe,EAAKwwB,eAAeliB,IAAIxO,OAAQ,CAChC,GAAIywB,GAAYvwB,EAAKwwB,cACjBvxB,GAAOyP,qBAAsBC,gBAAgB1P,EAAOyP,WAAWkI,QAAQiW,eACzB,mBAA9C5tB,EAAOyP,WAAWkI,QAAQiW,gBAC1Bte,EAAQmO,KAAK+R,YAAYlgB,EAAOtP,GAAQ,GAGxCsP,EAAMyiB,OAAOT,EAAUjiB,IAAKrP,EAAO+F,gBAAiBurB,EAAUthB,SAAUshB,EAAUM,YAG1F,MAAOtiB,IAEXy+J,EAAWnuK,UAAU6mD,WAAa,SAAUzmD,GACxC,GAAIqqG,GAAe5sF,KAAKzV,OAAOoqB,eAAexxB,QAAQmW,OAAO,SAAUuvG,GACnE,MAAQA,GAAQxmH,QAAUE,EAAO+F,iBAAmBugH,EAAQl9G,MAAQpJ,EAAOoJ,KAE/E,QACIpJ,OAAQqqG,EAAc/zD,SAAU+zD,EAAaxpG,SAGrDktK,EAAWnuK,UAAUguB,cAAgB,WACjC,MAAO,cAEXmgJ,EAAWnuK,UAAU0rB,QAAU,WAC3B7N,KAAKmxJ,gBAETb,EAAWnuK,UAAUgvK,aAAe,WAC5BnxJ,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IjGoIc,uBiGpIY7X,KAAKuwJ,uBAC3CvwJ,KAAKzV,OAAOstB,IjGqIW,oBiGrIY7X,KAAK0kB,mBACxC1kB,KAAKzV,OAAOstB,IjGsIO,gBiGtIY7X,KAAKwwJ,yBAEjCF,GACT3gJ,ICvLEyhJ,GAAe,gDACfC,GAAU,4CACVC,GAAU,oBACVC,GAAQ,kBACRC,GAAO,iBACPC,GAAwB,WACxB,QAASA,GAAOlnK,GACZyV,KAAKzV,OAASA,EACdyV,KAAKzV,OAAO6lB,GAAG,cAAepQ,KAAK0xJ,aAAc1xJ,MAiCrD,MA/BAyxJ,GAAOtvK,UAAUguB,cAAgB,WAC7B,MAAO,UAEXshJ,EAAOtvK,UAAU6wB,IAAM,SAAUT,EAAOrjB,GAC9BqjB,YAAiBnmB,SACnBmmB,GAASA,GAGb,KAAK,GADD5uB,GAAO4uB,EACF9uB,EAAI,EAAGA,EAAIE,EAAKP,OAAQK,IAAK,CAClC,GAAI23B,GAAOu2I,GAAYhuK,EAAKF,IACxBmuK,EAAMx2I,EAAK8uE,MAAMh7F,EAAM8Q,KAAKzV,OAC5BqnK,GAAIC,SACJC,QAAQ12I,EAAK22I,SAAS32I,EAAK42I,gBAAgB9iK,EAAM8Q,KAAKzV,OAAQqnK,EAAInpJ,YAI9EgpJ,EAAOtvK,UAAUuvK,aAAe,WAC5B,GAAIx3J,GAAU8F,KAAKzV,OAAOwuB,gBAAgBzT,YAAYpL,QAClDqd,EAAWrd,EAAQ+3J,UACnB16I,KACArd,EAAQ+3J,WAAa,SAAUj4J,EAAIk4J,EAASC,GACxC56I,EAASjsB,KAAK4O,EAASF,EAAIk4J,EAASC,MAIhDV,EAAOtvK,UAAU0rB,QAAU,WACnB7N,KAAKzV,OAAO2lB,aAGhBlQ,KAAKzV,OAAOstB,IAAI,cAAe7X,KAAK0xJ,eAEjCD,KAGAE,IACPS,gBACIzuK,KAAM,iBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,GAAI8nK,GAAW9nK,EAAO22F,qBAAqBnlF,IAAI,SAAU+vB,GAAK,MAAOA,GAAE3pC,UAAUguB,kBAE7Eg1D,EAAU56E,EAAO06E,kBAAkBlpE,IAAI,SAAU+vB,GAAK,MAAOA,GAAEs5C,SAC9D9rE,OAAO,SAAUuB,GAAQ,OAAmC,IAA5Bw3J,EAAS3qK,QAAQmT,IACtD,QAASg3J,QAAS1sF,EAAQ7rE,OAAO,SAAUwyB,GAAK,MAAa,WAANA,IAAmB1oC,OAAS,EAAGqlB,QAAS08D,IAEnG6sF,gBAAiB,SAAU9iK,EAAM3E,EAAQ46E,GAGrC,MAFAA,GAAUA,EAAQ7rE,OAAO,SAAUwyB,GAAK,MAAa,WAANA,IAC1CnwB,OAAO,SAAU2mB,EAAMC,GAAO,MAAOD,GAAQ,KAAOC,EAAM,MAAU,IAClE+uI,GAAU,gEACPnsF,EACL,YAAcisF,GAAe,iEAG1CkB,iBACI3uK,KAAM,kBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAA4B,mBAAZ3rH,WAE7B8rH,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAOgnK,IAAQ,4JAGIF,GAAU,iEAGrCkB,wBACI5uK,KAAM,yBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAAkG,IAAzFtnK,EAAO2L,aAAaoD,OAAO,SAAU/W,GAAU,MAAOA,GAAO2L,eAAiB9K,SAEpG4uK,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAO+mK,IAAU,gGACEF,GAAe,uFAG1CoB,uBACI7uK,KAAM,wBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAAStnK,EAAOw+B,kBAAkB2T,kBACsD,IAAzFnyC,EAAO2L,aAAaoD,OAAO,SAAU/W,GAAU,MAAOA,GAAO2L,eAAiB9K,SAE1F4uK,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAO+mK,IAAU,qJAEEF,GAAe,uFAG1CqB,eACI9uK,KAAM,gBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,SAAS,IAEtBG,gBAAiB,SAAU9iK,EAAM3E,GAC7B,GAAIutF,GAAU,GACV46E,EAAcC,GAAmBzjK,EAAM3E,GACvCqoK,EAAYC,GAAiB3jK,EAAM3E,EAUvC,OARIutF,GADc,KAAd86E,EACUA,EAEW,KAAhBF,EACKA,EAGAxjK,EAAKgR,MAEZoxJ,GAAU,KAAOx5E,IAGhCg7E,gBACInvK,KAAM,iBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,GAAIwoK,GAAOtwK,WAASC,UAAU,UAAY6H,EAAOyhD,OAAS,QAASgvC,OACnE,QAAS62E,QAA2B,UAAlBtnK,EAAOyhD,QAAsBxpD,oBAAkBuwK,KAErEf,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAO+mK,IAAU,sDAA8D/mK,EAAOyhD,OAAS,gCAC5EolH,GAAe,yHAG1C4B,YACIrvK,KAAM,aACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,GACIqc,EACJ,QAFW1X,GAGP,IAAK,SACD0X,GACIirJ,QAAStnK,EAAOwe,gBAAkBrO,cAAYnQ,EAAOyyB,kBAAoBtiB,cAAYnQ,EAAOmL,aACpFgF,cAAYnQ,EAAOixB,cAAgBjxB,EAAO8J,qBAClDoU,SAAW5N,KAAM,UAErB,MACJ,KAAK,iBACD+L,GACIirJ,SAAUn3J,cAAYnQ,EAAOyyB,kBAAoBtiB,cAAYnQ,EAAOmL,YAAoC,IAAtBnL,EAAOuU,YACzD,IAAzBvU,EAAO4yB,cACd1U,SAAW5N,KAAM,kBAErB,MACJ,SACI+L,GAAQirJ,SAAS,GAGzB,MAAOjrJ,IAEXorJ,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,GACI7B,GADA/L,EAAO4N,EAAQ5N,IAEnB,QAAQA,GACJ,IAAK,SACD+L,EAAM,oJAMN,MACJ,KAAK,iBACDA,EAAM,+HAIN,MACJ,SACIA,EAAM,GAGd,MAAO0qJ,IAAW,KAAOz2J,EAAKwnH,cAAgB,iBAAoBz7G,IAG1EqsJ,0BACItvK,KAAM,2BACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,UAAWtnK,EAAOpH,QAAQC,QAC1BmH,EAAOyH,qBAAsBC,gBAAgB1H,EAAOyH,WAAW5O,UAE5E4uK,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAO+mK,IAAU,yJAEEF,GAAe,8EAG1C8B,gBACIvvK,KAAM,iBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAASrvK,oBAAkB+H,EAAO+C,SAA6B,SAAlB/C,EAAO+C,SAEjE0kK,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAOgnK,IAAQ,wFACIH,GAAe,qEAG1C+B,kBACIxvK,KAAM,mBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAASzlK,MAAM2K,QAAQ7H,IAAS9C,MAAM2K,QAAQ7H,EAAKxJ,UAEhEssK,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAOgnK,IAAQ,6EAEIH,GAAe,0EAG1CgC,oBACIzvK,KAAM,qBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAAStnK,EAAOwuB,gBAAgBtF,aAE7Cu+I,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAO+mK,IAAU,wFACEF,GAAe,iFAG1CiC,gBACI1vK,KAAM,iBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAAU3iK,EAAK3M,OAAO6sD,UAAYlgD,EAAK3M,OAAO6sD,UAAYlgD,EAAKxG,OAC/DwG,EAAK3M,OAAOmvD,UAAYxiD,EAAK3M,OAAOmvD,UAAYxiD,EAAKxG,QAElEspK,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAOinK,IAAO,4FAGtB8B,wBACI3vK,KAAM,yBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,GACIipB,EACJ,QAAQtkB,EAAK+jB,YACT,IAAK,UAEGO,EADAhxB,oBAAkB0M,EAAKsjH,YAClB,yCAA2CtjH,EAAK3M,OAAO8F,WAAa,UAGpE,0CAA4C6G,EAAK3M,OAAO6F,gBACzD8G,EAAKsjH,WAAWnqH,WAAa6G,EAAK3M,OAAO8F,YAAc,SAE/D,MACJ,KAAK,QACDmrB,EAAK,uCAAyCtkB,EAAKgkB,WAAa,UAChE,MACJ,KAAK,SACDM,EAAK,wCAA0CtkB,EAAKgkB,WAAa,UACjE,MACJ,KAAK,OACDM,EAAK,sCAAwCtkB,EAAKgkB,WAAa,WAGvE,OAAS2+I,SAtBK,EAsBappJ,SAAW+K,GAAIA,KAE9Cw+I,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO+oJ,IAAQ,wBAA0B/oJ,EAAQ+K,KAGzD+/I,iBACI5vK,KAAM,kBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,SAAS,EAAMppJ,SAAWvZ,KAAMA,KAE7C8iK,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO+oJ,IAAQ,kCAAoC/oJ,EAAQvZ,KAAO,uBAG1EskK,oBACI7vK,KAAM,qBACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,SAAS,EAAMppJ,SAAWvZ,KAAMA,KAE7C8iK,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO+oJ,IAAQ,iCAAmC/oJ,EAAQvZ,KAAO,oBAGzEukK,qBACI9vK,KAAM,sBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,SAAS,IAEtBG,gBAAiB,SAAU9iK,EAAM3E,GAC7B,MAAOgnK,IAAQ,8FACIH,GAAe,uFAG1CsC,gBACI/vK,KAAM,iBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,GACIipB,EACJ,QAAQtkB,EAAK+jB,YACT,IAAK,QACDO,EAAK,OAAStkB,EAAKgkB,WAAa,2GAEhC,MACJ,KAAK,SACDM,EAAK,OAAStkB,EAAKgkB,WAAa,6GAEhC,MACJ,KAAK,OACDM,EAAK,OAAStkB,EAAKgkB,WAAa,4GAIxC,OAAS2+I,SAhBK,EAgBappJ,SAAW+K,GAAIA,KAE9Cw+I,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO8oJ,IAAS,+BAAiC9oJ,EAAQ+K,KAGjEmgJ,qBACIhwK,KAAM,sBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAAStnK,EAAO2L,aAAa9S,QAAUmH,EAAO4yB,eAAiB5yB,EAAOuU,YAAcvU,EAAO6+B,gBAAgBhmC,SAExH4uK,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO8oJ,IAAS,4BAA8BhnK,EAAO2L,aAAa9S,QAAUmH,EAAO4yB,cAAgB,kBAAoB,KACjH5yB,EAAOuU,YAAcvU,EAAO6+B,gBAAgBhmC,OAAS,cAAgB,IAAM,aAGzFwwK,qBACIjwK,KAAM,sBACNouK,QAAS,QACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,QAASrvK,oBAAkB0M,EAAK3M,OAAOoB,MAAO8kB,QAASvZ,EAAK3M,OAAO8F,aAEhF2pK,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO8oJ,IAAS,6BAA+B9oJ,EAAU,8EACZ4oJ,GAAU,+BAG/DwC,4BACIlwK,KAAM,6BACNouK,QAAS,OACT7nE,MAAO,SAAUh7F,EAAM3E,GACnB,OAASsnK,SAAU3iK,EAAK0gB,UAAU5d,qBAAsBC,gBAAe/C,EAAK0gB,UAAU5d,qBAAsB5F,UAClG5J,oBAAkB0M,EAAK0gB,UAAUkkJ,mBAE/C9B,gBAAiB,SAAU9iK,EAAM3E,EAAQke,GACrC,MAAO6oJ,IAAU,sIAMzBqB,GAAqB,SAAUzjK,EAAM3E,GACrC,GAAI2V,GAAQhR,EAAKgR,KACjB,OAAIA,GAAMxY,SAA+C,IAApCwY,EAAMxY,QAAQ,kBACxB,GAEJ,qGAEkB2pK,GAAU,2DACZA,GAAU,qDACdnxJ,GAEnB2yJ,GAAmB,SAAU3jK,EAAM3E,GACnC,GAAI2V,GAAQzd,WAASC,UAAU,cAAewM,EAC9C,IAAI1M,oBAAkB0d,GAClB,MAAO,EAEX,IAAI6zJ,GAAa,EACjB,KACIA,EAAa35J,KAAKC,MAAM6F,EAAM8zJ,cAElC,MAAOj+J,GACHg+J,EAAa,GAEjB,MAAO,+BACQ7zJ,EAAM+zJ,YAAc,aACjB/zJ,EAAM29D,OAAS,MAAQ39D,EAAMg0J,WAAa,MAClC,KAAfH,EAAoB,YAAcA,EAAa,KCvY1DI,GAAgC,WAKhC,QAASA,GAAe5pK,EAAQyE,GAC5BgR,KAAKwlB,iBACLxlB,KAAKo0J,2BACLp0J,KAAKq0J,uBACLr0J,KAAKs0J,cAAe,EACpBt0J,KAAKu0J,YAAa,EAClBv0J,KAAK8jI,UAAW,EAChB9jI,KAAKw0J,wBAAyB,EAC9Bx0J,KAAKy0J,eAAgB,EACrBz0J,KAAKylB,UAAW,EAChBzlB,KAAK00J,mBAAoB,EACzB10J,KAAK20J,cAAgB,EACrB30J,KAAKkzC,SAAW,YAAa,YAAa,WAAY,aAAc,UAAW,WAC/ElzC,KAAKvY,MAAQ,YAAa,UAAW,SAAU,YAC/CuY,KAAKnH,OAAS,EACdmH,KAAK40J,wBAAyB,EAC9B50J,KAAK60J,uBACL70J,KAAKq2C,UAAW,EAChBr2C,KAAK0sH,gBACL1sH,KAAKysH,cAAe,EACpBzsH,KAAK6iB,kBAAmB,EACxB7iB,KAAK80J,YAAa,EAClB90J,KAAKygG,iBAAkB,EACvBzgG,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAKysH,aAAiD,WAAlCzsH,KAAKzV,OAAOiE,aAAaC,KAC7CuR,KAAKghC,mBACLhhC,KAAKuE,aAAevV,EAAeI,WAAW,gBAC9C4Q,KAAKuC,kBAAoBvC,KAAKzV,OAAOsL,eAAiB,GAAIgwJ,IAAwB7lJ,KAAKzV,QACjF,GAAIwzB,IAAkB/d,KAAKzV,QAs+BrC,MAp+BA4pK,GAAehyK,UAAUguB,cAAgB,WACrC,MAAO,kBAKXgkJ,EAAehyK,UAAU6+C,iBAAmB,WACxChhC,KAAKzV,OAAO6lB,GAAG80B,GAAkBllC,KAAK6wH,YAAa7wH,MACnDA,KAAKzV,OAAO6lB,GAAGO,GAA2B3Q,KAAKoO,mBAAoBpO,MACnEA,KAAKzV,OAAO6lB,GnG+WW,sBmG/WkBpQ,KAAK+0J,kBAAmB/0J,MACjEA,KAAKzV,OAAO6lB,GnG4We,0BmG5WkBpQ,KAAKg1J,sBAAuBh1J,MACzEA,KAAKzV,OAAO6lB,GAAGyX,GAA0B7nB,KAAKi1J,kBAAmBj1J,MACjEA,KAAKzV,OAAO6lB,GnGgXe,0BmGhXkBpQ,KAAKk1J,mBAAoBl1J,MACtEA,KAAKzV,OAAO6lB,GnGiXY,uBmGjXkBpQ,KAAKm1J,wBAAyBn1J,MACxEA,KAAKzV,OAAO6lB,GnGsWa,wBmGtWkBpQ,KAAKo1J,oBAAqBp1J,MACrEA,KAAKzV,OAAO6lB,GnGiXU,qBmGjXkBpQ,KAAKsG,SAAUtG,MACvDA,KAAKzV,OAAO6lB,GnGoXS,mBmGpXkBpQ,KAAKq1J,qBAAsBr1J,MAClEA,KAAKzV,OAAO6lB,GAAGisD,GAAmBr8D,KAAKi1J,kBAAmBj1J,MAC1DA,KAAKzV,OAAO6lB,GnGwWU,qBmGxWkBpQ,KAAKuwB,eAAgBvwB,MAC7DA,KAAKzV,OAAO6lB,GnG+UsB,mCmG/UkBpQ,KAAKwyH,gBAAiBxyH,MAC1EA,KAAKzV,OAAO6lB,GAAGwiH,GAAuB5yH,KAAKs1J,uBAAwBt1J,MACnEA,KAAKzV,OAAO6lB,GnGuVG,amGvVkBpQ,KAAKu1J,kBAAmBv1J,MACzDA,KAAKzV,OAAO6lB,GnG8UkB,8BmG9UkBpQ,KAAKw1J,oBAAqBx1J,MAC1EA,KAAKzV,OAAO6lB,GnGmVa,wBmGnVkBpQ,KAAKy1J,qBAAsBz1J,MACtEA,KAAKzV,OAAO6lB,GnG0Wa,wBmG1WkBpQ,KAAK01J,oBAAqB11J,MACrEA,KAAKzV,OAAO6lB,GnGqVqB,kCmGrVkBpQ,KAAK21J,uBAAwB31J,MAChFA,KAAKzV,OAAO6lB,GAAG61B,GAAqBjmC,KAAKsN,aAActN,MACvDA,KAAKzV,OAAO6lB,GnG+ZwB,qCmG/ZkBpQ,KAAK41J,+BAAgC51J,MAC3FA,KAAKyxD,oBAAsBzxD,KAAKqM,YAAYgH,KAAKrT,MACjDA,KAAK0xD,uBAAyB1xD,KAAKsM,eAAe+G,KAAKrT,MACvDA,KAAKzV,OAAO6lB,GnG4LQ,kBmG5LkBpQ,KAAK61J,eAAgB71J,MAC3DA,KAAKzV,OAAOy2C,iBAAiBa,GAAoB7hC,KAAKyxD,qBACtDzxD,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAK0xD,yBAK7DyiG,EAAehyK,UAAU8rD,oBAAsB,WACvCjuC,KAAKzV,OAAO2lB,cAGhBlQ,KAAKzV,OAAOstB,IAAIqtB,GAAkBllC,KAAK6wH,aACvC7wH,KAAKzV,OAAOstB,IAAIlH,GAA2B3Q,KAAKoO,oBAChDpO,KAAKzV,OAAOstB,InG6UW,sBmG7UmB7X,KAAK+0J,mBAC/C/0J,KAAKzV,OAAOstB,InG0Ue,0BmG1UmB7X,KAAKg1J,uBACnDh1J,KAAKzV,OAAOstB,IAAIgQ,GAA0B7nB,KAAKi1J,mBAC/Cj1J,KAAKzV,OAAOstB,InG8Ue,0BmG9UmB7X,KAAKk1J,oBACnDl1J,KAAKzV,OAAOstB,InG+UY,uBmG/UmB7X,KAAKm1J,yBAChDn1J,KAAKzV,OAAOstB,InGoUa,wBmGpUmB7X,KAAKo1J,qBACjDp1J,KAAKzV,OAAOstB,InG+UU,qBmG/UmB7X,KAAKsG,UAC9CtG,KAAKzV,OAAOstB,InGkVS,mBmGlVmB7X,KAAKq1J,sBAC7Cr1J,KAAKzV,OAAOstB,IAAIwkD,GAAmBr8D,KAAKi1J,mBACxCj1J,KAAKzV,OAAOstB,InGsUU,qBmGtUmB7X,KAAKuwB,gBAC9CvwB,KAAKzV,OAAOstB,InG6SsB,mCmG7SmB7X,KAAKwyH,iBAC1DxyH,KAAKzV,OAAOstB,IAAI+6G,GAAuB5yH,KAAKs1J,wBAC5Ct1J,KAAKzV,OAAOstB,InGqTG,amGrTmB7X,KAAKu1J,mBACvCv1J,KAAKzV,OAAOstB,InG4SkB,8BmG5SmB7X,KAAKw1J,qBACtDx1J,KAAKzV,OAAOstB,InGiTa,wBmGjTmB7X,KAAKy1J,sBACjDz1J,KAAKzV,OAAOstB,InGwUa,wBmGxUmB7X,KAAK01J,qBACjD11J,KAAKzV,OAAOstB,InGmTqB,kCmGnTmB7X,KAAK21J,wBACzD31J,KAAKzV,OAAOstB,IAAIouB,GAAqBjmC,KAAKsN,cAC1CtN,KAAKzV,OAAOstB,InG6XwB,qCmG7XmB7X,KAAK41J,gCAC5D51J,KAAKzV,OAAO0jD,oBAAoBpM,GAAoB7hC,KAAKyxD,qBACzDzxD,KAAKzV,OAAO0jD,oBAAoB/mB,GAAuBlnB,KAAK0xD,0BAEhEyiG,EAAehyK,UAAU6wI,sBAAwB,WAC7C,GAAI1vI,GAAO0c,KAAKzV,MAChB,KAAIjH,EAAKoB,cAAcvB,QAAQC,OAA/B,CAGA,GAAIqE,GAAOD,OAAOC,KAAKuY,KAAKo0J,wBAC5B9wK,GAAK8lC,kBAOL,KAAK,GANDhkB,GAAO9hB,EAAK+R,aAAaC,YACzBwgK,EAAUxyK,EAAKuqC,uBAAuBC,YACtC29F,EAASnoI,EAAKuqC,uBAAuBkoI,UACrCC,EAAeF,IAAY1wJ,EAAOqmH,GAAWzrH,KAAKu0J,YAAcnvJ,EAAO,GACvEtH,EAAQk4J,EAAeh2J,KAAKu0J,WAAanvJ,EAAQA,EAAOqmH,EAAU,EAAI,EACtE1tH,EAAMi4J,EAAgBl4J,EAAQ2tH,EAAU,EAAIqqC,EAAUrqC,EAAShkI,EAAKrE,OAC/DK,EAAIqa,EAAOra,GAAKsa,EAAKta,IACtBuc,KAAKo0J,wBAAwB3wK,KAC7BH,EAAK8lC,gBAAkB9lC,EAAK8lC,gBAAgB5yB,OAAOwJ,KAAKo0J,wBAAwB3wK,OAI5F0wK,EAAehyK,UAAUyzK,+BAAiC,SAAU5yK,GAChE,GAAIoiB,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChCq+H,EAAO3zH,KAAKzV,OAAO8K,aAAaE,SAChCk2H,EAASzrH,KAAKzV,OAAOsjC,uBAAuBooI,cAC5CxuK,EAAOD,OAAOC,KAAKuY,KAAKo0J,yBACxBhxJ,EAAQpD,KAAKzV,OAAOsjC,uBAAuBC,WAC/C,KAAK9tB,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAQ,CAC3C,GAAI8pD,GAA+B,SAAvBlqD,EAAEkM,KAAKkT,YACf8zJ,EAAkC,WAAvBlzK,EAAEkM,KAAKkT,WACjBgB,KAAU8pC,IAASgpH,EAShBzqC,EAAS,GAAKzoI,EAAEV,KAAKc,SAAYqoI,EAASkI,EAC1C3zH,KAAKm2J,gBAAgBnzK,EAAEV,KAAK+I,WAAa+X,GAAgC,WAAvBpgB,EAAEkM,KAAKkT,aAA0B,GAGnFpC,KAAKo0J,wBAAwBhvJ,GAAQpiB,EAAEV,KAAK+I,QAZ5C6hD,EACAltC,KAAKo0J,wBAAwB,GAAKpxK,EAAEV,KAAKkU,OAAOwJ,KAAKo0J,wBAAwB,IAG7Ep0J,KAAKo0J,wBAAwB3sK,EAAKA,EAAKrE,OAAS,IAAIc,KAAKlB,EAAEV,KAAK,MAahF6xK,EAAehyK,UAAU0zK,eAAiB,WAClC71J,KAAKzV,OAAOsL,iBAAmBmK,KAAKzV,OAAOsjC,uBAAuBC,aAClE9tB,KAAKzV,OAAO2R,cAAc8pJ,uBAGlCmO,EAAehyK,UAAUmrB,aAAe,SAAUpe,GAC9C,GAAyB,mBAArBA,EAAKkT,cAA0D,WAArBlT,EAAKkT,aAAiD,QAArBpC,KAAKoC,aAAwB,CACxG,GAAIpH,GAAOgF,KAAKzV,OAAOkgC,SAIvB,IAHAzqB,KAAKy8C,WAAaruB,SAASpzB,EAAK,GAAG0vB,aAAa,iBAAkB,IAClE1qB,KAAK6uH,WAAazhI,KAAKC,MAAM2S,KAAKy8C,WAAa,GAAKz8C,KAAKzV,OAAO8K,aAAaE,UAC7EyK,KAAKu8C,UAAYnuB,SAASpzB,EAAKA,EAAK5X,OAAS,GAAGsnC,aAAa,iBAAkB,IACtD,WAArBx7B,EAAKkT,YAA0B,CAC/B,GAAI/E,GAAS2C,KAAKzV,OAAO0K,eACzB/F,GAAK6J,WAAaiH,KAAKzV,OAAOsjC,uBAAuBC,aAC9C9tB,KAAK6uH,WAAa,GAAK7uH,KAAKzV,OAAO8K,aAAaE,SAAW8H,EAAOA,EAAOja,OAAS,GAAG0E,UAG5FoH,GAAK6J,WAAaiH,KAAKy8C,UAEtBz8C,MAAKzV,OAAOsjC,uBAAuBC,aACjC9tB,KAAKzV,OAAO8K,aAAaC,cAAgB0K,KAAK4wH,SAAgC,WAArB1hI,EAAKkT,cACjEpC,KAAK80J,YAAa,EAClB90J,KAAKu8C,UAAYv8C,KAAKu8C,UAAY,KAI9C43G,EAAehyK,UAAUwzK,uBAAyB,SAAUzmK,GACpD8Q,KAAKysH,eACLzsH,KAAKktC,OAAQ,EACTltC,KAAKzV,OAAOsjC,uBAAuBC,cAC9BtmC,OAAOC,KAAKuY,KAAK0sH,cAActpI,QAChC4c,KAAKmzH,qBAELnzH,KAAKzV,OAAO8K,aAAaC,YAAc,IACvCpG,EAAK0pF,WAAY,EACjB54E,KAAKo1J,wBAAwB,GAC7Bp1J,KAAKo2J,aAAc9gK,YAAa,QAKhD6+J,EAAehyK,UAAUuzK,oBAAsB,SAAUxmK,GACrD,IAAK8Q,KAAKzV,OAAOsjC,uBAAuBC,cAAuC,WAAvB5+B,EAAKlM,EAAEof,aAChC,SAAvBlT,EAAKlM,EAAEof,aAA+C,QAArBpC,KAAKoC,aAAyB,CACnE,GAAI2rB,GAAa/tB,KAAKzV,OAAOsL,eACzBoF,EAAU+E,KAAKzV,OAAOkgC,UACtBzvB,EAAOgF,KAAKzV,OAAO0K,eACvB,IAAI+K,KAAKq2J,sBAAsBr7J,EAAM9L,EAAKxJ,OAAO,IAAK,CAElD,GADAsa,KAAKjF,cAAcC,EAAM9L,EAAKlM,EAAGiY,EAA8B,QAArB+E,KAAKoC,aAAuB,GAClE2rB,EAAY,CACZ,GAAI/4B,GAASgL,KAAKzV,OAAOgT,sBAEzB,IADAyC,KAAKjF,cAAc/F,EAAQ9F,EAAKlM,EAAGgd,KAAKzV,OAAO4T,qBAA2C,QAArB6B,KAAKoC,aACtC,eAAhCpC,KAAKzV,OAAO8R,gBAAkC,CAC9C,GAAIqH,GAAS1D,KAAKzV,OAAOiT,0BACzBwC,MAAKjF,cAAc2I,EAAQxU,EAAKlM,EAAGgd,KAAKzV,OAAO+8D,qBAA2C,QAArBtnD,KAAKoC,cAGlF,GAAKpC,KAAK80J,YAMN,GAFA90J,KAAK80J,YAAa,EAClB90J,KAAKzV,OAAO8K,aAAaC,YAAc0K,KAAK4wH,QACxC5wH,KAAKzV,OAAOm0B,gBAAgB52B,MAAQkY,KAAKzV,OAAOuU,WAAY,CAG5D,GAFAjd,SAAOoZ,EAAQ+E,KAAKzV,OAAOuU,WAAa,IACxCkB,KAAKs2J,WAAWt7J,EAAKgF,KAAKzV,OAAOuU,WAAa,IAAK5P,GAAM,GAAO,GAC5D6+B,EAAY,CACZ,GAAI9I,GAAcjlB,KAAKzV,OAAO4T,oBAG9B,IAFAtc,SAAOojC,EAAYjlB,KAAKzV,OAAOuU,aAC/BkB,KAAKs2J,WAAWt2J,KAAKzV,OAAOgT,uBAAuByC,KAAKzV,OAAOuU,WAAa,IAAK5P,GAAM,GAAM,GACzD,eAAhC8Q,KAAKzV,OAAO8R,gBAAkC,CAC9C,GAAIizB,GAAYtvB,KAAKzV,OAAO6T,wBAC5Bvc,UAAOytC,EAAUtvB,KAAKzV,OAAOuU,aAC7BkB,KAAKs2J,WAAWt2J,KAAKzV,OAAOiT,2BAA2BwC,KAAKzV,OAAOuU,WAAa,IAAK5P,GAAM,GAAO,GAAM,IAGhH+M,GAAe+D,KAAKzV,aAlBxByV,MAAKs2J,UAAUt7J,EAAM9L,GAsB7B8Q,KAAKzV,OAAO48B,cACS,WAArBnnB,KAAKoC,YAA2BpC,KAAKzV,OAAOsoB,OnG0B5B,kBmG1B0D3jB,EAAKlM,GACzEgd,KAAKzV,OAAOsoB,OnGqBJ,gBmGrBgC3jB,EAAKlM,GAEvDgd,KAAKzV,OAAOsoB,OAAOkU,IAAuBC,KAAM,mBAEpDmtI,EAAehyK,UAAUm0K,UAAY,SAAUt7J,EAAM9L,EAAM2oC,EAAW0+H,EAAc9hH,GAChF,GAEI51C,GAFAzZ,EAAOmxK,EAAwDv7J,EAAzCgF,KAAK8C,aAAa5T,EAAKxJ,OAAQwJ,EAAKlM,GAC1D4f,EAAc,GAAIC,IAAY7C,KAAKhR,eAAgB,KAAMgR,KAAKzV,OAG9DsU,GADA41C,EACQz0C,KAAKzV,OAAOK,QAAQtE,cAAc,2BAA2BA,cAAc,SAG1E0Z,KAAKzV,OAAOsL,eAAmEgiC,EAClF73B,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,SACrD0Z,KAAKzV,OAAO+7B,0BAA0BhgC,cAAc,SAFpB0Z,KAAKzV,OAAOmO,aAAapS,cAAc,SAI7E0Z,KAAKzV,OAAOuU,aACZD,EAAQ03J,GAAqC,QAArBv2J,KAAKoC,cAA0Bm0J,GAAqC,QAArBv2J,KAAKoC,YACrEpC,KAAKzV,OAAOsL,eACTgiC,EAAY73B,KAAKzV,OAAOwb,0BAA0Bzf,cAAc,SAC5DmuD,EAAgBz0C,KAAKzV,OAAOK,QAAQtE,cAAc,0BAA0BA,cAAc,SACtF0Z,KAAKzV,OAAO0b,yBAAyB3f,cAAc,SAHjC0Z,KAAKzV,OAAO+Y,mBAAmBhd,cAAc,SAGDuY,EAEpF,IAAI6F,IACA1J,KAAMA,EAAMisB,QAAQ,EAAO/3B,KAAMA,EAAM2oC,UAAWA,EAClD0+H,aAAcA,EAAc9hH,cAAe8hH,EAAcnxK,IAAKA,EAGlE,IADA4a,KAAKzV,OAAOsoB,OnGgOY,uBmGhOsBnO,IACzCA,EAAWuiB,OACZ,IAAK,GAAIxjC,GAAI2B,EAAIhC,OAAS,EAAGK,GAAK,EAAGA,IACR,WAArBuc,KAAKoC,YACLvD,EAAM/S,YAAY8W,EAAYW,OAAOne,EAAI3B,GAAIuc,KAAKzV,OAAO2L,eAGzD2I,EAAM06B,aAAa32B,EAAYW,OAAOne,EAAI3B,GAAIuc,KAAKzV,OAAO2L,cAAe2I,EAAMlG,kBAI3F,KAAK49J,GAAgBv2J,KAAKzV,OAAOuU,aACzBkB,KAAKzV,OAAOm0B,gBAAgB52B,MAAQkY,KAAKzV,OAAOuU,YAAmC,QAArBkB,KAAKoC,aAAwB,CAC/F,GAAIo0J,GAAW3+H,EAAY73B,KAAKzV,OAAO4T,qBAAuBs2C,EAAgBz0C,KAAKzV,OAAO6T,yBACpF4B,KAAKzV,OAAOkgC,UACd3iC,GAAS+vC,GAAa4c,IAAuC,QAArBz0C,KAAKoC,YAC3CpC,KAAKzV,OAAOuU,WAAakB,KAAKzV,OAAOuU,WAAa,CACxDjd,UAAO20K,EAAS1uK,IAChBkY,KAAKs2J,WAAWt7J,EAAKgF,KAAKzV,OAAOuU,WAAa,IAAK5P,EAAM2oC,GAAW,EAAM4c,GAEzEz0C,KAAKzV,OAAOsjC,uBAAuBC,aAAgByoI,IAChD9hH,GACAx4C,GAAe+D,KAAKzV,QACpByV,KAAKzV,OAAO2R,cAAc0pB,gBAAuC,QAArB5lB,KAAKoC,YAC3Chd,EAAIoR,OAAOwE,GAAQA,EAAKxE,OAAOpR,KAE/B4a,KAAKzV,OAAOsL,gBAAkBgiC,GACpC57B,GAAe+D,KAAKzV,QACpByV,KAAKzV,OAAO2R,cAAcwpB,YAAmC,QAArB1lB,KAAKoC,YACvChd,EAAIoR,OAAOwE,GAAQA,EAAKxE,OAAOpR,GACD,eAAhC4a,KAAKzV,OAAO8R,iBACZ2D,KAAKs2J,UAAUt2J,KAAKzV,OAAOiT,2BAA4BtO,GAAM,GAAO,GAAO,KAI/E8Q,KAAKzV,OAAO2R,cAAcypB,kBAAyC,QAArB3lB,KAAKoC,YAC7Chd,EAAIoR,OAAOwE,GAAQA,EAAKxE,OAAOpR,GACrC4a,KAAKs2J,UAAUt2J,KAAKzV,OAAOgT,uBAAwBrO,GAAM,MAIrEilK,EAAehyK,UAAUk0K,sBAAwB,SAAUr7J,EAAM1Y,GAC7D,GAAIm0K,IAAS,CACb,IAAIz2J,KAAKzV,OAAOuU,aAAekB,KAAKzV,OAAOsjC,uBAAuBC,aAC3D9tB,KAAKzV,OAAO+oB,aAAanwB,SAAgC,QAArB6c,KAAKoC,YAE5C,IAAK,GADDxQ,GAAMoO,KAAKzV,OAAO6O,0BAA0B,GACvC3V,EAAI,EAAGA,EAAIuX,EAAK5X,OAAQK,IAC7B,GAAIuX,EAAKvX,GAAGnB,KAAKsP,KAAStP,EAAKsP,GAAM,CACjC6kK,GAAS,CACT,OAIZ,MAAOA,IAEXtC,EAAehyK,UAAU2gB,aAAe,SAAUxgB,EAAM4M,GACpD,MAAO8Q,MAAKuC,kBAAkBO,aAAaxgB,EAAM4M,IAErDilK,EAAehyK,UAAU4Y,cAAgB,SAAUC,EAAM9L,EAAM+L,EAASiyC,EAAOt3C,GAC3E,GAAI8S,GAAQ1I,KACR7G,EAAW6G,KAAKzV,OAAO6O,0BAA0B,GACjDqsB,IAAaxqB,EAAQ7X,OAAS4c,KAAKzV,OAAO8K,aAAaE,SACvD23C,GACIznB,IACI7vB,IAAaoK,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAC/C4c,KAAK02J,oBAAoB,GAAG,GAEhC70K,SAAOoZ,EAAQD,EAAK5X,OAAS,IAC7B6X,EAAQuK,OAAOxK,EAAK5X,OAAS,EAAG,GAChC4X,EAAKwK,OAAOxK,EAAK5X,OAAS,EAAG,IAIjC4X,EAAK1B,OAAO,SAAUtW,EAAG8E,GACrB,GAAI9E,EAAEV,KAAK6W,KAAcjK,EAAK5M,KAAK,GAAG6W,GAAW,CAC7C,GAAIvD,IAAa8S,EAAMne,OAAO7F,cAAcvB,QAAQC,OAAQ,CACxD,GAAIgiB,GAAOhY,KAAKC,MAAMvF,EAAQ,GAAK4gB,EAAMne,OAAO8K,aAAaE,SAC7DmT,GAAMiuJ,6BAA6BvxJ,EAAMtd,GAE7CkT,EAAKwK,OAAO1d,EAAO,GACnBjG,SAAOoZ,EAAQnT,IACfmT,EAAQuK,OAAO1d,EAAO,KAIlC,IAAIiR,GAAam0C,EAAQ,EAAI,CAC7BnyC,IAAciF,KAAKzV,OAAQyQ,EAAMC,EAASlC,IAE9Co7J,EAAehyK,UAAUw0K,6BAA+B,SAAUvxJ,EAAMtd,GACpEA,IAAkBsd,EAAO,GAAKpF,KAAKzV,OAAO8K,aAAaE,SACvDyK,KAAKo0J,wBAAwBhvJ,GAAMI,OAAO1d,EAAO,GACjDkY,KAAK02J,oBAAoBtxJ,GAAM,IAEnC+uJ,EAAehyK,UAAUu0K,oBAAsB,SAAUtxJ,EAAM8nC,GAG3D,IAAK,GAFDzlD,GAAOD,OAAOC,KAAKuY,KAAKo0J,yBACxBr2J,EAAMmvC,EAAQzlD,EAAKrE,OAAS,EAAIqE,EAAKrE,OAChCK,EAAI2hB,EAAM3hB,EAAIsa,EAAKta,IACxB,GAAIuc,KAAKo0J,wBAAwB3wK,EAAI,GAAI,CACrC,GAAImzK,GAAY1pH,EAAQzpD,EAAIA,EAAI,EAC5BqE,EAAQolD,EAAQltC,KAAKo0J,wBAAwB3wK,GAAGL,OAAS,EAAI,EAC7Dd,EAAO0d,KAAKo0J,wBAAwBwC,GAAWpxJ,OAAO1d,EAAO,EAC7DolD,IACAltC,KAAKo0J,wBAAwB3wK,EAAI,GAAKnB,EAAKkU,OAAOwJ,KAAKo0J,wBAAwB3wK,EAAI,IAC9EA,EAAI,IAAOsa,EAAM,GAClBiC,KAAKo0J,wBAAwB3wK,EAAI,GAAG+hB,OAAOxF,KAAKo0J,wBAAwB3wK,EAAI,GAAGL,OAAS,EAAG,IAI/F4c,KAAKo0J,wBAAwB3wK,GAAGS,KAAK5B,EAAK,IAItD0d,KAAKgzH,yBAETmhC,EAAehyK,UAAUouC,eAAiB,SAAUrhC,GAChD,GAAI8Q,KAAKzV,OAAOsjC,uBAAuBC,YAAa,CAGhD,IAAK,GAFDC,GAAa/tB,KAAKzV,OAAOsL,eACzBpO,EAAOsmC,EAAavmC,OAAOC,KAAKuY,KAAKq0J,qBAAuB7sK,OAAOC,KAAKuY,KAAKwlB,eACxE/hC,EAAI,EAAGA,GAAKgE,EAAKrE,OAAQK,KAClBsqC,EAAa7+B,EAAKi/B,SAAWnuB,KAAKq0J,oBAAoB5wK,GAAG,GAC/Duc,KAAKq0J,oBAAoB5wK,GAAG,GAAKuc,KAAKwlB,cAAc/hC,IACpD6V,OAAO,SAAUtW,GACnBA,EAAE4M,MAAMV,EAAKpH,OAAOa,QAA2B,KAAjBuG,EAAKvG,SAG3CqX,MAAK62J,wBAAwB9oI,EAAa/tB,KAAKq0J,oBAAsBr0J,KAAKwlB,iBAGlF2uI,EAAehyK,UAAUszK,qBAAuB,SAAUnzK,GACtD0d,KAAK82J,qBAAqBx0K,KAAOA,GAErC6xK,EAAehyK,UAAU20K,mBAAqB,WAG1C,IAAK,GADDC,GADAxhF,EAAav1E,KAAKzV,OAAO0K,gBAEpBxR,EAAI,EAAGA,EAAI8xF,EAAWnyF,OAAQK,IAC/B8xF,EAAW9xF,GAAGqE,QAAUkY,KAAK25H,eAC7Bo9B,EAAYxhF,EAAW9xF,GAG/B,OAAOszK,IAEX5C,EAAehyK,UAAUqzK,oBAAsB,SAAUtmK,GACjD8Q,KAAKysH,gBACAzsH,KAAKktC,OAASh+C,EAAK5M,MACpB0d,KAAKg3J,yBAAyB9nK,EAAK5M,MAEvC0d,KAAKktC,OAAQ,IAGrBinH,EAAehyK,UAAU60K,yBAA2B,SAAU10K,GAC1D,GAAIwF,GAAQmR,GAAmB+G,KAAKzV,OAAQjI,EACvCE,qBAAkBsF,KACnBkY,KAAKzV,OAAO8O,wBAAwBvR,GAASxF,IAGrD6xK,EAAehyK,UAAUkqB,YAAc,SAAUnd,GACpB,QAArBA,EAAKkT,aAA8C,WAArBlT,EAAKkT,cACnCpC,KAAKoC,YAAclT,EAAKkT,cAExBpC,KAAKzV,OAAOsL,iBAAmB3G,EAAK+3B,QAA+B,cAArB/3B,EAAKkT,aAC3B,YAArBlT,EAAKkT,aAAkD,cAArBlT,EAAKkT,eAC1CpC,KAAKygG,iBAAkB,IAG/B0zD,EAAehyK,UAAUmqB,eAAiB,SAAUpd,GACvB,WAArBA,EAAKkT,aAAiD,SAArBlT,EAAKkT,aAA+C,WAArBlT,EAAKkT,cACrEpC,KAAKoC,YAAcpC,KAAKy2C,MACxBz2C,KAAKq2C,SAAgC,WAArBnnD,EAAKkT,aAAiD,SAArBlT,EAAKkT,YACtDpC,KAAKktC,MAAQltC,KAAK8b,QAAS,EACvB9b,KAAKysH,eACLzsH,KAAK25H,aAAe35H,KAAKy2C,MACzBz2C,KAAK60J,uBACL70J,KAAKzV,OAAOmpD,WAAWu/E,0BAInCkhC,EAAehyK,UAAUozK,kBAAoB,WACrCv1J,KAAKzV,OAAOmoB,yBAA2B1S,KAAKysH,eACvCzsH,KAAKzV,OAAOiE,aAAaL,cAAgB6R,KAAK8b,QAAY9b,KAAKzV,OAAOiE,aAAak3E,aAAe1lE,KAAKktC,SACxGltC,KAAKzV,OAAOuxB,QAAS,IAIjCq4I,EAAehyK,UAAUmzK,uBAAyB,SAAUhzK,GACxDA,EAAK8zD,YAAcp2C,KAAK60J,oBACxBvyK,EAAK4qD,MAAQltC,KAAKktC,MAClB5qD,EAAK+zD,SAAWr2C,KAAKq2C,UAEzB89G,EAAehyK,UAAUqwI,gBAAkB,SAAUxvI,GACjDgd,KAAK8b,QAAS,EACd9b,KAAK25H,aAAe32I,EAAE8E,KACtB,IAAImkC,GAAYhlC,YAAW+Y,KAAK82J,qBAAqBx0K,KACrDU,GAAEV,KAAOkF,OAAOC,KAAKuY,KAAK60J,qBAAqBzxK,OAAS4c,KAAK60J,oBAAsB5oI,GAEvFkoI,EAAehyK,UAAUisB,mBAAqB,WAC1CpO,KAAKo1J,qBAAsBhzJ,YAAapC,KAAKy2C,QAAS,IAE1D09G,EAAehyK,UAAU0uI,YAAc,SAAU7tI,GACxCR,oBAAkBQ,EAAEwB,SACrBwb,KAAK4wH,QAAUxjI,KAAKC,KAAKrK,EAAEwB,MAAQwb,KAAKzV,OAAO8K,aAAaE,YAGpE4+J,EAAehyK,UAAUkzK,qBAAuB,SAAUlxK,GACtD6b,KAAK00J,mBAAqBvwK,GAE9BgwK,EAAehyK,UAAU6yK,sBAAwB,SAAUhyK,GACvDgd,KAAKi3J,sBACLj3J,KAAKk3J,oBACL,IAAI1/C,GAAYx0H,EAAEtB,MAElB,IADiB81H,EAAU/sH,UAAUC,SAAS,cAC5BsV,KAAKzV,OAAOmoB,0BAA4B1vB,EAAE43E,OAAQ,CAChE,GAAIi3D,GAAY7xH,KAAKzV,OAAOmO,aAAaC,iBACzCqH,MAAK20J,cAAgB9iC,EAAU74H,SAC/B,IAAIgC,GAAOgF,KAAKzV,OAAOkgC,UACnB3iC,EAAQsmC,SAASpzB,EAAKA,EAAK5X,OAAS,GAAGsnC,aAAa,iBAAkB,IAAM,EAC5E0wE,EAAWp7F,KAAKzV,OAAO8K,aAAaC,YACpCpG,MAAO,GACPiiH,EAASqG,EAAUp6F,aAAeo6F,EAAUx+G,UAC5C+yB,EAAQ3+B,KAAK2+B,MAAMyrF,EAAUp6F,aAAeo6F,EAAUx+G,WAEtDszH,GADQnb,EAASqG,EAAUt+D,aAAe9rD,KAAKC,KAAK8jH,GAAU/jH,KAAK4hE,MAAMmiD,MACnDqG,EAAUt+D,cAAgBntB,IAAUyrF,EAAUt+D,YACxE,IAAIl5C,KAAK8jI,UAAYxX,IAAatsH,KAAKzV,OAAO8K,aAAaC,aAAe0K,KAAK4wH,QAAU,GAAK5wH,KAAKw0J,wBAAyB,CACpHx0J,KAAKzV,OAAOsjC,uBAAuBC,cACnC9tB,KAAKu0J,YAAa,EAClBv0J,KAAKs0J,cAAe,EAExB,IAAInyE,MAAY92F,MAAMC,KAAKumI,EAAUzrI,iBAAiB,4BAClDhB,EAAM+8F,EAAOA,EAAO/+F,OAAS,GAC7B6a,EAAWmwB,SAAShpC,EAAIslC,aAAa,iBAAkB,GAC3D1qB,MAAKzV,OAAO8K,aAAaC,YAAclI,KAAKC,KAAK4Q,EAAW+B,KAAKzV,OAAO8K,aAAaE,UAAY,EACjGrG,GACIkT,YAAa,iBACb9M,YAAa0K,KAAKzV,OAAO8K,aAAaC,YACtC8lG,SAAUA,EACVriG,WAAYjR,EACZyjB,UAAW,QAEfvL,KAAKo2J,YAAYlnK,GAErB,GAAI8Q,KAAK8jI,UAAY9jI,KAAKzV,OAAOsjC,uBAAuBC,aAAuC,IAAxB0pF,EAAUx+G,WACjC,IAAzCgH,KAAKzV,OAAO8K,aAAaC,YAAmB,CAC3C0K,KAAKzV,OAAOsjC,uBAAuBC,cACnC9tB,KAAKs0J,cAAe,EACpBt0J,KAAKu0J,YAAa,EAEtB,IAAInvK,MAASiG,MAAMC,KAAKumI,EAAUzrI,iBAAiB,WAC/C6X,EAAWmwB,SAAShpC,EAAI4a,KAAKzV,OAAO8K,aAAaE,SAAW,GAAGm1B,aAAa,iBAAkB,IAC9F3xB,EAAaq1B,SAAShpC,EAAI,GAAGslC,aAAa,iBAAkB,IAAM1qB,KAAKzV,OAAO8K,aAAaE,QAC/FyK,MAAKzV,OAAO8K,aAAaC,YAAclI,KAAKC,KAAK4Q,EAAW+B,KAAKzV,OAAO8K,aAAaE,UAAY,EAC7FyK,KAAKzV,OAAO8K,aAAaC,cACzBpG,GACIkT,YAAa,iBACb9M,YAAa0K,KAAKzV,OAAO8K,aAAaC,YACtC8lG,SAAUA,EACVriG,WAAYA,EACZwS,UAAW,MAEfvL,KAAKo2J,YAAYlnK,IAGrB8Q,KAAKzV,OAAOsjC,uBAAuBC,cAAgB9tB,KAAK8jI,UAAYthJ,oBAAkB0M,KAClF8Q,KAAKs0J,cAAgBt0J,KAAKu0J,cAC1B1iC,EAAU74H,UAAYgH,KAAKtW,OAK3CyqK,EAAehyK,UAAUi0K,YAAc,SAAUlnK,GAC7C,GAAIwZ,GAAQ1I,IACRA,MAAKzV,OAAO8K,aAAaC,cAAgBpG,EAAKksG,WAC1Cp7F,KAAKzV,OAAO8K,aAAaC,aAAe0K,KAAK4wH,SAC7C5wH,KAAK6iB,kBAAmB,EACpBrgC,oBAAkBwd,KAAKwlB,cAAct2B,EAAKoG,cAC1C2hD,WAAW,WACPvuC,EAAMyuJ,+BACNzuJ,EAAMne,OAAOsoB,OAAO,gBAAiB3jB,IACtC,KAGH+nD,WAAW,WACPvuC,EAAMyuJ,+BACNzuJ,EAAMne,OAAOsoB,OAAO8U,GAAkCz4B,IACvD,MAIP8Q,KAAKzV,OAAO8K,aAAaC,YAAc0K,KAAK4wH,UAIxDujC,EAAehyK,UAAU4yK,kBAAoB,SAAUljK,GAC/CmO,KAAKy0J,eACLz0J,KAAKy0J,eAAgB,EACrBz0J,KAAKo3J,gBAAgBvlK,IAGhBmO,KAAK6iB,kBAA0C,WAArB7iB,KAAKoC,aAAiD,QAArBpC,KAAKoC,YAIjEvQ,EAAMuT,KAAKpF,KAAKzV,OAAO8K,aAAaC,YAAa0K,KAAKzV,OAAO8K,aAAaE,UAH1EyK,KAAKq3J,cAAcxlK,IAO/BsiK,EAAehyK,UAAUk1K,cAAgB,SAAUxlK,GAC/C,GAAIokK,GAAgBj2J,KAAKzV,OAAOsjC,uBAAuBooI,aAEvD,IADcj2J,KAAKzV,OAAOsjC,uBAAuBC,YAE7C9tB,KAAKwlB,iBACLxlB,KAAKq0J,uBACLr0J,KAAKo0J,2BACLviK,EAAMkY,KAAK/J,KAAKy8C,YAChB5qD,EAAM+5F,KAAKqqE,EAAgBj2J,KAAKzV,OAAO8K,aAAaE,cAEnD,CACqC,WAAlCyK,KAAKzV,OAAOiE,aAAaC,MACzBuR,KAAKzV,OAAOoY,gBAEhB,IAAI7a,GAA6B,WAArBkY,KAAKoC,YAA2BpC,KAAKu8C,UAAYv8C,KAAKy8C,UAClE5qD,GAAMkY,KAAKjiB,GACX+J,EAAM+5F,KAAK,KAGnBuoE,EAAehyK,UAAUi1K,gBAAkB,SAAUvlK,GAC7CmO,KAAKzV,OAAOsjC,uBAAuBC,aAChC9tB,KAAKzV,OAAOsjC,uBAAuBooI,cAAgBj2J,KAAKzV,OAAOsjC,uBAAuBkoI,YACzF/1J,KAAKzV,OAAOsjC,uBAAuBooI,cAAgBj2J,KAAKzV,OAAOsjC,uBAAuBkoI,UAE1F,IAAIxgK,GAAWyK,KAAKzV,OAAO8K,aAAaE,SAAWyK,KAAKzV,OAAOsjC,uBAAuBooI,aACtFpkK,GAAMuT,KAAK,EAAG7P,IAElB4+J,EAAehyK,UAAU8yK,kBAAoB,SAAUjyK,GACnD,IAAIA,EAAE+kC,OAA+B,YAArB/kC,EAAEglC,QAAQn5B,QAA6C,cAArB7L,EAAEglC,QAAQn5B,OA0BzC,aAAV7L,EAAE4O,KAAgC,WAAV5O,EAAE4O,MAC/BoO,KAAKioB,WAAajlC,EAAE4O,SA3B6D,CACjFoO,KAAKioB,WAAajlC,EAAEglC,QAAQn5B,MAC5B,IAAIiF,GAAM3N,SAAS6vD,cACf/3C,EAAWmwB,SAASt6B,EAAI5K,cAAcwhC,aAAa,iBAAkB,IACrEmnG,EAAY7xH,KAAKzV,OAAOmO,aAAaC,iBACzCqH,MAAK/B,SAAgC,cAArBjb,EAAEglC,QAAQn5B,OAAyBoP,EAAW,EAAIA,EAAW,EAC7E+B,KAAK+7B,UAAY3N,SAASt6B,EAAI42B,aAAa,iBAAkB,GAC7D,IAAItlC,GAAM4a,KAAKzV,OAAO4mC,cAAclzB,GAChC6zH,EAAkB1kI,KAAK4hE,MAAM6iE,EAAUpoI,aAAeuW,KAAKzV,OAAOuC,eACtE,KAAK1H,GAAOmT,GAAcnT,EAAK4a,KAAKzV,SAAWqO,GAAexT,EAAK4a,KAAKnH,QAAS,CAC7E,GAAIvL,GAASlI,EAAMA,EAAI+D,wBAAwBmE,OAAS0S,KAAKzV,OAAOuC,cACpE,KAAKkT,KAAKzV,OAAOsjC,uBAAuBC,YAAa,CACjD,GAAyB,cAArB9qC,EAAEglC,QAAQn5B,SAA2B0J,GAAcnT,EAAK4a,KAAKzV,UAAYnF,GAAM,CAC/E,GAAIkyK,IAAQt3J,KAAK/B,SAAW6zH,GAAmBxkI,EAC3CiqK,EAAO1lC,EAAU74H,UAAYgH,KAAKzV,OAAOuC,cAC7C+kI,GAAU74H,UAAYs+J,EAAOC,EAAOA,EAAOD,EAEtB,YAArBt0K,EAAEglC,QAAQn5B,QAAwB+J,GAAexT,EAAK4a,KAAKnH,UAC3Dg5H,EAAU74H,UAAYgH,KAAK/B,SAAW3Q,QAK9C0S,MAAKioB,WAAajoB,KAAKy2C,QAOnC09G,EAAehyK,UAAUgxI,mBAAqB,WAC1C,GAAIzqH,GAAQ1I,IACZA,MAAKzV,OAAO2L,aAAaoD,OAAO,SAAUtW,GACtC0lB,EAAMgkH,aAAa1pI,EAAEX,OAASqmB,EAAM+tC,SAG5C09G,EAAehyK,UAAUg1K,6BAA+B,WACpD,GAAI/jG,GAAWpzD,KAAKzV,OAAOK,QAAQtE,cAAc,gBAC7C4sI,EAAUlzH,KAAKzV,OAAOK,QAAQtE,cAAc,eAC5CkxK,EAAWx3J,KAAKzV,OAAOK,QAAQtE,cAAc,cACjD,IAAI0Z,KAAKzV,OAAOsjC,uBAAuBC,cAAgBslC,GAAY8/D,GAAU,CACzE,GAAInxH,GAAUqxD,EAAWnsE,YAAW+Y,KAAK82J,qBAAqBx0K,MACxD2E,YAAW+Y,KAAK0sH,aACtB1sH,MAAK60J,oBAAsB70J,KAAKzV,OAAOmpD,WAAWg9E,qBAAqB8mC,EAAUz1J,GAC7E/B,KAAKzV,OAAOsL,iBACZmK,KAAK60J,oBAAsB70J,KAAKzV,OAAOmpD,WAClCg9E,qBAAqB1wH,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,eAAgByb,MAI3GoyJ,EAAehyK,UAAU80K,oBAAsB,WAC3C,GAAInxJ,GAAU9F,KAAKzV,OAAOmO,aAAaC,kBACnC8+J,GAAaz3J,KAAKzV,OAAOuU,YAAakB,KAAK25H,cAAgB35H,KAAKzV,OAAOuU,UAC3E,IAAIkB,KAAKysH,cAAgBzsH,KAAKzV,OAAOsjC,uBAAuBC,aAAe2pI,GACnEz3J,KAAKzV,OAAOiE,aAAaL,eAAiB3L,oBAAkBwd,KAAK25H,cAAe,CAChF,GAAIv0I,GAAM4a,KAAKzV,OAAO4mC,cAAcnxB,KAAK25H,aACzC,IAAInyI,OAAOC,KAAKuY,KAAK60J,qBAAqBzxK,QAAUgC,IAAQ4a,KAAKzV,OAAOmO,aAAapS,cAAc,gBAAiB,CAChH,GAAIklD,GAAQpmD,EAAI+D,wBAAwBO,GACpC8hD,GAAQ1lC,EAAQrc,cAAgB+hD,EAAQxrC,KAAKzV,OAAOuC,iBACpDkT,KAAKzV,OAAOuxB,QAAS,EACrB9b,KAAKzV,OAAOmpD,WAAWklC,UAAUxzF,OAMrD+uK,EAAehyK,UAAU+0K,mBAAqB,WAC1C,GAAIpxJ,GAAU9F,KAAKzV,OAAOmO,aAAaC,iBACnCqH,MAAKzV,OAAO8O,wBAAwBjW,QAAU4c,KAAKzV,OAAO4mC,cAAc,IAAMnxB,KAAKysH,cACnFzsH,KAAKzV,OAAOsjC,uBAAuBC,aAAe9tB,KAAKktC,QAAUpnC,EAAQxf,cAAc,gBAC3Ewf,EAAQ9M,UAAYgH,KAAKzV,OAAOuC,iBAExCkT,KAAKzV,OAAOuxB,QAAS,EACrB9b,KAAKzV,OAAOuuF,cAIxBq7E,EAAehyK,UAAU+yK,mBAAqB,SAAUlyK,GACvCmD,SAAS6vD,aAAtB,IACIjoB,GAAa/tB,KAAKzV,OAAOsL,eACzBg8H,EAAY7xH,KAAKzV,OAAOmO,aAAaC,kBACrCkqB,EAAmB7iB,KAAKzV,OAAOmoB,yBAAkD,mBAAvB1vB,EAAEkM,KAAKkT,YACjEy1B,EAA4C,eAAhC73B,KAAKzV,OAAO8R,iBAAoD,YAAhBrZ,EAAEyZ,SASlE,MARKomB,GAAqB7/B,EAAEkM,KAAK0G,UAAaiiC,IAAehV,IACrDA,GAAyC,OAArB7/B,EAAEkM,KAAKqc,UAC3BvoB,EAAE6b,MAAM06B,aAAav2C,EAAEsmC,KAAMtmC,EAAE6b,MAAMlG,mBAGrC3V,EAAE6b,MAAM/S,YAAY9I,EAAEsmC,OAGzByE,EAKD,GAAIlL,EACA,GAAoB,gBAAhB7/B,EAAEyZ,WAAgE,UAAhCuD,KAAKzV,OAAO8R,iBAA+C,iBAAhBrZ,EAAEyZ,UAC/EuD,KAAK03J,WAAa10K,EAAEsmC,SAEnB,IAAoC,eAAhCtpB,KAAKzV,OAAO8R,iBAAoD,YAAhBrZ,EAAEyZ,UACvDuD,KAAK23J,YAAc30K,EAAEsmC,SAEpB,CACD,GAAIzqB,GAAQmB,KAAKzV,OAAO+7B,0BAA0BhgC,cAAc,QAC3C,QAArBtD,EAAEkM,KAAKqc,UAAqB1M,EAAM06B,aAAav5B,KAAK03J,WAAY74J,EAAMlG,mBAChEkG,EAAM/S,YAAYkU,KAAK03J,YACT,iBAAhB10K,EAAEyZ,WACFuD,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,SAASwF,YAAYkU,KAAK23J,aAC/E33J,KAAKzV,OAAOK,QAAQtE,cAAc,2BAA2BA,cAAc,SAASwF,YAAY9I,EAAEsmC,OAGlGtpB,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,YAAYwF,YAAY9I,EAAE6b,OAEnFmB,KAAKzV,OAAO2R,cAAc8pJ,sBAC1BhmJ,KAAKgzH,4BAGR,CACD,GAAI/lI,OAAQ,EACQ,iBAAhBjK,EAAEyZ,UACFxP,EAAQ+S,KAAKzV,OAAO+7B,0BAA0BhgC,cAAc,YAEvC,YAAhBtD,EAAEyZ,WACPxP,EAAQ+S,KAAKzV,OAAO67B,2BAA2B9/B,cAAc,YACzB,eAAhC0Z,KAAKzV,OAAO8R,kBACZ2D,KAAKzV,OAAO2R,cAAc8pJ,sBAC1BhmJ,KAAKgzH,2BAIT/lI,EAAQ+S,KAAKzV,OAAOK,QAAQtE,cAAc,2BAA2BA,cAAc,YAC/C,eAAhC0Z,KAAKzV,OAAO8R,kBACZ2D,KAAKzV,OAAO2R,cAAc8pJ,sBAC1BhmJ,KAAKgzH,0BAGb/lI,EAAMnB,YAAY9I,EAAE6b,OACpBmB,KAAKuE,aAAaE,6BA9CtBzE,MAAKzV,OAAO2R,cAAc2sB,WAAW/8B,YAAY9I,EAAE6b,OACnDmB,KAAKgzH,uBAgDLhzH,MAAKygG,kBAAoBz9G,EAAEkM,KAAK0G,WAChCoK,KAAKygG,iBAAkB,EACvBzgG,KAAKzV,OAAO+2C,aAAaE,aAExBx+C,EAAEkM,KAAK0G,WACRoK,KAAKnH,OAAUmH,KAAKnH,OAAgEmH,KAAKnH,OAA5DmH,KAAKzV,OAAOkgC,UAAU,GAAGthC,wBAAwBO,IAC1Em5B,IACI7iB,KAAKzV,OAAOsjC,uBAAuBC,aAAe9tB,KAAKylB,WACvDosG,EAAU74H,UAAYgH,KAAKtW,KAE/BuS,GAAe+D,KAAKzV,QACpByV,KAAK43J,aAAa50K,EAAE6b,MAAO7b,EAAEkM,KAAK6J,YAClCiH,KAAKioB,eAAal7B,IAEtBiT,KAAKk3J,qBACLl3J,KAAK8jI,UAAW,GAEpB9jI,KAAK6iB,kBAAmB,GAE5BsxI,EAAehyK,UAAUy1K,aAAe,SAAU/4J,EAAO9F,GACrD,GAAI2P,GAAQ1I,KACR5a,EAAM4a,KAAKzV,OAAO4mC,cAAcnxB,KAAK/B,SACzC,IAAI+B,KAAKvY,KAAKkL,KAAK,SAAU/Q,GAAS,MAAOA,KAAU8mB,EAAMuf,aAAgB,CAUzE,IATwB,cAApBjoB,KAAKioB,YAA+BjoB,KAAKzV,OAAOsjC,uBAAuBC,aAAmC,YAApB9tB,KAAKioB,aAC3FgvB,WAAW,WAEM7xD,EAAIwK,MAAM,GAChBmkD,OAAQ2C,eAAe,IAC9BhuC,EAAMne,OAAOggC,UAAU7hB,EAAMzK,UAC7ByK,EAAMne,OAAOmO,aAAaC,kBAAkBK,WAAa0P,EAAMne,OAAOuC,gBACvE,GAEiB,aAApBkT,KAAKioB,WAA2B,CAChC,GAAI++B,GAAQhnD,KAAKzV,OAAO4mC,cAAcp4B,EAClCiuD,IACAA,EAAMp3D,MAAM,GAAGmkD,QAGC,WAApB/zC,KAAKioB,YACLppB,EAAMvY,cAAc,UAAUsJ,MAAM,GAAGmkD,UAInDogH,EAAehyK,UAAUgzK,wBAA0B,SAAUnyK,GACzD,GAAI6/B,GAAmB7iB,KAAKzV,OAAOmoB,yBAAkD,mBAAvB1vB,EAAEkM,KAAKkT,WACrE,KAAKpf,EAAEkM,KAAK0G,UAAYitB,GAAoB7iB,KAAKzV,OAAOsjC,uBAAuBC,aAAe9tB,KAAKylB,SAAU,CACzG,GAAIzqB,MAAU3P,MAAMC,KAAK0U,KAAKzV,OAAOulD,kBAAkB1pD,iBAAiB,UACxE,IAAyB,SAArBpD,EAAEkM,KAAKqc,UAAsB,CAC7B,GAAIvL,KAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAQ,CACnEy0K,KAAiBxsK,MAAMC,KAAK0U,KAAKzV,OAAOulD,kBAAkB1pD,iBAAiB,MAC/E4Z,MAAK83J,kBAAkBD,EAAa70K,EAAEkM,MAE1C,GAAI6oK,GAAc/3J,KAAKzV,OAAOK,QAAQtE,cAAc,eAAiB,EAAI,CACzE0Z,MAAKg4J,cAAch9J,EAAMgF,KAAKzV,OAAO8K,aAAaE,SAAWwiK,GAEjE,GAAyB,OAArB/0K,EAAEkM,KAAKqc,UACP,GAAIvL,KAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAAQ,CACvE,GAAIy0K,MAAiBxsK,MAAMC,KAAK0U,KAAKzV,OAAOulD,kBAAkB1pD,iBAAiB,MAC/E4Z,MAAK83J,kBAAkBD,EAAa70K,EAAEkM,UAGtC8Q,MAAKi4J,iBAAiBj9J,EAAMA,EAAK5X,OAAS,EAAGJ,EAAEkM,KAGvD8Q,MAAK8jI,UAAW,EAChB9jI,KAAKtW,IAAMsW,KAAKk4J,mBAAmBl1K,EAAEkM,QAG7CilK,EAAehyK,UAAU+1K,mBAAqB,SAAUhpK,GACpD,GAAIxF,GAAM,EACNyuK,EAAYn4J,KAAKzV,OAAOmO,aAAaC,iBACzC,IAAuB,SAAnBzJ,EAAKqc,UAAsB,CACvBvL,KAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO7F,cAAcvB,QAAQC,SAAW4c,KAAK00J,oBAC/EhrK,EAAMsW,KAAKo4J,mBAEf,IAAIP,MAAiBxsK,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAaC,kBAAkBvS,iBAAiB,mBACxFiyK,EAAe,CACfr4J,MAAK00J,oBAAsBlyK,oBAAkBq1K,KAC7CQ,EAAejrK,KAAK2+B,OAAO8rI,EAAYz0K,OAAS,GAAK4c,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAM3F,KAJA,GAAIxB,GAAQy2K,GACNr4J,KAAKzV,OAAO8K,aAAaE,UAAYyK,KAAKzV,OAAOsjC,uBAAuBkoI,UAAY,GACtFuC,EAAsB,EACtB70K,EAAI,EACD60K,EAAsBH,EAAUj/G,cAEnCo/G,IADA70K,EAC0Buc,KAAKzV,OAAOuC,cAG1CpD,KAAQ9H,GADR6B,GAAQ,IACauc,KAAKzV,OAAOuC,eAErC,GAAuB,OAAnBoC,EAAKqc,UACL,GAAIvL,KAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO7F,cAAcvB,QAAQC,SAAW4c,KAAK00J,kBAC/EhrK,EAAMsW,KAAKwlB,cAAcxlB,KAAKzV,OAAO8K,aAAaC,aAAalS,OAAS4c,KAAKzV,OAAOuC,mBAEnF,IAAIkT,KAAK00J,kBAAmB,CAG7B,IAAK,GAFD6D,GAAcv4J,KAAKwlB,cAAcxlB,KAAKzV,OAAO8K,aAAaC,aAC1D9Q,EAAQ,EACHf,EAAI,EAAGA,EAAI80K,EAAYn1K,OAAQK,IAChC80K,EAAY90K,GAAGW,cACfI,GAGRkF,IAAO0D,KAAK2+B,MAAMvnC,EAAQwb,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAAU4c,KAAKzV,OAAOuC,mBAGlFpD,IAAQsW,KAAKzV,OAAO8K,aAAaE,SAAWyK,KAAKzV,OAAOuC,eAAiBR,GAGjF,OAAO5C,IAEXyqK,EAAehyK,UAAUi2K,iBAAmB,WAExC,SADc/sK,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,mBACvDhD,OAAS4c,KAAKzV,OAAOuC,gBAErCqnK,EAAehyK,UAAU61K,cAAgB,SAAUh9J,EAAMw9J,GAMrD,IAAK,GALDC,GAAYz4J,KAAKzV,OAAOsL,eACxB6N,EAAyC,eAAhC1D,KAAKzV,OAAO8R,mBAChBhR,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQtE,cAAc,2BAA2BF,iBAAiB,WAAa,KAC3G6+B,EAAcwzI,KACXptK,MAAMC,KAAK0U,KAAKzV,OAAO67B,2BAA2BhgC,iBAAiB,WAAa,KAC9E3C,EAAI,EAAGA,GAAK+0K,EAAS/0K,IACtBuc,KAAKzV,OAAOuU,YAAckB,KAAKzV,OAAO8K,aAAaC,cAAgB0K,KAAKzV,OAAOsjC,uBAAuBkoI,UAAY,GAC/GtyK,EAAK+0K,EAAUx4J,KAAKzV,OAAOuU,aAGlCjd,SAAOmZ,EAAKvX,IACRwhC,GACApjC,SAAOojC,EAAYxhC,IAEnBigB,GACA7hB,SAAO6hB,EAAOjgB,MAI1B0wK,EAAehyK,UAAU81K,iBAAmB,SAAUj9J,EAAMw9J,EAAStpK,GACjE,GAAI2qC,GAAM,EACN4+H,EAAYz4J,KAAKzV,OAAOsL,eACxBovB,EAAcwzI,KACXptK,MAAMC,KAAK0U,KAAKzV,OAAO67B,2BAA2BhgC,iBAAiB,WAAa,KACnFsd,EAAyC,eAAhC1D,KAAKzV,OAAO8R,mBAClBhR,MAAMC,KAAK0U,KAAKzV,OAAOK,QAAQtE,cAAc,2BAA2BF,iBAAiB,WAAa,KACzGmP,EAAWyK,KAAKzV,OAAO8K,aAAaE,UACnCkjK,GAAaz4J,KAAKwlB,cAAct2B,EAAKksG,UAAUh4G,OAASmS,IACzDskC,EAAM75B,KAAKzV,OAAO8K,aAAaE,SAAWyK,KAAKwlB,cAAct2B,EAAKksG,UAAUh4G,QAE5Eq1K,GAAaz4J,KAAKq0J,oBAAoBnlK,EAAKksG,UAAU,GAAGh4G,OAASmS,IACjEskC,EAAM75B,KAAKzV,OAAO8K,aAAaE,SAAWyK,KAAKq0J,oBAAoBnlK,EAAKksG,UAAU,GAAGh4G,OAEzF,KAAK,GAAIK,GAAI+0K,EAAS3+H,EAAMtkC,EAAU9R,IAClCo2C,IACAh4C,SAAOmZ,EAAKvX,IACRwhC,GACApjC,SAAOojC,EAAYxhC,IAEnBigB,GACA7hB,SAAO6hB,EAAOjgB,KAI1B0wK,EAAehyK,UAAU21K,kBAAoB,SAAU98J,EAAM9L,GACzD,GAAuB,SAAnBA,EAAKqc,UAIL,IAAK,GAHDmyC,GAAU19C,KAAKzV,OAAOkgC,UAAUzqB,KAAKzV,OAAO8K,aAAaE,UACzDmjK,EAAetqI,SAASsvB,EAAQhzB,aAAa,iBAAkB,IAAM,EACrE1uB,EAAI,EACCvY,EAAI,EAAGuY,EAAI08J,EAAcj1K,IACzBuX,EAAKvX,GAAGgH,UAAUC,SAAS,SAI5BsR,EAAIoyB,SAASpzB,EAAKvX,GAAGinC,aAAa,iBAAkB,IAHpD7oC,SAAOmZ,EAAKvX,GAOxB,IAAuB,OAAnByL,EAAKqc,UAAoB,CAKzB,IAAK,GAJDpP,MAAiB9Q,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,WACtEm2D,EAAYnuB,SAASjyB,EAAYA,EAAY/Y,OAAS,GAAGsnC,aAAa,iBAAkB,IACxFtlB,EAAOhY,KAAKC,KAAKkvD,EAAYv8C,KAAKzV,OAAO8K,aAAaE,UACtDwD,EAAa,EACRtV,EAAIuc,KAAKzV,OAAO8K,aAAaC,YAAc,EAAG7R,EAAI2hB,EAAM3hB,IAC7DsV,GAAciH,KAAKwlB,cAAc/hC,GAAGL,MAExC,KAASK,EAAIsV,EAAYtV,EAAIuX,EAAK5X,OAAQK,IACtC5B,SAAOmZ,EAAKvX,MAIxB0wK,EAAehyK,UAAUizK,oBAAsB,SAAUlmK,EAAMypK,GAC3D,GAAI91I,GAAmB7iB,KAAKzV,OAAOmoB,yBAAgD,mBAArBxjB,EAAKkT,WACnE,KAAKpC,KAAKy0J,gBAAkBjyK,oBAAkBwd,KAAKzV,OAAOqoB,uBAAyBiQ,IAC3E7iB,KAAKkzC,QAAQvgD,KAAK,SAAU/Q,GAAS,MAAOA,KAAUsN,EAAKkT,eAAmBu2J,GAAgB,CAC9F,GAAI9mC,GAAY7xH,KAAKzV,OAAOmO,aAAaC,iBACzCqH,MAAKy0J,eAAgB,EACrB5iC,EAAU74H,UAAY,EACtBgH,KAAKzV,OAAO8K,aAAaC,YAAc,EACvC0K,KAAKwlB,cAAgBxlB,KAAKq0J,uBAC1Br0J,KAAKo0J,2BACLp0J,KAAK62J,4BACL72J,KAAKylB,UAAW,EAChBzlB,KAAKtW,IAAM,EACXsW,KAAK40J,wBAAyB,EAC9B50J,KAAK00J,mBAAoB,EACzB10J,KAAKzV,OAAO2R,cAAcupB,SAAWzlB,KAAKylB,SAC1CzlB,KAAKzV,OAAO2R,cAAc2pB,UAAY7lB,KAAKylB,SAC3CzlB,KAAKzV,OAAO2R,cAAcwpB,eAC1B1lB,KAAKzV,OAAO2R,cAAcypB,uBAItCwuI,EAAehyK,UAAUmkB,SAAW,SAAUtjB,GAC1C,GAAIgd,KAAKzV,OAAOmoB,yBAA2B1S,KAAKzV,OAAOsjC,uBAAuBC,YAAa,CACvF,GAAI2qI,GAAYz4J,KAAKzV,OAAOsL,eACxBwL,EAAMre,EAAEkM,KAAK0G,SAAW,EAAI,EAC5BkmB,EAAgC,mBAAvB94B,EAAEkM,KAAKkT,cACS,WAArBpC,KAAKoC,aAAiD,QAArBpC,KAAKoC,aAC1C9M,EAAc0K,KAAKzV,OAAO8K,aAAaC,aACtCmjK,GAAaz4J,KAAK40J,yBAA6B6D,IAAcjxK,OAAOC,KAAKuY,KAAKwlB,eAAepiC,QAAW04B,KACzG9b,KAAK40J,wBAA0B5xK,EAAEkM,KAAK0G,SACtCoK,KAAKm2J,gBAAgBnzK,EAAEgnC,UAAWhnC,EAAEkM,KAAM4sB,KAEzC28I,GAAaj2K,oBAAkBwd,KAAKwlB,cAAcxlB,KAAKzV,OAAO8K,aAAaC,gBAC5E0K,KAAKwlB,cAAcxlB,KAAKzV,OAAO8K,aAAaC,aAAetS,EAAEgnC,UAC7DhqB,KAAK62J,wBAAwB72J,KAAKwlB,gBAElCizI,IACa,IAARp3J,GAAa7e,oBAAkBwd,KAAKq0J,oBAAoB/+J,MACrD0K,KAAKq0J,oBAAoB/+J,GAAa+L,GAAKje,UAC/C4c,KAAK44J,kBAAkBtjK,GACvB0K,KAAKq0J,oBAAoB/+J,GAAa+L,GAAOre,EAAEgnC,UACnC,IAAR3oB,GACArB,KAAK62J,wBAAwB72J,KAAKq0J,sBAI1CrxK,EAAE6/B,mBAAqB7iB,KAAKylB,WAC5BzlB,KAAKylB,UAAYnwB,EAAc,GAAK0K,KAAKzV,OAAOsjC,uBAAuBkoI,WAAc,EACrF/1J,KAAKzV,OAAO2R,cAAcupB,SAAWzlB,KAAKylB,YAItD0uI,EAAehyK,UAAUg0K,gBAAkB,SAAU7zK,EAAM4M,EAAM4sB,EAAQ+8I,GAIrE,IAAK,GAHD9qI,GAAa/tB,KAAKzV,OAAOsL,eACzBwL,EAAMnS,EAAK0G,SAAW,EAAI,EAC1BoG,EAAK8f,EAAa9b,KAAK6uH,WAAT,EACTprI,EAAI,EAAGA,GAAKuc,KAAKzV,OAAOsjC,uBAAuBooI,cAAexyK,IAAK,CACxE,GAAIsV,IAActV,EAAI,GAAKuc,KAAKzV,OAAO8K,aAAaE,SAChDmvD,EAAWjhE,EAAIuc,KAAKzV,OAAO8K,aAAaE,QACxCyK,MAAKzV,OAAOwe,eAAiB/I,KAAKzV,OAAO7F,cAAcvB,QAAQC,SAAWy1K,EAC1E74J,KAAK84J,qBAAqBx2K,EAAM0Z,EAAGjD,EAAY2rD,GAG3Cm0G,EACA74J,KAAKo0J,wBAAwBp4J,GAAK1Z,EAAK+I,MAAM0N,EAAY2rD,GAGrD32B,GACA/tB,KAAK44J,kBAAkB58J,GACvBgE,KAAKq0J,oBAAoBr4J,GAAGqF,GAAO/e,EAAK+I,MAAM0N,EAAY2rD,GAC1D1kD,KAAK62J,wBAAwB72J,KAAKq0J,uBAGlCr0J,KAAKwlB,cAAcxpB,GAAK1Z,EAAK+I,MAAM0N,EAAY2rD,GAC/C1kD,KAAK62J,wBAAwB72J,KAAKwlB,gBAI9CxpB,MAGRm4J,EAAehyK,UAAUy2K,kBAAoB,SAAU9wK,GAC9CkY,KAAKq0J,oBAAoBvsK,KAC1BkY,KAAKq0J,oBAAoBvsK,aAGjCqsK,EAAehyK,UAAU22K,qBAAuB,SAAUx2K,EAAMwF,EAAOqnI,EAAQC,GAG3E,IAAK,GAFD2pC,MACAhgK,EAAa,EACRtV,EAAI,EAAGA,GAAK+D,OAAOC,KAAKuY,KAAKwlB,eAAepiC,OAAQK,IACzDsV,GAAciH,KAAKwlB,cAAc/hC,GAAGL,MAGxC,KAAK,GADD4Y,GAAImzH,EACC1rI,EAAIsV,EAAYtV,EAAInB,EAAKc,QAAU4Y,EAAIozH,KACxC9sI,EAAKmB,GAAGqE,MAAQsnI,GAAU9sI,EAAKmB,GAAGW,gBAClC4X,EAAI1Z,EAAKmB,GAAGW,aAAe4X,EAAI1Z,EAAKmB,GAAGqE,MACvCixK,EAAS70K,KAAK5B,EAAKmB,OAEnBnB,EAAKmB,GAAGqE,OAASsnI,GAAU9sI,EAAKmB,GAAGqE,QAAUsnI,EAAS,IALN3rI,KASxDuc,KAAKwlB,cAAc19B,GAASixK,EAC5B/4J,KAAK62J,wBAAwB72J,KAAKwlB,gBAEtC2uI,EAAehyK,UAAU00K,wBAA0B,SAAUv0K,GACzD0d,KAAKzV,OAAO2R,cACPspB,cAAgBljC,GAKzB6xK,EAAehyK,UAAU0rB,QAAU,WAC/B7N,KAAKiuC,uBAEFkmH,KClhCP30I,GAAwC,WACxC,GAAIC,GAAgB,SAAUrX,EAAGsX,GAI7B,OAHAD,EAAgBj4B,OAAOm4B,iBAChBC,uBAA2BxzB,QAAS,SAAUgc,EAAGsX,GAAKtX,EAAEwX,UAAYF,IACvE,SAAUtX,EAAGsX,GAAK,IAAK,GAAIG,KAAKH,GAAOA,EAAEx0B,eAAe20B,KAAIzX,EAAEyX,GAAKH,EAAEG,MACpDzX,EAAGsX,GAE5B,OAAO,UAAUtX,EAAGsX,GAEhB,QAASI,KAAO9f,KAAK+f,YAAc3X,EADnCqX,EAAcrX,EAAGsX,GAEjBtX,EAAEjmB,UAAkB,OAANu9B,EAAal4B,OAAOw4B,OAAON,IAAMI,EAAG39B,UAAYu9B,EAAEv9B,UAAW,GAAI29B,QAenFk5I,GAAuC,SAAUh3I,GAEjD,QAASg3I,GAAsBzuK,EAAQiY,GACnC,GAAIkG,GAAQsZ,EAAO12B,KAAK0U,KAAMzV,EAAQiY,IAAYxC,IAyBlD,OAxBA0I,GAAMuwJ,WAAa,EACnBvwJ,EAAMwwJ,cACNxwJ,EAAMywJ,iBAAkB,EACxBzwJ,EAAM0wJ,cACN1wJ,EAAM2wJ,gBACN3wJ,EAAM4wJ,iBACN5wJ,EAAM6wJ,aACN7wJ,EAAM8wJ,eACN9wJ,EAAM+wJ,wBACN/wJ,EAAMtG,aAAe,SAAU,cAAe,UAAW,SAAU,OAAQ,YAAa,MAAO,UAE/FsG,EAAMgxJ,WAAY,EAElBhxJ,EAAMixJ,eAAiB,EAEvBjxJ,EAAM0L,eAAe1L,EAAMne,OAAOue,gBAAiBJ,EAAMne,OAAOoqB,eAAeP,aAE/E1L,EAAMggF,oBAAqB,EAC3BhgF,EAAMlG,QAAUA,EAChBkG,EAAMo0G,eAAiB,GAAIp6F,IAAoBha,EAAMne,QACrDme,EAAMia,gBAAkB,GAAIZ,IAA2BrZ,EAAMne,QAC7Dme,EAAMka,gBAAkB,GAAIR,IAA6B1Z,EAAMne,QAC/Dme,EAAM9F,YAAc,GAAIC,IAAY6F,EAAMlG,QAAS,KAAMkG,EAAMne,QAC/Dme,EAAMqkH,gBACCrkH,EA8jCX,MAzlCA8W,IAAUw5I,EAAuBh3I,GA6BjCg3I,EAAsB72K,UAAU4qI,cAAgB,WAC5C/sH,KAAKzV,OAAOy2C,iBAAiBa,GAAoB7hC,KAAKqM,YAAYgH,KAAKrT,OACvEA,KAAKzV,OAAOy2C,iBAAiB9Z,GAAuBlnB,KAAKsM,eAAe+G,KAAKrT,OAC7EA,KAAKzV,OAAO6lB,GAAG4kB,GAAmBh1B,KAAK45J,oBAAqB55J,MAC5DA,KAAKzV,OAAO6lB,GpGuYO,coGvYkBpQ,KAAKsG,SAAUtG,MACpDA,KAAKzV,OAAO6lB,GpGwYe,2BoGxYkBpQ,KAAKu8E,cAAev8E,MACjEA,KAAKzV,OAAO6lB,GAAGkX,GAAgCtnB,KAAKunB,WAAYvnB,MAChEA,KAAKzV,OAAO6lB,GpGwYO,iBoGxYkBpQ,KAAK65J,iBAAkB75J,OAGhEg5J,EAAsB72K,UAAUg8H,cAAgB,SAAU3+G,GACtD,GAAIkJ,GAAQ1I,KACRoF,EAAOpF,KAAKzV,OAAO8K,aAAaC,YAChCs/E,EAAa50E,KAAKo5J,WAAWh0J,GAC7BzZ,EAAM6T,EAAGkrB,aAAa,YACtBovI,EAAW95J,KAAK+5J,uBAAuBpuK,GACvC+4F,IAAa9P,EAAWklF,EAAW,IAAKllF,EAAWklF,GAAUh1K,OAAS8vF,EAAWklF,EAAW,GAAGh1K,OAC/FxC,EAAOsyF,EAAWklF,GAClBloK,EAAMoO,KAAKg6J,sBAAsBF,EAAUllF,GAC3C5xF,GAAMi3K,kBAAmBz6J,EAAI06J,UAAW53K,EAAM63K,eAAe,EAAMlzI,QAAQ,EAC/EjnB,MAAKzV,OAAOotB,QpGoDa,sBoGpDuB30B,EAAG,SAAUkM,GACrDA,EAAK+3B,SAGT/3B,EAAKzH,KAAOmK,EAAInK,KAChByH,EAAK0b,OAAShZ,EAAIgZ,OAClB1b,EAAK+O,SAAWuB,EAAGvB,SACnB/O,EAAKknK,aAAelnK,EAAKirK,gBAAkBz1E,GACtCx1F,EAAKirK,eAAiBz1E,GACvBh8E,EAAM0xJ,YAAYzuK,IAEtBuD,EAAK6a,KAAO,EACZ7a,EAAK08F,KAAOljF,EAAMnT,SAClBjT,EAAK6B,SAAWukB,EAAM6wJ,UAAUn0J,GAAM9iB,EAAKqJ,KAAKxH,UAAW,EAC3DukB,EAAM2xJ,iBAAiBnrK,OAI/B8pK,EAAsB72K,UAAUi8H,gBAAkB,SAAU5+G,GACxD,GAAIkJ,GAAQ1I,KACRoD,EAAQpD,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aACjDuoH,EAASr+G,EAAGvB,SACZtS,EAAM6T,EAAGkrB,aAAa,YACtB4vI,EAAet6J,KAAK+5J,uBAAuBpuK,GAC3C3I,GACAi3K,kBAAmBz6J,EAAI06J,UAAW92J,EAAMk3J,GAAerzI,QAAQ,EAEnEjnB,MAAKzV,OAAOotB,QpG2Be,wBoG3BuB30B,EAAG,SAAUkM,GACvDA,EAAK+3B,SAGT/3B,EAAK/K,UAAW,EAChBukB,EAAMgI,WAAW4pJ,EAAcz8C,OAIvCm7C,EAAsB72K,UAAUy3K,oBAAsB,WAClD,GAAI/nC,GAAY7xH,KAAKzV,OAAOmO,aAAaC,kBACrCq5H,EAAY5kI,KAAK4hE,MAAM6iE,EAAUpoI,aAAeuW,KAAKzV,OAAOuC,gBAAkB,CAClFkT,MAAKzK,SAAWyK,KAAKzK,SAAWyK,KAAKzK,SAAuB,EAAZy8H,EAChDhyH,KAAKgyH,UAAY5kI,KAAKC,KAAK2S,KAAKzK,SAAW,IAG/CyjK,EAAsB72K,UAAUo4K,oBAAsB,WAClDv6J,KAAKo6J,cAETpB,EAAsB72K,UAAUi4K,WAAa,SAAUI,GACnDA,EAAOA,GAAcx6J,KAAKy6J,0BAC1B,IAAIr3J,GAAQpD,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,YACrD,IAAIklK,EAAKp3K,OACL,IAAK,GAAIK,GAAI,EAAGA,EAAI+2K,EAAKp3K,OAAQK,IAAK,CAClC,GAAIi3K,GAAS16J,KAAK+5J,uBAAuBS,EAAK/2K,IAC1Ck3K,EAASv3J,EAAMs3J,EACnB,IAAKC,EAAL,CAGA,GAAI36J,KAAKs5J,cAAct5J,KAAKzV,OAAO8K,aAAaC,aAAaqlK,EAAOhvK,KAChE,IAAK,GAAI+K,GAAMgkK,EAAS,EAAGhkK,EAAM0M,EAAMhgB,OAAQsT,IAAO,CAClD,GAAI0M,EAAM1M,GAAK5R,SAAW61K,EAAO71K,QAAUse,EAAM1M,GAAK5R,OAAS61K,EAAO71K,OAAQ,OACnEkb,MAAKs5J,cAAct5J,KAAKzV,OAAO8K,aAAaC,aAAaqlK,EAAOhvK,IACvE,OAEAyX,EAAM1M,GAAKtS,oBACJ4b,MAAKs5J,cAAct5J,KAAKzV,OAAO8K,aAAaC,aAAa8N,EAAM1M,GAAK/K,KAIvF,GAAIgvK,EAAOx2K,SAAU,CACjB,GAAIqb,GAAKQ,KAAKzV,OAAOsgC,mBAAmB8vI,EAAOhvK,IAC/C,KAAK6T,EACD,MAEJQ,MAAKzV,OAAO81F,YAAYi9B,mBAAmB99G,EAAGlZ,cAAc,wBAEhE,GAAIilD,GAAQvrC,KAAK46J,cAAcF,EAC/B,IAAKnvH,EAAMnoD,OAAX,CAGA,GAAIy3K,KACAtvH,GAAMA,EAAMnoD,OAAS,GAAGgB,eACxBy2K,EAAW76J,KAAK86J,0BAA0B13J,EAAM1b,QAAQ6jD,EAAMA,EAAMnoD,OAAS,KAAK,GAAO,EAAO,MAAM,GAAM,GAEhH,IAAI0a,GAAQsF,EAAM1b,QAAQ6jD,EAAM,IAC5BxtC,EAAM88J,EAASz3K,OAASggB,EAAM1b,QAAQmzK,EAASA,EAASz3K,OAAS,IAAMggB,EAAM1b,QAAQ6jD,EAAMA,EAAMnoD,OAAS,GAC9GggB,GAAMoC,OAAO1H,EAAOC,GAAOD,EAAQ,IACnCkC,KAAK+6J,oBAIjB/B,EAAsB72K,UAAU44K,cAAgB,WAC5C,GAAI31J,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC8N,EAAQpD,KAAKo5J,WAAWh0J,EAC5BpF,MAAKu5J,aACLv5J,KAAKw5J,cACL,KAAK,GAAI/1K,GAAI,EAAGA,EAAI2f,EAAMhgB,OAAQK,IAC9Buc,KAAK4tB,aAAaxqB,EAAM3f,GAAIA,IAGpCu1K,EAAsB72K,UAAUs4K,yBAA2B,WAGvD,IAAK,GAFDr1J,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChCklK,KACK/2K,EAAI,EAAGA,EAAIuc,KAAKy5J,qBAAqBr0J,GAAMhiB,OAAQK,IACxD+2K,EAAKt2K,KAAK8b,KAAKy5J,qBAAqBr0J,GAAM3hB,GAAGkI,IAEjD,OAAO6uK,IAGXxB,EAAsB72K,UAAU43K,uBAAyB,SAAUpuK,GAC/D,MAAOqU,MAAKw5J,YAAYx5J,KAAKzV,OAAO8K,aAAaC,aAAa3J,IAElEqtK,EAAsB72K,UAAU03K,iBAAmB,SAAU3qK,GACzD,GAAI8Q,KAAKzV,OAAO7F,cAAcvB,QAAQC,QAClC8L,EAAKxN,QAAUyI,EAAa+E,EAAKxN,OAAQ,cAAsD,OAAtCwN,EAAKxN,OAAOwH,cAAcwjC,QAAkB,CACrG,IAAKx9B,EAAK8vF,UAAY70F,EAAa+E,EAAKxN,OAAQ,SAC5C,MAEJ,IACIiK,GADMuD,EAAKxN,OAAOwH,cACRwhC,aAAa,WAC3B,IAAIx7B,EAAK8vF,SAAU,CACf,GAAI3hF,GAAS2C,KAAKg7J,YAAYrvK,EAE9B,KADIgvK,EAAS36J,KAAKg7J,YAAY39J,EAAOkhB,YAC1Bn6B,cAAgBu2K,EAAOx2K,SAAU,CACpC82K,EAASj7J,KAAKk7J,mBAAmB79J,EAAOkhB,UAC5Cve,MAAKzV,OAAO81F,YAAYi9B,mBAAmB29C,EAAOrrK,MAAMyN,EAAOvY,OAAS,SAG3E,CACD,GAAI61K,GAAS36J,KAAKg7J,YAAYrvK,EAC9B,IAAIgvK,EAAOv2K,eAAiBu2K,EAAOx2K,SAAU,CACzC,GAAI82K,GAASj7J,KAAKk7J,mBAAmBvvK,EACrCqU,MAAKzV,OAAO81F,YAAYi9B,mBAAmB29C,EAAOrrK,MAAM+qK,EAAO71K,aAK/Ek0K,EAAsB72K,UAAU64K,YAAc,SAAUrvK,GACpD,MAAOqU,MAAKu5J,UAAUv5J,KAAKzV,OAAO8K,aAAaC,aAAa3J,IAEhEqtK,EAAsB72K,UAAUkqB,YAAc,SAAUnd,GACpD,IAAKA,EAAK+3B,OAAQ,CAKd,GAJKjnB,KAAKoC,YAAYzP,KAAK,SAAU/Q,GAAS,MAAOA,KAAUsN,EAAKkT,gBAChEpC,KAAKo5J,cACLp5J,KAAKm7J,uBAEgB,YAArBjsK,EAAKkT,aAA6BpC,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAEpE,IAAK,GADDqE,GAAOD,OAAOC,KAAKuY,KAAKo5J,YACnB11K,EAAI,EAAGA,EAAI+D,EAAKrE,OAAQM,IAE7B,IAAK,GADD0f,GAAQpD,KAAKo5J,WAAW3xK,EAAK/D,IACxBD,EAAI,EAAGA,EAAI2f,EAAMhgB,OAAQK,IAI9B,GAHI2f,EAAM3f,GAAGW,eAAiB4b,KAAK4iB,gBAAgBJ,WAC/CxiB,KAAKo7J,iBAAiBh4J,EAAM3f,GAAI,KAAMgE,EAAK/D,IAE3C0f,EAAM3f,GAAGQ,UAAW,CACpB,GAAIo3K,GAAOnsK,EAAKmiB,UAAYjO,EAAM3f,GAAGqB,OACjCw2K,EAAKpsK,EAAKkiB,QAAUhO,EAAM3f,GAAGqB,MACjCkb,MAAKu7J,UAAUn4J,EAAM3f,GAAGmM,MAAOyrK,EAAMC,IAK5B,WAArBpsK,EAAKkT,aACe,QAAhBlT,EAAKL,QAAyC,SAArBK,EAAKkT,eAClCpC,KAAKo5J,cACLp5J,KAAKm7J,yBAIjBnC,EAAsB72K,UAAUmqB,eAAiB,SAAUpd,GAClDA,EAAK+3B,QAA+B,gBAArB/3B,EAAKkT,aAAsD,cAArBlT,EAAKkT,aACnC,WAArBlT,EAAKkT,aAAiD,SAArBlT,EAAKkT,aAA+C,YAArBlT,EAAKkT,aACxEpC,KAAKw7J,eAGbxC,EAAsB72K,UAAUg5K,oBAAsB,WAClDn7J,KAAKq5J,gBACLr5J,KAAKs5J,iBACLt5J,KAAKu5J,aACLv5J,KAAKw5J,eACLx5J,KAAKy5J,yBAETT,EAAsB72K,UAAUo5K,UAAY,SAAU32J,EAAKy2J,EAAMC,GAC7D,GAAID,GAAQz2J,EAAIxhB,OAEZ,IADA,GAAI4Y,GAAIq/J,EAAOz2J,EAAIxhB,OACJ,EAAP4Y,KACJ4I,EAAI1gB,SAAK6I,GAGjB6X,GAAIY,OAAO61J,EAAM,EAAGz2J,EAAIY,OAAO81J,EAAI,GAAG,KAE1CtC,EAAsB72K,UAAUuuB,WAAa,SAAUrP,EAAK+uD,GACxD,GAGIqrG,GAHAr2J,EAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC0F,EAAOgF,KAAKo5J,WAAWh0J,GACvB5D,KAASnW,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,MAElE,IAAI4Z,KAAKzV,OAAO8B,WAAWjJ,OAAQ,CAC/B,GAAIwhD,GAAM5kC,KAAK07J,2BAA2Br6J,EAC1Co6J,GAAS72H,EAAIxhD,OAASwhD,EAAIA,EAAIxhD,OAAS,GAAGuI,QAAMoB,GAEpD,GAAIjI,GAASkW,EAAKqG,GAAKvc,MACvBkb,MAAKjZ,SAASiZ,KAAK46J,cAAcv5J,IACjCrG,EAAKqG,GAAKld,SAAW6b,KAAKu5J,UAAUn0J,GAAMpK,EAAKqG,GAAK1V,KAAKxH,UAAW,CAEpE,KAAK,GADDw3K,GACKl4K,EAAI4d,EAAM,EAAG5d,EAAIuX,EAAK5X,OAAQK,IAAK,CACxC,GAAIuX,EAAKvX,GAAGqB,SAAWA,GAAUkW,EAAKvX,GAAGqB,OAASA,EAAQ,CACtD62K,EAAS3gK,EAAKvX,GAAGkI,GACjB,OAEAqP,EAAKvX,GAAGW,cAAgB4W,EAAKvX,GAAGU,UAChC6b,KAAKjZ,SAASiZ,KAAK46J,cAAcn3K,IAGzC,IAASA,EAAI2sE,EAAQ,EAAG3sE,EAAI+d,EAAIpe,QACxBoe,EAAI/d,GAAGinC,aAAa,cAAgBixI,EADJl4K,IAAK,CAIpC,GAAI+d,EAAI/d,GAAGinC,aAAa,cAAgB+wI,EAAQ,CACjD55K,SAAO2f,EAAI/d,GACX,OAGA5B,SAAO2f,EAAI/d,MAIvBu1K,EAAsB72K,UAAU4E,SAAW,SAAUiU,GACjD,GAAIqzB,GAAOrzB,EAAKgF,KAAKgyH,UACjB3jG,KACAA,EAAKnR,iBAAmB,2BAGhC87I,EAAsB72K,UAAUy4K,cAAgB,SAAU9yK,EAAOytF,GAK7D,IAAK,GAJDxlE,GAAQ/P,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aACjD0F,EAAOu6E,GAA0BxlE,EACjCjrB,EAASirB,EAAMjoB,GAAOhD,OAAS,EAC/BiqJ,KACKtrJ,EAAI8xF,EAAa,EAAIztF,EAAQ,EAAGrE,EAAIuX,EAAK5X,UAC1C4X,EAAKvX,GAAGqB,OAASA,GADiCrB,IAIlDuX,EAAKvX,GAAGqB,SAAWA,GACnBiqJ,EAAU7qJ,KAAK8W,EAAKvX,GAG5B,OAAOsrJ,IAEXiqB,EAAsB72K,UAAUy5K,gBAAkB,SAAU1sK,GACxD8Q,KAAK67J,iBACL,IACIlwK,GADKqU,KAAKzV,OAAOmO,aAAatS,iBAAiB,MAAM8I,EAAKpH,OACjD4iC,aAAa,YACtB4vI,EAAet6J,KAAK+5J,uBAAuBpuK,GAC3C23B,EAAatjB,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aAAaglK,GACnEt/J,EAAO9L,EAAKw1F,WAAax1F,EAAK40I,SAAW9jI,KAAKk5J,WAC5Cl5J,KAAK86J,0BAA0BR,GAAc,GAAM,EAAM,MAAM,KAErE,IADAt6J,KAAKk5J,eACAhqK,EAAKw1F,WAGN,GAFA1kF,KAAK87J,cAAcxB,EAAch3I,GACjCtjB,KAAK+7J,uBAAuB/7J,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aAAaglK,GAAeprK,EAAK1K,QACjD,IAAjDgD,OAAOC,KAAKyH,EAAK5M,MAAMoF,QAAQ,aAC/B,IAAK,GAAIjE,GAAI,EAAGA,EAAIyL,EAAK5M,KAAKc,OAAQK,IAAK,CACvC,GAAInB,GAAO0d,KAAK88G,eAAev5F,mBAAmBr0B,EAAK5M,KAAKmB,GAAIyL,EAAKuxB,MAAO6C,EAAW7E,cAAW1xB,GAAW,EAAGu2B,EAAW33B,IAC3HqP,GAAK9W,KAAK5B,GACN0d,KAAKzV,OAAO8B,WAAWjJ,SACvB4X,EAAOA,EAAKxE,OAAQwJ,KAAK2iB,gBAAgB7f,aAAa5T,EAAK5M,KAAKmB,IAAMg9B,MAAOvxB,EAAKuxB,MAAQ,EAAGlC,UAAWj8B,EAAKqJ,YAKrHqU,MAAK88G,eAAeh1H,MAAQkY,KAAK2qH,cAAc2vC,EAAcprK,EAAK40I,UAClE9oI,EAAOgF,KAAK88G,eAAez5F,iBAAiBn0B,EAAK5M,KAAM4M,EAAKuxB,MAAO6C,EAAW7E,UAAW,EAAG6E,EAAW33B,IAG/G,IAAIykE,GAAQlhE,EAAK40I,SAAW9jI,KAAK/B,SAAW/O,EAAKpH,MAC7Ck0K,EAAWh8J,KAAK46J,cAAcN,EAAct/J,GAC5C0iD,IAAWxuD,EAAK45H,IAAK9oH,KAAKi8J,gBAAgB/sK,EAAK40I,SAAU50I,EAAK1K,MAAOw3K,EAAS54K,OAC7E8L,GAAKw1F,YAAehnC,IACrBs+G,EAASh8J,KAAKgyH,WAAW90G,iBAAmB,0BAE3CwgC,IACDs+G,EAASA,EAAS54K,OAAS,GAAG85B,iBAAmB,qBAErD,IAAI7wB,GAAc6C,EAAK40I,UAAa50I,EAAKw1F,cAAa1kF,KAAK07J,2BAA2BpB,EACjFprK,GAAK45H,IACD55H,EAAKw1F,YACN1kF,KAAKk8J,kBAAkBlhK,EAAM9L,EAAK40I,SAAW9jI,KAAKm8J,eAAiB7B,GAG3Et6J,KAAKuD,OAAO6sD,EAAOp1D,EAAM0iD,EAASrxD,GAC9B2T,KAAKm5J,kBAAoBjqK,EAAK45H,KAC9B9oH,KAAKzV,OAAOmO,aAAaC,kBAAkBK,UAAYgC,EAAK5X,OAAS4c,KAAKzV,OAAOuC,gBAErFkT,KAAKm5J,iBAAkB,EACvBn5J,KAAK/B,aAAWlR,GAChBiT,KAAKm8J,mBAAiBpvK,GACtBiT,KAAKi5J,WAAa,GAEtBD,EAAsB72K,UAAU25K,cAAgB,SAAUpB,EAAQt1K,GACzD4a,KAAKs5J,cAAct5J,KAAKzV,OAAO8K,aAAaC,eAC7C0K,KAAKs5J,cAAct5J,KAAKzV,OAAO8K,aAAaC,iBAE5ClQ,EAAIhB,eACJ4b,KAAKs5J,cAAct5J,KAAKzV,OAAO8K,aAAaC,aAAalQ,EAAIuG,KAAOvG,EAAI9C,KAAKkC,QAGrFw0K,EAAsB72K,UAAUwoI,cAAgB,SAAU+vC,EAAQ52B,GAC9D,GAAI1+H,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC8N,EAAQpD,KAAKo5J,WAAWh0J,EAC5B,IAAI0+H,EACA,MAAO1gI,GAAMpD,KAAKm8J,gBAAgBr0K,MAAQ,CAE9C,IAAItD,GAAQ,EACR6c,EAAM,EACN+6J,EAAap8J,KAAKg7J,YAAY53J,EAAMs3J,GAAQn8I,UAIhD,IAHI69I,IACA/6J,EAAMrB,KAAKq8J,iBAAiBD,IAE5Bh5J,EAAMs3J,GAAQ51K,OAAS,EACvB,IAAK,GAAIrB,GAAIi3K,EAAS,EAAGj3K,GAAK,KACtB2f,EAAM3f,GAAGqB,OAASse,EAAMs3J,GAAQ51K,QADPrB,IAIzB2f,EAAM3f,GAAGW,cAAgBgf,EAAM3f,GAAGqB,SAAWse,EAAMs3J,GAAQ51K,SAC3DN,GAAgB4e,EAAM3f,GAAGnB,KAAKkC,MAK1C,OADYA,GAAQ6c,EAAMrB,KAAKq5J,aAAaj0J,GAAMhC,EAAMs3J,GAAQj8I,YAGpEu6I,EAAsB72K,UAAUk6K,iBAAmB,SAAUD,GAIzD,IAAK,GAHDh3J,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC8N,EAAQpD,KAAKo5J,WAAWh0J,GACxB/D,EAAM,EACD5d,EAAI2f,EAAM1b,QAAQ00K,GAAc,EAAG34K,GAAK,GACrB,IAApB2f,EAAM3f,GAAGqB,UAGTse,EAAM3f,GAAGqB,OAASs3K,EAAWt3K,QAJerB,IAOhD,GAAI2f,EAAM3f,GAAGW,cAAgBgf,EAAM3f,GAAGqB,SAAWs3K,EAAWt3K,OAAQ,CAChE,GAAIN,GAAQwb,KAAKs5J,cAAcl0J,GAAMhC,EAAM3f,GAAGkI,IAC9C0V,IAAa7c,GAAgB4e,EAAM3f,GAAGnB,KAAKkC,MAGnD,GAAIm2K,GAAS36J,KAAKg7J,YAAYoB,EAAW79I,UAIzC,OAHIo8I,KACAt5J,GAAYrB,KAAKq8J,iBAAiB1B,IAE/Bt5J,GAEX23J,EAAsB72K,UAAU05K,gBAAkB,WAC9C,GAAIz4J,GAAQpD,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,YACrD,KAAK0K,KAAKq5J,aAAar5J,KAAKzV,OAAO8K,aAAaC,aAAc,CAG1D,IAAK,GAFDsuB,MACAviB,MAAM,GACD5d,EAAI,EAAGA,EAAI2f,EAAMhgB,OAAQK,IAC1B2f,EAAM3f,GAAGW,eACRw/B,EAAQxgC,OACHwgC,EAAQ1/B,KAAKkf,EAAM/B,GAAK/e,KAAKkC,MAAQo/B,EAAQA,EAAQxgC,OAAS,IADlDwgC,EAAQ1/B,KAAK,GAE/Bmd,EAAM5d,EAGduc,MAAKq5J,aAAar5J,KAAKzV,OAAO8K,aAAaC,aAAesuB,IAGlEo1I,EAAsB72K,UAAU85K,gBAAkB,SAAUn4B,EAAUu0B,EAAciE,GAChF,MAAOx4B,GAAWu0B,IAAiBr4J,KAAKi5J,WAAaqD,EAAWjE,IAAiBiE,GAErFtD,EAAsB72K,UAAU45K,uBAAyB,SAAU32K,EAAKZ,GACpEY,EAAI9C,KAAKkC,MAAQA,GAErBw0K,EAAsB72K,UAAUohB,OAAS,SAAU6sD,EAAOp1D,EAAMihK,EAAiB5vK,GAC7E,GAAImT,GAAKQ,KAAKzV,OAAOmO,aAAatS,iBAAiB,MAAMgqE,EACzD,IACI5wD,GAAMnT,EAAWjJ,OACjB,IAASK,EAAI4I,EAAWjJ,OAAS,EAAGK,GAAK,EAAGA,IACxC+b,EAAG+8J,sBAAsB,WAAYv8J,KAAK4C,YAAYW,OAAOlX,EAAW5I,GAAIuc,KAAKzV,OAAO2L,cAGhG,IAAIsJ,GAAMxE,EAAK5X,OACX,IAAK,GAAIK,GAAIuX,EAAK5X,OAAS,EAAGK,GAAK,EAAGA,IAC9Buc,KAAKw8J,oBAAoBxhK,EAAKvX,KAC9B+b,EAAG+8J,sBAAsB,WAAYv8J,KAAK4C,YAAYW,OAAOvI,EAAKvX,GAAIuc,KAAKzV,OAAO2L,gBAMlG8iK,EAAsB72K,UAAUyrC,aAAe,SAAUxoC,EAAK0C,GAC1D,GAAIsd,GAAOpF,KAAKzV,OAAO8K,aAAaC,WAC/B0K,MAAKu5J,UAAUn0J,KAChBpF,KAAKu5J,UAAUn0J,MACfpF,KAAKw5J,YAAYp0J,OAEjBhgB,EAAIuG,MACJqU,KAAKu5J,UAAUn0J,GAAMhgB,EAAIuG,KAAOvG,GAEpC4a,KAAKw5J,YAAYp0J,GAAMhgB,EAAIuG,KAAO7D,GAEtCkxK,EAAsB72K,UAAUq6K,oBAAsB,SAAUp3K,GAC5D,GAAI8kG,IAAQ,CACZ,IAAI1nG,oBAAkB4C,EAAIN,UAAYM,EAAInB,YAAcmB,EAAIhB,aAAc,CACtE,GAAIq4K,GAAMz8J,KAAKg7J,YAAY51K,EAAIm5B,UAC3Bk+I,GAAIr4K,eAAiBq4K,EAAIt4K,WACzB+lG,GAAQ,GAGhB,MAAOA,IAEX8uE,EAAsB72K,UAAU+5K,kBAAoB,SAAUQ,EAAS50K,GACnE,GAAIsd,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChCs/E,EAAa50E,KAAKo5J,WAAWh0J,EACjCpF,MAAKu5J,UAAUn0J,MACfpF,KAAKw5J,YAAYp0J,KAGjB,KAAK,GAFDu3J,MACA3gK,EAAI,EACCvY,EAAI,EAAGA,EAAImxF,EAAWxxF,OAAQK,IACnC,GAAIA,IAAMqE,EAAO,CACbkY,KAAK4tB,aAAagnD,EAAWnxF,GAAIuY,GACjC2gK,EAAcz4K,KAAK0wF,EAAWnxF,IAC9BuY,GACA,KAAK,GAAItY,GAAI,EAAGA,EAAIg5K,EAAQt5K,OAAQM,IAChCsc,KAAK4tB,aAAa8uI,EAAQh5K,GAAIsY,GAC9B2gK,EAAcz4K,KAAKw4K,EAAQh5K,IAC3BsY,QAIJgE,MAAK4tB,aAAagnD,EAAWnxF,GAAIuY,GACjC2gK,EAAcz4K,KAAK0wF,EAAWnxF,IAC9BuY,GAGRgE,MAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aAAerO,YAAW01K,GACnE38J,KAAKgzH,yBAETgmC,EAAsB72K,UAAUu5K,2BAA6B,SAAU5zK,GAMnE,IAAK,GALDsb,GAAQpD,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aACjD/K,EAAS6Y,EAAMtb,GACfhD,EAASyF,EAAOzF,OAChB6G,EAAMpB,EAAOoB,IACbi5C,KACKnhD,EAAIqE,EAAQ,EAAGrE,EAAI2f,EAAMhgB,QAC1BggB,EAAM3f,GAAGqB,SAAWA,EADcrB,IAIlCjB,oBAAkB4gB,EAAM3f,GAAGqB,SAAWse,EAAM3f,GAAG86B,YAAc5yB,GAC7Di5C,EAAI1gD,KAAKkf,EAAM3f,GAGvB,OAAOmhD,IAEXo0H,EAAsB72K,UAAU24K,0BAA4B,SAAUhzK,EAAOuO,EAAM00H,EAAOzoI,EAAMs6K,EAAYC,GACxG,GAAIz5J,GAAQ9gB,GAAc0d,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aAC/D0mC,EAAY54B,EAAMtb,GAClB88C,IACJ,KAAK5I,EAAU53C,cAAiB43C,EAAU53C,eAAiB43C,EAAU73C,WAAa04K,EAC9E,QAEAD,IAAc58J,KAAKzV,OAAO8B,WAAWjJ,SACrCwhD,EAAM5kC,KAAK07J,2BAA2B5zK,GAM1C,KAAK,GAJDhD,GAASk3C,EAAUl3C,OACnB6G,EAAMqwC,EAAUrwC,IAChBqP,KACAxW,EAAQ,EACHf,EAAIqE,EAAQ,EAAGrE,EAAI2f,EAAMhgB,OAAQK,IAAK,CAC3C,GAAI2f,EAAM3f,GAAG86B,YAAc5yB,EAAK,CAC5B,GAAInJ,oBAAkB4gB,EAAM3f,GAAGqB,QAC3B,QAOJ,IALAN,IACAwW,EAAK9W,KAAKkf,EAAM3f,IACZ4S,GAAQ+M,EAAM3f,GAAGW,eACjB4W,EAAOA,EAAKxE,OAAOwJ,KAAK86J,0BAA0Br3K,EAAG4S,EAAM00H,EAAOzoI,EAAMs6K,KAExE7xC,GAASvmI,IAAUwb,KAAKzK,SACxB,MAGR,GAAI6N,EAAM3f,GAAGqB,SAAWA,EACpB,MAGR,MAAOkW,GAAKxE,OAAOouC,IAGvBo0H,EAAsB72K,UAAU8rC,iBAAmB,SAAU6uI,GACzD,GAAI9hK,MACAoI,EAAQpD,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,YACrD,IAAIwnK,EACA,MAAO98J,MAAK+8J,uBAEhB,KAAK,GAAIt5K,GAAI,EAAGA,EAAI2f,EAAMhgB,OAAQK,IACN,IAApB2f,EAAM3f,GAAGqB,SACTkW,EAAK9W,KAAKkf,EAAM3f,IAChBuX,EAAOA,EAAKxE,OAAOwJ,KAAK86J,0BAA0Br3K,GAAG,GAAM,EAAM2f,GAAO,IAGhF,OAAOpI,IAGXg+J,EAAsB72K,UAAU46K,sBAAwB,WAGpD,IAAK,GAFD/hK,MACAwG,KAASnW,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,OACzD3C,EAAI,EAAGA,EAAI+d,EAAIpe,OAAQK,IAC5BuX,EAAK9W,KAAK8b,KAAKg7J,YAAYx5J,EAAI/d,GAAGinC,aAAa,aAEnD,OAAO1vB,IAEXg+J,EAAsB72K,UAAU66K,yBAA2B,SAAUl1K,GAIjE,IAAK,GAHDkT,MACA45E,EAAa50E,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aACtD0G,EAAIlU,EACCrE,EAAI,EAAGA,EAAIuc,KAAKzK,WAChBq/E,EAAW54E,MAAM44E,EAAW54E,GAAGlX,OAAS8vF,EAAW9sF,GAAOhD,SADhCrB,IAI3BmxF,EAAW54E,GAAGlX,SAAW8vF,EAAW9sF,GAAOhD,SAC3CkW,EAAK9W,KAAK0wF,EAAW54E,IACjB44E,EAAW54E,GAAG5X,cAAgBwwF,EAAW54E,GAAG7X,WAC5C6W,EAAOA,EAAKxE,OAAOwJ,KAAK86J,0BAA0B9+J,GAAG,GAAM,EAAM,MAAM,OAG3E44E,EAAW54E,GAAGlX,OAAS8vF,EAAW9sF,GAAOhD,QAAUtC,oBAAkBoyF,EAAW54E,GAAGlX,UACnFrB,IAEJuY,GAEJ,OAAOhB,IAEXg+J,EAAsB72K,UAAU86K,uBAAyB,SAAUn/J,EAAOC,EAAKjW,GAI3E,IAAK,GAHDkT,MACA45E,EAAa50E,KAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,aACtDomC,GAAM,EACDj4C,EAAI,EAAGA,EAAImxF,EAAWxxF,UACvBs4C,GAASk5C,EAAWnxF,MAAMmxF,EAAWnxF,GAAGqB,OAAS8vF,EAAW9sF,GAAOhD,SAAU8vF,EAAWnxF,GAAGkI,MAAQoS,GADpEta,IAI9Bi4C,GAAOk5C,EAAWnxF,GAAGkI,MAAQmS,IAC9B49B,GAAM,GAENA,GAAOk5C,EAAWnxF,GAAGqB,SAAW8vF,EAAW9sF,GAAOhD,SAClDkW,EAAK9W,KAAK0wF,EAAWnxF,IACjBmxF,EAAWnxF,GAAGW,cAAgBwwF,EAAWnxF,GAAGU,WAC5C6W,EAAOA,EAAKxE,OAAOwJ,KAAK86J,0BAA0Br3K,GAAG,GAAM,EAAM,MAAM,KAInF,OAAOuX,IAEXg+J,EAAsB72K,UAAUo6F,cAAgB,SAAUv5F,GACtD,IAAIgd,KAAKzV,OAAO2lB,cAAelQ,KAAKi5J,WAApC,CAGA,GAGIz5J,GAHA09J,KAAa7xK,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,4BAClE+2K,KAAW9xK,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,0BAChEg3K,KAAY/xK,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,wBAEjEi3K,GAAe,EACfC,GAAa,EACbC,GAAc,CAMlB,IALIv6K,EAAE83E,YAAcoiG,EAAQ95K,SAExBoc,GADI9Z,EAASsa,KAAKw9J,gBAAgBN,IACtB19J,GACZ69J,EAAe33K,EAAOsjI,UAErBhmI,EAAE83E,YAAcsiG,EACjB,IAAK,GAAI35K,GAAI,EAAGA,EAAI25K,EAAOh6K,OAAQK,IAAK,CACpC,GAAI+nD,GAAQ4xH,EAAO35K,GAAG0F,wBAAwBO,IAC1C0zB,EAAepd,KAAKzV,OAAOmO,aAAa0kB,YAC5C,IAAIouB,EAAQ,GAAKA,EAAQpuB,EAAc,CACnC5d,EAAK49J,EAAO35K,GACZ85K,GAAc,EACdv9J,KAAK/B,SAAWuB,EAAGvB,QACnB,QAIZ,IAAKjb,EAAE83E,YAAcqiG,EAAM/5K,SAAWm6K,EAAa,CAC/C,GAAI73K,GAASsa,KAAKw9J,gBAAgBL,EAClC39J,GAAK9Z,EAAO8Z,GACZ89J,EAAa53K,EAAOsjI,QAEpBxpH,IACI69J,GAAgBr6K,EAAE83E,YAAcuiG,GAAgB79J,GAChDQ,KAAKy9J,kBAAkBj+J,IAEtBxc,EAAE83E,YAAcyiG,GAAe/9J,GAChCQ,KAAK09J,sBAAsBl+J,GAE3BQ,KAAK05J,YAAc12K,EAAE83E,aAAeyiG,GAAeD,GAAc99J,GACjEQ,KAAK29J,gBAAgBn+J,MAIjCw5J,EAAsB72K,UAAUu7K,sBAAwB,SAAUl+J,GAC9D,GAAI4F,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC0F,EAAOgF,KAAKo5J,WAAWh0J,GACvBzZ,EAAM6T,EAAGkrB,aAAa,YACtB5iC,EAAQkY,KAAKm8J,eAAiBn8J,KAAK+5J,uBAAuBpuK,GAC1D0V,EAAMvZ,EACNg9B,EAAW9pB,EAAKlT,GAChB81K,EAAe59J,KAAKg7J,YAAYl2I,EAASvG,WACzCs/I,EAAe79J,KAAK+5J,uBAAuB6D,EAAajyK,KAExDmyK,EADgB99J,KAAKzV,OAAOmO,aAAapS,cAAc,eAAiBs3K,EAAajyK,IAAM,KAC5DsS,SAE/B8/J,EADQ/9J,KAAK86J,0BAA0B+C,GACtBn2K,QAAQo9B,GACzBxvB,EAAclI,KAAKC,KAAK0wK,EAAW/9J,KAAKzK,SAC5C,IAAoB,IAAhBD,EAKJ,GAFA0K,KAAKi5J,WAAa3jK,EAAc0K,KAAKzK,SACrCzN,EAAQkY,KAAKg+J,wBAAwBl5I,EAAUh9B,GAC3CkY,KAAKi5J,WAAa2E,EAAat7K,KAAKkC,MAAO,CAC3Cgb,EAAG/U,UAAU5I,OAAO,sBACpBijC,EAAS5H,iBAAmB,EAC5B,IAAIwnE,KAAa1pF,EAAKlT,EAAQ,IAAKg9B,EAAShgC,SAAWkW,EAAKlT,EAAQ,GAAGhD,MACvEkb,MAAKk5J,WAAax0E,EAAa1kF,KAAKg9J,yBAAyBl1K,EAAQ,KACrE,IAAI8J,GAAMoO,KAAKg6J,sBAAsB6D,EAAc7iK,GAC/C9L,GACA+O,SAAU6/J,EAAgB1H,aAAc1xE,EAAYw1E,UAAW0D,EAAchzJ,OAAQhZ,EAAIgZ,OACzFnjB,KAAMmK,EAAInK,KAAMsiB,KAAM/J,KAAKi5J,WAAYrtE,KAAM5rF,KAAKzK,SAAUuuI,UAAU,EAE1E,IAAI9jI,KAAK05J,WAAa15J,KAAKi5J,YAAej5J,KAAKzK,SAAWyK,KAAK25J,eAAiB,CAC5E,GAAIsE,GAAUj+J,KAAK86J,0BAA0B+C,GAEzCK,EADc9wK,KAAKC,KAAM4wK,EAAQv2K,QAAQsT,EAAKqG,IAAQrB,KAAKzK,WAC9ByK,KAAK25J,eAAiB,EACvD35J,MAAKk+J,YAAYvyK,EAAK+4F,EAAYw5E,EAAaD,GAC/C/uK,EAAKivK,eAAkBD,EAAcl+J,KAAKzK,SAE9CyK,KAAKq6J,iBAAiBnrK,OAGtB8Q,MAAKi5J,WAAa,GAG1BD,EAAsB72K,UAAUs7K,kBAAoB,SAAUj+J,GAC1D,GAAI4F,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC0F,EAAOgF,KAAKo5J,WAAWh0J,GACvBzZ,EAAM6T,EAAGkrB,aAAa,YACtB5iC,EAAQkY,KAAK+5J,uBAAuBpuK,GACpC0V,EAAMvZ,EACNg9B,EAAW9pB,EAAKlT,GAChB81K,EAAe59J,KAAKg7J,YAAYl2I,EAASvG,WACzCs/I,EAAe79J,KAAK+5J,uBAAuB6D,EAAajyK,KAExDmyK,EADgB99J,KAAKk7J,mBAAmB0C,EAAajyK,KACtBsS,SAC/BstC,EAAQvrC,KAAK86J,0BAA0B+C,GACvCE,EAAWxyH,EAAM7jD,QAAQo9B,GACzBxvB,EAAclI,KAAKC,KAAK0wK,EAAW/9J,KAAKzK,SAC5CyK,MAAKi5J,WAAa3jK,EAAc0K,KAAKzK,QAErC,IAAI6oK,GAAYpjK,EADhBlT,EAAQkY,KAAKm8J,eAAiBn8J,KAAK+5J,uBAAuBxuH,EAAMvrC,KAAKi5J,WAAa,GAAGttK,MAEjF+xD,EAAU19C,KAAKk7J,mBAAmBkD,EAAUzyK,IAGhD,IAFAqU,KAAK/B,SAAWy/C,EAAQz/C,SACxBnW,EAAQkY,KAAKg+J,wBAAwBI,EAAWt2K,GAC5CkY,KAAKi5J,WAAa2E,EAAat7K,KAAKkC,MAAO,CAC3C,GAAIkgG,KAAa1pF,EAAKlT,EAAQ,IAAKg9B,EAAShgC,SAAWkW,EAAKlT,EAAQ,GAAGhD,MACvE,IAAI4/F,IAAeliG,oBAAkBwd,KAAKk7J,mBAAmBlgK,EAAKlT,EAAQ,GAAG6D,MAEzE,YADAqU,KAAKi5J,WAAa,IAGlB3jK,EAAc,IAAM0K,KAAK05J,aACzBl6J,EAAG/U,UAAU5I,OAAO,0BACpB67D,EAAQjzD,UAAU5I,OAAO,sBACzBu8K,EAAUlhJ,iBAAmB,IAEjCld,KAAKk5J,WAAax0E,EAAa1kF,KAAKg9J,yBAAyBh9J,KAAKm8J,eAAiB,KACnF,IAAItqK,GAAQmO,KAAKg6J,sBAAsB6D,EAAc7iK,GACjD9L,GACA+O,SAAU6/J,EAAgB1H,aAAc1xE,EAAYw1E,UAAW0D,EAAchzJ,OAAQ/Y,EAAM+Y,OAC3FnjB,KAAMoK,EAAMpK,KAAMsiB,KAAM/J,KAAKi5J,WAAYrtE,KAAM5rF,KAAKzK,SAAUuuI,UAAU,EAE5E,IAAI9jI,KAAK05J,WAAc15J,KAAKi5J,WAAaj5J,KAAKzK,UAAcyK,KAAKzK,SAAWyK,KAAK25J,eAAiB,CAC9F,GAAI0E,GAAUr+J,KAAK86J,0BAA0B+C,GAEzCK,EADc9wK,KAAKC,KAAMgxK,EAAQ32K,QAAQsT,EAAKqG,IAAQrB,KAAKzK,UAAa,GAC1CyK,KAAK25J,eAAiB,GAAM,CAC9D35J,MAAKk+J,YAAYvyK,EAAK+4F,EAAYw5E,EAAaG,EAASD,GACxDlvK,EAAKivK,eAAkBD,EAAcl+J,KAAKzK,SAE9CyK,KAAKq6J,iBAAiBnrK,OAGtB8Q,MAAKi5J,WAAa,GAG1BD,EAAsB72K,UAAU67K,wBAA0B,SAAU54K,EAAK0C,GACrE,GAAIsd,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC0F,EAAOgF,KAAKo5J,WAAWh0J,EAC3B,IAAIhgB,EAAIhB,aAAc,CAClB,GAAIgB,EAAIjB,SAAU,CACd,GAAI80K,GAAaj5J,KAAK86J,0BAA0BhzK,GAAO,GAAM1E,MAC7D4c,MAAK/B,SAAW+B,KAAK/B,SAAWg7J,EAEpC,GAAIr0H,GAAM5kC,KAAK07J,2BAA2B5zK,EAC1CkY,MAAKm8J,eAAiBn8J,KAAKm8J,eAAiBv3H,EAAIxhD,MAEhD,KAAK,GADDie,GAAMvZ,EACDrE,EAAI4d,EAAM,EAAG5d,EAAIuX,EAAK5X,OAAQK,IAAK,CACxC,GAAIuX,EAAKvX,GAAGqB,SAAWkW,EAAKlT,GAAOhD,QAAUkW,EAAKvX,GAAGqB,OAASkW,EAAKlT,GAAOhD,OAAQ,CAC9EgD,EAAQuZ,CACR,OAGAA,KAIZ,MAAOvZ,IAEXkxK,EAAsB72K,UAAU+7K,YAAc,SAAUvyK,EAAK+4F,EAAYw5E,EAAa3yH,EAAO6yH,GACzF,GAAIh5J,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC0F,EAAOgF,KAAKo5J,WAAWh0J,GACvBk5J,EAAO/yH,GAAS2yH,EAAc,GAAKl+J,KAAKzK,SAAY,EAAKyK,KAAKgyH,WAAWrmI,IACzE4yK,EAAOhzH,EAAO2yH,EAAcl+J,KAAKzK,SAAYyK,KAAKzK,UAAU5J,IAC5D6yK,EAAOjzH,EAAO2yH,EAAcl+J,KAAKzK,UAAW5J,GAEhDqP,GADegF,KAAK+5J,uBAAuBuE,IAC5BphJ,iBAAmB,uBAClCld,KAAKk7J,mBAAmBoD,GAAM7zK,UAAUqE,IAAI,wBACxCsvK,IACAp+J,KAAKk7J,mBAAmBsD,GAAM/zK,UAAUqE,IAAI,wBAC5CkR,KAAKg7J,YAAYwD,GAAMthJ,iBAAmB,uBAC1Cld,KAAKg7J,YAAYuD,GAAMrhJ,iBAAmB,IAE1CwnE,EACA1kF,KAAKg4J,cAAcoG,EAAYA,EAAUzyK,IAAMA,EAAK4yK,EAAMC,IAG1Dx+J,KAAKs+J,KAAOC,EACZv+J,KAAKu+J,KAAOC,EACZx+J,KAAKw+J,KAAOJ,EAAYA,EAAUzyK,IAAMA,IAGhDqtK,EAAsB72K,UAAUw7K,gBAAkB,SAAUn+J,GACxD,GAAI4F,GAAOpF,KAAKzV,OAAO8K,aAAaC,YAChC0F,EAAOgF,KAAKo5J,WAAWh0J,GACvBzZ,EAAM6T,EAAGkrB,aAAa,YACtBtlC,EAAM4a,KAAKg7J,YAAYrvK,GACvB7D,EAAQkY,KAAKm8J,eAAiBn8J,KAAK+5J,uBAAuBpuK,GAC1DiyK,EAAe59J,KAAKg7J,YAAY51K,EAAIm5B,WACpCs/I,EAAe79J,KAAK/B,SAAW+B,KAAK+5J,uBAAuB6D,EAAajyK,KAExEmyK,EADgB99J,KAAKzV,OAAOsgC,mBAAmB+yI,EAAajyK,KAC7BsS,SAC/BstC,EAAQvrC,KAAK86J,0BAA0B+C,GACvCE,EAAWxyH,EAAM7jD,QAAQsT,EAAKlT,IAC9B22K,EAAcrxK,KAAK4hE,MAAO+uG,EAAW/9J,KAAKzK,UAC1C8L,EAAMrB,KAAKgyH,SACO,GAAjBhyH,KAAKgyH,UAAiBhyH,KAAKzK,WAC5B8L,EAAwB,EAAjBrB,KAAKgyH,UAAiBhyH,KAAKzK,SAClC8L,EAAMrB,KAAKgyH,UAAY3wH,EAE3B,IAAIvD,GAAQytC,EAAOwyH,GAAY18J,EAAM,GAAMrB,KAAKzK,UAAU5J,IACtDoS,EAAMwtC,EAAMwyH,GAAY18J,EAAM,IAAI1V,GACtCqU,MAAKk5J,WAAal5J,KAAKi9J,uBAAuBn/J,EAAOC,EAAKjW,GAASuZ,EAAM,IACzErB,KAAKm5J,gBAAkBsF,EAAc,EACjCz+J,KAAKm5J,kBACLn5J,KAAKk5J,WAAW,GAAGh8I,iBAAmB,wBAE1Cld,KAAKg7J,YAAYj9J,GAAKmf,iBAAmB,GACzCld,KAAKk7J,mBAAmBn9J,GAAKtT,UAAU5I,OAAO,uBAC9C,IAAIq8K,GAAcO,EAAcz+J,KAAK25J,cACrC,IAAIpuH,EAAMnoD,SAAWw6K,EAAat7K,KAAKkC,OAAU05K,EAAcl+J,KAAKzK,SAAWg2C,EAAMnoD,OAIjF,MAHA4c,MAAKm5J,iBAAkB,EACvBn5J,KAAKk5J,WAAW,GAAGh8I,iBAAmB,OACtCld,MAAKk7J,mBAAmBn9J,GAAKtT,UAAUqE,IAAI,uBAG/C,IAAItK,GAAQ05K,EAAcl+J,KAAKzK,SAAWqoK,EAAat7K,KAAKkC,MACtDo5K,EAAat7K,KAAKkC,MAAQ05K,EAAcl+J,KAAKzK,SAC/Co+H,EAAOuqC,EAAcl+J,KAAKzK,SAAWqoK,EAAat7K,KAAKkC,MACpDwb,KAAKzK,UAAayK,KAAKzK,SAAW2oK,EAAeN,EAAat7K,KAAKkC,OAAUwb,KAAKzK,SACrFw5I,EAAY/uI,KAAK86J,0BAA0B9/J,EAAKtT,QAAQ6jD,EAAM/mD,EAAQ,KAAK,GAAM,EAAO,MAAM,GAC9F85K,EAAOvvB,EAAU3rJ,OAAS2rJ,EAAUA,EAAU3rJ,OAAS,GAAGuI,IAAM4/C,EAAO/mD,EAAQ,GAAImH,IACnF4yK,EAAOhzH,EAAM/mD,EAAQmvI,GAAMhoI,IAC3B6yK,EAAOjzH,EAAO/mD,EAAQmvI,EAAQ,GAAGhoI,IACjC+yK,EAAU1+J,KAAKw5J,YAAYp0J,GAAMm5J,GAAQl9J,CAC7C,IAAuC,2BAAnCrG,EAAK0jK,GAASxhJ,iBAA+C,CAC7D,GAAIyhJ,GAAQ3+J,KAAKk7J,mBAAmBlgK,EAAK0jK,GAAS/yK,IAC9CgzK,IACAA,EAAMl0K,UAAUqE,IAAI,0BAS5B,GANAkR,KAAKg7J,YAAYsD,GAAMphJ,iBAAmB,GAC1Cld,KAAKg7J,YAAYwD,GAAMthJ,iBAAmB,qBAC1Cld,KAAKk7J,mBAAmBsD,GAAM/zK,UAAUqE,IAAI,sBAC5CkR,KAAKi4J,iBAAiBqG,EAAMC,EAAMC,GAClCx+J,KAAK/B,SAAWuB,EAAGvB,SAAWoD,EAC9B7B,EAAG/U,UAAUrH,OAAS,EAAIoc,EAAG/U,UAAU5I,OAAO,wBAA0B2d,EAAG1d,gBAAgB,UACtFU,oBAAkBwd,KAAKk7J,mBAAmBp9J,IAG3C,MAFAkC,MAAKi5J,WAAa,OAClBj5J,KAAKk5J,cAGT,IAAItnK,GAAMoO,KAAKg6J,sBAAsBh6J,KAAK+5J,uBAAuB6D,EAAajyK,KAAMqP,GAChF9L,GACA+O,SAAU6/J,EAAgB1H,aAAa,EAAO8D,UAAW0D,EAAchzJ,OAAQhZ,EAAIgZ,OACnFnjB,KAAMmK,EAAInK,KAAMsiB,KAAM/J,KAAKi5J,WAAYrtE,KAAM5rF,KAAKzK,SAAUuuI,UAAU,EAAM86B,UAAU,EAE1F5+J,MAAKq6J,iBAAiBnrK,IAE1B8pK,EAAsB72K,UAAUq7K,gBAAkB,SAAUxiK,GAGxD,IAAK,GADDwE,GADAwpH,GAAU,EAELvlI,EAAI,EAAGA,EAAIuX,EAAK5X,OAAQK,IAAK,CAClC,GAAIo6H,GAAS7iH,EAAKvX,GAAGwa,QACrB,IAAInF,GAAmB+kH,EAAQ79G,KAAKzV,QAAS,CACzCy+H,GAAU,EACVhpH,KAAK/B,SAAW4/G,EAChBr+G,EAAKxE,EAAKvX,EACV,QAGR,OAASulI,QAASA,EAASxpH,GAAIA,IAEnCw5J,EAAsB72K,UAAU+4K,mBAAqB,SAAUvvK,GAC3D,MAAOqU,MAAKzV,OAAOmO,aAAapS,cAAc,eAAiBqF,EAAM,MAEzEqtK,EAAsB72K,UAAU61K,cAAgB,SAAUsG,EAAMC,EAAMC,GAIlE,IAAK,GAHDh9J,MAASnW,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,OAE9D0X,GADOkC,KAAKzV,OAAO8K,aAAaC,aACxB,GACH7R,EAAI,EAAGA,EAAI+d,EAAIpe,OAAQK,IAAK,CACjC,GAAI+d,EAAI/d,GAAGinC,aAAa,cAAgB8zI,EAAM,CAC1C,GAAIh/J,GAAKQ,KAAKzV,OAAOmO,aAAapS,cAAc,eAAiBg4K,EAAO,IACpE9+J,KACAQ,KAAK/B,SAAWuB,EAAGvB,SAEvB,OAEAuD,EAAI/d,GAAGinC,aAAa,cAAgB6zI,IACpCzgK,GAAQ,GAERA,GACAjc,SAAO2f,EAAI/d,MAIvBu1K,EAAsB72K,UAAU81K,iBAAmB,SAAUqG,EAAMC,EAAMC,GAGrE,IAAK,GAFDh9J,MAASnW,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,OAC9D0X,GAAQ,EACHra,EAAI,EAAGA,EAAI+d,EAAIpe,SAChBoe,EAAI/d,GAAGinC,aAAa,cAAgB6zI,IACpCzgK,GAAQ,IAERA,IACAjc,SAAO2f,EAAI/d,IACP+d,EAAI/d,GAAGinC,aAAa,cAAgB4zI,IANhB76K,OAYpCu1K,EAAsB72K,UAAUmkB,SAAW,SAAUtjB,GACjD,GAAIoiB,GAAOpF,KAAKzV,OAAO8K,aAAaC,WACpC0K,MAAKo5J,WAAWh0J,GAAQpF,KAAKy5J,qBAAqBr0J,GAAQne,YAAWjE,EAAEV,OAE3E02K,EAAsB72K,UAAU63K,sBAAwB,SAAUlyK,EAAO8sF,GAGrE,IAAK,GAFDhqE,MACAnjB,KACKhE,EAAIqE,EAAOrE,GAAK,KACjBmxF,EAAWnxF,GAAGW,eAA8D,IAA9CwmB,EAAOljB,QAAQktF,EAAWnxF,GAAGnB,KAAKD,UAC5DuyF,EAAWnxF,GAAGqB,OAAS8vF,EAAW9sF,GAAOhD,QAAUrB,IAAMqE,KAC7D8iB,EAAO1mB,KAAK0wF,EAAWnxF,GAAGnB,KAAKD,OAC/BoF,EAAKvD,KAAK0wF,EAAWnxF,GAAGnB,KAAKsP,KACA,IAAzBgjF,EAAWnxF,GAAGqB,SALErB,KAU5B,OAASmnB,OAAQA,EAAQnjB,KAAMA,IAEnCuxK,EAAsB72K,UAAU08K,yBAA2B,SAAUj0J,EAAQrjB,GAEzE,IAAK,GADDu3K,MACKr7K,EAAI,EAAGA,EAAImnB,EAAOxnB,OAAQK,IAAK,CACpC,GAAIlB,GAASyd,KAAKzV,OAAOiN,iBAAiBoT,EAAOnnB,IAC7C7B,EAAsB,SAAd2F,EAAO9D,GAAgB,KAAO8D,EAAO9D,GAC7CkC,GACAtD,MAAOuoB,EAAOnnB,GAAIgC,UAAW,KAAMkG,IAAKpJ,EAAOoJ,IAAK4G,SAAU,QAAS5O,KAAMpB,EAAOoB,KACpF6O,UAAWwN,KAAK0oF,mBAAoBt0E,aAAcpU,KAAKoU,aAE7C,MAAVxyB,GAAgBY,oBAAkBZ,GAClCk9K,EAAaA,EAAWtoK,OAAO2e,GAAmBy1E,4BAA4BjlG,IAG9Em5K,EAAW56K,KAAK+C,aAAarF,MAAOA,GAAS+D,IAGrD,MAAOwvB,IAAmBC,aAAa0pJ,IAE3C9F,EAAsB72K,UAAU48K,cAAgB,SAAUp5K,GAEtD,IAAK,GADDquB,MACKnkB,EAAK,EAAGkG,EAAKvO,OAAOC,KAAK9B,GAAOkK,EAAKkG,EAAG3S,OAAQyM,IAAM,CAC3D,GAAI0lB,GAAOxf,EAAGlG,EACdmkB,GAAc9vB,KAAKyB,EAAK4vB,IAE5B,MAAOvB,IAEXglJ,EAAsB72K,UAAUk4K,iBAAmB,SAAUnrK,GACzD,GAAIwZ,GAAQ1I,KACRsjB,EAAap0B,EAAKgrK,UAClBz5I,EAAQzgB,KAAKzV,OAAO7F,cAAcvB,QAAQuE,QAAQ47B,EAAWhhC,KAAKD,OAAS,EAC3EsD,EAAOqa,KAAK6+J,yBAAyB3vK,EAAK0b,OAAQ1b,EAAKzH,MACvDusB,EAAgBhU,KAAK++J,cAAcp5K,GACnCotB,GAAa0N,MAAOA,EAAO1W,KAAM7a,EAAK6a,KAAM6hF,KAAM18F,EAAK08F,KAAMv5F,MAAO2hB,EACxE,IAAI9kB,EAAKknK,YAAa,CAClB,GAAIvkK,GAAQmO,KAAKzV,OAAO6Q,aAAa9Y,KAAKkvB,eAAc,EACnD3f,GAAM87I,kBACP97I,EAAM87I,iBAAkB,GAE5B97I,EAAMkhB,SAAS7uB,MAAO0N,IAAK,oBAAqBhQ,MAAOmxB,IACvD/S,KAAKzV,OAAO+3C,cACZtiC,KAAKzV,OAAO6Q,aAAa9Y,KAAK0uB,WAAYnf,GAAO6kB,KAAK,SAAU1zB,GAC5D0lB,EAAMne,OAAO48B,cACW,IAApBnkC,EAAE0C,OAAOtC,SAGTslB,EAAMgxJ,WAAahxJ,EAAM41J,MAAQ51J,EAAM61J,OACvC71J,EAAMsvJ,cAActvJ,EAAM81J,KAAM91J,EAAM41J,KAAM51J,EAAM61J,MAClD71J,EAAM41J,KAAO51J,EAAM61J,KAAO71J,EAAM81J,SAAOzxK,IAE3C2b,EAAMkzJ,iBACFt5K,KAAMU,EAAE0C,OAAQlB,MAAOxB,EAAEwB,MAAOi8B,MAAOA,EAAO34B,MAAOoH,EAAK+O,SAC1DymF,YAAY,EAAOo/C,SAAU50I,EAAK40I,SAAUhb,IAAI,EAAO7qH,SAAU/O,EAAKivK,oBAGzExnJ,MAAM,SAAU3zB,GAAK,MAAO0lB,GAAMne,OAAO6Q,aAAaioC,mBAAmBrgD,GAAKof,YAAa,mBAGhGpC,MAAK47J,iBACDt5K,KAAM,KAAMkC,MAAO0K,EAAKgrK,UAAU53K,KAAKkC,MAAOi8B,MAAOA,EAAO34B,MAAOoH,EAAK+O,SACxEymF,YAAY,EAAMo/C,SAAU50I,EAAK40I,SAAUhb,GAAI55H,EAAK0vK,SAAU3gK,SAAU/O,EAAKivK,kBAIzFnF,EAAsB72K,UAAUq5K,YAAc,SAAU9xK,GACpDsW,KAAKzV,OAAOmO,aAAaC,kBAAkBK,UAAYtP,EAAMsW,KAAKzV,OAAOmO,aAAaC,kBAAkBK,UAAYtP,EAAM,GAE9HsvK,EAAsB72K,UAAU6wI,sBAAwB,WACpD,GAAIp7G,KACJ5X,MAAKyqB,UAAUnxB,OAAO,SAAUlU,GACxBA,EAAInB,YACJ2zB,EAAQxyB,EAAI0C,OAAS1C,EAAI9C,QAGjC0d,KAAKzV,OAAO6+B,gBAAkBxR,EAAQx0B,OAASw0B,EAAU5X,KAAKzV,OAAO6+B,iBAGzE4vI,EAAsB72K,UAAU6rC,cAAgB,WAC5C,MAAOhuB,MAAKo5J,YAGhBJ,EAAsB72K,UAAUsoC,QAAU,WACtC,MAAOzqB,MAAKo5J,WAAWp5J,KAAKzV,OAAO8K,aAAaC,kBAGpD0jK,EAAsB72K,UAAU6sC,eAAiB,WAC7C,SAAU3jC,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,YAGnE4yK,EAAsB72K,UAAUgvC,cAAgB,SAAUrpC,GAGtD,IAAK,GADD1C,GADAoa,KAAQnU,MAAMC,KAAK0U,KAAKzV,OAAOmO,aAAatS,iBAAiB,WAExD3C,EAAI,GAAIjB,oBAAkBsF,IAAUrE,EAAI+b,EAAGpc,OAAQK,IACxD,GAAI+b,EAAG/b,GAAGinC,aAAa,mBAAqB5iC,EAAMmI,WAAY,CAC1D7K,EAAMoa,EAAG/b,EACT,OAGR,MAAO2B,IAGX4zK,EAAsB72K,UAAUolC,WAAa,SAAUpkC,GACnD,GAEIqsC,GAFAlsC,EAAO0c,KAAKzV,MACLyV,MAAKyqB,UAEX93B,KAAK,SAAUiJ,GAElB,MAF2BA,GAAE3X,YAC3BurC,EAAU5zB,GACLA,EAAE3X,WAEX,KAAK,GADD2rC,GAAc5vB,KAAKyqB,UAAUnxB,OAAO,SAAUlU,GAAO,OAAQA,EAAI8P,cAC5DzR,EAAI,EAAGA,EAAIN,EAAQC,OAAQK,IAAK,CACrC,GAAIlB,GAASY,EAAQM,GACjB4d,EAAMrB,KAAKzV,OAAOulC,yBAAyBvtC,EAAOoJ,KAClDokC,EAAS/vB,KAAKzV,OAAOylC,oBAAoBztC,EAAOoJ,KAChD2V,GAAgC,IAAnB/e,EAAOoG,QAAmB,GAAK,QACnC,IAAT0Y,GAAcmuB,GAAWnuB,EAAMmuB,EAAQ5/B,MAAMxM,QAC7C0D,oBAAkBkZ,KAAKmpB,cAAcgH,WAAW9uB,IAAQ/X,QAAWgY,IAEvEtB,KAAKuwB,eAAejtC,EAAK+a,cAAe0xB,EAAQzuB,EAAYsuB,EAAavuB,IACpErB,KAAKzV,OAAOimC,kBAAoBjuC,EAAOkuC,aACxCzwB,KAAKzV,OAAOmmC,mBAAmBnuC,GAEnCyd,KAAKzV,OAAOimC,kBAAmB,IAIvCwoI,EAAsB72K,UAAUouC,eAAiB,SAAU/wB,EAAI6B,EAAKC,EAAYtG,EAAMgkK,GAClF,GAAKh/J,KAAKzV,OAAO7F,cAAcvB,QAAQC,OAKnC,IAAK,GADDqE,GAAOD,OAAOC,KAAKuY,KAAKo5J,YACnB11K,EAAI,EAAGA,EAAI+D,EAAKrE,OAAQM,IAG7B,IAAK,GAFD82K,GAAOx6J,KAAKu5J,UAAU9xK,EAAK/D,IAC3Bu7K,EAAOz3K,OAAOC,KAAK+yK,GACd/2K,EAAI,EAAGA,EAAIw7K,EAAK77K,OAAQK,IAAK,CAClC,GAAIy7K,GAAOl/J,KAAKzV,OAAOmO,aAAapS,cAAc,eAAiB24K,EAAKx7K,GAAK,KACzE2B,EAAMo1K,EAAKyE,EAAKx7K,GAChB2B,GAAIhB,eACC4b,KAAK4iB,gBAAgBJ,WAItBp9B,EAAIwK,MAAMxK,EAAIN,OAAS,GAAG20B,QAAyB,KAAfnY,EAAoBlc,EAAIwK,MAAMxK,EAAIN,OAAS,GAAG20B,QAAU,EACtFr0B,EAAIwK,MAAMxK,EAAIN,OAAS,GAAG20B,QAAU,EACtCylJ,IACAA,EAAKtvK,MAAMxK,EAAIN,OAAS,GAAG20B,QAAUr0B,EAAIwK,MAAMxK,EAAIN,OAAS,GAAG20B,UANnEzZ,KAAKo7J,iBAAiBh2K,EAAK85K,EAAMz3K,EAAK/D,KAU1C0B,EAAInB,YACJ+b,KAAKm/J,iBAAiBD,EAAM79J,EAAKC,GAAY,GAC7Clc,EAAIwK,MAAMovK,GAAQr2K,QAAyB,KAAf2Y,GAE3Blc,EAAIhB,cAAiBgB,EAAInB,YAAazB,oBAAkB4C,EAAIN,UAC7DM,EAAIwK,MAAMovK,GAAQr2K,QAAyB,KAAf2Y,EAC5Blc,EAAIuD,QAAUvD,EAAIwK,MAAM+C,KAAK,SAAU8lB,GAAQ,MAAOA,GAAK2G,YAAc3G,EAAK9vB,UAC9EqX,KAAKm/J,iBAAiBD,EAAM79J,EAAKC,GAAY,EAAMlc,QA7B/Dgc,IAAgB5B,EAAI6B,EAAKC,EAAYtG,IAmC7Cg+J,EAAsB72K,UAAUi5K,iBAAmB,SAAUh2K,EAAKoa,EAAI1X,GAClE,GAAI6yK,GAASv1K,EACTg6K,EAAch6K,EAAI9C,KAClBA,EAAO0d,KAAK88G,eAAev5F,mBAAmB67I,EAAazE,EAAO71K,OAAQ61K,EAAOl8I,cAAW1xB,GAAW4tK,EAAOr8I,OAAQq8I,EAAOp8I,UACjIj8B,GAAKqJ,IAAMvG,EAAIuG,IACfrJ,EAAK6B,SAAWiB,EAAIjB,SACpB7B,EAAK46B,iBAAmB93B,EAAI83B,iBAC5Bld,KAAKu5J,UAAUzxK,GAAO1C,EAAIuG,KAAOrJ,EACjC0d,KAAKo5J,WAAWtxK,GAAOkY,KAAKw5J,YAAY1xK,GAAO1C,EAAIuG,MAAQrJ,EACvDkd,GACYQ,KAAKzV,OAAOulD,kBAAkBxpD,cAAc,SAClDsqC,aAAa5wB,KAAK4C,YAAYW,OAAOjhB,EAAM0d,KAAKzV,OAAO2L,cAAesJ,IAGpFw5J,EAAsB72K,UAAUg9K,iBAAmB,SAAU3/J,EAAI6B,EAAKC,EAAY+9J,EAAWj6K,GACzF,GAAIoa,EAAI,CACJ,GAAIpD,GAAMijK,EAAY,mBAAqB,cAC3Cv4K,qBAAkB0Y,EAAGpZ,iBAAiBgW,GAAKiF,IAAQ/X,QAAWgY,IAC1D9B,EAAGpZ,iBAAiBgW,GAAKiF,GAAK5W,UAAUC,SAAS,WACjD0G,eAAaoO,EAAGpZ,iBAAiBgW,GAAKiF,KAAQ,WAE9Cg+J,IACIj6K,EAAIuD,SAAW6W,EAAG/U,UAAUC,SAAS,UACrC0G,eAAaoO,IAAM,WAEbpa,EAAIuD,SACV5B,YAAUyY,IAAM,cAKzBw5J,GACTj0I,IC9mCEu6I,GAA+B,WAK/B,QAASA,GAAc/0K,EAAQyE,GAC3BgR,KAAKzV,OAASA,EACdyV,KAAKhR,eAAiBA,EACtBgR,KAAKghC,mBA0CT,MApCAs+H,GAAcn9K,UAAUguB,cAAgB,WACpC,MAAO,iBAKXmvJ,EAAcn9K,UAAU6+C,iBAAmB,WACnChhC,KAAKzV,OAAO2lB,aAGhBlQ,KAAKzV,OAAO6lB,GAAG41B,GAAoBhmC,KAAK4lC,oBAAqB5lC,OAKjEs/J,EAAcn9K,UAAU8rD,oBAAsB,WACtCjuC,KAAKzV,OAAO2lB,aAGhBlQ,KAAKzV,OAAOstB,IAAImuB,GAAoBhmC,KAAK4lC,sBAE7C05H,EAAcn9K,UAAUyjD,oBAAsB,WACf,SAAvB5lC,KAAKzV,OAAO+C,SACZ0S,KAAKzV,OAAO+C,OAAS0S,KAAKzV,OAAO8K,aAAaE,SAAWyK,KAAKzV,OAAOuC,eAEzE,IAAIi0C,GAAW/gC,KAAKhR,eAAeI,WAAW,kBAC1C4Q,MAAKzV,OAAO7F,cAAcouB,mBAC1BiuB,EAAS8E,YAAYt2B,aAAW6xB,QAAS,GAAI43H,IAAsBh5J,KAAKzV,OAAQyV,KAAKhR,kBAM7FswK,EAAcn9K,UAAU0rB,QAAU,WAC9B7N,KAAKiuC,uBAEFqxH,KChDPC,GAAsC,WACtC,QAASA,GAAqBh1K,GAE1ByV,KAAKw/J,UAAYj1K,EA+CrB,MA7CAg1K,GAAqBp9K,UAAU69B,OAAS,SAAU9wB,GAE9C,GAAIkjG,GAAmBzkG,EAAkBuB,EAAK3M,OAAOF,MACrD,OAAO2d,MAAKw/J,UAAU/yK,cAAc,SAChC3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKw/J,UAAU50K,QAAQJ,GAAK4nG,EAChCv3F,KAAMu3F,EAAkBzuG,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAI9E4zK,EAAqBp9K,UAAU8/G,MAAQ,SAAU/yG,GAC7C8Q,KAAKzd,OAAS2M,EAAK3M,MACnB,IAAIk9K,GAAoD,WAArCz/J,KAAKw/J,UAAUhxK,aAAaC,IAC/CuR,MAAKzL,OAAS,GAAIijG,gBAAavwG,UAC3B+K,WAAYgO,KAAKw/J,UAAUxtK,qBAAsBC,eAC7C+N,KAAKw/J,UAAUxtK,WAAa,GAAIC,eAAY+N,KAAKw/J,UAAUxtK,YAC/DH,OAAO,GAAIC,UAAQvD,OAAOW,EAAK3M,OAAOF,OAAQ8f,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,SACtGggB,QAAUhpB,MAAOsN,EAAK3M,OAAOF,OAC7BT,MAAOc,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,SAEzCuK,eAAgBtM,KAAK0/J,eAAersJ,KAAKrT,MACzCiC,YAAaw9J,EAAe,GAAKvwK,EAAK3M,OAAO8F,WAC7C2Z,eAAgBy9J,EAAe,QAAU,UAC1CvwK,EAAK3M,OAAO4mB,KAAKwB,SAChBpb,eACAyQ,KAAKzL,OAAOy3C,OAAShsC,KAAKw/J,UAAUxzH,QAExChsC,KAAKzL,OAAOkmC,SAASvrC,EAAKtE,SAE1BsE,EAAKtE,QAAQ7I,aAAa,OAAQ4L,EAAkBuB,EAAK3M,OAAOF,SAEpEk9K,EAAqBp9K,UAAUuhH,KAAO,SAAU94G,GAC5C,MAAOA,GAAQumF,cAAc,GAAGvvF,OAEpC29K,EAAqBp9K,UAAUu9K,eAAiB,SAAUC,GACtDA,EAAOj6K,OAASjD,WAAS0pG,SAASwzE,EAAOj6K,OAAQsa,KAAKzL,OAAOqW,OAAOhpB,OAAO,GACvEoe,KAAKzd,OAAOyP,aACZgO,KAAKzd,OAAOyP,WAAWA,WAAWE,KAAOytK,EAAOj6K,SAGxD65K,EAAqBp9K,UAAU0rB,QAAU,WACjC7N,KAAKzL,QACLyL,KAAKzL,OAAOsZ,WAGb0xJ,KClDPK,GAAkC,WAClC,QAASA,GAAiBC,GAEtB7/J,KAAKzV,OAASs1K,EA0ClB,MAxCAD,GAAiBz9K,UAAU69B,OAAS,SAAU9wB,GAE1C,GAAI21C,GAAYl3C,EAAkBuB,EAAK3M,OAAOF,MAC9C,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAKq6C,EAC7BhqC,KAAMgqC,EAAWlhD,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAIvEi0K,EAAiBz9K,UAAU8/G,MAAQ,SAAU/yG,GACzC8Q,KAAKzd,OAAS2M,EAAK3M,MACnB,IAAIu9K,GAAiD,WAAlC9/J,KAAKzV,OAAOiE,aAAaC,IAC5CuR,MAAKla,IAAM,GAAIi6K,YAAS94K,UACpB+K,WAAYgO,KAAKzV,OAAOyH,qBAAsBC,eAC1C+N,KAAKzV,OAAOyH,WAAa,GAAIC,eAAY+N,KAAKzV,OAAOyH,YACzDH,OAAO,GAAIC,UAAQvD,OAAOW,EAAK3M,OAAOF,OACtCuoB,QAAUhpB,MAAOsN,EAAK3M,OAAOF,OAC7BT,MAAOc,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,SACzCG,UAAWlC,KAAKzV,OAAO2X,UAAWoK,eAAgBtM,KAAKggK,WAAW3sJ,KAAKrT,MACvEiC,YAAa69J,EAAe,GAAK5wK,EAAK3M,OAAO8F,WAC7C2Z,eAAgB89J,EAAe,QAAU,SACzC39J,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,UACzDsE,EAAK3M,OAAO4mB,KAAKwB,SACpB3K,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3Bg1K,EAAiBz9K,UAAUuhH,KAAO,SAAUu8D,GACxC,MAAOA,GAAS9uF,cAAc,GAAGvvF,OAErCg+K,EAAiBz9K,UAAU69K,WAAa,SAAUz7K,GAC9CA,EAAImB,OAASjD,WAAS0pG,SAAS5nG,EAAImB,OAAQsa,KAAKla,IAAI8kB,OAAOhpB,OAAO,GAC9Doe,KAAKzd,OAAOyP,aACZgO,KAAKzd,OAAOyP,WAAWA,WAAWE,KAAO3N,EAAImB,SAGrDk6K,EAAiBz9K,UAAU0rB,QAAU,WAC7B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGV+xJ,KC9CPM,GAAqC,WACrC,QAASA,GAAoBV,GAEzBx/J,KAAKzV,OAASi1K,EAiClB,MA/BAU,GAAoB/9K,UAAU69B,OAAS,SAAU9wB,GAE7C,GAAI4vH,GAAUnxH,EAAkBuB,EAAK3M,OAAOF,MAC5C,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAKs0H,EAC7BjkH,KAAMikH,EAASn7H,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAIrEu0K,EAAoB/9K,UAAUuhH,KAAO,SAAU94G,GAC3C,MAAOA,GAAQumF,cAAc,GAAGvvF,OAEpCs+K,EAAoB/9K,UAAU8/G,MAAQ,SAAU/yG,GAC5C8Q,KAAKzd,OAAS2M,EAAK3M,MACnB,IAAIuf,GAA6C,WAAlC9B,KAAKzV,OAAOiE,aAAaC,IACxCuR,MAAKla,IAAM,GAAIq6K,eAAYl5K,UACvB2jB,QAAUC,KAAM3b,EAAK3M,OAAOF,MAAOT,MAAOsN,EAAK3M,OAAOF,OACtDT,MAAO4G,WAAS0G,EAAK3M,OAAOF,MAAO6M,EAAK6S,SACxCG,UAAWlC,KAAKzV,OAAO2X,UACvBD,YAAaH,EAAW,GAAK5S,EAAK3M,OAAO8F,WAAY+5G,YAAa,QAClEpgG,eAAgBF,EAAW,QAAU,UACtC5S,EAAK3M,OAAO4mB,KAAKwB,SACpB3K,KAAKla,IAAI20C,SAASvrC,EAAKtE,SACvBsE,EAAKtE,QAAQ7I,aAAa,OAAQ4L,EAAkBuB,EAAK3M,OAAOF,SAEpE69K,EAAoB/9K,UAAU0rB,QAAU,WAChC7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGVqyJ,KCpCPE,GAAoC,WACpC,QAASA,GAAmBv8K,GACxBmc,KAAKzV,OAAS1G,EAiClB,MA/BAu8K,GAAmBj+K,UAAU69B,OAAS,SAAU9wB,GAE5C,GAAImxK,GAAe1yK,EAAkBuB,EAAK3M,OAAOF,MACjD,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK61K,EAC7BxlK,KAAMwlK,EAAc18K,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAI1Ey0K,EAAmBj+K,UAAUuhH,KAAO,SAAU94G,GAC1C,MAAOA,GAAQumF,cAAc,GAAGvvF,OAEpCw+K,EAAmBj+K,UAAU8/G,MAAQ,SAAU/yG,GAC3C,GAAIuwK,GAAiD,WAAlCz/J,KAAKzV,OAAOiE,aAAaC,KACxC6xK,EAAe59K,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,QACrDu+J,GAAeA,EAAe,GAAIntK,MAAKmtK,GAAgB,KACvDtgK,KAAKla,IAAM,GAAIy6K,cAAWt5K,UACtB+a,eAAgBy9J,EAAe,QAAU,SACzC79K,MAAO0+K,EACPr+J,YAAaw9J,EACT,GAAKvwK,EAAK3M,OAAO8F,WAAY6Z,UAAWlC,KAAKzV,OAAO2X,UACxDC,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,UACzDsE,EAAK3M,OAAO4mB,KAAKwB,SACpB3K,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3Bw1K,EAAmBj+K,UAAU0rB,QAAU,WAC/B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGVuyJ,KClCPI,GAAgC,WAChC,QAASA,GAAeX,GACpB7/J,KAAK04H,eAAiB,wBAAyB,YAC/C14H,KAAKzV,OAASs1K,EAiElB,MA/DAW,GAAer+K,UAAU69B,OAAS,SAAU9wB,GACxC,GAAInB,GAAMmB,EAAK3M,OACXo2I,EAAa,oBACA,cAAb5qI,EAAIpK,OACJg1I,EAAa,wCAEjB,IAAI0nC,GAAe1yK,EAAkBuB,EAAK3M,OAAOF,MACjD,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW6vI,EAAYr9G,OACnB33B,KAAM,WAAY/B,MAAOsN,EAAKtN,MAAO0/B,eAAgBvzB,EAAIpC,IACzDnB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAK61K,EAC7BxlK,KAAMwlK,MAIlBG,EAAer+K,UAAUuhH,KAAO,SAAU94G,GACtC,MAAOA,GAAQmG,SAEnByvK,EAAer+K,UAAU8/G,MAAQ,SAAU/yG,GACvC,GAAIuxK,GACA3tG,CAQJ,IANKtwE,oBAAkB0M,EAAK9J,OACxBq7K,EAAgBvxK,EAAK9J,IAAIkB,cAAc,wBAEvC5D,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,WAClC+wD,EAAa14D,KAAKC,MAAM3X,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,SAAS9R,WAAW9H,iBAE7E3F,oBAAkBi+K,GAAgB,CAGnC,GAFAzgK,KAAK4J,SAAW5J,KAAKzV,OAAOiE,aAAaC,KACzCuR,KAAK64H,QAAU3pI,EAAK9J,IACK,QAArB8J,EAAKkT,YAAuB,CAC5B,GAAIhd,GAAM4a,KAAKzV,OAAOqgC,oBAAoB17B,EAAK9J,IAAIslC,aAAa,YAChEooC,KAAa1tE,GAAMA,EAAIoe,WAE3B7T,EAAuB0wB,UAAM,OAAYh1B,MAAMC,KAAK4D,EAAK9J,IAAIgB,iBAAiB,eAAgB0sE,GAAYt8D,OAAOwJ,KAAK04H,gBAE1H14H,KAAKla,IAAM,GAAI46K,UAAOz5K,UAClB41C,MAAyC,WAAlC78B,KAAKzV,OAAOiE,aAAaC,KAAoB,IAAMS,EAAK3M,OAAO8F,WACtE0I,QAAS+hE,EACTrqB,UAAW36C,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,SAAUsX,UAAWlC,KAAKzV,OAAO2X,UAC3FkzF,OAAQp1F,KAAK2gK,iBAAiBttJ,KAAKrT,OACpC9Q,EAAK3M,OAAO4mB,KAAKwB,SACpB3K,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3B41K,EAAer+K,UAAUw+K,iBAAmB,SAAUzxK,GAClD,GAAI8Q,KAAK64H,SAA6B,WAAlB74H,KAAK4J,SAAuB,CAC5C,GAAI7iB,IAAW,CACVmI,GAAK6B,SAINhK,GAAW,EACXiZ,KAAK64H,QAAQ92I,aAAa,gBAAiBgF,EAASkJ,aAJpD+P,KAAK64H,QAAQ/2I,gBAAgB,iBAMjC6N,EAAuB0wB,UAAM,OAAYh1B,MAAMC,KAAK0U,KAAK64H,QAAQzyI,iBAAiB,eAAgBW,GAAUyP,OAAOwJ,KAAK04H,kBAGhI8nC,EAAer+K,UAAU0rB,QAAU,WAC3B7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGV2yJ,KCrEPI,GAAuC,WACvC,QAASA,GAAsBC,GAE3B7gK,KAAKzV,OAASs2K,EAgClB,MA9BAD,GAAsBz+K,UAAU69B,OAAS,SAAU9wB,GAE/C,GAAI4xK,GAAcnzK,EAAkBuB,EAAK3M,OAAOF,MAChD,OAAO2d,MAAKzV,OAAOkC,cAAc,SAC7B3D,UAAW,UAAWwyB,OAClB9wB,GAAIwV,KAAKzV,OAAOK,QAAQJ,GAAKs2K,EAC7BjmK,KAAMimK,EAAan9K,KAAM,OAAQ29B,eAAgBpyB,EAAK3M,OAAOoJ,QAIzEi1K,EAAsBz+K,UAAU8/G,MAAQ,SAAU/yG,GAC9C8Q,KAAKzd,OAAS2M,EAAK3M,MACnB,IAAIk9K,GAAiD,WAAlCz/J,KAAKzV,OAAOiE,aAAaC,IAC5CuR,MAAKla,IAAM,GAAIi7K,iBAAc95K,UACzB2jB,QAAUhpB,MAAOsN,EAAK3M,OAAOF,OAC7BT,MAAOc,GAAUwM,EAAK3M,OAAOF,MAAO6M,EAAK6S,SACzCC,eAAgBy9J,EAAe,QAAU,SACzCuB,KAAM,eACN7+J,QAASrU,EAAWoB,EAAK3M,OAAQ2M,EAAKkT,YAAalT,EAAKtE,UACzDsE,EAAK3M,OAAO4mB,KAAKwB,SACpB3K,KAAKla,IAAI20C,SAASvrC,EAAKtE,UAE3Bg2K,EAAsBz+K,UAAUuhH,KAAO,SAAU94G,GAC7C,MAAOA,GAAQumF,cAAc,GAAGvvF,OAEpCg/K,EAAsBz+K,UAAU0rB,QAAU,WAClC7N,KAAKla,KACLka,KAAKla,IAAI+nB,WAGV+yJ,WCzCXK,IAAWx8F,OAAOy8F,GAAcC,GAAYC,GAAiBC,GAAYC,GAAaC,GAAeC,GAAaC,GAAiBC,GAAeC,GAAiBC,GAAcC,GAAqBC,GAAYC,GAAcC,GAAmBC,GAAiBC,GAAqBC,GAAmBC,GAAcC,GAAkBC,GAAqBC,GAAkBC,GAAoBC,GAAsBC,6rE5GAxY,qBAEE,iBAEL,sBAEQ,+BAEC,iCAEC,sEAMD,8CAID,6BAED,+BAEG,iCAED,gCAEA,+BAED,iCAEG,mCAED,mCAEC,mCAED,qCAEG,uCAED,0JAgBL,8BAEE,kCAEE,iCAEH,0BAEJ,yBAEG,4BAEA,+BAEG,qCAEG,sCAEF,8BAEN,uBAED,sBAEA,uBAEC,qBAEH,qBAEG,sBAEF,8BAEU,kCAEN,gCAEI,4CAEQ,wCAEZ,yBAEH,wBAEE,8BAEI,8BAEJ,2BAEC,+BAEG,uCAEK,wCAEJ,qCAEC,uCAEC,mCAEL,oCAEM,2CAEC,8CAEE,sNAyBZ,8BAEG,8BAEH,+BAEG,iCAED,mCAEG,mCAEH,mCAEG,oCAEF,2DAIO,gDAEG,uCAEZ,iCAEG,mCAED,qCAEG,wCAEA,2CAEM,iDAED,6CAEH,yCAEA,sCAEG,qCAEA,4CAEG,sCAEL,wCAEG,oDAIV,4FAUL,8BAEY,mEAIJ,kIAYC,uDAIP,0CAIA,0CAIM,8CAIL,4BAEG,2BAEJ,0BAEG,8BAEC,8BAED,gCAEG,oEAMJ,iDAIC,2BAEF,iCAEQ,0CAEE,2CAED,gDAEM,mDAEH,0CAEN,sCAEE,uCAED,4CAEM,2CAEP,sCAEC,qDAIH,kCAEE,oCAEA,mCAED,8BAEJ,mCAES,wCAEJ,2CAEK,2CAEH,oCAEJ,gCAEA,iCAEC,yCAEO,0CAEN,sCAEE,iCAEP,iCAEM,kCAEJ,iCAEG,gCAEJ,4BAEA,iCAEI,2EAMF,sCAEK,wCAEH,iEAII,kCAEV,mCAEM,gCAEE,8CAEI,0CAEP,2CAEQ,4CAEN,0DAIH,iFAMM,gDAED,gDAEH,wCAEE,oCAEL,oCAEK,6CAEG,6CAEH,yCAED,oDAEY,8DAEJ,wDAED,iDAEN,4CAEE,oCAEV,2CAEkB,2GAMR,gDAEE,8CAEJ,yCAED,6CAEK,+CAEH,0CAEF,2CAEG,0CAEJ,uCAEE,0CAEA,oDAEU,qDAEP,wCAER,4CAEa,0DAEE,8CAEd,sCAEQ,2CAER,0CAES,qEAIF,wDAEQ,+DAEF,qDAER,iDAEK,0DAEG,6DAED,uDAEL,oDAEI,gDAER,2CAEG,mDAEK,4DAEE,gDAEb,mDAEiB,0DAEZ,2CAED,8CAEI,sDAEG,gEAEG,6DAEN,8CAEJ,0CAEA,4CAEE,qDAEO,4DAEF,8CAEX,oCAEE,4CAEM,oDAEC"}